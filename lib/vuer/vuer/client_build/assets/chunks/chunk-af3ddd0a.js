import{g as dE,r as E,R as Ue,$ as v$}from"./chunk-3010a972.js";import{_ as P4}from"./chunk-cf010ec4.js";import{R as pE,r as L4}from"./chunk-d9bdcef8.js";var nD={exports:{}};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var K6=Object.getOwnPropertySymbols,y$=Object.prototype.hasOwnProperty,x$=Object.prototype.propertyIsEnumerable;function E$(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function _$(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var b$=_$()?Object.assign:function(t,e){for(var n,r=E$(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)y$.call(n,o)&&(r[o]=n[o]);if(K6){i=K6(n);for(var a=0;a<i.length;a++)x$.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r};const A$=dE(b$);var Jb,J6;function T$(){if(J6)return Jb;J6=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Jb=t,Jb}var Qb,Q6;function w$(){if(Q6)return Qb;Q6=1;var t=T$();function e(){}function n(){}return n.resetWarningCache=e,Qb=function(){function r(o,a,l,c,u,f){if(f!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},Qb}nD.exports=w$()();var S$=nD.exports;const Qr=dE(S$);function C$(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var rD=E,M$=C$(rD);function Z6(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R$(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var I$=!!(typeof window<"u"&&window.document&&window.document.createElement);function P$(t,e,n){if(typeof t!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof e!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof n<"u"&&typeof n!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(i){return i.displayName||i.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],a;function l(){a=t(o.map(function(u){return u.props})),c.canUseDOM?e(a):n&&(a=n(a))}var c=function(u){R$(f,u);function f(){return u.apply(this,arguments)||this}f.peek=function(){return a},f.rewind=function(){if(f.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var p=a;return a=void 0,o=[],p};var h=f.prototype;return h.UNSAFE_componentWillMount=function(){o.push(this),l()},h.componentDidUpdate=function(){l()},h.componentWillUnmount=function(){var p=o.indexOf(this);o.splice(p,1),l()},h.render=function(){return M$.createElement(s,this.props)},f}(rD.PureComponent);return Z6(c,"displayName","SideEffect("+r(s)+")"),Z6(c,"canUseDOM",I$),c}}var L$=P$;const N$=dE(L$);var O$=typeof Element<"u",D$=typeof Map=="function",B$=typeof Set=="function",k$=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function $x(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!$x(t[r],e[r]))return!1;return!0}var s;if(D$&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;for(s=t.entries();!(r=s.next()).done;)if(!$x(r.value[1],e.get(r.value[0])))return!1;return!0}if(B$&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(k$&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;if(O$&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&t.$$typeof)&&!$x(t[i[r]],e[i[r]]))return!1;return!0}return t!==t&&e!==e}var F$=function(e,n){try{return $x(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const U$=dE(F$);var qf={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Hn={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Hn).map(function(t){return Hn[t]});var ni={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},d3={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},N1={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},z$=Object.keys(d3).reduce(function(t,e){return t[d3[e]]=e,t},{}),H$=[Hn.NOSCRIPT,Hn.SCRIPT,Hn.STYLE],ll="data-react-helmet",G$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V$=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},W$=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),So=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j$=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},e9=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},$$=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},rw=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},X$=function(e){var n=yp(e,Hn.TITLE),r=yp(e,N1.TITLE_TEMPLATE);if(r&&n)return r.replace(/%s/g,function(){return Array.isArray(n)?n.join(""):n});var i=yp(e,N1.DEFAULT_TITLE);return n||i||void 0},Y$=function(e){return yp(e,N1.ON_CHANGE_CLIENT_STATE)||function(){}},Zb=function(e,n){return n.filter(function(r){return typeof r[e]<"u"}).map(function(r){return r[e]}).reduce(function(r,i){return So({},r,i)},{})},q$=function(e,n){return n.filter(function(r){return typeof r[Hn.BASE]<"u"}).map(function(r){return r[Hn.BASE]}).reverse().reduce(function(r,i){if(!r.length)for(var s=Object.keys(i),o=0;o<s.length;o++){var a=s[o],l=a.toLowerCase();if(e.indexOf(l)!==-1&&i[l])return r.concat(i)}return r},[])},Gm=function(e,n,r){var i={};return r.filter(function(s){return Array.isArray(s[e])?!0:(typeof s[e]<"u"&&Z$("Helmet: "+e+' should be of type "Array". Instead found type "'+G$(s[e])+'"'),!1)}).map(function(s){return s[e]}).reverse().reduce(function(s,o){var a={};o.filter(function(h){for(var d=void 0,p=Object.keys(h),m=0;m<p.length;m++){var g=p[m],v=g.toLowerCase();n.indexOf(v)!==-1&&!(d===ni.REL&&h[d].toLowerCase()==="canonical")&&!(v===ni.REL&&h[v].toLowerCase()==="stylesheet")&&(d=v),n.indexOf(g)!==-1&&(g===ni.INNER_HTML||g===ni.CSS_TEXT||g===ni.ITEM_PROP)&&(d=g)}if(!d||!h[d])return!1;var x=h[d].toLowerCase();return i[d]||(i[d]={}),a[d]||(a[d]={}),i[d][x]?!1:(a[d][x]=!0,!0)}).reverse().forEach(function(h){return s.push(h)});for(var l=Object.keys(a),c=0;c<l.length;c++){var u=l[c],f=A$({},i[u],a[u]);i[u]=f}return s},[]).reverse()},yp=function(e,n){for(var r=e.length-1;r>=0;r--){var i=e[r];if(i.hasOwnProperty(n))return i[n]}return null},K$=function(e){return{baseTag:q$([ni.HREF,ni.TARGET],e),bodyAttributes:Zb(qf.BODY,e),defer:yp(e,N1.DEFER),encode:yp(e,N1.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Zb(qf.HTML,e),linkTags:Gm(Hn.LINK,[ni.REL,ni.HREF],e),metaTags:Gm(Hn.META,[ni.NAME,ni.CHARSET,ni.HTTPEQUIV,ni.PROPERTY,ni.ITEM_PROP],e),noscriptTags:Gm(Hn.NOSCRIPT,[ni.INNER_HTML],e),onChangeClientState:Y$(e),scriptTags:Gm(Hn.SCRIPT,[ni.SRC,ni.INNER_HTML],e),styleTags:Gm(Hn.STYLE,[ni.CSS_TEXT],e),title:X$(e),titleAttributes:Zb(qf.TITLE,e)}},iw=function(){var t=Date.now();return function(e){var n=Date.now();n-t>16?(t=n,e(n)):setTimeout(function(){iw(e)},0)}}(),t9=function(e){return clearTimeout(e)},J$=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||iw:global.requestAnimationFrame||iw,Q$=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||t9:global.cancelAnimationFrame||t9,Z$=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},Vm=null,eX=function(e){Vm&&Q$(Vm),e.defer?Vm=J$(function(){n9(e,function(){Vm=null})}):(n9(e),Vm=null)},n9=function(e,n){var r=e.baseTag,i=e.bodyAttributes,s=e.htmlAttributes,o=e.linkTags,a=e.metaTags,l=e.noscriptTags,c=e.onChangeClientState,u=e.scriptTags,f=e.styleTags,h=e.title,d=e.titleAttributes;sw(Hn.BODY,i),sw(Hn.HTML,s),tX(h,d);var p={baseTag:jh(Hn.BASE,r),linkTags:jh(Hn.LINK,o),metaTags:jh(Hn.META,a),noscriptTags:jh(Hn.NOSCRIPT,l),scriptTags:jh(Hn.SCRIPT,u),styleTags:jh(Hn.STYLE,f)},m={},g={};Object.keys(p).forEach(function(v){var x=p[v],y=x.newTags,A=x.oldTags;y.length&&(m[v]=y),A.length&&(g[v]=p[v].oldTags)}),n&&n(),c(e,m,g)},iD=function(e){return Array.isArray(e)?e.join(""):e},tX=function(e,n){typeof e<"u"&&document.title!==e&&(document.title=iD(e)),sw(Hn.TITLE,n)},sw=function(e,n){var r=document.getElementsByTagName(e)[0];if(r){for(var i=r.getAttribute(ll),s=i?i.split(","):[],o=[].concat(s),a=Object.keys(n),l=0;l<a.length;l++){var c=a[l],u=n[c]||"";r.getAttribute(c)!==u&&r.setAttribute(c,u),s.indexOf(c)===-1&&s.push(c);var f=o.indexOf(c);f!==-1&&o.splice(f,1)}for(var h=o.length-1;h>=0;h--)r.removeAttribute(o[h]);s.length===o.length?r.removeAttribute(ll):r.getAttribute(ll)!==a.join(",")&&r.setAttribute(ll,a.join(","))}},jh=function(e,n){var r=document.head||document.querySelector(Hn.HEAD),i=r.querySelectorAll(e+"["+ll+"]"),s=Array.prototype.slice.call(i),o=[],a=void 0;return n&&n.length&&n.forEach(function(l){var c=document.createElement(e);for(var u in l)if(l.hasOwnProperty(u))if(u===ni.INNER_HTML)c.innerHTML=l.innerHTML;else if(u===ni.CSS_TEXT)c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{var f=typeof l[u]>"u"?"":l[u];c.setAttribute(u,f)}c.setAttribute(ll,"true"),s.some(function(h,d){return a=d,c.isEqualNode(h)})?s.splice(a,1):o.push(c)}),s.forEach(function(l){return l.parentNode.removeChild(l)}),o.forEach(function(l){return r.appendChild(l)}),{oldTags:s,newTags:o}},sD=function(e){return Object.keys(e).reduce(function(n,r){var i=typeof e[r]<"u"?r+'="'+e[r]+'"':""+r;return n?n+" "+i:i},"")},nX=function(e,n,r,i){var s=sD(r),o=iD(n);return s?"<"+e+" "+ll+'="true" '+s+">"+rw(o,i)+"</"+e+">":"<"+e+" "+ll+'="true">'+rw(o,i)+"</"+e+">"},rX=function(e,n,r){return n.reduce(function(i,s){var o=Object.keys(s).filter(function(c){return!(c===ni.INNER_HTML||c===ni.CSS_TEXT)}).reduce(function(c,u){var f=typeof s[u]>"u"?u:u+'="'+rw(s[u],r)+'"';return c?c+" "+f:f},""),a=s.innerHTML||s.cssText||"",l=H$.indexOf(e)===-1;return i+"<"+e+" "+ll+'="true" '+o+(l?"/>":">"+a+"</"+e+">")},"")},oD=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,i){return r[d3[i]||i]=e[i],r},n)},iX=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,i){return r[z$[i]||i]=e[i],r},n)},sX=function(e,n,r){var i,s=(i={key:n},i[ll]=!0,i),o=oD(r,s);return[Ue.createElement(Hn.TITLE,o,n)]},oX=function(e,n){return n.map(function(r,i){var s,o=(s={key:i},s[ll]=!0,s);return Object.keys(r).forEach(function(a){var l=d3[a]||a;if(l===ni.INNER_HTML||l===ni.CSS_TEXT){var c=r.innerHTML||r.cssText;o.dangerouslySetInnerHTML={__html:c}}else o[l]=r[a]}),Ue.createElement(e,o)})},ic=function(e,n,r){switch(e){case Hn.TITLE:return{toComponent:function(){return sX(e,n.title,n.titleAttributes)},toString:function(){return nX(e,n.title,n.titleAttributes,r)}};case qf.BODY:case qf.HTML:return{toComponent:function(){return oD(n)},toString:function(){return sD(n)}};default:return{toComponent:function(){return oX(e,n)},toString:function(){return rX(e,n,r)}}}},aD=function(e){var n=e.baseTag,r=e.bodyAttributes,i=e.encode,s=e.htmlAttributes,o=e.linkTags,a=e.metaTags,l=e.noscriptTags,c=e.scriptTags,u=e.styleTags,f=e.title,h=f===void 0?"":f,d=e.titleAttributes;return{base:ic(Hn.BASE,n,i),bodyAttributes:ic(qf.BODY,r,i),htmlAttributes:ic(qf.HTML,s,i),link:ic(Hn.LINK,o,i),meta:ic(Hn.META,a,i),noscript:ic(Hn.NOSCRIPT,l,i),script:ic(Hn.SCRIPT,c,i),style:ic(Hn.STYLE,u,i),title:ic(Hn.TITLE,{title:h,titleAttributes:d},i)}},aX=function(e){var n,r;return r=n=function(i){j$(s,i);function s(){return V$(this,s),$$(this,i.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(a){return!U$(this.props,a)},s.prototype.mapNestedChildrenToProps=function(a,l){if(!l)return null;switch(a.type){case Hn.SCRIPT:case Hn.NOSCRIPT:return{innerHTML:l};case Hn.STYLE:return{cssText:l}}throw new Error("<"+a.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(a){var l,c=a.child,u=a.arrayTypeChildren,f=a.newChildProps,h=a.nestedChildren;return So({},u,(l={},l[c.type]=[].concat(u[c.type]||[],[So({},f,this.mapNestedChildrenToProps(c,h))]),l))},s.prototype.mapObjectTypeChildren=function(a){var l,c,u=a.child,f=a.newProps,h=a.newChildProps,d=a.nestedChildren;switch(u.type){case Hn.TITLE:return So({},f,(l={},l[u.type]=d,l.titleAttributes=So({},h),l));case Hn.BODY:return So({},f,{bodyAttributes:So({},h)});case Hn.HTML:return So({},f,{htmlAttributes:So({},h)})}return So({},f,(c={},c[u.type]=So({},h),c))},s.prototype.mapArrayTypeChildrenToProps=function(a,l){var c=So({},l);return Object.keys(a).forEach(function(u){var f;c=So({},c,(f={},f[u]=a[u],f))}),c},s.prototype.warnOnInvalidChildren=function(a,l){return!0},s.prototype.mapChildrenToProps=function(a,l){var c=this,u={};return Ue.Children.forEach(a,function(f){if(!(!f||!f.props)){var h=f.props,d=h.children,p=e9(h,["children"]),m=iX(p);switch(c.warnOnInvalidChildren(f,d),f.type){case Hn.LINK:case Hn.META:case Hn.NOSCRIPT:case Hn.SCRIPT:case Hn.STYLE:u=c.flattenArrayTypeChildren({child:f,arrayTypeChildren:u,newChildProps:m,nestedChildren:d});break;default:l=c.mapObjectTypeChildren({child:f,newProps:l,newChildProps:m,nestedChildren:d});break}}}),l=this.mapArrayTypeChildrenToProps(u,l),l},s.prototype.render=function(){var a=this.props,l=a.children,c=e9(a,["children"]),u=So({},c);return l&&(u=this.mapChildrenToProps(l,u)),Ue.createElement(e,u)},W$(s,null,[{key:"canUseDOM",set:function(a){e.canUseDOM=a}}]),s}(Ue.Component),n.propTypes={base:Qr.object,bodyAttributes:Qr.object,children:Qr.oneOfType([Qr.arrayOf(Qr.node),Qr.node]),defaultTitle:Qr.string,defer:Qr.bool,encodeSpecialCharacters:Qr.bool,htmlAttributes:Qr.object,link:Qr.arrayOf(Qr.object),meta:Qr.arrayOf(Qr.object),noscript:Qr.arrayOf(Qr.object),onChangeClientState:Qr.func,script:Qr.arrayOf(Qr.object),style:Qr.arrayOf(Qr.object),title:Qr.string,titleAttributes:Qr.object,titleTemplate:Qr.string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=e.peek,n.rewind=function(){var i=e.rewind();return i||(i=aD({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},r},lX=function(){return null},cX=N$(K$,eX,aD)(lX),r9=aX(cX);r9.renderStatic=r9.rewind;var uX=Object.defineProperty,fX=(t,e,n)=>e in t?uX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,i9=(t,e,n)=>(fX(t,typeof e!="symbol"?e+"":e,n),n),Cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function go(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lD={exports:{}},Wm={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s9;function hX(){if(s9)return Wm;s9=1;var t=Ue,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,f={},h=null,d=null;c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(d=l.ref);for(u in l)r.call(l,u)&&!s.hasOwnProperty(u)&&(f[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)f[u]===void 0&&(f[u]=l[u]);return{$$typeof:e,type:a,key:h,ref:d,props:f,_owner:i.current}}return Wm.Fragment=n,Wm.jsx=o,Wm.jsxs=o,Wm}lD.exports=hX();var ce=lD.exports;const cD="%[a-f0-9]{2}",o9=new RegExp("("+cD+")|([^%]+?)","gi"),a9=new RegExp("("+cD+")+","gi");function ow(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;const n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],ow(n),ow(r))}function dX(t){try{return decodeURIComponent(t)}catch{let e=t.match(o9)||[];for(let n=1;n<e.length;n++)t=ow(e,n).join(""),e=t.match(o9)||[];return t}}function pX(t){const e={"%FE%FF":"��","%FF%FE":"��"};let n=a9.exec(t);for(;n;){try{e[n[0]]=decodeURIComponent(n[0])}catch{const i=dX(n[0]);i!==n[0]&&(e[n[0]]=i)}n=a9.exec(t)}e["%C2"]="�";const r=Object.keys(e);for(const i of r)t=t.replace(new RegExp(i,"g"),e[i]);return t}function mX(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return pX(t)}}function uD(t,e){if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t===""||e==="")return[];const n=t.indexOf(e);return n===-1?[]:[t.slice(0,n),t.slice(n+e.length)]}function gX(t,e){const n={};if(Array.isArray(e))for(const r of e){const i=Object.getOwnPropertyDescriptor(t,r);i!=null&&i.enumerable&&Object.defineProperty(n,r,i)}else for(const r of Reflect.ownKeys(t)){const i=Object.getOwnPropertyDescriptor(t,r);if(i.enumerable){const s=t[r];e(r,s,t)&&Object.defineProperty(n,r,i)}}return n}const vX=t=>t==null,yX=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),aw=Symbol("encodeFragmentIdentifier");function xX(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{const i=n.length;return r===void 0||t.skipNull&&r===null||t.skipEmptyString&&r===""?n:r===null?[...n,[Wi(e,t),"[",i,"]"].join("")]:[...n,[Wi(e,t),"[",Wi(i,t),"]=",Wi(r,t)].join("")]};case"bracket":return e=>(n,r)=>r===void 0||t.skipNull&&r===null||t.skipEmptyString&&r===""?n:r===null?[...n,[Wi(e,t),"[]"].join("")]:[...n,[Wi(e,t),"[]=",Wi(r,t)].join("")];case"colon-list-separator":return e=>(n,r)=>r===void 0||t.skipNull&&r===null||t.skipEmptyString&&r===""?n:r===null?[...n,[Wi(e,t),":list="].join("")]:[...n,[Wi(e,t),":list=",Wi(r,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e=t.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(r,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?r:(i=i===null?"":i,r.length===0?[[Wi(n,t),e,Wi(i,t)].join("")]:[[r,Wi(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(n,r)=>r===void 0||t.skipNull&&r===null||t.skipEmptyString&&r===""?n:r===null?[...n,Wi(e,t)]:[...n,[Wi(e,t),"=",Wi(r,t)].join("")]}}function EX(t){let e;switch(t.arrayFormat){case"index":return(n,r,i)=>{if(e=/\[(\d*)]$/.exec(n),n=n.replace(/\[\d*]$/,""),!e){i[n]=r;return}i[n]===void 0&&(i[n]={}),i[n][e[1]]=r};case"bracket":return(n,r,i)=>{if(e=/(\[])$/.exec(n),n=n.replace(/\[]$/,""),!e){i[n]=r;return}if(i[n]===void 0){i[n]=[r];return}i[n]=[...i[n],r]};case"colon-list-separator":return(n,r,i)=>{if(e=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!e){i[n]=r;return}if(i[n]===void 0){i[n]=[r];return}i[n]=[...i[n],r]};case"comma":case"separator":return(n,r,i)=>{const s=typeof r=="string"&&r.includes(t.arrayFormatSeparator),o=typeof r=="string"&&!s&&bc(r,t).includes(t.arrayFormatSeparator);r=o?bc(r,t):r;const a=s||o?r.split(t.arrayFormatSeparator).map(l=>bc(l,t)):r===null?r:bc(r,t);i[n]=a};case"bracket-separator":return(n,r,i)=>{const s=/(\[])$/.test(n);if(n=n.replace(/\[]$/,""),!s){i[n]=r&&bc(r,t);return}const o=r===null?[]:r.split(t.arrayFormatSeparator).map(a=>bc(a,t));if(i[n]===void 0){i[n]=o;return}i[n]=[...i[n],...o]};default:return(n,r,i)=>{if(i[n]===void 0){i[n]=r;return}i[n]=[...[i[n]].flat(),r]}}}function fD(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Wi(t,e){return e.encode?e.strict?yX(t):encodeURIComponent(t):t}function bc(t,e){return e.decode?mX(t):t}function hD(t){return Array.isArray(t)?t.sort():typeof t=="object"?hD(Object.keys(t)).sort((e,n)=>Number(e)-Number(n)).map(e=>t[e]):t}function dD(t){const e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function _X(t){let e="";const n=t.indexOf("#");return n!==-1&&(e=t.slice(n)),e}function l9(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function N4(t){t=dD(t);const e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function O4(t,e){e={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...e},fD(e.arrayFormatSeparator);const n=EX(e),r=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return r;for(const i of t.split("&")){if(i==="")continue;const s=e.decode?i.replace(/\+/g," "):i;let[o,a]=uD(s,"=");o===void 0&&(o=s),a=a===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:bc(a,e),n(bc(o,e),a,r)}for(const[i,s]of Object.entries(r))if(typeof s=="object"&&s!==null)for(const[o,a]of Object.entries(s))s[o]=l9(a,e);else r[i]=l9(s,e);return e.sort===!1?r:(e.sort===!0?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce((i,s)=>{const o=r[s];return o&&typeof o=="object"&&!Array.isArray(o)?i[s]=hD(o):i[s]=o,i},Object.create(null))}function pD(t,e){if(!t)return"";e={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...e},fD(e.arrayFormatSeparator);const n=o=>e.skipNull&&vX(t[o])||e.skipEmptyString&&t[o]==="",r=xX(e),i={};for(const[o,a]of Object.entries(t))n(o)||(i[o]=a);const s=Object.keys(i);return e.sort!==!1&&s.sort(e.sort),s.map(o=>{const a=t[o];return a===void 0?"":a===null?Wi(o,e):Array.isArray(a)?a.length===0&&e.arrayFormat==="bracket-separator"?Wi(o,e)+"[]":a.reduce(r(o),[]).join("&"):Wi(o,e)+"="+Wi(a,e)}).filter(o=>o.length>0).join("&")}function mD(t,e){var n;e={decode:!0,...e};let[r,i]=uD(t,"#");return r===void 0&&(r=t),{url:((n=r==null?void 0:r.split("?"))==null?void 0:n[0])??"",query:O4(N4(t),e),...e&&e.parseFragmentIdentifier&&i?{fragmentIdentifier:bc(i,e)}:{}}}function gD(t,e){e={encode:!0,strict:!0,[aw]:!0,...e};const n=dD(t.url).split("?")[0]||"",r=N4(t.url),i={...O4(r,{sort:!1}),...t.query};let s=pD(i,e);s&&(s=`?${s}`);let o=_X(t.url);if(t.fragmentIdentifier){const a=new URL(n);a.hash=t.fragmentIdentifier,o=e[aw]?a.hash:`#${t.fragmentIdentifier}`}return`${n}${s}${o}`}function vD(t,e,n){n={parseFragmentIdentifier:!0,[aw]:!1,...n};const{url:r,query:i,fragmentIdentifier:s}=mD(t,n);return gD({url:r,query:gX(i,e),fragmentIdentifier:s},n)}function bX(t,e,n){const r=Array.isArray(e)?i=>!e.includes(i):(i,s)=>!e(i,s);return vD(t,r,n)}const $u=Object.freeze(Object.defineProperty({__proto__:null,exclude:bX,extract:N4,parse:O4,parseUrl:mD,pick:vD,stringify:pD,stringifyUrl:gD},Symbol.toStringTag,{value:"Module"}));function Ct(){return Ct=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ct.apply(this,arguments)}function AX(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function yD(...t){return e=>t.forEach(n=>AX(n,e))}function Hp(...t){return E.useCallback(yD(...t),t)}const xD=E.forwardRef((t,e)=>{const{children:n,...r}=t,i=E.Children.toArray(n),s=i.find(TX);if(s){const o=s.props.children,a=i.map(l=>l===s?E.Children.count(o)>1?E.Children.only(null):E.isValidElement(o)?o.props.children:null:l);return E.createElement(lw,Ct({},r,{ref:e}),E.isValidElement(o)?E.cloneElement(o,void 0,a):null)}return E.createElement(lw,Ct({},r,{ref:e}),n)});xD.displayName="Slot";const lw=E.forwardRef((t,e)=>{const{children:n,...r}=t;return E.isValidElement(n)?E.cloneElement(n,{...wX(r,n.props),ref:e?yD(e,n.ref):n.ref}):E.Children.count(n)>1?E.Children.only(null):null});lw.displayName="SlotClone";const ED=({children:t})=>E.createElement(E.Fragment,null,t);function TX(t){return E.isValidElement(t)&&t.type===ED}function wX(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const SX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Eh=SX.reduce((t,e)=>{const n=E.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?xD:e;return E.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),E.createElement(a,Ct({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function CX(t,e){t&&L4.flushSync(()=>t.dispatchEvent(e))}const MX=E.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?pE.createPortal(E.createElement(Eh.div,Ct({},i,{ref:e})),r):null}),RX=MX;var c9=Object.prototype.hasOwnProperty;function O1(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&O1(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(c9.call(t,n)&&++r&&!c9.call(e,n)||!(n in e)||!O1(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function dg(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var mE=function(e,n,r,i){this.name=e,this.fn=n,this.args=r,this.modifiers=i};mE.prototype._test=function(e){var n=this.fn;try{xp(this.modifiers.slice(),n,this)(e)}catch{n=function(){return!1}}try{return xp(this.modifiers.slice(),n,this)(e)}catch{return!1}};mE.prototype._check=function(e){try{xp(this.modifiers.slice(),this.fn,this)(e)}catch{if(xp(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!xp(this.modifiers.slice(),this.fn,this)(e))throw null};mE.prototype._testAsync=function(e){var n=this;return new Promise(function(r,i){bD(n.modifiers.slice(),n.fn,n)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function _D(t,e){return e===void 0&&(e="simple"),typeof t=="object"?t[e]:t}function xp(t,e,n){if(t.length){var r=t.shift(),i=xp(t,e,n);return r.perform(i,n)}else return _D(e)}function bD(t,e,n){if(t.length){var r=t.shift(),i=bD(t,e,n);return r.performAsync(i,n)}else return function(s){return Promise.resolve(_D(e,"async")(s))}}var IX=function(e,n,r){this.name=e,this.perform=n,this.performAsync=r},D4=function(t){function e(n,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];t.call(this,o),t.captureStackTrace&&t.captureStackTrace(this,e),this.rule=n,this.value=r,this.cause=i,this.target=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),jl=function(e,n){e===void 0&&(e=[]),n===void 0&&(n=[]),this.chain=e,this.nextRuleModifiers=n};jl.prototype._applyRule=function(e,n){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new mE(n,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};jl.prototype._applyModifier=function(e,n){return this.nextRuleModifiers.push(new IX(n,e.simple,e.async)),this};jl.prototype._clone=function(){return new jl(this.chain.slice(),this.nextRuleModifiers.slice())};jl.prototype.test=function(e){return this.chain.every(function(n){return n._test(e)})};jl.prototype.testAll=function(e){var n=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){n.push(new D4(r,e,i))}}),n};jl.prototype.check=function(e){this.chain.forEach(function(n){try{n._check(e)}catch(r){throw new D4(n,e,r)}})};jl.prototype.testAsync=function(e){var n=this;return new Promise(function(r,i){AD(e,n.chain.slice(),r,i)})};function AD(t,e,n,r){if(e.length){var i=e.shift();i._testAsync(t).then(function(){AD(t,e,n,r)},function(s){r(new D4(i,t,s))})}else n(t)}var u9=function(t,e){return e&&typeof t=="string"&&t.trim().length===0?!0:t==null};function PX(t,e){return e===void 0&&(e=!1),{simple:function(n){return u9(n,e)||t.check(n)===void 0},async:function(n){return u9(n,e)||t.testAsync(n)}}}function No(){return typeof Proxy<"u"?TD(new jl):cw(new jl)}var D1={};No.extend=function(t){Object.assign(D1,t)};No.clearCustomRules=function(){D1={}};function TD(t){return new Proxy(t,{get:function(n,r){if(r in n)return n[r];var i=TD(t._clone());if(r in p3)return i._applyModifier(p3[r],r);if(r in D1)return i._applyRule(D1[r],r);if(r in uw)return i._applyRule(uw[r],r)}})}function cw(t){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=cw(s._clone()),u=c._applyRule(i[o],o).apply(void 0,a);return u}}),s},n=e(uw,t),r=e(D1,n);return Object.keys(p3).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=cw(r._clone());return s._applyModifier(p3[i],i)}})}),r}var p3={not:{simple:function(t){return function(e){return!t(e)}},async:function(t){return function(e){return Promise.resolve(t(e)).then(function(n){return!n}).catch(function(){return!0})}}},some:{simple:function(t){return function(e){return Fv(e).some(function(n){try{return t(n)}catch{return!1}})}},async:function(t){return function(e){return Promise.all(Fv(e).map(function(n){try{return t(n).catch(function(){return!1})}catch{return!1}})).then(function(n){return n.some(Boolean)})}}},every:{simple:function(t){return function(e){return e!==!1&&Fv(e).every(t)}},async:function(t){return function(e){return Promise.all(Fv(e).map(t)).then(function(n){return n.every(Boolean)})}}},strict:{simple:function(t,e){return function(n){return f9(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&t(n):t(n)}},async:function(t,e){return function(n){return Promise.resolve(t(n)).then(function(r){return f9(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&r:r}).catch(function(){return!1})}}}};function f9(t){return t&&t.name==="schema"&&t.args.length>0&&typeof t.args[0]=="object"}function Fv(t){return typeof t=="string"?t.split(""):t}var uw={equal:function(t){return function(e){return e==t}},exact:function(t){return function(e){return e===t}},number:function(t){return t===void 0&&(t=!0),function(e){return typeof e=="number"&&(t||isFinite(e))}},integer:function(){return function(t){var e=Number.isInteger||LX;return e(t)}},numeric:function(){return function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},string:function(){return $h("string")},boolean:function(){return $h("boolean")},undefined:function(){return $h("undefined")},null:function(){return $h("null")},array:function(){return $h("array")},object:function(){return $h("object")},instanceOf:function(t){return function(e){return e instanceof t}},pattern:function(t){return function(e){return t.test(e)}},lowercase:function(){return function(t){return typeof t=="boolean"||t===t.toLowerCase()&&t.trim()!==""}},uppercase:function(){return function(t){return t===t.toUpperCase()&&t.trim()!==""}},vowel:function(){return function(t){return/^[aeiou]+$/i.test(t)}},consonant:function(){return function(t){return/^(?=[^aeiou])([a-z]+)$/i.test(t)}},first:function(t){return function(e){return e[0]==t}},last:function(t){return function(e){return e[e.length-1]==t}},empty:function(){return function(t){return t.length===0}},length:function(t,e){return function(n){return n.length>=t&&n.length<=(e||t)}},minLength:function(t){return function(e){return e.length>=t}},maxLength:function(t){return function(e){return e.length<=t}},negative:function(){return function(t){return t<0}},positive:function(){return function(t){return t>=0}},between:function(t,e){return function(n){return n>=t&&n<=e}},range:function(t,e){return function(n){return n>=t&&n<=e}},lessThan:function(t){return function(e){return e<t}},lessThanOrEqual:function(t){return function(e){return e<=t}},greaterThan:function(t){return function(e){return e>t}},greaterThanOrEqual:function(t){return function(e){return e>=t}},even:function(){return function(t){return t%2===0}},odd:function(){return function(t){return t%2!==0}},includes:function(t){return function(e){return~e.indexOf(t)}},schema:function(t){return NX(t)},passesAnyOf:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(n){return t.some(function(r){return r.test(n)})}},optional:PX};function $h(t){return function(e){return Array.isArray(e)&&t==="array"||e===null&&t==="null"||typeof e===t}}function LX(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function NX(t){return{simple:function(e){var n=[];if(Object.keys(t).forEach(function(r){var i=t[r];try{i.check((e||{})[r])}catch(s){s.target=r,n.push(s)}}),n.length>0)throw n;return!0},async:function(e){var n=[],r=Object.keys(t).map(function(i){var s=t[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,n.push(o)})});return Promise.all(r).then(function(){if(n.length>0)throw n;return!0})}}}var Lr="colors",no="sizes",nn="space",OX={gap:nn,gridGap:nn,columnGap:nn,gridColumnGap:nn,rowGap:nn,gridRowGap:nn,inset:nn,insetBlock:nn,insetBlockEnd:nn,insetBlockStart:nn,insetInline:nn,insetInlineEnd:nn,insetInlineStart:nn,margin:nn,marginTop:nn,marginRight:nn,marginBottom:nn,marginLeft:nn,marginBlock:nn,marginBlockEnd:nn,marginBlockStart:nn,marginInline:nn,marginInlineEnd:nn,marginInlineStart:nn,padding:nn,paddingTop:nn,paddingRight:nn,paddingBottom:nn,paddingLeft:nn,paddingBlock:nn,paddingBlockEnd:nn,paddingBlockStart:nn,paddingInline:nn,paddingInlineEnd:nn,paddingInlineStart:nn,top:nn,right:nn,bottom:nn,left:nn,scrollMargin:nn,scrollMarginTop:nn,scrollMarginRight:nn,scrollMarginBottom:nn,scrollMarginLeft:nn,scrollMarginX:nn,scrollMarginY:nn,scrollMarginBlock:nn,scrollMarginBlockEnd:nn,scrollMarginBlockStart:nn,scrollMarginInline:nn,scrollMarginInlineEnd:nn,scrollMarginInlineStart:nn,scrollPadding:nn,scrollPaddingTop:nn,scrollPaddingRight:nn,scrollPaddingBottom:nn,scrollPaddingLeft:nn,scrollPaddingX:nn,scrollPaddingY:nn,scrollPaddingBlock:nn,scrollPaddingBlockEnd:nn,scrollPaddingBlockStart:nn,scrollPaddingInline:nn,scrollPaddingInlineEnd:nn,scrollPaddingInlineStart:nn,fontSize:"fontSizes",background:Lr,backgroundColor:Lr,backgroundImage:Lr,borderImage:Lr,border:Lr,borderBlock:Lr,borderBlockEnd:Lr,borderBlockStart:Lr,borderBottom:Lr,borderBottomColor:Lr,borderColor:Lr,borderInline:Lr,borderInlineEnd:Lr,borderInlineStart:Lr,borderLeft:Lr,borderLeftColor:Lr,borderRight:Lr,borderRightColor:Lr,borderTop:Lr,borderTopColor:Lr,caretColor:Lr,color:Lr,columnRuleColor:Lr,fill:Lr,outline:Lr,outlineColor:Lr,stroke:Lr,textDecorationColor:Lr,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:no,minBlockSize:no,maxBlockSize:no,inlineSize:no,minInlineSize:no,maxInlineSize:no,width:no,minWidth:no,maxWidth:no,height:no,minHeight:no,maxHeight:no,flexBasis:no,gridTemplateColumns:no,gridTemplateRows:no,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},DX=(t,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Gp=()=>{const t=Object.create(null);return(e,n,...r)=>{const i=(s=>JSON.stringify(s,DX))(e);return i in t?t[i]:t[i]=n(e,...r)}},Kf=Symbol.for("sxs.internal"),B4=(t,e)=>Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)),h9=t=>{for(const e in t)return!0;return!1},{hasOwnProperty:BX}=Object.prototype,fw=t=>t.includes("-")?t:t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),kX=/\s+(?![^()]*\))/,Xh=t=>e=>t(...typeof e=="string"?String(e).split(kX):[e]),d9={appearance:t=>({WebkitAppearance:t,appearance:t}),backfaceVisibility:t=>({WebkitBackfaceVisibility:t,backfaceVisibility:t}),backdropFilter:t=>({WebkitBackdropFilter:t,backdropFilter:t}),backgroundClip:t=>({WebkitBackgroundClip:t,backgroundClip:t}),boxDecorationBreak:t=>({WebkitBoxDecorationBreak:t,boxDecorationBreak:t}),clipPath:t=>({WebkitClipPath:t,clipPath:t}),content:t=>({content:t.includes('"')||t.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(t)?t:`"${t}"`}),hyphens:t=>({WebkitHyphens:t,hyphens:t}),maskImage:t=>({WebkitMaskImage:t,maskImage:t}),maskSize:t=>({WebkitMaskSize:t,maskSize:t}),tabSize:t=>({MozTabSize:t,tabSize:t}),textSizeAdjust:t=>({WebkitTextSizeAdjust:t,textSizeAdjust:t}),userSelect:t=>({WebkitUserSelect:t,userSelect:t}),marginBlock:Xh((t,e)=>({marginBlockStart:t,marginBlockEnd:e||t})),marginInline:Xh((t,e)=>({marginInlineStart:t,marginInlineEnd:e||t})),maxSize:Xh((t,e)=>({maxBlockSize:t,maxInlineSize:e||t})),minSize:Xh((t,e)=>({minBlockSize:t,minInlineSize:e||t})),paddingBlock:Xh((t,e)=>({paddingBlockStart:t,paddingBlockEnd:e||t})),paddingInline:Xh((t,e)=>({paddingInlineStart:t,paddingInlineEnd:e||t}))},eA=/([\d.]+)([^]*)/,FX=(t,e)=>t.length?t.reduce((n,r)=>(n.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),n),[]):e,UX=(t,e)=>t in zX&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(n,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${fw(t)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${fw(t)}:${r}fit-content`)+s):String(e),zX={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Bc=t=>t?t+"-":"",wD=(t,e,n)=>t.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?Bc(e)+(a.includes("$")?"":Bc(n))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),HX=/\s*,\s*(?![^()]*\))/,GX=Object.prototype.toString,rp=(t,e,n,r,i)=>{let s,o,a;const l=(c,u,f)=>{let h,d;const p=m=>{for(h in m){const x=h.charCodeAt(0)===64,y=x&&Array.isArray(m[h])?m[h]:[m[h]];for(d of y){const A=/[A-Z]/.test(v=h)?v:v.replace(/-[^]/g,w=>w[1].toUpperCase()),T=typeof d=="object"&&d&&d.toString===GX&&(!r.utils[A]||!u.length);if(A in r.utils&&!T){const w=r.utils[A];if(w!==o){o=w,p(w(d)),o=null;continue}}else if(A in d9){const w=d9[A];if(w!==a){a=w,p(w(d)),a=null;continue}}if(x&&(g=h.slice(1)in r.media?"@media "+r.media[h.slice(1)]:h,h=g.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(w,M,C,S,R,O)=>{const L=eA.test(M),B=.0625*(L?-1:1),[N,$]=L?[S,M]:[M,S];return"("+(C[0]==="="?"":C[0]===">"===L?"max-":"min-")+N+":"+(C[0]!=="="&&C.length===1?$.replace(eA,(U,Q,Y)=>Number(Q)+B*(C===">"?1:-1)+Y):$)+(R?") and ("+(R[0]===">"?"min-":"max-")+N+":"+(R.length===1?O.replace(eA,(U,Q,Y)=>Number(Q)+B*(R===">"?-1:1)+Y):O):"")+")"})),T){const w=x?f.concat(h):[...f],M=x?[...u]:FX(u,h.split(HX));s!==void 0&&i(p9(...s)),s=void 0,l(d,M,w)}else s===void 0&&(s=[[],u,f]),h=x||h.charCodeAt(0)!==36?h:`--${Bc(r.prefix)}${h.slice(1).replace(/\$/g,"-")}`,d=T?d:typeof d=="number"?d&&A in VX?String(d)+"px":String(d):wD(UX(A,d??""),r.prefix,r.themeMap[A]),s[0].push(`${x?`${h} `:`${fw(h)}:`}${d}`)}}var g,v};p(c),s!==void 0&&i(p9(...s)),s=void 0};l(t,e,n)},p9=(t,e,n)=>`${n.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${t.join(";")}${e.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,VX={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},m9=t=>String.fromCharCode(t+(t>25?39:97)),Jf=t=>(e=>{let n,r="";for(n=Math.abs(e);n>52;n=n/52|0)r=m9(n%52)+r;return m9(n%52)+r})(((e,n)=>{let r=n.length;for(;r;)e=33*e^n.charCodeAt(--r);return e})(5381,JSON.stringify(t))>>>0),K0=["themed","global","styled","onevar","resonevar","allvar","inline"],WX=t=>{if(t.href&&!t.href.startsWith(location.origin))return!1;try{return!!t.cssRules}catch{return!1}},jX=t=>{let e;const n=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const i=Object(t).styleSheets||[];for(const a of i)if(WX(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const f=Object(c[l+1]);if(f.type!==4)continue;++l;const{cssText:h}=u;if(!h.startsWith("--sxs"))continue;const d=h.slice(14,-3).trim().split(/\s+/),p=K0[d[0]];p&&(e||(e={sheet:a,reset:r,rules:{},toString:n}),e.rules[p]={group:f,index:l,cache:new Set(d)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,f){this.cssRules.splice(f,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:t?(t.head||t).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:n}}const{sheet:s,rules:o}=e;for(let a=K0.length-1;a>=0;--a){const l=K0[a];if(!o[l]){const c=K0[a+1],u=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[l]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}$X(o[l])}};return r(),e},$X=t=>{const e=t.group;let n=e.cssRules.length;t.apply=r=>{try{e.insertRule(r,n),++n}catch{}}},jm=Symbol(),XX=Gp(),g9=(t,e)=>XX(t,()=>(...n)=>{let r={type:null,composers:new Set};for(const i of n)if(i!=null)if(i[Kf]){r.type==null&&(r.type=i[Kf].type);for(const s of i[Kf].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(YX(i,t));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),qX(t,r,e)}),YX=({variants:t,compoundVariants:e,defaultVariants:n,...r},i)=>{const s=`${Bc(i.prefix)}c-${Jf(r)}`,o=[],a=[],l=Object.create(null),c=[];for(const h in n)l[h]=String(n[h]);if(typeof t=="object"&&t)for(const h in t){u=l,f=h,BX.call(u,f)||(l[h]="undefined");const d=t[h];for(const p in d){const m={[h]:String(p)};String(p)==="undefined"&&c.push(h);const g=d[p],v=[m,g,!h9(g)];o.push(v)}}var u,f;if(typeof e=="object"&&e)for(const h of e){let{css:d,...p}=h;d=typeof d=="object"&&d||{};for(const g in p)p[g]=String(p[g]);const m=[p,d,!h9(d)];a.push(m)}return[s,r,o,a,l,c]},qX=(t,e,n)=>{const[r,i,s,o]=KX(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function h(){for(let d=0;d<h[jm].length;d++){const[p,m]=h[jm][d];f.rules[p].apply(m)}return h[jm]=[],null}return h[jm]=[],h.rules={},K0.forEach(d=>h.rules[d]={apply:p=>h[jm].push([d,p])}),h})(n):null,l=(a||n).rules,c=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,u=f=>{f=typeof f=="object"&&f||JX;const{css:h,...d}=f,p={};for(const v in s)if(delete d[v],v in f){let x=f[v];typeof x=="object"&&x?p[v]={"@initial":s[v],...x}:(x=String(x),p[v]=x!=="undefined"||o.has(v)?x:s[v])}else p[v]=s[v];const m=new Set([...i]);for(const[v,x,y,A]of e.composers){n.rules.styled.cache.has(v)||(n.rules.styled.cache.add(v),rp(x,[`.${v}`],[],t,M=>{l.styled.apply(M)}));const T=v9(y,p,t.media),w=v9(A,p,t.media,!0);for(const M of T)if(M!==void 0)for(const[C,S,R]of M){const O=`${v}-${Jf(S)}-${C}`;m.add(O);const L=(R?n.rules.resonevar:n.rules.onevar).cache,B=R?l.resonevar:l.onevar;L.has(O)||(L.add(O),rp(S,[`.${O}`],[],t,N=>{B.apply(N)}))}for(const M of w)if(M!==void 0)for(const[C,S]of M){const R=`${v}-${Jf(S)}-${C}`;m.add(R),n.rules.allvar.cache.has(R)||(n.rules.allvar.cache.add(R),rp(S,[`.${R}`],[],t,O=>{l.allvar.apply(O)}))}}if(typeof h=="object"&&h){const v=`${r}-i${Jf(h)}-css`;m.add(v),n.rules.inline.cache.has(v)||(n.rules.inline.cache.add(v),rp(h,[`.${v}`],[],t,x=>{l.inline.apply(x)}))}for(const v of String(f.className||"").trim().split(/\s+/))v&&m.add(v);const g=d.className=[...m].join(" ");return{type:e.type,className:g,selector:c,props:d,toString:()=>g,deferredInjector:a}};return B4(u,{className:r,selector:c,[Kf]:e,toString:()=>(n.rules.styled.cache.has(r)||u(),r)})},KX=t=>{let e="";const n=[],r={},i=[];for(const[s,,,,o,a]of t){e===""&&(e=s),n.push(s),i.push(...a);for(const l in o){const c=o[l];(r[l]===void 0||c!=="undefined"||a.includes(c))&&(r[l]=c)}}return[e,n,r,new Set(i)]},v9=(t,e,n,r)=>{const i=[];e:for(let[s,o,a]of t){if(a)continue;let l,c=0,u=!1;for(l in s){const f=s[l];let h=e[l];if(h!==f){if(typeof h!="object"||!h)continue e;{let d,p,m=0;for(const g in h){if(f===String(h[g])){if(g!=="@initial"){const v=g.slice(1);(p=p||[]).push(v in n?n[v]:g.replace(/^@media ?/,"")),u=!0}c+=m,d=!0}++m}if(p&&p.length&&(o={["@media "+p.join(", ")]:o}),!d)continue e}}}(i[c]=i[c]||[]).push([r?"cv":`${l}-${s[l]}`,o,u])}return i},JX={},QX=Gp(),ZX=(t,e)=>QX(t,()=>(...n)=>{const r=()=>{for(let i of n){i=typeof i=="object"&&i||{};let s=Jf(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}rp(i,[],[],t,o=>{e.rules.global.apply(o)})}}return""};return B4(r,{toString:r})}),eY=Gp(),tY=(t,e)=>eY(t,()=>n=>{const r=`${Bc(t.prefix)}k-${Jf(n)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];rp(n,[],[],t,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return B4(i,{get name(){return i()},toString:i})}),nY=class{constructor(t,e,n,r){this.token=t==null?"":String(t),this.value=e==null?"":String(e),this.scale=n==null?"":String(n),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Bc(this.prefix)+Bc(this.scale)+this.token}toString(){return this.computedValue}},rY=Gp(),iY=(t,e)=>rY(t,()=>(n,r)=>{r=typeof n=="object"&&n||Object(r);const i=`.${n=(n=typeof n=="string"?n:"")||`${Bc(t.prefix)}t-${Jf(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const c in r[l]){const u=`--${Bc(t.prefix)}${l}-${c}`,f=wD(String(r[l][c]),t.prefix,l);s[l][c]=new nY(c,f,l,t.prefix),o.push(`${u}:${f}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(n)){e.rules.themed.cache.add(n);const l=`${r===t.theme?":root,":""}.${n}{${o.join(";")}}`;e.rules.themed.apply(l)}return n};return{...s,get className(){return a()},selector:i,toString:a}}),sY=Gp(),y9,oY=Gp(),SD=t=>{const e=(n=>{let r=!1;const i=sY(n,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},u={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...OX},utils:typeof s.utils=="object"&&s.utils||{}},f=jX(l),h={css:g9(u,f),globalCss:ZX(u,f),keyframes:tY(u,f),createTheme:iY(u,f),reset(){f.reset(),h.theme.toString()},theme:{},sheet:f,config:u,prefix:o,getCssText:f.toString,toString:f.toString};return String(h.theme=h.createTheme(c)),h});return r||i.reset(),i})(t);return e.styled=(({config:n,sheet:r})=>oY(n,()=>{const i=g9(n,r);return(...s)=>{const o=i(...s),a=o[Kf].type,l=Ue.forwardRef((c,u)=>{const f=c&&c.as||a,{props:h,deferredInjector:d}=o(c);return delete h.as,h.ref=u,d?Ue.createElement(Ue.Fragment,null,Ue.createElement(f,h),Ue.createElement(d,null)):Ue.createElement(f,h)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[Kf]=o[Kf],l}}))(e),e},aY=()=>y9||(y9=SD()),rs=(...t)=>aY().styled(...t);function lY(t,e,n){return Math.max(e,Math.min(t,n))}const Vs={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function x9(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function E9(t,e,n,r=.15){return r===0?lY(t,e,n):t<e?-x9(e-t,n-e,r)+e:t>n?+x9(t-n,n-e,r)+n:t}function cY(t,[e,n],[r,i]){const[[s,o],[a,l]]=t;return[E9(e,s,o,r),E9(n,a,l,i)]}function uY(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fY(t){var e=uY(t,"string");return typeof e=="symbol"?e:String(e)}function Io(t,e,n){return e=fY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_9(Object(n),!0).forEach(function(r){Io(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const CD={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function b9(t){return t?t[0].toUpperCase()+t.slice(1):""}const hY=["enter","leave"];function dY(t=!1,e){return t&&!hY.includes(e)}function pY(t,e="",n=!1){const r=CD[t],i=r&&r[e]||e;return"on"+b9(t)+b9(i)+(dY(n,i)?"Capture":"")}const mY=["gotpointercapture","lostpointercapture"];function gY(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=mY.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:n}}function vY(t,e=""){const n=CD[t],r=n&&n[e]||e;return t+r}function gE(t){return"touches"in t}function MD(t){return gE(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function yY(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,e.target))})}function xY(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function RD(t){return gE(t)?xY(t)[0]:t}function EY(t){return yY(t).map(e=>e.identifier)}function tA(t){const e=RD(t);return gE(t)?e.identifier:e.pointerId}function A9(t){const e=RD(t);return[e.clientX,e.clientY]}function _Y(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s})}return e}function m3(t,...e){return typeof t=="function"?t(...e):t}function bY(){}function AY(...t){return t.length===0?bY:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function T9(t,e){return Object.assign({},e,t||{})}const TY=32;class wY{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:r,args:i}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?m3(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:r,shared:i}=this;n.args=this.args;let s=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,_Y(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const w=n._delta.map(Math.abs);Vs.addTo(n._distance,w)}this.axisIntent&&this.axisIntent(e);const[o,a]=n._movement,[l,c]=r.threshold,{_step:u,values:f}=n;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=l&&f[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&f[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=l&&Math.sign(o)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),n.intentional=u[0]!==!1||u[1]!==!1,!n.intentional)return;const h=[0,0];if(r.hasCustomTransform){const[w,M]=f;h[0]=u[0]!==!1?w-u[0]:0,h[1]=u[1]!==!1?M-u[1]:0}else h[0]=u[0]!==!1?o-u[0]:0,h[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(h);const d=n.offset,p=n._active&&!n._blocked||n.active;p&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=m3(r.bounds,n)),this.setup&&this.setup()),n.movement=h,this.computeOffset()));const[m,g]=n.offset,[[v,x],[y,A]]=n._bounds;n.overflow=[m<v?-1:m>x?1:0,g<y?-1:g>A?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const T=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=cY(n._bounds,n.offset,T),n.delta=Vs.sub(n.offset,d),this.computeMovement(),p&&(!n.last||s>TY)){n.delta=Vs.sub(n.offset,d);const w=n.delta.map(Math.abs);Vs.addTo(n.distance,w),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[w[0]/s,w[1]/s],n.timeDelta=s)}}emit(){const e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(vi(vi(vi({},n),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function SY([t,e],n){const r=Math.abs(t),i=Math.abs(e);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class CY extends wY{constructor(...e){super(...e),Io(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Vs.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Vs.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,r=this.config;if(!n.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[MD(e)]:r.axisThreshold;n.axis=SY(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const MY=t=>t,w9=.15,ID={enabled(t=!0){return t},eventOptions(t,e,n){return vi(vi({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[w9,w9];case!1:return[0,0];default:return Vs.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Vs.toVector(t)},transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||MY},threshold(t){return Vs.toVector(t,0)}},RY=0,pg=vi(vi({},ID),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=RY){return t},bounds(t={}){if(typeof t=="function")return s=>pg.bounds(t(s));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=t;return[[e,n],[r,i]]}}),S9={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class IY extends CY{constructor(...e){super(...e),Io(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+e.offset[0],right:n.right-r.right+e.offset[0],top:n.top-r.top+e.offset[1],bottom:n.bottom-r.bottom+e.offset[1]};e._bounds=pg.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=tA(e),r._pointerActive=!0,this.computeValues(A9(e)),this.computeInitial(),n.preventScrollAxis&&MD(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,r=this.config;if(!n._pointerActive)return;const i=tA(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;const s=A9(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=Vs.sub(s,n._values),this.computeValues(s)),Vs.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=tA(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=n._distance;if(n.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,l]=n._delta,[c,u]=n._movement,[f,h]=r.swipe.velocity,[d,p]=r.swipe.distance,m=r.swipe.duration;if(n.elapsedTime<m){const g=Math.abs(a/n.timeDelta),v=Math.abs(l/n.timeDelta);g>f&&Math.abs(c)>d&&(n.swipe[0]=Math.sign(a)),v>h&&Math.abs(u)>p&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,r=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,PY(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=S9[e.key];if(n){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,Vs.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in S9&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function PY(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const mg=typeof window<"u"&&window.document&&window.document.createElement;function PD(){return mg&&"ontouchstart"in window}function LY(){return PD()||mg&&window.navigator.maxTouchPoints>1}function NY(){return mg&&"onpointerdown"in window}function OY(){return mg&&"exitPointerLock"in window.document}function DY(){try{return"constructor"in GestureEvent}catch{return!1}}const Ca={isBrowser:mg,gesture:DY(),touch:PD(),touchscreen:LY(),pointer:NY(),pointerLock:OY()},BY=250,kY=180,FY=.5,UY=50,zY=250,HY=10,C9={mouse:0,touch:0,pen:8},GY=vi(vi({},pg),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Ca.pointerLock,Ca.touch&&n?"touch":this.pointerLock?"mouse":Ca.pointer&&!i?"pointer":Ca.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?BY:void 0,!(!Ca.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const s=Vs.toVector(t,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,s},swipe({velocity:t=FY,distance:e=UY,duration:n=zY}={}){return{velocity:this.transform(Vs.toVector(t)),distance:this.transform(Vs.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return kY;case!1:return 0;default:return t}},axisThreshold(t){return t?vi(vi({},C9),t):C9},keyboardDisplacement(t=HY){return t}});vi(vi({},ID),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!Ca.touch&&Ca.gesture)return"gesture";if(Ca.touch&&r)return"touch";if(Ca.touchscreen){if(Ca.pointer)return"pointer";if(Ca.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const i=o=>{const a=T9(m3(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=T9(m3(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",Vs.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});vi(vi({},pg),{},{mouseOnly:(t=!0)=>t});vi(vi({},pg),{},{mouseOnly:(t=!0)=>t});const LD=new Map,hw=new Map;function VY(t){LD.set(t.key,t.engine),hw.set(t.key,t.resolver)}const WY={key:"drag",engine:IY,resolver:GY};function jY(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function $Y(t,e){if(t==null)return{};var n=jY(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}const XY={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=Ca.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},YY=["target","eventOptions","window","enabled","transform"];function Xx(t={},e){const n={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":n[r]=i.call(n,t[r],r,t);break;case"object":n[r]=Xx(t[r],i);break;case"boolean":i&&(n[r]=t[r]);break}return n}function qY(t,e,n={}){const r=t,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,c=$Y(r,YY);if(n.shared=Xx({target:i,eventOptions:s,window:o,enabled:a,transform:l},XY),e){const u=hw.get(e);n[e]=Xx(vi({shared:n.shared},c),u)}else for(const u in c){const f=hw.get(u);f&&(n[u]=Xx(vi({shared:n.shared},c[u]),f))}return n}class ND{constructor(e,n){Io(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,r,i,s){const o=this._listeners,a=vY(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=vi(vi({},l),s);e.addEventListener(a,i,c);const u=()=>{e.removeEventListener(a,i,c),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class KY{constructor(){Io(this,"_timeouts",new Map)}add(e,n,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...i))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class JY{constructor(e){Io(this,"gestures",new Set),Io(this,"_targetEventStore",new ND(this)),Io(this,"gestureEventStores",{}),Io(this,"gestureTimeoutStores",{}),Io(this,"handlers",{}),Io(this,"config",{}),Io(this,"pointerIds",new Set),Io(this,"touchIds",new Set),Io(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),QY(this,e)}setEventIds(e){if(gE(e))return this.touchIds=new Set(EY(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=qY(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=M9(r,a.eventOptions,!!i);if(a.enabled){const c=LD.get(o);new c(this,e,o).bind(l)}}const s=M9(r,n.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](vi(vi({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=AY(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=gY(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function Yh(t,e){t.gestures.add(e),t.gestureEventStores[e]=new ND(t,e),t.gestureTimeoutStores[e]=new KY}function QY(t,e){e.drag&&Yh(t,"drag"),e.wheel&&Yh(t,"wheel"),e.scroll&&Yh(t,"scroll"),e.move&&Yh(t,"move"),e.pinch&&Yh(t,"pinch"),e.hover&&Yh(t,"hover")}const M9=(t,e,n)=>(r,i,s,o={},a=!1)=>{var l,c;const u=(l=o.capture)!==null&&l!==void 0?l:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let h=a?r:pY(r,i,u);n&&f&&(h+="Passive"),t[h]=t[h]||[],t[h].push(s)};function ZY(t,e={},n,r){const i=Ue.useMemo(()=>new JY(t),[]);if(i.applyHandlers(t,r),i.applyConfig(e,n),Ue.useEffect(i.effect.bind(i)),Ue.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function eq(t,e){return VY(WY),ZY({drag:t},e||{},"drag")}function Ac(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function OD(t,e=[]){let n=[];function r(s,o){const a=E.createContext(o),l=n.length;n=[...n,o];function c(f){const{scope:h,children:d,...p}=f,m=(h==null?void 0:h[t][l])||a,g=E.useMemo(()=>p,Object.values(p));return E.createElement(m.Provider,{value:g},d)}function u(f,h){const d=(h==null?void 0:h[t][l])||a,p=E.useContext(d);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>E.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return E.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,tq(i,...e)]}function tq(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Vp(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function nq(t,e=globalThis==null?void 0:globalThis.document){const n=Vp(t);E.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const dw="dismissableLayer.update",rq="dismissableLayer.pointerDownOutside",iq="dismissableLayer.focusOutside";let R9;const sq=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),oq=E.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=E.useContext(sq),[f,h]=E.useState(null),d=(n=f==null?void 0:f.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=E.useState({}),m=Hp(e,C=>h(C)),g=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(v),y=f?g.indexOf(f):-1,A=u.layersWithOutsidePointerEventsDisabled.size>0,T=y>=x,w=aq(C=>{const S=C.target,R=[...u.branches].some(O=>O.contains(S));!T||R||(s==null||s(C),a==null||a(C),C.defaultPrevented||l==null||l())},d),M=lq(C=>{const S=C.target;[...u.branches].some(O=>O.contains(S))||(o==null||o(C),a==null||a(C),C.defaultPrevented||l==null||l())},d);return nq(C=>{y===u.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},d),E.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(R9=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),I9(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=R9)}},[f,d,r,u]),E.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),I9())},[f,u]),E.useEffect(()=>{const C=()=>p({});return document.addEventListener(dw,C),()=>document.removeEventListener(dw,C)},[]),E.createElement(Eh.div,Ct({},c,{ref:m,style:{pointerEvents:A?T?"auto":"none":void 0,...t.style},onFocusCapture:Ac(t.onFocusCapture,M.onFocusCapture),onBlurCapture:Ac(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Ac(t.onPointerDownCapture,w.onPointerDownCapture)}))});function aq(t,e=globalThis==null?void 0:globalThis.document){const n=Vp(t),r=E.useRef(!1),i=E.useRef(()=>{});return E.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){DD(rq,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function lq(t,e=globalThis==null?void 0:globalThis.document){const n=Vp(t),r=E.useRef(!1);return E.useEffect(()=>{const i=s=>{s.target&&!r.current&&DD(iq,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function I9(){const t=new CustomEvent(dw);document.dispatchEvent(t)}function DD(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?CX(i,s):i.dispatchEvent(s)}const Sp=globalThis!=null&&globalThis.document?E.useLayoutEffect:()=>{},cq=v$["useId".toString()]||(()=>{});let uq=0;function fq(t){const[e,n]=E.useState(cq());return Sp(()=>{t||n(r=>r??String(uq++))},[t]),t||(e?`radix-${e}`:"")}const hq=["top","right","bottom","left"],Du=Math.min,Jo=Math.max,g3=Math.round,Uv=Math.floor,Bu=t=>({x:t,y:t}),dq={left:"right",right:"left",bottom:"top",top:"bottom"},pq={start:"end",end:"start"};function pw(t,e,n){return Jo(t,Du(e,n))}function kc(t,e){return typeof t=="function"?t(e):t}function Fc(t){return t.split("-")[0]}function Wp(t){return t.split("-")[1]}function k4(t){return t==="x"?"y":"x"}function F4(t){return t==="y"?"height":"width"}function jp(t){return["top","bottom"].includes(Fc(t))?"y":"x"}function U4(t){return k4(jp(t))}function mq(t,e,n){n===void 0&&(n=!1);const r=Wp(t),i=U4(t),s=F4(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=v3(o)),[o,v3(o)]}function gq(t){const e=v3(t);return[mw(t),e,mw(e)]}function mw(t){return t.replace(/start|end/g,e=>pq[e])}function vq(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function yq(t,e,n,r){const i=Wp(t);let s=vq(Fc(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(mw)))),s}function v3(t){return t.replace(/left|right|bottom|top/g,e=>dq[e])}function xq(t){return{top:0,right:0,bottom:0,left:0,...t}}function BD(t){return typeof t!="number"?xq(t):{top:t,right:t,bottom:t,left:t}}function y3(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function P9(t,e,n){let{reference:r,floating:i}=t;const s=jp(e),o=U4(e),a=F4(o),l=Fc(e),c=s==="y",u=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let d;switch(l){case"top":d={x:u,y:r.y-i.height};break;case"bottom":d={x:u,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:f};break;case"left":d={x:r.x-i.width,y:f};break;default:d={x:r.x,y:r.y}}switch(Wp(e)){case"start":d[o]-=h*(n&&c?-1:1);break;case"end":d[o]+=h*(n&&c?-1:1);break}return d}const Eq=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:f}=P9(c,r,l),h=r,d={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x,y,data:A,reset:T}=await v({x:u,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:d,rects:c,platform:o,elements:{reference:t,floating:e}});if(u=x??u,f=y??f,d={...d,[g]:{...d[g],...A}},T&&p<=50){p++,typeof T=="object"&&(T.placement&&(h=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):T.rects),{x:u,y:f}=P9(c,h,l)),m=-1;continue}}return{x:u,y:f,placement:h,strategy:i,middlewareData:d}};async function B1(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:d=0}=kc(e,t),p=BD(d),g=a[h?f==="floating"?"reference":"floating":f],v=y3(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=f==="floating"?{...o.floating,x:r,y:i}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),A=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},T=y3(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:x,offsetParent:y,strategy:l}):x);return{top:(v.top-T.top+p.top)/A.y,bottom:(T.bottom-v.bottom+p.bottom)/A.y,left:(v.left-T.left+p.left)/A.x,right:(T.right-v.right+p.right)/A.x}}const L9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=kc(t,e)||{};if(c==null)return{};const f=BD(u),h={x:n,y:r},d=U4(i),p=F4(d),m=await o.getDimensions(c),g=d==="y",v=g?"top":"left",x=g?"bottom":"right",y=g?"clientHeight":"clientWidth",A=s.reference[p]+s.reference[d]-h[d]-s.floating[p],T=h[d]-s.reference[d],w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let M=w?w[y]:0;(!M||!await(o.isElement==null?void 0:o.isElement(w)))&&(M=a.floating[y]||s.floating[p]);const C=A/2-T/2,S=M/2-m[p]/2-1,R=Du(f[v],S),O=Du(f[x],S),L=R,B=M-m[p]-O,N=M/2-m[p]/2+C,$=pw(L,N,B),U=!l.arrow&&Wp(i)!=null&&N!=$&&s.reference[p]/2-(N<L?R:O)-m[p]/2<0,Q=U?N<L?N-L:N-B:0;return{[d]:h[d]+Q,data:{[d]:$,centerOffset:N-$-Q,...U&&{alignmentOffset:Q}},reset:U}}}),_q=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=kc(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Fc(i),x=Fc(a)===a,y=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=h||(x||!m?[v3(a)]:gq(a));!h&&p!=="none"&&A.push(...yq(a,m,p,y));const T=[a,...A],w=await B1(e,g),M=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&M.push(w[v]),f){const L=mq(i,o,y);M.push(w[L[0]],w[L[1]])}if(C=[...C,{placement:i,overflows:M}],!M.every(L=>L<=0)){var S,R;const L=(((S=s.flip)==null?void 0:S.index)||0)+1,B=T[L];if(B)return{data:{index:L,overflows:C},reset:{placement:B}};let N=(R=C.filter($=>$.overflows[0]<=0).sort(($,U)=>$.overflows[1]-U.overflows[1])[0])==null?void 0:R.placement;if(!N)switch(d){case"bestFit":{var O;const $=(O=C.map(U=>[U.placement,U.overflows.filter(Q=>Q>0).reduce((Q,Y)=>Q+Y,0)]).sort((U,Q)=>U[1]-Q[1])[0])==null?void 0:O[0];$&&(N=$);break}case"initialPlacement":N=a;break}if(i!==N)return{reset:{placement:N}}}return{}}}};function N9(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function O9(t){return hq.some(e=>t[e]>=0)}const bq=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=kc(t,e);switch(r){case"referenceHidden":{const s=await B1(e,{...i,elementContext:"reference"}),o=N9(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:O9(o)}}}case"escaped":{const s=await B1(e,{...i,altBoundary:!0}),o=N9(s,n.floating);return{data:{escapedOffsets:o,escaped:O9(o)}}}default:return{}}}}};async function Aq(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Fc(n),a=Wp(n),l=jp(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,f=kc(e,t);let{mainAxis:h,crossAxis:d,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(d=a==="end"?p*-1:p),l?{x:d*u,y:h*c}:{x:h*c,y:d*u}}const Tq=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await Aq(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},wq=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:v,y:x}=g;return{x:v,y:x}}},...l}=kc(t,e),c={x:n,y:r},u=await B1(e,l),f=jp(Fc(i)),h=k4(f);let d=c[h],p=c[f];if(s){const g=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=d+u[g],y=d-u[v];d=pw(x,d,y)}if(o){const g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=p+u[g],y=p-u[v];p=pw(x,p,y)}const m=a.fn({...e,[h]:d,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Sq=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=kc(t,e),u={x:n,y:r},f=jp(i),h=k4(f);let d=u[h],p=u[f];const m=kc(a,e),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const y=h==="y"?"height":"width",A=s.reference[h]-s.floating[y]+g.mainAxis,T=s.reference[h]+s.reference[y]-g.mainAxis;d<A?d=A:d>T&&(d=T)}if(c){var v,x;const y=h==="y"?"width":"height",A=["top","left"].includes(Fc(i)),T=s.reference[f]-s.floating[y]+(A&&((v=o.offset)==null?void 0:v[f])||0)+(A?0:g.crossAxis),w=s.reference[f]+s.reference[y]+(A?0:((x=o.offset)==null?void 0:x[f])||0)-(A?g.crossAxis:0);p<T?p=T:p>w&&(p=w)}return{[h]:d,[f]:p}}}},Cq=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=kc(t,e),l=await B1(e,a),c=Fc(n),u=Wp(n),f=jp(n)==="y",{width:h,height:d}=r.floating;let p,m;c==="top"||c==="bottom"?(p=c,m=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=c,p=u==="end"?"top":"bottom");const g=d-l[p],v=h-l[m],x=!e.middlewareData.shift;let y=g,A=v;if(f){const w=h-l.left-l.right;A=u||x?Du(v,w):w}else{const w=d-l.top-l.bottom;y=u||x?Du(g,w):w}if(x&&!u){const w=Jo(l.left,0),M=Jo(l.right,0),C=Jo(l.top,0),S=Jo(l.bottom,0);f?A=h-2*(w!==0||M!==0?w+M:Jo(l.left,l.right)):y=d-2*(C!==0||S!==0?C+S:Jo(l.top,l.bottom))}await o({...e,availableWidth:A,availableHeight:y});const T=await i.getDimensions(s.floating);return h!==T.width||d!==T.height?{reset:{rects:!0}}:{}}}};function ku(t){return kD(t)?(t.nodeName||"").toLowerCase():"#document"}function na(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function jc(t){var e;return(e=(kD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function kD(t){return t instanceof Node||t instanceof na(t).Node}function Uc(t){return t instanceof Element||t instanceof na(t).Element}function $l(t){return t instanceof HTMLElement||t instanceof na(t).HTMLElement}function D9(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof na(t).ShadowRoot}function gg(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ka(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Mq(t){return["table","td","th"].includes(ku(t))}function z4(t){const e=H4(),n=ka(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Rq(t){let e=Cp(t);for(;$l(e)&&!vE(e);){if(z4(e))return e;e=Cp(e)}return null}function H4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function vE(t){return["html","body","#document"].includes(ku(t))}function ka(t){return na(t).getComputedStyle(t)}function yE(t){return Uc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Cp(t){if(ku(t)==="html")return t;const e=t.assignedSlot||t.parentNode||D9(t)&&t.host||jc(t);return D9(e)?e.host:e}function FD(t){const e=Cp(t);return vE(e)?t.ownerDocument?t.ownerDocument.body:t.body:$l(e)&&gg(e)?e:FD(e)}function k1(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=FD(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=na(i);return s?e.concat(o,o.visualViewport||[],gg(i)?i:[],o.frameElement&&n?k1(o.frameElement):[]):e.concat(i,k1(i,[],n))}function UD(t){const e=ka(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=$l(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=g3(n)!==s||g3(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function G4(t){return Uc(t)?t:t.contextElement}function Ep(t){const e=G4(t);if(!$l(e))return Bu(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=UD(e);let o=(s?g3(n.width):n.width)/r,a=(s?g3(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Iq=Bu(0);function zD(t){const e=na(t);return!H4()||!e.visualViewport?Iq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Pq(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==na(t)?!1:e}function lh(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=G4(t);let o=Bu(1);e&&(r?Uc(r)&&(o=Ep(r)):o=Ep(t));const a=Pq(s,n,r)?zD(s):Bu(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const h=na(s),d=r&&Uc(r)?na(r):r;let p=h.frameElement;for(;p&&r&&d!==h;){const m=Ep(p),g=p.getBoundingClientRect(),v=ka(p),x=g.left+(p.clientLeft+parseFloat(v.paddingLeft))*m.x,y=g.top+(p.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,f*=m.y,l+=x,c+=y,p=na(p).frameElement}}return y3({width:u,height:f,x:l,y:c})}function Lq(t){let{rect:e,offsetParent:n,strategy:r}=t;const i=$l(n),s=jc(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=Bu(1);const l=Bu(0);if((i||!i&&r!=="fixed")&&((ku(n)!=="body"||gg(s))&&(o=yE(n)),$l(n))){const c=lh(n);a=Ep(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function Nq(t){return Array.from(t.getClientRects())}function HD(t){return lh(jc(t)).left+yE(t).scrollLeft}function Oq(t){const e=jc(t),n=yE(t),r=t.ownerDocument.body,i=Jo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Jo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+HD(t);const a=-n.scrollTop;return ka(r).direction==="rtl"&&(o+=Jo(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Dq(t,e){const n=na(t),r=jc(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=H4();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function Bq(t,e){const n=lh(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=$l(t)?Ep(t):Bu(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function B9(t,e,n){let r;if(e==="viewport")r=Dq(t,n);else if(e==="document")r=Oq(jc(t));else if(Uc(e))r=Bq(e,n);else{const i=zD(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return y3(r)}function GD(t,e){const n=Cp(t);return n===e||!Uc(n)||vE(n)?!1:ka(n).position==="fixed"||GD(n,e)}function kq(t,e){const n=e.get(t);if(n)return n;let r=k1(t,[],!1).filter(a=>Uc(a)&&ku(a)!=="body"),i=null;const s=ka(t).position==="fixed";let o=s?Cp(t):t;for(;Uc(o)&&!vE(o);){const a=ka(o),l=z4(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||gg(o)&&!l&&GD(t,o))?r=r.filter(u=>u!==o):i=a,o=Cp(o)}return e.set(t,r),r}function Fq(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?kq(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const f=B9(e,u,i);return c.top=Jo(f.top,c.top),c.right=Du(f.right,c.right),c.bottom=Du(f.bottom,c.bottom),c.left=Jo(f.left,c.left),c},B9(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Uq(t){return UD(t)}function zq(t,e,n){const r=$l(e),i=jc(e),s=n==="fixed",o=lh(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Bu(0);if(r||!r&&!s)if((ku(e)!=="body"||gg(i))&&(a=yE(e)),r){const c=lh(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=HD(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function k9(t,e){return!$l(t)||ka(t).position==="fixed"?null:e?e(t):t.offsetParent}function VD(t,e){const n=na(t);if(!$l(t))return n;let r=k9(t,e);for(;r&&Mq(r)&&ka(r).position==="static";)r=k9(r,e);return r&&(ku(r)==="html"||ku(r)==="body"&&ka(r).position==="static"&&!z4(r))?n:r||Rq(t)||n}const Hq=async function(t){let{reference:e,floating:n,strategy:r}=t;const i=this.getOffsetParent||VD,s=this.getDimensions;return{reference:zq(e,await i(n),r),floating:{x:0,y:0,...await s(n)}}};function Gq(t){return ka(t).direction==="rtl"}const Vq={convertOffsetParentRelativeRectToViewportRelativeRect:Lq,getDocumentElement:jc,getClippingRect:Fq,getOffsetParent:VD,getElementRects:Hq,getClientRects:Nq,getDimensions:Uq,getScale:Ep,isElement:Uc,isRTL:Gq};function Wq(t,e){let n=null,r;const i=jc(t);function s(){clearTimeout(r),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:f,height:h}=t.getBoundingClientRect();if(a||e(),!f||!h)return;const d=Uv(u),p=Uv(i.clientWidth-(c+f)),m=Uv(i.clientHeight-(u+h)),g=Uv(c),x={rootMargin:-d+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Jo(0,Du(1,l))||1};let y=!0;function A(T){const w=T[0].intersectionRatio;if(w!==l){if(!y)return o();w?o(!1,w):r=setTimeout(()=>{o(!1,1e-7)},100)}y=!1}try{n=new IntersectionObserver(A,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(A,x)}n.observe(t)}return o(!0),s}function jq(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=G4(t),u=i||s?[...c?k1(c):[],...k1(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const f=c&&a?Wq(c,n):null;let h=-1,d=null;o&&(d=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&d&&(d.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{d&&d.observe(e)})),n()}),c&&!l&&d.observe(c),d.observe(e));let p,m=l?lh(t):null;l&&g();function g(){const v=lh(t);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(g)}return n(),()=>{u.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f&&f(),d&&d.disconnect(),d=null,l&&cancelAnimationFrame(p)}}const $q=(t,e,n)=>{const r=new Map,i={platform:Vq,...n},s={...i.platform,_c:r};return Eq(t,e,{...i,platform:s})},Xq=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?L9({element:r.current,padding:i}).fn(n):{}:r?L9({element:r,padding:i}).fn(n):{}}}};var Yx=typeof document<"u"?E.useLayoutEffect:E.useEffect;function x3(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!x3(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!x3(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function WD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function F9(t,e){const n=WD(t);return Math.round(e*n)/n}function U9(t){const e=E.useRef(t);return Yx(()=>{e.current=t}),e}function Yq(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,f]=E.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,d]=E.useState(r);x3(h,r)||d(r);const[p,m]=E.useState(null),[g,v]=E.useState(null),x=E.useCallback(U=>{U!=w.current&&(w.current=U,m(U))},[m]),y=E.useCallback(U=>{U!==M.current&&(M.current=U,v(U))},[v]),A=s||p,T=o||g,w=E.useRef(null),M=E.useRef(null),C=E.useRef(u),S=U9(l),R=U9(i),O=E.useCallback(()=>{if(!w.current||!M.current)return;const U={placement:e,strategy:n,middleware:h};R.current&&(U.platform=R.current),$q(w.current,M.current,U).then(Q=>{const Y={...Q,isPositioned:!0};L.current&&!x3(C.current,Y)&&(C.current=Y,L4.flushSync(()=>{f(Y)}))})},[h,e,n,R]);Yx(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[c]);const L=E.useRef(!1);Yx(()=>(L.current=!0,()=>{L.current=!1}),[]),Yx(()=>{if(A&&(w.current=A),T&&(M.current=T),A&&T){if(S.current)return S.current(A,T,O);O()}},[A,T,O,S]);const B=E.useMemo(()=>({reference:w,floating:M,setReference:x,setFloating:y}),[x,y]),N=E.useMemo(()=>({reference:A,floating:T}),[A,T]),$=E.useMemo(()=>{const U={position:n,left:0,top:0};if(!N.floating)return U;const Q=F9(N.floating,u.x),Y=F9(N.floating,u.y);return a?{...U,transform:"translate("+Q+"px, "+Y+"px)",...WD(N.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Q,top:Y}},[n,a,N.floating,u.x,u.y]);return E.useMemo(()=>({...u,update:O,refs:B,elements:N,floatingStyles:$}),[u,O,B,N,$])}const qq=E.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return E.createElement(Eh.svg,Ct({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),t.asChild?n:E.createElement("polygon",{points:"0,0 30,0 15,10"}))}),Kq=qq;function Jq(t){const[e,n]=E.useState(void 0);return Sp(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const jD="Popper",[$D,XD]=OD(jD),[Qq,YD]=$D(jD),Zq=t=>{const{__scopePopper:e,children:n}=t,[r,i]=E.useState(null);return E.createElement(Qq,{scope:e,anchor:r,onAnchorChange:i},n)},eK="PopperAnchor",tK=E.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=YD(eK,n),o=E.useRef(null),a=Hp(e,o);return E.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:E.createElement(Eh.div,Ct({},i,{ref:a}))}),qD="PopperContent",[nK,rK]=$D(qD),iK=E.forwardRef((t,e)=>{var n,r,i,s,o,a,l,c;const{__scopePopper:u,side:f="bottom",sideOffset:h=0,align:d="center",alignOffset:p=0,arrowPadding:m=0,avoidCollisions:g=!0,collisionBoundary:v=[],collisionPadding:x=0,sticky:y="partial",hideWhenDetached:A=!1,updatePositionStrategy:T="optimized",onPlaced:w,...M}=t,C=YD(qD,u),[S,R]=E.useState(null),O=Hp(e,Te=>R(Te)),[L,B]=E.useState(null),N=Jq(L),$=(n=N==null?void 0:N.width)!==null&&n!==void 0?n:0,U=(r=N==null?void 0:N.height)!==null&&r!==void 0?r:0,Q=f+(d!=="center"?"-"+d:""),Y=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},ee=Array.isArray(v)?v:[v],ne=ee.length>0,P={padding:Y,boundary:ee.filter(lK),altBoundary:ne},{refs:se,floatingStyles:re,placement:Z,isPositioned:X,middlewareData:W}=Yq({strategy:"fixed",placement:Q,whileElementsMounted:(...Te)=>jq(...Te,{animationFrame:T==="always"}),elements:{reference:C.anchor},middleware:[Tq({mainAxis:h+U,alignmentAxis:p}),g&&wq({mainAxis:!0,crossAxis:!1,limiter:y==="partial"?Sq():void 0,...P}),g&&_q({...P}),Cq({...P,apply:({elements:Te,rects:Re,availableWidth:$e,availableHeight:ve})=>{const{width:me,height:We}=Re.reference,Xe=Te.floating.style;Xe.setProperty("--radix-popper-available-width",`${$e}px`),Xe.setProperty("--radix-popper-available-height",`${ve}px`),Xe.setProperty("--radix-popper-anchor-width",`${me}px`),Xe.setProperty("--radix-popper-anchor-height",`${We}px`)}}),L&&Xq({element:L,padding:m}),cK({arrowWidth:$,arrowHeight:U}),A&&bq({strategy:"referenceHidden",...P})]}),[K,ge]=KD(Z),Se=Vp(w);Sp(()=>{X&&(Se==null||Se())},[X,Se]);const xe=(i=W.arrow)===null||i===void 0?void 0:i.x,Me=(s=W.arrow)===null||s===void 0?void 0:s.y,he=((o=W.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Oe,be]=E.useState();return Sp(()=>{S&&be(window.getComputedStyle(S).zIndex)},[S]),E.createElement("div",{ref:se.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:X?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[(a=W.transformOrigin)===null||a===void 0?void 0:a.x,(l=W.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},E.createElement(nK,{scope:u,placedSide:K,onArrowChange:B,arrowX:xe,arrowY:Me,shouldHideArrow:he},E.createElement(Eh.div,Ct({"data-side":K,"data-align":ge},M,{ref:O,style:{...M.style,animation:X?void 0:"none",opacity:(c=W.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))}),sK="PopperArrow",oK={top:"bottom",right:"left",bottom:"top",left:"right"},aK=E.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=rK(sK,r),o=oK[s.placedSide];return E.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},E.createElement(Kq,Ct({},i,{ref:n,style:{...i.style,display:"block"}})))});function lK(t){return t!==null}const cK=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,f=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,h=f?0:t.arrowWidth,d=f?0:t.arrowHeight,[p,m]=KD(a),g={start:"0%",center:"50%",end:"100%"}[m],v=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+h/2,x=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+d/2;let y="",A="";return p==="bottom"?(y=f?g:`${v}px`,A=`${-d}px`):p==="top"?(y=f?g:`${v}px`,A=`${l.floating.height+d}px`):p==="right"?(y=`${-d}px`,A=f?g:`${x}px`):p==="left"&&(y=`${l.floating.width+d}px`,A=f?g:`${x}px`),{data:{x:y,y:A}}}});function KD(t){const[e,n="center"]=t.split("-");return[e,n]}const uK=Zq,fK=tK,hK=iK,dK=aK;function pK(t,e){return E.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const JD=t=>{const{present:e,children:n}=t,r=mK(e),i=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),s=Hp(r.ref,i.ref);return typeof n=="function"||r.isPresent?E.cloneElement(i,{ref:s}):null};JD.displayName="Presence";function mK(t){const[e,n]=E.useState(),r=E.useRef({}),i=E.useRef(t),s=E.useRef("none"),o=t?"mounted":"unmounted",[a,l]=pK(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const c=zv(r.current);s.current=a==="mounted"?c:"none"},[a]),Sp(()=>{const c=r.current,u=i.current;if(u!==t){const h=s.current,d=zv(c);t?l("MOUNT"):d==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==d?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Sp(()=>{if(e){const c=f=>{const d=zv(r.current).includes(f.animationName);f.target===e&&d&&L4.flushSync(()=>l("ANIMATION_END"))},u=f=>{f.target===e&&(s.current=zv(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:E.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function zv(t){return(t==null?void 0:t.animationName)||"none"}function gK({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=vK({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=Vp(n),l=E.useCallback(c=>{if(s){const f=typeof c=="function"?c(t):c;f!==t&&a(f)}else i(c)},[s,t,i,a]);return[o,l]}function vK({defaultProp:t,onChange:e}){const n=E.useState(t),[r]=n,i=E.useRef(r),s=Vp(e);return E.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const yK=E.forwardRef((t,e)=>E.createElement(Eh.span,Ct({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}))),xK=yK,[xE,aDe]=OD("Tooltip",[XD]),EE=XD(),EK="TooltipProvider",gw="tooltip.open",[lDe,V4]=xE(EK),W4="Tooltip",[_K,_E]=xE(W4),bK=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,l=V4(W4,t.__scopeTooltip),c=EE(e),[u,f]=E.useState(null),h=fq(),d=E.useRef(0),p=o??l.disableHoverableContent,m=a??l.delayDuration,g=E.useRef(!1),[v=!1,x]=gK({prop:r,defaultProp:i,onChange:M=>{M?(l.onOpen(),document.dispatchEvent(new CustomEvent(gw))):l.onClose(),s==null||s(M)}}),y=E.useMemo(()=>v?g.current?"delayed-open":"instant-open":"closed",[v]),A=E.useCallback(()=>{window.clearTimeout(d.current),g.current=!1,x(!0)},[x]),T=E.useCallback(()=>{window.clearTimeout(d.current),x(!1)},[x]),w=E.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{g.current=!0,x(!0)},m)},[m,x]);return E.useEffect(()=>()=>window.clearTimeout(d.current),[]),E.createElement(uK,c,E.createElement(_K,{scope:e,contentId:h,open:v,stateAttribute:y,trigger:u,onTriggerChange:f,onTriggerEnter:E.useCallback(()=>{l.isOpenDelayed?w():A()},[l.isOpenDelayed,w,A]),onTriggerLeave:E.useCallback(()=>{p?T():window.clearTimeout(d.current)},[T,p]),onOpen:A,onClose:T,disableHoverableContent:p},n))},z9="TooltipTrigger",AK=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=_E(z9,n),s=V4(z9,n),o=EE(n),a=E.useRef(null),l=Hp(e,a,i.onTriggerChange),c=E.useRef(!1),u=E.useRef(!1),f=E.useCallback(()=>c.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),E.createElement(fK,Ct({asChild:!0},o),E.createElement(Eh.button,Ct({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:Ac(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ac(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Ac(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ac(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:Ac(t.onBlur,i.onClose),onClick:Ac(t.onClick,i.onClose)})))}),TK="TooltipPortal",[cDe,wK]=xE(TK,{forceMount:void 0}),F1="TooltipContent",SK=E.forwardRef((t,e)=>{const n=wK(F1,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=_E(F1,t.__scopeTooltip);return E.createElement(JD,{present:r||o.open},o.disableHoverableContent?E.createElement(QD,Ct({side:i},s,{ref:e})):E.createElement(CK,Ct({side:i},s,{ref:e})))}),CK=E.forwardRef((t,e)=>{const n=_E(F1,t.__scopeTooltip),r=V4(F1,t.__scopeTooltip),i=E.useRef(null),s=Hp(e,i),[o,a]=E.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:f}=r,h=E.useCallback(()=>{a(null),f(!1)},[f]),d=E.useCallback((p,m)=>{const g=p.currentTarget,v={x:p.clientX,y:p.clientY},x=LK(v,g.getBoundingClientRect()),y=NK(v,x),A=OK(m.getBoundingClientRect()),T=BK([...y,...A]);a(T),f(!0)},[f]);return E.useEffect(()=>()=>h(),[h]),E.useEffect(()=>{if(l&&u){const p=g=>d(g,u),m=g=>d(g,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",m)}}},[l,u,d,h]),E.useEffect(()=>{if(o){const p=m=>{const g=m.target,v={x:m.clientX,y:m.clientY},x=(l==null?void 0:l.contains(g))||(u==null?void 0:u.contains(g)),y=!DK(v,o);x?h():y&&(h(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,o,c,h]),E.createElement(QD,Ct({},t,{ref:s}))}),[MK,RK]=xE(W4,{isInside:!1}),QD=E.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=_E(F1,n),c=EE(n),{onClose:u}=l;return E.useEffect(()=>(document.addEventListener(gw,u),()=>document.removeEventListener(gw,u)),[u]),E.useEffect(()=>{if(l.trigger){const f=h=>{const d=h.target;d!=null&&d.contains(l.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,u]),E.createElement(oq,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u},E.createElement(hK,Ct({"data-state":l.stateAttribute},c,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),E.createElement(ED,null,r),E.createElement(MK,{scope:n,isInside:!0},E.createElement(xK,{id:l.contentId,role:"tooltip"},i||r))))}),IK="TooltipArrow",PK=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=EE(n);return RK(IK,n).isInside?null:E.createElement(dK,Ct({},i,r,{ref:e}))});function LK(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function NK(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function OK(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function DK(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function BK(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),kK(e)}function kK(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}const FK=bK,UK=AK,zK=SK,HK=PK;function GK(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Dr(t,e){if(t==null)return{};var n=GK(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}let di;(function(t){t[t.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",t[t.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",t[t.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",t[t.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",t[t.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",t[t.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",t[t.THEME_ERROR=6]="THEME_ERROR",t[t.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",t[t.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",t[t.EMPTY_KEY=9]="EMPTY_KEY"})(di||(di={}));const VK={[di.UNSUPPORTED_INPUT]:(t,e)=>[`An input with type \`${t}\` input was found at path \`${e}\` but it's not supported yet.`],[di.NO_COMPONENT_FOR_TYPE]:(t,e)=>[`Type \`${t}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[di.UNKNOWN_INPUT]:(t,e)=>[`input at path \`${t}\` is not recognized.`,e],[di.DUPLICATE_KEYS]:(t,e,n)=>[`Key \`${t}\` of path \`${e}\` already exists at path \`${n}\`. Even nested keys need to be unique. Rename one of the keys.`],[di.ALREADY_REGISTERED_TYPE]:t=>[`Type ${t} has already been registered. You can't register a component with the same type.`],[di.CLIPBOARD_ERROR]:t=>["Error copying the value",t],[di.THEME_ERROR]:(t,e)=>[`Error accessing the theme \`${t}.${e}\` value.`],[di.PATH_DOESNT_EXIST]:t=>[`Error getting the value at path \`${t}\`. There is probably an error in your \`render\` function.`],[di.PATH_DOESNT_EXIST]:t=>[`Error accessing the value at path \`${t}\``],[di.INPUT_TYPE_OVERRIDE]:(t,e,n)=>[`Input at path \`${t}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${n}\`.`],[di.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function ZD(t,e,...n){const[r,...i]=VK[e](...n);console[t]("LEVA: "+r,...i)}const Tc=ZD.bind(null,"warn"),WK=ZD.bind(null,"log"),jK=["value"],$K=["schema"],XK=["value"],eB=[],ch={};function H9(t){let{value:e}=t,n=Dr(t,jK);for(let r of eB){const i=r(e,n);if(i)return i}}function $c(t,e){let{schema:n}=e,r=Dr(e,$K);if(t in ch){Tc(di.ALREADY_REGISTERED_TYPE,t);return}eB.push((i,s)=>n(i,s)&&t),ch[t]=r}function nA(t,e,n,r){const{normalize:i}=ch[t];if(i)return i(e,n,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=Dr(e,XK);return{value:s,settings:o}}function YK(t,e,n,r,i,s){const{sanitize:o}=ch[t];return o?o(e,n,r,i,s):e}function G9(t,e,n){const{format:r}=ch[t];return r?r(e,n):e}function qK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V9(Object(n),!0).forEach(function(r){qK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Fu=(t,e,n)=>t>n?n:t<e?e:t,KK=t=>{if(t===""||typeof t=="number")return t;try{const e=vu(t);if(!isNaN(e))return e}catch{}return parseFloat(t)},JK=Math.log(10);function W9(t){let e=Math.abs(+String(t).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const n=Math.floor(Math.log(e)/JK)+1,r=Math.floor(Math.log10(Math.abs(t))),i=Math.pow(10,r-n);return Math.max(i,.001)}const E3=(t,e,n)=>n===e?0:(Fu(t,e,n)-e)/(n-e),_3=(t,e,n)=>t*(n-e)+e,QK=()=>"_"+Math.random().toString(36).substr(2,9),j9=/\(([0-9+\-*/^ .]+)\)/,$9=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,X9=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,Y9=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,q9=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,K9=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function vu(t){if(isNaN(Number(t)))if(j9.test(t)){const e=t.replace(j9,(n,r)=>String(vu(r)));return vu(e)}else if($9.test(t)){const e=t.replace($9,(n,r,i)=>String(Math.pow(Number(r),Number(i))));return vu(e)}else if(X9.test(t)){const e=t.replace(X9,(n,r,i)=>String(Number(r)*Number(i)));return vu(e)}else if(Y9.test(t)){const e=t.replace(Y9,(n,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return vu(e)}else if(q9.test(t)){const e=t.replace(q9,(n,r,i)=>String(Number(r)+Number(i)));return vu(e)}else if(K9.test(t)){const e=t.replace(K9,(n,r,i)=>String(Number(r)-Number(i)));return vu(e)}else return Number(t);return Number(t)}function ZK(t,e){return e.reduce((n,r)=>(t&&t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}function eJ(t,e){const n=Sn({},t);return e.forEach(r=>r in t&&delete n[r]),n}function tJ(t,e){return t.reduce((n,r,i)=>Object.assign(n,{[e[i]]:r}),{})}function tB(t){return Object.prototype.toString.call(t)==="[object Object]"}const nJ=t=>tB(t)&&Object.keys(t).length===0;let ra;(function(t){t.BUTTON="BUTTON",t.BUTTON_GROUP="BUTTON_GROUP",t.MONITOR="MONITOR",t.FOLDER="FOLDER"})(ra||(ra={}));let pl;(function(t){t.SELECT="SELECT",t.IMAGE="IMAGE",t.NUMBER="NUMBER",t.COLOR="COLOR",t.STRING="STRING",t.BOOLEAN="BOOLEAN",t.INTERVAL="INTERVAL",t.VECTOR3D="VECTOR3D",t.VECTOR2D="VECTOR2D"})(pl||(pl={}));const rJ=["type","__customInput"],iJ=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],sJ=["type"];function nB(t,e,n={},r){var i,s;if(typeof t!="object"||Array.isArray(t))return{type:r,input:t,options:Sn({key:e,label:e,optional:!1,disabled:!1,order:0},n)};if("__customInput"in t){const{type:T,__customInput:w}=t,M=Dr(t,rJ);return nB(w,e,M,T)}const{render:o,label:a,optional:l,order:c=0,disabled:u,hint:f,onChange:h,onEditStart:d,onEditEnd:p,transient:m}=t,g=Dr(t,iJ),v=Sn({render:o,key:e,label:a??e,hint:f,transient:m??!!h,onEditStart:d,onEditEnd:p,disabled:u,optional:l,order:c},n);let{type:x}=g,y=Dr(g,sJ);if(x=r??x,x in ra)return{type:x,input:y,options:v};let A;return r&&tB(y)&&"value"in y?A=y.value:A=nJ(y)?void 0:y,{type:x,input:A,options:Sn(Sn({},v),{},{onChange:h,optional:(i=v.optional)!==null&&i!==void 0?i:!1,disabled:(s=v.disabled)!==null&&s!==void 0?s:!1})}}function oJ(t,e,n,r){const i=nB(t,e),{type:s,input:o,options:a}=i;if(s)return s in ra?i:{type:s,input:nA(s,o,n,r),options:a};let l=H9(o);return l?{type:l,input:nA(l,o,n,r),options:a}:(l=H9({value:o}),l?{type:l,input:nA(l,{value:o},n,r),options:a}:!1)}function J9(t,e,n,r,i){const{value:s,type:o,settings:a}=t;t.value=rB({type:o,value:s,settings:a},e,n,r),t.fromPanel=i}const aJ=function(e,n,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=n,this.error=r};function rB({type:t,value:e,settings:n},r,i,s){const o=t!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=YK(t,o,n,e,i,s)}catch(l){throw new aJ(`The value \`${r}\` did not result in a correct value.`,e,l)}return O1(a,e)?e:a}const iB=(t,e,n=!1)=>{let r=0;return function(){const i=arguments,s=n&&!r,o=()=>t.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},sB=t=>t.shiftKey?5:t.altKey?1/5:1;function lJ(t,e){const n=console.error;console.error=()=>{},pE.render(t,e),console.error=n}const cJ=["value"],uJ=["min","max"],fJ=t=>{if(typeof t=="number")return!0;if(typeof t=="string"){const e=parseFloat(t);return isNaN(e)?!1:t.substring((""+e).length).trim().length<4}return!1},oB=(t,{min:e=-1/0,max:n=1/0,suffix:r})=>{const i=parseFloat(t);if(t===""||isNaN(i))throw Error("Invalid number");const s=Fu(i,e,n);return r?s+r:s},hJ=(t,{pad:e=0,suffix:n})=>{const r=parseFloat(t).toFixed(e);return n?r+n:r},aB=t=>{let{value:e}=t,n=Dr(t,cJ);const{min:r=-1/0,max:i=1/0}=n,s=Dr(n,uJ);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=Fu(o,r,i);let l=n.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const c=l?W9(l)*10:W9(o);l=l||c/10;const u=Math.round(Fu(Math.log10(1/c),0,2));return{value:a?o+a:o,settings:Sn({initialValue:o,step:l,pad:u,min:r,max:i,suffix:a},s)}},lB=(t,{step:e,initialValue:n})=>{const r=Math.round((t-n)/e);return n+r*e};var cB=Object.freeze({__proto__:null,schema:fJ,sanitize:oB,format:hJ,normalize:aB,sanitizeStep:lB});function Ci(){return Ci=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ci.apply(this,arguments)}const uB=E.createContext({});function Xs(){return E.useContext(uB)}const j4=E.createContext(null),fB=E.createContext(null),hB=E.createContext(null);function vg(){return E.useContext(fB)}function dJ(){return E.useContext(hB)}const dB=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function Hv(t,e){const[n,r]=t.split(" "),i={};return n!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${n!=="default"&&n||e.borderColor}`),r&&(i.backgroundColor=r),i}const $m={$inputStyle:()=>t=>Hv(t,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>t=>Hv(t,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>t=>Hv(t,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>t=>Hv(t,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:An,css:uDe,createTheme:pJ,globalCss:mJ,keyframes:fDe}=SD({prefix:"leva",theme:dB(),utils:Sn(Sn({},$m),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:t=>({"&:focus":$m.$focusStyle()(t)}),$focusWithin:t=>({"&:focus-within":$m.$focusStyle()(t)}),$hover:t=>({"&:hover":$m.$hoverStyle()(t)}),$active:t=>({"&:active":$m.$activeStyle()(t)})})}),gJ=mJ({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function vJ(t){const e=dB();if(!t)return{theme:e,className:""};Object.keys(t).forEach(r=>{Object.assign(e[r],t[r])});const n=pJ(e);return{theme:e,className:n.className}}function Rc(t,e){const{theme:n}=E.useContext(j4);if(!(t in n)||!(e in n[t]))return Tc(di.THEME_ERROR,t,e),"";let r=e;for(;;){let i=n[t][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const pB=An("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),mB=An("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${pB}`]:{paddingLeft:0}}),yJ=An(mB,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),xJ=An("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),EJ=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],_J=["onUpdate"];function $4(t){let{innerLabel:e,value:n,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:c=0}=t,u=Dr(t,EJ);const{id:f,emitOnEditStart:h,emitOnEditEnd:d,disabled:p}=Xs(),m=a||f,g=E.useRef(null),v=c>0,x=v?"textarea":"input",y=E.useCallback(w=>M=>{const C=M.currentTarget.value;w(C)},[]);Ue.useEffect(()=>{const w=g.current,M=y(C=>{r(C),d()});return w==null||w.addEventListener("blur",M),()=>w==null?void 0:w.removeEventListener("blur",M)},[y,r,d]);const A=E.useCallback(w=>{w.key==="Enter"&&y(r)(w)},[y,r]),T=Object.assign({as:x},v?{rows:c}:{},u);return Ue.createElement(xJ,{textArea:v},e&&typeof e=="string"?Ue.createElement(mB,null,e):e,Ue.createElement(pB,Ci({levaType:o,ref:g,id:m,type:l,autoComplete:"off",spellCheck:"false",value:n,onChange:y(i),onFocus:()=>h(),onKeyPress:A,onKeyDown:s,disabled:p},T)))}function bJ(t){let{onUpdate:e}=t,n=Dr(t,_J);const r=E.useCallback(s=>e(KK(s)),[e]),i=E.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return Ue.createElement($4,Ci({},n,{onUpdate:r,onKeyDown:i,type:"number"}))}const b3=An("div",{}),vw=An("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),AJ=An("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${vw}::after`]:{opacity:.6},[`${b3}:hover > & + ${vw}::after`]:{opacity:.6},[`${b3}:hover > & > svg`]:{opacity:1}}),gB=An("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${b3}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),vB=An("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${gB} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),yB=An(vB,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),TJ=An("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),wJ=An("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),yw=An("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),SJ=An("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${yw}`]:{pointerEvents:"auto"}}}}}),xB=An("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),CJ=An("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),MJ=An(HK,{fill:"$toolTipBackground"});function X4({children:t}){const{className:e}=E.useContext(j4);return Ue.createElement(RX,{className:e},t)}const RJ=["align"];function IJ(){const{id:t,disable:e,disabled:n}=Xs();return Ue.createElement(Ue.Fragment,null,Ue.createElement(wJ,{id:t+"__disable",type:"checkbox",checked:!n,onChange:()=>e(!n)}),Ue.createElement("label",{htmlFor:t+"__disable"}))}function PJ(t){const{id:e,optional:n,hint:r}=Xs(),i=t.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof t.children=="string"?{title:t.children}:null;return Ue.createElement(Ue.Fragment,null,n&&Ue.createElement(IJ,null),r!==void 0?Ue.createElement(FK,null,Ue.createElement(UK,{asChild:!0},Ue.createElement(yw,Ci({},i,t))),Ue.createElement(zK,{side:"top",sideOffset:2},Ue.createElement(CJ,null,r,Ue.createElement(MJ,null)))):Ue.createElement(yw,Ci({},i,s,t)))}function vl(t){let{align:e}=t,n=Dr(t,RJ);const{value:r,label:i,key:s,disabled:o}=Xs(),{hideCopyButton:a}=dJ(),l=!a&&s!==void 0,[c,u]=E.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),u(!0)}catch{Tc(di.CLIPBOARD_ERROR,{[s]:r})}};return Ue.createElement(TJ,{align:e,onPointerLeave:()=>u(!1)},Ue.createElement(PJ,n),l&&!o&&Ue.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},c?Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ue.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),Ue.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):Ue.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ue.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),Ue.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const LJ=["toggled"],NJ=An("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function Y4(t){let{toggled:e}=t,n=Dr(t,LJ);return Ue.createElement(NJ,Ci({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},n),Ue.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const OJ=["input"];function Ha(t){let{input:e}=t,n=Dr(t,OJ);return e?Ue.createElement(yB,n):Ue.createElement(vB,n)}function EB({value:t,type:e,settings:n,setValue:r}){const[i,s]=E.useState(G9(e,t,n)),o=E.useRef(t),a=E.useRef(n);a.current=n;const l=E.useCallback(u=>s(G9(e,u,a.current)),[e]),c=E.useCallback(u=>{try{r(u)}catch(f){const{type:h,previousValue:d}=f;if(h!=="LEVA_ERROR")throw f;l(d)}},[l,r]);return E.useEffect(()=>{O1(t,o.current)||l(t),o.current=t},[t,l]),{displayValue:i,onChange:s,onUpdate:c}}function yg(t,e){const{emitOnEditStart:n,emitOnEditEnd:r}=Xs();return eq(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),n==null||n());const s=t(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function DJ(t){const e=E.useRef(null),n=E.useRef(null),r=E.useRef(!1);return E.useEffect(()=>{const i=iB(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,t(e.current,n.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[t]),E.useEffect(()=>{n.current=e.current.getContext("2d")},[]),[e,n]}function _B(){const t=E.useRef(null),e=E.useRef({x:0,y:0}),n=E.useCallback(r=>{Object.assign(e.current,r),t.current&&(t.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[t,n]}const BJ=["__refCount"],rA=(t,e)=>{if(!t[e])return null;const n=t[e];return Dr(n,BJ)};function kJ(t){const e=vg(),[n,r]=E.useState(rA(e.getData(),t)),i=E.useCallback(c=>e.setValueAtPath(t,c,!0),[t,e]),s=E.useCallback(c=>e.setSettingsAtPath(t,c),[t,e]),o=E.useCallback(c=>e.disableInputAtPath(t,c),[t,e]),a=E.useCallback(()=>e.emitOnEditStart(t),[t,e]),l=E.useCallback(()=>e.emitOnEditEnd(t),[t,e]);return E.useEffect(()=>{r(rA(e.getData(),t));const c=e.useStore.subscribe(u=>rA(u.data,t),r,{equalityFn:dg});return()=>c()},[e,t]),[n,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const FJ=An("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),bB=An("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),xw=An("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),AB=An("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),TB=An("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function UJ({value:t,min:e,max:n,onDrag:r,step:i,initialValue:s}){const o=E.useRef(null),a=E.useRef(null),l=E.useRef(0),c=Rc("sizes","scrubberWidth"),u=yg(({event:h,first:d,xy:[p],movement:[m],memo:g})=>{if(d){const{width:x,left:y}=o.current.getBoundingClientRect();l.current=x-parseFloat(c),g=(h==null?void 0:h.target)===a.current?t:_3((p-y)/x,e,n)}const v=g+_3(m/l.current,0,n-e);return r(lB(v,{step:i,initialValue:s})),g}),f=E3(t,e,n);return Ue.createElement(AB,Ci({ref:o},u()),Ue.createElement(bB,null,Ue.createElement(TB,{style:{left:0,right:`${(1-f)*100}%`}})),Ue.createElement(xw,{ref:a,style:{left:`calc(${f} * (100% - ${c}))`}}))}const zJ=Ue.memo(({label:t,onUpdate:e,step:n,innerLabelTrim:r})=>{const[i,s]=E.useState(!1),o=yg(({active:a,delta:[l],event:c,memo:u=0})=>(s(a),u+=l/2,Math.abs(u)>=1&&(e(f=>parseFloat(f)+Math.floor(u)*n*sB(c)),u=0),u));return Ue.createElement(yJ,Ci({dragging:i,title:t.length>1?t:""},o()),t.slice(0,r))});function wB({label:t,id:e,displayValue:n,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&Ue.createElement(zJ,{label:t,step:s.step,onUpdate:r,innerLabelTrim:o});return Ue.createElement(bJ,{id:e,value:String(n),onUpdate:r,onChange:i,innerLabel:a})}function HJ(){const t=Xs(),{label:e,value:n,onUpdate:r,settings:i,id:s}=t,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return Ue.createElement(Ha,{input:!0},Ue.createElement(vl,null,e),Ue.createElement(FJ,{hasRange:l},l&&Ue.createElement(UJ,Ci({value:parseFloat(n),onDrag:r},i)),Ue.createElement(wB,Ci({},t,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:GJ}=cB,VJ=Dr(cB,["sanitizeStep"]);var WJ=Sn({component:HJ},VJ);const jJ=(t,e)=>No().schema({options:No().passesAnyOf(No().object(),No().array())}).test(e),$J=(t,{values:e})=>{if(e.indexOf(t)<0)throw Error("Selected value doesn't match Select options");return t},XJ=(t,{values:e})=>e.indexOf(t),YJ=t=>{let{value:e,options:n}=t,r,i;return Array.isArray(n)?(i=n,r=n.map(s=>String(s))):(i=Object.values(n),r=Object.keys(n)),"value"in t?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(n).includes(e)||(n[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var qJ=Object.freeze({__proto__:null,schema:jJ,sanitize:$J,format:XJ,normalize:YJ});const KJ=An("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),Ew=An("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),JJ=An("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${Ew}:focus + &`]:{$focusStyle:""},[`${Ew}:hover + &`]:{$hoverStyle:""}});function QJ({displayValue:t,value:e,onUpdate:n,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=E.useRef();return e===a[t]&&(l.current=o[t]),Ue.createElement(KJ,null,Ue.createElement(Ew,{id:r,value:t,onChange:c=>n(a[Number(c.currentTarget.value)]),disabled:s},o.map((c,u)=>Ue.createElement("option",{key:c,value:u},c))),Ue.createElement(JJ,null,l.current),Ue.createElement(Y4,{toggled:!0}))}function ZJ(){const{label:t,value:e,displayValue:n,onUpdate:r,id:i,disabled:s,settings:o}=Xs();return Ue.createElement(Ha,{input:!0},Ue.createElement(vl,null,t),Ue.createElement(QJ,{id:i,value:e,displayValue:n,onUpdate:r,settings:o,disabled:s}))}var eQ=Sn({component:ZJ},qJ);const tQ=t=>No().string().test(t),nQ=t=>{if(typeof t!="string")throw Error("Invalid string");return t},rQ=({value:t,editable:e=!0,rows:n=!1})=>({value:t,settings:{editable:e,rows:typeof n=="number"?n:n?5:0}});var iQ=Object.freeze({__proto__:null,schema:tQ,sanitize:nQ,normalize:rQ});const sQ=["displayValue","onUpdate","onChange","editable"],oQ=An("div",{whiteSpace:"pre-wrap"});function aQ(t){let{displayValue:e,onUpdate:n,onChange:r,editable:i=!0}=t,s=Dr(t,sQ);return i?Ue.createElement($4,Ci({value:e,onUpdate:n,onChange:r},s)):Ue.createElement(oQ,null,e)}function lQ(){const{label:t,settings:e,displayValue:n,onUpdate:r,onChange:i}=Xs();return Ue.createElement(Ha,{input:!0},Ue.createElement(vl,null,t),Ue.createElement(aQ,Ci({displayValue:n,onUpdate:r,onChange:i},e)))}var cQ=Sn({component:lQ},iQ);const uQ=t=>No().boolean().test(t),fQ=t=>{if(typeof t!="boolean")throw Error("Invalid boolean");return t};var hQ=Object.freeze({__proto__:null,schema:uQ,sanitize:fQ});const dQ=An("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function pQ({value:t,onUpdate:e,id:n,disabled:r}){return Ue.createElement(dQ,null,Ue.createElement("input",{id:n,type:"checkbox",checked:t,onChange:i=>e(i.currentTarget.checked),disabled:r}),Ue.createElement("label",{htmlFor:n},Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ue.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function mQ(){const{label:t,value:e,onUpdate:n,disabled:r,id:i}=Xs();return Ue.createElement(Ha,{input:!0},Ue.createElement(vl,null,t),Ue.createElement(pQ,{value:e,onUpdate:n,id:i,disabled:r}))}var gQ=Sn({component:mQ},hQ);const vQ=["locked"];function yQ({value:t,id:e,valueKey:n,settings:r,onUpdate:i,innerLabelTrim:s}){const o=E.useRef(t[n]);o.current=t[n];const a=E.useCallback(c=>i({[n]:rB({type:"NUMBER",value:o.current,settings:r},c)}),[i,r,n]),l=EB({type:"NUMBER",value:t[n],settings:r,setValue:a});return Ue.createElement(wB,{id:e,label:n,value:t[n],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const xQ=An("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function EQ(t){let{locked:e}=t,n=Dr(t,vQ);return Ue.createElement("svg",Ci({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),e?Ue.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):Ue.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function q4({value:t,onUpdate:e,settings:n,innerLabelTrim:r}){const{id:i,setSettings:s}=Xs(),{lock:o,locked:a}=n;return Ue.createElement(xQ,{withLock:o},o&&Ue.createElement(EQ,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(t).map((l,c)=>Ue.createElement(yQ,{id:c===0?i:`${i}.${l}`,key:l,valueKey:l,value:t,settings:n[l],onUpdate:e,innerLabelTrim:r})))}const SB=(t,e)=>{const n={};let r=0,i=1/0;Object.entries(t).forEach(([s,o])=>{n[s]=aB(Sn({value:o},e[s])).settings,r=Math.max(r,n[s].step),i=Math.min(i,n[s].pad)});for(let s in n){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(n[s].step=r,n[s].pad=i)}return n},_Q=["lock"],bQ=["value"];function AQ(t){const e=No().array().length(t).every.number(),n=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===t&&i.every(s=>isFinite(s))};return r=>e.test(r)||n(r)}function TQ(t){return Array.isArray(t)?"array":"object"}function a1(t,e,n){return TQ(t)===e?t:e==="array"?Object.values(t):tJ(t,n)}const wQ=(t,e,n)=>{const r=a1(t,"object",e.keys);for(let o in r)r[o]=oB(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=a1(n,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],c=o[a],u=c!==0?l/c:1;for(let f in o)f===a?s[a]=l:s[f]=o[f]*u}else s=Sn(Sn({},o),r)}return a1(s,e.format,e.keys)},SQ=(t,e)=>a1(t,"object",e.keys),CQ=t=>!!t&&("step"in t||"min"in t||"max"in t);function MQ(t,e,n=[]){const{lock:r=!1}=e,i=Dr(e,_Q),s=Array.isArray(t)?"array":"object",o=s==="object"?Object.keys(t):n,a=a1(t,"object",o),l=CQ(i)?o.reduce((u,f)=>Object.assign(u,{[f]:i}),{}):i,c=SB(a,l);return{value:s==="array"?t:a,settings:Sn(Sn({},c),{},{format:s,keys:o,lock:r,locked:!1})}}function CB(t){return{schema:AQ(t.length),normalize:e=>{let{value:n}=e,r=Dr(e,bQ);return MQ(n,r,t)},format:(e,n)=>SQ(e,n),sanitize:(e,n,r)=>wQ(e,n,r)}}var RQ={grad:.9,turn:360,rad:360/(2*Math.PI)},sc=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},ps=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Pa=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},MB=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Q9=function(t){return{r:Pa(t.r,0,255),g:Pa(t.g,0,255),b:Pa(t.b,0,255),a:Pa(t.a)}},iA=function(t){return{r:ps(t.r),g:ps(t.g),b:ps(t.b),a:ps(t.a,3)}},IQ=/^#([0-9a-f]{3,8})$/i,Gv=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},RB=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},IB=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),c=s%6;return{r:255*[r,a,o,o,l,r][c],g:255*[l,r,r,a,o,o][c],b:255*[o,o,l,r,r,a][c],a:i}},Z9=function(t){return{h:MB(t.h),s:Pa(t.s,0,100),l:Pa(t.l,0,100),a:Pa(t.a)}},e8=function(t){return{h:ps(t.h),s:ps(t.s),l:ps(t.l),a:ps(t.a,3)}},t8=function(t){return IB((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},l1=function(t){return{h:(e=RB(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},PQ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,LQ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,NQ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,OQ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_w={string:[[function(t){var e=IQ.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?ps(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?ps(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=NQ.exec(t)||OQ.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Q9({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=PQ.exec(t)||LQ.exec(t);if(!e)return null;var n,r,i=Z9({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(RQ[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return t8(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=i===void 0?1:i;return sc(e)&&sc(n)&&sc(r)?Q9({r:Number(e),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,s=i===void 0?1:i;if(!sc(e)||!sc(n)||!sc(r))return null;var o=Z9({h:Number(e),s:Number(n),l:Number(r),a:Number(s)});return t8(o)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,s=i===void 0?1:i;if(!sc(e)||!sc(n)||!sc(r))return null;var o=function(a){return{h:MB(a.h),s:Pa(a.s,0,100),v:Pa(a.v,0,100),a:Pa(a.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(s)});return IB(o)},"hsv"]]},n8=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},PB=function(t){return typeof t=="string"?n8(t.trim(),_w.string):typeof t=="object"&&t!==null?n8(t,_w.object):[null,void 0]},DQ=function(t){return PB(t)[1]},sA=function(t,e){var n=l1(t);return{h:n.h,s:Pa(n.s+100*e,0,100),l:n.l,a:n.a}},oA=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},r8=function(t,e){var n=l1(t);return{h:n.h,s:n.s,l:Pa(n.l+100*e,0,100),a:n.a}},bw=function(){function t(e){this.parsed=PB(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return ps(oA(this.rgba),2)},t.prototype.isDark=function(){return oA(this.rgba)<.5},t.prototype.isLight=function(){return oA(this.rgba)>=.5},t.prototype.toHex=function(){return e=iA(this.rgba),n=e.r,r=e.g,i=e.b,o=(s=e.a)<1?Gv(ps(255*s)):"","#"+Gv(n)+Gv(r)+Gv(i)+o;var e,n,r,i,s,o},t.prototype.toRgb=function(){return iA(this.rgba)},t.prototype.toRgbString=function(){return e=iA(this.rgba),n=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,s},t.prototype.toHsl=function(){return e8(l1(this.rgba))},t.prototype.toHslString=function(){return e=e8(l1(this.rgba)),n=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,s},t.prototype.toHsv=function(){return e=RB(this.rgba),{h:ps(e.h),s:ps(e.s),v:ps(e.v),a:ps(e.a,3)};var e},t.prototype.invert=function(){return lo({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),lo(sA(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),lo(sA(this.rgba,-e))},t.prototype.grayscale=function(){return lo(sA(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),lo(r8(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),lo(r8(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?lo({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):ps(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=l1(this.rgba);return typeof e=="number"?lo({h:e,s:n.s,l:n.l,a:n.a}):ps(n.h)},t.prototype.isEqual=function(e){return this.toHex()===lo(e).toHex()},t}(),lo=function(t){return t instanceof bw?t:new bw(t)},i8=[],BQ=function(t){t.forEach(function(e){i8.indexOf(e)<0&&(e(bw,_w),i8.push(e))})};function kQ(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),f=1/0,h="black";if(!s.length)for(var d in n)s[d]=new t(n[d]).toRgb();for(var p in n){var m=(a=u,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<f&&(f=m,h=p)}return h}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":n[a];return l?new t(l).toRgb():null},"name"])}function $p(){return($p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function K4(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)e.indexOf(n=s[r])>=0||(i[n]=t[n]);return i}function Aw(t){var e=E.useRef(t),n=E.useRef(function(r){e.current&&e.current(r)});return e.current=t,n.current}var Mp=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t<e?e:t},c1=function(t){return"touches"in t},Tw=function(t){return t&&t.ownerDocument.defaultView||self},s8=function(t,e,n){var r=t.getBoundingClientRect(),i=c1(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,n):e;return{left:Mp((i.pageX-(r.left+Tw(t).pageXOffset))/r.width),top:Mp((i.pageY-(r.top+Tw(t).pageYOffset))/r.height)}},o8=function(t){!c1(t)&&t.preventDefault()},J4=Ue.memo(function(t){var e=t.onMove,n=t.onKey,r=K4(t,["onMove","onKey"]),i=E.useRef(null),s=Aw(e),o=Aw(n),a=E.useRef(null),l=E.useRef(!1),c=E.useMemo(function(){var d=function(g){o8(g),(c1(g)?g.touches.length>0:g.buttons>0)&&i.current?s(s8(i.current,g,a.current)):m(!1)},p=function(){return m(!1)};function m(g){var v=l.current,x=Tw(i.current),y=g?x.addEventListener:x.removeEventListener;y(v?"touchmove":"mousemove",d),y(v?"touchend":"mouseup",p)}return[function(g){var v=g.nativeEvent,x=i.current;if(x&&(o8(v),!function(A,T){return T&&!c1(A)}(v,l.current)&&x)){if(c1(v)){l.current=!0;var y=v.changedTouches||[];y.length&&(a.current=y[0].identifier)}x.focus(),s(s8(x,v,a.current)),m(!0)}},function(g){var v=g.which||g.keyCode;v<37||v>40||(g.preventDefault(),o({left:v===39?.05:v===37?-.05:0,top:v===40?.05:v===38?-.05:0}))},m]},[o,s]),u=c[0],f=c[1],h=c[2];return E.useEffect(function(){return h},[h]),Ue.createElement("div",$p({},r,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),xg=function(t){return t.filter(Boolean).join(" ")},Q4=function(t){var e=t.color,n=t.left,r=t.top,i=r===void 0?.5:r,s=xg(["react-colorful__pointer",t.className]);return Ue.createElement("div",{className:s,style:{top:100*i+"%",left:100*n+"%"}},Ue.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},ho=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n},LB=function(t){var e=t.s,n=t.v,r=t.a,i=(200-e)*n/100;return{h:ho(t.h),s:ho(i>0&&i<200?e*n/100/(i<=100?i:200-i)*100:0),l:ho(i/2),a:ho(r,2)}},ww=function(t){var e=LB(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},aA=function(t){var e=LB(t);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},NB=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),c=s%6;return{r:ho(255*[r,a,o,o,l,r][c]),g:ho(255*[l,r,r,a,o,o][c]),b:ho(255*[o,o,l,r,r,a][c]),a:ho(i,2)}},OB=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:ho(60*(a<0?a+6:a)),s:ho(s?o/s*100:0),v:ho(s/255*100),a:i}},DB=Ue.memo(function(t){var e=t.hue,n=t.onChange,r=xg(["react-colorful__hue",t.className]);return Ue.createElement("div",{className:r},Ue.createElement(J4,{onMove:function(i){n({h:360*i.left})},onKey:function(i){n({h:Mp(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":ho(e),"aria-valuemax":"360","aria-valuemin":"0"},Ue.createElement(Q4,{className:"react-colorful__hue-pointer",left:e/360,color:ww({h:e,s:100,v:100,a:1})})))}),BB=Ue.memo(function(t){var e=t.hsva,n=t.onChange,r={backgroundColor:ww({h:e.h,s:100,v:100,a:1})};return Ue.createElement("div",{className:"react-colorful__saturation",style:r},Ue.createElement(J4,{onMove:function(i){n({s:100*i.left,v:100-100*i.top})},onKey:function(i){n({s:Mp(e.s+100*i.left,0,100),v:Mp(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ho(e.s)+"%, Brightness "+ho(e.v)+"%"},Ue.createElement(Q4,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:ww(e)})))}),Z4=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0};function kB(t,e,n){var r=Aw(n),i=E.useState(function(){return t.toHsva(e)}),s=i[0],o=i[1],a=E.useRef({color:e,hsva:s});E.useEffect(function(){if(!t.equal(e,a.current.color)){var c=t.toHsva(e);a.current={hsva:c,color:e},o(c)}},[e,t]),E.useEffect(function(){var c;Z4(s,a.current.hsva)||t.equal(c=t.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},r(c))},[s,t,r]);var l=E.useCallback(function(c){o(function(u){return Object.assign({},u,c)})},[]);return[s,l]}var FQ=typeof window<"u"?E.useLayoutEffect:E.useEffect,UQ=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},a8=new Map,FB=function(t){FQ(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!a8.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,a8.set(e,n);var r=UQ();r&&n.setAttribute("nonce",r),e.head.appendChild(n)}},[])},zQ=function(t){var e=t.className,n=t.colorModel,r=t.color,i=r===void 0?n.defaultColor:r,s=t.onChange,o=K4(t,["className","colorModel","color","onChange"]),a=E.useRef(null);FB(a);var l=kB(n,i,s),c=l[0],u=l[1],f=xg(["react-colorful",e]);return Ue.createElement("div",$p({},o,{ref:a,className:f}),Ue.createElement(BB,{hsva:c,onChange:u}),Ue.createElement(DB,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},HQ=function(t){var e=t.className,n=t.hsva,r=t.onChange,i={backgroundImage:"linear-gradient(90deg, "+aA(Object.assign({},n,{a:0}))+", "+aA(Object.assign({},n,{a:1}))+")"},s=xg(["react-colorful__alpha",e]),o=ho(100*n.a);return Ue.createElement("div",{className:s},Ue.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),Ue.createElement(J4,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:Mp(n.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},Ue.createElement(Q4,{className:"react-colorful__alpha-pointer",left:n.a,color:aA(n)})))},GQ=function(t){var e=t.className,n=t.colorModel,r=t.color,i=r===void 0?n.defaultColor:r,s=t.onChange,o=K4(t,["className","colorModel","color","onChange"]),a=E.useRef(null);FB(a);var l=kB(n,i,s),c=l[0],u=l[1],f=xg(["react-colorful",e]);return Ue.createElement("div",$p({},o,{ref:a,className:f}),Ue.createElement(BB,{hsva:c,onChange:u}),Ue.createElement(DB,{hue:c.h,onChange:u}),Ue.createElement(HQ,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},VQ={defaultColor:{r:0,g:0,b:0,a:1},toHsva:OB,fromHsva:NB,equal:Z4},WQ=function(t){return Ue.createElement(GQ,$p({},t,{colorModel:VQ}))},jQ={defaultColor:{r:0,g:0,b:0},toHsva:function(t){return OB({r:t.r,g:t.g,b:t.b,a:1})},fromHsva:function(t){return{r:(e=NB(t)).r,g:e.g,b:e.b};var e},equal:Z4},$Q=function(t){return Ue.createElement(zQ,$p({},t,{colorModel:jQ}))},UB={exports:{}},lA,l8;function XQ(){if(l8)return lA;l8=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return lA=t,lA}var cA,c8;function YQ(){if(c8)return cA;c8=1;var t=XQ();function e(){}function n(){}return n.resetWarningCache=e,cA=function(){function r(o,a,l,c,u,f){if(f!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},cA}UB.exports=YQ()();var qQ=UB.exports;const hr=go(qQ);function Xp(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Yp(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function KQ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function JQ(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(KQ(arguments[e]));return t}var QQ=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Eg(t,e){var n=ZQ(t);if(typeof n.path!="string"){var r=t.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}function ZQ(t){var e=t.name,n=e&&e.lastIndexOf(".")!==-1;if(n&&!t.type){var r=e.split(".").pop().toLowerCase(),i=QQ.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}var eZ=[".DS_Store","Thumbs.db"];function tZ(t){return Xp(this,void 0,void 0,function(){return Yp(this,function(e){return A3(t)&&nZ(t)?[2,oZ(t.dataTransfer,t.type)]:rZ(t)?[2,iZ(t)]:Array.isArray(t)&&t.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,sZ(t)]:[2,[]]})})}function nZ(t){return A3(t.dataTransfer)}function rZ(t){return A3(t)&&A3(t.target)}function A3(t){return typeof t=="object"&&t!==null}function iZ(t){return Sw(t.target.files).map(function(e){return Eg(e)})}function sZ(t){return Xp(this,void 0,void 0,function(){var e;return Yp(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(r){return r.getFile()}))];case 1:return e=n.sent(),[2,e.map(function(r){return Eg(r)})]}})})}function oZ(t,e){return Xp(this,void 0,void 0,function(){var n,r;return Yp(this,function(i){switch(i.label){case 0:return t===null?[2,[]]:t.items?(n=Sw(t.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,n]:[4,Promise.all(n.map(aZ))]):[3,2];case 1:return r=i.sent(),[2,u8(zB(r))];case 2:return[2,u8(Sw(t.files).map(function(s){return Eg(s)}))]}})})}function u8(t){return t.filter(function(e){return eZ.indexOf(e.name)===-1})}function Sw(t){if(t===null)return[];for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function aZ(t){if(typeof t.webkitGetAsEntry!="function")return f8(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?HB(e):f8(t)}function zB(t){return t.reduce(function(e,n){return JQ(e,Array.isArray(n)?zB(n):[n])},[])}function f8(t){var e=t.getAsFile();if(!e)return Promise.reject(t+" is not a File");var n=Eg(e);return Promise.resolve(n)}function lZ(t){return Xp(this,void 0,void 0,function(){return Yp(this,function(e){return[2,t.isDirectory?HB(t):cZ(t)]})})}function HB(t){var e=t.createReader();return new Promise(function(n,r){var i=[];function s(){var o=this;e.readEntries(function(a){return Xp(o,void 0,void 0,function(){var l,c,u;return Yp(this,function(f){switch(f.label){case 0:if(a.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=f.sent(),n(l),[3,4];case 3:return c=f.sent(),r(c),[3,4];case 4:return[3,6];case 5:u=Promise.all(a.map(lZ)),i.push(u),s(),f.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function cZ(t){return Xp(this,void 0,void 0,function(){return Yp(this,function(e){return[2,new Promise(function(n,r){t.file(function(i){var s=Eg(i,t.fullPath);n(s)},function(i){r(i)})})]})})}var uZ=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function h8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function d8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h8(Object(n),!0).forEach(function(r){GB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GB(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p8(t,e){return pZ(t)||dZ(t,e)||hZ(t,e)||fZ()}function fZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hZ(t,e){if(t){if(typeof t=="string")return m8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m8(t,e)}}function m8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dZ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function pZ(t){if(Array.isArray(t))return t}var mZ="file-invalid-type",gZ="file-too-large",vZ="file-too-small",yZ="too-many-files",xZ=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:mZ,message:"File type must be ".concat(n)}},g8=function(e){return{code:gZ,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},v8=function(e){return{code:vZ,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},EZ={code:yZ,message:"Too many files"};function VB(t,e){var n=t.type==="application/x-moz-file"||uZ(t,e);return[n,n?null:xZ(e)]}function WB(t,e,n){if(Xm(t.size))if(Xm(e)&&Xm(n)){if(t.size>n)return[!1,g8(n)];if(t.size<e)return[!1,v8(e)]}else{if(Xm(e)&&t.size<e)return[!1,v8(e)];if(Xm(n)&&t.size>n)return[!1,g8(n)]}return[!0,null]}function Xm(t){return t!=null}function _Z(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=VB(a,n),c=p8(l,1),u=c[0],f=WB(a,r,i),h=p8(f,1),d=h[0];return u&&d})}function T3(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Vv(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function y8(t){t.preventDefault()}function bZ(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function AZ(t){return t.indexOf("Edge/")!==-1}function TZ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return bZ(t)||AZ(t)}function Ml(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!T3(r)&&a&&a.apply(void 0,[r].concat(s)),T3(r)})}}function wZ(){return"showOpenFilePicker"in window}function SZ(t){return t=typeof t=="string"?t.split(","):t,[{description:"everything",accept:Array.isArray(t)?t.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,n){return d8(d8({},e),{},GB({},n,[]))},{}):{}}]}function CZ(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function MZ(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}var RZ=["children"],IZ=["open"],PZ=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],LZ=["refKey","onChange","onClick"];function NZ(t){return BZ(t)||DZ(t)||jB(t)||OZ()}function OZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function BZ(t){if(Array.isArray(t))return Cw(t)}function uA(t,e){return UZ(t)||FZ(t,e)||jB(t,e)||kZ()}function kZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jB(t,e){if(t){if(typeof t=="string")return Cw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cw(t,e)}}function Cw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FZ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function UZ(t){if(Array.isArray(t))return t}function x8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x8(Object(n),!0).forEach(function(r){Mw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w3(t,e){if(t==null)return{};var n=zZ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zZ(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var e5=E.forwardRef(function(t,e){var n=t.children,r=w3(t,RZ),i=XB(r),s=i.open,o=w3(i,IZ);return E.useImperativeHandle(e,function(){return{open:s}},[s]),Ue.createElement(E.Fragment,null,n(hi(hi({},o),{},{open:s})))});e5.displayName="Dropzone";var $B={disabled:!1,getFilesFromEvent:tZ,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};e5.defaultProps=$B;e5.propTypes={children:hr.func,accept:hr.oneOfType([hr.string,hr.arrayOf(hr.string)]),multiple:hr.bool,preventDropOnDocument:hr.bool,noClick:hr.bool,noKeyboard:hr.bool,noDrag:hr.bool,noDragEventsBubbling:hr.bool,minSize:hr.number,maxSize:hr.number,maxFiles:hr.number,disabled:hr.bool,getFilesFromEvent:hr.func,onFileDialogCancel:hr.func,onFileDialogOpen:hr.func,useFsAccessApi:hr.bool,onDragEnter:hr.func,onDragLeave:hr.func,onDragOver:hr.func,onDrop:hr.func,onDropAccepted:hr.func,onDropRejected:hr.func,validator:hr.func};var Rw={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function XB(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=hi(hi({},$B),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,f=e.onDragOver,h=e.onDrop,d=e.onDropAccepted,p=e.onDropRejected,m=e.onFileDialogCancel,g=e.onFileDialogOpen,v=e.useFsAccessApi,x=e.preventDropOnDocument,y=e.noClick,A=e.noKeyboard,T=e.noDrag,w=e.noDragEventsBubbling,M=e.validator,C=E.useMemo(function(){return typeof g=="function"?g:E8},[g]),S=E.useMemo(function(){return typeof m=="function"?m:E8},[m]),R=E.useRef(null),O=E.useRef(null),L=E.useReducer(HZ,Rw),B=uA(L,2),N=B[0],$=B[1],U=N.isFocused,Q=N.isFileDialogActive,Y=N.draggedFiles,ee=E.useRef(typeof window<"u"&&window.isSecureContext&&v&&wZ()),ne=function(){!ee.current&&Q&&setTimeout(function(){if(O.current){var ie=O.current.files;ie.length||($({type:"closeDialog"}),S())}},300)};E.useEffect(function(){return window.addEventListener("focus",ne,!1),function(){window.removeEventListener("focus",ne,!1)}},[O,Q,S,ee]);var P=E.useRef([]),se=function(ie){R.current&&R.current.contains(ie.target)||(ie.preventDefault(),P.current=[])};E.useEffect(function(){return x&&(document.addEventListener("dragover",y8,!1),document.addEventListener("drop",se,!1)),function(){x&&(document.removeEventListener("dragover",y8),document.removeEventListener("drop",se))}},[R,x]);var re=E.useCallback(function(fe){fe.preventDefault(),fe.persist(),Re(fe),P.current=[].concat(NZ(P.current),[fe.target]),Vv(fe)&&Promise.resolve(i(fe)).then(function(ie){T3(fe)&&!w||($({draggedFiles:ie,isDragActive:!0,type:"setDraggedFiles"}),c&&c(fe))})},[i,c,w]),Z=E.useCallback(function(fe){fe.preventDefault(),fe.persist(),Re(fe);var ie=Vv(fe);if(ie&&fe.dataTransfer)try{fe.dataTransfer.dropEffect="copy"}catch{}return ie&&f&&f(fe),!1},[f,w]),X=E.useCallback(function(fe){fe.preventDefault(),fe.persist(),Re(fe);var ie=P.current.filter(function(Je){return R.current&&R.current.contains(Je)}),Ae=ie.indexOf(fe.target);Ae!==-1&&ie.splice(Ae,1),P.current=ie,!(ie.length>0)&&($({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Vv(fe)&&u&&u(fe))},[R,u,w]),W=E.useCallback(function(fe,ie){var Ae=[],Je=[];fe.forEach(function(te){var z=VB(te,n),F=uA(z,2),ae=F[0],ye=F[1],Le=WB(te,o,s),ke=uA(Le,2),Ve=ke[0],Ce=ke[1],Ye=M?M(te):null;if(ae&&Ve&&!Ye)Ae.push(te);else{var tt=[ye,Ce];Ye&&(tt=tt.concat(Ye)),Je.push({file:te,errors:tt.filter(function(it){return it})})}}),(!a&&Ae.length>1||a&&l>=1&&Ae.length>l)&&(Ae.forEach(function(te){Je.push({file:te,errors:[EZ]})}),Ae.splice(0)),$({acceptedFiles:Ae,fileRejections:Je,type:"setFiles"}),h&&h(Ae,Je,ie),Je.length>0&&p&&p(Je,ie),Ae.length>0&&d&&d(Ae,ie)},[$,a,n,o,s,l,h,d,p,M]),K=E.useCallback(function(fe){fe.preventDefault(),fe.persist(),Re(fe),P.current=[],Vv(fe)&&Promise.resolve(i(fe)).then(function(ie){T3(fe)&&!w||W(ie,fe)}),$({type:"reset"})},[i,W,w]),ge=E.useCallback(function(){if(ee.current){$({type:"openDialog"}),C();var fe={multiple:a,types:SZ(n)};window.showOpenFilePicker(fe).then(function(ie){return i(ie)}).then(function(ie){W(ie,null),$({type:"closeDialog"})}).catch(function(ie){CZ(ie)?(S(ie),$({type:"closeDialog"})):MZ(ie)&&(ee.current=!1,O.current&&(O.current.value=null,O.current.click()))});return}O.current&&($({type:"openDialog"}),C(),O.current.value=null,O.current.click())},[$,C,S,v,W,n,a]),Se=E.useCallback(function(fe){!R.current||!R.current.isEqualNode(fe.target)||(fe.key===" "||fe.key==="Enter"||fe.keyCode===32||fe.keyCode===13)&&(fe.preventDefault(),ge())},[R,ge]),xe=E.useCallback(function(){$({type:"focus"})},[]),Me=E.useCallback(function(){$({type:"blur"})},[]),he=E.useCallback(function(){y||(TZ()?setTimeout(ge,0):ge())},[y,ge]),Oe=function(ie){return r?null:ie},be=function(ie){return A?null:Oe(ie)},Te=function(ie){return T?null:Oe(ie)},Re=function(ie){w&&ie.stopPropagation()},$e=E.useMemo(function(){return function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=fe.refKey,Ae=ie===void 0?"ref":ie,Je=fe.role,te=fe.onKeyDown,z=fe.onFocus,F=fe.onBlur,ae=fe.onClick,ye=fe.onDragEnter,Le=fe.onDragOver,ke=fe.onDragLeave,Ve=fe.onDrop,Ce=w3(fe,PZ);return hi(hi(Mw({onKeyDown:be(Ml(te,Se)),onFocus:be(Ml(z,xe)),onBlur:be(Ml(F,Me)),onClick:Oe(Ml(ae,he)),onDragEnter:Te(Ml(ye,re)),onDragOver:Te(Ml(Le,Z)),onDragLeave:Te(Ml(ke,X)),onDrop:Te(Ml(Ve,K)),role:typeof Je=="string"&&Je!==""?Je:"button"},Ae,R),!r&&!A?{tabIndex:0}:{}),Ce)}},[R,Se,xe,Me,he,re,Z,X,K,A,T,r]),ve=E.useCallback(function(fe){fe.stopPropagation()},[]),me=E.useMemo(function(){return function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=fe.refKey,Ae=ie===void 0?"ref":ie,Je=fe.onChange,te=fe.onClick,z=w3(fe,LZ),F=Mw({accept:n,multiple:a,type:"file",style:{display:"none"},onChange:Oe(Ml(Je,K)),onClick:Oe(Ml(te,ve)),tabIndex:-1},Ae,O);return hi(hi({},F),z)}},[O,n,a,K,r]),We=Y.length,Xe=We>0&&_Z({files:Y,accept:n,minSize:o,maxSize:s,multiple:a,maxFiles:l}),xt=We>0&&!Xe;return hi(hi({},N),{},{isDragAccept:Xe,isDragReject:xt,isFocused:U&&!r,getRootProps:$e,getInputProps:me,rootRef:R,inputRef:O,open:Oe(ge)})}function HZ(t,e){switch(e.type){case"focus":return hi(hi({},t),{},{isFocused:!0});case"blur":return hi(hi({},t),{},{isFocused:!1});case"openDialog":return hi(hi({},Rw),{},{isFileDialogActive:!0});case"closeDialog":return hi(hi({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=e.isDragActive,r=e.draggedFiles;return hi(hi({},t),{},{draggedFiles:r,isDragActive:n});case"setFiles":return hi(hi({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return hi({},Rw);default:return t}}function E8(){}function GZ(t){let e;const n=new Set,r=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const h=e;e=u?f:Object.assign({},e,f),n.forEach(d=>d(e,h))}},i=()=>e,s=(c,u=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function d(){const p=u(e);if(!f(h,p)){const m=h;c(h=p,m)}}return n.add(d),()=>n.delete(d)},l={setState:r,getState:i,subscribe:(c,u,f)=>u||f?s(c,u,f):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const VZ=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),_8=VZ?E.useEffect:E.useLayoutEffect;function WZ(t){const e=typeof t=="function"?GZ(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=E.useReducer(g=>g+1,0),o=e.getState(),a=E.useRef(o),l=E.useRef(r),c=E.useRef(i),u=E.useRef(!1),f=E.useRef();f.current===void 0&&(f.current=r(o));let h,d=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(h=r(o),d=!i(f.current,h)),_8(()=>{d&&(f.current=h),a.current=o,l.current=r,c.current=i,u.current=!1});const p=E.useRef(o);_8(()=>{const g=()=>{try{const x=e.getState(),y=l.current(x);c.current(f.current,y)||(a.current=x,f.current=y,s())}catch{u.current=!0,s()}},v=e.subscribe(g);return e.getState()!==p.current&&g(),v},[]);const m=d?h:f.current;return E.useDebugValue(m),m};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}const jZ=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let f=o(r.getState());c=h=>{const d=o(h);if(!u(f,d)){const p=f;a(f=d,p)}},l!=null&&l.fireImmediately&&a(f,f)}return i(c)},t(e,n,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var $Z=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var XZ=$Z;function b8(t){return XZ(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}var YB=function(e){var n,r;return!(b8(e)===!1||(n=e.constructor,typeof n!="function")||(r=n.prototype,b8(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var YZ=YB,t5=function(e){return YZ(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var qZ=function(e,n,r){for(var i in e)if(n.call(r,e[i],i,e)===!1)break},KZ=t5,JZ=qZ;function qB(t,e){for(var n=arguments.length,r=0;++r<n;){var i=arguments[r];Iw(i)&&JZ(i,QZ,t)}return t}function QZ(t,e){if(ZZ(e)){var n=this[e];Iw(t)&&Iw(n)?qB(n,t):this[e]=t}}function Iw(t){return KZ(t)&&!Array.isArray(t)}function ZZ(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}var eee=qB;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var tee=function(t,e,n,r,i){if(!nee(t)||!e)return t;if(e=Wv(e),n&&(e+="."+Wv(n)),r&&(e+="."+Wv(r)),i&&(e+="."+Wv(i)),e in t)return t[e];for(var s=e.split("."),o=s.length,a=-1;t&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];t=t[l]}return t};function nee(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function Wv(t){return t?Array.isArray(t)?t.join("."):t:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var ree=function(t,e){if(t===null||typeof t>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return t;for(var n=Object.prototype.propertyIsEnumerable,r=Object(t),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var c=a[l];n.call(o,c)&&(r[c]=o[c])}return r},iee=t5,see=ree,oee=Object.assign||function(t){if(t===null||typeof t>"u")throw new TypeError("Cannot convert undefined or null to object");A8(t)||(t={});for(var e=1;e<arguments.length;e++){var n=arguments[e];lee(n)&&(n=cee(n)),A8(n)&&(aee(t,n),see(t,n))}return t};function aee(t,e){for(var n in e)uee(e,n)&&(t[n]=e[n])}function lee(t){return t&&typeof t=="string"}function cee(t){var e={};for(var n in t)e[n]=t[n];return e}function A8(t){return t&&typeof t=="object"||iee(t)}function uee(t,e){return Object.prototype.hasOwnProperty.call(t,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var fee=oee,hee=function(t,e,n){if(typeof t!="string")throw new TypeError("expected a string");typeof e=="function"&&(n=e,e=null),typeof e=="string"&&(e={sep:e});var r=fee({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],l=[""],c=r.sep,u=t.length,f=-1,h;function d(){if(s&&a.length)return s[a[a.length-1]]}for(;++f<u;){var p=t[f],m=t[f+1],g={val:p,idx:f,arr:l,str:t};if(o.push(g),p==="\\"){g.val=pee(r,t,f)===!0?p+m:m,g.escaped=!0,typeof n=="function"&&n(g),l[l.length-1]+=g.val,f++;continue}if(s&&s[p]){a.push(p);var v=d(),x=f+1;if(t.indexOf(v,x+1)!==-1)for(;a.length&&x<u;){var y=t[++x];if(y==="\\"){y++;continue}if(i.indexOf(y)!==-1){x=Pw(t,y,x+1);continue}if(v=d(),a.length&&t.indexOf(v,x+1)===-1)break;if(s[y]){a.push(y);continue}v===y&&a.pop()}if(h=x,h===-1){l[l.length-1]+=p;continue}p=t.slice(f,h+1),g.val=p,g.idx=f=h}if(i.indexOf(p)!==-1){if(h=Pw(t,p,f+1),h===-1){l[l.length-1]+=p;continue}dee(p,r)===!0?p=t.slice(f,h+1):p=t.slice(f+1,h),g.val=p,g.idx=f=h}if(typeof n=="function"&&(n(g,o),p=g.val,f=g.idx),g.val===c&&g.split!==!1){l.push("");continue}l[l.length-1]+=g.val}return l};function Pw(t,e,n,r){var i=t.indexOf(e,n);return t.charAt(i-1)==="\\"?Pw(t,e,i+1):i}function dee(t,e){return e.keepDoubleQuotes===!0&&t==='"'||e.keepSingleQuotes===!0&&t==="'"?!0:e.keepQuotes}function pee(t,e,n){return typeof t.keepEscaping=="function"?t.keepEscaping(e,n):t.keepEscaping===!0||e[n+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var mee=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},T8=mee,gee=function(e){T8(e)||(e={});for(var n=arguments.length,r=1;r<n;r++){var i=arguments[r];T8(i)&&vee(e,i)}return e};function vee(t,e){for(var n in e)yee(e,n)&&(t[n]=e[n])}function yee(t,e){return Object.prototype.hasOwnProperty.call(t,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var xee=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var Eee=hee,_ee=gee,w8=YB,S8=xee,bee=function(t,e,n){if(!S8(t)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return t;for(var r=Eee(e,{sep:".",brackets:!0}).filter(Aee),i=r.length,s=-1,o=t;++s<i;){var a=r[s];if(s!==i-1){S8(o[a])||(o[a]={}),o=o[a];continue}w8(o[a])&&w8(n)?o[a]=_ee({},o[a],n):o[a]=n}return t};function Aee(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}var fA=t5,C8=eee,Tee=tee,M8=bee,wee=function(e,n,r){if(!fA(e))throw new TypeError("expected an object");if(typeof n!="string"||r==null)return C8.apply(null,arguments);if(typeof r=="string")return M8(e,n,r),e;var i=Tee(e,n);return fA(r)&&fA(i)&&(r=C8({},i,r)),M8(e,n,r),e};const See=go(wee),n5=(...t)=>t.filter(Boolean).join(".");function Cee(t){const e=t.split(".");return[e.pop(),e.join(".")||void 0]}function Mee(t,e){return Object.entries(ZK(t,e)).reduce((n,[,{value:r,disabled:i,key:s}])=>(n[s]=i?void 0:r,n),{})}function Ree(t,e){const n=E.useRef();return(e?O1:dg)(t,n.current)||(n.current=t),n.current}function KB(t,e){return E.useMemo(t,Ree(e,!0))}function Iee(t){const e=E.useRef(null),n=E.useRef(null),r=E.useRef(!0);return E.useLayoutEffect(()=>{t||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),E.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{t&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),n.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=n.current.getBoundingClientRect();return s.style.height=a+"px",t||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[t]),{wrapperRef:e,contentRef:n}}const Pee=t=>{const[e,n]=E.useState(t.getVisiblePaths());return E.useEffect(()=>{n(t.getVisiblePaths());const r=t.useStore.subscribe(t.getVisiblePaths,n,{equalityFn:dg});return()=>r()},[t]),e};function Lee(t,e,n){return t.useStore(i=>{const s=Sn(Sn({},n),i.data);return Mee(s,e)},dg)}function JB(t=3){const e=E.useRef(null),n=E.useRef(null),[r,i]=E.useState(!1),s=E.useCallback(()=>i(!0),[]),o=E.useCallback(()=>i(!1),[]);return E.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:c}=e.current.getBoundingClientRect(),{height:u}=n.current.getBoundingClientRect(),f=a+u>window.innerHeight-40?"up":"down";n.current.style.position="fixed",n.current.style.zIndex="10000",n.current.style.left=c+"px",f==="down"?n.current.style.top=a+t+"px":n.current.style.bottom=window.innerHeight-l+t+"px"}},[t,r]),{popinRef:e,wrapperRef:n,shown:r,show:s,hide:o}}BQ([kQ]);const Nee={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};No.extend({color:()=>t=>lo(t).isValid()});const Oee=t=>No().color().test(t);function QB(t,{format:e,hasAlpha:n,isString:r}){const i=Nee[e]+(r&&e!=="hex"?"String":""),s=t[i]();return typeof s=="object"&&!n?eJ(s,["a"]):s}const ZB=(t,e)=>{const n=lo(t);if(!n.isValid())throw Error("Invalid color");return QB(n,e)},Dee=(t,e)=>QB(lo(t),Sn(Sn({},e),{},{isString:!0,format:"hex"})),Bee=({value:t})=>{const e=DQ(t),n=e==="name"?"hex":e,r=typeof t=="object"?"a"in t:e==="hex"&&t.length===8||/^(rgba)|(hsla)|(hsva)/.test(t),i={format:n,hasAlpha:r,isString:typeof t=="string"};return{value:ZB(t,i),settings:i}};var kee=Object.freeze({__proto__:null,schema:Oee,sanitize:ZB,format:Dee,normalize:Bee});const Fee=An("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Uee=An("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),zee=An("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function R8(t,e){return e!=="rgb"?lo(t).toRgb():t}function Hee({value:t,displayValue:e,settings:n,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=Xs(),{format:o,hasAlpha:a}=n,{popinRef:l,wrapperRef:c,shown:u,show:f,hide:h}=JB(),d=E.useRef(0),[p,m]=E.useState(()=>R8(t,o)),g=a?WQ:$Q,v=()=>{m(R8(t,o)),f(),i()},x=()=>{h(),s(),window.clearTimeout(d.current)},y=()=>{d.current=window.setTimeout(x,500)};return E.useEffect(()=>()=>window.clearTimeout(d.current),[]),Ue.createElement(Ue.Fragment,null,Ue.createElement(Fee,{ref:l,active:u,onClick:()=>v(),style:{color:e}}),u&&Ue.createElement(X4,null,Ue.createElement(xB,{onPointerUp:x}),Ue.createElement(zee,{ref:c,onMouseEnter:()=>window.clearTimeout(d.current),onMouseLeave:A=>A.buttons===0&&y()},Ue.createElement(g,{color:p,onChange:r}))))}function Gee(){const{value:t,displayValue:e,label:n,onChange:r,onUpdate:i,settings:s}=Xs();return Ue.createElement(Ha,{input:!0},Ue.createElement(vl,null,n),Ue.createElement(Uee,null,Ue.createElement(Hee,{value:t,displayValue:e,onChange:r,onUpdate:i,settings:s}),Ue.createElement($4,{value:e,onChange:r,onUpdate:i})))}var Vee=Sn({component:Gee},kee);function Wee(){const{label:t,displayValue:e,onUpdate:n,settings:r}=Xs();return Ue.createElement(Ha,{input:!0},Ue.createElement(vl,null,t),Ue.createElement(q4,{value:e,settings:r,onUpdate:n}))}var jee=Sn({component:Wee},CB(["x","y","z"]));const $ee=An("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),Xee=An("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Yee({value:t,settings:e,onUpdate:n}){const r=E.useRef(),i=E.useRef(0),s=E.useRef(0),o=E.useRef(1),[a,l]=E.useState(!1),[c,u]=E.useState(!1),[f,h]=_B(),d=E.useRef(null),p=E.useRef(null);E.useLayoutEffect(()=>{if(a){const{top:L,left:B,width:N,height:$}=d.current.getBoundingClientRect();p.current.style.left=B+N/2+"px",p.current.style.top=L+$/2+"px"}},[a]);const{keys:[m,g],joystick:v}=e,x=v==="invertY"?1:-1,{[m]:{step:y},[g]:{step:A}}=e,T=Rc("sizes","joystickWidth"),w=Rc("sizes","joystickHeight"),M=parseFloat(T)*.8/2,C=parseFloat(w)*.8/2,S=E.useCallback(()=>{r.current||(u(!0),i.current&&h({x:i.current*M}),s.current&&h({y:s.current*-C}),r.current=window.setInterval(()=>{n(L=>{const B=y*i.current*o.current,N=x*A*s.current*o.current;return Array.isArray(L)?{[m]:L[0]+B,[g]:L[1]+N}:{[m]:L[m]+B,[g]:L[g]+N}})},16))},[M,C,n,h,y,A,m,g,x]),R=E.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,u(!1)},[]);E.useEffect(()=>{function L(B){o.current=sB(B)}return window.addEventListener("keydown",L),window.addEventListener("keyup",L),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",L),window.removeEventListener("keyup",L)}},[]);const O=yg(({first:L,active:B,delta:[N,$],movement:[U,Q]})=>{L&&l(!0);const Y=Fu(U,-M,M),ee=Fu(Q,-C,C);i.current=Math.abs(U)>Math.abs(Y)?Math.sign(U-Y):0,s.current=Math.abs(Q)>Math.abs(ee)?Math.sign(ee-Q):0;let ne=t[m],P=t[g];B?(i.current||(ne+=N*y*o.current,h({x:Y})),s.current||(P-=x*$*A*o.current,h({y:ee})),i.current||s.current?S():R(),n({[m]:ne,[g]:P})):(l(!1),i.current=0,s.current=0,h({x:0,y:0}),R())});return Ue.createElement($ee,Ci({ref:d},O()),a&&Ue.createElement(X4,null,Ue.createElement(Xee,{ref:p,isOutOfBounds:c},Ue.createElement("div",null),Ue.createElement("span",{ref:f}))))}const qee=An("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Kee(){const{label:t,displayValue:e,onUpdate:n,settings:r}=Xs();return Ue.createElement(Ha,{input:!0},Ue.createElement(vl,null,t),Ue.createElement(qee,{withJoystick:!!r.joystick},r.joystick&&Ue.createElement(Yee,{value:e,settings:r,onUpdate:n}),Ue.createElement(q4,{value:e,settings:r,onUpdate:n})))}const Jee=["joystick"],ek=CB(["x","y"]),Qee=t=>{let{joystick:e=!0}=t,n=Dr(t,Jee);const{value:r,settings:i}=ek.normalize(n);return{value:r,settings:Sn(Sn({},i),{},{joystick:e})}};var Zee=Sn(Sn({component:Kee},ek),{},{normalize:Qee});const ete=t=>{if(t!==void 0){if(t instanceof File)try{return URL.createObjectURL(t)}catch{return}if(typeof t=="string"&&t.indexOf("blob:")===0)return t;throw Error("Invalid image format [undefined | blob | File].")}},tte=(t,e)=>typeof e=="object"&&"image"in e,nte=({image:t})=>({value:t});var rte=Object.freeze({__proto__:null,sanitize:ete,schema:tte,normalize:nte});const ite=An("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),ste=An("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),ote=An("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),ate=An("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),lte=An("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),cte=An("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function ute(){const{label:t,value:e,onUpdate:n,disabled:r}=Xs(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=JB(),c=E.useCallback(p=>{p.length&&n(p[0])},[n]),u=E.useCallback(p=>{p.stopPropagation(),n(void 0)},[n]),{getRootProps:f,getInputProps:h,isDragAccept:d}=XB({maxFiles:1,accept:"image/*",onDrop:c,disabled:r});return Ue.createElement(Ha,{input:!0},Ue.createElement(vl,null,t),Ue.createElement(ite,null,Ue.createElement(ote,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&Ue.createElement(X4,null,Ue.createElement(xB,{onPointerUp:l,style:{cursor:"pointer"}}),Ue.createElement(ate,{ref:s,style:{backgroundImage:`url(${e})`}})),Ue.createElement(ste,f({isDragAccept:d}),Ue.createElement("input",h()),Ue.createElement(lte,null,d?"drop image":"click or drop")),Ue.createElement(cte,{onClick:u,disabled:!e})))}var fte=Sn({component:ute},rte);const I8=No().number(),hte=(t,e)=>No().array().length(2).every.number().test(t)&&No().schema({min:I8,max:I8}).test(e),S3=t=>({min:t[0],max:t[1]}),tk=(t,{bounds:[e,n]},r)=>{const i=Array.isArray(t)?S3(t):t,s={min:r[0],max:r[1]},{min:o,max:a}=Sn(Sn({},s),i);return[Fu(Number(o),e,Math.max(e,a)),Fu(Number(a),Math.min(n,o),n)]},dte=({value:t,min:e,max:n})=>{const r={min:e,max:n},i=SB(S3(t),{min:r,max:r}),s=[e,n],o=Sn(Sn({},i),{},{bounds:s});return{value:tk(S3(t),o,t),settings:o}};var pte=Object.freeze({__proto__:null,schema:hte,format:S3,sanitize:tk,normalize:dte});const mte=["value","bounds","onDrag"],gte=["bounds"],vte=An("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function yte(t){let{value:e,bounds:[n,r],onDrag:i}=t,s=Dr(t,mte);const o=E.useRef(null),a=E.useRef(null),l=E.useRef(null),c=E.useRef(0),u=Rc("sizes","scrubberWidth"),f=yg(({event:p,first:m,xy:[g],movement:[v],memo:x={}})=>{if(m){const{width:A,left:T}=o.current.getBoundingClientRect();c.current=A-parseFloat(u);const w=(p==null?void 0:p.target)===a.current||(p==null?void 0:p.target)===l.current;x.pos=_3((g-T)/A,n,r);const M=Math.abs(x.pos-e.min)-Math.abs(x.pos-e.max);x.key=M<0||M===0&&x.pos<=e.min?"min":"max",w&&(x.pos=e[x.key])}const y=x.pos+_3(v/c.current,0,r-n);return i({[x.key]:GJ(y,s[x.key])}),x}),h=`calc(${E3(e.min,n,r)} * (100% - ${u} - 8px) + 4px)`,d=`calc(${1-E3(e.max,n,r)} * (100% - ${u} - 8px) + 4px)`;return Ue.createElement(AB,Ci({ref:o},f()),Ue.createElement(bB,null,Ue.createElement(TB,{style:{left:h,right:d}})),Ue.createElement(xw,{position:"left",ref:a,style:{left:h}}),Ue.createElement(xw,{position:"right",ref:l,style:{right:d}}))}function xte(){const{label:t,displayValue:e,onUpdate:n,settings:r}=Xs(),i=Dr(r,gte);return Ue.createElement(Ue.Fragment,null,Ue.createElement(Ha,{input:!0},Ue.createElement(vl,null,t),Ue.createElement(vte,null,Ue.createElement(yte,Ci({value:e},r,{onDrag:n})),Ue.createElement(q4,{value:e,settings:i,onUpdate:n,innerLabelTrim:0}))))}var Ete=Sn({component:xte},pte);const _te=()=>{const t=new Map;return{on:(e,n)=>{let r=t.get(e);r===void 0&&(r=new Set,t.set(e,r)),r.add(n)},off:(e,n)=>{const r=t.get(e);r!==void 0&&(r.delete(n),r.size===0&&t.delete(e))},emit:(e,...n)=>{const r=t.get(e);if(r!==void 0)for(const i of r)i(...n)}}},bte=["type","value"],Ate=["onChange","transient","onEditStart","onEditEnd"],Tte=function(){const e=WZ(jZ(()=>({data:{}}))),n=_te();this.storeId=QK(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([u,f])=>{f.render&&a.some(h=>h.indexOf(u)===0)&&!f.render(this.get)&&l.push(u+".")});const c=[];return i.forEach(u=>{u in o&&o[u].__refCount>0&&l.every(f=>u.indexOf(f)===-1)&&(!o[u].render||o[u].render(this.get))&&c.push(u)}),c},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(c=>{if(c in l){const u=l[c];u.__refCount--,u.__refCount===0&&u.type in ra&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,f])=>{let h=c[u];if(h){const{type:d,value:p}=f,m=Dr(f,bte);d!==h.type?Tc(di.INPUT_TYPE_OVERRIDE,d):((h.__refCount===0||a)&&Object.assign(h,m),h.__refCount++)}else c[u]=Sn(Sn({},f),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(o,a,l)=>{e.setState(c=>{const u=c.data;return J9(u[o],a,o,this,l),{data:u}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].settings=Sn(Sn({},c[o].settings),a),{data:c}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].disabled=a,{data:c}})},this.set=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([u,f])=>{try{J9(c[u],f,void 0,void 0,a)}catch{}}),{data:c}})},this.getInput=o=>{try{return this.getData()[o]}catch{Tc(di.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{n.emit(`onEditStart:${o}`,this.get(o),o,Sn(Sn({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{n.emit(`onEditEnd:${o}`,this.get(o),o,Sn(Sn({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return n.on(l,a),()=>n.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return n.on(l,a),()=>n.off(l,a)};const s=(o,a,l)=>{const c={};return Object.entries(o).forEach(([u,f])=>{if(u==="")return Tc(di.EMPTY_KEY);let h=n5(a,u);if(f.type===ra.FOLDER){const d=s(f.schema,h,l);Object.assign(c,d),h in r||(r[h]=f.settings)}else if(u in l)Tc(di.DUPLICATE_KEYS,u,h,l[u].path);else{const d=oJ(f,u,h,c);if(d){const{type:p,options:m,input:g}=d,{onChange:v,transient:x,onEditStart:y,onEditEnd:A}=m,T=Dr(m,Ate);c[h]=Sn(Sn(Sn({type:p},T),g),{},{fromPanel:!0}),l[u]={path:h,onChange:v,transient:x,onEditStart:y,onEditEnd:A}}else Tc(di.UNKNOWN_INPUT,h,f)}}),c};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},nk=new Tte,wte={collapsed:!1};function ip(t,e){return{type:ra.FOLDER,schema:t,settings:Sn(Sn({},wte),e)}}const Ste={disabled:!1};function _g(t,e){return{type:ra.BUTTON,onClick:t,settings:Sn(Sn({},Ste),e)}}function P8(t){return{type:ra.BUTTON_GROUP,opts:t}}const L8=t=>"__levaInput"in t,Cte=(t,e)=>{const n={},r=e?e.toLowerCase():null;return t.forEach(i=>{const[s,o]=Cee(i);(!r||s.toLowerCase().indexOf(r)>-1)&&See(n,o,{[s]:{__levaInput:!0,path:i}})}),n},Mte=["type","label","path","valueKey","value","settings","setValue","disabled"];function Rte(t){let{type:e,label:n,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=t,c=Dr(t,Mte);const{displayValue:u,onChange:f,onUpdate:h}=EB({type:e,value:s,settings:o,setValue:a}),d=ch[e].component;return d?Ue.createElement(uB.Provider,{value:Sn({key:i,path:r,id:""+r,label:n,displayValue:u,value:s,onChange:f,onUpdate:h,settings:o,setValue:a,disabled:l},c)},Ue.createElement(SJ,{disabled:l},Ue.createElement(d,null))):(Tc(di.NO_COMPONENT_FOR_TYPE,e,r),null)}const Ite=An("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Pte({onClick:t,settings:e,label:n}){const r=vg();return Ue.createElement(Ha,null,Ue.createElement(Ite,{disabled:e.disabled,onClick:()=>t(r.get)},n))}const Lte=An("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Nte=An("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),Ote=({label:t,opts:e})=>{let n=typeof t=="string"&&t.trim()===""?null:t,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(n=e.label),r=e.opts),{label:n,opts:r}};function Dte(t){const{label:e,opts:n}=Ote(t),r=vg();return Ue.createElement(Ha,{input:!!e},e&&Ue.createElement(vl,null,e),Ue.createElement(Lte,null,Object.entries(n).map(([i,s])=>Ue.createElement(Nte,{key:i,onClick:()=>s(r.get)},i))))}const Bte=An("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),rk=100;function kte(t,e){t.push(e),t.length>rk&&t.shift()}const Fte=E.forwardRef(function({initialValue:t},e){const n=Rc("colors","highlight3"),r=Rc("colors","elevation2"),i=Rc("colors","highlight1"),[s,o]=E.useMemo(()=>[lo(i).alpha(.4).toRgbString(),lo(i).alpha(.1).toRgbString()],[i]),a=E.useRef([t]),l=E.useRef(t),c=E.useRef(t),u=E.useRef(),f=E.useCallback((p,m)=>{if(!p)return;const{width:g,height:v}=p,x=new Path2D,y=g/rk,A=v*.05;for(let M=0;M<a.current.length;M++){const C=E3(a.current[M],l.current,c.current),S=y*M,R=v-C*(v-A*2)-A;x.lineTo(S,R)}m.clearRect(0,0,g,v);const T=new Path2D(x);T.lineTo(y*(a.current.length+1),v),T.lineTo(0,v),T.lineTo(0,0);const w=m.createLinearGradient(0,0,0,v);w.addColorStop(0,s),w.addColorStop(1,o),m.fillStyle=w,m.fill(T),m.strokeStyle=r,m.lineJoin="round",m.lineWidth=14,m.stroke(x),m.strokeStyle=n,m.lineWidth=2,m.stroke(x)},[n,r,s,o]),[h,d]=DJ(f);return E.useImperativeHandle(e,()=>({frame:p=>{(l.current===void 0||p<l.current)&&(l.current=p),(c.current===void 0||p>c.current)&&(c.current=p),kte(a.current,p),u.current=requestAnimationFrame(()=>f(h.current,d.current))}}),[h,d,f]),E.useEffect(()=>()=>cancelAnimationFrame(u.current),[]),Ue.createElement(Bte,{ref:h})}),N8=t=>Number.isFinite(t)?t.toPrecision(2):t.toString(),Ute=E.forwardRef(function({initialValue:t},e){const[n,r]=E.useState(N8(t));return E.useImperativeHandle(e,()=>({frame:i=>r(N8(i))}),[]),Ue.createElement("div",null,n)});function O8(t){return typeof t=="function"?t():t.current}function zte({label:t,objectOrFn:e,settings:n}){const r=E.useRef(),i=E.useRef(O8(e));return E.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(O8(e))},n.interval);return()=>window.clearInterval(s)},[e,n.interval]),Ue.createElement(Ha,{input:!0},Ue.createElement(vl,{align:"top"},t),n.graph?Ue.createElement(Fte,{ref:r,initialValue:i.current}):Ue.createElement(Ute,{ref:r,initialValue:i.current}))}const Hte=["type","label","key"],Gte={[ra.BUTTON]:Pte,[ra.BUTTON_GROUP]:Dte,[ra.MONITOR]:zte},Vte=Ue.memo(({path:t})=>{const[e,{set:n,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=kJ(t);if(!e)return null;const{type:l,label:c,key:u}=e,f=Dr(e,Hte);if(l in ra){const h=Gte[l];return Ue.createElement(h,Ci({label:c,path:t},f))}return l in ch?Ue.createElement(Rte,Ci({key:s+t,type:l,label:c,storeId:s,path:t,valueKey:u,setValue:n,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},f)):(WK(di.UNSUPPORTED_INPUT,l,t),null)});function Wte({toggle:t,toggled:e,name:n}){return Ue.createElement(AJ,{onClick:()=>t()},Ue.createElement(Y4,{toggled:e}),Ue.createElement("div",null,n))}const jte=({name:t,path:e,tree:n})=>{const r=vg(),i=n5(e,t),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=E.useState(!s),c=E.useRef(null),u=Rc("colors","folderWidgetColor"),f=Rc("colors","folderTextColor");return E.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",o||u),c.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,u,f]),Ue.createElement(b3,{ref:c},Ue.createElement(Wte,{name:t,toggled:a,toggle:()=>l(h=>!h)}),Ue.createElement(ik,{parent:i,tree:n,toggled:a}))},ik=Ue.memo(({isRoot:t=!1,fill:e=!1,flat:n=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=Iee(s),l=vg(),c=([f,h])=>{var d;return(L8(h)?(d=l.getInput(h.path))===null||d===void 0?void 0:d.order:l.getFolderSettings(n5(r,f)).order)||0},u=Object.entries(i).sort((f,h)=>c(f)-c(h));return Ue.createElement(vw,{ref:o,isRoot:t,fill:e,flat:n},Ue.createElement(gB,{ref:a,isRoot:t,toggled:s},u.map(([f,h])=>L8(h)?Ue.createElement(Vte,{key:h.path,valueKey:h.valueKey,path:h.path}):Ue.createElement(jte,{key:f,name:f,path:r,tree:h}))))}),$te=An("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${yB}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),sk=40,C3=An("i",{$flexCenter:"",width:sk,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),Xte=An("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),Yte=An("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${C3}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),qte=An("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),Kte=An("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:sk}}}}),Jte=Ue.forwardRef(({setFilter:t,toggle:e},n)=>{const[r,i]=E.useState(""),s=E.useMemo(()=>iB(t,250),[t]),o=()=>{t(""),i("")},a=l=>{const c=l.currentTarget.value;e(!0),i(c)};return E.useEffect(()=>{s(r)},[r,s]),Ue.createElement(Ue.Fragment,null,Ue.createElement(qte,{ref:n,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),Ue.createElement(C3,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},Ue.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function Qte({setFilter:t,onDrag:e,onDragStart:n,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:c}){const[u,f]=E.useState(!1),h=E.useRef(null);E.useEffect(()=>{var p,m;u?(p=h.current)===null||p===void 0||p.focus():(m=h.current)===null||m===void 0||m.blur()},[u]);const d=yg(({offset:[p,m],first:g,last:v})=>{e({x:p,y:m}),g&&n({x:p,y:m}),v&&r({x:p,y:m})},{filterTaps:!0,from:({offset:[p,m]})=>[(c==null?void 0:c.x)||p,(c==null?void 0:c.y)||m]});return E.useEffect(()=>{const p=m=>{m.key==="L"&&m.shiftKey&&m.metaKey&&f(g=>!g)};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[]),Ue.createElement(Ue.Fragment,null,Ue.createElement(Xte,{mode:a?"drag":void 0},Ue.createElement(C3,{active:!s,onClick:()=>i()},Ue.createElement(Y4,{toggled:s,width:12,height:8})),Ue.createElement(Kte,Ci({},a?d():{},{drag:a,filterEnabled:l}),o===void 0&&a?Ue.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},Ue.createElement("circle",{cx:"2",cy:"2",r:"2"}),Ue.createElement("circle",{cx:"14",cy:"2",r:"2"}),Ue.createElement("circle",{cx:"26",cy:"2",r:"2"}),Ue.createElement("circle",{cx:"2",cy:"12",r:"2"}),Ue.createElement("circle",{cx:"14",cy:"12",r:"2"}),Ue.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&Ue.createElement(C3,{active:u,onClick:()=>f(p=>!p)},Ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},Ue.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),Ue.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),Ue.createElement(Yte,{toggled:u},Ue.createElement(Jte,{ref:h,setFilter:t,toggle:i})))}const Zte=["store","hidden","theme","collapsed"];function ene(t){let{store:e,hidden:n=!1,theme:r,collapsed:i=!1}=t,s=Dr(t,Zte);const o=KB(()=>vJ(r),[r]),[a,l]=E.useState(!i),c=typeof i=="object"?!i.collapsed:a,u=E.useMemo(()=>typeof i=="object"?f=>{typeof f=="function"?i.onChange(!f(!i.collapsed)):i.onChange(!f)}:l,[i]);return!e||n?null:Ue.createElement(j4.Provider,{value:o},Ue.createElement(tne,Ci({store:e},s,{toggled:c,setToggle:u,rootClass:o.className})))}const tne=Ue.memo(({store:t,rootClass:e,fill:n=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:c})=>{var u,f;const h=Pee(t),[d,p]=E.useState(""),m=E.useMemo(()=>Cte(h,d),[h,d]),[g,v]=_B(),x=i||h.length>0,y=typeof o=="object"&&o.title||void 0,A=typeof o=="object"&&(u=o.drag)!==null&&u!==void 0?u:!0,T=typeof o=="object"&&(f=o.filter)!==null&&f!==void 0?f:!0,w=typeof o=="object"&&o.position||void 0,M=typeof o=="object"&&o.onDrag||void 0,C=typeof o=="object"&&o.onDragStart||void 0,S=typeof o=="object"&&o.onDragEnd||void 0;return Ue.useEffect(()=>{v({x:w==null?void 0:w.x,y:w==null?void 0:w.y})},[w,v]),gJ(),Ue.createElement(hB.Provider,{value:{hideCopyButton:a}},Ue.createElement($te,{ref:g,className:e,fill:n,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:x?"block":"none"}},o&&Ue.createElement(Qte,{onDrag:R=>{v(R),M==null||M(R)},onDragStart:R=>C==null?void 0:C(R),onDragEnd:R=>S==null?void 0:S(R),setFilter:p,toggle:R=>c(O=>R??!O),toggled:l,title:y,drag:A,filterEnabled:T,from:w}),x&&Ue.createElement(fB.Provider,{value:t},Ue.createElement(ik,{isRoot:!0,fill:n,flat:r,tree:m,toggled:l}))))}),nne=["isRoot"];let M3=!1,Uf=null;function ok(t){let{isRoot:e=!1}=t,n=Dr(t,nne);return E.useEffect(()=>(M3=!0,!e&&Uf&&(Uf.remove(),Uf=null),()=>{e||(M3=!1)}),[e]),Ue.createElement(ene,Ci({store:nk},n))}function rne(t){E.useEffect(()=>{t&&!M3&&(Uf||(Uf=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Uf),lJ(Ue.createElement(ok,{isRoot:!0}),Uf))),M3=!0)},[t])}function ine(t,e,n,r,i){let s,o,a,l,c;return typeof t=="string"?(o=t,s=e,Array.isArray(n)?c=n:n&&("store"in n?(l=n,c=r):(a=n,Array.isArray(r)?c=r:(l=r,c=i)))):(s=t,Array.isArray(e)?c=e:(l=e,c=n)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:c||[]}}function Mr(t,e,n,r,i){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:c}=ine(t,e,n,r,i),u=typeof o=="function",f=E.useRef(!1),h=E.useRef(!0),d=KB(()=>{f.current=!0;const O=typeof o=="function"?o():o;return s?{[s]:ip(O,a)}:O},c),p=!(l!=null&&l.store);rne(p);const[m]=E.useState(()=>(l==null?void 0:l.store)||nk),[g,v]=E.useMemo(()=>m.getDataFromSchema(d),[m,d]),[x,y,A,T,w]=E.useMemo(()=>{const O=[],L=[],B={},N={},$={};return Object.values(v).forEach(({path:U,onChange:Q,onEditStart:Y,onEditEnd:ee,transient:ne})=>{O.push(U),Q?(B[U]=Q,ne||L.push(U)):L.push(U),Y&&(N[U]=Y),ee&&($[U]=ee)}),[O,L,B,N,$]},[v]),M=E.useMemo(()=>m.orderPaths(x),[x,m]),C=Lee(m,y,g),S=E.useCallback(O=>{const L=Object.entries(O).reduce((B,[N,$])=>Object.assign(B,{[v[N].path]:$}),{});m.set(L,!1)},[m,v]),R=E.useCallback(O=>m.get(v[O].path),[m,v]);return E.useEffect(()=>{const O=!h.current&&f.current;return m.addData(g,O),h.current=!1,f.current=!1,()=>m.disposePaths(M)},[m,M,g]),E.useEffect(()=>{const O=[];return Object.entries(A).forEach(([L,B])=>{B(m.get(L),L,Sn({initial:!0,get:m.get},m.getInput(L)));const N=m.useStore.subscribe($=>{const U=$.data[L];return[U.disabled?void 0:U.value,U]},([$,U])=>B($,L,Sn({initial:!1,get:m.get},U)),{equalityFn:dg});O.push(N)}),()=>O.forEach(L=>L())},[m,A]),E.useEffect(()=>{const O=[];return Object.entries(T).forEach(([L,B])=>O.push(m.subscribeToEditStart(L,B))),Object.entries(w).forEach(([L,B])=>O.push(m.subscribeToEditEnd(L,B))),()=>O.forEach(L=>L())},[T,w,m]),u?[C,S,R]:C}$c(pl.SELECT,eQ);$c(pl.IMAGE,fte);$c(pl.NUMBER,WJ);$c(pl.COLOR,Vee);$c(pl.STRING,cQ);$c(pl.BOOLEAN,gQ);$c(pl.INTERVAL,Ete);$c(pl.VECTOR3D,jee);$c(pl.VECTOR2D,Zee);var Ym,U1=((Ym=function(){return U1}).toString=Ym.toLocaleString=Ym[Symbol.toPrimitive]=function(){return""},Ym.valueOf=function(){return!1},new Proxy(Object.freeze(Ym),{get:function(t,e){return t.hasOwnProperty(e)?t[e]:U1}}));const R3=typeof globalThis.window<"u"?globalThis.window:U1,Ic=typeof R3.document<"u"?R3.document:U1;typeof R3.navigator<"u"&&R3.navigator;var ak={},qp={},Kl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isEventSourceSupported=t.isReactNative=t.ReadyState=t.DEFAULT_HEARTBEAT=t.UNPARSABLE_JSON_OBJECT=t.DEFAULT_RECONNECT_INTERVAL_MS=t.DEFAULT_RECONNECT_LIMIT=t.SOCKET_IO_PING_CODE=t.SOCKET_IO_PATH=t.SOCKET_IO_PING_INTERVAL=t.DEFAULT_EVENT_SOURCE_OPTIONS=t.EMPTY_EVENT_HANDLERS=t.DEFAULT_OPTIONS=void 0;var e=1,n=1e3*e;t.DEFAULT_OPTIONS={},t.EMPTY_EVENT_HANDLERS={},t.DEFAULT_EVENT_SOURCE_OPTIONS={withCredentials:!1,events:t.EMPTY_EVENT_HANDLERS},t.SOCKET_IO_PING_INTERVAL=25*n,t.SOCKET_IO_PATH="/socket.io/?EIO=3&transport=websocket",t.SOCKET_IO_PING_CODE="2",t.DEFAULT_RECONNECT_LIMIT=20,t.DEFAULT_RECONNECT_INTERVAL_MS=5e3,t.UNPARSABLE_JSON_OBJECT={},t.DEFAULT_HEARTBEAT={message:"ping",timeout:6e4,interval:25e3},function(i){i[i.UNINSTANTIATED=-1]="UNINSTANTIATED",i[i.CONNECTING=0]="CONNECTING",i[i.OPEN=1]="OPEN",i[i.CLOSING=2]="CLOSING",i[i.CLOSED=3]="CLOSED"}(t.ReadyState||(t.ReadyState={}));var r=function(){try{return"EventSource"in globalThis}catch{return!1}};t.isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative",t.isEventSourceSupported=!t.isReactNative&&r()})(Kl);var bE={},AE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.resetWebSockets=t.sharedWebSockets=void 0,t.sharedWebSockets={};var e=function(n){if(n&&t.sharedWebSockets.hasOwnProperty(n))delete t.sharedWebSockets[n];else for(var r in t.sharedWebSockets)t.sharedWebSockets.hasOwnProperty(r)&&delete t.sharedWebSockets[r]};t.resetWebSockets=e})(AE);var TE={},Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.setUpSocketIOPing=Gl.appendQueryParams=Gl.parseSocketIOUrl=void 0;var I3=Kl,sne=function(t){if(t){var e=/^https|wss/.test(t),n=t.replace(/^(https?|wss?)(:\/\/)?/,""),r=n.replace(/\/$/,""),i=e?"wss":"ws";return"".concat(i,"://").concat(r).concat(I3.SOCKET_IO_PATH)}else if(t===""){var e=/^https/.test(window.location.protocol),i=e?"wss":"ws",s=window.location.port?":".concat(window.location.port):"";return"".concat(i,"://").concat(window.location.hostname).concat(s).concat(I3.SOCKET_IO_PATH)}return t};Gl.parseSocketIOUrl=sne;var one=function(t,e){e===void 0&&(e={});var n=/\?([\w]+=[\w]+)/,r=n.test(t),i="".concat(Object.entries(e).reduce(function(s,o){var a=o[0],l=o[1];return s+"".concat(a,"=").concat(l,"&")},"").slice(0,-1));return"".concat(t).concat(r?"&":"?").concat(i)};Gl.appendQueryParams=one;var ane=function(t,e){e===void 0&&(e=I3.SOCKET_IO_PING_INTERVAL);var n=function(){return t(I3.SOCKET_IO_PING_CODE)};return window.setInterval(n,e)};Gl.setUpSocketIOPing=ane;var bg={};Object.defineProperty(bg,"__esModule",{value:!0});bg.heartbeat=void 0;var hA=Kl;function lne(t,e){var n=e||{},r=n.interval,i=r===void 0?hA.DEFAULT_HEARTBEAT.interval:r,s=n.timeout,o=s===void 0?hA.DEFAULT_HEARTBEAT.timeout:s,a=n.message,l=a===void 0?hA.DEFAULT_HEARTBEAT.message:a,c=!1,u=setInterval(function(){try{t.send(l)}catch{}},i),f=setInterval(function(){c?c=!1:t.close()},o);return t.addEventListener("close",function(){clearInterval(u),clearInterval(f)}),function(){c=!0}}bg.heartbeat=lne;var Uu={},wE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.resetSubscribers=t.removeSubscriber=t.addSubscriber=t.hasSubscribers=t.getSubscribers=void 0;var e={},n=[],r=function(l){return(0,t.hasSubscribers)(l)?Array.from(e[l]):n};t.getSubscribers=r;var i=function(l){var c;return((c=e[l])===null||c===void 0?void 0:c.size)>0};t.hasSubscribers=i;var s=function(l,c){e[l]=e[l]||new Set,e[l].add(c)};t.addSubscriber=s;var o=function(l,c){e[l].delete(c)};t.removeSubscriber=o;var a=function(l){if(l&&e.hasOwnProperty(l))delete e[l];else for(var c in e)e.hasOwnProperty(c)&&delete e[c]};t.resetSubscribers=a})(wE);Object.defineProperty(Uu,"__esModule",{value:!0});Uu.resetGlobalState=Uu.assertIsWebSocket=void 0;var cne=AE,une=wE;function fne(t,e){if(!e&&!(t instanceof WebSocket))throw new Error("")}Uu.assertIsWebSocket=fne;function hne(t){(0,une.resetSubscribers)(t),(0,cne.resetWebSockets)(t)}Uu.resetGlobalState=hne;var P3=Cr&&Cr.__assign||function(){return P3=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},P3.apply(this,arguments)};Object.defineProperty(TE,"__esModule",{value:!0});TE.attachListeners=void 0;var dne=Gl,pne=bg,Ul=Kl,mne=Uu,gne=function(t,e,n){var r;if(e.current.heartbeat&&t instanceof WebSocket){var i=typeof e.current.heartbeat=="boolean"?void 0:e.current.heartbeat;r=(0,pne.heartbeat)(t,i)}t.onmessage=function(s){var o;r==null||r(),e.current.onMessage&&e.current.onMessage(s),!(typeof e.current.filter=="function"&&e.current.filter(s)!==!0)&&(e.current.heartbeat&&typeof e.current.heartbeat!="boolean"&&((o=e.current.heartbeat)===null||o===void 0?void 0:o.returnMessage)===s.data||n(s))}},vne=function(t,e,n,r){t.onopen=function(i){e.current.onOpen&&e.current.onOpen(i),r.current=0,n(Ul.ReadyState.OPEN)}},yne=function(t,e,n,r,i){if(Ul.isEventSourceSupported&&t instanceof EventSource)return function(){};(0,mne.assertIsWebSocket)(t,e.current.skipAssert);var s;return t.onclose=function(o){var a;if(e.current.onClose&&e.current.onClose(o),n(Ul.ReadyState.CLOSED),e.current.shouldReconnect&&e.current.shouldReconnect(o)){var l=(a=e.current.reconnectAttempts)!==null&&a!==void 0?a:Ul.DEFAULT_RECONNECT_LIMIT;if(i.current<l){var c=typeof e.current.reconnectInterval=="function"?e.current.reconnectInterval(i.current):e.current.reconnectInterval;s=window.setTimeout(function(){i.current++,r()},c??Ul.DEFAULT_RECONNECT_INTERVAL_MS)}else e.current.onReconnectStop&&e.current.onReconnectStop(l),console.warn("Max reconnect attempts of ".concat(l," exceeded"))}},function(){return s&&window.clearTimeout(s)}},xne=function(t,e,n,r,i){var s;return t.onerror=function(o){var a;if(e.current.onError&&e.current.onError(o),Ul.isEventSourceSupported&&t instanceof EventSource&&(e.current.onClose&&e.current.onClose(P3(P3({},o),{code:1006,reason:"An error occurred with the EventSource: ".concat(o),wasClean:!1})),n(Ul.ReadyState.CLOSED),t.close()),e.current.retryOnError)if(i.current<((a=e.current.reconnectAttempts)!==null&&a!==void 0?a:Ul.DEFAULT_RECONNECT_LIMIT)){var l=typeof e.current.reconnectInterval=="function"?e.current.reconnectInterval(i.current):e.current.reconnectInterval;s=window.setTimeout(function(){i.current++,r()},l??Ul.DEFAULT_RECONNECT_INTERVAL_MS)}else e.current.onReconnectStop&&e.current.onReconnectStop(e.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(e.current.reconnectAttempts," exceeded"))},function(){return s&&window.clearTimeout(s)}},Ene=function(t,e,n,r,i,s){var o=e.setLastMessage,a=e.setReadyState,l,c,u;return n.current.fromSocketIO&&(l=(0,dne.setUpSocketIOPing)(s)),gne(t,n,o),vne(t,n,a,i),c=yne(t,n,a,r,i),u=xne(t,n,a,r,i),function(){a(Ul.ReadyState.CLOSING),c(),u(),t.close(),l&&clearInterval(l)}};TE.attachListeners=Ene;var SE={},L3=Cr&&Cr.__assign||function(){return L3=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},L3.apply(this,arguments)};Object.defineProperty(SE,"__esModule",{value:!0});SE.attachSharedListeners=void 0;var _ne=AE,Qf=Kl,z1=wE,bne=Gl,Ane=bg,Tne=function(t,e,n){var r;n&&t instanceof WebSocket&&(r=(0,Ane.heartbeat)(t,typeof n=="boolean"?void 0:n)),t.onmessage=function(i){r==null||r(),(0,z1.getSubscribers)(e).forEach(function(s){s.optionsRef.current.onMessage&&s.optionsRef.current.onMessage(i),!(typeof s.optionsRef.current.filter=="function"&&s.optionsRef.current.filter(i)!==!0)&&(n&&typeof n!="boolean"&&(n==null?void 0:n.returnMessage)===i.data||s.setLastMessage(i))})}},wne=function(t,e){t.onopen=function(n){(0,z1.getSubscribers)(e).forEach(function(r){r.reconnectCount.current=0,r.optionsRef.current.onOpen&&r.optionsRef.current.onOpen(n),r.setReadyState(Qf.ReadyState.OPEN)})}},Sne=function(t,e){t instanceof WebSocket&&(t.onclose=function(n){(0,z1.getSubscribers)(e).forEach(function(r){r.optionsRef.current.onClose&&r.optionsRef.current.onClose(n),r.setReadyState(Qf.ReadyState.CLOSED)}),delete _ne.sharedWebSockets[e],(0,z1.getSubscribers)(e).forEach(function(r){var i;if(r.optionsRef.current.shouldReconnect&&r.optionsRef.current.shouldReconnect(n)){var s=(i=r.optionsRef.current.reconnectAttempts)!==null&&i!==void 0?i:Qf.DEFAULT_RECONNECT_LIMIT;if(r.reconnectCount.current<s){var o=typeof r.optionsRef.current.reconnectInterval=="function"?r.optionsRef.current.reconnectInterval(r.reconnectCount.current):r.optionsRef.current.reconnectInterval;setTimeout(function(){r.reconnectCount.current++,r.reconnect.current()},o??Qf.DEFAULT_RECONNECT_INTERVAL_MS)}else r.optionsRef.current.onReconnectStop&&r.optionsRef.current.onReconnectStop(r.optionsRef.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(s," exceeded"))}})})},Cne=function(t,e){t.onerror=function(n){(0,z1.getSubscribers)(e).forEach(function(r){r.optionsRef.current.onError&&r.optionsRef.current.onError(n),Qf.isEventSourceSupported&&t instanceof EventSource&&(r.optionsRef.current.onClose&&r.optionsRef.current.onClose(L3(L3({},n),{code:1006,reason:"An error occurred with the EventSource: ".concat(n),wasClean:!1})),r.setReadyState(Qf.ReadyState.CLOSED))}),Qf.isEventSourceSupported&&t instanceof EventSource&&t.close()}},Mne=function(t,e,n,r){var i;return n.current.fromSocketIO&&(i=(0,bne.setUpSocketIOPing)(r)),Tne(t,e,n.current.heartbeat),Sne(t,e),wne(t,e),Cne(t,e),function(){i&&clearInterval(i)}};SE.attachSharedListeners=Mne;Object.defineProperty(bE,"__esModule",{value:!0});bE.createOrJoinSocket=void 0;var Eu=AE,J0=Kl,Rne=TE,Ine=SE,Lw=wE,Pne=function(t,e,n,r,i){return function(){if((0,Lw.removeSubscriber)(t,e),!(0,Lw.hasSubscribers)(t)){try{var s=Eu.sharedWebSockets[t];s instanceof WebSocket&&(s.onclose=function(o){n.current.onClose&&n.current.onClose(o),r(J0.ReadyState.CLOSED)}),s.close()}catch{}i&&i(),delete Eu.sharedWebSockets[t]}}},Lne=function(t,e,n,r,i,s,o,a){if(!J0.isEventSourceSupported&&r.current.eventSourceOptions)throw J0.isReactNative?new Error("EventSource is not supported in ReactNative"):new Error("EventSource is not supported");if(r.current.share){var l=null;Eu.sharedWebSockets[e]===void 0?(Eu.sharedWebSockets[e]=r.current.eventSourceOptions?new EventSource(e,r.current.eventSourceOptions):new WebSocket(e,r.current.protocols),t.current=Eu.sharedWebSockets[e],n(J0.ReadyState.CONNECTING),l=(0,Ine.attachSharedListeners)(Eu.sharedWebSockets[e],e,r,a)):(t.current=Eu.sharedWebSockets[e],n(Eu.sharedWebSockets[e].readyState));var c={setLastMessage:i,setReadyState:n,optionsRef:r,reconnectCount:o,reconnect:s};return(0,Lw.addSubscriber)(e,c),Pne(e,c,r,n,l)}else{if(t.current=r.current.eventSourceOptions?new EventSource(e,r.current.eventSourceOptions):new WebSocket(e,r.current.protocols),n(J0.ReadyState.CONNECTING),!t.current)throw new Error("WebSocket failed to be created");return(0,Rne.attachListeners)(t.current,{setLastMessage:i,setReadyState:n},r,s.current,o,a)}};bE.createOrJoinSocket=Lne;var CE={},Nne=Cr&&Cr.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},One=Cr&&Cr.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(CE,"__esModule",{value:!0});CE.getUrl=void 0;var D8=Gl,Dne=function(t,e){return Nne(void 0,void 0,void 0,function(){var n,r,i;return One(this,function(s){switch(s.label){case 0:return typeof t!="function"?[3,2]:[4,t()];case 1:return n=s.sent(),[3,3];case 2:n=t,s.label=3;case 3:return r=e.current.fromSocketIO?(0,D8.parseSocketIOUrl)(n):n,i=e.current.queryParams?(0,D8.appendQueryParams)(r,e.current.queryParams):r,[2,i]}})})};CE.getUrl=Dne;var lk={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.websocketWrapper=void 0;var e=function(n,r){return new Proxy(n,{get:function(i,s){var o=i[s];return s==="reconnect"?r:typeof o=="function"?(console.error("Calling methods directly on the websocket is not supported at this moment. You must use the methods returned by useWebSocket."),function(){}):o},set:function(i,s,o){return/^on/.test(s)?(console.warn("The websocket's event handlers should be defined through the options object passed into useWebSocket."),!1):(i[s]=o,!0)}})};t.websocketWrapper=e,t.default=t.websocketWrapper})(lk);var sp=Cr&&Cr.__assign||function(){return sp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},sp.apply(this,arguments)},Bne=Cr&&Cr.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},kne=Cr&&Cr.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Fne=Cr&&Cr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qp,"__esModule",{value:!0});qp.useWebSocket=void 0;var ro=Ue,B8=pE,oc=Kl,Une=bE,zne=CE,Hne=Fne(lk),k8=Uu,Gne=function(t,e,n){e===void 0&&(e=oc.DEFAULT_OPTIONS),n===void 0&&(n=!0);var r=(0,ro.useState)(null),i=r[0],s=r[1],o=(0,ro.useState)({}),a=o[0],l=o[1],c=(0,ro.useMemo)(function(){if(i)try{return JSON.parse(i.data)}catch{return oc.UNPARSABLE_JSON_OBJECT}return null},[i]),u=(0,ro.useRef)(null),f=(0,ro.useRef)(null),h=(0,ro.useRef)(function(){}),d=(0,ro.useRef)(0),p=(0,ro.useRef)([]),m=(0,ro.useRef)(null),g=(0,ro.useRef)(e);g.current=e;var v=u.current&&a[u.current]!==void 0?a[u.current]:t!==null&&n===!0?oc.ReadyState.CONNECTING:oc.ReadyState.UNINSTANTIATED,x=e.queryParams?JSON.stringify(e.queryParams):null,y=(0,ro.useCallback)(function(w,M){var C;if(M===void 0&&(M=!0),oc.isEventSourceSupported&&f.current instanceof EventSource){console.warn("Unable to send a message from an eventSource");return}((C=f.current)===null||C===void 0?void 0:C.readyState)===oc.ReadyState.OPEN?((0,k8.assertIsWebSocket)(f.current,g.current.skipAssert),f.current.send(w)):M&&p.current.push(w)},[]),A=(0,ro.useCallback)(function(w,M){M===void 0&&(M=!0),y(JSON.stringify(w),M)},[y]),T=(0,ro.useCallback)(function(){return g.current.share!==!0||oc.isEventSourceSupported&&f.current instanceof EventSource?f.current:(m.current===null&&f.current&&((0,k8.assertIsWebSocket)(f.current,g.current.skipAssert),m.current=(0,Hne.default)(f.current,h)),m.current)},[]);return(0,ro.useEffect)(function(){if(t!==null&&n===!0){var w,M=!1,C=!0,S=function(){return Bne(void 0,void 0,void 0,function(){var R,O,L;return kne(this,function(B){switch(B.label){case 0:return R=u,[4,(0,zne.getUrl)(t,g)];case 1:return R.current=B.sent(),O=function(N){M||(0,B8.flushSync)(function(){return s(N)})},L=function(N){M||(0,B8.flushSync)(function(){return l(function($){var U;return sp(sp({},$),u.current&&(U={},U[u.current]=N,U))})})},C&&(w=(0,Une.createOrJoinSocket)(f,u.current,L,g,O,h,d,y)),[2]}})})};return h.current=function(){M||(m.current&&(m.current=null),w==null||w(),S())},S(),function(){M=!0,C=!1,m.current&&(m.current=null),w==null||w(),s(null)}}else(t===null||n===!1)&&(d.current=0,l(function(R){var O;return sp(sp({},R),u.current&&(O={},O[u.current]=oc.ReadyState.CLOSED,O))}))},[t,n,x,y]),(0,ro.useEffect)(function(){v===oc.ReadyState.OPEN&&p.current.splice(0).forEach(function(w){y(w)})},[v]),{sendMessage:y,sendJsonMessage:A,lastMessage:i,lastJsonMessage:c,readyState:v,getWebSocket:T}};qp.useWebSocket=Gne;var ME={},N3=Cr&&Cr.__assign||function(){return N3=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},N3.apply(this,arguments)};Object.defineProperty(ME,"__esModule",{value:!0});ME.useSocketIO=void 0;var F8=Ue,Vne=qp,Wne=Kl,dA={type:"empty",payload:null},jne=function(t){if(!t||!t.data)return dA;var e=t.data.match(/\[.*]/);if(!e)return dA;var n=JSON.parse(e);return!Array.isArray(n)||!n[1]?dA:{type:n[0],payload:n[1]}},$ne=function(t,e,n){e===void 0&&(e=Wne.DEFAULT_OPTIONS),n===void 0&&(n=!0);var r=(0,F8.useMemo)(function(){return N3(N3({},e),{fromSocketIO:!0})},[]),i=(0,Vne.useWebSocket)(t,r,n),s=i.sendMessage,o=i.sendJsonMessage,a=i.lastMessage,l=i.readyState,c=i.getWebSocket,u=(0,F8.useMemo)(function(){return jne(a)},[a]);return{sendMessage:s,sendJsonMessage:o,lastMessage:u,lastJsonMessage:u,readyState:l,getWebSocket:c}};ME.useSocketIO=$ne;var RE={},O3=Cr&&Cr.__assign||function(){return O3=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},O3.apply(this,arguments)},Xne=Cr&&Cr.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};Object.defineProperty(RE,"__esModule",{value:!0});RE.useEventSource=void 0;var U8=Ue,Yne=qp,z8=Kl,qne=function(t,e,n){e===void 0&&(e=z8.DEFAULT_EVENT_SOURCE_OPTIONS);var r=e.withCredentials,i=e.events,s=Xne(e,["withCredentials","events"]);n===void 0&&(n=!0);var o=O3(O3({},s),{eventSourceOptions:{withCredentials:r}}),a=(0,U8.useRef)(z8.EMPTY_EVENT_HANDLERS);i&&(a.current=i);var l=(0,Yne.useWebSocket)(t,o,n),c=l.lastMessage,u=l.readyState,f=l.getWebSocket;return(0,U8.useEffect)(function(){c!=null&&c.type&&Object.entries(a.current).forEach(function(h){var d=h[0],p=h[1];d===c.type&&p(c)})},[c]),{lastEvent:c,readyState:u,getEventSource:f}};RE.useEventSource=qne;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.resetGlobalState=t.useEventSource=t.ReadyState=t.useSocketIO=t.default=void 0;var e=qp;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.useWebSocket}});var n=ME;Object.defineProperty(t,"useSocketIO",{enumerable:!0,get:function(){return n.useSocketIO}});var r=Kl;Object.defineProperty(t,"ReadyState",{enumerable:!0,get:function(){return r.ReadyState}});var i=RE;Object.defineProperty(t,"useEventSource",{enumerable:!0,get:function(){return i.useEventSource}});var s=Uu;Object.defineProperty(t,"resetGlobalState",{enumerable:!0,get:function(){return s.resetGlobalState}})})(ak);const Kne=go(ak);var pA=Ue,Jne=function(t){return typeof t=="function"},Qne=function(t){var e=pA.useState(t),n=e[0],r=e[1],i=pA.useRef(n),s=pA.useCallback(function(o){i.current=Jne(o)?o(i.current):o,r(i.current)},[]);return[n,s,i]},Zne=Qne;const Nw=go(Zne);var Ow;try{Ow=new TextDecoder}catch{}var Yt,Ma,et=0,ri={},rr,Tu,Sa=0,Dl=0,ms,Pc,ko=[],er,H8={useRecords:!1,mapsAsObjects:!0};class ck{}const uk=new ck;uk.name="MessagePack 0xC1";var Cu=!1,fk=2,G8;try{new Function("")}catch{fk=1/0}class H1{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.sequential&&e.trusted!==!1&&(e.trusted=!0,!e.structures&&e.useRecords!=!1&&(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,n){if(Yt)return gk(()=>(Bw(),this?this.unpack(e,n):H1.prototype.unpack.call(H8,e,n)));!e.buffer&&e.constructor===ArrayBuffer&&(e=typeof Buffer<"u"?Buffer.from(e):new Uint8Array(e)),typeof n=="object"?(Ma=n.end||e.length,et=n.start||0):(et=0,Ma=n>-1?n:e.length),Dl=0,Tu=null,ms=null,Yt=e;try{er=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw Yt=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof H1){if(ri=this,this.structures)return rr=this.structures,jv(n);(!rr||rr.length>0)&&(rr=[])}else ri=H8,(!rr||rr.length>0)&&(rr=[]);return jv(n)}unpackMultiple(e,n){let r,i=0;try{Cu=!0;let s=e.length,o=this?this.unpack(e,s):IE.unpack(e,s);if(n){if(n(o,i,et)===!1)return;for(;et<s;)if(i=et,n(jv(),i,et)===!1)return}else{for(r=[o];et<s;)i=et,r.push(jv());return r}}catch(s){throw s.lastPosition=i,s.values=r,s}finally{Cu=!1,Bw()}}_mergeStructures(e,n){e=e||[],Object.isFrozen(e)&&(e=e.map(r=>r.slice(0)));for(let r=0,i=e.length;r<i;r++){let s=e[r];s&&(s.isShared=!0,r>=32&&(s.highByte=r-32>>5))}e.sharedLength=e.length;for(let r in n||[])if(r>=0){let i=e[r],s=n[r];s&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[r]=i),e[r]=s)}return this.structures=e}decode(e,n){return this.unpack(e,n)}}function jv(t){try{if(!ri.trusted&&!Cu){let n=rr.sharedLength||0;n<rr.length&&(rr.length=n)}let e;if(ri.randomAccessStructure&&Yt[et]<64&&Yt[et]>=32&&G8?(e=G8(Yt,et,Ma,ri),Yt=null,!(t&&t.lazy)&&e&&(e=e.toJSON()),et=Ma):e=Oi(),ms&&(et=ms.postBundlePosition,ms=null),Cu&&(rr.restoreStructures=null),et==Ma)rr&&rr.restoreStructures&&V8(),rr=null,Yt=null,Pc&&(Pc=null);else{if(et>Ma)throw new Error("Unexpected end of MessagePack data");if(!Cu){let n;try{n=JSON.stringify(e,(r,i)=>typeof i=="bigint"?`${i}n`:i).slice(0,100)}catch(r){n="(JSON view not available "+r+")"}throw new Error("Data read, but end of buffer not reached "+n)}}return e}catch(e){throw rr&&rr.restoreStructures&&V8(),Bw(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||et>Ma)&&(e.incomplete=!0),e}}function V8(){for(let t in rr.restoreStructures)rr[t]=rr.restoreStructures[t];rr.restoreStructures=null}function Oi(){let t=Yt[et++];if(t<160)if(t<128){if(t<64)return t;{let e=rr[t&63]||ri.getStructures&&hk()[t&63];return e?(e.read||(e.read=r5(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,ri.mapsAsObjects){let e={};for(let n=0;n<t;n++){let r=pk();r==="__proto__"&&(r="__proto_"),e[r]=Oi()}return e}else{let e=new Map;for(let n=0;n<t;n++)e.set(Oi(),Oi());return e}else{t-=144;let e=new Array(t);for(let n=0;n<t;n++)e[n]=Oi();return ri.freezeData?Object.freeze(e):e}else if(t<192){let e=t-160;if(Dl>=et)return Tu.slice(et-Sa,(et+=e)-Sa);if(Dl==0&&Ma<140){let n=e<16?i5(e):dk(e);if(n!=null)return n}return Dw(e)}else{let e;switch(t){case 192:return null;case 193:return ms?(e=Oi(),e>0?ms[1].slice(ms.position1,ms.position1+=e):ms[0].slice(ms.position0,ms.position0-=e)):uk;case 194:return!1;case 195:return!0;case 196:if(e=Yt[et++],e===void 0)throw new Error("Unexpected end of buffer");return mA(e);case 197:return e=er.getUint16(et),et+=2,mA(e);case 198:return e=er.getUint32(et),et+=4,mA(e);case 199:return pf(Yt[et++]);case 200:return e=er.getUint16(et),et+=2,pf(e);case 201:return e=er.getUint32(et),et+=4,pf(e);case 202:if(e=er.getFloat32(et),ri.useFloat32>2){let n=s5[(Yt[et]&127)<<1|Yt[et+1]>>7];return et+=4,(n*e+(e>0?.5:-.5)>>0)/n}return et+=4,e;case 203:return e=er.getFloat64(et),et+=8,e;case 204:return Yt[et++];case 205:return e=er.getUint16(et),et+=2,e;case 206:return e=er.getUint32(et),et+=4,e;case 207:return ri.int64AsType==="number"?(e=er.getUint32(et)*4294967296,e+=er.getUint32(et+4)):ri.int64AsType==="string"?e=er.getBigUint64(et).toString():ri.int64AsType==="auto"?(e=er.getBigUint64(et),e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=er.getBigUint64(et),et+=8,e;case 208:return er.getInt8(et++);case 209:return e=er.getInt16(et),et+=2,e;case 210:return e=er.getInt32(et),et+=4,e;case 211:return ri.int64AsType==="number"?(e=er.getInt32(et)*4294967296,e+=er.getUint32(et+4)):ri.int64AsType==="string"?e=er.getBigInt64(et).toString():ri.int64AsType==="auto"?(e=er.getBigInt64(et),e>=BigInt(-2)<<BigInt(52)&&e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=er.getBigInt64(et),et+=8,e;case 212:if(e=Yt[et++],e==114)return q8(Yt[et++]&63);{let n=ko[e];if(n)return n.read?(et++,n.read(Oi())):n.noBuffer?(et++,n()):n(Yt.subarray(et,++et));throw new Error("Unknown extension "+e)}case 213:return e=Yt[et],e==114?(et++,q8(Yt[et++]&63,Yt[et++])):pf(2);case 214:return pf(4);case 215:return pf(8);case 216:return pf(16);case 217:return e=Yt[et++],Dl>=et?Tu.slice(et-Sa,(et+=e)-Sa):tre(e);case 218:return e=er.getUint16(et),et+=2,Dl>=et?Tu.slice(et-Sa,(et+=e)-Sa):nre(e);case 219:return e=er.getUint32(et),et+=4,Dl>=et?Tu.slice(et-Sa,(et+=e)-Sa):rre(e);case 220:return e=er.getUint16(et),et+=2,j8(e);case 221:return e=er.getUint32(et),et+=4,j8(e);case 222:return e=er.getUint16(et),et+=2,$8(e);case 223:return e=er.getUint32(et),et+=4,$8(e);default:if(t>=224)return t-256;if(t===void 0){let n=new Error("Unexpected end of MessagePack data");throw n.incomplete=!0,n}throw new Error("Unknown MessagePack token "+t)}}}const ere=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function r5(t,e){function n(){if(n.count++>fk){let i=t.read=new Function("r","return function(){return "+(ri.freezeData?"Object.freeze":"")+"({"+t.map(s=>s==="__proto__"?"__proto_:r()":ere.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"})}")(Oi);return t.highByte===0&&(t.read=W8(e,t.read)),i()}let r={};for(let i=0,s=t.length;i<s;i++){let o=t[i];o==="__proto__"&&(o="__proto_"),r[o]=Oi()}return ri.freezeData?Object.freeze(r):r}return n.count=0,t.highByte===0?W8(e,n):n}const W8=(t,e)=>function(){let n=Yt[et++];if(n===0)return e();let r=t<32?-(t+(n<<5)):t+(n<<5),i=rr[r]||hk()[r];if(!i)throw new Error("Record id is not defined for "+r);return i.read||(i.read=r5(i,t)),i.read()};function hk(){let t=gk(()=>(Yt=null,ri.getStructures()));return rr=ri._mergeStructures(t,rr)}var Dw=Ag,tre=Ag,nre=Ag,rre=Ag;function Ag(t){let e;if(t<16&&(e=i5(t)))return e;if(t>64&&Ow)return Ow.decode(Yt.subarray(et,et+=t));const n=et+t,r=[];for(e="";et<n;){const i=Yt[et++];if(!(i&128))r.push(i);else if((i&224)===192){const s=Yt[et++]&63;r.push((i&31)<<6|s)}else if((i&240)===224){const s=Yt[et++]&63,o=Yt[et++]&63;r.push((i&31)<<12|s<<6|o)}else if((i&248)===240){const s=Yt[et++]&63,o=Yt[et++]&63,a=Yt[et++]&63;let l=(i&7)<<18|s<<12|o<<6|a;l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|l&1023),r.push(l)}else r.push(i);r.length>=4096&&(e+=ds.apply(String,r),r.length=0)}return r.length>0&&(e+=ds.apply(String,r)),e}function j8(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=Oi();return ri.freezeData?Object.freeze(e):e}function $8(t){if(ri.mapsAsObjects){let e={};for(let n=0;n<t;n++){let r=pk();r==="__proto__"&&(r="__proto_"),e[r]=Oi()}return e}else{let e=new Map;for(let n=0;n<t;n++)e.set(Oi(),Oi());return e}}var ds=String.fromCharCode;function dk(t){let e=et,n=new Array(t);for(let r=0;r<t;r++){const i=Yt[et++];if((i&128)>0){et=e;return}n[r]=i}return ds.apply(String,n)}function i5(t){if(t<4)if(t<2){if(t===0)return"";{let e=Yt[et++];if((e&128)>1){et-=1;return}return ds(e)}}else{let e=Yt[et++],n=Yt[et++];if((e&128)>0||(n&128)>0){et-=2;return}if(t<3)return ds(e,n);let r=Yt[et++];if((r&128)>0){et-=3;return}return ds(e,n,r)}else{let e=Yt[et++],n=Yt[et++],r=Yt[et++],i=Yt[et++];if((e&128)>0||(n&128)>0||(r&128)>0||(i&128)>0){et-=4;return}if(t<6){if(t===4)return ds(e,n,r,i);{let s=Yt[et++];if((s&128)>0){et-=5;return}return ds(e,n,r,i,s)}}else if(t<8){let s=Yt[et++],o=Yt[et++];if((s&128)>0||(o&128)>0){et-=6;return}if(t<7)return ds(e,n,r,i,s,o);let a=Yt[et++];if((a&128)>0){et-=7;return}return ds(e,n,r,i,s,o,a)}else{let s=Yt[et++],o=Yt[et++],a=Yt[et++],l=Yt[et++];if((s&128)>0||(o&128)>0||(a&128)>0||(l&128)>0){et-=8;return}if(t<10){if(t===8)return ds(e,n,r,i,s,o,a,l);{let c=Yt[et++];if((c&128)>0){et-=9;return}return ds(e,n,r,i,s,o,a,l,c)}}else if(t<12){let c=Yt[et++],u=Yt[et++];if((c&128)>0||(u&128)>0){et-=10;return}if(t<11)return ds(e,n,r,i,s,o,a,l,c,u);let f=Yt[et++];if((f&128)>0){et-=11;return}return ds(e,n,r,i,s,o,a,l,c,u,f)}else{let c=Yt[et++],u=Yt[et++],f=Yt[et++],h=Yt[et++];if((c&128)>0||(u&128)>0||(f&128)>0||(h&128)>0){et-=12;return}if(t<14){if(t===12)return ds(e,n,r,i,s,o,a,l,c,u,f,h);{let d=Yt[et++];if((d&128)>0){et-=13;return}return ds(e,n,r,i,s,o,a,l,c,u,f,h,d)}}else{let d=Yt[et++],p=Yt[et++];if((d&128)>0||(p&128)>0){et-=14;return}if(t<15)return ds(e,n,r,i,s,o,a,l,c,u,f,h,d,p);let m=Yt[et++];if((m&128)>0){et-=15;return}return ds(e,n,r,i,s,o,a,l,c,u,f,h,d,p,m)}}}}}function X8(){let t=Yt[et++],e;if(t<192)e=t-160;else switch(t){case 217:e=Yt[et++];break;case 218:e=er.getUint16(et),et+=2;break;case 219:e=er.getUint32(et),et+=4;break;default:throw new Error("Expected string")}return Ag(e)}function mA(t){return ri.copyBuffers?Uint8Array.prototype.slice.call(Yt,et,et+=t):Yt.subarray(et,et+=t)}function pf(t){let e=Yt[et++];if(ko[e]){let n;return ko[e](Yt.subarray(et,n=et+=t),r=>{et=r;try{return Oi()}finally{et=n}})}else throw new Error("Unknown extension type "+e)}var Y8=new Array(4096);function pk(){let t=Yt[et++];if(t>=160&&t<192){if(t=t-160,Dl>=et)return Tu.slice(et-Sa,(et+=t)-Sa);if(!(Dl==0&&Ma<180))return Dw(t)}else return et--,Oi().toString();let e=(t<<5^(t>1?er.getUint16(et):t>0?Yt[et]:0))&4095,n=Y8[e],r=et,i=et+t-3,s,o=0;if(n&&n.bytes==t){for(;r<i;){if(s=er.getUint32(r),s!=n[o++]){r=1879048192;break}r+=4}for(i+=3;r<i;)if(s=Yt[r++],s!=n[o++]){r=1879048192;break}if(r===i)return et=r,n.string;i-=3,r=et}for(n=[],Y8[e]=n,n.bytes=t;r<i;)s=er.getUint32(r),n.push(s),r+=4;for(i+=3;r<i;)s=Yt[r++],n.push(s);let a=t<16?i5(t):dk(t);return a!=null?n.string=a:n.string=Dw(t)}const q8=(t,e)=>{let n=Oi().map(s=>s.toString()),r=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,n.highByte=e);let i=rr[t];return i&&(i.isShared||Cu)&&((rr.restoreStructures||(rr.restoreStructures=[]))[t]=i),rr[t]=n,n.read=r5(n,r),n.read()};ko[0]=()=>{};ko[0].noBuffer=!0;ko[66]=t=>{let e=t.length,n=BigInt(t[0]&128?t[0]-256:t[0]);for(let r=1;r<e;r++)n<<=8n,n+=BigInt(t[r]);return n};let ire={Error,TypeError,ReferenceError};ko[101]=()=>{let t=Oi();return(ire[t[0]]||Error)(t[1])};ko[105]=t=>{let e=er.getUint32(et-4);Pc||(Pc=new Map);let n=Yt[et],r;n>=144&&n<160||n==220||n==221?r=[]:r={};let i={target:r};Pc.set(e,i);let s=Oi();return i.used?Object.assign(r,s):(i.target=s,s)};ko[112]=t=>{let e=er.getUint32(et-4),n=Pc.get(e);return n.used=!0,n.target};ko[115]=()=>new Set(Oi());const mk=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");let sre=typeof globalThis=="object"?globalThis:window;ko[116]=t=>{let e=t[0],n=mk[e];if(!n)throw new Error("Could not find typed array for code "+e);return new sre[n](Uint8Array.prototype.slice.call(t,1).buffer)};ko[120]=()=>{let t=Oi();return new RegExp(t[0],t[1])};const ore=[];ko[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],n=et;return et+=e-t.length,ms=ore,ms=[X8(),X8()],ms.position0=0,ms.position1=0,ms.postBundlePosition=et,et=n,Oi()};ko[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function gk(t){let e=Ma,n=et,r=Sa,i=Dl,s=Tu,o=Pc,a=ms,l=new Uint8Array(Yt.slice(0,Ma)),c=rr,u=rr.slice(0,rr.length),f=ri,h=Cu,d=t();return Ma=e,et=n,Sa=r,Dl=i,Tu=s,Pc=o,ms=a,Yt=l,Cu=h,rr=c,rr.splice(0,rr.length,...u),ri=f,er=new DataView(Yt.buffer,Yt.byteOffset,Yt.byteLength),d}function Bw(){Yt=null,Pc=null,rr=null}const s5=new Array(147);for(let t=0;t<256;t++)s5[t]=+("1e"+Math.floor(45.15-t*.30103));var IE=new H1({useRecords:!1});const vk=IE.unpack;IE.unpackMultiple;IE.unpack;let are=new Float32Array(1);new Uint8Array(are.buffer,0,4);let qx;try{qx=new TextEncoder}catch{}let kw,yk;const PE=typeof Buffer<"u",$v=PE?function(t){return Buffer.allocUnsafeSlow(t)}:Uint8Array,xk=PE?Buffer:Uint8Array,K8=PE?4294967296:2144337920;let gt,qm,kr,rt=0,io,fi=null,lre;const cre=21760,ure=/[\u0080-\uFFFF]/,qh=Symbol("record-id");class fre extends H1{constructor(e){super(e),this.offset=0;let n,r,i,s,o=xk.prototype.utf8Write?function(B,N){return gt.utf8Write(B,N,4294967295)}:qx&&qx.encodeInto?function(B,N){return qx.encodeInto(B,gt.subarray(N)).written}:!1,a=this;e||(e={});let l=e&&e.sequential,c=e.structures||e.saveStructures,u=e.maxSharedStructures;if(u==null&&(u=c?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");e.structuredClone&&e.moreTypes==null&&(this.moreTypes=!0);let f=e.maxOwnStructures;f==null&&(f=c?32:64),!this.structures&&e.useRecords!=!1&&(this.structures=[]);let h=u>32||f+u>64,d=u+64,p=u+f+64;if(p>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let m=[],g=0,v=0;this.pack=this.encode=function(B,N){if(gt||(gt=new $v(8192),kr=gt.dataView||(gt.dataView=new DataView(gt.buffer,0,8192)),rt=0),io=gt.length-10,io-rt<2048?(gt=new $v(gt.length),kr=gt.dataView||(gt.dataView=new DataView(gt.buffer,0,gt.length)),io=gt.length-10,rt=0):rt=rt+7&2147483640,n=rt,N&vre&&(rt+=N&255),s=a.structuredClone?new Map:null,a.bundleStrings&&typeof B!="string"?(fi=[],fi.size=1/0):fi=null,i=a.structures,i){i.uninitialized&&(i=a._mergeStructures(a.getStructures()));let U=i.sharedLength||0;if(U>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let Q=0;Q<U;Q++){let Y=i[Q];if(!Y)continue;let ee,ne=i.transitions;for(let P=0,se=Y.length;P<se;P++){let re=Y[P];ee=ne[re],ee||(ee=ne[re]=Object.create(null)),ne=ee}ne[qh]=Q+64}this.lastNamedStructuresLength=U}l||(i.nextId=U+64)}r&&(r=!1);let $;try{a.randomAccessStructure&&B&&B.constructor&&B.constructor===Object?L(B):A(B);let U=fi;if(fi&&Z8(n,A,0),s&&s.idsToInsert){let Q=s.idsToInsert.sort((P,se)=>P.offset>se.offset?1:-1),Y=Q.length,ee=-1;for(;U&&Y>0;){let P=Q[--Y].offset+n;P<U.stringsPosition+n&&ee===-1&&(ee=0),P>U.position+n?ee>=0&&(ee+=6):(ee>=0&&(kr.setUint32(U.position+n,kr.getUint32(U.position+n)+ee),ee=-1),U=U.previous,Y++)}ee>=0&&U&&kr.setUint32(U.position+n,kr.getUint32(U.position+n)+ee),rt+=Q.length*6,rt>io&&S(rt),a.offset=rt;let ne=dre(gt.subarray(n,rt),Q);return s=null,ne}return a.offset=rt,N&mre?(gt.start=n,gt.end=rt,gt):gt.subarray(n,rt)}catch(U){throw $=U,U}finally{if(i&&(x(),r&&a.saveStructures)){let U=i.sharedLength||0,Q=gt.subarray(n,rt),Y=pre(i,a);if(!$)return a.saveStructures(Y,Y.isCompatible)===!1?a.pack(B,N):(a.lastNamedStructuresLength=U,Q)}N&gre&&(rt=n)}};const x=()=>{v<10&&v++;let B=i.sharedLength||0;if(i.length>B&&!l&&(i.length=B),g>1e4)i.transitions=null,v=0,g=0,m.length>0&&(m=[]);else if(m.length>0&&!l){for(let N=0,$=m.length;N<$;N++)m[N][qh]=0;m=[]}},y=B=>{var N=B.length;N<16?gt[rt++]=144|N:N<65536?(gt[rt++]=220,gt[rt++]=N>>8,gt[rt++]=N&255):(gt[rt++]=221,kr.setUint32(rt,N),rt+=4);for(let $=0;$<N;$++)A(B[$])},A=B=>{rt>io&&(gt=S(rt));var N=typeof B,$;if(N==="string"){let U=B.length;if(fi&&U>=4&&U<4096){if((fi.size+=U)>cre){let ne,P=(fi[0]?fi[0].length*3+fi[1].length:0)+10;rt+P>io&&(gt=S(rt+P));let se;fi.position?(se=fi,gt[rt]=200,rt+=3,gt[rt++]=98,ne=rt-n,rt+=4,Z8(n,A,0),kr.setUint16(ne+n-3,rt-n-ne)):(gt[rt++]=214,gt[rt++]=98,ne=rt-n,rt+=4),fi=["",""],fi.previous=se,fi.size=0,fi.position=ne}let ee=ure.test(B);fi[ee?0:1]+=B,gt[rt++]=193,A(ee?-U:U);return}let Q;U<32?Q=1:U<256?Q=2:U<65536?Q=3:Q=5;let Y=U*3;if(rt+Y>io&&(gt=S(rt+Y)),U<64||!o){let ee,ne,P,se=rt+Q;for(ee=0;ee<U;ee++)ne=B.charCodeAt(ee),ne<128?gt[se++]=ne:ne<2048?(gt[se++]=ne>>6|192,gt[se++]=ne&63|128):(ne&64512)===55296&&((P=B.charCodeAt(ee+1))&64512)===56320?(ne=65536+((ne&1023)<<10)+(P&1023),ee++,gt[se++]=ne>>18|240,gt[se++]=ne>>12&63|128,gt[se++]=ne>>6&63|128,gt[se++]=ne&63|128):(gt[se++]=ne>>12|224,gt[se++]=ne>>6&63|128,gt[se++]=ne&63|128);$=se-rt-Q}else $=o(B,rt+Q);$<32?gt[rt++]=160|$:$<256?(Q<2&&gt.copyWithin(rt+2,rt+1,rt+1+$),gt[rt++]=217,gt[rt++]=$):$<65536?(Q<3&&gt.copyWithin(rt+3,rt+2,rt+2+$),gt[rt++]=218,gt[rt++]=$>>8,gt[rt++]=$&255):(Q<5&&gt.copyWithin(rt+5,rt+3,rt+3+$),gt[rt++]=219,kr.setUint32(rt,$),rt+=4),rt+=$}else if(N==="number")if(B>>>0===B)B<32||B<128&&this.useRecords===!1||B<64&&!this.randomAccessStructure?gt[rt++]=B:B<256?(gt[rt++]=204,gt[rt++]=B):B<65536?(gt[rt++]=205,gt[rt++]=B>>8,gt[rt++]=B&255):(gt[rt++]=206,kr.setUint32(rt,B),rt+=4);else if(B>>0===B)B>=-32?gt[rt++]=256+B:B>=-128?(gt[rt++]=208,gt[rt++]=B+256):B>=-32768?(gt[rt++]=209,kr.setInt16(rt,B),rt+=2):(gt[rt++]=210,kr.setInt32(rt,B),rt+=4);else{let U;if((U=this.useFloat32)>0&&B<4294967296&&B>=-2147483648){gt[rt++]=202,kr.setFloat32(rt,B);let Q;if(U<4||(Q=B*s5[(gt[rt]&127)<<1|gt[rt+1]>>7])>>0===Q){rt+=4;return}else rt--}gt[rt++]=203,kr.setFloat64(rt,B),rt+=8}else if(N==="object"||N==="function")if(!B)gt[rt++]=192;else{if(s){let Q=s.get(B);if(Q){if(!Q.id){let Y=s.idsToInsert||(s.idsToInsert=[]);Q.id=Y.push(Q)}gt[rt++]=214,gt[rt++]=112,kr.setUint32(rt,Q.id),rt+=4;return}else s.set(B,{offset:rt-n})}let U=B.constructor;if(U===Object)C(B,!0);else if(U===Array)y(B);else if(U===Map)if(this.mapAsEmptyObject)gt[rt++]=128;else{$=B.size,$<16?gt[rt++]=128|$:$<65536?(gt[rt++]=222,gt[rt++]=$>>8,gt[rt++]=$&255):(gt[rt++]=223,kr.setUint32(rt,$),rt+=4);for(let[Q,Y]of B)A(Q),A(Y)}else{for(let Q=0,Y=kw.length;Q<Y;Q++){let ee=yk[Q];if(B instanceof ee){let ne=kw[Q];if(ne.write){ne.type&&(gt[rt++]=212,gt[rt++]=ne.type,gt[rt++]=0);let X=ne.write.call(this,B);X===B?Array.isArray(B)?y(B):C(B):A(X);return}let P=gt,se=kr,re=rt;gt=null;let Z;try{Z=ne.pack.call(this,B,X=>(gt=P,P=null,rt+=X,rt>io&&S(rt),{target:gt,targetView:kr,position:rt-X}),A)}finally{P&&(gt=P,kr=se,rt=re,io=gt.length-10)}Z&&(Z.length+rt>io&&S(Z.length+rt),rt=hre(Z,gt,rt,ne.type));return}}if(Array.isArray(B))y(B);else{if(B.toJSON){const Q=B.toJSON();if(Q!==B)return A(Q)}if(N==="function")return A(this.writeFunction&&this.writeFunction(B));C(B,!B.hasOwnProperty)}}}else if(N==="boolean")gt[rt++]=B?195:194;else if(N==="bigint"){if(B<BigInt(1)<<BigInt(63)&&B>=-(BigInt(1)<<BigInt(63)))gt[rt++]=211,kr.setBigInt64(rt,B);else if(B<BigInt(1)<<BigInt(64)&&B>0)gt[rt++]=207,kr.setBigUint64(rt,B);else if(this.largeBigIntToFloat)gt[rt++]=203,kr.setFloat64(rt,Number(B));else if(this.useBigIntExtension&&B<2n**1023n&&B>-(2n**1023n)){gt[rt++]=199,rt++,gt[rt++]=66;let U=[],Q;do{let Y=B&0xffn;Q=(Y&0x80n)===(B<0n?0x80n:0n),U.push(Y),B>>=8n}while(!((B===0n||B===-1n)&&Q));gt[rt-2]=U.length;for(let Y=U.length;Y>0;)gt[rt++]=Number(U[--Y]);return}else throw new RangeError(B+" was too large to fit in MessagePack 64-bit integer format, use useBigIntExtension or set largeBigIntToFloat to convert to float-64");rt+=8}else if(N==="undefined")this.encodeUndefinedAsNil?gt[rt++]=192:(gt[rt++]=212,gt[rt++]=0,gt[rt++]=0);else throw new Error("Unknown type: "+N)},T=this.variableMapSize||this.coercibleKeyAsNumber?B=>{let N=Object.keys(B),$=N.length;$<16?gt[rt++]=128|$:$<65536?(gt[rt++]=222,gt[rt++]=$>>8,gt[rt++]=$&255):(gt[rt++]=223,kr.setUint32(rt,$),rt+=4);let U;if(this.coercibleKeyAsNumber)for(let Q=0;Q<$;Q++){U=N[Q];let Y=Number(U);A(isNaN(Y)?U:Y),A(B[U])}else for(let Q=0;Q<$;Q++)A(U=N[Q]),A(B[U])}:(B,N)=>{gt[rt++]=222;let $=rt-n;rt+=2;let U=0;for(let Q in B)(N||B.hasOwnProperty(Q))&&(A(Q),A(B[Q]),U++);gt[$+++n]=U>>8,gt[$+n]=U&255},w=this.useRecords===!1?T:e.progressiveRecords&&!h?(B,N)=>{let $,U=i.transitions||(i.transitions=Object.create(null)),Q=rt++-n,Y;for(let ee in B)if(N||B.hasOwnProperty(ee)){if($=U[ee],$)U=$;else{let ne=Object.keys(B),P=U;U=i.transitions;let se=0;for(let re=0,Z=ne.length;re<Z;re++){let X=ne[re];$=U[X],$||($=U[X]=Object.create(null),se++),U=$}Q+n+1==rt?(rt--,R(U,ne,se)):O(U,ne,Q,se),Y=!0,U=P[ee]}A(B[ee])}if(!Y){let ee=U[qh];ee?gt[Q+n]=ee:O(U,Object.keys(B),Q,0)}}:(B,N)=>{let $,U=i.transitions||(i.transitions=Object.create(null)),Q=0;for(let ee in B)(N||B.hasOwnProperty(ee))&&($=U[ee],$||($=U[ee]=Object.create(null),Q++),U=$);let Y=U[qh];Y?Y>=96&&h?(gt[rt++]=((Y-=96)&31)+96,gt[rt++]=Y>>5):gt[rt++]=Y:R(U,U.__keys__||Object.keys(B),Q);for(let ee in B)(N||B.hasOwnProperty(ee))&&A(B[ee])},M=typeof this.useRecords=="function"&&this.useRecords,C=M?(B,N)=>{M(B)?w(B,N):T(B,N)}:w,S=B=>{let N;if(B>16777216){if(B-n>K8)throw new Error("Packed buffer would be larger than maximum buffer size");N=Math.min(K8,Math.round(Math.max((B-n)*(B>67108864?1.25:2),4194304)/4096)*4096)}else N=(Math.max(B-n<<2,gt.length-1)>>12)+1<<12;let $=new $v(N);return kr=$.dataView||($.dataView=new DataView($.buffer,0,N)),B=Math.min(B,gt.length),gt.copy?gt.copy($,0,n,B):$.set(gt.slice(n,B)),rt-=n,n=0,io=$.length-10,gt=$},R=(B,N,$)=>{let U=i.nextId;U||(U=64),U<d&&this.shouldShareStructure&&!this.shouldShareStructure(N)?(U=i.nextOwnId,U<p||(U=d),i.nextOwnId=U+1):(U>=p&&(U=d),i.nextId=U+1);let Q=N.highByte=U>=96&&h?U-96>>5:-1;B[qh]=U,B.__keys__=N,i[U-64]=N,U<d?(N.isShared=!0,i.sharedLength=U-63,r=!0,Q>=0?(gt[rt++]=(U&31)+96,gt[rt++]=Q):gt[rt++]=U):(Q>=0?(gt[rt++]=213,gt[rt++]=114,gt[rt++]=(U&31)+96,gt[rt++]=Q):(gt[rt++]=212,gt[rt++]=114,gt[rt++]=U),$&&(g+=v*$),m.length>=f&&(m.shift()[qh]=0),m.push(B),A(N))},O=(B,N,$,U)=>{let Q=gt,Y=rt,ee=io,ne=n;gt=qm,rt=0,n=0,gt||(qm=gt=new $v(8192)),io=gt.length-10,R(B,N,U),qm=gt;let P=rt;if(gt=Q,rt=Y,io=ee,n=ne,P>1){let se=rt+P-1;se>io&&S(se);let re=$+n;gt.copyWithin(re+P,re+1,rt),gt.set(qm.slice(0,P),re),rt=se}else gt[$+n]=qm[0]},L=(B,N)=>{let $=lre(B,gt,n,rt,i,S,(U,Q,Y)=>{if(Y)return r=!0;rt=Q;let ee=gt;return A(U),x(),ee!==gt?{position:rt,targetView:kr,target:gt}:rt},this);if($===0)return C(B,!0);rt=$}}useBuffer(e){gt=e,kr=new DataView(gt.buffer,gt.byteOffset,gt.byteLength),rt=0}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}}yk=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,ck];kw=[{pack(t,e,n){let r=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&r>=0&&r<4294967296){let{target:i,targetView:s,position:o}=e(6);i[o++]=214,i[o++]=255,s.setUint32(o,r)}else if(r>0&&r<4294967296){let{target:i,targetView:s,position:o}=e(10);i[o++]=215,i[o++]=255,s.setUint32(o,t.getMilliseconds()*4e6+(r/1e3/4294967296>>0)),s.setUint32(o+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return e(0),n(this.onInvalidDate());let{target:i,targetView:s,position:o}=e(3);i[o++]=212,i[o++]=255,i[o++]=255}else{let{target:i,targetView:s,position:o}=e(15);i[o++]=199,i[o++]=12,i[o++]=255,s.setUint32(o,t.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(r)))}}},{pack(t,e,n){if(this.setAsEmptyObject)return e(0),n({});let r=Array.from(t),{target:i,position:s}=e(this.moreTypes?3:0);this.moreTypes&&(i[s++]=212,i[s++]=115,i[s++]=0),n(r)}},{pack(t,e,n){let{target:r,position:i}=e(this.moreTypes?3:0);this.moreTypes&&(r[i++]=212,r[i++]=101,r[i++]=0),n([t.name,t.message])}},{pack(t,e,n){let{target:r,position:i}=e(this.moreTypes?3:0);this.moreTypes&&(r[i++]=212,r[i++]=120,r[i++]=0),n([t.source,t.flags])}},{pack(t,e){this.moreTypes?J8(t,16,e):Q8(PE?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let n=t.constructor;n!==xk&&this.moreTypes?J8(t,mk.indexOf(n.name),e):Q8(t,e)}},{pack(t,e){let{target:n,position:r}=e(1);n[r]=193}}];function J8(t,e,n,r){let i=t.byteLength;if(i+1<256){var{target:s,position:o}=n(4+i);s[o++]=199,s[o++]=i+1}else if(i+1<65536){var{target:s,position:o}=n(5+i);s[o++]=200,s[o++]=i+1>>8,s[o++]=i+1&255}else{var{target:s,position:o,targetView:a}=n(7+i);s[o++]=201,a.setUint32(o,i+1),o+=4}s[o++]=116,s[o++]=e,s.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o)}function Q8(t,e){let n=t.byteLength;var r,i;if(n<256){var{target:r,position:i}=e(n+2);r[i++]=196,r[i++]=n}else if(n<65536){var{target:r,position:i}=e(n+3);r[i++]=197,r[i++]=n>>8,r[i++]=n&255}else{var{target:r,position:i,targetView:s}=e(n+5);r[i++]=198,s.setUint32(i,n),i+=4}r.set(t,i)}function hre(t,e,n,r){let i=t.length;switch(i){case 1:e[n++]=212;break;case 2:e[n++]=213;break;case 4:e[n++]=214;break;case 8:e[n++]=215;break;case 16:e[n++]=216;break;default:i<256?(e[n++]=199,e[n++]=i):i<65536?(e[n++]=200,e[n++]=i>>8,e[n++]=i&255):(e[n++]=201,e[n++]=i>>24,e[n++]=i>>16&255,e[n++]=i>>8&255,e[n++]=i&255)}return e[n++]=r,e.set(t,n),n+=i,n}function dre(t,e){let n,r=e.length*6,i=t.length-r;for(;n=e.pop();){let s=n.offset,o=n.id;t.copyWithin(s+r,s,i),r-=6;let a=s+r;t[a++]=214,t[a++]=105,t[a++]=o>>24,t[a++]=o>>16&255,t[a++]=o>>8&255,t[a++]=o&255,i=s}return t}function Z8(t,e,n){if(fi.length>0){kr.setUint32(fi.position+t,rt+n-fi.position-t),fi.stringsPosition=rt-t;let r=fi;fi=null,e(r[0]),e(r[1])}}function pre(t,e){return t.isCompatible=n=>{let r=!n||(e.lastNamedStructuresLength||0)===n.length;return r||e._mergeStructures(n),r},t}let Ek=new fre({useRecords:!1});const _k=Ek.pack;Ek.pack;const mre=512,gre=1024,vre=2048,yre=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function xre(t){return yre.test(t)}function Fw(){var t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.split(/[:\/]/g).pop().toLowerCase()}Fw.valid=xre;class eR{constructor(){i9(this,"reducers"),i9(this,"subscribers"),this.reducers={},this.subscribers={}}addReducer(e,n,r){const i=r||Fw();return this.reducers[e]||(this.reducers[e]={}),this.reducers[e][i]=n,()=>{delete this.reducers[e][i]}}subscribe(e,n,r){const i=r||Fw();return this.subscribers[e]||(this.subscribers[e]={}),this.subscribers[e][i]=n,()=>{delete this.subscribers[e][i]}}publish(e){const n=e.etype,r=this.reducers[n]||{};for(const o in r){const a=this.reducers[n][o];e=a(e)}const i=this.subscribers[n]||{};for(const o in i){const a=this.subscribers[n][o];setTimeout(()=>{a(e)},0)}const s=this.subscribers["*"]||{};for(const o in s){const a=s[o];setTimeout(()=>{a(e)},0)}return e}}const Ur=E.createContext(void 0),tR=8012;function Ere(t){return t||(window.location.hostname=="vuer.ai"?`ws://localhost:${tR}`:window.location.protocol=="https:"?`wss://${window.location.hostname}`:`ws://${window.location.hostname}:${window.location.port||tR}`)}function _re({onMessage:t,children:e}){const[n,r]=Nw(!1),[i,s]=E.useState(!0),[o,a]=E.useState(!0),[,,l]=Nw(!0),c=E.useMemo(()=>$u.parse(Ic.location.search),[]),u=E.useMemo(()=>new eR,[]),f=E.useMemo(()=>new eR,[]),{socketURI:h}=Mr("Connection",{socketURI:{value:Ere(c.ws),order:0,label:"Socket URI"},reconnect:_g(()=>{s(!1),a(!1),setTimeout(()=>{s(!0)},100)},{disabled:!o,label:n?"Reconnect":"Disconnected",order:-10})}),d=E.useCallback(({data:T})=>{T!=null&&T.arrayBuffer&&T.arrayBuffer().then(w=>{const M=vk(w);typeof t=="function"&&t(M),f.publish(M)})},[h]);function p(){A({etype:"INIT"}),r(!0),a(!0)}function m(){r(!1),a(!1)}function g(){r(!1),a(!1)}function v(){a(!0)}const{sendMessage:x,readyState:y}=Kne(h,{onOpen:p,onError:g,onClose:m,onMessage:d,onReconnectStop:v,share:!0,retryOnError:!0,shouldReconnect(){return l.current},reconnectAttempts:c.reconnect?parseInt(c.reconnect):3,reconnectInterval:c.interval?parseInt(c.interval):3e3},!!h&&i),A=E.useCallback(T=>{if(!y)return;const w=_k(T);T&&x(w)},[y]);return E.useEffect(()=>u.subscribe("*",A),[A,u]),ce.jsx(Ur.Provider,{value:{sendMsg:A,uplink:u,downlink:f},children:e})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const yl="159",Lf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Nf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},bk=0,Uw=1,Ak=2,bre=3,Tk=0,LE=1,u1=2,il=3,es=0,Ti=1,gr=2,Are=2,Da=0,Vl=1,D3=2,zw=3,Hw=4,NE=5,Au=100,wk=101,Sk=102,Gw=103,Vw=104,Ck=200,OE=201,Mk=202,Rk=203,G1=204,B3=205,Ik=206,Pk=207,Lk=208,Nk=209,Ok=210,Dk=211,Bk=212,kk=213,Fk=214,Uk=0,zk=1,Hk=2,V1=3,Gk=4,Vk=5,Wk=6,jk=7,Tg=0,$k=1,Xk=2,fl=0,Yk=1,qk=2,Kk=3,o5=4,Jk=5,Ww="attached",Qk="detached",zu=300,Xl=301,Hu=302,Rp=303,W1=304,Kp=306,Rr=1e3,Er=1001,uh=1002,Ln=1003,Ip=1004,Tre=1004,Zf=1005,wre=1005,Cn=1006,wg=1007,Sre=1007,js=1008,jw=1008,Cs=1009,j1=1010,DE=1011,Jp=1012,eh=1013,Ws=1014,fr=1015,Xr=1016,a5=1017,l5=1018,Mu=1020,Zk=1021,Sr=1023,eF=1024,tF=1025,Lc=1026,fh=1027,th=1028,BE=1029,c5=1030,Sg=1031,hh=1033,Kx=33776,Jx=33777,Qx=33778,Zx=33779,$w=35840,Xw=35841,Yw=35842,qw=35843,u5=36196,Kw=37492,Jw=37496,Qw=37808,Zw=37809,eS=37810,tS=37811,nS=37812,rS=37813,iS=37814,sS=37815,oS=37816,aS=37817,lS=37818,cS=37819,uS=37820,fS=37821,e3=36492,hS=36494,dS=36495,nF=36283,pS=36284,mS=36285,gS=36286,rF=2200,iF=2201,sF=2202,dh=2300,zc=2301,t3=2302,zf=2400,Hf=2401,$1=2402,kE=2500,f5=2501,h5=0,Cg=1,ph=2,d5=3e3,Ru=3001,oF=3200,p5=3201,Xc=0,aF=1,mi="",ii="srgb",sa="srgb-linear",FE="display-p3",Mg="display-p3-linear",X1="linear",zr="srgb",Y1="rec709",q1="p3",Cre=0,Of=7680,n3=7681,Mre=7682,Rre=7683,Ire=34055,Pre=34056,Lre=5386,Nre=512,Ore=513,Dre=514,Bre=515,kre=516,Fre=517,Ure=518,k3=519,lF=512,cF=513,uF=514,m5=515,fF=516,hF=517,dF=518,pF=519,K1=35044,Zi=35048,zre=35040,Hre=35045,Gre=35049,Vre=35041,Wre=35046,jre=35050,$re=35042,Xre="100",vS="300 es",F3=1035,cl=2e3,Pp=2001;class Jl{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Os=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let nR=1234567;const nh=Math.PI/180,Lp=180/Math.PI;function ia(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Os[t&255]+Os[t>>8&255]+Os[t>>16&255]+Os[t>>24&255]+"-"+Os[e&255]+Os[e>>8&255]+"-"+Os[e>>16&15|64]+Os[e>>24&255]+"-"+Os[n&63|128]+Os[n>>8&255]+"-"+Os[n>>16&255]+Os[n>>24&255]+Os[r&255]+Os[r>>8&255]+Os[r>>16&255]+Os[r>>24&255]).toLowerCase()}function Ai(t,e,n){return Math.max(e,Math.min(n,t))}function g5(t,e){return(t%e+e)%e}function Yre(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function qre(t,e,n){return t!==e?(n-t)/(e-t):0}function f1(t,e,n){return(1-n)*t+n*e}function Kre(t,e,n,r){return f1(t,e,1-Math.exp(-n*r))}function Jre(t,e=1){return e-Math.abs(g5(t,e*2)-e)}function Qre(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Zre(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function eie(t,e){return t+Math.floor(Math.random()*(e-t+1))}function tie(t,e){return t+Math.random()*(e-t)}function nie(t){return t*(.5-Math.random())}function rie(t){t!==void 0&&(nR=t);let e=nR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function iie(t){return t*nh}function sie(t){return t*Lp}function yS(t){return(t&t-1)===0&&t!==0}function oie(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function U3(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function aie(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+r)/2),u=o((e+r)/2),f=s((e-r)/2),h=o((e-r)/2),d=s((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":t.set(a*u,l*f,l*h,a*c);break;case"YZY":t.set(l*h,a*u,l*f,a*c);break;case"ZXZ":t.set(l*f,l*h,a*u,a*c);break;case"XZX":t.set(a*u,l*p,l*d,a*c);break;case"YXY":t.set(l*d,a*u,l*p,a*c);break;case"ZYZ":t.set(l*p,l*d,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Lo(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Wn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const si={DEG2RAD:nh,RAD2DEG:Lp,generateUUID:ia,clamp:Ai,euclideanModulo:g5,mapLinear:Yre,inverseLerp:qre,lerp:f1,damp:Kre,pingpong:Jre,smoothstep:Qre,smootherstep:Zre,randInt:eie,randFloat:tie,randFloatSpread:nie,seededRandom:rie,degToRad:iie,radToDeg:sie,isPowerOfTwo:yS,ceilPowerOfTwo:oie,floorPowerOfTwo:U3,setQuaternionFromProperEuler:aie,normalize:Wn,denormalize:Lo};class qe{constructor(e=0,n=0){qe.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ai(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Pn{constructor(e,n,r,i,s,o,a,l,c){Pn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c)}set(e,n,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],f=r[7],h=r[2],d=r[5],p=r[8],m=i[0],g=i[3],v=i[6],x=i[1],y=i[4],A=i[7],T=i[2],w=i[5],M=i[8];return s[0]=o*m+a*x+l*T,s[3]=o*g+a*y+l*w,s[6]=o*v+a*A+l*M,s[1]=c*m+u*x+f*T,s[4]=c*g+u*y+f*w,s[7]=c*v+u*A+f*M,s[2]=h*m+d*x+p*T,s[5]=h*g+d*y+p*w,s[8]=h*v+d*A+p*M,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,h=a*l-u*s,d=c*s-o*l,p=n*f+r*h+i*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=f*m,e[1]=(i*c-u*r)*m,e[2]=(a*r-i*o)*m,e[3]=h*m,e[4]=(u*n-i*l)*m,e[5]=(i*s-a*n)*m,e[6]=d*m,e[7]=(r*l-c*n)*m,e[8]=(o*n-r*s)*m,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(gA.makeScale(e,n)),this}rotate(e){return this.premultiply(gA.makeRotation(-e)),this}translate(e,n){return this.premultiply(gA.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const gA=new Pn;function mF(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const lie={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function op(t,e){return new lie[t](e)}function J1(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function gF(){const t=J1("canvas");return t.style.display="block",t}const rR={};function h1(t){t in rR||(rR[t]=!0,console.warn(t))}const iR=new Pn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),sR=new Pn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Xv={[sa]:{transfer:X1,primaries:Y1,toReference:t=>t,fromReference:t=>t},[ii]:{transfer:zr,primaries:Y1,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[Mg]:{transfer:X1,primaries:q1,toReference:t=>t.applyMatrix3(sR),fromReference:t=>t.applyMatrix3(iR)},[FE]:{transfer:zr,primaries:q1,toReference:t=>t.convertSRGBToLinear().applyMatrix3(sR),fromReference:t=>t.applyMatrix3(iR).convertLinearToSRGB()}},cie=new Set([sa,Mg]),wr={enabled:!0,_workingColorSpace:sa,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!cie.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=Xv[e].toReference,i=Xv[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return Xv[t].primaries},getTransfer:function(t){return t===mi?X1:Xv[t].transfer}};function _p(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function vA(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Kh;class v5{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Kh===void 0&&(Kh=J1("canvas")),Kh.width=e.width,Kh.height=e.height;const r=Kh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Kh}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=J1("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=_p(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(_p(n[r]/255)*255):n[r]=_p(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let uie=0;class Gf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:uie++}),this.uuid=ia(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(yA(i[o].image)):s.push(yA(i[o]))}else s=yA(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function yA(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?v5.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let fie=0;class Vn extends Jl{constructor(e=Vn.DEFAULT_IMAGE,n=Vn.DEFAULT_MAPPING,r=Er,i=Er,s=Cn,o=js,a=Sr,l=Cs,c=Vn.DEFAULT_ANISOTROPY,u=mi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:fie++}),this.uuid=ia(),this.name="",this.source=new Gf(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new qe(0,0),this.repeat=new qe(1,1),this.center=new qe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(h1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Ru?ii:mi),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==zu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Rr:e.x=e.x-Math.floor(e.x);break;case Er:e.x=e.x<0?0:1;break;case uh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Rr:e.y=e.y-Math.floor(e.y);break;case Er:e.y=e.y<0?0:1;break;case uh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return h1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ii?Ru:d5}set encoding(e){h1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ru?ii:mi}}Vn.DEFAULT_IMAGE=null;Vn.DEFAULT_MAPPING=zu;Vn.DEFAULT_ANISOTROPY=1;class Xn{constructor(e=0,n=0,r=0,i=1){Xn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],d=l[5],p=l[9],m=l[2],g=l[6],v=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+m)<.1&&Math.abs(p+g)<.1&&Math.abs(c+d+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const y=(c+1)/2,A=(d+1)/2,T=(v+1)/2,w=(u+h)/4,M=(f+m)/4,C=(p+g)/4;return y>A&&y>T?y<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(y),i=w/r,s=M/r):A>T?A<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(A),r=w/i,s=C/i):T<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(T),r=M/s,i=C/s),this.set(r,i,s,n),this}let x=Math.sqrt((g-p)*(g-p)+(f-m)*(f-m)+(h-u)*(h-u));return Math.abs(x)<.001&&(x=1),this.x=(g-p)/x,this.y=(f-m)/x,this.z=(h-u)/x,this.w=Math.acos((c+d+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class vF extends Jl{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Xn(0,0,e,n),this.scissorTest=!1,this.viewport=new Xn(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(h1("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Ru?ii:mi),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Cn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Vn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Gf(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class pr extends vF{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class UE extends Vn{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Ln,this.minFilter=Ln,this.wrapR=Er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class hie extends pr{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new UE(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class y5 extends Vn{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Ln,this.minFilter=Ln,this.wrapR=Er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class die extends pr{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new y5(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class pie extends pr{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class kn{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],f=r[i+3];const h=s[o+0],d=s[o+1],p=s[o+2],m=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f;return}if(a===1){e[n+0]=h,e[n+1]=d,e[n+2]=p,e[n+3]=m;return}if(f!==m||l!==h||c!==d||u!==p){let g=1-a;const v=l*h+c*d+u*p+f*m,x=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){const T=Math.sqrt(y),w=Math.atan2(T,v*x);g=Math.sin(g*w)/T,a=Math.sin(a*w)/T}const A=a*x;if(l=l*g+h*A,c=c*g+d*A,u=u*g+p*A,f=f*g+m*A,g===1-a){const T=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=T,c*=T,u*=T,f*=T}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],f=s[o],h=s[o+1],d=s[o+2],p=s[o+3];return e[n]=a*p+u*f+l*d-c*h,e[n+1]=l*p+u*h+c*f-a*d,e[n+2]=c*p+u*d+a*h-l*f,e[n+3]=u*p-a*f-l*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),f=a(s/2),h=l(r/2),d=l(i/2),p=l(s/2);switch(o){case"XYZ":this._x=h*u*f+c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f-h*d*p;break;case"YXZ":this._x=h*u*f+c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f+h*d*p;break;case"ZXY":this._x=h*u*f-c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f-h*d*p;break;case"ZYX":this._x=h*u*f-c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f+h*d*p;break;case"YZX":this._x=h*u*f+c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f-h*d*p;break;case"XZY":this._x=h*u*f-c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],f=n[10],h=r+a+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-l)*d,this._y=(s-c)*d,this._z=(o-i)*d}else if(r>a&&r>f){const d=2*Math.sqrt(1+r-a-f);this._w=(u-l)/d,this._x=.25*d,this._y=(i+o)/d,this._z=(s+c)/d}else if(a>f){const d=2*Math.sqrt(1+a-r-f);this._w=(s-c)/d,this._x=(i+o)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+f-r-a);this._w=(o-i)/d,this._x=(s+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ai(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-n;return this._w=d*o+n*this._w,this._x=d*r+n*this._x,this._y=d*i+n*this._y,this._z=d*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=o*f+this._w*h,this._x=r*f+this._x*h,this._y=i*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class J{constructor(e=0,n=0,r=0){J.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(oR.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(oR.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*n-s*i),f=2*(s*r-o*n);return this.x=n+l*c+o*f-a*u,this.y=r+l*u+a*c-s*f,this.z=i+l*f+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return xA.copy(this).projectOnVector(e),this.sub(xA)}reflect(e){return this.sub(xA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ai(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const xA=new J,oR=new kn;class Yn{constructor(e=new J(1/0,1/0,1/0),n=new J(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Ya.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Ya.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Ya.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Ya):Ya.fromBufferAttribute(s,o),Ya.applyMatrix4(e.matrixWorld),this.expandByPoint(Ya);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Yv.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Yv.copy(r.boundingBox)),Yv.applyMatrix4(e.matrixWorld),this.union(Yv)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ya),Ya.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Km),qv.subVectors(this.max,Km),Jh.subVectors(e.a,Km),Qh.subVectors(e.b,Km),Zh.subVectors(e.c,Km),su.subVectors(Qh,Jh),ou.subVectors(Zh,Qh),mf.subVectors(Jh,Zh);let n=[0,-su.z,su.y,0,-ou.z,ou.y,0,-mf.z,mf.y,su.z,0,-su.x,ou.z,0,-ou.x,mf.z,0,-mf.x,-su.y,su.x,0,-ou.y,ou.x,0,-mf.y,mf.x,0];return!EA(n,Jh,Qh,Zh,qv)||(n=[1,0,0,0,1,0,0,0,1],!EA(n,Jh,Qh,Zh,qv))?!1:(Kv.crossVectors(su,ou),n=[Kv.x,Kv.y,Kv.z],EA(n,Jh,Qh,Zh,qv))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ya).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ya).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ac[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ac[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ac[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ac[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ac[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ac[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ac[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ac[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ac),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ac=[new J,new J,new J,new J,new J,new J,new J,new J],Ya=new J,Yv=new Yn,Jh=new J,Qh=new J,Zh=new J,su=new J,ou=new J,mf=new J,Km=new J,qv=new J,Kv=new J,gf=new J;function EA(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){gf.fromArray(t,s);const a=i.x*Math.abs(gf.x)+i.y*Math.abs(gf.y)+i.z*Math.abs(gf.z),l=e.dot(gf),c=n.dot(gf),u=r.dot(gf);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const mie=new Yn,Jm=new J,_A=new J;let Fr=class{constructor(e=new J,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):mie.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Jm.subVectors(e,this.center);const n=Jm.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Jm,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(_A.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Jm.copy(e.center).add(_A)),this.expandByPoint(Jm.copy(e.center).sub(_A))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const lc=new J,bA=new J,Jv=new J,au=new J,AA=new J,Qv=new J,TA=new J;let xl=class{constructor(e=new J,n=new J(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,lc)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=lc.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(lc.copy(this.origin).addScaledVector(this.direction,n),lc.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){bA.copy(e).add(n).multiplyScalar(.5),Jv.copy(n).sub(e).normalize(),au.copy(this.origin).sub(bA);const s=e.distanceTo(n)*.5,o=-this.direction.dot(Jv),a=au.dot(this.direction),l=-au.dot(Jv),c=au.lengthSq(),u=Math.abs(1-o*o);let f,h,d,p;if(u>0)if(f=o*l-a,h=o*a-l,p=s*u,f>=0)if(h>=-p)if(h<=p){const m=1/u;f*=m,h*=m,d=f*(f+o*h+2*a)+h*(o*f+h+2*l)+c}else h=s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;else h=-s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;else h<=-p?(f=Math.max(0,-(-o*s+a)),h=f>0?-s:Math.min(Math.max(-s,-l),s),d=-f*f+h*(h+2*l)+c):h<=p?(f=0,h=Math.min(Math.max(-s,-l),s),d=h*(h+2*l)+c):(f=Math.max(0,-(o*s+a)),h=f>0?s:Math.min(Math.max(-s,-l),s),d=-f*f+h*(h+2*l)+c);else h=o>0?-s:s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(bA).addScaledVector(Jv,h),d}intersectSphere(e,n){lc.subVectors(e.center,this.origin);const r=lc.dot(this.direction),i=lc.dot(lc)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,lc)!==null}intersectTriangle(e,n,r,i,s){AA.subVectors(n,e),Qv.subVectors(r,e),TA.crossVectors(AA,Qv);let o=this.direction.dot(TA),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;au.subVectors(this.origin,e);const l=a*this.direction.dot(Qv.crossVectors(au,Qv));if(l<0)return null;const c=a*this.direction.dot(AA.cross(au));if(c<0||l+c>o)return null;const u=-a*au.dot(TA);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class yt{constructor(e,n,r,i,s,o,a,l,c,u,f,h,d,p,m,g){yt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c,u,f,h,d,p,m,g)}set(e,n,r,i,s,o,a,l,c,u,f,h,d,p,m,g){const v=this.elements;return v[0]=e,v[4]=n,v[8]=r,v[12]=i,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=f,v[14]=h,v[3]=d,v[7]=p,v[11]=m,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new yt().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/ed.setFromMatrixColumn(e,0).length(),s=1/ed.setFromMatrixColumn(e,1).length(),o=1/ed.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=o*u,d=o*f,p=a*u,m=a*f;n[0]=l*u,n[4]=-l*f,n[8]=c,n[1]=d+p*c,n[5]=h-m*c,n[9]=-a*l,n[2]=m-h*c,n[6]=p+d*c,n[10]=o*l}else if(e.order==="YXZ"){const h=l*u,d=l*f,p=c*u,m=c*f;n[0]=h+m*a,n[4]=p*a-d,n[8]=o*c,n[1]=o*f,n[5]=o*u,n[9]=-a,n[2]=d*a-p,n[6]=m+h*a,n[10]=o*l}else if(e.order==="ZXY"){const h=l*u,d=l*f,p=c*u,m=c*f;n[0]=h-m*a,n[4]=-o*f,n[8]=p+d*a,n[1]=d+p*a,n[5]=o*u,n[9]=m-h*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const h=o*u,d=o*f,p=a*u,m=a*f;n[0]=l*u,n[4]=p*c-d,n[8]=h*c+m,n[1]=l*f,n[5]=m*c+h,n[9]=d*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const h=o*l,d=o*c,p=a*l,m=a*c;n[0]=l*u,n[4]=m-h*f,n[8]=p*f+d,n[1]=f,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=d*f+p,n[10]=h-m*f}else if(e.order==="XZY"){const h=o*l,d=o*c,p=a*l,m=a*c;n[0]=l*u,n[4]=-f,n[8]=c*u,n[1]=h*f+m,n[5]=o*u,n[9]=d*f-p,n[2]=p*f-d,n[6]=a*u,n[10]=m*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(gie,e,vie)}lookAt(e,n,r){const i=this.elements;return jo.subVectors(e,n),jo.lengthSq()===0&&(jo.z=1),jo.normalize(),lu.crossVectors(r,jo),lu.lengthSq()===0&&(Math.abs(r.z)===1?jo.x+=1e-4:jo.z+=1e-4,jo.normalize(),lu.crossVectors(r,jo)),lu.normalize(),Zv.crossVectors(jo,lu),i[0]=lu.x,i[4]=Zv.x,i[8]=jo.x,i[1]=lu.y,i[5]=Zv.y,i[9]=jo.y,i[2]=lu.z,i[6]=Zv.z,i[10]=jo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],f=r[5],h=r[9],d=r[13],p=r[2],m=r[6],g=r[10],v=r[14],x=r[3],y=r[7],A=r[11],T=r[15],w=i[0],M=i[4],C=i[8],S=i[12],R=i[1],O=i[5],L=i[9],B=i[13],N=i[2],$=i[6],U=i[10],Q=i[14],Y=i[3],ee=i[7],ne=i[11],P=i[15];return s[0]=o*w+a*R+l*N+c*Y,s[4]=o*M+a*O+l*$+c*ee,s[8]=o*C+a*L+l*U+c*ne,s[12]=o*S+a*B+l*Q+c*P,s[1]=u*w+f*R+h*N+d*Y,s[5]=u*M+f*O+h*$+d*ee,s[9]=u*C+f*L+h*U+d*ne,s[13]=u*S+f*B+h*Q+d*P,s[2]=p*w+m*R+g*N+v*Y,s[6]=p*M+m*O+g*$+v*ee,s[10]=p*C+m*L+g*U+v*ne,s[14]=p*S+m*B+g*Q+v*P,s[3]=x*w+y*R+A*N+T*Y,s[7]=x*M+y*O+A*$+T*ee,s[11]=x*C+y*L+A*U+T*ne,s[15]=x*S+y*B+A*Q+T*P,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],d=e[14],p=e[3],m=e[7],g=e[11],v=e[15];return p*(+s*l*f-i*c*f-s*a*h+r*c*h+i*a*d-r*l*d)+m*(+n*l*d-n*c*h+s*o*h-i*o*d+i*c*u-s*l*u)+g*(+n*c*f-n*a*d-s*o*f+r*o*d+s*a*u-r*c*u)+v*(-i*a*u-n*l*f+n*a*h+i*o*f-r*o*h+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],v=e[15],x=f*g*c-m*h*c+m*l*d-a*g*d-f*l*v+a*h*v,y=p*h*c-u*g*c-p*l*d+o*g*d+u*l*v-o*h*v,A=u*m*c-p*f*c+p*a*d-o*m*d-u*a*v+o*f*v,T=p*f*l-u*m*l-p*a*h+o*m*h+u*a*g-o*f*g,w=n*x+r*y+i*A+s*T;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/w;return e[0]=x*M,e[1]=(m*h*s-f*g*s-m*i*d+r*g*d+f*i*v-r*h*v)*M,e[2]=(a*g*s-m*l*s+m*i*c-r*g*c-a*i*v+r*l*v)*M,e[3]=(f*l*s-a*h*s-f*i*c+r*h*c+a*i*d-r*l*d)*M,e[4]=y*M,e[5]=(u*g*s-p*h*s+p*i*d-n*g*d-u*i*v+n*h*v)*M,e[6]=(p*l*s-o*g*s-p*i*c+n*g*c+o*i*v-n*l*v)*M,e[7]=(o*h*s-u*l*s+u*i*c-n*h*c-o*i*d+n*l*d)*M,e[8]=A*M,e[9]=(p*f*s-u*m*s-p*r*d+n*m*d+u*r*v-n*f*v)*M,e[10]=(o*m*s-p*a*s+p*r*c-n*m*c-o*r*v+n*a*v)*M,e[11]=(u*a*s-o*f*s-u*r*c+n*f*c+o*r*d-n*a*d)*M,e[12]=T*M,e[13]=(u*m*i-p*f*i+p*r*h-n*m*h-u*r*g+n*f*g)*M,e[14]=(p*a*i-o*m*i-p*r*l+n*m*l+o*r*g-n*a*g)*M,e[15]=(o*f*i-u*a*i+u*r*l-n*f*l-o*r*h+n*a*h)*M,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,f=a+a,h=s*c,d=s*u,p=s*f,m=o*u,g=o*f,v=a*f,x=l*c,y=l*u,A=l*f,T=r.x,w=r.y,M=r.z;return i[0]=(1-(m+v))*T,i[1]=(d+A)*T,i[2]=(p-y)*T,i[3]=0,i[4]=(d-A)*w,i[5]=(1-(h+v))*w,i[6]=(g+x)*w,i[7]=0,i[8]=(p+y)*M,i[9]=(g-x)*M,i[10]=(1-(h+m))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=ed.set(i[0],i[1],i[2]).length();const o=ed.set(i[4],i[5],i[6]).length(),a=ed.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],qa.copy(this);const c=1/s,u=1/o,f=1/a;return qa.elements[0]*=c,qa.elements[1]*=c,qa.elements[2]*=c,qa.elements[4]*=u,qa.elements[5]*=u,qa.elements[6]*=u,qa.elements[8]*=f,qa.elements[9]*=f,qa.elements[10]*=f,n.setFromRotationMatrix(qa),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o,a=cl){const l=this.elements,c=2*s/(n-e),u=2*s/(r-i),f=(n+e)/(n-e),h=(r+i)/(r-i);let d,p;if(a===cl)d=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===Pp)d=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,o,a=cl){const l=this.elements,c=1/(n-e),u=1/(r-i),f=1/(o-s),h=(n+e)*c,d=(r+i)*u;let p,m;if(a===cl)p=(o+s)*f,m=-2*f;else if(a===Pp)p=s*f,m=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=m,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const ed=new J,qa=new yt,gie=new J(0,0,0),vie=new J(1,1,1),lu=new J,Zv=new J,jo=new J,aR=new yt,lR=new kn;class wi{constructor(e=0,n=0,r=0,i=wi.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],f=i[2],h=i[6],d=i[10];switch(n){case"XYZ":this._y=Math.asin(Ai(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ai(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ai(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ai(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Ai(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Ai(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return aR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(aR,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return lR.setFromEuler(this),this.setFromQuaternion(lR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}wi.DEFAULT_ORDER="XYZ";class rh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let yie=0;const cR=new J,td=new kn,cc=new yt,ey=new J,Qm=new J,xie=new J,Eie=new kn,uR=new J(1,0,0),fR=new J(0,1,0),hR=new J(0,0,1),_ie={type:"added"},bie={type:"removed"};class hn extends Jl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:yie++}),this.uuid=ia(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hn.DEFAULT_UP.clone();const e=new J,n=new wi,r=new kn,i=new J(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new yt},normalMatrix:{value:new Pn}}),this.matrix=new yt,this.matrixWorld=new yt,this.matrixAutoUpdate=hn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new rh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return td.setFromAxisAngle(e,n),this.quaternion.multiply(td),this}rotateOnWorldAxis(e,n){return td.setFromAxisAngle(e,n),this.quaternion.premultiply(td),this}rotateX(e){return this.rotateOnAxis(uR,e)}rotateY(e){return this.rotateOnAxis(fR,e)}rotateZ(e){return this.rotateOnAxis(hR,e)}translateOnAxis(e,n){return cR.copy(e).applyQuaternion(this.quaternion),this.position.add(cR.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(uR,e)}translateY(e){return this.translateOnAxis(fR,e)}translateZ(e){return this.translateOnAxis(hR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(cc.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?ey.copy(e):ey.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Qm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?cc.lookAt(Qm,ey,this.up):cc.lookAt(ey,Qm,this.up),this.quaternion.setFromRotationMatrix(cc),i&&(cc.extractRotation(i.matrixWorld),td.setFromRotationMatrix(cc),this.quaternion.premultiply(td.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(_ie)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(bie)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),cc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),cc.multiply(e.parent.matrixWorld)),e.applyMatrix4(cc),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qm,e,xie),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qm,Eie,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),h=o(e.skeletons),d=o(e.animations),p=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),d.length>0&&(r.animations=d),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}hn.DEFAULT_UP=new J(0,1,0);hn.DEFAULT_MATRIX_AUTO_UPDATE=!0;hn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ka=new J,uc=new J,wA=new J,fc=new J,nd=new J,rd=new J,dR=new J,SA=new J,CA=new J,MA=new J;let ty=!1;class Xi{constructor(e=new J,n=new J,r=new J){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Ka.subVectors(e,n),i.cross(Ka);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){Ka.subVectors(i,n),uc.subVectors(r,n),wA.subVectors(e,n);const o=Ka.dot(Ka),a=Ka.dot(uc),l=Ka.dot(wA),c=uc.dot(uc),u=uc.dot(wA),f=o*c-a*a;if(f===0)return s.set(-2,-1,-1);const h=1/f,d=(c*l-a*u)*h,p=(o*u-a*l)*h;return s.set(1-d-p,p,d)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,fc),fc.x>=0&&fc.y>=0&&fc.x+fc.y<=1}static getUV(e,n,r,i,s,o,a,l){return ty===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ty=!0),this.getInterpolation(e,n,r,i,s,o,a,l)}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,fc),l.setScalar(0),l.addScaledVector(s,fc.x),l.addScaledVector(o,fc.y),l.addScaledVector(a,fc.z),l}static isFrontFacing(e,n,r,i){return Ka.subVectors(r,n),uc.subVectors(e,n),Ka.cross(uc).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ka.subVectors(this.c,this.b),uc.subVectors(this.a,this.b),Ka.cross(uc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Xi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Xi.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return ty===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ty=!0),Xi.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}getInterpolation(e,n,r,i,s){return Xi.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return Xi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Xi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;nd.subVectors(i,r),rd.subVectors(s,r),SA.subVectors(e,r);const l=nd.dot(SA),c=rd.dot(SA);if(l<=0&&c<=0)return n.copy(r);CA.subVectors(e,i);const u=nd.dot(CA),f=rd.dot(CA);if(u>=0&&f<=u)return n.copy(i);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(r).addScaledVector(nd,o);MA.subVectors(e,s);const d=nd.dot(MA),p=rd.dot(MA);if(p>=0&&d<=p)return n.copy(s);const m=d*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(r).addScaledVector(rd,a);const g=u*p-d*f;if(g<=0&&f-u>=0&&d-p>=0)return dR.subVectors(s,i),a=(f-u)/(f-u+(d-p)),n.copy(i).addScaledVector(dR,a);const v=1/(g+m+h);return o=m*v,a=h*v,n.copy(r).addScaledVector(nd,o).addScaledVector(rd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const yF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cu={h:0,s:0,l:0},ny={h:0,s:0,l:0};function RA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class bt{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ii){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,wr.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=wr.workingColorSpace){return this.r=e,this.g=n,this.b=r,wr.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=wr.workingColorSpace){if(e=g5(e,1),n=Ai(n,0,1),r=Ai(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=RA(o,s,e+1/3),this.g=RA(o,s,e),this.b=RA(o,s,e-1/3)}return wr.toWorkingColorSpace(this,i),this}setStyle(e,n=ii){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=ii){const r=yF[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=_p(e.r),this.g=_p(e.g),this.b=_p(e.b),this}copyLinearToSRGB(e){return this.r=vA(e.r),this.g=vA(e.g),this.b=vA(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ii){return wr.fromWorkingColorSpace(Ds.copy(this),e),Math.round(Ai(Ds.r*255,0,255))*65536+Math.round(Ai(Ds.g*255,0,255))*256+Math.round(Ai(Ds.b*255,0,255))}getHexString(e=ii){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=wr.workingColorSpace){wr.fromWorkingColorSpace(Ds.copy(this),n);const r=Ds.r,i=Ds.g,s=Ds.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=wr.workingColorSpace){return wr.fromWorkingColorSpace(Ds.copy(this),n),e.r=Ds.r,e.g=Ds.g,e.b=Ds.b,e}getStyle(e=ii){wr.fromWorkingColorSpace(Ds.copy(this),e);const n=Ds.r,r=Ds.g,i=Ds.b;return e!==ii?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(cu),this.setHSL(cu.h+e,cu.s+n,cu.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(cu),e.getHSL(ny);const r=f1(cu.h,ny.h,n),i=f1(cu.s,ny.s,n),s=f1(cu.l,ny.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ds=new bt;bt.NAMES=yF;let Aie=0;class Gr extends Jl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Aie++}),this.uuid=ia(),this.name="",this.type="Material",this.blending=Vl,this.side=es,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=G1,this.blendDst=B3,this.blendEquation=Au,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new bt(0,0,0),this.blendAlpha=0,this.depthFunc=V1,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=k3,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Of,this.stencilZFail=Of,this.stencilZPass=Of,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Vl&&(r.blending=this.blending),this.side!==es&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==G1&&(r.blendSrc=this.blendSrc),this.blendDst!==B3&&(r.blendDst=this.blendDst),this.blendEquation!==Au&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==V1&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==k3&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Of&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Of&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Of&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Or extends Gr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Tg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const wc=Tie();function Tie(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Co(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Ai(t,-65504,65504),wc.floatView[0]=t;const e=wc.uint32View[0],n=e>>23&511;return wc.baseTable[n]+((e&8388607)>>wc.shiftTable[n])}function Q0(t){const e=t>>10;return wc.uint32View[0]=wc.mantissaTable[wc.offsetTable[e]+(t&1023)]+wc.exponentTable[e],wc.floatView[0]}const Vf={toHalfFloat:Co,fromHalfFloat:Q0},Vi=new J,ry=new qe;class Qt{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=K1,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=fr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn('THREE.BufferAttribute: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)ry.fromBufferAttribute(this,n),ry.applyMatrix3(e),this.setXY(n,ry.x,ry.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Vi.fromBufferAttribute(this,n),Vi.applyMatrix3(e),this.setXYZ(n,Vi.x,Vi.y,Vi.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Vi.fromBufferAttribute(this,n),Vi.applyMatrix4(e),this.setXYZ(n,Vi.x,Vi.y,Vi.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Vi.fromBufferAttribute(this,n),Vi.applyNormalMatrix(e),this.setXYZ(n,Vi.x,Vi.y,Vi.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Vi.fromBufferAttribute(this,n),Vi.transformDirection(e),this.setXYZ(n,Vi.x,Vi.y,Vi.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=Lo(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Wn(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Lo(n,this.array)),n}setX(e,n){return this.normalized&&(n=Wn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Lo(n,this.array)),n}setY(e,n){return this.normalized&&(n=Wn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Lo(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Wn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Lo(n,this.array)),n}setW(e,n){return this.normalized&&(n=Wn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Wn(n,this.array),r=Wn(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Wn(n,this.array),r=Wn(r,this.array),i=Wn(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Wn(n,this.array),r=Wn(r,this.array),i=Wn(i,this.array),s=Wn(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==K1&&(e.usage=this.usage),e}}class wie extends Qt{constructor(e,n,r){super(new Int8Array(e),n,r)}}class Sie extends Qt{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class Cie extends Qt{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class Mie extends Qt{constructor(e,n,r){super(new Int16Array(e),n,r)}}class x5 extends Qt{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class Rie extends Qt{constructor(e,n,r){super(new Int32Array(e),n,r)}}class E5 extends Qt{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Iie extends Qt{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=Q0(this.array[e*this.itemSize]);return this.normalized&&(n=Lo(n,this.array)),n}setX(e,n){return this.normalized&&(n=Wn(n,this.array)),this.array[e*this.itemSize]=Co(n),this}getY(e){let n=Q0(this.array[e*this.itemSize+1]);return this.normalized&&(n=Lo(n,this.array)),n}setY(e,n){return this.normalized&&(n=Wn(n,this.array)),this.array[e*this.itemSize+1]=Co(n),this}getZ(e){let n=Q0(this.array[e*this.itemSize+2]);return this.normalized&&(n=Lo(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Wn(n,this.array)),this.array[e*this.itemSize+2]=Co(n),this}getW(e){let n=Q0(this.array[e*this.itemSize+3]);return this.normalized&&(n=Lo(n,this.array)),n}setW(e,n){return this.normalized&&(n=Wn(n,this.array)),this.array[e*this.itemSize+3]=Co(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Wn(n,this.array),r=Wn(r,this.array)),this.array[e+0]=Co(n),this.array[e+1]=Co(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Wn(n,this.array),r=Wn(r,this.array),i=Wn(i,this.array)),this.array[e+0]=Co(n),this.array[e+1]=Co(r),this.array[e+2]=Co(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Wn(n,this.array),r=Wn(r,this.array),i=Wn(i,this.array),s=Wn(s,this.array)),this.array[e+0]=Co(n),this.array[e+1]=Co(r),this.array[e+2]=Co(i),this.array[e+3]=Co(s),this}}class Ot extends Qt{constructor(e,n,r){super(new Float32Array(e),n,r)}}class Pie extends Qt{constructor(e,n,r){super(new Float64Array(e),n,r)}}let Lie=0;const ma=new yt,IA=new hn,id=new J,$o=new Yn,Zm=new Yn,us=new J;class on extends Jl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Lie++}),this.uuid=ia(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(mF(e)?E5:x5)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Pn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ma.makeRotationFromQuaternion(e),this.applyMatrix4(ma),this}rotateX(e){return ma.makeRotationX(e),this.applyMatrix4(ma),this}rotateY(e){return ma.makeRotationY(e),this.applyMatrix4(ma),this}rotateZ(e){return ma.makeRotationZ(e),this.applyMatrix4(ma),this}translate(e,n,r){return ma.makeTranslation(e,n,r),this.applyMatrix4(ma),this}scale(e,n,r){return ma.makeScale(e,n,r),this.applyMatrix4(ma),this}lookAt(e){return IA.lookAt(e),IA.updateMatrix(),this.applyMatrix4(IA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(id).negate(),this.translate(id.x,id.y,id.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ot(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yn);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];$o.setFromBufferAttribute(s),this.morphTargetsRelative?(us.addVectors(this.boundingBox.min,$o.min),this.boundingBox.expandByPoint(us),us.addVectors(this.boundingBox.max,$o.max),this.boundingBox.expandByPoint(us)):(this.boundingBox.expandByPoint($o.min),this.boundingBox.expandByPoint($o.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new J,1/0);return}if(e){const r=this.boundingSphere.center;if($o.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Zm.setFromBufferAttribute(a),this.morphTargetsRelative?(us.addVectors($o.min,Zm.min),$o.expandByPoint(us),us.addVectors($o.max,Zm.max),$o.expandByPoint(us)):($o.expandByPoint(Zm.min),$o.expandByPoint(Zm.max))}$o.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)us.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(us));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)us.fromBufferAttribute(a,c),l&&(id.fromBufferAttribute(e,c),us.add(id)),i=Math.max(i,r.distanceToSquared(us))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,o=n.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Qt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let R=0;R<a;R++)c[R]=new J,u[R]=new J;const f=new J,h=new J,d=new J,p=new qe,m=new qe,g=new qe,v=new J,x=new J;function y(R,O,L){f.fromArray(i,R*3),h.fromArray(i,O*3),d.fromArray(i,L*3),p.fromArray(o,R*2),m.fromArray(o,O*2),g.fromArray(o,L*2),h.sub(f),d.sub(f),m.sub(p),g.sub(p);const B=1/(m.x*g.y-g.x*m.y);isFinite(B)&&(v.copy(h).multiplyScalar(g.y).addScaledVector(d,-m.y).multiplyScalar(B),x.copy(d).multiplyScalar(m.x).addScaledVector(h,-g.x).multiplyScalar(B),c[R].add(v),c[O].add(v),c[L].add(v),u[R].add(x),u[O].add(x),u[L].add(x))}let A=this.groups;A.length===0&&(A=[{start:0,count:r.length}]);for(let R=0,O=A.length;R<O;++R){const L=A[R],B=L.start,N=L.count;for(let $=B,U=B+N;$<U;$+=3)y(r[$+0],r[$+1],r[$+2])}const T=new J,w=new J,M=new J,C=new J;function S(R){M.fromArray(s,R*3),C.copy(M);const O=c[R];T.copy(O),T.sub(M.multiplyScalar(M.dot(O))).normalize(),w.crossVectors(C,O);const B=w.dot(u[R])<0?-1:1;l[R*4]=T.x,l[R*4+1]=T.y,l[R*4+2]=T.z,l[R*4+3]=B}for(let R=0,O=A.length;R<O;++R){const L=A[R],B=L.start,N=L.count;for(let $=B,U=B+N;$<U;$+=3)S(r[$+0]),S(r[$+1]),S(r[$+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Qt(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let h=0,d=r.count;h<d;h++)r.setXYZ(h,0,0,0);const i=new J,s=new J,o=new J,a=new J,l=new J,c=new J,u=new J,f=new J;if(e)for(let h=0,d=e.count;h<d;h+=3){const p=e.getX(h+0),m=e.getX(h+1),g=e.getX(h+2);i.fromBufferAttribute(n,p),s.fromBufferAttribute(n,m),o.fromBufferAttribute(n,g),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),a.fromBufferAttribute(r,p),l.fromBufferAttribute(r,m),c.fromBufferAttribute(r,g),a.add(u),l.add(u),c.add(u),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(m,l.x,l.y,l.z),r.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,d=n.count;h<d;h+=3)i.fromBufferAttribute(n,h+0),s.fromBufferAttribute(n,h+1),o.fromBufferAttribute(n,h+2),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)us.fromBufferAttribute(e,n),us.normalize(),e.setXYZ(n,us.x,us.y,us.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,h=new c.constructor(l.length*u);let d=0,p=0;for(let m=0,g=l.length;m<g;m++){a.isInterleavedBufferAttribute?d=l[m]*a.data.stride+a.offset:d=l[m]*u;for(let v=0;v<u;v++)h[p++]=c[d++]}return new Qt(h,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new on,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const h=c[u],d=e(h,r);l.push(d)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f];u.push(d.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let h=0,d=f.length;h<d;h++)u.push(f[h].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const pR=new yt,vf=new xl,iy=new Fr,mR=new J,sd=new J,od=new J,ad=new J,PA=new J,sy=new J,oy=new qe,ay=new qe,ly=new qe,gR=new J,vR=new J,yR=new J,cy=new J,uy=new J;class un extends hn{constructor(e=new on,n=new Or){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){sy.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(PA.fromBufferAttribute(f,e),o?sy.addScaledVector(PA,u):sy.addScaledVector(PA.sub(n),u))}n.add(sy)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),iy.copy(r.boundingSphere),iy.applyMatrix4(s),vf.copy(e.ray).recast(e.near),!(iy.containsPoint(vf.origin)===!1&&(vf.intersectSphere(iy,mR)===null||vf.origin.distanceToSquared(mR)>(e.far-e.near)**2))&&(pR.copy(s).invert(),vf.copy(e.ray).applyMatrix4(pR),!(r.boundingBox!==null&&vf.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,vf)))}_computeIntersections(e,n,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,h=s.groups,d=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,m=h.length;p<m;p++){const g=h[p],v=o[g.materialIndex],x=Math.max(g.start,d.start),y=Math.min(a.count,Math.min(g.start+g.count,d.start+d.count));for(let A=x,T=y;A<T;A+=3){const w=a.getX(A),M=a.getX(A+1),C=a.getX(A+2);i=fy(this,v,e,r,c,u,f,w,M,C),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const p=Math.max(0,d.start),m=Math.min(a.count,d.start+d.count);for(let g=p,v=m;g<v;g+=3){const x=a.getX(g),y=a.getX(g+1),A=a.getX(g+2);i=fy(this,o,e,r,c,u,f,x,y,A),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,m=h.length;p<m;p++){const g=h[p],v=o[g.materialIndex],x=Math.max(g.start,d.start),y=Math.min(l.count,Math.min(g.start+g.count,d.start+d.count));for(let A=x,T=y;A<T;A+=3){const w=A,M=A+1,C=A+2;i=fy(this,v,e,r,c,u,f,w,M,C),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const p=Math.max(0,d.start),m=Math.min(l.count,d.start+d.count);for(let g=p,v=m;g<v;g+=3){const x=g,y=g+1,A=g+2;i=fy(this,o,e,r,c,u,f,x,y,A),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}}}function Nie(t,e,n,r,i,s,o,a){let l;if(e.side===Ti?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===es,a),l===null)return null;uy.copy(a),uy.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(uy);return c<n.near||c>n.far?null:{distance:c,point:uy.clone(),object:t}}function fy(t,e,n,r,i,s,o,a,l,c){t.getVertexPosition(a,sd),t.getVertexPosition(l,od),t.getVertexPosition(c,ad);const u=Nie(t,e,n,r,sd,od,ad,cy);if(u){i&&(oy.fromBufferAttribute(i,a),ay.fromBufferAttribute(i,l),ly.fromBufferAttribute(i,c),u.uv=Xi.getInterpolation(cy,sd,od,ad,oy,ay,ly,new qe)),s&&(oy.fromBufferAttribute(s,a),ay.fromBufferAttribute(s,l),ly.fromBufferAttribute(s,c),u.uv1=Xi.getInterpolation(cy,sd,od,ad,oy,ay,ly,new qe),u.uv2=u.uv1),o&&(gR.fromBufferAttribute(o,a),vR.fromBufferAttribute(o,l),yR.fromBufferAttribute(o,c),u.normal=Xi.getInterpolation(cy,sd,od,ad,gR,vR,yR,new J),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new J,materialIndex:0};Xi.getNormal(sd,od,ad,f.normal),u.face=f}return u}class Yc extends on{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let h=0,d=0;p("z","y","x",-1,-1,r,n,e,o,s,0),p("z","y","x",1,-1,r,n,-e,o,s,1),p("x","z","y",1,1,e,r,n,i,o,2),p("x","z","y",1,-1,e,r,-n,i,o,3),p("x","y","z",1,-1,e,n,r,i,s,4),p("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Ot(c,3)),this.setAttribute("normal",new Ot(u,3)),this.setAttribute("uv",new Ot(f,2));function p(m,g,v,x,y,A,T,w,M,C,S){const R=A/M,O=T/C,L=A/2,B=T/2,N=w/2,$=M+1,U=C+1;let Q=0,Y=0;const ee=new J;for(let ne=0;ne<U;ne++){const P=ne*O-B;for(let se=0;se<$;se++){const re=se*R-L;ee[m]=re*x,ee[g]=P*y,ee[v]=N,c.push(ee.x,ee.y,ee.z),ee[m]=0,ee[g]=0,ee[v]=w>0?1:-1,u.push(ee.x,ee.y,ee.z),f.push(se/M),f.push(1-ne/C),Q+=1}}for(let ne=0;ne<C;ne++)for(let P=0;P<M;P++){const se=h+P+$*ne,re=h+P+$*(ne+1),Z=h+(P+1)+$*(ne+1),X=h+(P+1)+$*ne;l.push(se,re,X),l.push(re,Z,X),Y+=6}a.addGroup(d,Y,S),d+=Y,h+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Np(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function ao(t){const e={};for(let n=0;n<t.length;n++){const r=Np(t[n]);for(const i in r)e[i]=r[i]}return e}function Oie(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function xF(t){return t.getRenderTarget()===null?t.outputColorSpace:wr.workingColorSpace}const Gu={clone:Np,merge:ao};var Die=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Bie=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ur extends Gr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Die,this.fragmentShader=Bie,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Np(e.uniforms),this.uniformsGroups=Oie(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}let Qp=class extends hn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new yt,this.projectionMatrix=new yt,this.projectionMatrixInverse=new yt,this.coordinateSystem=cl}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},mr=class extends Qp{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Lp*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(nh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Lp*2*Math.atan(Math.tan(nh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(nh*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const ld=-90,cd=1;let zE=class extends hn{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new mr(ld,cd,e,n);i.layers=this.layers,this.add(i);const s=new mr(ld,cd,e,n);s.layers=this.layers,this.add(s);const o=new mr(ld,cd,e,n);o.layers=this.layers,this.add(o);const a=new mr(ld,cd,e,n);a.layers=this.layers,this.add(a);const l=new mr(ld,cd,e,n);l.layers=this.layers,this.add(l);const c=new mr(ld,cd,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,o,a,l]=n;for(const c of n)this.remove(c);if(e===cl)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Pp)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,o),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=m,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(f,h,d),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}};class Rg extends Vn{constructor(e,n,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:Xl,super(e,n,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Zp extends pr{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(h1("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Ru?ii:mi),this.texture=new Rg(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Cn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Yc(5,5,5),s=new ur({name:"CubemapFromEquirect",uniforms:Np(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ti,blending:Da});s.uniforms.tEquirect.value=n;const o=new un(i,s),a=n.minFilter;return n.minFilter===js&&(n.minFilter=Cn),new zE(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}const LA=new J,kie=new J,Fie=new Pn;let zs=class{constructor(e=new J(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=LA.subVectors(r,n).cross(kie.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(LA),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||Fie.getNormalMatrix(e),i=this.coplanarPoint(LA).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const yf=new Fr,hy=new J;let _h=class{constructor(e=new zs,n=new zs,r=new zs,i=new zs,s=new zs,o=new zs){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=cl){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],f=i[6],h=i[7],d=i[8],p=i[9],m=i[10],g=i[11],v=i[12],x=i[13],y=i[14],A=i[15];if(r[0].setComponents(l-s,h-c,g-d,A-v).normalize(),r[1].setComponents(l+s,h+c,g+d,A+v).normalize(),r[2].setComponents(l+o,h+u,g+p,A+x).normalize(),r[3].setComponents(l-o,h-u,g-p,A-x).normalize(),r[4].setComponents(l-a,h-f,g-m,A-y).normalize(),n===cl)r[5].setComponents(l+a,h+f,g+m,A+y).normalize();else if(n===Pp)r[5].setComponents(a,f,m,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),yf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),yf.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(yf)}intersectsSprite(e){return yf.center.set(0,0,0),yf.radius=.7071067811865476,yf.applyMatrix4(e.matrixWorld),this.intersectsSphere(yf)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(hy.x=i.normal.x>0?e.max.x:e.min.x,hy.y=i.normal.y>0?e.max.y:e.min.y,hy.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(hy)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function EF(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function Uie(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,u){const f=c.array,h=c.usage,d=f.byteLength,p=t.createBuffer();t.bindBuffer(u,p),t.bufferData(u,f,h),c.onUploadCallback();let m;if(f instanceof Float32Array)m=t.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)m=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=t.UNSIGNED_SHORT;else if(f instanceof Int16Array)m=t.SHORT;else if(f instanceof Uint32Array)m=t.UNSIGNED_INT;else if(f instanceof Int32Array)m=t.INT;else if(f instanceof Int8Array)m=t.BYTE;else if(f instanceof Uint8Array)m=t.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)m=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:p,type:m,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version,size:d}}function s(c,u,f){const h=u.array,d=u._updateRange,p=u.updateRanges;if(t.bindBuffer(f,c),d.count===-1&&p.length===0&&t.bufferSubData(f,0,h),p.length!==0){for(let m=0,g=p.length;m<g;m++){const v=p[m];n?t.bufferSubData(f,v.start*h.BYTES_PER_ELEMENT,h,v.start,v.count):t.bufferSubData(f,v.start*h.BYTES_PER_ELEMENT,h.subarray(v.start,v.start+v.count))}u.clearUpdateRanges()}d.count!==-1&&(n?t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(t.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=r.get(c);(!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=r.get(c);if(f===void 0)r.set(c,i(c,u));else if(f.version<c.version){if(f.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(f.buffer,c,u),f.version=c.version}}return{get:o,remove:a,update:l}}class Fo extends on{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,f=e/a,h=n/l,d=[],p=[],m=[],g=[];for(let v=0;v<u;v++){const x=v*h-o;for(let y=0;y<c;y++){const A=y*f-s;p.push(A,-x,0),m.push(0,0,1),g.push(y/a),g.push(1-v/l)}}for(let v=0;v<l;v++)for(let x=0;x<a;x++){const y=x+c*v,A=x+c*(v+1),T=x+1+c*(v+1),w=x+1+c*v;d.push(y,A,w),d.push(A,T,w)}this.setIndex(d),this.setAttribute("position",new Ot(p,3)),this.setAttribute("normal",new Ot(m,3)),this.setAttribute("uv",new Ot(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fo(e.width,e.height,e.widthSegments,e.heightSegments)}}var zie=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Hie=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Gie=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Vie=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Wie=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,jie=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,$ie=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Xie=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Yie=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,qie=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Kie=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Jie=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Qie=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Zie=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,ese=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,tse=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,nse=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,rse=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ise=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,sse=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ose=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ase=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,lse=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,cse=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,use=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,fse=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,hse=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,dse=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,pse=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,mse=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,gse="gl_FragColor = linearToOutputTexel( gl_FragColor );",vse=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,yse=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,xse=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Ese=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,_se=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,bse=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ase=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Tse=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,wse=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Sse=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Cse=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Mse=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Rse=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Ise=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Pse=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Lse=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Nse=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Ose=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Dse=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Bse=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,kse=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Fse=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Use=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,zse=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Hse=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Gse=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Vse=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Wse=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,jse=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,$se=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Xse=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Yse=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,qse=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Kse=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Jse=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Qse=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Zse=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,eoe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,toe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,noe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,roe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,ioe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,soe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ooe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,aoe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,loe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,coe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,uoe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,foe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,hoe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,doe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,poe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,moe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,goe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,voe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,yoe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,xoe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Eoe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,_oe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,boe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Aoe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Toe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,woe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Soe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Coe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Moe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Roe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Ioe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Poe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Loe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Noe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Ooe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Doe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Boe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,koe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Foe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Uoe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,zoe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Hoe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Goe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Voe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Woe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,joe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,$oe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Xoe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Yoe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,qoe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Koe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Joe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Qoe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Zoe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,eae=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tae=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nae=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rae=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,iae=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sae=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,oae=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,aae=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lae=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cae=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,uae=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fae=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hae=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dae=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,pae=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mae=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gae=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vae=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yae=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Dn={alphahash_fragment:zie,alphahash_pars_fragment:Hie,alphamap_fragment:Gie,alphamap_pars_fragment:Vie,alphatest_fragment:Wie,alphatest_pars_fragment:jie,aomap_fragment:$ie,aomap_pars_fragment:Xie,batching_pars_vertex:Yie,batching_vertex:qie,begin_vertex:Kie,beginnormal_vertex:Jie,bsdfs:Qie,iridescence_fragment:Zie,bumpmap_pars_fragment:ese,clipping_planes_fragment:tse,clipping_planes_pars_fragment:nse,clipping_planes_pars_vertex:rse,clipping_planes_vertex:ise,color_fragment:sse,color_pars_fragment:ose,color_pars_vertex:ase,color_vertex:lse,common:cse,cube_uv_reflection_fragment:use,defaultnormal_vertex:fse,displacementmap_pars_vertex:hse,displacementmap_vertex:dse,emissivemap_fragment:pse,emissivemap_pars_fragment:mse,colorspace_fragment:gse,colorspace_pars_fragment:vse,envmap_fragment:yse,envmap_common_pars_fragment:xse,envmap_pars_fragment:Ese,envmap_pars_vertex:_se,envmap_physical_pars_fragment:Nse,envmap_vertex:bse,fog_vertex:Ase,fog_pars_vertex:Tse,fog_fragment:wse,fog_pars_fragment:Sse,gradientmap_pars_fragment:Cse,lightmap_fragment:Mse,lightmap_pars_fragment:Rse,lights_lambert_fragment:Ise,lights_lambert_pars_fragment:Pse,lights_pars_begin:Lse,lights_toon_fragment:Ose,lights_toon_pars_fragment:Dse,lights_phong_fragment:Bse,lights_phong_pars_fragment:kse,lights_physical_fragment:Fse,lights_physical_pars_fragment:Use,lights_fragment_begin:zse,lights_fragment_maps:Hse,lights_fragment_end:Gse,logdepthbuf_fragment:Vse,logdepthbuf_pars_fragment:Wse,logdepthbuf_pars_vertex:jse,logdepthbuf_vertex:$se,map_fragment:Xse,map_pars_fragment:Yse,map_particle_fragment:qse,map_particle_pars_fragment:Kse,metalnessmap_fragment:Jse,metalnessmap_pars_fragment:Qse,morphcolor_vertex:Zse,morphnormal_vertex:eoe,morphtarget_pars_vertex:toe,morphtarget_vertex:noe,normal_fragment_begin:roe,normal_fragment_maps:ioe,normal_pars_fragment:soe,normal_pars_vertex:ooe,normal_vertex:aoe,normalmap_pars_fragment:loe,clearcoat_normal_fragment_begin:coe,clearcoat_normal_fragment_maps:uoe,clearcoat_pars_fragment:foe,iridescence_pars_fragment:hoe,opaque_fragment:doe,packing:poe,premultiplied_alpha_fragment:moe,project_vertex:goe,dithering_fragment:voe,dithering_pars_fragment:yoe,roughnessmap_fragment:xoe,roughnessmap_pars_fragment:Eoe,shadowmap_pars_fragment:_oe,shadowmap_pars_vertex:boe,shadowmap_vertex:Aoe,shadowmask_pars_fragment:Toe,skinbase_vertex:woe,skinning_pars_vertex:Soe,skinning_vertex:Coe,skinnormal_vertex:Moe,specularmap_fragment:Roe,specularmap_pars_fragment:Ioe,tonemapping_fragment:Poe,tonemapping_pars_fragment:Loe,transmission_fragment:Noe,transmission_pars_fragment:Ooe,uv_pars_fragment:Doe,uv_pars_vertex:Boe,uv_vertex:koe,worldpos_vertex:Foe,background_vert:Uoe,background_frag:zoe,backgroundCube_vert:Hoe,backgroundCube_frag:Goe,cube_vert:Voe,cube_frag:Woe,depth_vert:joe,depth_frag:$oe,distanceRGBA_vert:Xoe,distanceRGBA_frag:Yoe,equirect_vert:qoe,equirect_frag:Koe,linedashed_vert:Joe,linedashed_frag:Qoe,meshbasic_vert:Zoe,meshbasic_frag:eae,meshlambert_vert:tae,meshlambert_frag:nae,meshmatcap_vert:rae,meshmatcap_frag:iae,meshnormal_vert:sae,meshnormal_frag:oae,meshphong_vert:aae,meshphong_frag:lae,meshphysical_vert:cae,meshphysical_frag:uae,meshtoon_vert:fae,meshtoon_frag:hae,points_vert:dae,points_frag:pae,shadow_vert:mae,shadow_frag:gae,sprite_vert:vae,sprite_frag:yae},Wt={common:{diffuse:{value:new bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Pn},alphaMap:{value:null},alphaMapTransform:{value:new Pn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Pn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Pn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Pn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Pn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Pn},normalScale:{value:new qe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Pn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Pn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Pn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Pn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Pn},alphaTest:{value:0},uvTransform:{value:new Pn}},sprite:{diffuse:{value:new bt(16777215)},opacity:{value:1},center:{value:new qe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Pn},alphaMap:{value:null},alphaMapTransform:{value:new Pn},alphaTest:{value:0}}},sl={basic:{uniforms:ao([Wt.common,Wt.specularmap,Wt.envmap,Wt.aomap,Wt.lightmap,Wt.fog]),vertexShader:Dn.meshbasic_vert,fragmentShader:Dn.meshbasic_frag},lambert:{uniforms:ao([Wt.common,Wt.specularmap,Wt.envmap,Wt.aomap,Wt.lightmap,Wt.emissivemap,Wt.bumpmap,Wt.normalmap,Wt.displacementmap,Wt.fog,Wt.lights,{emissive:{value:new bt(0)}}]),vertexShader:Dn.meshlambert_vert,fragmentShader:Dn.meshlambert_frag},phong:{uniforms:ao([Wt.common,Wt.specularmap,Wt.envmap,Wt.aomap,Wt.lightmap,Wt.emissivemap,Wt.bumpmap,Wt.normalmap,Wt.displacementmap,Wt.fog,Wt.lights,{emissive:{value:new bt(0)},specular:{value:new bt(1118481)},shininess:{value:30}}]),vertexShader:Dn.meshphong_vert,fragmentShader:Dn.meshphong_frag},standard:{uniforms:ao([Wt.common,Wt.envmap,Wt.aomap,Wt.lightmap,Wt.emissivemap,Wt.bumpmap,Wt.normalmap,Wt.displacementmap,Wt.roughnessmap,Wt.metalnessmap,Wt.fog,Wt.lights,{emissive:{value:new bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Dn.meshphysical_vert,fragmentShader:Dn.meshphysical_frag},toon:{uniforms:ao([Wt.common,Wt.aomap,Wt.lightmap,Wt.emissivemap,Wt.bumpmap,Wt.normalmap,Wt.displacementmap,Wt.gradientmap,Wt.fog,Wt.lights,{emissive:{value:new bt(0)}}]),vertexShader:Dn.meshtoon_vert,fragmentShader:Dn.meshtoon_frag},matcap:{uniforms:ao([Wt.common,Wt.bumpmap,Wt.normalmap,Wt.displacementmap,Wt.fog,{matcap:{value:null}}]),vertexShader:Dn.meshmatcap_vert,fragmentShader:Dn.meshmatcap_frag},points:{uniforms:ao([Wt.points,Wt.fog]),vertexShader:Dn.points_vert,fragmentShader:Dn.points_frag},dashed:{uniforms:ao([Wt.common,Wt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Dn.linedashed_vert,fragmentShader:Dn.linedashed_frag},depth:{uniforms:ao([Wt.common,Wt.displacementmap]),vertexShader:Dn.depth_vert,fragmentShader:Dn.depth_frag},normal:{uniforms:ao([Wt.common,Wt.bumpmap,Wt.normalmap,Wt.displacementmap,{opacity:{value:1}}]),vertexShader:Dn.meshnormal_vert,fragmentShader:Dn.meshnormal_frag},sprite:{uniforms:ao([Wt.sprite,Wt.fog]),vertexShader:Dn.sprite_vert,fragmentShader:Dn.sprite_frag},background:{uniforms:{uvTransform:{value:new Pn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Dn.background_vert,fragmentShader:Dn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Dn.backgroundCube_vert,fragmentShader:Dn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Dn.cube_vert,fragmentShader:Dn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Dn.equirect_vert,fragmentShader:Dn.equirect_frag},distanceRGBA:{uniforms:ao([Wt.common,Wt.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Dn.distanceRGBA_vert,fragmentShader:Dn.distanceRGBA_frag},shadow:{uniforms:ao([Wt.lights,Wt.fog,{color:{value:new bt(0)},opacity:{value:1}}]),vertexShader:Dn.shadow_vert,fragmentShader:Dn.shadow_frag}};sl.physical={uniforms:ao([sl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Pn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Pn},clearcoatNormalScale:{value:new qe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Pn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Pn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Pn},sheen:{value:0},sheenColor:{value:new bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Pn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Pn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Pn},transmissionSamplerSize:{value:new qe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Pn},attenuationDistance:{value:0},attenuationColor:{value:new bt(0)},specularColor:{value:new bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Pn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Pn},anisotropyVector:{value:new qe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Pn}}]),vertexShader:Dn.meshphysical_vert,fragmentShader:Dn.meshphysical_frag};const dy={r:0,b:0,g:0};function xae(t,e,n,r,i,s,o){const a=new bt(0);let l=s===!0?0:1,c,u,f=null,h=0,d=null;function p(g,v){let x=!1,y=v.isScene===!0?v.background:null;y&&y.isTexture&&(y=(v.backgroundBlurriness>0?n:e).get(y)),y===null?m(a,l):y&&y.isColor&&(m(y,1),x=!0);const A=t.xr.getEnvironmentBlendMode();A==="additive"?r.buffers.color.setClear(0,0,0,1,o):A==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||x)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),y&&(y.isCubeTexture||y.mapping===Kp)?(u===void 0&&(u=new un(new Yc(1,1,1),new ur({name:"BackgroundCubeMaterial",uniforms:Np(sl.backgroundCube.uniforms),vertexShader:sl.backgroundCube.vertexShader,fragmentShader:sl.backgroundCube.fragmentShader,side:Ti,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(T,w,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=wr.getTransfer(y.colorSpace)!==zr,(f!==y||h!==y.version||d!==t.toneMapping)&&(u.material.needsUpdate=!0,f=y,h=y.version,d=t.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(c===void 0&&(c=new un(new Fo(2,2),new ur({name:"BackgroundMaterial",uniforms:Np(sl.background.uniforms),vertexShader:sl.background.vertexShader,fragmentShader:sl.background.fragmentShader,side:es,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=y,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=wr.getTransfer(y.colorSpace)!==zr,y.matrixAutoUpdate===!0&&y.updateMatrix(),c.material.uniforms.uvTransform.value.copy(y.matrix),(f!==y||h!==y.version||d!==t.toneMapping)&&(c.material.needsUpdate=!0,f=y,h=y.version,d=t.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}function m(g,v){g.getRGB(dy,xF(t)),r.buffers.color.setClear(dy.r,dy.g,dy.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(g,v=1){a.set(g),l=v,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,m(a,l)},render:p}}function Eae(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=g(null);let c=l,u=!1;function f(N,$,U,Q,Y){let ee=!1;if(o){const ne=m(Q,U,$);c!==ne&&(c=ne,d(c.object)),ee=v(N,Q,U,Y),ee&&x(N,Q,U,Y)}else{const ne=$.wireframe===!0;(c.geometry!==Q.id||c.program!==U.id||c.wireframe!==ne)&&(c.geometry=Q.id,c.program=U.id,c.wireframe=ne,ee=!0)}Y!==null&&n.update(Y,t.ELEMENT_ARRAY_BUFFER),(ee||u)&&(u=!1,C(N,$,U,Q),Y!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(Y).buffer))}function h(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function d(N){return r.isWebGL2?t.bindVertexArray(N):s.bindVertexArrayOES(N)}function p(N){return r.isWebGL2?t.deleteVertexArray(N):s.deleteVertexArrayOES(N)}function m(N,$,U){const Q=U.wireframe===!0;let Y=a[N.id];Y===void 0&&(Y={},a[N.id]=Y);let ee=Y[$.id];ee===void 0&&(ee={},Y[$.id]=ee);let ne=ee[Q];return ne===void 0&&(ne=g(h()),ee[Q]=ne),ne}function g(N){const $=[],U=[],Q=[];for(let Y=0;Y<i;Y++)$[Y]=0,U[Y]=0,Q[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:U,attributeDivisors:Q,object:N,attributes:{},index:null}}function v(N,$,U,Q){const Y=c.attributes,ee=$.attributes;let ne=0;const P=U.getAttributes();for(const se in P)if(P[se].location>=0){const Z=Y[se];let X=ee[se];if(X===void 0&&(se==="instanceMatrix"&&N.instanceMatrix&&(X=N.instanceMatrix),se==="instanceColor"&&N.instanceColor&&(X=N.instanceColor)),Z===void 0||Z.attribute!==X||X&&Z.data!==X.data)return!0;ne++}return c.attributesNum!==ne||c.index!==Q}function x(N,$,U,Q){const Y={},ee=$.attributes;let ne=0;const P=U.getAttributes();for(const se in P)if(P[se].location>=0){let Z=ee[se];Z===void 0&&(se==="instanceMatrix"&&N.instanceMatrix&&(Z=N.instanceMatrix),se==="instanceColor"&&N.instanceColor&&(Z=N.instanceColor));const X={};X.attribute=Z,Z&&Z.data&&(X.data=Z.data),Y[se]=X,ne++}c.attributes=Y,c.attributesNum=ne,c.index=Q}function y(){const N=c.newAttributes;for(let $=0,U=N.length;$<U;$++)N[$]=0}function A(N){T(N,0)}function T(N,$){const U=c.newAttributes,Q=c.enabledAttributes,Y=c.attributeDivisors;U[N]=1,Q[N]===0&&(t.enableVertexAttribArray(N),Q[N]=1),Y[N]!==$&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](N,$),Y[N]=$)}function w(){const N=c.newAttributes,$=c.enabledAttributes;for(let U=0,Q=$.length;U<Q;U++)$[U]!==N[U]&&(t.disableVertexAttribArray(U),$[U]=0)}function M(N,$,U,Q,Y,ee,ne){ne===!0?t.vertexAttribIPointer(N,$,U,Y,ee):t.vertexAttribPointer(N,$,U,Q,Y,ee)}function C(N,$,U,Q){if(r.isWebGL2===!1&&(N.isInstancedMesh||Q.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;y();const Y=Q.attributes,ee=U.getAttributes(),ne=$.defaultAttributeValues;for(const P in ee){const se=ee[P];if(se.location>=0){let re=Y[P];if(re===void 0&&(P==="instanceMatrix"&&N.instanceMatrix&&(re=N.instanceMatrix),P==="instanceColor"&&N.instanceColor&&(re=N.instanceColor)),re!==void 0){const Z=re.normalized,X=re.itemSize,W=n.get(re);if(W===void 0)continue;const K=W.buffer,ge=W.type,Se=W.bytesPerElement,xe=r.isWebGL2===!0&&(ge===t.INT||ge===t.UNSIGNED_INT||re.gpuType===eh);if(re.isInterleavedBufferAttribute){const Me=re.data,he=Me.stride,Oe=re.offset;if(Me.isInstancedInterleavedBuffer){for(let be=0;be<se.locationSize;be++)T(se.location+be,Me.meshPerAttribute);N.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=Me.meshPerAttribute*Me.count)}else for(let be=0;be<se.locationSize;be++)A(se.location+be);t.bindBuffer(t.ARRAY_BUFFER,K);for(let be=0;be<se.locationSize;be++)M(se.location+be,X/se.locationSize,ge,Z,he*Se,(Oe+X/se.locationSize*be)*Se,xe)}else{if(re.isInstancedBufferAttribute){for(let Me=0;Me<se.locationSize;Me++)T(se.location+Me,re.meshPerAttribute);N.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let Me=0;Me<se.locationSize;Me++)A(se.location+Me);t.bindBuffer(t.ARRAY_BUFFER,K);for(let Me=0;Me<se.locationSize;Me++)M(se.location+Me,X/se.locationSize,ge,Z,X*Se,X/se.locationSize*Me*Se,xe)}}else if(ne!==void 0){const Z=ne[P];if(Z!==void 0)switch(Z.length){case 2:t.vertexAttrib2fv(se.location,Z);break;case 3:t.vertexAttrib3fv(se.location,Z);break;case 4:t.vertexAttrib4fv(se.location,Z);break;default:t.vertexAttrib1fv(se.location,Z)}}}}w()}function S(){L();for(const N in a){const $=a[N];for(const U in $){const Q=$[U];for(const Y in Q)p(Q[Y].object),delete Q[Y];delete $[U]}delete a[N]}}function R(N){if(a[N.id]===void 0)return;const $=a[N.id];for(const U in $){const Q=$[U];for(const Y in Q)p(Q[Y].object),delete Q[Y];delete $[U]}delete a[N.id]}function O(N){for(const $ in a){const U=a[$];if(U[N.id]===void 0)continue;const Q=U[N.id];for(const Y in Q)p(Q[Y].object),delete Q[Y];delete U[N.id]}}function L(){B(),u=!0,c!==l&&(c=l,d(c.object))}function B(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:L,resetDefaultState:B,dispose:S,releaseStatesOfGeometry:R,releaseStatesOfProgram:O,initAttributes:y,enableAttribute:A,disableUnusedAttributes:w}}function _ae(t,e,n,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,f){t.drawArrays(s,u,f),n.update(f,s,1)}function l(u,f,h){if(h===0)return;let d,p;if(i)d=t,p="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[p](s,u,f,h),n.update(f,s,h)}function c(u,f,h){if(h===0)return;const d=e.get("WEBGL_multi_draw");if(d===null)for(let p=0;p<h;p++)this.render(u[p],f[p]);else{d.multiDrawArraysWEBGL(s,u,0,f,0,h);let p=0;for(let m=0;m<h;m++)p+=f[m];n.update(p,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function bae(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(M){if(M==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),m=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),v=t.getParameter(t.MAX_VARYING_VECTORS),x=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,A=o||e.has("OES_texture_float"),T=y&&A,w=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:x,vertexTextures:y,floatFragmentTextures:A,floatVertexTextures:T,maxSamples:w}}function Aae(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new zs,a=new Pn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const d=f.length!==0||h||r!==0||i;return i=h,r=f.length,d},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){n=u(f,h,0)},this.setState=function(f,h,d){const p=f.clippingPlanes,m=f.clipIntersection,g=f.clipShadows,v=t.get(f);if(!i||p===null||p.length===0||s&&!g)s?u(null):c();else{const x=s?0:r,y=x*4;let A=v.clippingState||null;l.value=A,A=u(p,h,y,d);for(let T=0;T!==y;++T)A[T]=n[T];v.clippingState=A,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(f,h,d,p){const m=f!==null?f.length:0;let g=null;if(m!==0){if(g=l.value,p!==!0||g===null){const v=d+m*4,x=h.matrixWorldInverse;a.getNormalMatrix(x),(g===null||g.length<v)&&(g=new Float32Array(v));for(let y=0,A=d;y!==m;++y,A+=4)o.copy(f[y]).applyMatrix4(x,a),o.normal.toArray(g,A),g[A+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function Tae(t){let e=new WeakMap;function n(o,a){return a===Rp?o.mapping=Xl:a===W1&&(o.mapping=Hu),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===Rp||a===W1)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new Zp(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}let Bi=class extends Qp{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}};const ap=4,xR=[.125,.215,.35,.446,.526,.582],Bf=20,NA=new Bi,ER=new bt;let OA=null,DA=0,BA=0;const Df=(1+Math.sqrt(5))/2,ud=1/Df,_R=[new J(1,1,1),new J(-1,1,1),new J(1,1,-1),new J(-1,1,-1),new J(0,Df,ud),new J(0,Df,-ud),new J(ud,0,Df),new J(-ud,0,Df),new J(Df,ud,0),new J(-Df,ud,0)];class xS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){OA=this._renderer.getRenderTarget(),DA=this._renderer.getActiveCubeFace(),BA=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=TR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=AR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(OA,DA,BA),e.scissorTest=!1,py(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Xl||e.mapping===Hu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),OA=this._renderer.getRenderTarget(),DA=this._renderer.getActiveCubeFace(),BA=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Cn,minFilter:Cn,generateMipmaps:!1,type:Xr,format:Sr,colorSpace:sa,depthBuffer:!1},i=bR(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=bR(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=wae(s)),this._blurMaterial=Sae(s,e,n)}return i}_compileMaterial(e){const n=new un(this._lodPlanes[0],e);this._renderer.compile(n,NA)}_sceneToCubeUV(e,n,r,i){const a=new mr(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,h=u.toneMapping;u.getClearColor(ER),u.toneMapping=fl,u.autoClear=!1;const d=new Or({name:"PMREM.Background",side:Ti,depthWrite:!1,depthTest:!1}),p=new un(new Yc,d);let m=!1;const g=e.background;g?g.isColor&&(d.color.copy(g),e.background=null,m=!0):(d.color.copy(ER),m=!0);for(let v=0;v<6;v++){const x=v%3;x===0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):x===1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const y=this._cubeSize;py(i,x*y,v>2?y:0,y,y),u.setRenderTarget(i),m&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=f,e.background=g}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Xl||e.mapping===Hu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=TR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=AR());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new un(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;py(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,NA)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=_R[(i-1)%_R.length];this._blur(e,i-1,i,s,o)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new un(this._lodPlanes[i],c),h=c.uniforms,d=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*Bf-1),m=s/p,g=isFinite(s)?1+Math.floor(u*m):Bf;g>Bf&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Bf}`);const v=[];let x=0;for(let M=0;M<Bf;++M){const C=M/m,S=Math.exp(-C*C/2);v.push(S),M===0?x+=S:M<g&&(x+=2*S)}for(let M=0;M<v.length;M++)v[M]=v[M]/x;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=v,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:y}=this;h.dTheta.value=p,h.mipInt.value=y-r;const A=this._sizeLods[i],T=3*A*(i>y-ap?i-y+ap:0),w=4*(this._cubeSize-A);py(n,T,w,3*A,2*A),l.setRenderTarget(n),l.render(f,NA)}}function wae(t){const e=[],n=[],r=[];let i=t;const s=t-ap+1+xR.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-ap?l=xR[o-t+ap-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,f=1+c,h=[u,u,f,u,f,f,u,u,f,f,u,f],d=6,p=6,m=3,g=2,v=1,x=new Float32Array(m*p*d),y=new Float32Array(g*p*d),A=new Float32Array(v*p*d);for(let w=0;w<d;w++){const M=w%3*2/3-1,C=w>2?0:-1,S=[M,C,0,M+2/3,C,0,M+2/3,C+1,0,M,C,0,M+2/3,C+1,0,M,C+1,0];x.set(S,m*p*w),y.set(h,g*p*w);const R=[w,w,w,w,w,w];A.set(R,v*p*w)}const T=new on;T.setAttribute("position",new Qt(x,m)),T.setAttribute("uv",new Qt(y,g)),T.setAttribute("faceIndex",new Qt(A,v)),e.push(T),i>ap&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function bR(t,e,n){const r=new pr(t,e,n);return r.texture.mapping=Kp,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function py(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Sae(t,e,n){const r=new Float32Array(Bf),i=new J(0,1,0);return new ur({name:"SphericalGaussianBlur",defines:{n:Bf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:_5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Da,depthTest:!1,depthWrite:!1})}function AR(){return new ur({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Da,depthTest:!1,depthWrite:!1})}function TR(){return new ur({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_5(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Da,depthTest:!1,depthWrite:!1})}function _5(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Cae(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Rp||l===W1,u=l===Xl||l===Hu;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return n===null&&(n=new xS(t)),f=c?n.fromEquirectangular(a,f):n.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||u&&f&&i(f)){n===null&&(n=new xS(t));const h=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function Mae(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Rae(t,e,n,r){const i={},s=new WeakMap;function o(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);for(const p in h.morphAttributes){const m=h.morphAttributes[p];for(let g=0,v=m.length;g<v;g++)e.remove(m[g])}h.removeEventListener("dispose",o),delete i[h.id];const d=s.get(h);d&&(e.remove(d),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(f,h){return i[h.id]===!0||(h.addEventListener("dispose",o),i[h.id]=!0,n.memory.geometries++),h}function l(f){const h=f.attributes;for(const p in h)e.update(h[p],t.ARRAY_BUFFER);const d=f.morphAttributes;for(const p in d){const m=d[p];for(let g=0,v=m.length;g<v;g++)e.update(m[g],t.ARRAY_BUFFER)}}function c(f){const h=[],d=f.index,p=f.attributes.position;let m=0;if(d!==null){const x=d.array;m=d.version;for(let y=0,A=x.length;y<A;y+=3){const T=x[y+0],w=x[y+1],M=x[y+2];h.push(T,w,w,M,M,T)}}else if(p!==void 0){const x=p.array;m=p.version;for(let y=0,A=x.length/3-1;y<A;y+=3){const T=y+0,w=y+1,M=y+2;h.push(T,w,w,M,M,T)}}else return;const g=new(mF(h)?E5:x5)(h,1);g.version=m;const v=s.get(f);v&&e.remove(v),s.set(f,g)}function u(f){const h=s.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function Iae(t,e,n,r){const i=r.isWebGL2;let s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function u(d,p){t.drawElements(s,p,a,d*l),n.update(p,s,1)}function f(d,p,m){if(m===0)return;let g,v;if(i)g=t,v="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[v](s,p,a,d*l,m),n.update(p,s,m)}function h(d,p,m){if(m===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<m;v++)this.render(d[v]/l,p[v]);else{g.multiDrawElementsWEBGL(s,p,0,a,d,0,m);let v=0;for(let x=0;x<m;x++)v+=p[x];n.update(v,s,1)}}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=f,this.renderMultiDraw=h}function Pae(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Lae(t,e){return t[0]-e[0]}function Nae(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Oae(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new Xn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,f){const h=c.morphTargetInfluences;if(e.isWebGL2===!0){const d=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=d!==void 0?d.length:0;let m=s.get(u);if(m===void 0||m.count!==p){let x=function(){B.dispose(),s.delete(u),u.removeEventListener("dispose",x)};m!==void 0&&m.texture.dispose();const y=u.morphAttributes.position!==void 0,A=u.morphAttributes.normal!==void 0,T=u.morphAttributes.color!==void 0,w=u.morphAttributes.position||[],M=u.morphAttributes.normal||[],C=u.morphAttributes.color||[];let S=0;y===!0&&(S=1),A===!0&&(S=2),T===!0&&(S=3);let R=u.attributes.position.count*S,O=1;R>e.maxTextureSize&&(O=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const L=new Float32Array(R*O*4*p),B=new UE(L,R,O,p);B.type=fr,B.needsUpdate=!0;const N=S*4;for(let $=0;$<p;$++){const U=w[$],Q=M[$],Y=C[$],ee=R*O*4*$;for(let ne=0;ne<U.count;ne++){const P=ne*N;y===!0&&(o.fromBufferAttribute(U,ne),L[ee+P+0]=o.x,L[ee+P+1]=o.y,L[ee+P+2]=o.z,L[ee+P+3]=0),A===!0&&(o.fromBufferAttribute(Q,ne),L[ee+P+4]=o.x,L[ee+P+5]=o.y,L[ee+P+6]=o.z,L[ee+P+7]=0),T===!0&&(o.fromBufferAttribute(Y,ne),L[ee+P+8]=o.x,L[ee+P+9]=o.y,L[ee+P+10]=o.z,L[ee+P+11]=Y.itemSize===4?o.w:1)}}m={count:p,texture:B,size:new qe(R,O)},s.set(u,m),u.addEventListener("dispose",x)}let g=0;for(let x=0;x<h.length;x++)g+=h[x];const v=u.morphTargetsRelative?1:1-g;f.getUniforms().setValue(t,"morphTargetBaseInfluence",v),f.getUniforms().setValue(t,"morphTargetInfluences",h),f.getUniforms().setValue(t,"morphTargetsTexture",m.texture,n),f.getUniforms().setValue(t,"morphTargetsTextureSize",m.size)}else{const d=h===void 0?0:h.length;let p=r[u.id];if(p===void 0||p.length!==d){p=[];for(let y=0;y<d;y++)p[y]=[y,0];r[u.id]=p}for(let y=0;y<d;y++){const A=p[y];A[0]=y,A[1]=h[y]}p.sort(Nae);for(let y=0;y<8;y++)y<d&&p[y][1]?(a[y][0]=p[y][0],a[y][1]=p[y][1]):(a[y][0]=Number.MAX_SAFE_INTEGER,a[y][1]=0);a.sort(Lae);const m=u.morphAttributes.position,g=u.morphAttributes.normal;let v=0;for(let y=0;y<8;y++){const A=a[y],T=A[0],w=A[1];T!==Number.MAX_SAFE_INTEGER&&w?(m&&u.getAttribute("morphTarget"+y)!==m[T]&&u.setAttribute("morphTarget"+y,m[T]),g&&u.getAttribute("morphNormal"+y)!==g[T]&&u.setAttribute("morphNormal"+y,g[T]),i[y]=w,v+=w):(m&&u.hasAttribute("morphTarget"+y)===!0&&u.deleteAttribute("morphTarget"+y),g&&u.hasAttribute("morphNormal"+y)===!0&&u.deleteAttribute("morphNormal"+y),i[y]=0)}const x=u.morphTargetsRelative?1:1-v;f.getUniforms().setValue(t,"morphTargetBaseInfluence",x),f.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function Dae(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,f=e.get(l,u);if(i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==c&&(h.update(),i.set(h,c))}return f}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}class Ig extends Vn{constructor(e,n,r,i,s,o,a,l,c,u){if(u=u!==void 0?u:Lc,u!==Lc&&u!==fh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Lc&&(r=Ws),r===void 0&&u===fh&&(r=Mu),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Ln,this.minFilter=l!==void 0?l:Ln,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const _F=new Vn,bF=new Ig(1,1);bF.compareFunction=m5;const AF=new UE,TF=new y5,wF=new Rg,wR=[],SR=[],CR=new Float32Array(16),MR=new Float32Array(9),RR=new Float32Array(4);function em(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=wR[i];if(s===void 0&&(s=new Float32Array(i),wR[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function ts(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ns(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function HE(t,e){let n=SR[e];n===void 0&&(n=new Int32Array(e),SR[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Bae(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function kae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ts(n,e))return;t.uniform2fv(this.addr,e),ns(n,e)}}function Fae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ts(n,e))return;t.uniform3fv(this.addr,e),ns(n,e)}}function Uae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ts(n,e))return;t.uniform4fv(this.addr,e),ns(n,e)}}function zae(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ts(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ns(n,e)}else{if(ts(n,r))return;RR.set(r),t.uniformMatrix2fv(this.addr,!1,RR),ns(n,r)}}function Hae(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ts(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ns(n,e)}else{if(ts(n,r))return;MR.set(r),t.uniformMatrix3fv(this.addr,!1,MR),ns(n,r)}}function Gae(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ts(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ns(n,e)}else{if(ts(n,r))return;CR.set(r),t.uniformMatrix4fv(this.addr,!1,CR),ns(n,r)}}function Vae(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Wae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ts(n,e))return;t.uniform2iv(this.addr,e),ns(n,e)}}function jae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ts(n,e))return;t.uniform3iv(this.addr,e),ns(n,e)}}function $ae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ts(n,e))return;t.uniform4iv(this.addr,e),ns(n,e)}}function Xae(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Yae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ts(n,e))return;t.uniform2uiv(this.addr,e),ns(n,e)}}function qae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ts(n,e))return;t.uniform3uiv(this.addr,e),ns(n,e)}}function Kae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ts(n,e))return;t.uniform4uiv(this.addr,e),ns(n,e)}}function Jae(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const s=this.type===t.SAMPLER_2D_SHADOW?bF:_F;n.setTexture2D(e||s,i)}function Qae(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||TF,i)}function Zae(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||wF,i)}function ele(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||AF,i)}function tle(t){switch(t){case 5126:return Bae;case 35664:return kae;case 35665:return Fae;case 35666:return Uae;case 35674:return zae;case 35675:return Hae;case 35676:return Gae;case 5124:case 35670:return Vae;case 35667:case 35671:return Wae;case 35668:case 35672:return jae;case 35669:case 35673:return $ae;case 5125:return Xae;case 36294:return Yae;case 36295:return qae;case 36296:return Kae;case 35678:case 36198:case 36298:case 36306:case 35682:return Jae;case 35679:case 36299:case 36307:return Qae;case 35680:case 36300:case 36308:case 36293:return Zae;case 36289:case 36303:case 36311:case 36292:return ele}}function nle(t,e){t.uniform1fv(this.addr,e)}function rle(t,e){const n=em(e,this.size,2);t.uniform2fv(this.addr,n)}function ile(t,e){const n=em(e,this.size,3);t.uniform3fv(this.addr,n)}function sle(t,e){const n=em(e,this.size,4);t.uniform4fv(this.addr,n)}function ole(t,e){const n=em(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function ale(t,e){const n=em(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function lle(t,e){const n=em(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function cle(t,e){t.uniform1iv(this.addr,e)}function ule(t,e){t.uniform2iv(this.addr,e)}function fle(t,e){t.uniform3iv(this.addr,e)}function hle(t,e){t.uniform4iv(this.addr,e)}function dle(t,e){t.uniform1uiv(this.addr,e)}function ple(t,e){t.uniform2uiv(this.addr,e)}function mle(t,e){t.uniform3uiv(this.addr,e)}function gle(t,e){t.uniform4uiv(this.addr,e)}function vle(t,e,n){const r=this.cache,i=e.length,s=HE(n,i);ts(r,s)||(t.uniform1iv(this.addr,s),ns(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||_F,s[o])}function yle(t,e,n){const r=this.cache,i=e.length,s=HE(n,i);ts(r,s)||(t.uniform1iv(this.addr,s),ns(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||TF,s[o])}function xle(t,e,n){const r=this.cache,i=e.length,s=HE(n,i);ts(r,s)||(t.uniform1iv(this.addr,s),ns(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||wF,s[o])}function Ele(t,e,n){const r=this.cache,i=e.length,s=HE(n,i);ts(r,s)||(t.uniform1iv(this.addr,s),ns(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||AF,s[o])}function _le(t){switch(t){case 5126:return nle;case 35664:return rle;case 35665:return ile;case 35666:return sle;case 35674:return ole;case 35675:return ale;case 35676:return lle;case 5124:case 35670:return cle;case 35667:case 35671:return ule;case 35668:case 35672:return fle;case 35669:case 35673:return hle;case 5125:return dle;case 36294:return ple;case 36295:return mle;case 36296:return gle;case 35678:case 36198:case 36298:case 36306:case 35682:return vle;case 35679:case 36299:case 36307:return yle;case 35680:case 36300:case 36308:case 36293:return xle;case 36289:case 36303:case 36311:case 36292:return Ele}}class ble{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=tle(n.type)}}class Ale{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=_le(n.type)}}class Tle{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const kA=/(\w+)(\])?(\[|\.)?/g;function IR(t,e){t.seq.push(e),t.map[e.id]=e}function wle(t,e,n){const r=t.name,i=r.length;for(kA.lastIndex=0;;){const s=kA.exec(r),o=kA.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){IR(n,c===void 0?new ble(a,t,e):new Ale(a,t,e));break}else{let f=n.map[a];f===void 0&&(f=new Tle(a),IR(n,f)),n=f}}}class r3{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);wle(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function PR(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const Sle=37297;let Cle=0;function Mle(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}function Rle(t){const e=wr.getPrimaries(wr.workingColorSpace),n=wr.getPrimaries(t);let r;switch(e===n?r="":e===q1&&n===Y1?r="LinearDisplayP3ToLinearSRGB":e===Y1&&n===q1&&(r="LinearSRGBToLinearDisplayP3"),t){case sa:case Mg:return[r,"LinearTransferOETF"];case ii:case FE:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function LR(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+Mle(t.getShaderSource(e),o)}else return i}function Ile(t,e){const n=Rle(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Ple(t,e){let n;switch(e){case Yk:n="Linear";break;case qk:n="Reinhard";break;case Kk:n="OptimizedCineon";break;case o5:n="ACESFilmic";break;case Jk:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Lle(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Z0).join(`
`)}function Nle(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function Ole(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Z0(t){return t!==""}function NR(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function OR(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Dle=/^[ \t]*#include +<([\w\d./]+)>/gm;function ES(t){return t.replace(Dle,kle)}const Ble=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function kle(t,e){let n=Dn[e];if(n===void 0){const r=Ble.get(e);if(r!==void 0)n=Dn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return ES(n)}const Fle=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function DR(t){return t.replace(Fle,Ule)}function Ule(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function BR(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function zle(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===LE?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===u1?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===il&&(e="SHADOWMAP_TYPE_VSM"),e}function Hle(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Xl:case Hu:e="ENVMAP_TYPE_CUBE";break;case Kp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Gle(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Hu:e="ENVMAP_MODE_REFRACTION";break}return e}function Vle(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Tg:e="ENVMAP_BLENDING_MULTIPLY";break;case $k:e="ENVMAP_BLENDING_MIX";break;case Xk:e="ENVMAP_BLENDING_ADD";break}return e}function Wle(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function jle(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=zle(n),c=Hle(n),u=Gle(n),f=Vle(n),h=Wle(n),d=n.isWebGL2?"":Lle(n),p=Nle(s),m=i.createProgram();let g,v,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Z0).join(`
`),g.length>0&&(g+=`
`),v=[d,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Z0).join(`
`),v.length>0&&(v+=`
`)):(g=[BR(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Z0).join(`
`),v=[d,BR(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==fl?"#define TONE_MAPPING":"",n.toneMapping!==fl?Dn.tonemapping_pars_fragment:"",n.toneMapping!==fl?Ple("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Dn.colorspace_pars_fragment,Ile("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Z0).join(`
`)),o=ES(o),o=NR(o,n),o=OR(o,n),a=ES(a),a=NR(a,n),a=OR(a,n),o=DR(o),a=DR(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===vS?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===vS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const y=x+g+o,A=x+v+a,T=PR(i,i.VERTEX_SHADER,y),w=PR(i,i.FRAGMENT_SHADER,A);i.attachShader(m,T),i.attachShader(m,w),n.index0AttributeName!==void 0?i.bindAttribLocation(m,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m);function M(O){if(t.debug.checkShaderErrors){const L=i.getProgramInfoLog(m).trim(),B=i.getShaderInfoLog(T).trim(),N=i.getShaderInfoLog(w).trim();let $=!0,U=!0;if(i.getProgramParameter(m,i.LINK_STATUS)===!1)if($=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,m,T,w);else{const Q=LR(i,T,"vertex"),Y=LR(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+`

Program Info Log: `+L+`
`+Q+`
`+Y)}else L!==""?console.warn("THREE.WebGLProgram: Program Info Log:",L):(B===""||N==="")&&(U=!1);U&&(O.diagnostics={runnable:$,programLog:L,vertexShader:{log:B,prefix:g},fragmentShader:{log:N,prefix:v}})}i.deleteShader(T),i.deleteShader(w),C=new r3(i,m),S=Ole(i,m)}let C;this.getUniforms=function(){return C===void 0&&M(this),C};let S;this.getAttributes=function(){return S===void 0&&M(this),S};let R=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=i.getProgramParameter(m,Sle)),R},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Cle++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=T,this.fragmentShader=w,this}let $le=0;class Xle{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Yle(e),n.set(e,r)),r}}class Yle{constructor(e){this.id=$le++,this.code=e,this.usedTimes=0}}function qle(t,e,n,r,i,s,o){const a=new rh,l=new Xle,c=[],u=i.isWebGL2,f=i.logarithmicDepthBuffer,h=i.vertexTextures;let d=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(S){return S===0?"uv":`uv${S}`}function g(S,R,O,L,B){const N=L.fog,$=B.geometry,U=S.isMeshStandardMaterial?L.environment:null,Q=(S.isMeshStandardMaterial?n:e).get(S.envMap||U),Y=Q&&Q.mapping===Kp?Q.image.height:null,ee=p[S.type];S.precision!==null&&(d=i.getMaxPrecision(S.precision),d!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",d,"instead."));const ne=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,P=ne!==void 0?ne.length:0;let se=0;$.morphAttributes.position!==void 0&&(se=1),$.morphAttributes.normal!==void 0&&(se=2),$.morphAttributes.color!==void 0&&(se=3);let re,Z,X,W;if(ee){const Nn=sl[ee];re=Nn.vertexShader,Z=Nn.fragmentShader}else re=S.vertexShader,Z=S.fragmentShader,l.update(S),X=l.getVertexShaderID(S),W=l.getFragmentShaderID(S);const K=t.getRenderTarget(),ge=B.isInstancedMesh===!0,Se=B.isBatchedMesh===!0,xe=!!S.map,Me=!!S.matcap,he=!!Q,Oe=!!S.aoMap,be=!!S.lightMap,Te=!!S.bumpMap,Re=!!S.normalMap,$e=!!S.displacementMap,ve=!!S.emissiveMap,me=!!S.metalnessMap,We=!!S.roughnessMap,Xe=S.anisotropy>0,xt=S.clearcoat>0,fe=S.iridescence>0,ie=S.sheen>0,Ae=S.transmission>0,Je=Xe&&!!S.anisotropyMap,te=xt&&!!S.clearcoatMap,z=xt&&!!S.clearcoatNormalMap,F=xt&&!!S.clearcoatRoughnessMap,ae=fe&&!!S.iridescenceMap,ye=fe&&!!S.iridescenceThicknessMap,Le=ie&&!!S.sheenColorMap,ke=ie&&!!S.sheenRoughnessMap,Ve=!!S.specularMap,Ce=!!S.specularColorMap,Ye=!!S.specularIntensityMap,tt=Ae&&!!S.transmissionMap,it=Ae&&!!S.thicknessMap,dt=!!S.gradientMap,Ze=!!S.alphaMap,Be=S.alphaTest>0,Ft=!!S.alphaHash,St=!!S.extensions,st=!!$.attributes.uv1,It=!!$.attributes.uv2,Ht=!!$.attributes.uv3;let zt=fl;return S.toneMapped&&(K===null||K.isXRRenderTarget===!0)&&(zt=t.toneMapping),{isWebGL2:u,shaderID:ee,shaderType:S.type,shaderName:S.name,vertexShader:re,fragmentShader:Z,defines:S.defines,customVertexShaderID:X,customFragmentShaderID:W,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:d,batching:Se,instancing:ge,instancingColor:ge&&B.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:K===null?t.outputColorSpace:K.isXRRenderTarget===!0?K.texture.colorSpace:sa,map:xe,matcap:Me,envMap:he,envMapMode:he&&Q.mapping,envMapCubeUVHeight:Y,aoMap:Oe,lightMap:be,bumpMap:Te,normalMap:Re,displacementMap:h&&$e,emissiveMap:ve,normalMapObjectSpace:Re&&S.normalMapType===aF,normalMapTangentSpace:Re&&S.normalMapType===Xc,metalnessMap:me,roughnessMap:We,anisotropy:Xe,anisotropyMap:Je,clearcoat:xt,clearcoatMap:te,clearcoatNormalMap:z,clearcoatRoughnessMap:F,iridescence:fe,iridescenceMap:ae,iridescenceThicknessMap:ye,sheen:ie,sheenColorMap:Le,sheenRoughnessMap:ke,specularMap:Ve,specularColorMap:Ce,specularIntensityMap:Ye,transmission:Ae,transmissionMap:tt,thicknessMap:it,gradientMap:dt,opaque:S.transparent===!1&&S.blending===Vl,alphaMap:Ze,alphaTest:Be,alphaHash:Ft,combine:S.combine,mapUv:xe&&m(S.map.channel),aoMapUv:Oe&&m(S.aoMap.channel),lightMapUv:be&&m(S.lightMap.channel),bumpMapUv:Te&&m(S.bumpMap.channel),normalMapUv:Re&&m(S.normalMap.channel),displacementMapUv:$e&&m(S.displacementMap.channel),emissiveMapUv:ve&&m(S.emissiveMap.channel),metalnessMapUv:me&&m(S.metalnessMap.channel),roughnessMapUv:We&&m(S.roughnessMap.channel),anisotropyMapUv:Je&&m(S.anisotropyMap.channel),clearcoatMapUv:te&&m(S.clearcoatMap.channel),clearcoatNormalMapUv:z&&m(S.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:F&&m(S.clearcoatRoughnessMap.channel),iridescenceMapUv:ae&&m(S.iridescenceMap.channel),iridescenceThicknessMapUv:ye&&m(S.iridescenceThicknessMap.channel),sheenColorMapUv:Le&&m(S.sheenColorMap.channel),sheenRoughnessMapUv:ke&&m(S.sheenRoughnessMap.channel),specularMapUv:Ve&&m(S.specularMap.channel),specularColorMapUv:Ce&&m(S.specularColorMap.channel),specularIntensityMapUv:Ye&&m(S.specularIntensityMap.channel),transmissionMapUv:tt&&m(S.transmissionMap.channel),thicknessMapUv:it&&m(S.thicknessMap.channel),alphaMapUv:Ze&&m(S.alphaMap.channel),vertexTangents:!!$.attributes.tangent&&(Re||Xe),vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,vertexUv1s:st,vertexUv2s:It,vertexUv3s:Ht,pointsUvs:B.isPoints===!0&&!!$.attributes.uv&&(xe||Ze),fog:!!N,useFog:S.fog===!0,fogExp2:N&&N.isFogExp2,flatShading:S.flatShading===!0,sizeAttenuation:S.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:B.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:P,morphTextureStride:se,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:S.dithering,shadowMapEnabled:t.shadowMap.enabled&&O.length>0,shadowMapType:t.shadowMap.type,toneMapping:zt,useLegacyLights:t._useLegacyLights,decodeVideoTexture:xe&&S.map.isVideoTexture===!0&&wr.getTransfer(S.map.colorSpace)===zr,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===gr,flipSided:S.side===Ti,useDepthPacking:S.depthPacking>=0,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionDerivatives:St&&S.extensions.derivatives===!0,extensionFragDepth:St&&S.extensions.fragDepth===!0,extensionDrawBuffers:St&&S.extensions.drawBuffers===!0,extensionShaderTextureLOD:St&&S.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:S.customProgramCacheKey()}}function v(S){const R=[];if(S.shaderID?R.push(S.shaderID):(R.push(S.customVertexShaderID),R.push(S.customFragmentShaderID)),S.defines!==void 0)for(const O in S.defines)R.push(O),R.push(S.defines[O]);return S.isRawShaderMaterial===!1&&(x(R,S),y(R,S),R.push(t.outputColorSpace)),R.push(S.customProgramCacheKey),R.join()}function x(S,R){S.push(R.precision),S.push(R.outputColorSpace),S.push(R.envMapMode),S.push(R.envMapCubeUVHeight),S.push(R.mapUv),S.push(R.alphaMapUv),S.push(R.lightMapUv),S.push(R.aoMapUv),S.push(R.bumpMapUv),S.push(R.normalMapUv),S.push(R.displacementMapUv),S.push(R.emissiveMapUv),S.push(R.metalnessMapUv),S.push(R.roughnessMapUv),S.push(R.anisotropyMapUv),S.push(R.clearcoatMapUv),S.push(R.clearcoatNormalMapUv),S.push(R.clearcoatRoughnessMapUv),S.push(R.iridescenceMapUv),S.push(R.iridescenceThicknessMapUv),S.push(R.sheenColorMapUv),S.push(R.sheenRoughnessMapUv),S.push(R.specularMapUv),S.push(R.specularColorMapUv),S.push(R.specularIntensityMapUv),S.push(R.transmissionMapUv),S.push(R.thicknessMapUv),S.push(R.combine),S.push(R.fogExp2),S.push(R.sizeAttenuation),S.push(R.morphTargetsCount),S.push(R.morphAttributeCount),S.push(R.numDirLights),S.push(R.numPointLights),S.push(R.numSpotLights),S.push(R.numSpotLightMaps),S.push(R.numHemiLights),S.push(R.numRectAreaLights),S.push(R.numDirLightShadows),S.push(R.numPointLightShadows),S.push(R.numSpotLightShadows),S.push(R.numSpotLightShadowsWithMaps),S.push(R.numLightProbes),S.push(R.shadowMapType),S.push(R.toneMapping),S.push(R.numClippingPlanes),S.push(R.numClipIntersection),S.push(R.depthPacking)}function y(S,R){a.disableAll(),R.isWebGL2&&a.enable(0),R.supportsVertexTextures&&a.enable(1),R.instancing&&a.enable(2),R.instancingColor&&a.enable(3),R.matcap&&a.enable(4),R.envMap&&a.enable(5),R.normalMapObjectSpace&&a.enable(6),R.normalMapTangentSpace&&a.enable(7),R.clearcoat&&a.enable(8),R.iridescence&&a.enable(9),R.alphaTest&&a.enable(10),R.vertexColors&&a.enable(11),R.vertexAlphas&&a.enable(12),R.vertexUv1s&&a.enable(13),R.vertexUv2s&&a.enable(14),R.vertexUv3s&&a.enable(15),R.vertexTangents&&a.enable(16),R.anisotropy&&a.enable(17),R.alphaHash&&a.enable(18),R.batching&&a.enable(19),S.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.skinning&&a.enable(4),R.morphTargets&&a.enable(5),R.morphNormals&&a.enable(6),R.morphColors&&a.enable(7),R.premultipliedAlpha&&a.enable(8),R.shadowMapEnabled&&a.enable(9),R.useLegacyLights&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.transmission&&a.enable(15),R.sheen&&a.enable(16),R.opaque&&a.enable(17),R.pointsUvs&&a.enable(18),R.decodeVideoTexture&&a.enable(19),S.push(a.mask)}function A(S){const R=p[S.type];let O;if(R){const L=sl[R];O=Gu.clone(L.uniforms)}else O=S.uniforms;return O}function T(S,R){let O;for(let L=0,B=c.length;L<B;L++){const N=c[L];if(N.cacheKey===R){O=N,++O.usedTimes;break}}return O===void 0&&(O=new jle(t,R,S,s),c.push(O)),O}function w(S){if(--S.usedTimes===0){const R=c.indexOf(S);c[R]=c[c.length-1],c.pop(),S.destroy()}}function M(S){l.remove(S)}function C(){l.dispose()}return{getParameters:g,getProgramCacheKey:v,getUniforms:A,acquireProgram:T,releaseProgram:w,releaseShaderCache:M,programs:c,dispose:C}}function Kle(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function r(s,o,a){t.get(s)[o]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function Jle(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function kR(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function FR(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(f,h,d,p,m,g){let v=t[e];return v===void 0?(v={id:f.id,object:f,geometry:h,material:d,groupOrder:p,renderOrder:f.renderOrder,z:m,group:g},t[e]=v):(v.id=f.id,v.object=f,v.geometry=h,v.material=d,v.groupOrder=p,v.renderOrder=f.renderOrder,v.z=m,v.group=g),e++,v}function a(f,h,d,p,m,g){const v=o(f,h,d,p,m,g);d.transmission>0?r.push(v):d.transparent===!0?i.push(v):n.push(v)}function l(f,h,d,p,m,g){const v=o(f,h,d,p,m,g);d.transmission>0?r.unshift(v):d.transparent===!0?i.unshift(v):n.unshift(v)}function c(f,h){n.length>1&&n.sort(f||Jle),r.length>1&&r.sort(h||kR),i.length>1&&i.sort(h||kR)}function u(){for(let f=e,h=t.length;f<h;f++){const d=t[f];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function Qle(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new FR,t.set(r,[o])):i>=s.length?(o=new FR,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function Zle(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new J,color:new bt};break;case"SpotLight":n={position:new J,direction:new J,color:new bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new J,color:new bt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new J,skyColor:new bt,groundColor:new bt};break;case"RectAreaLight":n={color:new bt,position:new J,halfWidth:new J,halfHeight:new J};break}return t[e.id]=n,n}}}function ece(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let tce=0;function nce(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function rce(t,e){const n=new Zle,r=ece(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new J);const s=new J,o=new yt,a=new yt;function l(u,f){let h=0,d=0,p=0;for(let L=0;L<9;L++)i.probe[L].set(0,0,0);let m=0,g=0,v=0,x=0,y=0,A=0,T=0,w=0,M=0,C=0,S=0;u.sort(nce);const R=f===!0?Math.PI:1;for(let L=0,B=u.length;L<B;L++){const N=u[L],$=N.color,U=N.intensity,Q=N.distance,Y=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)h+=$.r*U*R,d+=$.g*U*R,p+=$.b*U*R;else if(N.isLightProbe){for(let ee=0;ee<9;ee++)i.probe[ee].addScaledVector(N.sh.coefficients[ee],U);S++}else if(N.isDirectionalLight){const ee=n.get(N);if(ee.color.copy(N.color).multiplyScalar(N.intensity*R),N.castShadow){const ne=N.shadow,P=r.get(N);P.shadowBias=ne.bias,P.shadowNormalBias=ne.normalBias,P.shadowRadius=ne.radius,P.shadowMapSize=ne.mapSize,i.directionalShadow[m]=P,i.directionalShadowMap[m]=Y,i.directionalShadowMatrix[m]=N.shadow.matrix,A++}i.directional[m]=ee,m++}else if(N.isSpotLight){const ee=n.get(N);ee.position.setFromMatrixPosition(N.matrixWorld),ee.color.copy($).multiplyScalar(U*R),ee.distance=Q,ee.coneCos=Math.cos(N.angle),ee.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),ee.decay=N.decay,i.spot[v]=ee;const ne=N.shadow;if(N.map&&(i.spotLightMap[M]=N.map,M++,ne.updateMatrices(N),N.castShadow&&C++),i.spotLightMatrix[v]=ne.matrix,N.castShadow){const P=r.get(N);P.shadowBias=ne.bias,P.shadowNormalBias=ne.normalBias,P.shadowRadius=ne.radius,P.shadowMapSize=ne.mapSize,i.spotShadow[v]=P,i.spotShadowMap[v]=Y,w++}v++}else if(N.isRectAreaLight){const ee=n.get(N);ee.color.copy($).multiplyScalar(U),ee.halfWidth.set(N.width*.5,0,0),ee.halfHeight.set(0,N.height*.5,0),i.rectArea[x]=ee,x++}else if(N.isPointLight){const ee=n.get(N);if(ee.color.copy(N.color).multiplyScalar(N.intensity*R),ee.distance=N.distance,ee.decay=N.decay,N.castShadow){const ne=N.shadow,P=r.get(N);P.shadowBias=ne.bias,P.shadowNormalBias=ne.normalBias,P.shadowRadius=ne.radius,P.shadowMapSize=ne.mapSize,P.shadowCameraNear=ne.camera.near,P.shadowCameraFar=ne.camera.far,i.pointShadow[g]=P,i.pointShadowMap[g]=Y,i.pointShadowMatrix[g]=N.shadow.matrix,T++}i.point[g]=ee,g++}else if(N.isHemisphereLight){const ee=n.get(N);ee.skyColor.copy(N.color).multiplyScalar(U*R),ee.groundColor.copy(N.groundColor).multiplyScalar(U*R),i.hemi[y]=ee,y++}}x>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Wt.LTC_FLOAT_1,i.rectAreaLTC2=Wt.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Wt.LTC_HALF_1,i.rectAreaLTC2=Wt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=p;const O=i.hash;(O.directionalLength!==m||O.pointLength!==g||O.spotLength!==v||O.rectAreaLength!==x||O.hemiLength!==y||O.numDirectionalShadows!==A||O.numPointShadows!==T||O.numSpotShadows!==w||O.numSpotMaps!==M||O.numLightProbes!==S)&&(i.directional.length=m,i.spot.length=v,i.rectArea.length=x,i.point.length=g,i.hemi.length=y,i.directionalShadow.length=A,i.directionalShadowMap.length=A,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=A,i.pointShadowMatrix.length=T,i.spotLightMatrix.length=w+M-C,i.spotLightMap.length=M,i.numSpotLightShadowsWithMaps=C,i.numLightProbes=S,O.directionalLength=m,O.pointLength=g,O.spotLength=v,O.rectAreaLength=x,O.hemiLength=y,O.numDirectionalShadows=A,O.numPointShadows=T,O.numSpotShadows=w,O.numSpotMaps=M,O.numLightProbes=S,i.version=tce++)}function c(u,f){let h=0,d=0,p=0,m=0,g=0;const v=f.matrixWorldInverse;for(let x=0,y=u.length;x<y;x++){const A=u[x];if(A.isDirectionalLight){const T=i.directional[h];T.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(v),h++}else if(A.isSpotLight){const T=i.spot[p];T.position.setFromMatrixPosition(A.matrixWorld),T.position.applyMatrix4(v),T.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(v),p++}else if(A.isRectAreaLight){const T=i.rectArea[m];T.position.setFromMatrixPosition(A.matrixWorld),T.position.applyMatrix4(v),a.identity(),o.copy(A.matrixWorld),o.premultiply(v),a.extractRotation(o),T.halfWidth.set(A.width*.5,0,0),T.halfHeight.set(0,A.height*.5,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),m++}else if(A.isPointLight){const T=i.point[d];T.position.setFromMatrixPosition(A.matrixWorld),T.position.applyMatrix4(v),d++}else if(A.isHemisphereLight){const T=i.hemi[g];T.direction.setFromMatrixPosition(A.matrixWorld),T.direction.transformDirection(v),g++}}}return{setup:l,setupView:c,state:i}}function UR(t,e){const n=new rce(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(f){r.push(f)}function a(f){i.push(f)}function l(f){n.setup(r,f)}function c(f){n.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function ice(t,e){let n=new WeakMap;function r(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new UR(t,e),n.set(s,[l])):o>=a.length?(l=new UR(t,e),a.push(l)):l=a[o],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class tm extends Gr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=oF,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class GE extends Gr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const sce=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,oce=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ace(t,e,n){let r=new _h;const i=new qe,s=new qe,o=new Xn,a=new tm({depthPacking:p5}),l=new GE,c={},u=n.maxTextureSize,f={[es]:Ti,[Ti]:es,[gr]:gr},h=new ur({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qe},radius:{value:4}},vertexShader:sce,fragmentShader:oce}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const p=new on;p.setAttribute("position",new Qt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new un(p,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=LE;let v=this.type;this.render=function(T,w,M){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||T.length===0)return;const C=t.getRenderTarget(),S=t.getActiveCubeFace(),R=t.getActiveMipmapLevel(),O=t.state;O.setBlending(Da),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const L=v!==il&&this.type===il,B=v===il&&this.type!==il;for(let N=0,$=T.length;N<$;N++){const U=T[N],Q=U.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",U,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;i.copy(Q.mapSize);const Y=Q.getFrameExtents();if(i.multiply(Y),s.copy(Q.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/Y.x),i.x=s.x*Y.x,Q.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/Y.y),i.y=s.y*Y.y,Q.mapSize.y=s.y)),Q.map===null||L===!0||B===!0){const ne=this.type!==il?{minFilter:Ln,magFilter:Ln}:{};Q.map!==null&&Q.map.dispose(),Q.map=new pr(i.x,i.y,ne),Q.map.texture.name=U.name+".shadowMap",Q.camera.updateProjectionMatrix()}t.setRenderTarget(Q.map),t.clear();const ee=Q.getViewportCount();for(let ne=0;ne<ee;ne++){const P=Q.getViewport(ne);o.set(s.x*P.x,s.y*P.y,s.x*P.z,s.y*P.w),O.viewport(o),Q.updateMatrices(U,ne),r=Q.getFrustum(),A(w,M,Q.camera,U,this.type)}Q.isPointLightShadow!==!0&&this.type===il&&x(Q,M),Q.needsUpdate=!1}v=this.type,g.needsUpdate=!1,t.setRenderTarget(C,S,R)};function x(T,w){const M=e.update(m);h.defines.VSM_SAMPLES!==T.blurSamples&&(h.defines.VSM_SAMPLES=T.blurSamples,d.defines.VSM_SAMPLES=T.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new pr(i.x,i.y)),h.uniforms.shadow_pass.value=T.map.texture,h.uniforms.resolution.value=T.mapSize,h.uniforms.radius.value=T.radius,t.setRenderTarget(T.mapPass),t.clear(),t.renderBufferDirect(w,null,M,h,m,null),d.uniforms.shadow_pass.value=T.mapPass.texture,d.uniforms.resolution.value=T.mapSize,d.uniforms.radius.value=T.radius,t.setRenderTarget(T.map),t.clear(),t.renderBufferDirect(w,null,M,d,m,null)}function y(T,w,M,C){let S=null;const R=M.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(R!==void 0)S=R;else if(S=M.isPointLight===!0?l:a,t.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){const O=S.uuid,L=w.uuid;let B=c[O];B===void 0&&(B={},c[O]=B);let N=B[L];N===void 0&&(N=S.clone(),B[L]=N),S=N}if(S.visible=w.visible,S.wireframe=w.wireframe,C===il?S.side=w.shadowSide!==null?w.shadowSide:w.side:S.side=w.shadowSide!==null?w.shadowSide:f[w.side],S.alphaMap=w.alphaMap,S.alphaTest=w.alphaTest,S.map=w.map,S.clipShadows=w.clipShadows,S.clippingPlanes=w.clippingPlanes,S.clipIntersection=w.clipIntersection,S.displacementMap=w.displacementMap,S.displacementScale=w.displacementScale,S.displacementBias=w.displacementBias,S.wireframeLinewidth=w.wireframeLinewidth,S.linewidth=w.linewidth,M.isPointLight===!0&&S.isMeshDistanceMaterial===!0){const O=t.properties.get(S);O.light=M}return S}function A(T,w,M,C,S){if(T.visible===!1)return;if(T.layers.test(w.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&S===il)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,T.matrixWorld);const L=e.update(T),B=T.material;if(Array.isArray(B)){const N=L.groups;for(let $=0,U=N.length;$<U;$++){const Q=N[$],Y=B[Q.materialIndex];if(Y&&Y.visible){const ee=y(T,Y,C,S);T.onBeforeShadow(t,T,w,M,L,ee,Q),t.renderBufferDirect(M,null,L,ee,T,Q),T.onAfterShadow(t,T,w,M,L,ee,Q)}}}else if(B.visible){const N=y(T,B,C,S);T.onBeforeShadow(t,T,w,M,L,N,null),t.renderBufferDirect(M,null,L,N,T,null),T.onAfterShadow(t,T,w,M,L,N,null)}}const O=T.children;for(let L=0,B=O.length;L<B;L++)A(O[L],w,M,C,S)}}function lce(t,e,n){const r=n.isWebGL2;function i(){let Be=!1;const Ft=new Xn;let St=null;const st=new Xn(0,0,0,0);return{setMask:function(It){St!==It&&!Be&&(t.colorMask(It,It,It,It),St=It)},setLocked:function(It){Be=It},setClear:function(It,Ht,zt,$t,Nn){Nn===!0&&(It*=$t,Ht*=$t,zt*=$t),Ft.set(It,Ht,zt,$t),st.equals(Ft)===!1&&(t.clearColor(It,Ht,zt,$t),st.copy(Ft))},reset:function(){Be=!1,St=null,st.set(-1,0,0,0)}}}function s(){let Be=!1,Ft=null,St=null,st=null;return{setTest:function(It){It?Se(t.DEPTH_TEST):xe(t.DEPTH_TEST)},setMask:function(It){Ft!==It&&!Be&&(t.depthMask(It),Ft=It)},setFunc:function(It){if(St!==It){switch(It){case Uk:t.depthFunc(t.NEVER);break;case zk:t.depthFunc(t.ALWAYS);break;case Hk:t.depthFunc(t.LESS);break;case V1:t.depthFunc(t.LEQUAL);break;case Gk:t.depthFunc(t.EQUAL);break;case Vk:t.depthFunc(t.GEQUAL);break;case Wk:t.depthFunc(t.GREATER);break;case jk:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}St=It}},setLocked:function(It){Be=It},setClear:function(It){st!==It&&(t.clearDepth(It),st=It)},reset:function(){Be=!1,Ft=null,St=null,st=null}}}function o(){let Be=!1,Ft=null,St=null,st=null,It=null,Ht=null,zt=null,$t=null,Nn=null;return{setTest:function(Tn){Be||(Tn?Se(t.STENCIL_TEST):xe(t.STENCIL_TEST))},setMask:function(Tn){Ft!==Tn&&!Be&&(t.stencilMask(Tn),Ft=Tn)},setFunc:function(Tn,Fn,vr){(St!==Tn||st!==Fn||It!==vr)&&(t.stencilFunc(Tn,Fn,vr),St=Tn,st=Fn,It=vr)},setOp:function(Tn,Fn,vr){(Ht!==Tn||zt!==Fn||$t!==vr)&&(t.stencilOp(Tn,Fn,vr),Ht=Tn,zt=Fn,$t=vr)},setLocked:function(Tn){Be=Tn},setClear:function(Tn){Nn!==Tn&&(t.clearStencil(Tn),Nn=Tn)},reset:function(){Be=!1,Ft=null,St=null,st=null,It=null,Ht=null,zt=null,$t=null,Nn=null}}}const a=new i,l=new s,c=new o,u=new WeakMap,f=new WeakMap;let h={},d={},p=new WeakMap,m=[],g=null,v=!1,x=null,y=null,A=null,T=null,w=null,M=null,C=null,S=new bt(0,0,0),R=0,O=!1,L=null,B=null,N=null,$=null,U=null;const Q=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,ee=0;const ne=t.getParameter(t.VERSION);ne.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(ne)[1]),Y=ee>=1):ne.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),Y=ee>=2);let P=null,se={};const re=t.getParameter(t.SCISSOR_BOX),Z=t.getParameter(t.VIEWPORT),X=new Xn().fromArray(re),W=new Xn().fromArray(Z);function K(Be,Ft,St,st){const It=new Uint8Array(4),Ht=t.createTexture();t.bindTexture(Be,Ht),t.texParameteri(Be,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Be,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let zt=0;zt<St;zt++)r&&(Be===t.TEXTURE_3D||Be===t.TEXTURE_2D_ARRAY)?t.texImage3D(Ft,0,t.RGBA,1,1,st,0,t.RGBA,t.UNSIGNED_BYTE,It):t.texImage2D(Ft+zt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,It);return Ht}const ge={};ge[t.TEXTURE_2D]=K(t.TEXTURE_2D,t.TEXTURE_2D,1),ge[t.TEXTURE_CUBE_MAP]=K(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(ge[t.TEXTURE_2D_ARRAY]=K(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),ge[t.TEXTURE_3D]=K(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Se(t.DEPTH_TEST),l.setFunc(V1),ve(!1),me(Uw),Se(t.CULL_FACE),Re(Da);function Se(Be){h[Be]!==!0&&(t.enable(Be),h[Be]=!0)}function xe(Be){h[Be]!==!1&&(t.disable(Be),h[Be]=!1)}function Me(Be,Ft){return d[Be]!==Ft?(t.bindFramebuffer(Be,Ft),d[Be]=Ft,r&&(Be===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=Ft),Be===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=Ft)),!0):!1}function he(Be,Ft){let St=m,st=!1;if(Be)if(St=p.get(Ft),St===void 0&&(St=[],p.set(Ft,St)),Be.isWebGLMultipleRenderTargets){const It=Be.texture;if(St.length!==It.length||St[0]!==t.COLOR_ATTACHMENT0){for(let Ht=0,zt=It.length;Ht<zt;Ht++)St[Ht]=t.COLOR_ATTACHMENT0+Ht;St.length=It.length,st=!0}}else St[0]!==t.COLOR_ATTACHMENT0&&(St[0]=t.COLOR_ATTACHMENT0,st=!0);else St[0]!==t.BACK&&(St[0]=t.BACK,st=!0);st&&(n.isWebGL2?t.drawBuffers(St):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(St))}function Oe(Be){return g!==Be?(t.useProgram(Be),g=Be,!0):!1}const be={[Au]:t.FUNC_ADD,[wk]:t.FUNC_SUBTRACT,[Sk]:t.FUNC_REVERSE_SUBTRACT};if(r)be[Gw]=t.MIN,be[Vw]=t.MAX;else{const Be=e.get("EXT_blend_minmax");Be!==null&&(be[Gw]=Be.MIN_EXT,be[Vw]=Be.MAX_EXT)}const Te={[Ck]:t.ZERO,[OE]:t.ONE,[Mk]:t.SRC_COLOR,[G1]:t.SRC_ALPHA,[Ok]:t.SRC_ALPHA_SATURATE,[Lk]:t.DST_COLOR,[Ik]:t.DST_ALPHA,[Rk]:t.ONE_MINUS_SRC_COLOR,[B3]:t.ONE_MINUS_SRC_ALPHA,[Nk]:t.ONE_MINUS_DST_COLOR,[Pk]:t.ONE_MINUS_DST_ALPHA,[Dk]:t.CONSTANT_COLOR,[Bk]:t.ONE_MINUS_CONSTANT_COLOR,[kk]:t.CONSTANT_ALPHA,[Fk]:t.ONE_MINUS_CONSTANT_ALPHA};function Re(Be,Ft,St,st,It,Ht,zt,$t,Nn,Tn){if(Be===Da){v===!0&&(xe(t.BLEND),v=!1);return}if(v===!1&&(Se(t.BLEND),v=!0),Be!==NE){if(Be!==x||Tn!==O){if((y!==Au||w!==Au)&&(t.blendEquation(t.FUNC_ADD),y=Au,w=Au),Tn)switch(Be){case Vl:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case D3:t.blendFunc(t.ONE,t.ONE);break;case zw:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Hw:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Be);break}else switch(Be){case Vl:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case D3:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case zw:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Hw:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Be);break}A=null,T=null,M=null,C=null,S.set(0,0,0),R=0,x=Be,O=Tn}return}It=It||Ft,Ht=Ht||St,zt=zt||st,(Ft!==y||It!==w)&&(t.blendEquationSeparate(be[Ft],be[It]),y=Ft,w=It),(St!==A||st!==T||Ht!==M||zt!==C)&&(t.blendFuncSeparate(Te[St],Te[st],Te[Ht],Te[zt]),A=St,T=st,M=Ht,C=zt),($t.equals(S)===!1||Nn!==R)&&(t.blendColor($t.r,$t.g,$t.b,Nn),S.copy($t),R=Nn),x=Be,O=!1}function $e(Be,Ft){Be.side===gr?xe(t.CULL_FACE):Se(t.CULL_FACE);let St=Be.side===Ti;Ft&&(St=!St),ve(St),Be.blending===Vl&&Be.transparent===!1?Re(Da):Re(Be.blending,Be.blendEquation,Be.blendSrc,Be.blendDst,Be.blendEquationAlpha,Be.blendSrcAlpha,Be.blendDstAlpha,Be.blendColor,Be.blendAlpha,Be.premultipliedAlpha),l.setFunc(Be.depthFunc),l.setTest(Be.depthTest),l.setMask(Be.depthWrite),a.setMask(Be.colorWrite);const st=Be.stencilWrite;c.setTest(st),st&&(c.setMask(Be.stencilWriteMask),c.setFunc(Be.stencilFunc,Be.stencilRef,Be.stencilFuncMask),c.setOp(Be.stencilFail,Be.stencilZFail,Be.stencilZPass)),Xe(Be.polygonOffset,Be.polygonOffsetFactor,Be.polygonOffsetUnits),Be.alphaToCoverage===!0?Se(t.SAMPLE_ALPHA_TO_COVERAGE):xe(t.SAMPLE_ALPHA_TO_COVERAGE)}function ve(Be){L!==Be&&(Be?t.frontFace(t.CW):t.frontFace(t.CCW),L=Be)}function me(Be){Be!==bk?(Se(t.CULL_FACE),Be!==B&&(Be===Uw?t.cullFace(t.BACK):Be===Ak?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):xe(t.CULL_FACE),B=Be}function We(Be){Be!==N&&(Y&&t.lineWidth(Be),N=Be)}function Xe(Be,Ft,St){Be?(Se(t.POLYGON_OFFSET_FILL),($!==Ft||U!==St)&&(t.polygonOffset(Ft,St),$=Ft,U=St)):xe(t.POLYGON_OFFSET_FILL)}function xt(Be){Be?Se(t.SCISSOR_TEST):xe(t.SCISSOR_TEST)}function fe(Be){Be===void 0&&(Be=t.TEXTURE0+Q-1),P!==Be&&(t.activeTexture(Be),P=Be)}function ie(Be,Ft,St){St===void 0&&(P===null?St=t.TEXTURE0+Q-1:St=P);let st=se[St];st===void 0&&(st={type:void 0,texture:void 0},se[St]=st),(st.type!==Be||st.texture!==Ft)&&(P!==St&&(t.activeTexture(St),P=St),t.bindTexture(Be,Ft||ge[Be]),st.type=Be,st.texture=Ft)}function Ae(){const Be=se[P];Be!==void 0&&Be.type!==void 0&&(t.bindTexture(Be.type,null),Be.type=void 0,Be.texture=void 0)}function Je(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function te(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function z(){try{t.texSubImage2D.apply(t,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function F(){try{t.texSubImage3D.apply(t,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function ae(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function ye(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Le(){try{t.texStorage2D.apply(t,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function ke(){try{t.texStorage3D.apply(t,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Ve(){try{t.texImage2D.apply(t,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Ce(){try{t.texImage3D.apply(t,arguments)}catch(Be){console.error("THREE.WebGLState:",Be)}}function Ye(Be){X.equals(Be)===!1&&(t.scissor(Be.x,Be.y,Be.z,Be.w),X.copy(Be))}function tt(Be){W.equals(Be)===!1&&(t.viewport(Be.x,Be.y,Be.z,Be.w),W.copy(Be))}function it(Be,Ft){let St=f.get(Ft);St===void 0&&(St=new WeakMap,f.set(Ft,St));let st=St.get(Be);st===void 0&&(st=t.getUniformBlockIndex(Ft,Be.name),St.set(Be,st))}function dt(Be,Ft){const st=f.get(Ft).get(Be);u.get(Ft)!==st&&(t.uniformBlockBinding(Ft,st,Be.__bindingPointIndex),u.set(Ft,st))}function Ze(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},P=null,se={},d={},p=new WeakMap,m=[],g=null,v=!1,x=null,y=null,A=null,T=null,w=null,M=null,C=null,S=new bt(0,0,0),R=0,O=!1,L=null,B=null,N=null,$=null,U=null,X.set(0,0,t.canvas.width,t.canvas.height),W.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:Se,disable:xe,bindFramebuffer:Me,drawBuffers:he,useProgram:Oe,setBlending:Re,setMaterial:$e,setFlipSided:ve,setCullFace:me,setLineWidth:We,setPolygonOffset:Xe,setScissorTest:xt,activeTexture:fe,bindTexture:ie,unbindTexture:Ae,compressedTexImage2D:Je,compressedTexImage3D:te,texImage2D:Ve,texImage3D:Ce,updateUBOMapping:it,uniformBlockBinding:dt,texStorage2D:Le,texStorage3D:ke,texSubImage2D:z,texSubImage3D:F,compressedTexSubImage2D:ae,compressedTexSubImage3D:ye,scissor:Ye,viewport:tt,reset:Ze}}function cce(t,e,n,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,f=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(fe,ie){return v?new OffscreenCanvas(fe,ie):J1("canvas")}function y(fe,ie,Ae,Je){let te=1;if((fe.width>Je||fe.height>Je)&&(te=Je/Math.max(fe.width,fe.height)),te<1||ie===!0)if(typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&fe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&fe instanceof ImageBitmap){const z=ie?U3:Math.floor,F=z(te*fe.width),ae=z(te*fe.height);m===void 0&&(m=x(F,ae));const ye=Ae?x(F,ae):m;return ye.width=F,ye.height=ae,ye.getContext("2d").drawImage(fe,0,0,F,ae),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+fe.width+"x"+fe.height+") to ("+F+"x"+ae+")."),ye}else return"data"in fe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+fe.width+"x"+fe.height+")."),fe;return fe}function A(fe){return yS(fe.width)&&yS(fe.height)}function T(fe){return a?!1:fe.wrapS!==Er||fe.wrapT!==Er||fe.minFilter!==Ln&&fe.minFilter!==Cn}function w(fe,ie){return fe.generateMipmaps&&ie&&fe.minFilter!==Ln&&fe.minFilter!==Cn}function M(fe){t.generateMipmap(fe)}function C(fe,ie,Ae,Je,te=!1){if(a===!1)return ie;if(fe!==null){if(t[fe]!==void 0)return t[fe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+fe+"'")}let z=ie;if(ie===t.RED&&(Ae===t.FLOAT&&(z=t.R32F),Ae===t.HALF_FLOAT&&(z=t.R16F),Ae===t.UNSIGNED_BYTE&&(z=t.R8)),ie===t.RED_INTEGER&&(Ae===t.UNSIGNED_BYTE&&(z=t.R8UI),Ae===t.UNSIGNED_SHORT&&(z=t.R16UI),Ae===t.UNSIGNED_INT&&(z=t.R32UI),Ae===t.BYTE&&(z=t.R8I),Ae===t.SHORT&&(z=t.R16I),Ae===t.INT&&(z=t.R32I)),ie===t.RG&&(Ae===t.FLOAT&&(z=t.RG32F),Ae===t.HALF_FLOAT&&(z=t.RG16F),Ae===t.UNSIGNED_BYTE&&(z=t.RG8)),ie===t.RGBA){const F=te?X1:wr.getTransfer(Je);Ae===t.FLOAT&&(z=t.RGBA32F),Ae===t.HALF_FLOAT&&(z=t.RGBA16F),Ae===t.UNSIGNED_BYTE&&(z=F===zr?t.SRGB8_ALPHA8:t.RGBA8),Ae===t.UNSIGNED_SHORT_4_4_4_4&&(z=t.RGBA4),Ae===t.UNSIGNED_SHORT_5_5_5_1&&(z=t.RGB5_A1)}return(z===t.R16F||z===t.R32F||z===t.RG16F||z===t.RG32F||z===t.RGBA16F||z===t.RGBA32F)&&e.get("EXT_color_buffer_float"),z}function S(fe,ie,Ae){return w(fe,Ae)===!0||fe.isFramebufferTexture&&fe.minFilter!==Ln&&fe.minFilter!==Cn?Math.log2(Math.max(ie.width,ie.height))+1:fe.mipmaps!==void 0&&fe.mipmaps.length>0?fe.mipmaps.length:fe.isCompressedTexture&&Array.isArray(fe.image)?ie.mipmaps.length:1}function R(fe){return fe===Ln||fe===Ip||fe===Zf?t.NEAREST:t.LINEAR}function O(fe){const ie=fe.target;ie.removeEventListener("dispose",O),B(ie),ie.isVideoTexture&&p.delete(ie)}function L(fe){const ie=fe.target;ie.removeEventListener("dispose",L),$(ie)}function B(fe){const ie=r.get(fe);if(ie.__webglInit===void 0)return;const Ae=fe.source,Je=g.get(Ae);if(Je){const te=Je[ie.__cacheKey];te.usedTimes--,te.usedTimes===0&&N(fe),Object.keys(Je).length===0&&g.delete(Ae)}r.remove(fe)}function N(fe){const ie=r.get(fe);t.deleteTexture(ie.__webglTexture);const Ae=fe.source,Je=g.get(Ae);delete Je[ie.__cacheKey],o.memory.textures--}function $(fe){const ie=fe.texture,Ae=r.get(fe),Je=r.get(ie);if(Je.__webglTexture!==void 0&&(t.deleteTexture(Je.__webglTexture),o.memory.textures--),fe.depthTexture&&fe.depthTexture.dispose(),fe.isWebGLCubeRenderTarget)for(let te=0;te<6;te++){if(Array.isArray(Ae.__webglFramebuffer[te]))for(let z=0;z<Ae.__webglFramebuffer[te].length;z++)t.deleteFramebuffer(Ae.__webglFramebuffer[te][z]);else t.deleteFramebuffer(Ae.__webglFramebuffer[te]);Ae.__webglDepthbuffer&&t.deleteRenderbuffer(Ae.__webglDepthbuffer[te])}else{if(Array.isArray(Ae.__webglFramebuffer))for(let te=0;te<Ae.__webglFramebuffer.length;te++)t.deleteFramebuffer(Ae.__webglFramebuffer[te]);else t.deleteFramebuffer(Ae.__webglFramebuffer);if(Ae.__webglDepthbuffer&&t.deleteRenderbuffer(Ae.__webglDepthbuffer),Ae.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Ae.__webglMultisampledFramebuffer),Ae.__webglColorRenderbuffer)for(let te=0;te<Ae.__webglColorRenderbuffer.length;te++)Ae.__webglColorRenderbuffer[te]&&t.deleteRenderbuffer(Ae.__webglColorRenderbuffer[te]);Ae.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Ae.__webglDepthRenderbuffer)}if(fe.isWebGLMultipleRenderTargets)for(let te=0,z=ie.length;te<z;te++){const F=r.get(ie[te]);F.__webglTexture&&(t.deleteTexture(F.__webglTexture),o.memory.textures--),r.remove(ie[te])}r.remove(ie),r.remove(fe)}let U=0;function Q(){U=0}function Y(){const fe=U;return fe>=l&&console.warn("THREE.WebGLTextures: Trying to use "+fe+" texture units while this GPU supports only "+l),U+=1,fe}function ee(fe){const ie=[];return ie.push(fe.wrapS),ie.push(fe.wrapT),ie.push(fe.wrapR||0),ie.push(fe.magFilter),ie.push(fe.minFilter),ie.push(fe.anisotropy),ie.push(fe.internalFormat),ie.push(fe.format),ie.push(fe.type),ie.push(fe.generateMipmaps),ie.push(fe.premultiplyAlpha),ie.push(fe.flipY),ie.push(fe.unpackAlignment),ie.push(fe.colorSpace),ie.join()}function ne(fe,ie){const Ae=r.get(fe);if(fe.isVideoTexture&&Xe(fe),fe.isRenderTargetTexture===!1&&fe.version>0&&Ae.__version!==fe.version){const Je=fe.image;if(Je===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Je.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Se(Ae,fe,ie);return}}n.bindTexture(t.TEXTURE_2D,Ae.__webglTexture,t.TEXTURE0+ie)}function P(fe,ie){const Ae=r.get(fe);if(fe.version>0&&Ae.__version!==fe.version){Se(Ae,fe,ie);return}n.bindTexture(t.TEXTURE_2D_ARRAY,Ae.__webglTexture,t.TEXTURE0+ie)}function se(fe,ie){const Ae=r.get(fe);if(fe.version>0&&Ae.__version!==fe.version){Se(Ae,fe,ie);return}n.bindTexture(t.TEXTURE_3D,Ae.__webglTexture,t.TEXTURE0+ie)}function re(fe,ie){const Ae=r.get(fe);if(fe.version>0&&Ae.__version!==fe.version){xe(Ae,fe,ie);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Ae.__webglTexture,t.TEXTURE0+ie)}const Z={[Rr]:t.REPEAT,[Er]:t.CLAMP_TO_EDGE,[uh]:t.MIRRORED_REPEAT},X={[Ln]:t.NEAREST,[Ip]:t.NEAREST_MIPMAP_NEAREST,[Zf]:t.NEAREST_MIPMAP_LINEAR,[Cn]:t.LINEAR,[wg]:t.LINEAR_MIPMAP_NEAREST,[js]:t.LINEAR_MIPMAP_LINEAR},W={[lF]:t.NEVER,[pF]:t.ALWAYS,[cF]:t.LESS,[m5]:t.LEQUAL,[uF]:t.EQUAL,[dF]:t.GEQUAL,[fF]:t.GREATER,[hF]:t.NOTEQUAL};function K(fe,ie,Ae){if(Ae?(t.texParameteri(fe,t.TEXTURE_WRAP_S,Z[ie.wrapS]),t.texParameteri(fe,t.TEXTURE_WRAP_T,Z[ie.wrapT]),(fe===t.TEXTURE_3D||fe===t.TEXTURE_2D_ARRAY)&&t.texParameteri(fe,t.TEXTURE_WRAP_R,Z[ie.wrapR]),t.texParameteri(fe,t.TEXTURE_MAG_FILTER,X[ie.magFilter]),t.texParameteri(fe,t.TEXTURE_MIN_FILTER,X[ie.minFilter])):(t.texParameteri(fe,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(fe,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(fe===t.TEXTURE_3D||fe===t.TEXTURE_2D_ARRAY)&&t.texParameteri(fe,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(ie.wrapS!==Er||ie.wrapT!==Er)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(fe,t.TEXTURE_MAG_FILTER,R(ie.magFilter)),t.texParameteri(fe,t.TEXTURE_MIN_FILTER,R(ie.minFilter)),ie.minFilter!==Ln&&ie.minFilter!==Cn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),ie.compareFunction&&(t.texParameteri(fe,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(fe,t.TEXTURE_COMPARE_FUNC,W[ie.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Je=e.get("EXT_texture_filter_anisotropic");if(ie.magFilter===Ln||ie.minFilter!==Zf&&ie.minFilter!==js||ie.type===fr&&e.has("OES_texture_float_linear")===!1||a===!1&&ie.type===Xr&&e.has("OES_texture_half_float_linear")===!1)return;(ie.anisotropy>1||r.get(ie).__currentAnisotropy)&&(t.texParameterf(fe,Je.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ie.anisotropy,i.getMaxAnisotropy())),r.get(ie).__currentAnisotropy=ie.anisotropy)}}function ge(fe,ie){let Ae=!1;fe.__webglInit===void 0&&(fe.__webglInit=!0,ie.addEventListener("dispose",O));const Je=ie.source;let te=g.get(Je);te===void 0&&(te={},g.set(Je,te));const z=ee(ie);if(z!==fe.__cacheKey){te[z]===void 0&&(te[z]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,Ae=!0),te[z].usedTimes++;const F=te[fe.__cacheKey];F!==void 0&&(te[fe.__cacheKey].usedTimes--,F.usedTimes===0&&N(ie)),fe.__cacheKey=z,fe.__webglTexture=te[z].texture}return Ae}function Se(fe,ie,Ae){let Je=t.TEXTURE_2D;(ie.isDataArrayTexture||ie.isCompressedArrayTexture)&&(Je=t.TEXTURE_2D_ARRAY),ie.isData3DTexture&&(Je=t.TEXTURE_3D);const te=ge(fe,ie),z=ie.source;n.bindTexture(Je,fe.__webglTexture,t.TEXTURE0+Ae);const F=r.get(z);if(z.version!==F.__version||te===!0){n.activeTexture(t.TEXTURE0+Ae);const ae=wr.getPrimaries(wr.workingColorSpace),ye=ie.colorSpace===mi?null:wr.getPrimaries(ie.colorSpace),Le=ie.colorSpace===mi||ae===ye?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,ie.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,ie.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Le);const ke=T(ie)&&A(ie.image)===!1;let Ve=y(ie.image,ke,!1,u);Ve=xt(ie,Ve);const Ce=A(Ve)||a,Ye=s.convert(ie.format,ie.colorSpace);let tt=s.convert(ie.type),it=C(ie.internalFormat,Ye,tt,ie.colorSpace,ie.isVideoTexture);K(Je,ie,Ce);let dt;const Ze=ie.mipmaps,Be=a&&ie.isVideoTexture!==!0&&it!==u5,Ft=F.__version===void 0||te===!0,St=S(ie,Ve,Ce);if(ie.isDepthTexture)it=t.DEPTH_COMPONENT,a?ie.type===fr?it=t.DEPTH_COMPONENT32F:ie.type===Ws?it=t.DEPTH_COMPONENT24:ie.type===Mu?it=t.DEPTH24_STENCIL8:it=t.DEPTH_COMPONENT16:ie.type===fr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ie.format===Lc&&it===t.DEPTH_COMPONENT&&ie.type!==Jp&&ie.type!==Ws&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ie.type=Ws,tt=s.convert(ie.type)),ie.format===fh&&it===t.DEPTH_COMPONENT&&(it=t.DEPTH_STENCIL,ie.type!==Mu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ie.type=Mu,tt=s.convert(ie.type))),Ft&&(Be?n.texStorage2D(t.TEXTURE_2D,1,it,Ve.width,Ve.height):n.texImage2D(t.TEXTURE_2D,0,it,Ve.width,Ve.height,0,Ye,tt,null));else if(ie.isDataTexture)if(Ze.length>0&&Ce){Be&&Ft&&n.texStorage2D(t.TEXTURE_2D,St,it,Ze[0].width,Ze[0].height);for(let st=0,It=Ze.length;st<It;st++)dt=Ze[st],Be?n.texSubImage2D(t.TEXTURE_2D,st,0,0,dt.width,dt.height,Ye,tt,dt.data):n.texImage2D(t.TEXTURE_2D,st,it,dt.width,dt.height,0,Ye,tt,dt.data);ie.generateMipmaps=!1}else Be?(Ft&&n.texStorage2D(t.TEXTURE_2D,St,it,Ve.width,Ve.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ve.width,Ve.height,Ye,tt,Ve.data)):n.texImage2D(t.TEXTURE_2D,0,it,Ve.width,Ve.height,0,Ye,tt,Ve.data);else if(ie.isCompressedTexture)if(ie.isCompressedArrayTexture){Be&&Ft&&n.texStorage3D(t.TEXTURE_2D_ARRAY,St,it,Ze[0].width,Ze[0].height,Ve.depth);for(let st=0,It=Ze.length;st<It;st++)dt=Ze[st],ie.format!==Sr?Ye!==null?Be?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,st,0,0,0,dt.width,dt.height,Ve.depth,Ye,dt.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,st,it,dt.width,dt.height,Ve.depth,0,dt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Be?n.texSubImage3D(t.TEXTURE_2D_ARRAY,st,0,0,0,dt.width,dt.height,Ve.depth,Ye,tt,dt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,st,it,dt.width,dt.height,Ve.depth,0,Ye,tt,dt.data)}else{Be&&Ft&&n.texStorage2D(t.TEXTURE_2D,St,it,Ze[0].width,Ze[0].height);for(let st=0,It=Ze.length;st<It;st++)dt=Ze[st],ie.format!==Sr?Ye!==null?Be?n.compressedTexSubImage2D(t.TEXTURE_2D,st,0,0,dt.width,dt.height,Ye,dt.data):n.compressedTexImage2D(t.TEXTURE_2D,st,it,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Be?n.texSubImage2D(t.TEXTURE_2D,st,0,0,dt.width,dt.height,Ye,tt,dt.data):n.texImage2D(t.TEXTURE_2D,st,it,dt.width,dt.height,0,Ye,tt,dt.data)}else if(ie.isDataArrayTexture)Be?(Ft&&n.texStorage3D(t.TEXTURE_2D_ARRAY,St,it,Ve.width,Ve.height,Ve.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Ve.width,Ve.height,Ve.depth,Ye,tt,Ve.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,it,Ve.width,Ve.height,Ve.depth,0,Ye,tt,Ve.data);else if(ie.isData3DTexture)Be?(Ft&&n.texStorage3D(t.TEXTURE_3D,St,it,Ve.width,Ve.height,Ve.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Ve.width,Ve.height,Ve.depth,Ye,tt,Ve.data)):n.texImage3D(t.TEXTURE_3D,0,it,Ve.width,Ve.height,Ve.depth,0,Ye,tt,Ve.data);else if(ie.isFramebufferTexture){if(Ft)if(Be)n.texStorage2D(t.TEXTURE_2D,St,it,Ve.width,Ve.height);else{let st=Ve.width,It=Ve.height;for(let Ht=0;Ht<St;Ht++)n.texImage2D(t.TEXTURE_2D,Ht,it,st,It,0,Ye,tt,null),st>>=1,It>>=1}}else if(Ze.length>0&&Ce){Be&&Ft&&n.texStorage2D(t.TEXTURE_2D,St,it,Ze[0].width,Ze[0].height);for(let st=0,It=Ze.length;st<It;st++)dt=Ze[st],Be?n.texSubImage2D(t.TEXTURE_2D,st,0,0,Ye,tt,dt):n.texImage2D(t.TEXTURE_2D,st,it,Ye,tt,dt);ie.generateMipmaps=!1}else Be?(Ft&&n.texStorage2D(t.TEXTURE_2D,St,it,Ve.width,Ve.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ye,tt,Ve)):n.texImage2D(t.TEXTURE_2D,0,it,Ye,tt,Ve);w(ie,Ce)&&M(Je),F.__version=z.version,ie.onUpdate&&ie.onUpdate(ie)}fe.__version=ie.version}function xe(fe,ie,Ae){if(ie.image.length!==6)return;const Je=ge(fe,ie),te=ie.source;n.bindTexture(t.TEXTURE_CUBE_MAP,fe.__webglTexture,t.TEXTURE0+Ae);const z=r.get(te);if(te.version!==z.__version||Je===!0){n.activeTexture(t.TEXTURE0+Ae);const F=wr.getPrimaries(wr.workingColorSpace),ae=ie.colorSpace===mi?null:wr.getPrimaries(ie.colorSpace),ye=ie.colorSpace===mi||F===ae?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,ie.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,ie.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ye);const Le=ie.isCompressedTexture||ie.image[0].isCompressedTexture,ke=ie.image[0]&&ie.image[0].isDataTexture,Ve=[];for(let st=0;st<6;st++)!Le&&!ke?Ve[st]=y(ie.image[st],!1,!0,c):Ve[st]=ke?ie.image[st].image:ie.image[st],Ve[st]=xt(ie,Ve[st]);const Ce=Ve[0],Ye=A(Ce)||a,tt=s.convert(ie.format,ie.colorSpace),it=s.convert(ie.type),dt=C(ie.internalFormat,tt,it,ie.colorSpace),Ze=a&&ie.isVideoTexture!==!0,Be=z.__version===void 0||Je===!0;let Ft=S(ie,Ce,Ye);K(t.TEXTURE_CUBE_MAP,ie,Ye);let St;if(Le){Ze&&Be&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Ft,dt,Ce.width,Ce.height);for(let st=0;st<6;st++){St=Ve[st].mipmaps;for(let It=0;It<St.length;It++){const Ht=St[It];ie.format!==Sr?tt!==null?Ze?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+st,It,0,0,Ht.width,Ht.height,tt,Ht.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+st,It,dt,Ht.width,Ht.height,0,Ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ze?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+st,It,0,0,Ht.width,Ht.height,tt,it,Ht.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+st,It,dt,Ht.width,Ht.height,0,tt,it,Ht.data)}}}else{St=ie.mipmaps,Ze&&Be&&(St.length>0&&Ft++,n.texStorage2D(t.TEXTURE_CUBE_MAP,Ft,dt,Ve[0].width,Ve[0].height));for(let st=0;st<6;st++)if(ke){Ze?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+st,0,0,0,Ve[st].width,Ve[st].height,tt,it,Ve[st].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+st,0,dt,Ve[st].width,Ve[st].height,0,tt,it,Ve[st].data);for(let It=0;It<St.length;It++){const zt=St[It].image[st].image;Ze?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+st,It+1,0,0,zt.width,zt.height,tt,it,zt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+st,It+1,dt,zt.width,zt.height,0,tt,it,zt.data)}}else{Ze?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+st,0,0,0,tt,it,Ve[st]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+st,0,dt,tt,it,Ve[st]);for(let It=0;It<St.length;It++){const Ht=St[It];Ze?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+st,It+1,0,0,tt,it,Ht.image[st]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+st,It+1,dt,tt,it,Ht.image[st])}}}w(ie,Ye)&&M(t.TEXTURE_CUBE_MAP),z.__version=te.version,ie.onUpdate&&ie.onUpdate(ie)}fe.__version=ie.version}function Me(fe,ie,Ae,Je,te,z){const F=s.convert(Ae.format,Ae.colorSpace),ae=s.convert(Ae.type),ye=C(Ae.internalFormat,F,ae,Ae.colorSpace);if(!r.get(ie).__hasExternalTextures){const ke=Math.max(1,ie.width>>z),Ve=Math.max(1,ie.height>>z);te===t.TEXTURE_3D||te===t.TEXTURE_2D_ARRAY?n.texImage3D(te,z,ye,ke,Ve,ie.depth,0,F,ae,null):n.texImage2D(te,z,ye,ke,Ve,0,F,ae,null)}n.bindFramebuffer(t.FRAMEBUFFER,fe),We(ie)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Je,te,r.get(Ae).__webglTexture,0,me(ie)):(te===t.TEXTURE_2D||te>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&te<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Je,te,r.get(Ae).__webglTexture,z),n.bindFramebuffer(t.FRAMEBUFFER,null)}function he(fe,ie,Ae){if(t.bindRenderbuffer(t.RENDERBUFFER,fe),ie.depthBuffer&&!ie.stencilBuffer){let Je=a===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(Ae||We(ie)){const te=ie.depthTexture;te&&te.isDepthTexture&&(te.type===fr?Je=t.DEPTH_COMPONENT32F:te.type===Ws&&(Je=t.DEPTH_COMPONENT24));const z=me(ie);We(ie)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,z,Je,ie.width,ie.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,z,Je,ie.width,ie.height)}else t.renderbufferStorage(t.RENDERBUFFER,Je,ie.width,ie.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,fe)}else if(ie.depthBuffer&&ie.stencilBuffer){const Je=me(ie);Ae&&We(ie)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Je,t.DEPTH24_STENCIL8,ie.width,ie.height):We(ie)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Je,t.DEPTH24_STENCIL8,ie.width,ie.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,ie.width,ie.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,fe)}else{const Je=ie.isWebGLMultipleRenderTargets===!0?ie.texture:[ie.texture];for(let te=0;te<Je.length;te++){const z=Je[te],F=s.convert(z.format,z.colorSpace),ae=s.convert(z.type),ye=C(z.internalFormat,F,ae,z.colorSpace),Le=me(ie);Ae&&We(ie)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Le,ye,ie.width,ie.height):We(ie)?h.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Le,ye,ie.width,ie.height):t.renderbufferStorage(t.RENDERBUFFER,ye,ie.width,ie.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Oe(fe,ie){if(ie&&ie.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,fe),!(ie.depthTexture&&ie.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ie.depthTexture).__webglTexture||ie.depthTexture.image.width!==ie.width||ie.depthTexture.image.height!==ie.height)&&(ie.depthTexture.image.width=ie.width,ie.depthTexture.image.height=ie.height,ie.depthTexture.needsUpdate=!0),ne(ie.depthTexture,0);const Je=r.get(ie.depthTexture).__webglTexture,te=me(ie);if(ie.depthTexture.format===Lc)We(ie)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Je,0,te):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Je,0);else if(ie.depthTexture.format===fh)We(ie)?h.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Je,0,te):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Je,0);else throw new Error("Unknown depthTexture format")}function be(fe){const ie=r.get(fe),Ae=fe.isWebGLCubeRenderTarget===!0;if(fe.depthTexture&&!ie.__autoAllocateDepthBuffer){if(Ae)throw new Error("target.depthTexture not supported in Cube render targets");Oe(ie.__webglFramebuffer,fe)}else if(Ae){ie.__webglDepthbuffer=[];for(let Je=0;Je<6;Je++)n.bindFramebuffer(t.FRAMEBUFFER,ie.__webglFramebuffer[Je]),ie.__webglDepthbuffer[Je]=t.createRenderbuffer(),he(ie.__webglDepthbuffer[Je],fe,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,ie.__webglFramebuffer),ie.__webglDepthbuffer=t.createRenderbuffer(),he(ie.__webglDepthbuffer,fe,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Te(fe,ie,Ae){const Je=r.get(fe);ie!==void 0&&Me(Je.__webglFramebuffer,fe,fe.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),Ae!==void 0&&be(fe)}function Re(fe){const ie=fe.texture,Ae=r.get(fe),Je=r.get(ie);fe.addEventListener("dispose",L),fe.isWebGLMultipleRenderTargets!==!0&&(Je.__webglTexture===void 0&&(Je.__webglTexture=t.createTexture()),Je.__version=ie.version,o.memory.textures++);const te=fe.isWebGLCubeRenderTarget===!0,z=fe.isWebGLMultipleRenderTargets===!0,F=A(fe)||a;if(te){Ae.__webglFramebuffer=[];for(let ae=0;ae<6;ae++)if(a&&ie.mipmaps&&ie.mipmaps.length>0){Ae.__webglFramebuffer[ae]=[];for(let ye=0;ye<ie.mipmaps.length;ye++)Ae.__webglFramebuffer[ae][ye]=t.createFramebuffer()}else Ae.__webglFramebuffer[ae]=t.createFramebuffer()}else{if(a&&ie.mipmaps&&ie.mipmaps.length>0){Ae.__webglFramebuffer=[];for(let ae=0;ae<ie.mipmaps.length;ae++)Ae.__webglFramebuffer[ae]=t.createFramebuffer()}else Ae.__webglFramebuffer=t.createFramebuffer();if(z)if(i.drawBuffers){const ae=fe.texture;for(let ye=0,Le=ae.length;ye<Le;ye++){const ke=r.get(ae[ye]);ke.__webglTexture===void 0&&(ke.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&fe.samples>0&&We(fe)===!1){const ae=z?ie:[ie];Ae.__webglMultisampledFramebuffer=t.createFramebuffer(),Ae.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Ae.__webglMultisampledFramebuffer);for(let ye=0;ye<ae.length;ye++){const Le=ae[ye];Ae.__webglColorRenderbuffer[ye]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Ae.__webglColorRenderbuffer[ye]);const ke=s.convert(Le.format,Le.colorSpace),Ve=s.convert(Le.type),Ce=C(Le.internalFormat,ke,Ve,Le.colorSpace,fe.isXRRenderTarget===!0),Ye=me(fe);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ye,Ce,fe.width,fe.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ye,t.RENDERBUFFER,Ae.__webglColorRenderbuffer[ye])}t.bindRenderbuffer(t.RENDERBUFFER,null),fe.depthBuffer&&(Ae.__webglDepthRenderbuffer=t.createRenderbuffer(),he(Ae.__webglDepthRenderbuffer,fe,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(te){n.bindTexture(t.TEXTURE_CUBE_MAP,Je.__webglTexture),K(t.TEXTURE_CUBE_MAP,ie,F);for(let ae=0;ae<6;ae++)if(a&&ie.mipmaps&&ie.mipmaps.length>0)for(let ye=0;ye<ie.mipmaps.length;ye++)Me(Ae.__webglFramebuffer[ae][ye],fe,ie,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,ye);else Me(Ae.__webglFramebuffer[ae],fe,ie,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+ae,0);w(ie,F)&&M(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(z){const ae=fe.texture;for(let ye=0,Le=ae.length;ye<Le;ye++){const ke=ae[ye],Ve=r.get(ke);n.bindTexture(t.TEXTURE_2D,Ve.__webglTexture),K(t.TEXTURE_2D,ke,F),Me(Ae.__webglFramebuffer,fe,ke,t.COLOR_ATTACHMENT0+ye,t.TEXTURE_2D,0),w(ke,F)&&M(t.TEXTURE_2D)}n.unbindTexture()}else{let ae=t.TEXTURE_2D;if((fe.isWebGL3DRenderTarget||fe.isWebGLArrayRenderTarget)&&(a?ae=fe.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(ae,Je.__webglTexture),K(ae,ie,F),a&&ie.mipmaps&&ie.mipmaps.length>0)for(let ye=0;ye<ie.mipmaps.length;ye++)Me(Ae.__webglFramebuffer[ye],fe,ie,t.COLOR_ATTACHMENT0,ae,ye);else Me(Ae.__webglFramebuffer,fe,ie,t.COLOR_ATTACHMENT0,ae,0);w(ie,F)&&M(ae),n.unbindTexture()}fe.depthBuffer&&be(fe)}function $e(fe){const ie=A(fe)||a,Ae=fe.isWebGLMultipleRenderTargets===!0?fe.texture:[fe.texture];for(let Je=0,te=Ae.length;Je<te;Je++){const z=Ae[Je];if(w(z,ie)){const F=fe.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,ae=r.get(z).__webglTexture;n.bindTexture(F,ae),M(F),n.unbindTexture()}}}function ve(fe){if(a&&fe.samples>0&&We(fe)===!1){const ie=fe.isWebGLMultipleRenderTargets?fe.texture:[fe.texture],Ae=fe.width,Je=fe.height;let te=t.COLOR_BUFFER_BIT;const z=[],F=fe.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ae=r.get(fe),ye=fe.isWebGLMultipleRenderTargets===!0;if(ye)for(let Le=0;Le<ie.length;Le++)n.bindFramebuffer(t.FRAMEBUFFER,ae.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Le,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,ae.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Le,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,ae.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ae.__webglFramebuffer);for(let Le=0;Le<ie.length;Le++){z.push(t.COLOR_ATTACHMENT0+Le),fe.depthBuffer&&z.push(F);const ke=ae.__ignoreDepthValues!==void 0?ae.__ignoreDepthValues:!1;if(ke===!1&&(fe.depthBuffer&&(te|=t.DEPTH_BUFFER_BIT),fe.stencilBuffer&&(te|=t.STENCIL_BUFFER_BIT)),ye&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,ae.__webglColorRenderbuffer[Le]),ke===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[F]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[F])),ye){const Ve=r.get(ie[Le]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Ve,0)}t.blitFramebuffer(0,0,Ae,Je,0,0,Ae,Je,te,t.NEAREST),d&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,z)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),ye)for(let Le=0;Le<ie.length;Le++){n.bindFramebuffer(t.FRAMEBUFFER,ae.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Le,t.RENDERBUFFER,ae.__webglColorRenderbuffer[Le]);const ke=r.get(ie[Le]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,ae.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Le,t.TEXTURE_2D,ke,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ae.__webglMultisampledFramebuffer)}}function me(fe){return Math.min(f,fe.samples)}function We(fe){const ie=r.get(fe);return a&&fe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ie.__useRenderToTexture!==!1}function Xe(fe){const ie=o.render.frame;p.get(fe)!==ie&&(p.set(fe,ie),fe.update())}function xt(fe,ie){const Ae=fe.colorSpace,Je=fe.format,te=fe.type;return fe.isCompressedTexture===!0||fe.isVideoTexture===!0||fe.format===F3||Ae!==sa&&Ae!==mi&&(wr.getTransfer(Ae)===zr?a===!1?e.has("EXT_sRGB")===!0&&Je===Sr?(fe.format=F3,fe.minFilter=Cn,fe.generateMipmaps=!1):ie=v5.sRGBToLinear(ie):(Je!==Sr||te!==Cs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ae)),ie}this.allocateTextureUnit=Y,this.resetTextureUnits=Q,this.setTexture2D=ne,this.setTexture2DArray=P,this.setTexture3D=se,this.setTextureCube=re,this.rebindTextures=Te,this.setupRenderTarget=Re,this.updateRenderTargetMipmap=$e,this.updateMultisampleRenderTarget=ve,this.setupDepthRenderbuffer=be,this.setupFrameBufferTexture=Me,this.useMultisampledRTT=We}function SF(t,e,n){const r=n.isWebGL2;function i(s,o=mi){let a;const l=wr.getTransfer(o);if(s===Cs)return t.UNSIGNED_BYTE;if(s===a5)return t.UNSIGNED_SHORT_4_4_4_4;if(s===l5)return t.UNSIGNED_SHORT_5_5_5_1;if(s===j1)return t.BYTE;if(s===DE)return t.SHORT;if(s===Jp)return t.UNSIGNED_SHORT;if(s===eh)return t.INT;if(s===Ws)return t.UNSIGNED_INT;if(s===fr)return t.FLOAT;if(s===Xr)return r?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===Zk)return t.ALPHA;if(s===Sr)return t.RGBA;if(s===eF)return t.LUMINANCE;if(s===tF)return t.LUMINANCE_ALPHA;if(s===Lc)return t.DEPTH_COMPONENT;if(s===fh)return t.DEPTH_STENCIL;if(s===F3)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===th)return t.RED;if(s===BE)return t.RED_INTEGER;if(s===c5)return t.RG;if(s===Sg)return t.RG_INTEGER;if(s===hh)return t.RGBA_INTEGER;if(s===Kx||s===Jx||s===Qx||s===Zx)if(l===zr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Kx)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Jx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Qx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Zx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Kx)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Jx)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Qx)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Zx)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===$w||s===Xw||s===Yw||s===qw)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===$w)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Xw)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Yw)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===qw)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===u5)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Kw||s===Jw)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===Kw)return l===zr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===Jw)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===Qw||s===Zw||s===eS||s===tS||s===nS||s===rS||s===iS||s===sS||s===oS||s===aS||s===lS||s===cS||s===uS||s===fS)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===Qw)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Zw)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===eS)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===tS)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===nS)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===rS)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===iS)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===sS)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===oS)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===aS)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===lS)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===cS)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===uS)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===fS)return l===zr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===e3||s===hS||s===dS)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===e3)return l===zr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===hS)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===dS)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===nF||s===pS||s===mS||s===gS)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===e3)return a.COMPRESSED_RED_RGTC1_EXT;if(s===pS)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===mS)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===gS)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Mu?r?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class CF extends mr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ki extends hn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const uce={type:"move"};class FA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ki,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ki,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ki,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const m of e.hand.values()){const g=n.getJointPose(m,r),v=this._getHandJoint(c,m);g!==null&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=g.radius),v.visible=g!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],h=u.position.distanceTo(f.position),d=.02,p=.005;c.inputState.pinching&&h>d+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=d-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(uce)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new ki;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class fce extends Jl{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,h=null,d=null,p=null;const m=n.getContextAttributes();let g=null,v=null;const x=[],y=[],A=new qe;let T=null;const w=new mr;w.layers.enable(1),w.viewport=new Xn;const M=new mr;M.layers.enable(2),M.viewport=new Xn;const C=[w,M],S=new CF;S.layers.enable(1),S.layers.enable(2);let R=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let Z=x[re];return Z===void 0&&(Z=new FA,x[re]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(re){let Z=x[re];return Z===void 0&&(Z=new FA,x[re]=Z),Z.getGripSpace()},this.getHand=function(re){let Z=x[re];return Z===void 0&&(Z=new FA,x[re]=Z),Z.getHandSpace()};function L(re){const Z=y.indexOf(re.inputSource);if(Z===-1)return;const X=x[Z];X!==void 0&&(X.update(re.inputSource,re.frame,c||o),X.dispatchEvent({type:re.type,data:re.inputSource}))}function B(){i.removeEventListener("select",L),i.removeEventListener("selectstart",L),i.removeEventListener("selectend",L),i.removeEventListener("squeeze",L),i.removeEventListener("squeezestart",L),i.removeEventListener("squeezeend",L),i.removeEventListener("end",B),i.removeEventListener("inputsourceschange",N);for(let re=0;re<x.length;re++){const Z=y[re];Z!==null&&(y[re]=null,x[re].disconnect(Z))}R=null,O=null,e.setRenderTarget(g),d=null,h=null,f=null,i=null,v=null,se.stop(),r.isPresenting=!1,e.setPixelRatio(T),e.setSize(A.width,A.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){s=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){a=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(re){c=re},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return f},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(re){if(i=re,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",L),i.addEventListener("selectstart",L),i.addEventListener("selectend",L),i.addEventListener("squeeze",L),i.addEventListener("squeezestart",L),i.addEventListener("squeezeend",L),i.addEventListener("end",B),i.addEventListener("inputsourceschange",N),m.xrCompatible!==!0&&await n.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(A),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Z={antialias:i.renderState.layers===void 0?m.antialias:!0,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(i,n,Z),i.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),v=new pr(d.framebufferWidth,d.framebufferHeight,{format:Sr,type:Cs,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}else{let Z=null,X=null,W=null;m.depth&&(W=m.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Z=m.stencil?fh:Lc,X=m.stencil?Mu:Ws);const K={colorFormat:n.RGBA8,depthFormat:W,scaleFactor:s};f=new XRWebGLBinding(i,n),h=f.createProjectionLayer(K),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),v=new pr(h.textureWidth,h.textureHeight,{format:Sr,type:Cs,depthTexture:new Ig(h.textureWidth,h.textureHeight,X,void 0,void 0,void 0,void 0,void 0,void 0,Z),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0});const ge=e.properties.get(v);ge.__ignoreDepthValues=h.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),se.setContext(i),se.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function N(re){for(let Z=0;Z<re.removed.length;Z++){const X=re.removed[Z],W=y.indexOf(X);W>=0&&(y[W]=null,x[W].disconnect(X))}for(let Z=0;Z<re.added.length;Z++){const X=re.added[Z];let W=y.indexOf(X);if(W===-1){for(let ge=0;ge<x.length;ge++)if(ge>=y.length){y.push(X),W=ge;break}else if(y[ge]===null){y[ge]=X,W=ge;break}if(W===-1)break}const K=x[W];K&&K.connect(X)}}const $=new J,U=new J;function Q(re,Z,X){$.setFromMatrixPosition(Z.matrixWorld),U.setFromMatrixPosition(X.matrixWorld);const W=$.distanceTo(U),K=Z.projectionMatrix.elements,ge=X.projectionMatrix.elements,Se=K[14]/(K[10]-1),xe=K[14]/(K[10]+1),Me=(K[9]+1)/K[5],he=(K[9]-1)/K[5],Oe=(K[8]-1)/K[0],be=(ge[8]+1)/ge[0],Te=Se*Oe,Re=Se*be,$e=W/(-Oe+be),ve=$e*-Oe;Z.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(ve),re.translateZ($e),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert();const me=Se+$e,We=xe+$e,Xe=Te-ve,xt=Re+(W-ve),fe=Me*xe/We*me,ie=he*xe/We*me;re.projectionMatrix.makePerspective(Xe,xt,fe,ie,me,We),re.projectionMatrixInverse.copy(re.projectionMatrix).invert()}function Y(re,Z){Z===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(Z.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(i===null)return;S.near=M.near=w.near=re.near,S.far=M.far=w.far=re.far,(R!==S.near||O!==S.far)&&(i.updateRenderState({depthNear:S.near,depthFar:S.far}),R=S.near,O=S.far);const Z=re.parent,X=S.cameras;Y(S,Z);for(let W=0;W<X.length;W++)Y(X[W],Z);X.length===2?Q(S,w,M):S.projectionMatrix.copy(w.projectionMatrix),ee(re,S,Z)};function ee(re,Z,X){X===null?re.matrix.copy(Z.matrixWorld):(re.matrix.copy(X.matrixWorld),re.matrix.invert(),re.matrix.multiply(Z.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0),re.projectionMatrix.copy(Z.projectionMatrix),re.projectionMatrixInverse.copy(Z.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=Lp*2*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}this.getCamera=function(){return S},this.getFoveation=function(){if(!(h===null&&d===null))return l},this.setFoveation=function(re){l=re,h!==null&&(h.fixedFoveation=re),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=re)};let ne=null;function P(re,Z){if(u=Z.getViewerPose(c||o),p=Z,u!==null){const X=u.views;d!==null&&(e.setRenderTargetFramebuffer(v,d.framebuffer),e.setRenderTarget(v));let W=!1;X.length!==S.cameras.length&&(S.cameras.length=0,W=!0);for(let K=0;K<X.length;K++){const ge=X[K];let Se=null;if(d!==null)Se=d.getViewport(ge);else{const Me=f.getViewSubImage(h,ge);Se=Me.viewport,K===0&&(e.setRenderTargetTextures(v,Me.colorTexture,h.ignoreDepthValues?void 0:Me.depthStencilTexture),e.setRenderTarget(v))}let xe=C[K];xe===void 0&&(xe=new mr,xe.layers.enable(K),xe.viewport=new Xn,C[K]=xe),xe.matrix.fromArray(ge.transform.matrix),xe.matrix.decompose(xe.position,xe.quaternion,xe.scale),xe.projectionMatrix.fromArray(ge.projectionMatrix),xe.projectionMatrixInverse.copy(xe.projectionMatrix).invert(),xe.viewport.set(Se.x,Se.y,Se.width,Se.height),K===0&&(S.matrix.copy(xe.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),W===!0&&S.cameras.push(xe)}}for(let X=0;X<x.length;X++){const W=y[X],K=x[X];W!==null&&K!==void 0&&K.update(W,Z,c||o)}ne&&ne(re,Z),Z.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:Z}),p=null}const se=new EF;se.setAnimationLoop(P),this.setAnimationLoop=function(re){ne=re},this.dispose=function(){}}}function hce(t,e){function n(g,v){g.matrixAutoUpdate===!0&&g.updateMatrix(),v.value.copy(g.matrix)}function r(g,v){v.color.getRGB(g.fogColor.value,xF(t)),v.isFog?(g.fogNear.value=v.near,g.fogFar.value=v.far):v.isFogExp2&&(g.fogDensity.value=v.density)}function i(g,v,x,y,A){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(g,v):v.isMeshToonMaterial?(s(g,v),f(g,v)):v.isMeshPhongMaterial?(s(g,v),u(g,v)):v.isMeshStandardMaterial?(s(g,v),h(g,v),v.isMeshPhysicalMaterial&&d(g,v,A)):v.isMeshMatcapMaterial?(s(g,v),p(g,v)):v.isMeshDepthMaterial?s(g,v):v.isMeshDistanceMaterial?(s(g,v),m(g,v)):v.isMeshNormalMaterial?s(g,v):v.isLineBasicMaterial?(o(g,v),v.isLineDashedMaterial&&a(g,v)):v.isPointsMaterial?l(g,v,x,y):v.isSpriteMaterial?c(g,v):v.isShadowMaterial?(g.color.value.copy(v.color),g.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(g,v){g.opacity.value=v.opacity,v.color&&g.diffuse.value.copy(v.color),v.emissive&&g.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(g.map.value=v.map,n(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,n(v.alphaMap,g.alphaMapTransform)),v.bumpMap&&(g.bumpMap.value=v.bumpMap,n(v.bumpMap,g.bumpMapTransform),g.bumpScale.value=v.bumpScale,v.side===Ti&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,n(v.normalMap,g.normalMapTransform),g.normalScale.value.copy(v.normalScale),v.side===Ti&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,n(v.displacementMap,g.displacementMapTransform),g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap,n(v.emissiveMap,g.emissiveMapTransform)),v.specularMap&&(g.specularMap.value=v.specularMap,n(v.specularMap,g.specularMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);const x=e.get(v).envMap;if(x&&(g.envMap.value=x,g.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=v.reflectivity,g.ior.value=v.ior,g.refractionRatio.value=v.refractionRatio),v.lightMap){g.lightMap.value=v.lightMap;const y=t._useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=v.lightMapIntensity*y,n(v.lightMap,g.lightMapTransform)}v.aoMap&&(g.aoMap.value=v.aoMap,g.aoMapIntensity.value=v.aoMapIntensity,n(v.aoMap,g.aoMapTransform))}function o(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,v.map&&(g.map.value=v.map,n(v.map,g.mapTransform))}function a(g,v){g.dashSize.value=v.dashSize,g.totalSize.value=v.dashSize+v.gapSize,g.scale.value=v.scale}function l(g,v,x,y){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.size.value=v.size*x,g.scale.value=y*.5,v.map&&(g.map.value=v.map,n(v.map,g.uvTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,n(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function c(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.rotation.value=v.rotation,v.map&&(g.map.value=v.map,n(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,n(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function u(g,v){g.specular.value.copy(v.specular),g.shininess.value=Math.max(v.shininess,1e-4)}function f(g,v){v.gradientMap&&(g.gradientMap.value=v.gradientMap)}function h(g,v){g.metalness.value=v.metalness,v.metalnessMap&&(g.metalnessMap.value=v.metalnessMap,n(v.metalnessMap,g.metalnessMapTransform)),g.roughness.value=v.roughness,v.roughnessMap&&(g.roughnessMap.value=v.roughnessMap,n(v.roughnessMap,g.roughnessMapTransform)),e.get(v).envMap&&(g.envMapIntensity.value=v.envMapIntensity)}function d(g,v,x){g.ior.value=v.ior,v.sheen>0&&(g.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),g.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(g.sheenColorMap.value=v.sheenColorMap,n(v.sheenColorMap,g.sheenColorMapTransform)),v.sheenRoughnessMap&&(g.sheenRoughnessMap.value=v.sheenRoughnessMap,n(v.sheenRoughnessMap,g.sheenRoughnessMapTransform))),v.clearcoat>0&&(g.clearcoat.value=v.clearcoat,g.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(g.clearcoatMap.value=v.clearcoatMap,n(v.clearcoatMap,g.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,n(v.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(g.clearcoatNormalMap.value=v.clearcoatNormalMap,n(v.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Ti&&g.clearcoatNormalScale.value.negate())),v.iridescence>0&&(g.iridescence.value=v.iridescence,g.iridescenceIOR.value=v.iridescenceIOR,g.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(g.iridescenceMap.value=v.iridescenceMap,n(v.iridescenceMap,g.iridescenceMapTransform)),v.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=v.iridescenceThicknessMap,n(v.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),v.transmission>0&&(g.transmission.value=v.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),v.transmissionMap&&(g.transmissionMap.value=v.transmissionMap,n(v.transmissionMap,g.transmissionMapTransform)),g.thickness.value=v.thickness,v.thicknessMap&&(g.thicknessMap.value=v.thicknessMap,n(v.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=v.attenuationDistance,g.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(g.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(g.anisotropyMap.value=v.anisotropyMap,n(v.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=v.specularIntensity,g.specularColor.value.copy(v.specularColor),v.specularColorMap&&(g.specularColorMap.value=v.specularColorMap,n(v.specularColorMap,g.specularColorMapTransform)),v.specularIntensityMap&&(g.specularIntensityMap.value=v.specularIntensityMap,n(v.specularIntensityMap,g.specularIntensityMapTransform))}function p(g,v){v.matcap&&(g.matcap.value=v.matcap)}function m(g,v){const x=e.get(v).light;g.referencePosition.value.setFromMatrixPosition(x.matrixWorld),g.nearDistance.value=x.shadow.camera.near,g.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function dce(t,e,n,r){let i={},s={},o=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,y){const A=y.program;r.uniformBlockBinding(x,A)}function c(x,y){let A=i[x.id];A===void 0&&(p(x),A=u(x),i[x.id]=A,x.addEventListener("dispose",g));const T=y.program;r.updateUBOMapping(x,T);const w=e.render.frame;s[x.id]!==w&&(h(x),s[x.id]=w)}function u(x){const y=f();x.__bindingPointIndex=y;const A=t.createBuffer(),T=x.__size,w=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,A),t.bufferData(t.UNIFORM_BUFFER,T,w),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,y,A),A}function f(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(x){const y=i[x.id],A=x.uniforms,T=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,y);for(let w=0,M=A.length;w<M;w++){const C=A[w];if(d(C,w,T)===!0){const S=C.__offset,R=Array.isArray(C.value)?C.value:[C.value];let O=0;for(let L=0;L<R.length;L++){const B=R[L],N=m(B);typeof B=="number"?(C.__data[0]=B,t.bufferSubData(t.UNIFORM_BUFFER,S+O,C.__data)):B.isMatrix3?(C.__data[0]=B.elements[0],C.__data[1]=B.elements[1],C.__data[2]=B.elements[2],C.__data[3]=B.elements[0],C.__data[4]=B.elements[3],C.__data[5]=B.elements[4],C.__data[6]=B.elements[5],C.__data[7]=B.elements[0],C.__data[8]=B.elements[6],C.__data[9]=B.elements[7],C.__data[10]=B.elements[8],C.__data[11]=B.elements[0]):(B.toArray(C.__data,O),O+=N.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,S,C.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function d(x,y,A){const T=x.value;if(A[y]===void 0){if(typeof T=="number")A[y]=T;else{const w=Array.isArray(T)?T:[T],M=[];for(let C=0;C<w.length;C++)M.push(w[C].clone());A[y]=M}return!0}else if(typeof T=="number"){if(A[y]!==T)return A[y]=T,!0}else{const w=Array.isArray(A[y])?A[y]:[A[y]],M=Array.isArray(T)?T:[T];for(let C=0;C<w.length;C++){const S=w[C];if(S.equals(M[C])===!1)return S.copy(M[C]),!0}}return!1}function p(x){const y=x.uniforms;let A=0;const T=16;let w=0;for(let M=0,C=y.length;M<C;M++){const S=y[M],R={boundary:0,storage:0},O=Array.isArray(S.value)?S.value:[S.value];for(let L=0,B=O.length;L<B;L++){const N=O[L],$=m(N);R.boundary+=$.boundary,R.storage+=$.storage}if(S.__data=new Float32Array(R.storage/Float32Array.BYTES_PER_ELEMENT),S.__offset=A,M>0){w=A%T;const L=T-w;w!==0&&L-R.boundary<0&&(A+=T-w,S.__offset=A)}A+=R.storage}return w=A%T,w>0&&(A+=T-w),x.__size=A,x.__cache={},this}function m(x){const y={boundary:0,storage:0};return typeof x=="number"?(y.boundary=4,y.storage=4):x.isVector2?(y.boundary=8,y.storage=8):x.isVector3||x.isColor?(y.boundary=16,y.storage=12):x.isVector4?(y.boundary=16,y.storage=16):x.isMatrix3?(y.boundary=48,y.storage=48):x.isMatrix4?(y.boundary=64,y.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),y}function g(x){const y=x.target;y.removeEventListener("dispose",g);const A=o.indexOf(y.__bindingPointIndex);o.splice(A,1),t.deleteBuffer(i[y.id]),delete i[y.id],delete s[y.id]}function v(){for(const x in i)t.deleteBuffer(i[x]);o=[],i={},s={}}return{bind:l,update:c,dispose:v}}class Pg{constructor(e={}){const{canvas:n=gF(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let h;r!==null?h=r.getContextAttributes().alpha:h=o;const d=new Uint32Array(4),p=new Int32Array(4);let m=null,g=null;const v=[],x=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ii,this._useLegacyLights=!1,this.toneMapping=fl,this.toneMappingExposure=1;const y=this;let A=!1,T=0,w=0,M=null,C=-1,S=null;const R=new Xn,O=new Xn;let L=null;const B=new bt(0);let N=0,$=n.width,U=n.height,Q=1,Y=null,ee=null;const ne=new Xn(0,0,$,U),P=new Xn(0,0,$,U);let se=!1;const re=new _h;let Z=!1,X=!1,W=null;const K=new yt,ge=new qe,Se=new J,xe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Me(){return M===null?Q:1}let he=r;function Oe(ue,we){for(let Pe=0;Pe<ue.length;Pe++){const Ge=ue[Pe],Fe=n.getContext(Ge,we);if(Fe!==null)return Fe}return null}try{const ue={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${yl}`),n.addEventListener("webglcontextlost",Ze,!1),n.addEventListener("webglcontextrestored",Be,!1),n.addEventListener("webglcontextcreationerror",Ft,!1),he===null){const we=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&we.shift(),he=Oe(we,ue),he===null)throw Oe(we)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&he instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),he.getShaderPrecisionFormat===void 0&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ue){throw console.error("THREE.WebGLRenderer: "+ue.message),ue}let be,Te,Re,$e,ve,me,We,Xe,xt,fe,ie,Ae,Je,te,z,F,ae,ye,Le,ke,Ve,Ce,Ye,tt;function it(){be=new Mae(he),Te=new bae(he,be,e),be.init(Te),Ce=new SF(he,be,Te),Re=new lce(he,be,Te),$e=new Pae(he),ve=new Kle,me=new cce(he,be,Re,ve,Te,Ce,$e),We=new Tae(y),Xe=new Cae(y),xt=new Uie(he,Te),Ye=new Eae(he,be,xt,Te),fe=new Rae(he,xt,$e,Ye),ie=new Dae(he,fe,xt,$e),Le=new Oae(he,Te,me),F=new Aae(ve),Ae=new qle(y,We,Xe,be,Te,Ye,F),Je=new hce(y,ve),te=new Qle,z=new ice(be,Te),ye=new xae(y,We,Xe,Re,ie,h,l),ae=new ace(y,ie,Te),tt=new dce(he,$e,Te,Re),ke=new _ae(he,be,$e,Te),Ve=new Iae(he,be,$e,Te),$e.programs=Ae.programs,y.capabilities=Te,y.extensions=be,y.properties=ve,y.renderLists=te,y.shadowMap=ae,y.state=Re,y.info=$e}it();const dt=new fce(y,he);this.xr=dt,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const ue=be.get("WEBGL_lose_context");ue&&ue.loseContext()},this.forceContextRestore=function(){const ue=be.get("WEBGL_lose_context");ue&&ue.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(ue){ue!==void 0&&(Q=ue,this.setSize($,U,!1))},this.getSize=function(ue){return ue.set($,U)},this.setSize=function(ue,we,Pe=!0){if(dt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}$=ue,U=we,n.width=Math.floor(ue*Q),n.height=Math.floor(we*Q),Pe===!0&&(n.style.width=ue+"px",n.style.height=we+"px"),this.setViewport(0,0,ue,we)},this.getDrawingBufferSize=function(ue){return ue.set($*Q,U*Q).floor()},this.setDrawingBufferSize=function(ue,we,Pe){$=ue,U=we,Q=Pe,n.width=Math.floor(ue*Pe),n.height=Math.floor(we*Pe),this.setViewport(0,0,ue,we)},this.getCurrentViewport=function(ue){return ue.copy(R)},this.getViewport=function(ue){return ue.copy(ne)},this.setViewport=function(ue,we,Pe,Ge){ue.isVector4?ne.set(ue.x,ue.y,ue.z,ue.w):ne.set(ue,we,Pe,Ge),Re.viewport(R.copy(ne).multiplyScalar(Q).floor())},this.getScissor=function(ue){return ue.copy(P)},this.setScissor=function(ue,we,Pe,Ge){ue.isVector4?P.set(ue.x,ue.y,ue.z,ue.w):P.set(ue,we,Pe,Ge),Re.scissor(O.copy(P).multiplyScalar(Q).floor())},this.getScissorTest=function(){return se},this.setScissorTest=function(ue){Re.setScissorTest(se=ue)},this.setOpaqueSort=function(ue){Y=ue},this.setTransparentSort=function(ue){ee=ue},this.getClearColor=function(ue){return ue.copy(ye.getClearColor())},this.setClearColor=function(){ye.setClearColor.apply(ye,arguments)},this.getClearAlpha=function(){return ye.getClearAlpha()},this.setClearAlpha=function(){ye.setClearAlpha.apply(ye,arguments)},this.clear=function(ue=!0,we=!0,Pe=!0){let Ge=0;if(ue){let Fe=!1;if(M!==null){const lt=M.texture.format;Fe=lt===hh||lt===Sg||lt===BE}if(Fe){const lt=M.texture.type,ot=lt===Cs||lt===Ws||lt===Jp||lt===Mu||lt===a5||lt===l5,pt=ye.getClearColor(),Ke=ye.getClearAlpha(),Vt=pt.r,Lt=pt.g,Pt=pt.b;ot?(d[0]=Vt,d[1]=Lt,d[2]=Pt,d[3]=Ke,he.clearBufferuiv(he.COLOR,0,d)):(p[0]=Vt,p[1]=Lt,p[2]=Pt,p[3]=Ke,he.clearBufferiv(he.COLOR,0,p))}else Ge|=he.COLOR_BUFFER_BIT}we&&(Ge|=he.DEPTH_BUFFER_BIT),Pe&&(Ge|=he.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),he.clear(Ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ze,!1),n.removeEventListener("webglcontextrestored",Be,!1),n.removeEventListener("webglcontextcreationerror",Ft,!1),te.dispose(),z.dispose(),ve.dispose(),We.dispose(),Xe.dispose(),ie.dispose(),Ye.dispose(),tt.dispose(),Ae.dispose(),dt.dispose(),dt.removeEventListener("sessionstart",Nn),dt.removeEventListener("sessionend",Tn),W&&(W.dispose(),W=null),Fn.stop()};function Ze(ue){ue.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function Be(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const ue=$e.autoReset,we=ae.enabled,Pe=ae.autoUpdate,Ge=ae.needsUpdate,Fe=ae.type;it(),$e.autoReset=ue,ae.enabled=we,ae.autoUpdate=Pe,ae.needsUpdate=Ge,ae.type=Fe}function Ft(ue){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ue.statusMessage)}function St(ue){const we=ue.target;we.removeEventListener("dispose",St),st(we)}function st(ue){It(ue),ve.remove(ue)}function It(ue){const we=ve.get(ue).programs;we!==void 0&&(we.forEach(function(Pe){Ae.releaseProgram(Pe)}),ue.isShaderMaterial&&Ae.releaseShaderCache(ue))}this.renderBufferDirect=function(ue,we,Pe,Ge,Fe,lt){we===null&&(we=xe);const ot=Fe.isMesh&&Fe.matrixWorld.determinant()<0,pt=pe(ue,we,Pe,Ge,Fe);Re.setMaterial(Ge,ot);let Ke=Pe.index,Vt=1;if(Ge.wireframe===!0){if(Ke=fe.getWireframeAttribute(Pe),Ke===void 0)return;Vt=2}const Lt=Pe.drawRange,Pt=Pe.attributes.position;let qt=Lt.start*Vt,sn=(Lt.start+Lt.count)*Vt;lt!==null&&(qt=Math.max(qt,lt.start*Vt),sn=Math.min(sn,(lt.start+lt.count)*Vt)),Ke!==null?(qt=Math.max(qt,0),sn=Math.min(sn,Ke.count)):Pt!=null&&(qt=Math.max(qt,0),sn=Math.min(sn,Pt.count));const ln=sn-qt;if(ln<0||ln===1/0)return;Ye.setup(Fe,Ge,pt,Pe,Ke);let vn,jt=ke;if(Ke!==null&&(vn=xt.get(Ke),jt=Ve,jt.setIndex(vn)),Fe.isMesh)Ge.wireframe===!0?(Re.setLineWidth(Ge.wireframeLinewidth*Me()),jt.setMode(he.LINES)):jt.setMode(he.TRIANGLES);else if(Fe.isLine){let Dt=Ge.linewidth;Dt===void 0&&(Dt=1),Re.setLineWidth(Dt*Me()),Fe.isLineSegments?jt.setMode(he.LINES):Fe.isLineLoop?jt.setMode(he.LINE_LOOP):jt.setMode(he.LINE_STRIP)}else Fe.isPoints?jt.setMode(he.POINTS):Fe.isSprite&&jt.setMode(he.TRIANGLES);if(Fe.isBatchedMesh)jt.renderMultiDraw(Fe._multiDrawStarts,Fe._multiDrawCounts,Fe._multiDrawCount);else if(Fe.isInstancedMesh)jt.renderInstances(qt,ln,Fe.count);else if(Pe.isInstancedBufferGeometry){const Dt=Pe._maxInstanceCount!==void 0?Pe._maxInstanceCount:1/0,Mn=Math.min(Pe.instanceCount,Dt);jt.renderInstances(qt,ln,Mn)}else jt.render(qt,ln)};function Ht(ue,we,Pe){ue.transparent===!0&&ue.side===gr&&ue.forceSinglePass===!1?(ue.side=Ti,ue.needsUpdate=!0,gn(ue,we,Pe),ue.side=es,ue.needsUpdate=!0,gn(ue,we,Pe),ue.side=gr):gn(ue,we,Pe)}this.compile=function(ue,we,Pe=null){Pe===null&&(Pe=ue),g=z.get(Pe),g.init(),x.push(g),Pe.traverseVisible(function(Fe){Fe.isLight&&Fe.layers.test(we.layers)&&(g.pushLight(Fe),Fe.castShadow&&g.pushShadow(Fe))}),ue!==Pe&&ue.traverseVisible(function(Fe){Fe.isLight&&Fe.layers.test(we.layers)&&(g.pushLight(Fe),Fe.castShadow&&g.pushShadow(Fe))}),g.setupLights(y._useLegacyLights);const Ge=new Set;return ue.traverse(function(Fe){const lt=Fe.material;if(lt)if(Array.isArray(lt))for(let ot=0;ot<lt.length;ot++){const pt=lt[ot];Ht(pt,Pe,Fe),Ge.add(pt)}else Ht(lt,Pe,Fe),Ge.add(lt)}),x.pop(),g=null,Ge},this.compileAsync=function(ue,we,Pe=null){const Ge=this.compile(ue,we,Pe);return new Promise(Fe=>{function lt(){if(Ge.forEach(function(ot){ve.get(ot).currentProgram.isReady()&&Ge.delete(ot)}),Ge.size===0){Fe(ue);return}setTimeout(lt,10)}be.get("KHR_parallel_shader_compile")!==null?lt():setTimeout(lt,10)})};let zt=null;function $t(ue){zt&&zt(ue)}function Nn(){Fn.stop()}function Tn(){Fn.start()}const Fn=new EF;Fn.setAnimationLoop($t),typeof self<"u"&&Fn.setContext(self),this.setAnimationLoop=function(ue){zt=ue,dt.setAnimationLoop(ue),ue===null?Fn.stop():Fn.start()},dt.addEventListener("sessionstart",Nn),dt.addEventListener("sessionend",Tn),this.render=function(ue,we){if(we!==void 0&&we.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),we.parent===null&&we.matrixWorldAutoUpdate===!0&&we.updateMatrixWorld(),dt.enabled===!0&&dt.isPresenting===!0&&(dt.cameraAutoUpdate===!0&&dt.updateCamera(we),we=dt.getCamera()),ue.isScene===!0&&ue.onBeforeRender(y,ue,we,M),g=z.get(ue,x.length),g.init(),x.push(g),K.multiplyMatrices(we.projectionMatrix,we.matrixWorldInverse),re.setFromProjectionMatrix(K),X=this.localClippingEnabled,Z=F.init(this.clippingPlanes,X),m=te.get(ue,v.length),m.init(),v.push(m),vr(ue,we,0,y.sortObjects),m.finish(),y.sortObjects===!0&&m.sort(Y,ee),this.info.render.frame++,Z===!0&&F.beginShadows();const Pe=g.state.shadowsArray;if(ae.render(Pe,ue,we),Z===!0&&F.endShadows(),this.info.autoReset===!0&&this.info.reset(),ye.render(m,ue),g.setupLights(y._useLegacyLights),we.isArrayCamera){const Ge=we.cameras;for(let Fe=0,lt=Ge.length;Fe<lt;Fe++){const ot=Ge[Fe];ai(m,ue,ot,ot.viewport)}}else ai(m,ue,we);M!==null&&(me.updateMultisampleRenderTarget(M),me.updateRenderTargetMipmap(M)),ue.isScene===!0&&ue.onAfterRender(y,ue,we),Ye.resetDefaultState(),C=-1,S=null,x.pop(),x.length>0?g=x[x.length-1]:g=null,v.pop(),v.length>0?m=v[v.length-1]:m=null};function vr(ue,we,Pe,Ge){if(ue.visible===!1)return;if(ue.layers.test(we.layers)){if(ue.isGroup)Pe=ue.renderOrder;else if(ue.isLOD)ue.autoUpdate===!0&&ue.update(we);else if(ue.isLight)g.pushLight(ue),ue.castShadow&&g.pushShadow(ue);else if(ue.isSprite){if(!ue.frustumCulled||re.intersectsSprite(ue)){Ge&&Se.setFromMatrixPosition(ue.matrixWorld).applyMatrix4(K);const ot=ie.update(ue),pt=ue.material;pt.visible&&m.push(ue,ot,pt,Pe,Se.z,null)}}else if((ue.isMesh||ue.isLine||ue.isPoints)&&(!ue.frustumCulled||re.intersectsObject(ue))){const ot=ie.update(ue),pt=ue.material;if(Ge&&(ue.boundingSphere!==void 0?(ue.boundingSphere===null&&ue.computeBoundingSphere(),Se.copy(ue.boundingSphere.center)):(ot.boundingSphere===null&&ot.computeBoundingSphere(),Se.copy(ot.boundingSphere.center)),Se.applyMatrix4(ue.matrixWorld).applyMatrix4(K)),Array.isArray(pt)){const Ke=ot.groups;for(let Vt=0,Lt=Ke.length;Vt<Lt;Vt++){const Pt=Ke[Vt],qt=pt[Pt.materialIndex];qt&&qt.visible&&m.push(ue,ot,qt,Pe,Se.z,Pt)}}else pt.visible&&m.push(ue,ot,pt,Pe,Se.z,null)}}const lt=ue.children;for(let ot=0,pt=lt.length;ot<pt;ot++)vr(lt[ot],we,Pe,Ge)}function ai(ue,we,Pe,Ge){const Fe=ue.opaque,lt=ue.transmissive,ot=ue.transparent;g.setupLightsView(Pe),Z===!0&&F.setGlobalState(y.clippingPlanes,Pe),lt.length>0&&Ri(Fe,lt,we,Pe),Ge&&Re.viewport(R.copy(Ge)),Fe.length>0&&Vr(Fe,we,Pe),lt.length>0&&Vr(lt,we,Pe),ot.length>0&&Vr(ot,we,Pe),Re.buffers.depth.setTest(!0),Re.buffers.depth.setMask(!0),Re.buffers.color.setMask(!0),Re.setPolygonOffset(!1)}function Ri(ue,we,Pe,Ge){if((Pe.isScene===!0?Pe.overrideMaterial:null)!==null)return;const lt=Te.isWebGL2;W===null&&(W=new pr(1,1,{generateMipmaps:!0,type:be.has("EXT_color_buffer_half_float")?Xr:Cs,minFilter:js,samples:lt?4:0})),y.getDrawingBufferSize(ge),lt?W.setSize(ge.x,ge.y):W.setSize(U3(ge.x),U3(ge.y));const ot=y.getRenderTarget();y.setRenderTarget(W),y.getClearColor(B),N=y.getClearAlpha(),N<1&&y.setClearColor(16777215,.5),y.clear();const pt=y.toneMapping;y.toneMapping=fl,Vr(ue,Pe,Ge),me.updateMultisampleRenderTarget(W),me.updateRenderTargetMipmap(W);let Ke=!1;for(let Vt=0,Lt=we.length;Vt<Lt;Vt++){const Pt=we[Vt],qt=Pt.object,sn=Pt.geometry,ln=Pt.material,vn=Pt.group;if(ln.side===gr&&qt.layers.test(Ge.layers)){const jt=ln.side;ln.side=Ti,ln.needsUpdate=!0,Pr(qt,Pe,Ge,sn,ln,vn),ln.side=jt,ln.needsUpdate=!0,Ke=!0}}Ke===!0&&(me.updateMultisampleRenderTarget(W),me.updateRenderTargetMipmap(W)),y.setRenderTarget(ot),y.setClearColor(B,N),y.toneMapping=pt}function Vr(ue,we,Pe){const Ge=we.isScene===!0?we.overrideMaterial:null;for(let Fe=0,lt=ue.length;Fe<lt;Fe++){const ot=ue[Fe],pt=ot.object,Ke=ot.geometry,Vt=Ge===null?ot.material:Ge,Lt=ot.group;pt.layers.test(Pe.layers)&&Pr(pt,we,Pe,Ke,Vt,Lt)}}function Pr(ue,we,Pe,Ge,Fe,lt){ue.onBeforeRender(y,we,Pe,Ge,Fe,lt),ue.modelViewMatrix.multiplyMatrices(Pe.matrixWorldInverse,ue.matrixWorld),ue.normalMatrix.getNormalMatrix(ue.modelViewMatrix),Fe.onBeforeRender(y,we,Pe,Ge,ue,lt),Fe.transparent===!0&&Fe.side===gr&&Fe.forceSinglePass===!1?(Fe.side=Ti,Fe.needsUpdate=!0,y.renderBufferDirect(Pe,we,Ge,Fe,ue,lt),Fe.side=es,Fe.needsUpdate=!0,y.renderBufferDirect(Pe,we,Ge,Fe,ue,lt),Fe.side=gr):y.renderBufferDirect(Pe,we,Ge,Fe,ue,lt),ue.onAfterRender(y,we,Pe,Ge,Fe,lt)}function gn(ue,we,Pe){we.isScene!==!0&&(we=xe);const Ge=ve.get(ue),Fe=g.state.lights,lt=g.state.shadowsArray,ot=Fe.state.version,pt=Ae.getParameters(ue,Fe.state,lt,we,Pe),Ke=Ae.getProgramCacheKey(pt);let Vt=Ge.programs;Ge.environment=ue.isMeshStandardMaterial?we.environment:null,Ge.fog=we.fog,Ge.envMap=(ue.isMeshStandardMaterial?Xe:We).get(ue.envMap||Ge.environment),Vt===void 0&&(ue.addEventListener("dispose",St),Vt=new Map,Ge.programs=Vt);let Lt=Vt.get(Ke);if(Lt!==void 0){if(Ge.currentProgram===Lt&&Ge.lightsStateVersion===ot)return ss(ue,pt),Lt}else pt.uniforms=Ae.getUniforms(ue),ue.onBuild(Pe,pt,y),ue.onBeforeCompile(pt,y),Lt=Ae.acquireProgram(pt,Ke),Vt.set(Ke,Lt),Ge.uniforms=pt.uniforms;const Pt=Ge.uniforms;return(!ue.isShaderMaterial&&!ue.isRawShaderMaterial||ue.clipping===!0)&&(Pt.clippingPlanes=F.uniform),ss(ue,pt),Ge.needsLights=je(ue),Ge.lightsStateVersion=ot,Ge.needsLights&&(Pt.ambientLightColor.value=Fe.state.ambient,Pt.lightProbe.value=Fe.state.probe,Pt.directionalLights.value=Fe.state.directional,Pt.directionalLightShadows.value=Fe.state.directionalShadow,Pt.spotLights.value=Fe.state.spot,Pt.spotLightShadows.value=Fe.state.spotShadow,Pt.rectAreaLights.value=Fe.state.rectArea,Pt.ltc_1.value=Fe.state.rectAreaLTC1,Pt.ltc_2.value=Fe.state.rectAreaLTC2,Pt.pointLights.value=Fe.state.point,Pt.pointLightShadows.value=Fe.state.pointShadow,Pt.hemisphereLights.value=Fe.state.hemi,Pt.directionalShadowMap.value=Fe.state.directionalShadowMap,Pt.directionalShadowMatrix.value=Fe.state.directionalShadowMatrix,Pt.spotShadowMap.value=Fe.state.spotShadowMap,Pt.spotLightMatrix.value=Fe.state.spotLightMatrix,Pt.spotLightMap.value=Fe.state.spotLightMap,Pt.pointShadowMap.value=Fe.state.pointShadowMap,Pt.pointShadowMatrix.value=Fe.state.pointShadowMatrix),Ge.currentProgram=Lt,Ge.uniformsList=null,Lt}function br(ue){if(ue.uniformsList===null){const we=ue.currentProgram.getUniforms();ue.uniformsList=r3.seqWithValue(we.seq,ue.uniforms)}return ue.uniformsList}function ss(ue,we){const Pe=ve.get(ue);Pe.outputColorSpace=we.outputColorSpace,Pe.batching=we.batching,Pe.instancing=we.instancing,Pe.instancingColor=we.instancingColor,Pe.skinning=we.skinning,Pe.morphTargets=we.morphTargets,Pe.morphNormals=we.morphNormals,Pe.morphColors=we.morphColors,Pe.morphTargetsCount=we.morphTargetsCount,Pe.numClippingPlanes=we.numClippingPlanes,Pe.numIntersection=we.numClipIntersection,Pe.vertexAlphas=we.vertexAlphas,Pe.vertexTangents=we.vertexTangents,Pe.toneMapping=we.toneMapping}function pe(ue,we,Pe,Ge,Fe){we.isScene!==!0&&(we=xe),me.resetTextureUnits();const lt=we.fog,ot=Ge.isMeshStandardMaterial?we.environment:null,pt=M===null?y.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:sa,Ke=(Ge.isMeshStandardMaterial?Xe:We).get(Ge.envMap||ot),Vt=Ge.vertexColors===!0&&!!Pe.attributes.color&&Pe.attributes.color.itemSize===4,Lt=!!Pe.attributes.tangent&&(!!Ge.normalMap||Ge.anisotropy>0),Pt=!!Pe.morphAttributes.position,qt=!!Pe.morphAttributes.normal,sn=!!Pe.morphAttributes.color;let ln=fl;Ge.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(ln=y.toneMapping);const vn=Pe.morphAttributes.position||Pe.morphAttributes.normal||Pe.morphAttributes.color,jt=vn!==void 0?vn.length:0,Dt=ve.get(Ge),Mn=g.state.lights;if(Z===!0&&(X===!0||ue!==S)){const En=ue===S&&Ge.id===C;F.setState(Ge,ue,En)}let fn=!1;Ge.version===Dt.__version?(Dt.needsLights&&Dt.lightsStateVersion!==Mn.state.version||Dt.outputColorSpace!==pt||Fe.isBatchedMesh&&Dt.batching===!1||!Fe.isBatchedMesh&&Dt.batching===!0||Fe.isInstancedMesh&&Dt.instancing===!1||!Fe.isInstancedMesh&&Dt.instancing===!0||Fe.isSkinnedMesh&&Dt.skinning===!1||!Fe.isSkinnedMesh&&Dt.skinning===!0||Fe.isInstancedMesh&&Dt.instancingColor===!0&&Fe.instanceColor===null||Fe.isInstancedMesh&&Dt.instancingColor===!1&&Fe.instanceColor!==null||Dt.envMap!==Ke||Ge.fog===!0&&Dt.fog!==lt||Dt.numClippingPlanes!==void 0&&(Dt.numClippingPlanes!==F.numPlanes||Dt.numIntersection!==F.numIntersection)||Dt.vertexAlphas!==Vt||Dt.vertexTangents!==Lt||Dt.morphTargets!==Pt||Dt.morphNormals!==qt||Dt.morphColors!==sn||Dt.toneMapping!==ln||Te.isWebGL2===!0&&Dt.morphTargetsCount!==jt)&&(fn=!0):(fn=!0,Dt.__version=Ge.version);let yn=Dt.currentProgram;fn===!0&&(yn=gn(Ge,we,Fe));let Jn=!1,or=!1,ar=!1;const Bn=yn.getUniforms(),Rn=Dt.uniforms;if(Re.useProgram(yn.program)&&(Jn=!0,or=!0,ar=!0),Ge.id!==C&&(C=Ge.id,or=!0),Jn||S!==ue){Bn.setValue(he,"projectionMatrix",ue.projectionMatrix),Bn.setValue(he,"viewMatrix",ue.matrixWorldInverse);const En=Bn.map.cameraPosition;En!==void 0&&En.setValue(he,Se.setFromMatrixPosition(ue.matrixWorld)),Te.logarithmicDepthBuffer&&Bn.setValue(he,"logDepthBufFC",2/(Math.log(ue.far+1)/Math.LN2)),(Ge.isMeshPhongMaterial||Ge.isMeshToonMaterial||Ge.isMeshLambertMaterial||Ge.isMeshBasicMaterial||Ge.isMeshStandardMaterial||Ge.isShaderMaterial)&&Bn.setValue(he,"isOrthographic",ue.isOrthographicCamera===!0),S!==ue&&(S=ue,or=!0,ar=!0)}if(Fe.isSkinnedMesh){Bn.setOptional(he,Fe,"bindMatrix"),Bn.setOptional(he,Fe,"bindMatrixInverse");const En=Fe.skeleton;En&&(Te.floatVertexTextures?(En.boneTexture===null&&En.computeBoneTexture(),Bn.setValue(he,"boneTexture",En.boneTexture,me)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}Fe.isBatchedMesh&&(Bn.setOptional(he,Fe,"batchingTexture"),Bn.setValue(he,"batchingTexture",Fe._matricesTexture,me));const Zt=Pe.morphAttributes;if((Zt.position!==void 0||Zt.normal!==void 0||Zt.color!==void 0&&Te.isWebGL2===!0)&&Le.update(Fe,Pe,yn),(or||Dt.receiveShadow!==Fe.receiveShadow)&&(Dt.receiveShadow=Fe.receiveShadow,Bn.setValue(he,"receiveShadow",Fe.receiveShadow)),Ge.isMeshGouraudMaterial&&Ge.envMap!==null&&(Rn.envMap.value=Ke,Rn.flipEnvMap.value=Ke.isCubeTexture&&Ke.isRenderTargetTexture===!1?-1:1),or&&(Bn.setValue(he,"toneMappingExposure",y.toneMappingExposure),Dt.needsLights&&Ee(Rn,ar),lt&&Ge.fog===!0&&Je.refreshFogUniforms(Rn,lt),Je.refreshMaterialUniforms(Rn,Ge,Q,U,W),r3.upload(he,br(Dt),Rn,me)),Ge.isShaderMaterial&&Ge.uniformsNeedUpdate===!0&&(r3.upload(he,br(Dt),Rn,me),Ge.uniformsNeedUpdate=!1),Ge.isSpriteMaterial&&Bn.setValue(he,"center",Fe.center),Bn.setValue(he,"modelViewMatrix",Fe.modelViewMatrix),Bn.setValue(he,"normalMatrix",Fe.normalMatrix),Bn.setValue(he,"modelMatrix",Fe.matrixWorld),Ge.isShaderMaterial||Ge.isRawShaderMaterial){const En=Ge.uniformsGroups;for(let wn=0,sr=En.length;wn<sr;wn++)if(Te.isWebGL2){const li=En[wn];tt.update(li,yn),tt.bind(li,yn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return yn}function Ee(ue,we){ue.ambientLightColor.needsUpdate=we,ue.lightProbe.needsUpdate=we,ue.directionalLights.needsUpdate=we,ue.directionalLightShadows.needsUpdate=we,ue.pointLights.needsUpdate=we,ue.pointLightShadows.needsUpdate=we,ue.spotLights.needsUpdate=we,ue.spotLightShadows.needsUpdate=we,ue.rectAreaLights.needsUpdate=we,ue.hemisphereLights.needsUpdate=we}function je(ue){return ue.isMeshLambertMaterial||ue.isMeshToonMaterial||ue.isMeshPhongMaterial||ue.isMeshStandardMaterial||ue.isShadowMaterial||ue.isShaderMaterial&&ue.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(ue,we,Pe){ve.get(ue.texture).__webglTexture=we,ve.get(ue.depthTexture).__webglTexture=Pe;const Ge=ve.get(ue);Ge.__hasExternalTextures=!0,Ge.__hasExternalTextures&&(Ge.__autoAllocateDepthBuffer=Pe===void 0,Ge.__autoAllocateDepthBuffer||be.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ge.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ue,we){const Pe=ve.get(ue);Pe.__webglFramebuffer=we,Pe.__useDefaultFramebuffer=we===void 0},this.setRenderTarget=function(ue,we=0,Pe=0){M=ue,T=we,w=Pe;let Ge=!0,Fe=null,lt=!1,ot=!1;if(ue){const Ke=ve.get(ue);Ke.__useDefaultFramebuffer!==void 0?(Re.bindFramebuffer(he.FRAMEBUFFER,null),Ge=!1):Ke.__webglFramebuffer===void 0?me.setupRenderTarget(ue):Ke.__hasExternalTextures&&me.rebindTextures(ue,ve.get(ue.texture).__webglTexture,ve.get(ue.depthTexture).__webglTexture);const Vt=ue.texture;(Vt.isData3DTexture||Vt.isDataArrayTexture||Vt.isCompressedArrayTexture)&&(ot=!0);const Lt=ve.get(ue).__webglFramebuffer;ue.isWebGLCubeRenderTarget?(Array.isArray(Lt[we])?Fe=Lt[we][Pe]:Fe=Lt[we],lt=!0):Te.isWebGL2&&ue.samples>0&&me.useMultisampledRTT(ue)===!1?Fe=ve.get(ue).__webglMultisampledFramebuffer:Array.isArray(Lt)?Fe=Lt[Pe]:Fe=Lt,R.copy(ue.viewport),O.copy(ue.scissor),L=ue.scissorTest}else R.copy(ne).multiplyScalar(Q).floor(),O.copy(P).multiplyScalar(Q).floor(),L=se;if(Re.bindFramebuffer(he.FRAMEBUFFER,Fe)&&Te.drawBuffers&&Ge&&Re.drawBuffers(ue,Fe),Re.viewport(R),Re.scissor(O),Re.setScissorTest(L),lt){const Ke=ve.get(ue.texture);he.framebufferTexture2D(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_CUBE_MAP_POSITIVE_X+we,Ke.__webglTexture,Pe)}else if(ot){const Ke=ve.get(ue.texture),Vt=we||0;he.framebufferTextureLayer(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,Ke.__webglTexture,Pe||0,Vt)}C=-1},this.readRenderTargetPixels=function(ue,we,Pe,Ge,Fe,lt,ot){if(!(ue&&ue.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pt=ve.get(ue).__webglFramebuffer;if(ue.isWebGLCubeRenderTarget&&ot!==void 0&&(pt=pt[ot]),pt){Re.bindFramebuffer(he.FRAMEBUFFER,pt);try{const Ke=ue.texture,Vt=Ke.format,Lt=Ke.type;if(Vt!==Sr&&Ce.convert(Vt)!==he.getParameter(he.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Pt=Lt===Xr&&(be.has("EXT_color_buffer_half_float")||Te.isWebGL2&&be.has("EXT_color_buffer_float"));if(Lt!==Cs&&Ce.convert(Lt)!==he.getParameter(he.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Lt===fr&&(Te.isWebGL2||be.has("OES_texture_float")||be.has("WEBGL_color_buffer_float")))&&!Pt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}we>=0&&we<=ue.width-Ge&&Pe>=0&&Pe<=ue.height-Fe&&he.readPixels(we,Pe,Ge,Fe,Ce.convert(Vt),Ce.convert(Lt),lt)}finally{const Ke=M!==null?ve.get(M).__webglFramebuffer:null;Re.bindFramebuffer(he.FRAMEBUFFER,Ke)}}},this.copyFramebufferToTexture=function(ue,we,Pe=0){const Ge=Math.pow(2,-Pe),Fe=Math.floor(we.image.width*Ge),lt=Math.floor(we.image.height*Ge);me.setTexture2D(we,0),he.copyTexSubImage2D(he.TEXTURE_2D,Pe,0,0,ue.x,ue.y,Fe,lt),Re.unbindTexture()},this.copyTextureToTexture=function(ue,we,Pe,Ge=0){const Fe=we.image.width,lt=we.image.height,ot=Ce.convert(Pe.format),pt=Ce.convert(Pe.type);me.setTexture2D(Pe,0),he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,Pe.flipY),he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pe.premultiplyAlpha),he.pixelStorei(he.UNPACK_ALIGNMENT,Pe.unpackAlignment),we.isDataTexture?he.texSubImage2D(he.TEXTURE_2D,Ge,ue.x,ue.y,Fe,lt,ot,pt,we.image.data):we.isCompressedTexture?he.compressedTexSubImage2D(he.TEXTURE_2D,Ge,ue.x,ue.y,we.mipmaps[0].width,we.mipmaps[0].height,ot,we.mipmaps[0].data):he.texSubImage2D(he.TEXTURE_2D,Ge,ue.x,ue.y,ot,pt,we.image),Ge===0&&Pe.generateMipmaps&&he.generateMipmap(he.TEXTURE_2D),Re.unbindTexture()},this.copyTextureToTexture3D=function(ue,we,Pe,Ge,Fe=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const lt=ue.max.x-ue.min.x+1,ot=ue.max.y-ue.min.y+1,pt=ue.max.z-ue.min.z+1,Ke=Ce.convert(Ge.format),Vt=Ce.convert(Ge.type);let Lt;if(Ge.isData3DTexture)me.setTexture3D(Ge,0),Lt=he.TEXTURE_3D;else if(Ge.isDataArrayTexture)me.setTexture2DArray(Ge,0),Lt=he.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,Ge.flipY),he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ge.premultiplyAlpha),he.pixelStorei(he.UNPACK_ALIGNMENT,Ge.unpackAlignment);const Pt=he.getParameter(he.UNPACK_ROW_LENGTH),qt=he.getParameter(he.UNPACK_IMAGE_HEIGHT),sn=he.getParameter(he.UNPACK_SKIP_PIXELS),ln=he.getParameter(he.UNPACK_SKIP_ROWS),vn=he.getParameter(he.UNPACK_SKIP_IMAGES),jt=Pe.isCompressedTexture?Pe.mipmaps[0]:Pe.image;he.pixelStorei(he.UNPACK_ROW_LENGTH,jt.width),he.pixelStorei(he.UNPACK_IMAGE_HEIGHT,jt.height),he.pixelStorei(he.UNPACK_SKIP_PIXELS,ue.min.x),he.pixelStorei(he.UNPACK_SKIP_ROWS,ue.min.y),he.pixelStorei(he.UNPACK_SKIP_IMAGES,ue.min.z),Pe.isDataTexture||Pe.isData3DTexture?he.texSubImage3D(Lt,Fe,we.x,we.y,we.z,lt,ot,pt,Ke,Vt,jt.data):Pe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(Lt,Fe,we.x,we.y,we.z,lt,ot,pt,Ke,jt.data)):he.texSubImage3D(Lt,Fe,we.x,we.y,we.z,lt,ot,pt,Ke,Vt,jt),he.pixelStorei(he.UNPACK_ROW_LENGTH,Pt),he.pixelStorei(he.UNPACK_IMAGE_HEIGHT,qt),he.pixelStorei(he.UNPACK_SKIP_PIXELS,sn),he.pixelStorei(he.UNPACK_SKIP_ROWS,ln),he.pixelStorei(he.UNPACK_SKIP_IMAGES,vn),Fe===0&&Ge.generateMipmaps&&he.generateMipmap(Lt),Re.unbindTexture()},this.initTexture=function(ue){ue.isCubeTexture?me.setTextureCube(ue,0):ue.isData3DTexture?me.setTexture3D(ue,0):ue.isDataArrayTexture||ue.isCompressedArrayTexture?me.setTexture2DArray(ue,0):me.setTexture2D(ue,0),Re.unbindTexture()},this.resetState=function(){T=0,w=0,M=null,Re.reset(),Ye.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return cl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===FE?"display-p3":"srgb",n.unpackColorSpace=wr.workingColorSpace===Mg?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ii?Ru:d5}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ru?ii:sa}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class MF extends Pg{}MF.prototype.isWebGL1Renderer=!0;class VE{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new bt(e),this.density=n}clone(){return new VE(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class WE{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new bt(e),this.near=n,this.far=r}clone(){return new WE(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let vs=class extends hn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}};class nm{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=K1,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=ia()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn('THREE.InterleavedBuffer: "updateRange" is deprecated and removed in r169. Use "addUpdateRange()" instead.'),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ia()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ia()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const so=new J;class po{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyMatrix4(e),this.setXYZ(n,so.x,so.y,so.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyNormalMatrix(e),this.setXYZ(n,so.x,so.y,so.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.transformDirection(e),this.setXYZ(n,so.x,so.y,so.z);return this}setX(e,n){return this.normalized&&(n=Wn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Wn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Wn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Wn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Lo(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Lo(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Lo(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Lo(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Wn(n,this.array),r=Wn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Wn(n,this.array),r=Wn(r,this.array),i=Wn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Wn(n,this.array),r=Wn(r,this.array),i=Wn(i,this.array),s=Wn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new Qt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new po(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class b5 extends Gr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let fd;const e0=new J,hd=new J,dd=new J,pd=new qe,t0=new qe,RF=new yt,my=new J,n0=new J,gy=new J,zR=new qe,UA=new qe,HR=new qe;class IF extends hn{constructor(e=new b5){if(super(),this.isSprite=!0,this.type="Sprite",fd===void 0){fd=new on;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new nm(n,5);fd.setIndex([0,1,2,0,2,3]),fd.setAttribute("position",new po(r,3,0,!1)),fd.setAttribute("uv",new po(r,2,3,!1))}this.geometry=fd,this.material=e,this.center=new qe(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),hd.setFromMatrixScale(this.matrixWorld),RF.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),dd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&hd.multiplyScalar(-dd.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;vy(my.set(-.5,-.5,0),dd,o,hd,i,s),vy(n0.set(.5,-.5,0),dd,o,hd,i,s),vy(gy.set(.5,.5,0),dd,o,hd,i,s),zR.set(0,0),UA.set(1,0),HR.set(1,1);let a=e.ray.intersectTriangle(my,n0,gy,!1,e0);if(a===null&&(vy(n0.set(-.5,.5,0),dd,o,hd,i,s),UA.set(0,1),a=e.ray.intersectTriangle(my,gy,n0,!1,e0),a===null))return;const l=e.ray.origin.distanceTo(e0);l<e.near||l>e.far||n.push({distance:l,point:e0.clone(),uv:Xi.getInterpolation(e0,my,n0,gy,zR,UA,HR,new qe),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function vy(t,e,n,r,i,s){pd.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(t0.x=s*pd.x-i*pd.y,t0.y=i*pd.x+s*pd.y):t0.copy(pd),t.copy(e),t.x+=t0.x,t.y+=t0.y,t.applyMatrix4(RF)}const yy=new J,GR=new J;class PF extends hn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){yy.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(yy);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){yy.setFromMatrixPosition(e.matrixWorld),GR.setFromMatrixPosition(this.matrixWorld);const r=yy.distanceTo(GR)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const VR=new J,WR=new Xn,jR=new Xn,pce=new J,$R=new yt,xy=new J,zA=new Fr,XR=new yt,HA=new xl;class bh extends un{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Ww,this.bindMatrix=new yt,this.bindMatrixInverse=new yt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Yn),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,xy),this.boundingBox.expandByPoint(xy)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Fr),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,xy),this.boundingSphere.expandByPoint(xy)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),zA.copy(this.boundingSphere),zA.applyMatrix4(i),e.ray.intersectsSphere(zA)!==!1&&(XR.copy(i).invert(),HA.copy(e.ray).applyMatrix4(XR),!(this.boundingBox!==null&&HA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,HA)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Xn,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Ww?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Qk?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;WR.fromBufferAttribute(i.attributes.skinIndex,e),jR.fromBufferAttribute(i.attributes.skinWeight,e),VR.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=jR.getComponent(s);if(o!==0){const a=WR.getComponent(s);$R.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(pce.copy(VR).applyMatrix4($R),o)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class Ah extends hn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class mo extends Vn{constructor(e=null,n=1,r=1,i,s,o,a,l,c=Ln,u=Ln,f,h){super(null,o,a,l,c,u,i,s,f,h),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const YR=new yt,mce=new yt;class Xu{constructor(e=[],n=[]){this.uuid=ia(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new yt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new yt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:mce;YR.multiplyMatrices(a,n[s]),YR.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Xu(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new mo(n,e,e,Sr,fr);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Ah),this.bones.push(o),this.boneInverses.push(new yt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class ml extends Qt{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const md=new yt,qR=new yt,Ey=[],KR=new Yn,gce=new yt,r0=new un,i0=new Fr;class rm extends un{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new ml(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,gce)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Yn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,md),KR.copy(e.boundingBox).applyMatrix4(md),this.boundingBox.union(KR)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Fr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,md),i0.copy(e.boundingSphere).applyMatrix4(md),this.boundingSphere.union(i0)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(r0.geometry=this.geometry,r0.material=this.material,r0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),i0.copy(this.boundingSphere),i0.applyMatrix4(r),e.ray.intersectsSphere(i0)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,md),qR.multiplyMatrices(r,md),r0.matrixWorld=qR,r0.raycast(e,Ey);for(let o=0,a=Ey.length;o<a;o++){const l=Ey[o];l.instanceId=s,l.object=this,n.push(l)}Ey.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new ml(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function vce(t,e){return t.z-e.z}function yce(t,e){return e.z-t.z}class xce{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=n}reset(){this.list.length=0,this.index=0}}const gd="batchId",uu=new yt,JR=new yt,Ece=new yt,QR=new yt,GA=new _h,_y=new Yn,xf=new Fr,s0=new J,VA=new xce,Bs=new un,by=[];function _ce(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class LF extends un{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,r=n*2,i){super(new on,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new mo(n,e,e,Sr,fr);this._matricesTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:u,normalized:f}=l,h=new c.constructor(r*u),d=new l.constructor(h,u,f);d.setUsage(l.usage),n.setAttribute(a,d)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);n.setIndex(new Qt(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(gd,new Qt(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(gd))throw new Error(`BatchedMesh: Geometry cannot use attribute "${gd}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===gd)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=n.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yn);const e=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,uu),this.getBoundingBoxAt(i,_y).applyMatrix4(uu),n.union(_y))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fr);const e=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,uu),this.getBoundingSphereAt(i,xf).applyMatrix4(uu),n.union(xf))}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,h=this._active,d=this._matricesTexture,p=this._matricesTexture.image.data;f.push(!0),h.push(!0);const m=this._geometryCount;this._geometryCount++,Ece.toArray(p,m*16),d.needsUpdate=!0,o.push(i),a.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Yn,sphereInitialized:!1,sphere:new Fr});const g=this.geometry.getAttribute(gd);for(let v=0;v<i.vertexCount;v++)g.setX(i.vertexStart+v,m);return g.needsUpdate=!0,this.setGeometryAt(m,e),m}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=n.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||n.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const d in r.attributes){if(d===gd)continue;const p=n.getAttribute(d),m=r.getAttribute(d);_ce(p,m,l);const g=p.itemSize;for(let v=p.count,x=c;v<x;v++){const y=l+v;for(let A=0;A<g;A++)m.setComponent(y,A,0)}m.needsUpdate=!0}if(i){const d=a.indexStart;for(let p=0;p<o.count;p++)s.setX(d+p,l+o.getX(p));for(let p=o.count,m=a.indexCount;p<m;p++)s.setX(d+p,l);s.needsUpdate=!0}const u=this._bounds[e];n.boundingBox!==null?(u.box.copy(n.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,n.boundingSphere!==null?(u.sphere.copy(n.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const f=this._drawRanges[e],h=n.getAttribute("position");return f.count=i?o.count:h.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let u=c.start,f=c.start+c.count;u<f;u++){let h=u;a&&(h=a.getX(h)),s.expandByPoint(s0.fromBufferAttribute(l,h))}i.boxInitialized=!0}return n.copy(s),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,_y),_y.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let u=0;for(let f=c.start,h=c.start+c.count;f<h;f++){let d=f;a&&(d=a.getX(d)),s0.fromBufferAttribute(l,d),u=Math.max(u,s.center.distanceToSquared(s0))}s.radius=Math.sqrt(u),i.sphereInitialized=!0}return n.copy(s),n}setMatrixAt(e,n){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(n.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:n.fromArray(i,e*16)}setVisibleAt(e,n){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===n?this:(r[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:n[e]}raycast(e,n){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Bs.material=this.material,Bs.geometry.index=l.index,Bs.geometry.attributes=l.attributes,Bs.geometry.boundingBox===null&&(Bs.geometry.boundingBox=new Yn),Bs.geometry.boundingSphere===null&&(Bs.geometry.boundingSphere=new Fr);for(let c=0;c<o;c++){if(!r[c]||!i[c])continue;const u=s[c];Bs.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,Bs.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,Bs.geometry.boundingBox),this.getBoundingSphereAt(c,Bs.geometry.boundingSphere),Bs.raycast(e,by);for(let f=0,h=by.length;f<h;f++){const d=by[f];d.object=this,d.batchId=c,n.push(d)}by.length=0}Bs.material=null,Bs.geometry.index=null,Bs.geometry.attributes={},Bs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._visibility,c=this._multiDrawStarts,u=this._multiDrawCounts,f=this._drawRanges,h=this.perObjectFrustumCulled;h&&(QR.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),GA.setFromProjectionMatrix(QR,e.isWebGPURenderer?Pp:cl));let d=0;if(this.sortObjects){JR.copy(this.matrixWorld).invert(),s0.setFromMatrixPosition(r.matrixWorld).applyMatrix4(JR);for(let g=0,v=l.length;g<v;g++)if(l[g]){this.getMatrixAt(g,uu),this.getBoundingSphereAt(g,xf).applyMatrix4(uu);let x=!1;if(h&&(x=!GA.intersectsSphere(xf)),!x){const y=s0.distanceTo(xf.center);VA.push(f[g],y)}}const p=VA.list,m=this.customSort;m===null?p.sort(s.transparent?yce:vce):m.call(this,p,r);for(let g=0,v=p.length;g<v;g++){const x=p[g];c[d]=x.start*a,u[d]=x.count,d++}VA.reset()}else for(let p=0,m=l.length;p<m;p++)if(l[p]){let g=!1;if(h&&(this.getMatrixAt(p,uu),this.getBoundingSphereAt(p,xf).applyMatrix4(uu),g=!GA.intersectsSphere(xf)),!g){const v=f[p];c[d]=v.start*a,u[d]=v.count,d++}}this._multiDrawCount=d,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class yi extends Gr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new bt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ZR=new J,e7=new J,t7=new yt,WA=new xl,Ay=new Fr;let Fa=class extends hn{constructor(e=new on,n=new yi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)ZR.fromBufferAttribute(n,i-1),e7.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=ZR.distanceTo(e7);e.setAttribute("lineDistance",new Ot(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Ay.copy(r.boundingSphere),Ay.applyMatrix4(i),Ay.radius+=s,e.ray.intersectsSphere(Ay)===!1)return;t7.copy(i).invert(),WA.copy(e.ray).applyMatrix4(t7);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new J,u=new J,f=new J,h=new J,d=this.isLineSegments?2:1,p=r.index,g=r.attributes.position;if(p!==null){const v=Math.max(0,o.start),x=Math.min(p.count,o.start+o.count);for(let y=v,A=x-1;y<A;y+=d){const T=p.getX(y),w=p.getX(y+1);if(c.fromBufferAttribute(g,T),u.fromBufferAttribute(g,w),WA.distanceSqToSegment(c,u,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(h);C<e.near||C>e.far||n.push({distance:C,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,o.start),x=Math.min(g.count,o.start+o.count);for(let y=v,A=x-1;y<A;y+=d){if(c.fromBufferAttribute(g,y),u.fromBufferAttribute(g,y+1),WA.distanceSqToSegment(c,u,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||n.push({distance:w,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const n7=new J,r7=new J;class $s extends Fa{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)n7.fromBufferAttribute(n,i),r7.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+n7.distanceTo(r7);e.setAttribute("lineDistance",new Ot(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class jE extends Fa{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class ul extends Gr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const i7=new yt,_S=new xl,Ty=new Fr,wy=new J;let Nc=class extends hn{constructor(e=new on,n=new ul){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Ty.copy(r.boundingSphere),Ty.applyMatrix4(i),Ty.radius+=s,e.ray.intersectsSphere(Ty)===!1)return;i7.copy(i).invert(),_S.copy(e.ray).applyMatrix4(i7);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,f=r.attributes.position;if(c!==null){const h=Math.max(0,o.start),d=Math.min(c.count,o.start+o.count);for(let p=h,m=d;p<m;p++){const g=c.getX(p);wy.fromBufferAttribute(f,g),s7(wy,g,l,i,e,n,this)}}else{const h=Math.max(0,o.start),d=Math.min(f.count,o.start+o.count);for(let p=h,m=d;p<m;p++)wy.fromBufferAttribute(f,p),s7(wy,p,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function s7(t,e,n,r,i,s,o){const a=_S.distanceSqToPoint(t);if(a<n){const l=new J;_S.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class NF extends Vn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Cn,this.magFilter=s!==void 0?s:Cn,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class bce extends Vn{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Ln,this.minFilter=Ln,this.generateMipmaps=!1,this.needsUpdate=!0}}class $E extends Vn{constructor(e,n,r,i,s,o,a,l,c,u,f,h){super(null,o,a,l,c,u,i,s,f,h),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Ace extends $E{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Er}}class Tce extends $E{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,Xl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class OF extends Vn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class El{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],h=r[i+1]-u,d=(o-u)/h;return(i+d)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new qe:new J);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new J,i=[],s=[],o=[],a=new J,l=new yt;for(let d=0;d<=e;d++){const p=d/e;i[d]=this.getTangentAt(p,new J)}s[0]=new J,o[0]=new J;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),f=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),f<=c&&(c=f,r.set(0,1,0)),h<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Ai(i[d-1].dot(i[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(a,p))}o[d].crossVectors(i[d],s[d])}if(n===!0){let d=Math.acos(Ai(s[0].dot(s[e]),-1,1));d/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(i[p],d*p)),o[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class XE extends El{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const r=n||new qe,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,d=c-this.aY;l=h*u-d*f+this.aX,c=h*f+d*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class DF extends XE{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function A5(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,d=(a-o)/u-(l-o)/(u+f)+(l-a)/f;h*=u,d*=u,i(o,a,h,d)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const Sy=new J,jA=new A5,$A=new A5,XA=new A5;class T5 extends El{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new J){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(Sy.subVectors(i[0],i[1]).add(i[0]),c=Sy);const f=i[a%s],h=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(Sy.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=Sy),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(f),d),m=Math.pow(f.distanceToSquared(h),d),g=Math.pow(h.distanceToSquared(u),d);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),jA.initNonuniformCatmullRom(c.x,f.x,h.x,u.x,p,m,g),$A.initNonuniformCatmullRom(c.y,f.y,h.y,u.y,p,m,g),XA.initNonuniformCatmullRom(c.z,f.z,h.z,u.z,p,m,g)}else this.curveType==="catmullrom"&&(jA.initCatmullRom(c.x,f.x,h.x,u.x,this.tension),$A.initCatmullRom(c.y,f.y,h.y,u.y,this.tension),XA.initCatmullRom(c.z,f.z,h.z,u.z,this.tension));return r.set(jA.calc(l),$A.calc(l),XA.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new J().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function o7(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function wce(t,e){const n=1-t;return n*n*e}function Sce(t,e){return 2*(1-t)*t*e}function Cce(t,e){return t*t*e}function d1(t,e,n,r){return wce(t,e)+Sce(t,n)+Cce(t,r)}function Mce(t,e){const n=1-t;return n*n*n*e}function Rce(t,e){const n=1-t;return 3*n*n*t*e}function Ice(t,e){return 3*(1-t)*t*t*e}function Pce(t,e){return t*t*t*e}function p1(t,e,n,r,i){return Mce(t,e)+Rce(t,n)+Ice(t,r)+Pce(t,i)}class w5 extends El{constructor(e=new qe,n=new qe,r=new qe,i=new qe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new qe){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(p1(e,i.x,s.x,o.x,a.x),p1(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class S5 extends El{constructor(e=new J,n=new J,r=new J,i=new J){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new J){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(p1(e,i.x,s.x,o.x,a.x),p1(e,i.y,s.y,o.y,a.y),p1(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class C5 extends El{constructor(e=new qe,n=new qe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new qe){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new qe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BF extends El{constructor(e=new J,n=new J){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new J){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new J){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class M5 extends El{constructor(e=new qe,n=new qe,r=new qe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new qe){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(d1(e,i.x,s.x,o.x),d1(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class YE extends El{constructor(e=new J,n=new J,r=new J){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new J){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(d1(e,i.x,s.x,o.x),d1(e,i.y,s.y,o.y),d1(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class R5 extends El{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new qe){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(o7(a,l.x,c.x,u.x,f.x),o7(a,l.y,c.y,u.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new qe().fromArray(i))}return this}}var z3=Object.freeze({__proto__:null,ArcCurve:DF,CatmullRomCurve3:T5,CubicBezierCurve:w5,CubicBezierCurve3:S5,EllipseCurve:XE,LineCurve:C5,LineCurve3:BF,QuadraticBezierCurve:M5,QuadraticBezierCurve3:YE,SplineCurve:R5});class kF extends El{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new z3[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new z3[i.type]().fromJSON(i))}return this}}class Iu extends kF{constructor(e){super(),this.type="Path",this.currentPoint=new qe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new C5(this.currentPoint.clone(),new qe(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new M5(this.currentPoint.clone(),new qe(e,n),new qe(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new w5(this.currentPoint.clone(),new qe(e,n),new qe(r,i),new qe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new R5(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const c=new XE(e,n,r,i,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Lg extends on{constructor(e=[new qe(0,-.5),new qe(.5,0),new qe(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Ai(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/n,f=new J,h=new qe,d=new J,p=new J,m=new J;let g=0,v=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:g=e[x+1].x-e[x].x,v=e[x+1].y-e[x].y,d.x=v*1,d.y=-g,d.z=v*0,m.copy(d),d.normalize(),l.push(d.x,d.y,d.z);break;case e.length-1:l.push(m.x,m.y,m.z);break;default:g=e[x+1].x-e[x].x,v=e[x+1].y-e[x].y,d.x=v*1,d.y=-g,d.z=v*0,p.copy(d),d.x+=m.x,d.y+=m.y,d.z+=m.z,d.normalize(),l.push(d.x,d.y,d.z),m.copy(p)}for(let x=0;x<=n;x++){const y=r+x*u*i,A=Math.sin(y),T=Math.cos(y);for(let w=0;w<=e.length-1;w++){f.x=e[w].x*A,f.y=e[w].y,f.z=e[w].x*T,o.push(f.x,f.y,f.z),h.x=x/n,h.y=w/(e.length-1),a.push(h.x,h.y);const M=l[3*w+0]*A,C=l[3*w+1],S=l[3*w+0]*T;c.push(M,C,S)}}for(let x=0;x<n;x++)for(let y=0;y<e.length-1;y++){const A=y+x*e.length,T=A,w=A+e.length,M=A+e.length+1,C=A+1;s.push(T,w,C),s.push(M,C,w)}this.setIndex(s),this.setAttribute("position",new Ot(o,3)),this.setAttribute("uv",new Ot(a,2)),this.setAttribute("normal",new Ot(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lg(e.points,e.segments,e.phiStart,e.phiLength)}}class qE extends Lg{constructor(e=1,n=1,r=4,i=8){const s=new Iu;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new qE(e.radius,e.length,e.capSegments,e.radialSegments)}}class KE extends on{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new J,u=new qe;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=n;f++,h+=3){const d=r+f/n*i;c.x=e*Math.cos(d),c.y=e*Math.sin(d),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=n;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Ot(o,3)),this.setAttribute("normal",new Ot(a,3)),this.setAttribute("uv",new Ot(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new KE(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Yu extends on{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],f=[],h=[],d=[];let p=0;const m=[],g=r/2;let v=0;x(),o===!1&&(e>0&&y(!0),n>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new Ot(f,3)),this.setAttribute("normal",new Ot(h,3)),this.setAttribute("uv",new Ot(d,2));function x(){const A=new J,T=new J;let w=0;const M=(n-e)/r;for(let C=0;C<=s;C++){const S=[],R=C/s,O=R*(n-e)+e;for(let L=0;L<=i;L++){const B=L/i,N=B*l+a,$=Math.sin(N),U=Math.cos(N);T.x=O*$,T.y=-R*r+g,T.z=O*U,f.push(T.x,T.y,T.z),A.set($,M,U).normalize(),h.push(A.x,A.y,A.z),d.push(B,1-R),S.push(p++)}m.push(S)}for(let C=0;C<i;C++)for(let S=0;S<s;S++){const R=m[S][C],O=m[S+1][C],L=m[S+1][C+1],B=m[S][C+1];u.push(R,O,B),u.push(O,L,B),w+=6}c.addGroup(v,w,0),v+=w}function y(A){const T=p,w=new qe,M=new J;let C=0;const S=A===!0?e:n,R=A===!0?1:-1;for(let L=1;L<=i;L++)f.push(0,g*R,0),h.push(0,R,0),d.push(.5,.5),p++;const O=p;for(let L=0;L<=i;L++){const N=L/i*l+a,$=Math.cos(N),U=Math.sin(N);M.x=S*U,M.y=g*R,M.z=S*$,f.push(M.x,M.y,M.z),h.push(0,R,0),w.x=$*.5+.5,w.y=U*.5*R+.5,d.push(w.x,w.y),p++}for(let L=0;L<i;L++){const B=T+L,N=O+L;A===!0?u.push(N,N+1,B):u.push(N+1,N,B),C+=3}c.addGroup(v,C,A===!0?1:2),v+=C}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class JE extends Yu{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new JE(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qu extends on{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new Ot(s,3)),this.setAttribute("normal",new Ot(s.slice(),3)),this.setAttribute("uv",new Ot(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const y=new J,A=new J,T=new J;for(let w=0;w<n.length;w+=3)d(n[w+0],y),d(n[w+1],A),d(n[w+2],T),l(y,A,T,x)}function l(x,y,A,T){const w=T+1,M=[];for(let C=0;C<=w;C++){M[C]=[];const S=x.clone().lerp(A,C/w),R=y.clone().lerp(A,C/w),O=w-C;for(let L=0;L<=O;L++)L===0&&C===w?M[C][L]=S:M[C][L]=S.clone().lerp(R,L/O)}for(let C=0;C<w;C++)for(let S=0;S<2*(w-C)-1;S++){const R=Math.floor(S/2);S%2===0?(h(M[C][R+1]),h(M[C+1][R]),h(M[C][R])):(h(M[C][R+1]),h(M[C+1][R+1]),h(M[C+1][R]))}}function c(x){const y=new J;for(let A=0;A<s.length;A+=3)y.x=s[A+0],y.y=s[A+1],y.z=s[A+2],y.normalize().multiplyScalar(x),s[A+0]=y.x,s[A+1]=y.y,s[A+2]=y.z}function u(){const x=new J;for(let y=0;y<s.length;y+=3){x.x=s[y+0],x.y=s[y+1],x.z=s[y+2];const A=g(x)/2/Math.PI+.5,T=v(x)/Math.PI+.5;o.push(A,1-T)}p(),f()}function f(){for(let x=0;x<o.length;x+=6){const y=o[x+0],A=o[x+2],T=o[x+4],w=Math.max(y,A,T),M=Math.min(y,A,T);w>.9&&M<.1&&(y<.2&&(o[x+0]+=1),A<.2&&(o[x+2]+=1),T<.2&&(o[x+4]+=1))}}function h(x){s.push(x.x,x.y,x.z)}function d(x,y){const A=x*3;y.x=e[A+0],y.y=e[A+1],y.z=e[A+2]}function p(){const x=new J,y=new J,A=new J,T=new J,w=new qe,M=new qe,C=new qe;for(let S=0,R=0;S<s.length;S+=9,R+=6){x.set(s[S+0],s[S+1],s[S+2]),y.set(s[S+3],s[S+4],s[S+5]),A.set(s[S+6],s[S+7],s[S+8]),w.set(o[R+0],o[R+1]),M.set(o[R+2],o[R+3]),C.set(o[R+4],o[R+5]),T.copy(x).add(y).add(A).divideScalar(3);const O=g(T);m(w,R+0,x,O),m(M,R+2,y,O),m(C,R+4,A,O)}}function m(x,y,A,T){T<0&&x.x===1&&(o[y]=x.x-1),A.x===0&&A.z===0&&(o[y]=T/2/Math.PI+.5)}function g(x){return Math.atan2(x.z,-x.x)}function v(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qu(e.vertices,e.indices,e.radius,e.details)}}class QE extends qu{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new QE(e.radius,e.detail)}}const Cy=new J,My=new J,YA=new J,Ry=new Xi;class I5 extends on{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(nh*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),h={},d=[];for(let p=0;p<l;p+=3){o?(c[0]=o.getX(p),c[1]=o.getX(p+1),c[2]=o.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:m,b:g,c:v}=Ry;if(m.fromBufferAttribute(a,c[0]),g.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),Ry.getNormal(YA),f[0]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,f[1]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,f[2]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let x=0;x<3;x++){const y=(x+1)%3,A=f[x],T=f[y],w=Ry[u[x]],M=Ry[u[y]],C=`${A}_${T}`,S=`${T}_${A}`;S in h&&h[S]?(YA.dot(h[S].normal)<=s&&(d.push(w.x,w.y,w.z),d.push(M.x,M.y,M.z)),h[S]=null):C in h||(h[C]={index0:c[x],index1:c[y],normal:YA.clone()})}}for(const p in h)if(h[p]){const{index0:m,index1:g}=h[p];Cy.fromBufferAttribute(a,m),My.fromBufferAttribute(a,g),d.push(Cy.x,Cy.y,Cy.z),d.push(My.x,My.y,My.z)}this.setAttribute("position",new Ot(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Oc=class extends Iu{constructor(e){super(e),this.uuid=ia(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new Iu().fromJSON(i))}return this}};const Lce={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=FF(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,h,d;if(r&&(s=kce(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let p=n;p<i;p+=n)f=t[p],h=t[p+1],f<a&&(a=f),h<l&&(l=h),f>c&&(c=f),h>u&&(u=h);d=Math.max(c-a,u-l),d=d!==0?32767/d:0}return Q1(s,o,n,a,l,d,0),o}};function FF(t,e,n,r,i){let s,o;if(i===Yce(t,e,n,r)>0)for(s=e;s<n;s+=r)o=a7(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=a7(s,t[s],t[s+1],o);return o&&ZE(o,o.next)&&(eg(o),o=o.next),o}function mh(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(ZE(n,n.next)||gi(n.prev,n,n.next)===0)){if(eg(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Q1(t,e,n,r,i,s,o){if(!t)return;!o&&s&&Gce(t,r,i,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?Oce(t,r,i,s):Nce(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),eg(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=Dce(mh(t),e,n),Q1(t,e,n,r,i,s,2)):o===2&&Bce(t,e,n,r,i,s):Q1(mh(t),e,n,r,i,s,1);break}}}function Nce(t){const e=t.prev,n=t,r=t.next;if(gi(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,h=i>s?i>o?i:o:s>o?s:o,d=a>l?a>c?a:c:l>c?l:c;let p=r.next;for(;p!==e;){if(p.x>=u&&p.x<=h&&p.y>=f&&p.y<=d&&lp(i,a,s,l,o,c,p.x,p.y)&&gi(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Oce(t,e,n,r){const i=t.prev,s=t,o=t.next;if(gi(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,f=s.y,h=o.y,d=a<l?a<c?a:c:l<c?l:c,p=u<f?u<h?u:h:f<h?f:h,m=a>l?a>c?a:c:l>c?l:c,g=u>f?u>h?u:h:f>h?f:h,v=bS(d,p,e,n,r),x=bS(m,g,e,n,r);let y=t.prevZ,A=t.nextZ;for(;y&&y.z>=v&&A&&A.z<=x;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=g&&y!==i&&y!==o&&lp(a,u,l,f,c,h,y.x,y.y)&&gi(y.prev,y,y.next)>=0||(y=y.prevZ,A.x>=d&&A.x<=m&&A.y>=p&&A.y<=g&&A!==i&&A!==o&&lp(a,u,l,f,c,h,A.x,A.y)&&gi(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;y&&y.z>=v;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=g&&y!==i&&y!==o&&lp(a,u,l,f,c,h,y.x,y.y)&&gi(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;A&&A.z<=x;){if(A.x>=d&&A.x<=m&&A.y>=p&&A.y<=g&&A!==i&&A!==o&&lp(a,u,l,f,c,h,A.x,A.y)&&gi(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function Dce(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!ZE(i,s)&&UF(i,r,r.next,s)&&Z1(i,s)&&Z1(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),eg(r),eg(r.next),r=t=s),r=r.next}while(r!==t);return mh(r)}function Bce(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&jce(o,a)){let l=zF(o,a);o=mh(o,o.next),l=mh(l,l.next),Q1(o,e,n,r,i,s,0),Q1(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function kce(t,e,n,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=FF(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Wce(c));for(i.sort(Fce),s=0;s<i.length;s++)n=Uce(i[s],n);return n}function Fce(t,e){return t.x-e.x}function Uce(t,e){const n=zce(t,e);if(!n)return e;const r=zF(n,t);return mh(r,r.next),mh(n,n.next)}function zce(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const h=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=s&&h>r&&(r=h,i=n.x<n.next.x?n:n.next,h===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,f;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&lp(o<c?s:r,o,l,c,o<c?r:s,o,n.x,n.y)&&(f=Math.abs(o-n.y)/(s-n.x),Z1(n,t)&&(f<u||f===u&&(n.x>i.x||n.x===i.x&&Hce(i,n)))&&(i=n,u=f)),n=n.next;while(n!==a);return i}function Hce(t,e){return gi(t.prev,t,e.prev)<0&&gi(e.next,t,t.next)<0}function Gce(t,e,n,r){let i=t;do i.z===0&&(i.z=bS(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Vce(i)}function Vce(t){let e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function bS(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Wce(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function lp(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function jce(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!$ce(t,e)&&(Z1(t,e)&&Z1(e,t)&&Xce(t,e)&&(gi(t.prev,t,e.prev)||gi(t,e.prev,e))||ZE(t,e)&&gi(t.prev,t,t.next)>0&&gi(e.prev,e,e.next)>0)}function gi(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ZE(t,e){return t.x===e.x&&t.y===e.y}function UF(t,e,n,r){const i=Py(gi(t,e,n)),s=Py(gi(t,e,r)),o=Py(gi(n,r,t)),a=Py(gi(n,r,e));return!!(i!==s&&o!==a||i===0&&Iy(t,n,e)||s===0&&Iy(t,r,e)||o===0&&Iy(n,t,r)||a===0&&Iy(n,e,r))}function Iy(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Py(t){return t>0?1:t<0?-1:0}function $ce(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&UF(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Z1(t,e){return gi(t.prev,t,t.next)<0?gi(t,e,t.next)>=0&&gi(t,t.prev,e)>=0:gi(t,e,t.prev)<0||gi(t,t.next,e)<0}function Xce(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function zF(t,e){const n=new AS(t.i,t.x,t.y),r=new AS(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function a7(t,e,n,r){const i=new AS(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function eg(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function AS(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yce(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class hl{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return hl.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];l7(e),c7(r,e);let o=e.length;n.forEach(l7);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,c7(r,n[l]);const a=Lce.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function l7(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function c7(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Ng extends on{constructor(e=new Oc([new qe(.5,.5),new qe(-.5,.5),new qe(-.5,-.5),new qe(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Ot(i,3)),this.setAttribute("uv",new Ot(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,f=n.depth!==void 0?n.depth:1;let h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,d=n.bevelThickness!==void 0?n.bevelThickness:.2,p=n.bevelSize!==void 0?n.bevelSize:d-.1,m=n.bevelOffset!==void 0?n.bevelOffset:0,g=n.bevelSegments!==void 0?n.bevelSegments:3;const v=n.extrudePath,x=n.UVGenerator!==void 0?n.UVGenerator:qce;let y,A=!1,T,w,M,C;v&&(y=v.getSpacedPoints(u),A=!0,h=!1,T=v.computeFrenetFrames(u,!1),w=new J,M=new J,C=new J),h||(g=0,d=0,p=0,m=0);const S=a.extractPoints(c);let R=S.shape;const O=S.holes;if(!hl.isClockWise(R)){R=R.reverse();for(let he=0,Oe=O.length;he<Oe;he++){const be=O[he];hl.isClockWise(be)&&(O[he]=be.reverse())}}const B=hl.triangulateShape(R,O),N=R;for(let he=0,Oe=O.length;he<Oe;he++){const be=O[he];R=R.concat(be)}function $(he,Oe,be){return Oe||console.error("THREE.ExtrudeGeometry: vec does not exist"),he.clone().addScaledVector(Oe,be)}const U=R.length,Q=B.length;function Y(he,Oe,be){let Te,Re,$e;const ve=he.x-Oe.x,me=he.y-Oe.y,We=be.x-he.x,Xe=be.y-he.y,xt=ve*ve+me*me,fe=ve*Xe-me*We;if(Math.abs(fe)>Number.EPSILON){const ie=Math.sqrt(xt),Ae=Math.sqrt(We*We+Xe*Xe),Je=Oe.x-me/ie,te=Oe.y+ve/ie,z=be.x-Xe/Ae,F=be.y+We/Ae,ae=((z-Je)*Xe-(F-te)*We)/(ve*Xe-me*We);Te=Je+ve*ae-he.x,Re=te+me*ae-he.y;const ye=Te*Te+Re*Re;if(ye<=2)return new qe(Te,Re);$e=Math.sqrt(ye/2)}else{let ie=!1;ve>Number.EPSILON?We>Number.EPSILON&&(ie=!0):ve<-Number.EPSILON?We<-Number.EPSILON&&(ie=!0):Math.sign(me)===Math.sign(Xe)&&(ie=!0),ie?(Te=-me,Re=ve,$e=Math.sqrt(xt)):(Te=ve,Re=me,$e=Math.sqrt(xt/2))}return new qe(Te/$e,Re/$e)}const ee=[];for(let he=0,Oe=N.length,be=Oe-1,Te=he+1;he<Oe;he++,be++,Te++)be===Oe&&(be=0),Te===Oe&&(Te=0),ee[he]=Y(N[he],N[be],N[Te]);const ne=[];let P,se=ee.concat();for(let he=0,Oe=O.length;he<Oe;he++){const be=O[he];P=[];for(let Te=0,Re=be.length,$e=Re-1,ve=Te+1;Te<Re;Te++,$e++,ve++)$e===Re&&($e=0),ve===Re&&(ve=0),P[Te]=Y(be[Te],be[$e],be[ve]);ne.push(P),se=se.concat(P)}for(let he=0;he<g;he++){const Oe=he/g,be=d*Math.cos(Oe*Math.PI/2),Te=p*Math.sin(Oe*Math.PI/2)+m;for(let Re=0,$e=N.length;Re<$e;Re++){const ve=$(N[Re],ee[Re],Te);K(ve.x,ve.y,-be)}for(let Re=0,$e=O.length;Re<$e;Re++){const ve=O[Re];P=ne[Re];for(let me=0,We=ve.length;me<We;me++){const Xe=$(ve[me],P[me],Te);K(Xe.x,Xe.y,-be)}}}const re=p+m;for(let he=0;he<U;he++){const Oe=h?$(R[he],se[he],re):R[he];A?(M.copy(T.normals[0]).multiplyScalar(Oe.x),w.copy(T.binormals[0]).multiplyScalar(Oe.y),C.copy(y[0]).add(M).add(w),K(C.x,C.y,C.z)):K(Oe.x,Oe.y,0)}for(let he=1;he<=u;he++)for(let Oe=0;Oe<U;Oe++){const be=h?$(R[Oe],se[Oe],re):R[Oe];A?(M.copy(T.normals[he]).multiplyScalar(be.x),w.copy(T.binormals[he]).multiplyScalar(be.y),C.copy(y[he]).add(M).add(w),K(C.x,C.y,C.z)):K(be.x,be.y,f/u*he)}for(let he=g-1;he>=0;he--){const Oe=he/g,be=d*Math.cos(Oe*Math.PI/2),Te=p*Math.sin(Oe*Math.PI/2)+m;for(let Re=0,$e=N.length;Re<$e;Re++){const ve=$(N[Re],ee[Re],Te);K(ve.x,ve.y,f+be)}for(let Re=0,$e=O.length;Re<$e;Re++){const ve=O[Re];P=ne[Re];for(let me=0,We=ve.length;me<We;me++){const Xe=$(ve[me],P[me],Te);A?K(Xe.x,Xe.y+y[u-1].y,y[u-1].x+be):K(Xe.x,Xe.y,f+be)}}}Z(),X();function Z(){const he=i.length/3;if(h){let Oe=0,be=U*Oe;for(let Te=0;Te<Q;Te++){const Re=B[Te];ge(Re[2]+be,Re[1]+be,Re[0]+be)}Oe=u+g*2,be=U*Oe;for(let Te=0;Te<Q;Te++){const Re=B[Te];ge(Re[0]+be,Re[1]+be,Re[2]+be)}}else{for(let Oe=0;Oe<Q;Oe++){const be=B[Oe];ge(be[2],be[1],be[0])}for(let Oe=0;Oe<Q;Oe++){const be=B[Oe];ge(be[0]+U*u,be[1]+U*u,be[2]+U*u)}}r.addGroup(he,i.length/3-he,0)}function X(){const he=i.length/3;let Oe=0;W(N,Oe),Oe+=N.length;for(let be=0,Te=O.length;be<Te;be++){const Re=O[be];W(Re,Oe),Oe+=Re.length}r.addGroup(he,i.length/3-he,1)}function W(he,Oe){let be=he.length;for(;--be>=0;){const Te=be;let Re=be-1;Re<0&&(Re=he.length-1);for(let $e=0,ve=u+g*2;$e<ve;$e++){const me=U*$e,We=U*($e+1),Xe=Oe+Te+me,xt=Oe+Re+me,fe=Oe+Re+We,ie=Oe+Te+We;Se(Xe,xt,fe,ie)}}}function K(he,Oe,be){l.push(he),l.push(Oe),l.push(be)}function ge(he,Oe,be){xe(he),xe(Oe),xe(be);const Te=i.length/3,Re=x.generateTopUV(r,i,Te-3,Te-2,Te-1);Me(Re[0]),Me(Re[1]),Me(Re[2])}function Se(he,Oe,be,Te){xe(he),xe(Oe),xe(Te),xe(Oe),xe(be),xe(Te);const Re=i.length/3,$e=x.generateSideWallUV(r,i,Re-6,Re-3,Re-2,Re-1);Me($e[0]),Me($e[1]),Me($e[3]),Me($e[1]),Me($e[2]),Me($e[3])}function xe(he){i.push(l[he*3+0]),i.push(l[he*3+1]),i.push(l[he*3+2])}function Me(he){s.push(he.x),s.push(he.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return Kce(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new z3[i.type]().fromJSON(i)),new Ng(r,e.options)}}const qce={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new qe(s,o),new qe(a,l),new qe(c,u)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],f=e[r*3+2],h=e[i*3],d=e[i*3+1],p=e[i*3+2],m=e[s*3],g=e[s*3+1],v=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new qe(o,1-l),new qe(c,1-f),new qe(h,1-p),new qe(m,1-v)]:[new qe(a,1-l),new qe(u,1-f),new qe(d,1-p),new qe(g,1-v)]}};function Kce(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Og extends qu{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Og(e.radius,e.detail)}}class Dg extends qu{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Dg(e.radius,e.detail)}}class e_ extends on{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let f=e;const h=(n-e)/i,d=new J,p=new qe;for(let m=0;m<=i;m++){for(let g=0;g<=r;g++){const v=s+g/r*o;d.x=f*Math.cos(v),d.y=f*Math.sin(v),l.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/n+1)/2,p.y=(d.y/n+1)/2,u.push(p.x,p.y)}f+=h}for(let m=0;m<i;m++){const g=m*(r+1);for(let v=0;v<r;v++){const x=v+g,y=x,A=x+r+1,T=x+r+2,w=x+1;a.push(y,A,w),a.push(A,T,w)}}this.setIndex(a),this.setAttribute("position",new Ot(l,3)),this.setAttribute("normal",new Ot(c,3)),this.setAttribute("uv",new Ot(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new e_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class t_ extends on{constructor(e=new Oc([new qe(0,.5),new qe(-.5,-.5),new qe(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Ot(i,3)),this.setAttribute("normal",new Ot(s,3)),this.setAttribute("uv",new Ot(o,2));function c(u){const f=i.length/3,h=u.extractPoints(n);let d=h.shape;const p=h.holes;hl.isClockWise(d)===!1&&(d=d.reverse());for(let g=0,v=p.length;g<v;g++){const x=p[g];hl.isClockWise(x)===!0&&(p[g]=x.reverse())}const m=hl.triangulateShape(d,p);for(let g=0,v=p.length;g<v;g++){const x=p[g];d=d.concat(x)}for(let g=0,v=d.length;g<v;g++){const x=d[g];i.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let g=0,v=m.length;g<v;g++){const x=m[g],y=x[0]+f,A=x[1]+f,T=x[2]+f;r.push(y,A,T),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Jce(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new t_(r,e.curveSegments)}}function Jce(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Th extends on{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new J,h=new J,d=[],p=[],m=[],g=[];for(let v=0;v<=r;v++){const x=[],y=v/r;let A=0;v===0&&o===0?A=.5/n:v===r&&l===Math.PI&&(A=-.5/n);for(let T=0;T<=n;T++){const w=T/n;f.x=-e*Math.cos(i+w*s)*Math.sin(o+y*a),f.y=e*Math.cos(o+y*a),f.z=e*Math.sin(i+w*s)*Math.sin(o+y*a),p.push(f.x,f.y,f.z),h.copy(f).normalize(),m.push(h.x,h.y,h.z),g.push(w+A,1-y),x.push(c++)}u.push(x)}for(let v=0;v<r;v++)for(let x=0;x<n;x++){const y=u[v][x+1],A=u[v][x],T=u[v+1][x],w=u[v+1][x+1];(v!==0||o>0)&&d.push(y,A,w),(v!==r-1||l<Math.PI)&&d.push(A,T,w)}this.setIndex(d),this.setAttribute("position",new Ot(p,3)),this.setAttribute("normal",new Ot(m,3)),this.setAttribute("uv",new Ot(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Th(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class n_ extends qu{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new n_(e.radius,e.detail)}}class r_ extends on{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new J,f=new J,h=new J;for(let d=0;d<=r;d++)for(let p=0;p<=i;p++){const m=p/i*s,g=d/r*Math.PI*2;f.x=(e+n*Math.cos(g))*Math.cos(m),f.y=(e+n*Math.cos(g))*Math.sin(m),f.z=n*Math.sin(g),a.push(f.x,f.y,f.z),u.x=e*Math.cos(m),u.y=e*Math.sin(m),h.subVectors(f,u).normalize(),l.push(h.x,h.y,h.z),c.push(p/i),c.push(d/r)}for(let d=1;d<=r;d++)for(let p=1;p<=i;p++){const m=(i+1)*d+p-1,g=(i+1)*(d-1)+p-1,v=(i+1)*(d-1)+p,x=(i+1)*d+p;o.push(m,g,x),o.push(g,v,x)}this.setIndex(o),this.setAttribute("position",new Ot(a,3)),this.setAttribute("normal",new Ot(l,3)),this.setAttribute("uv",new Ot(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new r_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class i_ extends on{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],f=new J,h=new J,d=new J,p=new J,m=new J,g=new J,v=new J;for(let y=0;y<=r;++y){const A=y/r*s*Math.PI*2;x(A,s,o,e,d),x(A+.01,s,o,e,p),g.subVectors(p,d),v.addVectors(p,d),m.crossVectors(g,v),v.crossVectors(m,g),m.normalize(),v.normalize();for(let T=0;T<=i;++T){const w=T/i*Math.PI*2,M=-n*Math.cos(w),C=n*Math.sin(w);f.x=d.x+(M*v.x+C*m.x),f.y=d.y+(M*v.y+C*m.y),f.z=d.z+(M*v.z+C*m.z),l.push(f.x,f.y,f.z),h.subVectors(f,d).normalize(),c.push(h.x,h.y,h.z),u.push(y/r),u.push(T/i)}}for(let y=1;y<=r;y++)for(let A=1;A<=i;A++){const T=(i+1)*(y-1)+(A-1),w=(i+1)*y+(A-1),M=(i+1)*y+A,C=(i+1)*(y-1)+A;a.push(T,w,C),a.push(w,M,C)}this.setIndex(a),this.setAttribute("position",new Ot(l,3)),this.setAttribute("normal",new Ot(c,3)),this.setAttribute("uv",new Ot(u,2));function x(y,A,T,w,M){const C=Math.cos(y),S=Math.sin(y),R=T/A*y,O=Math.cos(R);M.x=w*(2+O)*.5*C,M.y=w*(2+O)*S*.5,M.z=w*Math.sin(R)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class s_ extends on{constructor(e=new YE(new J(-1,-1,0),new J(-1,1,0),new J(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new J,l=new J,c=new qe;let u=new J;const f=[],h=[],d=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new Ot(f,3)),this.setAttribute("normal",new Ot(h,3)),this.setAttribute("uv",new Ot(d,2));function m(){for(let y=0;y<n;y++)g(y);g(s===!1?n:0),x(),v()}function g(y){u=e.getPointAt(y/n,u);const A=o.normals[y],T=o.binormals[y];for(let w=0;w<=i;w++){const M=w/i*Math.PI*2,C=Math.sin(M),S=-Math.cos(M);l.x=S*A.x+C*T.x,l.y=S*A.y+C*T.y,l.z=S*A.z+C*T.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,f.push(a.x,a.y,a.z)}}function v(){for(let y=1;y<=n;y++)for(let A=1;A<=i;A++){const T=(i+1)*(y-1)+(A-1),w=(i+1)*y+(A-1),M=(i+1)*y+A,C=(i+1)*(y-1)+A;p.push(T,w,C),p.push(w,M,C)}}function x(){for(let y=0;y<=n;y++)for(let A=0;A<=i;A++)c.x=y/n,c.y=A/i,d.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new s_(new z3[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class P5 extends on{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new J,s=new J;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],h=f.start,d=f.count;for(let p=h,m=h+d;p<m;p+=3)for(let g=0;g<3;g++){const v=a.getX(p+g),x=a.getX(p+(g+1)%3);i.fromBufferAttribute(o,v),s.fromBufferAttribute(o,x),u7(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),u7(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ot(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function u7(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var f7=Object.freeze({__proto__:null,BoxGeometry:Yc,CapsuleGeometry:qE,CircleGeometry:KE,ConeGeometry:JE,CylinderGeometry:Yu,DodecahedronGeometry:QE,EdgesGeometry:I5,ExtrudeGeometry:Ng,IcosahedronGeometry:Og,LatheGeometry:Lg,OctahedronGeometry:Dg,PlaneGeometry:Fo,PolyhedronGeometry:qu,RingGeometry:e_,ShapeGeometry:t_,SphereGeometry:Th,TetrahedronGeometry:n_,TorusGeometry:r_,TorusKnotGeometry:i_,TubeGeometry:s_,WireframeGeometry:P5});class HF extends Gr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new bt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class GF extends ur{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class _l extends Gr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xc,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Mi extends _l{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new qe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ai(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Ba extends Gr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new bt(16777215),this.specular=new bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xc,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Tg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class VF extends Gr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new bt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xc,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class o_ extends Gr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xc,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class wh extends Gr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xc,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Tg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WF extends Gr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xc,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jF extends yi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Wf(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function $F(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function XF(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function TS(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function L5(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function Qce(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],h=[];for(let d=0;d<c.times.length;++d){const p=c.times[d]*i;if(!(p<n||p>=r)){f.push(c.times[d]);for(let m=0;m<u;++m)h.push(c.values[d*u+m])}}f.length!==0&&(c.times=Wf(f,c.times.constructor),c.values=Wf(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Zce(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let h=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);const p=a.times.length-1;let m;if(s<=a.times[0]){const v=u,x=f-u;m=a.values.slice(v,x)}else if(s>=a.times[p]){const v=p*f+u,x=v+f-u;m=a.values.slice(v,x)}else{const v=a.createInterpolant(),x=u,y=f-u;v.evaluate(s),m=v.resultBuffer.slice(x,y)}l==="quaternion"&&new kn().fromArray(m).normalize().conjugate().toArray(m);const g=c.times.length;for(let v=0;v<g;++v){const x=v*d+h;if(l==="quaternion")kn.multiplyQuaternionsFlat(c.values,x,m,0,c.values,x);else{const y=d-h*2;for(let A=0;A<y;++A)c.values[x+A]-=m[A]}}}return t.blendMode=f5,t}const eue={convertArray:Wf,isTypedArray:$F,getKeyframeOrder:XF,sortedArray:TS,flattenJSON:L5,subclip:Qce,makeClipAdditive:Zce};class Sh{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class YF extends Sh{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:zf,endingEnd:zf}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Hf:s=e,a=2*n-r;break;case $1:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Hf:o=e,l=2*r-n;break;case $1:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const c=(r-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(r-n)/(i-n),m=p*p,g=m*p,v=-h*g+2*h*m-h*p,x=(1+h)*g+(-1.5-2*h)*m+(-.5+h)*p+1,y=(-1-d)*g+(1.5+d)*m+.5*p,A=d*g-d*m;for(let T=0;T!==a;++T)s[T]=v*o[u+T]+x*o[c+T]+y*o[l+T]+A*o[f+T];return s}}class N5 extends Sh{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-n)/(i-n),f=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*f+o[l+h]*u;return s}}class qF extends Sh{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class bl{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Wf(n,this.TimeBufferType),this.values=Wf(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Wf(e.times,Array),values:Wf(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new qF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new N5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new YF(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case dh:n=this.InterpolantFactoryMethodDiscrete;break;case zc:n=this.InterpolantFactoryMethodLinear;break;case t3:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return dh;case this.InterpolantFactoryMethodLinear:return zc;case this.InterpolantFactoryMethodSmooth:return t3}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&$F(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===t3,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const f=a*r,h=f-r,d=f+r;for(let p=0;p!==r;++p){const m=n[f+p];if(m!==n[h+p]||m!==n[d+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,h=o*r;for(let d=0;d!==r;++d)n[h+d]=n[f+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}bl.prototype.TimeBufferType=Float32Array;bl.prototype.ValueBufferType=Float32Array;bl.prototype.DefaultInterpolation=zc;class Ch extends bl{}Ch.prototype.ValueTypeName="bool";Ch.prototype.ValueBufferType=Array;Ch.prototype.DefaultInterpolation=dh;Ch.prototype.InterpolantFactoryMethodLinear=void 0;Ch.prototype.InterpolantFactoryMethodSmooth=void 0;class O5 extends bl{}O5.prototype.ValueTypeName="color";class Vu extends bl{}Vu.prototype.ValueTypeName="number";class KF extends Sh{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let c=e*a;for(let u=c+a;c!==u;c+=4)kn.slerpFlat(s,0,o,c-a,o,c,l);return s}}class oa extends bl{InterpolantFactoryMethodLinear(e){return new KF(this.times,this.values,this.getValueSize(),e)}}oa.prototype.ValueTypeName="quaternion";oa.prototype.DefaultInterpolation=zc;oa.prototype.InterpolantFactoryMethodSmooth=void 0;class Mh extends bl{}Mh.prototype.ValueTypeName="string";Mh.prototype.ValueBufferType=Array;Mh.prototype.DefaultInterpolation=dh;Mh.prototype.InterpolantFactoryMethodLinear=void 0;Mh.prototype.InterpolantFactoryMethodSmooth=void 0;class aa extends bl{}aa.prototype.ValueTypeName="vector";class Ua{constructor(e,n=-1,r,i=kE){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=ia(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(nue(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(bl.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=XF(l);l=TS(l,1,u),c=TS(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Vu(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let h=i[f];h||(i[f]=h=[]),h.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,h,d,p,m){if(d.length!==0){const g=[],v=[];L5(d,g,v,p),g.length!==0&&m.push(new f(h,g,v))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const h=c[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)d[h[p].morphTargets[m]]=-1;for(const m in d){const g=[],v=[];for(let x=0;x!==h[p].morphTargets.length;++x){const y=h[p];g.push(y.time),v.push(y.morphTarget===m?1:0)}i.push(new Vu(".morphTargetInfluence["+m+"]",g,v))}l=d.length*o}else{const d=".bones["+n[f].name+"]";r(aa,d+".position",h,"pos",i),r(oa,d+".quaternion",h,"rot",i),r(aa,d+".scale",h,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function tue(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Vu;case"vector":case"vector2":case"vector3":case"vector4":return aa;case"color":return O5;case"quaternion":return oa;case"bool":case"boolean":return Ch;case"string":return Mh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function nue(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=tue(t.type);if(t.times===void 0){const n=[],r=[];L5(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const gh={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class a_{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=c.length;f<h;f+=2){const d=c[f],p=c[f+1];if(d.global&&(d.lastIndex=0),d.test(u))return p}return null}}}const l_=new a_;class _r{constructor(e){this.manager=e!==void 0?e:l_,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}_r.DEFAULT_MATERIAL_NAME="__DEFAULT";const hc={};class rue extends Error{constructor(e,n){super(e),this.response=n}}class Ir extends _r{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=gh.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(hc[e]!==void 0){hc[e].push({onLoad:n,onProgress:r,onError:i});return}hc[e]=[],hc[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=hc[e],f=c.body.getReader(),h=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),d=h?parseInt(h):0,p=d!==0;let m=0;const g=new ReadableStream({start(v){x();function x(){f.read().then(({done:y,value:A})=>{if(y)v.close();else{m+=A.byteLength;const T=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:d});for(let w=0,M=u.length;w<M;w++){const C=u[w];C.onProgress&&C.onProgress(T)}v.enqueue(A),x()}})}}});return new Response(g)}else throw new rue(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),h=f&&f[1]?f[1].toLowerCase():void 0,d=new TextDecoder(h);return c.arrayBuffer().then(p=>d.decode(p))}}}).then(c=>{gh.add(e,c);const u=hc[e];delete hc[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onLoad&&d.onLoad(c)}}).catch(c=>{const u=hc[e];if(u===void 0)throw this.manager.itemError(e),c;delete hc[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onError&&d.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class iue extends _r{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Ir(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=Ua.parse(e[r]);n.push(i)}return n}}class sue extends _r{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new $E,l=new Ir(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(h){const d=s.parse(h,!0);o[f]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},c+=1,c===6&&(d.mipmapCount===1&&(a.minFilter=Cn),a.image=o,a.format=d.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let f=0,h=e.length;f<h;++f)u(f);else l.load(e,function(f){const h=s.parse(f,!0);if(h.isCubemap){const d=h.mipmaps.length/h.mipmapCount;for(let p=0;p<d;p++){o[p]={mipmaps:[]};for(let m=0;m<h.mipmapCount;m++)o[p].mipmaps.push(h.mipmaps[p*h.mipmapCount+m]),o[p].format=h.format,o[p].width=h.width,o[p].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=Cn),a.format=h.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class tg extends _r{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=gh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=J1("img");function l(){u(),gh.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(f){u(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class JF extends _r{constructor(e){super(e)}load(e,n,r,i){const s=new Rg;s.colorSpace=ii;const o=new tg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class Bg extends _r{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new mo,a=new Ir(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Er,o.wrapT=c.wrapT!==void 0?c.wrapT:Er,o.magFilter=c.magFilter!==void 0?c.magFilter:Cn,o.minFilter=c.minFilter!==void 0?c.minFilter:Cn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=js),c.mipmapCount===1&&(o.minFilter=Cn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c)},r,i),o}}class Ki extends _r{constructor(e){super(e)}load(e,n,r,i){const s=new Vn,o=new tg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class Ku extends hn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new bt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}let QF=class extends Ku{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new bt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}};const qA=new yt,h7=new J,d7=new J;class D5{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qe(512,512),this.map=null,this.mapPass=null,this.matrix=new yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _h,this._frameExtents=new qe(1,1),this._viewportCount=1,this._viewports=[new Xn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;h7.setFromMatrixPosition(e.matrixWorld),n.position.copy(h7),d7.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(d7),n.updateMatrixWorld(),qA.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qA),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(qA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}let oue=class extends D5{constructor(){super(new mr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=Lp*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},im=class extends Ku{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.target=new hn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new oue}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};const p7=new yt,o0=new J,KA=new J;class aue extends D5{constructor(){super(new mr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new qe(4,2),this._viewportCount=6,this._viewports=[new Xn(2,1,1,1),new Xn(0,1,1,1),new Xn(3,1,1,1),new Xn(1,1,1,1),new Xn(3,0,1,1),new Xn(1,0,1,1)],this._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],this._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),o0.setFromMatrixPosition(e.matrixWorld),r.position.copy(o0),KA.copy(r.position),KA.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(KA),r.updateMatrixWorld(),i.makeTranslation(-o0.x,-o0.y,-o0.z),p7.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(p7)}}let sm=class extends Ku{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new aue}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}};class lue extends D5{constructor(){super(new Bi(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}let om=class extends Ku{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hn.DEFAULT_UP),this.updateMatrix(),this.target=new hn,this.shadow=new lue}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},c_=class extends Ku{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}},ZF=class extends Ku{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}};class eU{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new J)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class tU extends Ku{constructor(e=new eU,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class u_ extends _r{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new Ir(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=u_.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new bt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new bt().setHex(o.value);break;case"v2":i.uniforms[s].value=new qe().fromArray(o.value);break;case"v3":i.uniforms[s].value=new J().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Xn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Pn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new yt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new qe().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new qe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:HF,SpriteMaterial:b5,RawShaderMaterial:GF,ShaderMaterial:ur,PointsMaterial:ul,MeshPhysicalMaterial:Mi,MeshStandardMaterial:_l,MeshPhongMaterial:Ba,MeshToonMaterial:VF,MeshNormalMaterial:o_,MeshLambertMaterial:wh,MeshDepthMaterial:tm,MeshDistanceMaterial:GE,MeshBasicMaterial:Or,MeshMatcapMaterial:WF,LineDashedMaterial:jF,LineBasicMaterial:yi,Material:Gr};return new n[e]}}class Si{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class kg extends on{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class nU extends _r{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Ir(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(d,p){if(n[p]!==void 0)return n[p];const g=d.interleavedBuffers[p],v=s(d,g.buffer),x=op(g.type,v),y=new nm(x,g.stride);return y.uuid=g.uuid,n[p]=y,y}function s(d,p){if(r[p]!==void 0)return r[p];const g=d.arrayBuffers[p],v=new Uint32Array(g).buffer;return r[p]=v,v}const o=e.isInstancedBufferGeometry?new kg:new on,a=e.data.index;if(a!==void 0){const d=op(a.type,a.array);o.setIndex(new Qt(d,1))}const l=e.data.attributes;for(const d in l){const p=l[d];let m;if(p.isInterleavedBufferAttribute){const g=i(e.data,p.data);m=new po(g,p.itemSize,p.offset,p.normalized)}else{const g=op(p.type,p.array),v=p.isInstancedBufferAttribute?ml:Qt;m=new v(g,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),o.setAttribute(d,m)}const c=e.data.morphAttributes;if(c)for(const d in c){const p=c[d],m=[];for(let g=0,v=p.length;g<v;g++){const x=p[g];let y;if(x.isInterleavedBufferAttribute){const A=i(e.data,x.data);y=new po(A,x.itemSize,x.offset,x.normalized)}else{const A=op(x.type,x.array);y=new Qt(A,x.itemSize,x.normalized)}x.name!==void 0&&(y.name=x.name),m.push(y)}o.morphAttributes[d]=m}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let d=0,p=f.length;d!==p;++d){const m=f[d];o.addGroup(m.start,m.count,m.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const d=new J;h.center!==void 0&&d.fromArray(h.center),o.boundingSphere=new Fr(d,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class cue extends _r{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?Si.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ir(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?Si.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Ir(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),n!==void 0){let f=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){f=!0;break}f===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Oc().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Xu().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new nU;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in f7?a=f7[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new u_;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Ua.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:op(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new a_(n);s=new tg(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],h=f.url;if(Array.isArray(h)){const d=[];for(let p=0,m=h.length;p<m;p++){const g=h[p],v=a(g);v!==null&&(v instanceof HTMLImageElement?d.push(v):d.push(new mo(v.data,v.width,v.height)))}i[f.uuid]=new Gf(d)}else{const d=a(f.url);i[f.uuid]=new Gf(d)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:op(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new tg(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f],p=await s(d);p!==null&&(p instanceof HTMLImageElement?u.push(p):u.push(new mo(p.data,p.width,p.height)))}r[l.uuid]=new Gf(u)}else{const u=await s(l.url);r[l.uuid]=new Gf(u)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new Rg,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new mo:u=new Vn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,uue)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],m7),u.wrapT=r(a.wrap[1],m7)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,g7)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,g7)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,n,r,i,s){let o;function a(h){return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),n[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const d=[];for(let p=0,m=h.length;p<m;p++){const g=h[p];r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),d.push(r[g])}return d}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function c(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let u,f;switch(e.type){case"Scene":o=new vs,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new bt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new WE(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new VE(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new mr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Bi(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new c_(e.color,e.intensity);break;case"DirectionalLight":o=new om(e.color,e.intensity);break;case"PointLight":o=new sm(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ZF(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new im(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new QF(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new tU().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new bh(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new un(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const h=e.count,d=e.instanceMatrix,p=e.instanceColor;o=new rm(u,f,h),o.instanceMatrix=new ml(new Float32Array(d.array),16),p!==void 0&&(o.instanceColor=new ml(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":u=a(e.geometry),f=l(e.material),o=new LF(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(m=>{const g=new Yn;g.min.fromArray(m.boxMin),g.max.fromArray(m.boxMax);const v=new Fr;return v.radius=m.sphereRadius,v.center.fromArray(m.sphereCenter),{boxInitialized:m.boxInitialized,box:g,sphereInitialized:m.sphereInitialized,sphere:v}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new PF;break;case"Line":o=new Fa(a(e.geometry),l(e.material));break;case"LineLoop":o=new jE(a(e.geometry),l(e.material));break;case"LineSegments":o=new $s(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Nc(a(e.geometry),l(e.material));break;case"Sprite":o=new IF(l(e.material));break;case"Group":o=new ki;break;case"Bone":o=new Ah;break;default:o=new hn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let d=0;d<h.length;d++)o.add(this.parseObject(h[d],n,r,i,s))}if(e.animations!==void 0){const h=e.animations;for(let d=0;d<h.length;d++){const p=h[d];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let d=0;d<h.length;d++){const p=h[d],m=o.getObjectByProperty("uuid",p.object);m!==void 0&&o.addLevel(m,p.distance,p.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const uue={UVMapping:zu,CubeReflectionMapping:Xl,CubeRefractionMapping:Hu,EquirectangularReflectionMapping:Rp,EquirectangularRefractionMapping:W1,CubeUVReflectionMapping:Kp},m7={RepeatWrapping:Rr,ClampToEdgeWrapping:Er,MirroredRepeatWrapping:uh},g7={NearestFilter:Ln,NearestMipmapNearestFilter:Ip,NearestMipmapLinearFilter:Zf,LinearFilter:Cn,LinearMipmapNearestFilter:wg,LinearMipmapLinearFilter:js};class B5 extends _r{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=gh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){gh.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Ly;class k5{static getContext(){return Ly===void 0&&(Ly=new(window.AudioContext||window.webkitAudioContext)),Ly}static setContext(e){Ly=e}}class rU extends _r{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Ir(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);k5.getContext().decodeAudioData(c,function(f){n(f)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const v7=new yt,y7=new yt,Ef=new yt;class fue{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new mr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new mr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Ef.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(nh*n.fov*.5)/n.zoom;let a,l;y7.elements[12]=-i,v7.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,Ef.elements[0]=2*n.near/(l-a),Ef.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Ef),a=-o*n.aspect-s,l=o*n.aspect-s,Ef.elements[0]=2*n.near/(l-a),Ef.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Ef)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(y7),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(v7)}}class f_{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=x7(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=x7();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function x7(){return(typeof performance>"u"?Date:performance).now()}const _f=new J,E7=new kn,hue=new J,bf=new J;class iU extends hn{constructor(){super(),this.type="AudioListener",this.context=k5.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new f_}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_f,E7,hue),bf.set(0,0,-1).applyQuaternion(E7),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(_f.x,i),n.positionY.linearRampToValueAtTime(_f.y,i),n.positionZ.linearRampToValueAtTime(_f.z,i),n.forwardX.linearRampToValueAtTime(bf.x,i),n.forwardY.linearRampToValueAtTime(bf.y,i),n.forwardZ.linearRampToValueAtTime(bf.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(_f.x,_f.y,_f.z),n.setOrientation(bf.x,bf.y,bf.z,r.x,r.y,r.z)}}class sU extends hn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Af=new J,_7=new kn,due=new J,Tf=new J;let pue=class extends sU{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Af,_7,due),Tf.set(0,0,1).applyQuaternion(_7);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Af.x,r),n.positionY.linearRampToValueAtTime(Af.y,r),n.positionZ.linearRampToValueAtTime(Af.z,r),n.orientationX.linearRampToValueAtTime(Tf.x,r),n.orientationY.linearRampToValueAtTime(Tf.y,r),n.orientationZ.linearRampToValueAtTime(Tf.z,r)}else n.setPosition(Af.x,Af.y,Af.z),n.setOrientation(Tf.x,Tf.y,Tf.z)}};class mue{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class oU{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){kn.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;kn.multiplyQuaternionsFlat(e,o,e,n,e,r),kn.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const F5="\\[\\]\\.:\\/",gue=new RegExp("["+F5+"]","g"),U5="[^"+F5+"]",vue="[^"+F5.replace("\\.","")+"]",yue=/((?:WC+[\/:])*)/.source.replace("WC",U5),xue=/(WCOD+)?/.source.replace("WCOD",vue),Eue=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",U5),_ue=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",U5),bue=new RegExp("^"+yue+xue+Eue+_ue+"$"),Aue=["material","materials","bones","map"];class Tue{constructor(e,n,r){const i=r||nr.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class nr{constructor(e,n,r){this.path=n,this.parsedPath=r||nr.parseTrackName(n),this.node=nr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new nr.Composite(e,n,r):new nr(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(gue,"")}static parseTrackName(e){const n=bue.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Aue.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=nr.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}nr.Composite=Tue;nr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};nr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};nr.prototype.GetterByBindingType=[nr.prototype._getValue_direct,nr.prototype._getValue_array,nr.prototype._getValue_arrayElement,nr.prototype._getValue_toArray];nr.prototype.SetterByBindingTypeAndVersioning=[[nr.prototype._setValue_direct,nr.prototype._setValue_direct_setNeedsUpdate,nr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[nr.prototype._setValue_array,nr.prototype._setValue_array_setNeedsUpdate,nr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[nr.prototype._setValue_arrayElement,nr.prototype._setValue_arrayElement_setNeedsUpdate,nr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[nr.prototype._setValue_fromArray,nr.prototype._setValue_fromArray_setNeedsUpdate,nr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class wue{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ia(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const h=arguments[u],d=h.uuid;let p=n[d];if(p===void 0){p=l++,n[d]=p,e.push(h);for(let m=0,g=o;m!==g;++m)s[m].push(new nr(h,r[m],i[m]))}else if(p<c){a=e[p];const m=--c,g=e[m];n[g.uuid]=p,e[p]=g,n[d]=m,e[m]=h;for(let v=0,x=o;v!==x;++v){const y=s[v],A=y[m];let T=y[p];y[p]=A,T===void 0&&(T=new nr(h,r[v],i[v])),y[m]=T}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const f=s++,h=e[f];n[h.uuid]=u,e[u]=h,n[c]=f,e[f]=l;for(let d=0,p=i;d!==p;++d){const m=r[d],g=m[f],v=m[u];m[u]=g,m[f]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=n[u];if(f!==void 0)if(delete n[u],f<s){const h=--s,d=e[h],p=--o,m=e[p];n[d.uuid]=f,e[f]=d,n[m.uuid]=h,e[h]=m,e.pop();for(let g=0,v=i;g!==v;++g){const x=r[g],y=x[h],A=x[p];x[f]=y,x[h]=A,x.pop()}}else{const h=--o,d=e[h];h>0&&(n[d.uuid]=f),e[f]=d,e.pop();for(let p=0,m=i;p!==m;++p){const g=r[p];g[f]=g[h],g.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(f);for(let h=u,d=l.length;h!==d;++h){const p=l[h];f[h]=new nr(p,e,n)}return f}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class aU{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:zf,endingEnd:zf};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=iF,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case f5:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case kE:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===sF;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===rF){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Hf,i.endingEnd=Hf):(e?i.endingStart=this.zeroSlopeAtStart?Hf:zf:i.endingStart=$1,n?i.endingEnd=this.zeroSlopeAtEnd?Hf:zf:i.endingEnd=$1)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const Sue=new Float32Array(1);class lU extends Jl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const h=i[f],d=h.name;let p=u[d];if(p!==void 0)++p.referenceCount,o[f]=p;else{if(p=o[f],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,d));continue}const m=n&&n._propertyBindings[f].binding.parsedPath;p=new oU(nr.create(r,d,m),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,d),o[f]=p}a[f].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new N5(new Float32Array(2),new Float32Array(2),1,Sue),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?Ua.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=kE),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new aU(this,o,n,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?Ua.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,n[u]=f,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class ks{constructor(e){this.value=e}clone(){return new ks(this.value.clone===void 0?this.value:this.value.clone())}}let Cue=0;class Mue extends Jl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Cue++}),this.name="",this.usage=K1,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++)this.uniforms.push(n[r].clone());return this}clone(){return new this.constructor().copy(this)}}class H3 extends nm{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class Rue{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class z5{constructor(e,n,r=0,i=1/0){this.ray=new xl(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new rh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return wS(e,this,r,n),r.sort(b7),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)wS(e[i],this,r,n);return r.sort(b7),r}}function b7(t,e){return t.distance-e.distance}function wS(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,o=i.length;s<o;s++)wS(i[s],e,n,!0)}}class G3{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ai(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Iue{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const A7=new qe;class cU{constructor(e=new qe(1/0,1/0),n=new qe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=A7.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,A7).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const T7=new J,Ny=new J;class dl{constructor(e=new J,n=new J){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){T7.subVectors(e,this.start),Ny.subVectors(this.end,this.start);const r=Ny.dot(Ny);let s=Ny.dot(T7)/r;return n&&(s=Ai(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const w7=new J;class uU extends hn{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new on,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new Ot(i,3));const s=new yi({fog:!1,toneMapped:!1});this.cone=new $s(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),w7.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(w7),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const fu=new J,Oy=new yt,JA=new yt;class fU extends $s{constructor(e){const n=hU(e),r=new on,i=[],s=[],o=new bt(0,0,1),a=new bt(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Ot(i,3)),r.setAttribute("color",new Ot(s,3));const l=new yi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");JA.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(Oy.multiplyMatrices(JA,a.matrixWorld),fu.setFromMatrixPosition(Oy),i.setXYZ(o,fu.x,fu.y,fu.z),Oy.multiplyMatrices(JA,a.parent.matrixWorld),fu.setFromMatrixPosition(Oy),i.setXYZ(o+1,fu.x,fu.y,fu.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function hU(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,hU(t.children[n]));return e}class dU extends un{constructor(e,n,r){const i=new Th(n,4,2),s=new Or({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Pue=new J,S7=new bt,C7=new bt;class pU extends hn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Dg(n);i.rotateY(Math.PI*.5),this.material=new Or({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Qt(o,3)),this.add(new un(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");S7.copy(this.light.color),C7.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?S7:C7;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Pue.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Lue extends $s{constructor(e=10,n=10,r=4473924,i=8947848){r=new bt(r),i=new bt(i);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let h=0,d=0,p=-a;h<=n;h++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const m=h===s?r:i;m.toArray(c,d),d+=3,m.toArray(c,d),d+=3,m.toArray(c,d),d+=3,m.toArray(c,d),d+=3}const u=new on;u.setAttribute("position",new Ot(l,3)),u.setAttribute("color",new Ot(c,3));const f=new yi({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Nue extends $s{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new bt(s),o=new bt(o);const a=[],l=[];if(n>1)for(let f=0;f<n;f++){const h=f/n*(Math.PI*2),d=Math.sin(h)*e,p=Math.cos(h)*e;a.push(0,0,0),a.push(d,0,p);const m=f&1?s:o;l.push(m.r,m.g,m.b),l.push(m.r,m.g,m.b)}for(let f=0;f<r;f++){const h=f&1?s:o,d=e-e/r*f;for(let p=0;p<i;p++){let m=p/i*(Math.PI*2),g=Math.sin(m)*d,v=Math.cos(m)*d;a.push(g,0,v),l.push(h.r,h.g,h.b),m=(p+1)/i*(Math.PI*2),g=Math.sin(m)*d,v=Math.cos(m)*d,a.push(g,0,v),l.push(h.r,h.g,h.b)}}const c=new on;c.setAttribute("position",new Ot(a,3)),c.setAttribute("color",new Ot(l,3));const u=new yi({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const M7=new J,Dy=new J,R7=new J;class mU extends hn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new on;i.setAttribute("position",new Ot([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new yi({fog:!1,toneMapped:!1});this.lightPlane=new Fa(i,s),this.add(this.lightPlane),i=new on,i.setAttribute("position",new Ot([0,0,0,0,0,1],3)),this.targetLine=new Fa(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),M7.setFromMatrixPosition(this.light.matrixWorld),Dy.setFromMatrixPosition(this.light.target.matrixWorld),R7.subVectors(Dy,M7),this.lightPlane.lookAt(Dy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Dy),this.targetLine.scale.z=R7.length()}}const By=new J,Ei=new Qp;class H5 extends $s{constructor(e){const n=new on,r=new yi({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,m){l(p),l(m)}function l(p){i.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(i.length/3-1)}n.setAttribute("position",new Ot(i,3)),n.setAttribute("color",new Ot(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new bt(16755200),u=new bt(16711680),f=new bt(43775),h=new bt(16777215),d=new bt(3355443);this.setColors(c,u,f,h,d)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Ei.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ni("c",n,e,Ei,0,0,-1),Ni("t",n,e,Ei,0,0,1),Ni("n1",n,e,Ei,-r,-i,-1),Ni("n2",n,e,Ei,r,-i,-1),Ni("n3",n,e,Ei,-r,i,-1),Ni("n4",n,e,Ei,r,i,-1),Ni("f1",n,e,Ei,-r,-i,1),Ni("f2",n,e,Ei,r,-i,1),Ni("f3",n,e,Ei,-r,i,1),Ni("f4",n,e,Ei,r,i,1),Ni("u1",n,e,Ei,r*.7,i*1.1,-1),Ni("u2",n,e,Ei,-r*.7,i*1.1,-1),Ni("u3",n,e,Ei,0,i*2,-1),Ni("cf1",n,e,Ei,-r,0,1),Ni("cf2",n,e,Ei,r,0,1),Ni("cf3",n,e,Ei,0,-i,1),Ni("cf4",n,e,Ei,0,i,1),Ni("cn1",n,e,Ei,-r,0,-1),Ni("cn2",n,e,Ei,r,0,-1),Ni("cn3",n,e,Ei,0,-i,-1),Ni("cn4",n,e,Ei,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ni(t,e,n,r,i,s,o){By.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],By.x,By.y,By.z)}}const ky=new Yn;class Oue extends $s{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new on;s.setIndex(new Qt(r,1)),s.setAttribute("position",new Qt(i,3)),super(s,new yi({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&ky.setFromObject(this.object),ky.isEmpty())return;const n=ky.min,r=ky.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Due extends $s{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new on;s.setIndex(new Qt(r,1)),s.setAttribute("position",new Ot(i,3)),super(s,new yi({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Bue extends Fa{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new on;o.setAttribute("position",new Ot(s,3)),o.computeBoundingSphere(),super(o,new yi({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new on;l.setAttribute("position",new Ot(a,3)),l.computeBoundingSphere(),this.add(new un(l,new Or({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const I7=new J;let Fy,QA;class kue extends hn{constructor(e=new J(0,0,1),n=new J(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Fy===void 0&&(Fy=new on,Fy.setAttribute("position",new Ot([0,0,0,0,1,0],3)),QA=new Yu(0,.5,1,5,1),QA.translate(0,-.5,0)),this.position.copy(n),this.line=new Fa(Fy,new yi({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new un(QA,new Or({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{I7.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(I7,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Fue extends $s{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new on;i.setAttribute("position",new Ot(n,3)),i.setAttribute("color",new Ot(r,3));const s=new yi({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new bt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ec{constructor(){this.type="ShapePath",this.color=new bt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Iu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(v){const x=[];for(let y=0,A=v.length;y<A;y++){const T=v[y],w=new Oc;w.curves=T.curves,x.push(w)}return x}function r(v,x){const y=x.length;let A=!1;for(let T=y-1,w=0;w<y;T=w++){let M=x[T],C=x[w],S=C.x-M.x,R=C.y-M.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(M=x[w],S=-S,C=x[T],R=-R),v.y<M.y||v.y>C.y)continue;if(v.y===M.y){if(v.x===M.x)return!0}else{const O=R*(v.x-M.x)-S*(v.y-M.y);if(O===0)return!0;if(O<0)continue;A=!A}}else{if(v.y!==M.y)continue;if(C.x<=v.x&&v.x<=M.x||M.x<=v.x&&v.x<=C.x)return!0}}return A}const i=hl.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Oc,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const f=[],h=[];let d=[],p=0,m;h[p]=void 0,d[p]=[];for(let v=0,x=s.length;v<x;v++)a=s[v],m=a.getPoints(),o=i(m),o=e?!o:o,o?(!u&&h[p]&&p++,h[p]={s:new Oc,p:m},h[p].s.curves=a.curves,u&&p++,d[p]=[]):d[p].push({h:a,p:m[0]});if(!h[0])return n(s);if(h.length>1){let v=!1,x=0;for(let y=0,A=h.length;y<A;y++)f[y]=[];for(let y=0,A=h.length;y<A;y++){const T=d[y];for(let w=0;w<T.length;w++){const M=T[w];let C=!0;for(let S=0;S<h.length;S++)r(M.p,h[S].p)&&(y!==S&&x++,C?(C=!1,f[S].push(M)):v=!0);C&&f[y].push(M)}}x>0&&v===!1&&(d=f)}let g;for(let v=0,x=h.length;v<x;v++){l=h[v].s,c.push(l),g=d[v];for(let y=0,A=g.length;y<A;y++)l.holes.push(g[y].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:yl}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=yl);const Uue=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:o5,AddEquation:Au,AddOperation:Xk,AdditiveAnimationBlendMode:f5,AdditiveBlending:D3,AlphaFormat:Zk,AlwaysCompare:pF,AlwaysDepth:zk,AlwaysStencilFunc:k3,AmbientLight:c_,AnimationAction:aU,AnimationClip:Ua,AnimationLoader:iue,AnimationMixer:lU,AnimationObjectGroup:wue,AnimationUtils:eue,ArcCurve:DF,ArrayCamera:CF,ArrowHelper:kue,AttachedBindMode:Ww,Audio:sU,AudioAnalyser:mue,AudioContext:k5,AudioListener:iU,AudioLoader:rU,AxesHelper:Fue,BackSide:Ti,BasicDepthPacking:oF,BasicShadowMap:Tk,BatchedMesh:LF,Bone:Ah,BooleanKeyframeTrack:Ch,Box2:cU,Box3:Yn,Box3Helper:Due,BoxGeometry:Yc,BoxHelper:Oue,BufferAttribute:Qt,BufferGeometry:on,BufferGeometryLoader:nU,ByteType:j1,Cache:gh,Camera:Qp,CameraHelper:H5,CanvasTexture:OF,CapsuleGeometry:qE,CatmullRomCurve3:T5,CineonToneMapping:Kk,CircleGeometry:KE,ClampToEdgeWrapping:Er,Clock:f_,Color:bt,ColorKeyframeTrack:O5,ColorManagement:wr,CompressedArrayTexture:Ace,CompressedCubeTexture:Tce,CompressedTexture:$E,CompressedTextureLoader:sue,ConeGeometry:JE,ConstantAlphaFactor:kk,ConstantColorFactor:Dk,CubeCamera:zE,CubeReflectionMapping:Xl,CubeRefractionMapping:Hu,CubeTexture:Rg,CubeTextureLoader:JF,CubeUVReflectionMapping:Kp,CubicBezierCurve:w5,CubicBezierCurve3:S5,CubicInterpolant:YF,CullFaceBack:Uw,CullFaceFront:Ak,CullFaceFrontBack:bre,CullFaceNone:bk,Curve:El,CurvePath:kF,CustomBlending:NE,CustomToneMapping:Jk,CylinderGeometry:Yu,Cylindrical:Iue,Data3DTexture:y5,DataArrayTexture:UE,DataTexture:mo,DataTextureLoader:Bg,DataUtils:Vf,DecrementStencilOp:Rre,DecrementWrapStencilOp:Pre,DefaultLoadingManager:l_,DepthFormat:Lc,DepthStencilFormat:fh,DepthTexture:Ig,DetachedBindMode:Qk,DirectionalLight:om,DirectionalLightHelper:mU,DiscreteInterpolant:qF,DisplayP3ColorSpace:FE,DodecahedronGeometry:QE,DoubleSide:gr,DstAlphaFactor:Ik,DstColorFactor:Lk,DynamicCopyUsage:jre,DynamicDrawUsage:Zi,DynamicReadUsage:Gre,EdgesGeometry:I5,EllipseCurve:XE,EqualCompare:uF,EqualDepth:Gk,EqualStencilFunc:Dre,EquirectangularReflectionMapping:Rp,EquirectangularRefractionMapping:W1,Euler:wi,EventDispatcher:Jl,ExtrudeGeometry:Ng,FileLoader:Ir,Float16BufferAttribute:Iie,Float32BufferAttribute:Ot,Float64BufferAttribute:Pie,FloatType:fr,Fog:WE,FogExp2:VE,FramebufferTexture:bce,FrontSide:es,Frustum:_h,GLBufferAttribute:Rue,GLSL1:Xre,GLSL3:vS,GreaterCompare:fF,GreaterDepth:Wk,GreaterEqualCompare:dF,GreaterEqualDepth:Vk,GreaterEqualStencilFunc:Ure,GreaterStencilFunc:kre,GridHelper:Lue,Group:ki,HalfFloatType:Xr,HemisphereLight:QF,HemisphereLightHelper:pU,IcosahedronGeometry:Og,ImageBitmapLoader:B5,ImageLoader:tg,ImageUtils:v5,IncrementStencilOp:Mre,IncrementWrapStencilOp:Ire,InstancedBufferAttribute:ml,InstancedBufferGeometry:kg,InstancedInterleavedBuffer:H3,InstancedMesh:rm,Int16BufferAttribute:Mie,Int32BufferAttribute:Rie,Int8BufferAttribute:wie,IntType:eh,InterleavedBuffer:nm,InterleavedBufferAttribute:po,Interpolant:Sh,InterpolateDiscrete:dh,InterpolateLinear:zc,InterpolateSmooth:t3,InvertStencilOp:Lre,KeepStencilOp:Of,KeyframeTrack:bl,LOD:PF,LatheGeometry:Lg,Layers:rh,LessCompare:cF,LessDepth:Hk,LessEqualCompare:m5,LessEqualDepth:V1,LessEqualStencilFunc:Bre,LessStencilFunc:Ore,Light:Ku,LightProbe:tU,Line:Fa,Line3:dl,LineBasicMaterial:yi,LineCurve:C5,LineCurve3:BF,LineDashedMaterial:jF,LineLoop:jE,LineSegments:$s,LinearDisplayP3ColorSpace:Mg,LinearEncoding:d5,LinearFilter:Cn,LinearInterpolant:N5,LinearMipMapLinearFilter:jw,LinearMipMapNearestFilter:Sre,LinearMipmapLinearFilter:js,LinearMipmapNearestFilter:wg,LinearSRGBColorSpace:sa,LinearToneMapping:Yk,LinearTransfer:X1,Loader:_r,LoaderUtils:Si,LoadingManager:a_,LoopOnce:rF,LoopPingPong:sF,LoopRepeat:iF,LuminanceAlphaFormat:tF,LuminanceFormat:eF,MOUSE:Lf,Material:Gr,MaterialLoader:u_,MathUtils:si,Matrix3:Pn,Matrix4:yt,MaxEquation:Vw,Mesh:un,MeshBasicMaterial:Or,MeshDepthMaterial:tm,MeshDistanceMaterial:GE,MeshLambertMaterial:wh,MeshMatcapMaterial:WF,MeshNormalMaterial:o_,MeshPhongMaterial:Ba,MeshPhysicalMaterial:Mi,MeshStandardMaterial:_l,MeshToonMaterial:VF,MinEquation:Gw,MirroredRepeatWrapping:uh,MixOperation:$k,MultiplyBlending:Hw,MultiplyOperation:Tg,NearestFilter:Ln,NearestMipMapLinearFilter:wre,NearestMipMapNearestFilter:Tre,NearestMipmapLinearFilter:Zf,NearestMipmapNearestFilter:Ip,NeverCompare:lF,NeverDepth:Uk,NeverStencilFunc:Nre,NoBlending:Da,NoColorSpace:mi,NoToneMapping:fl,NormalAnimationBlendMode:kE,NormalBlending:Vl,NotEqualCompare:hF,NotEqualDepth:jk,NotEqualStencilFunc:Fre,NumberKeyframeTrack:Vu,Object3D:hn,ObjectLoader:cue,ObjectSpaceNormalMap:aF,OctahedronGeometry:Dg,OneFactor:OE,OneMinusConstantAlphaFactor:Fk,OneMinusConstantColorFactor:Bk,OneMinusDstAlphaFactor:Pk,OneMinusDstColorFactor:Nk,OneMinusSrcAlphaFactor:B3,OneMinusSrcColorFactor:Rk,OrthographicCamera:Bi,P3Primaries:q1,PCFShadowMap:LE,PCFSoftShadowMap:u1,PMREMGenerator:xS,Path:Iu,PerspectiveCamera:mr,Plane:zs,PlaneGeometry:Fo,PlaneHelper:Bue,PointLight:sm,PointLightHelper:dU,Points:Nc,PointsMaterial:ul,PolarGridHelper:Nue,PolyhedronGeometry:qu,PositionalAudio:pue,PropertyBinding:nr,PropertyMixer:oU,QuadraticBezierCurve:M5,QuadraticBezierCurve3:YE,Quaternion:kn,QuaternionKeyframeTrack:oa,QuaternionLinearInterpolant:KF,RED_GREEN_RGTC2_Format:mS,RED_RGTC1_Format:nF,REVISION:yl,RGBADepthPacking:p5,RGBAFormat:Sr,RGBAIntegerFormat:hh,RGBA_ASTC_10x10_Format:cS,RGBA_ASTC_10x5_Format:oS,RGBA_ASTC_10x6_Format:aS,RGBA_ASTC_10x8_Format:lS,RGBA_ASTC_12x10_Format:uS,RGBA_ASTC_12x12_Format:fS,RGBA_ASTC_4x4_Format:Qw,RGBA_ASTC_5x4_Format:Zw,RGBA_ASTC_5x5_Format:eS,RGBA_ASTC_6x5_Format:tS,RGBA_ASTC_6x6_Format:nS,RGBA_ASTC_8x5_Format:rS,RGBA_ASTC_8x6_Format:iS,RGBA_ASTC_8x8_Format:sS,RGBA_BPTC_Format:e3,RGBA_ETC2_EAC_Format:Jw,RGBA_PVRTC_2BPPV1_Format:qw,RGBA_PVRTC_4BPPV1_Format:Yw,RGBA_S3TC_DXT1_Format:Jx,RGBA_S3TC_DXT3_Format:Qx,RGBA_S3TC_DXT5_Format:Zx,RGB_BPTC_SIGNED_Format:hS,RGB_BPTC_UNSIGNED_Format:dS,RGB_ETC1_Format:u5,RGB_ETC2_Format:Kw,RGB_PVRTC_2BPPV1_Format:Xw,RGB_PVRTC_4BPPV1_Format:$w,RGB_S3TC_DXT1_Format:Kx,RGFormat:c5,RGIntegerFormat:Sg,RawShaderMaterial:GF,Ray:xl,Raycaster:z5,Rec709Primaries:Y1,RectAreaLight:ZF,RedFormat:th,RedIntegerFormat:BE,ReinhardToneMapping:qk,RenderTarget:vF,RepeatWrapping:Rr,ReplaceStencilOp:n3,ReverseSubtractEquation:Sk,RingGeometry:e_,SIGNED_RED_GREEN_RGTC2_Format:gS,SIGNED_RED_RGTC1_Format:pS,SRGBColorSpace:ii,SRGBTransfer:zr,Scene:vs,ShaderChunk:Dn,ShaderLib:sl,ShaderMaterial:ur,ShadowMaterial:HF,Shape:Oc,ShapeGeometry:t_,ShapePath:Ec,ShapeUtils:hl,ShortType:DE,Skeleton:Xu,SkeletonHelper:fU,SkinnedMesh:bh,Source:Gf,Sphere:Fr,SphereGeometry:Th,Spherical:G3,SphericalHarmonics3:eU,SplineCurve:R5,SpotLight:im,SpotLightHelper:uU,Sprite:IF,SpriteMaterial:b5,SrcAlphaFactor:G1,SrcAlphaSaturateFactor:Ok,SrcColorFactor:Mk,StaticCopyUsage:Wre,StaticDrawUsage:K1,StaticReadUsage:Hre,StereoCamera:fue,StreamCopyUsage:$re,StreamDrawUsage:zre,StreamReadUsage:Vre,StringKeyframeTrack:Mh,SubtractEquation:wk,SubtractiveBlending:zw,TOUCH:Nf,TangentSpaceNormalMap:Xc,TetrahedronGeometry:n_,Texture:Vn,TextureLoader:Ki,TorusGeometry:r_,TorusKnotGeometry:i_,Triangle:Xi,TriangleFanDrawMode:ph,TriangleStripDrawMode:Cg,TrianglesDrawMode:h5,TubeGeometry:s_,TwoPassDoubleSide:Are,UVMapping:zu,Uint16BufferAttribute:x5,Uint32BufferAttribute:E5,Uint8BufferAttribute:Sie,Uint8ClampedBufferAttribute:Cie,Uniform:ks,UniformsGroup:Mue,UniformsLib:Wt,UniformsUtils:Gu,UnsignedByteType:Cs,UnsignedInt248Type:Mu,UnsignedIntType:Ws,UnsignedShort4444Type:a5,UnsignedShort5551Type:l5,UnsignedShortType:Jp,VSMShadowMap:il,Vector2:qe,Vector3:J,Vector4:Xn,VectorKeyframeTrack:aa,VideoTexture:NF,WebGL1Renderer:MF,WebGL3DRenderTarget:die,WebGLArrayRenderTarget:hie,WebGLCoordinateSystem:cl,WebGLCubeRenderTarget:Zp,WebGLMultipleRenderTargets:pie,WebGLRenderTarget:pr,WebGLRenderer:Pg,WebGLUtils:SF,WebGPUCoordinateSystem:Pp,WireframeGeometry:P5,WrapAroundEnding:$1,ZeroCurvatureEnding:zf,ZeroFactor:Ck,ZeroSlopeEnding:Hf,ZeroStencilOp:Cre,_SRGBAFormat:F3,createCanvasElement:gF,sRGBEncoding:Ru},Symbol.toStringTag,{value:"Module"}));var gU={exports:{}},hu={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P7;function zue(){return P7||(P7=1,hu.ConcurrentRoot=1,hu.ContinuousEventPriority=4,hu.DefaultEventPriority=16,hu.DiscreteEventPriority=1,hu.IdleEventPriority=536870912,hu.LegacyRoot=0),hu}gU.exports=zue();var cp=gU.exports;function Hue(t){let e;const n=new Set,r=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const h=e;e=u?f:Object.assign({},e,f),n.forEach(d=>d(e,h))}},i=()=>e,s=(c,u=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function d(){const p=u(e);if(!f(h,p)){const m=h;c(h=p,m)}}return n.add(d),()=>n.delete(d)},l={setState:r,getState:i,subscribe:(c,u,f)=>u||f?s(c,u,f):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const Gue=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),L7=Gue?E.useEffect:E.useLayoutEffect;function vU(t){const e=typeof t=="function"?Hue(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=E.useReducer(g=>g+1,0),o=e.getState(),a=E.useRef(o),l=E.useRef(r),c=E.useRef(i),u=E.useRef(!1),f=E.useRef();f.current===void 0&&(f.current=r(o));let h,d=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(h=r(o),d=!i(f.current,h)),L7(()=>{d&&(f.current=h),a.current=o,l.current=r,c.current=i,u.current=!1});const p=E.useRef(o);L7(()=>{const g=()=>{try{const x=e.getState(),y=l.current(x);c.current(f.current,y)||(a.current=x,f.current=y,s())}catch{u.current=!0,s()}},v=e.subscribe(g);return e.getState()!==p.current&&g(),v},[]);const m=d?h:f.current;return E.useDebugValue(m),m};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var yU={exports:{}},xU={exports:{}},ZA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N7;function Vue(){return N7||(N7=1,function(t){function e(Y,ee){var ne=Y.length;Y.push(ee);e:for(;0<ne;){var P=ne-1>>>1,se=Y[P];if(0<i(se,ee))Y[P]=ee,Y[ne]=se,ne=P;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ee=Y[0],ne=Y.pop();if(ne!==ee){Y[0]=ne;e:for(var P=0,se=Y.length,re=se>>>1;P<re;){var Z=2*(P+1)-1,X=Y[Z],W=Z+1,K=Y[W];if(0>i(X,ne))W<se&&0>i(K,X)?(Y[P]=K,Y[W]=ne,P=W):(Y[P]=X,Y[Z]=ne,P=Z);else if(W<se&&0>i(K,ne))Y[P]=K,Y[W]=ne,P=W;else break e}}return ee}function i(Y,ee){var ne=Y.sortIndex-ee.sortIndex;return ne!==0?ne:Y.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,h=3,d=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(Y){for(var ee=n(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=Y)r(c),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(c)}}function A(Y){if(m=!1,y(Y),!p)if(n(l)!==null)p=!0,U(T);else{var ee=n(c);ee!==null&&Q(A,ee.startTime-Y)}}function T(Y,ee){p=!1,m&&(m=!1,v(C),C=-1),d=!0;var ne=h;try{for(y(ee),f=n(l);f!==null&&(!(f.expirationTime>ee)||Y&&!O());){var P=f.callback;if(typeof P=="function"){f.callback=null,h=f.priorityLevel;var se=P(f.expirationTime<=ee);ee=t.unstable_now(),typeof se=="function"?f.callback=se:f===n(l)&&r(l),y(ee)}else r(l);f=n(l)}if(f!==null)var re=!0;else{var Z=n(c);Z!==null&&Q(A,Z.startTime-ee),re=!1}return re}finally{f=null,h=ne,d=!1}}var w=!1,M=null,C=-1,S=5,R=-1;function O(){return!(t.unstable_now()-R<S)}function L(){if(M!==null){var Y=t.unstable_now();R=Y;var ee=!0;try{ee=M(!0,Y)}finally{ee?B():(w=!1,M=null)}}else w=!1}var B;if(typeof x=="function")B=function(){x(L)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,$=N.port2;N.port1.onmessage=L,B=function(){$.postMessage(null)}}else B=function(){g(L,0)};function U(Y){M=Y,w||(w=!0,B())}function Q(Y,ee){C=g(function(){Y(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,U(T))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Y){switch(h){case 1:case 2:case 3:var ee=3;break;default:ee=h}var ne=h;h=ee;try{return Y()}finally{h=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,ee){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ne=h;h=Y;try{return ee()}finally{h=ne}},t.unstable_scheduleCallback=function(Y,ee,ne){var P=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?P+ne:P):ne=P,Y){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=ne+se,Y={id:u++,callback:ee,priorityLevel:Y,startTime:ne,expirationTime:se,sortIndex:-1},ne>P?(Y.sortIndex=ne,e(c,Y),n(l)===null&&Y===n(c)&&(m?(v(C),C=-1):m=!0,Q(A,ne-P))):(Y.sortIndex=se,e(l,Y),p||d||(p=!0,U(T))),Y},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(Y){var ee=h;return function(){var ne=h;h=ee;try{return Y.apply(this,arguments)}finally{h=ne}}}}(ZA)),ZA}xU.exports=Vue();var SS=xU.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2,O7;function Wue(){return O7||(O7=1,e2=function(e){var n={},r=Ue,i=SS,s=Object.assign;function o(_){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+_,I=1;I<arguments.length;I++)b+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+_+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),T=Symbol.iterator;function w(_){return _===null||typeof _!="object"?null:(_=T&&_[T]||_["@@iterator"],typeof _=="function"?_:null)}function M(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case u:return"Fragment";case c:return"Portal";case h:return"Profiler";case f:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case p:return(_.displayName||"Context")+".Consumer";case d:return(_._context.displayName||"Context")+".Provider";case m:var b=_.render;return _=_.displayName,_||(_=b.displayName||b.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case x:return b=_.displayName||null,b!==null?b:M(_.type)||"Memo";case y:b=_._payload,_=_._init;try{return M(_(b))}catch{}}return null}function C(_){var b=_.type;switch(_.tag){case 24:return"Cache";case 9:return(b.displayName||"Context")+".Consumer";case 10:return(b._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _=b.render,_=_.displayName||_.name||"",b.displayName||(_!==""?"ForwardRef("+_+")":"ForwardRef");case 7:return"Fragment";case 5:return b;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(b);case 8:return b===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b}return null}function S(_){var b=_,I=_;if(_.alternate)for(;b.return;)b=b.return;else{_=b;do b=_,b.flags&4098&&(I=b.return),_=b.return;while(_)}return b.tag===3?I:null}function R(_){if(S(_)!==_)throw Error(o(188))}function O(_){var b=_.alternate;if(!b){if(b=S(_),b===null)throw Error(o(188));return b!==_?null:_}for(var I=_,k=b;;){var q=I.return;if(q===null)break;var oe=q.alternate;if(oe===null){if(k=q.return,k!==null){I=k;continue}break}if(q.child===oe.child){for(oe=q.child;oe;){if(oe===I)return R(q),_;if(oe===k)return R(q),b;oe=oe.sibling}throw Error(o(188))}if(I.return!==k.return)I=q,k=oe;else{for(var De=!1,Qe=q.child;Qe;){if(Qe===I){De=!0,I=q,k=oe;break}if(Qe===k){De=!0,k=q,I=oe;break}Qe=Qe.sibling}if(!De){for(Qe=oe.child;Qe;){if(Qe===I){De=!0,I=oe,k=q;break}if(Qe===k){De=!0,k=oe,I=q;break}Qe=Qe.sibling}if(!De)throw Error(o(189))}}if(I.alternate!==k)throw Error(o(190))}if(I.tag!==3)throw Error(o(188));return I.stateNode.current===I?_:b}function L(_){return _=O(_),_!==null?B(_):null}function B(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){var b=B(_);if(b!==null)return b;_=_.sibling}return null}function N(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){if(_.tag!==4){var b=N(_);if(b!==null)return b}_=_.sibling}return null}var $=Array.isArray,U=e.getPublicInstance,Q=e.getRootHostContext,Y=e.getChildHostContext,ee=e.prepareForCommit,ne=e.resetAfterCommit,P=e.createInstance,se=e.appendInitialChild,re=e.finalizeInitialChildren,Z=e.prepareUpdate,X=e.shouldSetTextContent,W=e.createTextInstance,K=e.scheduleTimeout,ge=e.cancelTimeout,Se=e.noTimeout,xe=e.isPrimaryRenderer,Me=e.supportsMutation,he=e.supportsPersistence,Oe=e.supportsHydration,be=e.getInstanceFromNode,Te=e.preparePortalMount,Re=e.getCurrentEventPriority,$e=e.detachDeletedInstance,ve=e.supportsMicrotasks,me=e.scheduleMicrotask,We=e.supportsTestSelectors,Xe=e.findFiberRoot,xt=e.getBoundingRect,fe=e.getTextContent,ie=e.isHiddenSubtree,Ae=e.matchAccessibilityRole,Je=e.setFocusIfFocusable,te=e.setupIntersectionObserver,z=e.appendChild,F=e.appendChildToContainer,ae=e.commitTextUpdate,ye=e.commitMount,Le=e.commitUpdate,ke=e.insertBefore,Ve=e.insertInContainerBefore,Ce=e.removeChild,Ye=e.removeChildFromContainer,tt=e.resetTextContent,it=e.hideInstance,dt=e.hideTextInstance,Ze=e.unhideInstance,Be=e.unhideTextInstance,Ft=e.clearContainer,St=e.cloneInstance,st=e.createContainerChildSet,It=e.appendChildToContainerChildSet,Ht=e.finalizeContainerChildren,zt=e.replaceContainerChildren,$t=e.cloneHiddenInstance,Nn=e.cloneHiddenTextInstance,Tn=e.canHydrateInstance,Fn=e.canHydrateTextInstance,vr=e.canHydrateSuspenseInstance,ai=e.isSuspenseInstancePending,Ri=e.isSuspenseInstanceFallback,Vr=e.registerSuspenseInstanceRetry,Pr=e.getNextHydratableSibling,gn=e.getFirstHydratableChild,br=e.getFirstHydratableChildWithinContainer,ss=e.getFirstHydratableChildWithinSuspenseInstance,pe=e.hydrateInstance,Ee=e.hydrateTextInstance,je=e.hydrateSuspenseInstance,ue=e.getNextHydratableInstanceAfterSuspenseInstance,we=e.commitHydratedContainer,Pe=e.commitHydratedSuspenseInstance,Ge=e.clearSuspenseBoundary,Fe=e.clearSuspenseBoundaryFromContainer,lt=e.shouldDeleteUnhydratedTailInstances,ot=e.didNotMatchHydratedContainerTextInstance,pt=e.didNotMatchHydratedTextInstance,Ke;function Vt(_){if(Ke===void 0)try{throw Error()}catch(I){var b=I.stack.trim().match(/\n( *(at )?)/);Ke=b&&b[1]||""}return`
`+Ke+_}var Lt=!1;function Pt(_,b){if(!_||Lt)return"";Lt=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error()},Object.defineProperty(b.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(b,[])}catch(Gt){var k=Gt}Reflect.construct(_,[],b)}else{try{b.call()}catch(Gt){k=Gt}_.call(b.prototype)}else{try{throw Error()}catch(Gt){k=Gt}_()}}catch(Gt){if(Gt&&k&&typeof Gt.stack=="string"){for(var q=Gt.stack.split(`
`),oe=k.stack.split(`
`),De=q.length-1,Qe=oe.length-1;1<=De&&0<=Qe&&q[De]!==oe[Qe];)Qe--;for(;1<=De&&0<=Qe;De--,Qe--)if(q[De]!==oe[Qe]){if(De!==1||Qe!==1)do if(De--,Qe--,0>Qe||q[De]!==oe[Qe]){var Tt=`
`+q[De].replace(" at new "," at ");return _.displayName&&Tt.includes("<anonymous>")&&(Tt=Tt.replace("<anonymous>",_.displayName)),Tt}while(1<=De&&0<=Qe);break}}}finally{Lt=!1,Error.prepareStackTrace=I}return(_=_?_.displayName||_.name:"")?Vt(_):""}var qt=Object.prototype.hasOwnProperty,sn=[],ln=-1;function vn(_){return{current:_}}function jt(_){0>ln||(_.current=sn[ln],sn[ln]=null,ln--)}function Dt(_,b){ln++,sn[ln]=_.current,_.current=b}var Mn={},fn=vn(Mn),yn=vn(!1),Jn=Mn;function or(_,b){var I=_.type.contextTypes;if(!I)return Mn;var k=_.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===b)return k.__reactInternalMemoizedMaskedChildContext;var q={},oe;for(oe in I)q[oe]=b[oe];return k&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=b,_.__reactInternalMemoizedMaskedChildContext=q),q}function ar(_){return _=_.childContextTypes,_!=null}function Bn(){jt(yn),jt(fn)}function Rn(_,b,I){if(fn.current!==Mn)throw Error(o(168));Dt(fn,b),Dt(yn,I)}function Zt(_,b,I){var k=_.stateNode;if(b=b.childContextTypes,typeof k.getChildContext!="function")return I;k=k.getChildContext();for(var q in k)if(!(q in b))throw Error(o(108,C(_)||"Unknown",q));return s({},I,k)}function En(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||Mn,Jn=fn.current,Dt(fn,_),Dt(yn,yn.current),!0}function wn(_,b,I){var k=_.stateNode;if(!k)throw Error(o(169));I?(_=Zt(_,b,Jn),k.__reactInternalMemoizedMergedChildContext=_,jt(yn),jt(fn),Dt(fn,_)):jt(yn),Dt(yn,I)}var sr=Math.clz32?Math.clz32:ci,li=Math.log,Ar=Math.LN2;function ci(_){return _>>>=0,_===0?32:31-(li(_)/Ar|0)|0}var Es=64,xo=4194304;function cn(_){switch(_&-_){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _}}function an(_,b){var I=_.pendingLanes;if(I===0)return 0;var k=0,q=_.suspendedLanes,oe=_.pingedLanes,De=I&268435455;if(De!==0){var Qe=De&~q;Qe!==0?k=cn(Qe):(oe&=De,oe!==0&&(k=cn(oe)))}else De=I&~q,De!==0?k=cn(De):oe!==0&&(k=cn(oe));if(k===0)return 0;if(b!==0&&b!==k&&!(b&q)&&(q=k&-k,oe=b&-b,q>=oe||q===16&&(oe&4194240)!==0))return b;if(k&4&&(k|=I&16),b=_.entangledLanes,b!==0)for(_=_.entanglements,b&=k;0<b;)I=31-sr(b),q=1<<I,k|=_[I],b&=~q;return k}function de(_,b){switch(_){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D(_,b){for(var I=_.suspendedLanes,k=_.pingedLanes,q=_.expirationTimes,oe=_.pendingLanes;0<oe;){var De=31-sr(oe),Qe=1<<De,Tt=q[De];Tt===-1?(!(Qe&I)||Qe&k)&&(q[De]=de(Qe,b)):Tt<=b&&(_.expiredLanes|=Qe),oe&=~Qe}}function G(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function j(_){for(var b=[],I=0;31>I;I++)b.push(_);return b}function V(_,b,I){_.pendingLanes|=b,b!==536870912&&(_.suspendedLanes=0,_.pingedLanes=0),_=_.eventTimes,b=31-sr(b),_[b]=I}function le(_,b){var I=_.pendingLanes&~b;_.pendingLanes=b,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=b,_.mutableReadLanes&=b,_.entangledLanes&=b,b=_.entanglements;var k=_.eventTimes;for(_=_.expirationTimes;0<I;){var q=31-sr(I),oe=1<<q;b[q]=0,k[q]=-1,_[q]=-1,I&=~oe}}function Ne(_,b){var I=_.entangledLanes|=b;for(_=_.entanglements;I;){var k=31-sr(I),q=1<<k;q&b|_[k]&b&&(_[k]|=b),I&=~q}}var ze=0;function Et(_){return _&=-_,1<_?4<_?_&268435455?16:536870912:4:1}var ct=i.unstable_scheduleCallback,ut=i.unstable_cancelCallback,mt=i.unstable_shouldYield,ft=i.unstable_requestPaint,vt=i.unstable_now,Mt=i.unstable_ImmediatePriority,Nt=i.unstable_UserBlockingPriority,kt=i.unstable_NormalPriority,dn=i.unstable_IdlePriority,en=null,Xt=null;function In(_){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(en,_,void 0,(_.current.flags&128)===128)}catch{}}function Tr(_,b){return _===b&&(_!==0||1/_===1/b)||_!==_&&b!==b}var tr=typeof Object.is=="function"?Object.is:Tr,Kr=null,Ks=!1,Js=!1;function Am(_){Kr===null?Kr=[_]:Kr.push(_)}function Tm(_){Ks=!0,Am(_)}function Eo(){if(!Js&&Kr!==null){Js=!0;var _=0,b=ze;try{var I=Kr;for(ze=1;_<I.length;_++){var k=I[_];do k=k(!0);while(k!==null)}Kr=null,Ks=!1}catch(q){throw Kr!==null&&(Kr=Kr.slice(_+1)),ct(Mt,Eo),q}finally{ze=b,Js=!1}}return null}var tf=a.ReactCurrentBatchConfig;function nf(_,b){if(tr(_,b))return!0;if(typeof _!="object"||_===null||typeof b!="object"||b===null)return!1;var I=Object.keys(_),k=Object.keys(b);if(I.length!==k.length)return!1;for(k=0;k<I.length;k++){var q=I[k];if(!qt.call(b,q)||!tr(_[q],b[q]))return!1}return!0}function rf(_){switch(_.tag){case 5:return Vt(_.type);case 16:return Vt("Lazy");case 13:return Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 2:case 15:return _=Pt(_.type,!1),_;case 11:return _=Pt(_.type.render,!1),_;case 1:return _=Pt(_.type,!0),_;default:return""}}function Qs(_,b){if(_&&_.defaultProps){b=s({},b),_=_.defaultProps;for(var I in _)b[I]===void 0&&(b[I]=_[I]);return b}return b}var os=vn(null),Nh=null,$a=null,Kc=null;function Oh(){Kc=$a=Nh=null}function Zg(_,b,I){xe?(Dt(os,b._currentValue),b._currentValue=I):(Dt(os,b._currentValue2),b._currentValue2=I)}function as(_){var b=os.current;jt(os),xe?_._currentValue=b:_._currentValue2=b}function Zs(_,b,I){for(;_!==null;){var k=_.alternate;if((_.childLanes&b)!==b?(_.childLanes|=b,k!==null&&(k.childLanes|=b)):k!==null&&(k.childLanes&b)!==b&&(k.childLanes|=b),_===I)break;_=_.return}}function Ii(_,b){Nh=_,Kc=$a=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&b&&(Vo=!0),_.firstContext=null)}function Pi(_){var b=xe?_._currentValue:_._currentValue2;if(Kc!==_)if(_={context:_,memoizedValue:b,next:null},$a===null){if(Nh===null)throw Error(o(308));$a=_,Nh.dependencies={lanes:0,firstContext:_}}else $a=$a.next=_;return b}var zo=null,Jc=!1;function ib(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AM(_,b){_=_.updateQueue,b.updateQueue===_&&(b.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function Zl(_,b){return{eventTime:_,lane:b,tag:0,payload:null,callback:null,next:null}}function Qc(_,b){var I=_.updateQueue;I!==null&&(I=I.shared,Hi!==null&&_.mode&1&&!(qn&2)?(_=I.interleaved,_===null?(b.next=b,zo===null?zo=[I]:zo.push(I)):(b.next=_.next,_.next=b),I.interleaved=b):(_=I.pending,_===null?b.next=b:(b.next=_.next,_.next=b),I.pending=b))}function ev(_,b,I){if(b=b.updateQueue,b!==null&&(b=b.shared,(I&4194240)!==0)){var k=b.lanes;k&=_.pendingLanes,I|=k,b.lanes=I,Ne(_,I)}}function TM(_,b){var I=_.updateQueue,k=_.alternate;if(k!==null&&(k=k.updateQueue,I===k)){var q=null,oe=null;if(I=I.firstBaseUpdate,I!==null){do{var De={eventTime:I.eventTime,lane:I.lane,tag:I.tag,payload:I.payload,callback:I.callback,next:null};oe===null?q=oe=De:oe=oe.next=De,I=I.next}while(I!==null);oe===null?q=oe=b:oe=oe.next=b}else q=oe=b;I={baseState:k.baseState,firstBaseUpdate:q,lastBaseUpdate:oe,shared:k.shared,effects:k.effects},_.updateQueue=I;return}_=I.lastBaseUpdate,_===null?I.firstBaseUpdate=b:_.next=b,I.lastBaseUpdate=b}function tv(_,b,I,k){var q=_.updateQueue;Jc=!1;var oe=q.firstBaseUpdate,De=q.lastBaseUpdate,Qe=q.shared.pending;if(Qe!==null){q.shared.pending=null;var Tt=Qe,Gt=Tt.next;Tt.next=null,De===null?oe=Gt:De.next=Gt,De=Tt;var tn=_.alternate;tn!==null&&(tn=tn.updateQueue,Qe=tn.lastBaseUpdate,Qe!==De&&(Qe===null?tn.firstBaseUpdate=Gt:Qe.next=Gt,tn.lastBaseUpdate=Tt))}if(oe!==null){var Un=q.baseState;De=0,tn=Gt=Tt=null,Qe=oe;do{var bn=Qe.lane,Br=Qe.eventTime;if((k&bn)===bn){tn!==null&&(tn=tn.next={eventTime:Br,lane:0,tag:Qe.tag,payload:Qe.payload,callback:Qe.callback,next:null});e:{var mn=_,Ns=Qe;switch(bn=b,Br=I,Ns.tag){case 1:if(mn=Ns.payload,typeof mn=="function"){Un=mn.call(Br,Un,bn);break e}Un=mn;break e;case 3:mn.flags=mn.flags&-65537|128;case 0:if(mn=Ns.payload,bn=typeof mn=="function"?mn.call(Br,Un,bn):mn,bn==null)break e;Un=s({},Un,bn);break e;case 2:Jc=!0}}Qe.callback!==null&&Qe.lane!==0&&(_.flags|=64,bn=q.effects,bn===null?q.effects=[Qe]:bn.push(Qe))}else Br={eventTime:Br,lane:bn,tag:Qe.tag,payload:Qe.payload,callback:Qe.callback,next:null},tn===null?(Gt=tn=Br,Tt=Un):tn=tn.next=Br,De|=bn;if(Qe=Qe.next,Qe===null){if(Qe=q.shared.pending,Qe===null)break;bn=Qe,Qe=bn.next,bn.next=null,q.lastBaseUpdate=bn,q.shared.pending=null}}while(1);if(tn===null&&(Tt=Un),q.baseState=Tt,q.firstBaseUpdate=Gt,q.lastBaseUpdate=tn,b=q.shared.interleaved,b!==null){q=b;do De|=q.lane,q=q.next;while(q!==b)}else oe===null&&(q.shared.lanes=0);Vh|=De,_.lanes=De,_.memoizedState=Un}}function wM(_,b,I){if(_=b.effects,b.effects=null,_!==null)for(b=0;b<_.length;b++){var k=_[b],q=k.callback;if(q!==null){if(k.callback=null,k=I,typeof q!="function")throw Error(o(191,q));q.call(k)}}}var SM=new r.Component().refs;function sb(_,b,I,k){b=_.memoizedState,I=I(k,b),I=I==null?b:s({},b,I),_.memoizedState=I,_.lanes===0&&(_.updateQueue.baseState=I)}var nv={isMounted:function(_){return(_=_._reactInternals)?S(_)===_:!1},enqueueSetState:function(_,b,I){_=_._reactInternals;var k=to(),q=tu(_),oe=Zl(k,q);oe.payload=b,I!=null&&(oe.callback=I),Qc(_,oe),b=ha(_,q,k),b!==null&&ev(b,_,q)},enqueueReplaceState:function(_,b,I){_=_._reactInternals;var k=to(),q=tu(_),oe=Zl(k,q);oe.tag=1,oe.payload=b,I!=null&&(oe.callback=I),Qc(_,oe),b=ha(_,q,k),b!==null&&ev(b,_,q)},enqueueForceUpdate:function(_,b){_=_._reactInternals;var I=to(),k=tu(_),q=Zl(I,k);q.tag=2,b!=null&&(q.callback=b),Qc(_,q),b=ha(_,k,I),b!==null&&ev(b,_,k)}};function CM(_,b,I,k,q,oe,De){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(k,oe,De):b.prototype&&b.prototype.isPureReactComponent?!nf(I,k)||!nf(q,oe):!0}function MM(_,b,I){var k=!1,q=Mn,oe=b.contextType;return typeof oe=="object"&&oe!==null?oe=Pi(oe):(q=ar(b)?Jn:fn.current,k=b.contextTypes,oe=(k=k!=null)?or(_,q):Mn),b=new b(I,oe),_.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=nv,_.stateNode=b,b._reactInternals=_,k&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=q,_.__reactInternalMemoizedMaskedChildContext=oe),b}function RM(_,b,I,k){_=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(I,k),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(I,k),b.state!==_&&nv.enqueueReplaceState(b,b.state,null)}function ob(_,b,I,k){var q=_.stateNode;q.props=I,q.state=_.memoizedState,q.refs=SM,ib(_);var oe=b.contextType;typeof oe=="object"&&oe!==null?q.context=Pi(oe):(oe=ar(b)?Jn:fn.current,q.context=or(_,oe)),q.state=_.memoizedState,oe=b.getDerivedStateFromProps,typeof oe=="function"&&(sb(_,b,oe,I),q.state=_.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(b=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),b!==q.state&&nv.enqueueReplaceState(q,q.state,null),tv(_,I,q,k),q.state=_.memoizedState),typeof q.componentDidMount=="function"&&(_.flags|=4194308)}var Dh=[],Bh=0,rv=null,iv=0,la=[],ca=0,sf=null,ec=1,tc="";function of(_,b){Dh[Bh++]=iv,Dh[Bh++]=rv,rv=_,iv=b}function IM(_,b,I){la[ca++]=ec,la[ca++]=tc,la[ca++]=sf,sf=_;var k=ec;_=tc;var q=32-sr(k)-1;k&=~(1<<q),I+=1;var oe=32-sr(b)+q;if(30<oe){var De=q-q%5;oe=(k&(1<<De)-1).toString(32),k>>=De,q-=De,ec=1<<32-sr(b)+q|I<<q|k,tc=oe+_}else ec=1<<oe|I<<q|k,tc=_}function ab(_){_.return!==null&&(of(_,1),IM(_,1,0))}function lb(_){for(;_===rv;)rv=Dh[--Bh],Dh[Bh]=null,iv=Dh[--Bh],Dh[Bh]=null;for(;_===sf;)sf=la[--ca],la[ca]=null,tc=la[--ca],la[ca]=null,ec=la[--ca],la[ca]=null}var Ho=null,Go=null,Jr=!1,wm=!1,Xa=null;function PM(_,b){var I=da(5,null,null,0);I.elementType="DELETED",I.stateNode=b,I.return=_,b=_.deletions,b===null?(_.deletions=[I],_.flags|=16):b.push(I)}function LM(_,b){switch(_.tag){case 5:return b=Tn(b,_.type,_.pendingProps),b!==null?(_.stateNode=b,Ho=_,Go=gn(b),!0):!1;case 6:return b=Fn(b,_.pendingProps),b!==null?(_.stateNode=b,Ho=_,Go=null,!0):!1;case 13:if(b=vr(b),b!==null){var I=sf!==null?{id:ec,overflow:tc}:null;return _.memoizedState={dehydrated:b,treeContext:I,retryLane:1073741824},I=da(18,null,null,0),I.stateNode=b,I.return=_,_.child=I,Ho=_,Go=null,!0}return!1;default:return!1}}function cb(_){return(_.mode&1)!==0&&(_.flags&128)===0}function ub(_){if(Jr){var b=Go;if(b){var I=b;if(!LM(_,b)){if(cb(_))throw Error(o(418));b=Pr(I);var k=Ho;b&&LM(_,b)?PM(k,I):(_.flags=_.flags&-4097|2,Jr=!1,Ho=_)}}else{if(cb(_))throw Error(o(418));_.flags=_.flags&-4097|2,Jr=!1,Ho=_}}}function NM(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;Ho=_}function Sm(_){if(!Oe||_!==Ho)return!1;if(!Jr)return NM(_),Jr=!0,!1;if(_.tag!==3&&(_.tag!==5||lt(_.type)&&!X(_.type,_.memoizedProps))){var b=Go;if(b){if(cb(_)){for(_=Go;_;)_=Pr(_);throw Error(o(418))}for(;b;)PM(_,b),b=Pr(b)}}if(NM(_),_.tag===13){if(!Oe)throw Error(o(316));if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));Go=ue(_)}else Go=Ho?Pr(_.stateNode):null;return!0}function kh(){Oe&&(Go=Ho=null,wm=Jr=!1)}function fb(_){Xa===null?Xa=[_]:Xa.push(_)}function Cm(_,b,I){if(_=I.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(I._owner){if(I=I._owner,I){if(I.tag!==1)throw Error(o(309));var k=I.stateNode}if(!k)throw Error(o(147,_));var q=k,oe=""+_;return b!==null&&b.ref!==null&&typeof b.ref=="function"&&b.ref._stringRef===oe?b.ref:(b=function(De){var Qe=q.refs;Qe===SM&&(Qe=q.refs={}),De===null?delete Qe[oe]:Qe[oe]=De},b._stringRef=oe,b)}if(typeof _!="string")throw Error(o(284));if(!I._owner)throw Error(o(290,_))}return _}function sv(_,b){throw _=Object.prototype.toString.call(b),Error(o(31,_==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":_))}function OM(_){var b=_._init;return b(_._payload)}function DM(_){function b(ht,nt){if(_){var At=ht.deletions;At===null?(ht.deletions=[nt],ht.flags|=16):At.push(nt)}}function I(ht,nt){if(!_)return null;for(;nt!==null;)b(ht,nt),nt=nt.sibling;return null}function k(ht,nt){for(ht=new Map;nt!==null;)nt.key!==null?ht.set(nt.key,nt):ht.set(nt.index,nt),nt=nt.sibling;return ht}function q(ht,nt){return ht=ru(ht,nt),ht.index=0,ht.sibling=null,ht}function oe(ht,nt,At){return ht.index=At,_?(At=ht.alternate,At!==null?(At=At.index,At<nt?(ht.flags|=2,nt):At):(ht.flags|=2,nt)):(ht.flags|=1048576,nt)}function De(ht){return _&&ht.alternate===null&&(ht.flags|=2),ht}function Qe(ht,nt,At,Jt){return nt===null||nt.tag!==6?(nt=Yb(At,ht.mode,Jt),nt.return=ht,nt):(nt=q(nt,At),nt.return=ht,nt)}function Tt(ht,nt,At,Jt){var pn=At.type;return pn===u?tn(ht,nt,At.props.children,Jt,At.key):nt!==null&&(nt.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===y&&OM(pn)===nt.type)?(Jt=q(nt,At.props),Jt.ref=Cm(ht,nt,At),Jt.return=ht,Jt):(Jt=Bv(At.type,At.key,At.props,null,ht.mode,Jt),Jt.ref=Cm(ht,nt,At),Jt.return=ht,Jt)}function Gt(ht,nt,At,Jt){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==At.containerInfo||nt.stateNode.implementation!==At.implementation?(nt=qb(At,ht.mode,Jt),nt.return=ht,nt):(nt=q(nt,At.children||[]),nt.return=ht,nt)}function tn(ht,nt,At,Jt,pn){return nt===null||nt.tag!==7?(nt=df(At,ht.mode,Jt,pn),nt.return=ht,nt):(nt=q(nt,At),nt.return=ht,nt)}function Un(ht,nt,At){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return nt=Yb(""+nt,ht.mode,At),nt.return=ht,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case l:return At=Bv(nt.type,nt.key,nt.props,null,ht.mode,At),At.ref=Cm(ht,null,nt),At.return=ht,At;case c:return nt=qb(nt,ht.mode,At),nt.return=ht,nt;case y:var Jt=nt._init;return Un(ht,Jt(nt._payload),At)}if($(nt)||w(nt))return nt=df(nt,ht.mode,At,null),nt.return=ht,nt;sv(ht,nt)}return null}function bn(ht,nt,At,Jt){var pn=nt!==null?nt.key:null;if(typeof At=="string"&&At!==""||typeof At=="number")return pn!==null?null:Qe(ht,nt,""+At,Jt);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case l:return At.key===pn?Tt(ht,nt,At,Jt):null;case c:return At.key===pn?Gt(ht,nt,At,Jt):null;case y:return pn=At._init,bn(ht,nt,pn(At._payload),Jt)}if($(At)||w(At))return pn!==null?null:tn(ht,nt,At,Jt,null);sv(ht,At)}return null}function Br(ht,nt,At,Jt,pn){if(typeof Jt=="string"&&Jt!==""||typeof Jt=="number")return ht=ht.get(At)||null,Qe(nt,ht,""+Jt,pn);if(typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case l:return ht=ht.get(Jt.key===null?At:Jt.key)||null,Tt(nt,ht,Jt,pn);case c:return ht=ht.get(Jt.key===null?At:Jt.key)||null,Gt(nt,ht,Jt,pn);case y:var jn=Jt._init;return Br(ht,nt,At,jn(Jt._payload),pn)}if($(Jt)||w(Jt))return ht=ht.get(At)||null,tn(nt,ht,Jt,pn,null);sv(nt,Jt)}return null}function mn(ht,nt,At,Jt){for(var pn=null,jn=null,zn=nt,lr=nt=0,cs=null;zn!==null&&lr<At.length;lr++){zn.index>lr?(cs=zn,zn=null):cs=zn.sibling;var cr=bn(ht,zn,At[lr],Jt);if(cr===null){zn===null&&(zn=cs);break}_&&zn&&cr.alternate===null&&b(ht,zn),nt=oe(cr,nt,lr),jn===null?pn=cr:jn.sibling=cr,jn=cr,zn=cs}if(lr===At.length)return I(ht,zn),Jr&&of(ht,lr),pn;if(zn===null){for(;lr<At.length;lr++)zn=Un(ht,At[lr],Jt),zn!==null&&(nt=oe(zn,nt,lr),jn===null?pn=zn:jn.sibling=zn,jn=zn);return Jr&&of(ht,lr),pn}for(zn=k(ht,zn);lr<At.length;lr++)cs=Br(zn,ht,lr,At[lr],Jt),cs!==null&&(_&&cs.alternate!==null&&zn.delete(cs.key===null?lr:cs.key),nt=oe(cs,nt,lr),jn===null?pn=cs:jn.sibling=cs,jn=cs);return _&&zn.forEach(function(iu){return b(ht,iu)}),Jr&&of(ht,lr),pn}function Ns(ht,nt,At,Jt){var pn=w(At);if(typeof pn!="function")throw Error(o(150));if(At=pn.call(At),At==null)throw Error(o(151));for(var jn=pn=null,zn=nt,lr=nt=0,cs=null,cr=At.next();zn!==null&&!cr.done;lr++,cr=At.next()){zn.index>lr?(cs=zn,zn=null):cs=zn.sibling;var iu=bn(ht,zn,cr.value,Jt);if(iu===null){zn===null&&(zn=cs);break}_&&zn&&iu.alternate===null&&b(ht,zn),nt=oe(iu,nt,lr),jn===null?pn=iu:jn.sibling=iu,jn=iu,zn=cs}if(cr.done)return I(ht,zn),Jr&&of(ht,lr),pn;if(zn===null){for(;!cr.done;lr++,cr=At.next())cr=Un(ht,cr.value,Jt),cr!==null&&(nt=oe(cr,nt,lr),jn===null?pn=cr:jn.sibling=cr,jn=cr);return Jr&&of(ht,lr),pn}for(zn=k(ht,zn);!cr.done;lr++,cr=At.next())cr=Br(zn,ht,lr,cr.value,Jt),cr!==null&&(_&&cr.alternate!==null&&zn.delete(cr.key===null?lr:cr.key),nt=oe(cr,nt,lr),jn===null?pn=cr:jn.sibling=cr,jn=cr);return _&&zn.forEach(function(g$){return b(ht,g$)}),Jr&&of(ht,lr),pn}function pa(ht,nt,At,Jt){if(typeof At=="object"&&At!==null&&At.type===u&&At.key===null&&(At=At.props.children),typeof At=="object"&&At!==null){switch(At.$$typeof){case l:e:{for(var pn=At.key,jn=nt;jn!==null;){if(jn.key===pn){if(pn=At.type,pn===u){if(jn.tag===7){I(ht,jn.sibling),nt=q(jn,At.props.children),nt.return=ht,ht=nt;break e}}else if(jn.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===y&&OM(pn)===jn.type){I(ht,jn.sibling),nt=q(jn,At.props),nt.ref=Cm(ht,jn,At),nt.return=ht,ht=nt;break e}I(ht,jn);break}else b(ht,jn);jn=jn.sibling}At.type===u?(nt=df(At.props.children,ht.mode,Jt,At.key),nt.return=ht,ht=nt):(Jt=Bv(At.type,At.key,At.props,null,ht.mode,Jt),Jt.ref=Cm(ht,nt,At),Jt.return=ht,ht=Jt)}return De(ht);case c:e:{for(jn=At.key;nt!==null;){if(nt.key===jn)if(nt.tag===4&&nt.stateNode.containerInfo===At.containerInfo&&nt.stateNode.implementation===At.implementation){I(ht,nt.sibling),nt=q(nt,At.children||[]),nt.return=ht,ht=nt;break e}else{I(ht,nt);break}else b(ht,nt);nt=nt.sibling}nt=qb(At,ht.mode,Jt),nt.return=ht,ht=nt}return De(ht);case y:return jn=At._init,pa(ht,nt,jn(At._payload),Jt)}if($(At))return mn(ht,nt,At,Jt);if(w(At))return Ns(ht,nt,At,Jt);sv(ht,At)}return typeof At=="string"&&At!==""||typeof At=="number"?(At=""+At,nt!==null&&nt.tag===6?(I(ht,nt.sibling),nt=q(nt,At),nt.return=ht,ht=nt):(I(ht,nt),nt=Yb(At,ht.mode,Jt),nt.return=ht,ht=nt),De(ht)):I(ht,nt)}return pa}var Fh=DM(!0),BM=DM(!1),Mm={},ua=vn(Mm),Rm=vn(Mm),Uh=vn(Mm);function wl(_){if(_===Mm)throw Error(o(174));return _}function hb(_,b){Dt(Uh,b),Dt(Rm,_),Dt(ua,Mm),_=Q(b),jt(ua),Dt(ua,_)}function zh(){jt(ua),jt(Rm),jt(Uh)}function kM(_){var b=wl(Uh.current),I=wl(ua.current);b=Y(I,_.type,b),I!==b&&(Dt(Rm,_),Dt(ua,b))}function db(_){Rm.current===_&&(jt(ua),jt(Rm))}var ui=vn(0);function ov(_){for(var b=_;b!==null;){if(b.tag===13){var I=b.memoizedState;if(I!==null&&(I=I.dehydrated,I===null||ai(I)||Ri(I)))return b}else if(b.tag===19&&b.memoizedProps.revealOrder!==void 0){if(b.flags&128)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===_)break;for(;b.sibling===null;){if(b.return===null||b.return===_)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}var pb=[];function mb(){for(var _=0;_<pb.length;_++){var b=pb[_];xe?b._workInProgressVersionPrimary=null:b._workInProgressVersionSecondary=null}pb.length=0}var av=a.ReactCurrentDispatcher,fa=a.ReactCurrentBatchConfig,Hh=0,xi=null,Is=null,ls=null,lv=!1,Im=!1,Pm=0,Hj=0;function Ps(){throw Error(o(321))}function gb(_,b){if(b===null)return!1;for(var I=0;I<b.length&&I<_.length;I++)if(!tr(_[I],b[I]))return!1;return!0}function vb(_,b,I,k,q,oe){if(Hh=oe,xi=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,av.current=_===null||_.memoizedState===null?jj:$j,_=I(k,q),Im){oe=0;do{if(Im=!1,Pm=0,25<=oe)throw Error(o(301));oe+=1,ls=Is=null,b.updateQueue=null,av.current=Xj,_=I(k,q)}while(Im)}if(av.current=dv,b=Is!==null&&Is.next!==null,Hh=0,ls=Is=xi=null,lv=!1,b)throw Error(o(300));return _}function yb(){var _=Pm!==0;return Pm=0,_}function nc(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ls===null?xi.memoizedState=ls=_:ls=ls.next=_,ls}function Sl(){if(Is===null){var _=xi.alternate;_=_!==null?_.memoizedState:null}else _=Is.next;var b=ls===null?xi.memoizedState:ls.next;if(b!==null)ls=b,Is=_;else{if(_===null)throw Error(o(310));Is=_,_={memoizedState:Is.memoizedState,baseState:Is.baseState,baseQueue:Is.baseQueue,queue:Is.queue,next:null},ls===null?xi.memoizedState=ls=_:ls=ls.next=_}return ls}function af(_,b){return typeof b=="function"?b(_):b}function cv(_){var b=Sl(),I=b.queue;if(I===null)throw Error(o(311));I.lastRenderedReducer=_;var k=Is,q=k.baseQueue,oe=I.pending;if(oe!==null){if(q!==null){var De=q.next;q.next=oe.next,oe.next=De}k.baseQueue=q=oe,I.pending=null}if(q!==null){oe=q.next,k=k.baseState;var Qe=De=null,Tt=null,Gt=oe;do{var tn=Gt.lane;if((Hh&tn)===tn)Tt!==null&&(Tt=Tt.next={lane:0,action:Gt.action,hasEagerState:Gt.hasEagerState,eagerState:Gt.eagerState,next:null}),k=Gt.hasEagerState?Gt.eagerState:_(k,Gt.action);else{var Un={lane:tn,action:Gt.action,hasEagerState:Gt.hasEagerState,eagerState:Gt.eagerState,next:null};Tt===null?(Qe=Tt=Un,De=k):Tt=Tt.next=Un,xi.lanes|=tn,Vh|=tn}Gt=Gt.next}while(Gt!==null&&Gt!==oe);Tt===null?De=k:Tt.next=Qe,tr(k,b.memoizedState)||(Vo=!0),b.memoizedState=k,b.baseState=De,b.baseQueue=Tt,I.lastRenderedState=k}if(_=I.interleaved,_!==null){q=_;do oe=q.lane,xi.lanes|=oe,Vh|=oe,q=q.next;while(q!==_)}else q===null&&(I.lanes=0);return[b.memoizedState,I.dispatch]}function uv(_){var b=Sl(),I=b.queue;if(I===null)throw Error(o(311));I.lastRenderedReducer=_;var k=I.dispatch,q=I.pending,oe=b.memoizedState;if(q!==null){I.pending=null;var De=q=q.next;do oe=_(oe,De.action),De=De.next;while(De!==q);tr(oe,b.memoizedState)||(Vo=!0),b.memoizedState=oe,b.baseQueue===null&&(b.baseState=oe),I.lastRenderedState=oe}return[oe,k]}function FM(){}function UM(_,b){var I=xi,k=Sl(),q=b(),oe=!tr(k.memoizedState,q);if(oe&&(k.memoizedState=q,Vo=!0),k=k.queue,Nm(GM.bind(null,I,k,_),[_]),k.getSnapshot!==b||oe||ls!==null&&ls.memoizedState.tag&1){if(I.flags|=2048,Lm(9,HM.bind(null,I,k,q,b),void 0,null),Hi===null)throw Error(o(349));Hh&30||zM(I,b,q)}return q}function zM(_,b,I){_.flags|=16384,_={getSnapshot:b,value:I},b=xi.updateQueue,b===null?(b={lastEffect:null,stores:null},xi.updateQueue=b,b.stores=[_]):(I=b.stores,I===null?b.stores=[_]:I.push(_))}function HM(_,b,I,k){b.value=I,b.getSnapshot=k,VM(b)&&ha(_,1,-1)}function GM(_,b,I){return I(function(){VM(b)&&ha(_,1,-1)})}function VM(_){var b=_.getSnapshot;_=_.value;try{var I=b();return!tr(_,I)}catch{return!0}}function xb(_){var b=nc();return typeof _=="function"&&(_=_()),b.memoizedState=b.baseState=_,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:af,lastRenderedState:_},b.queue=_,_=_.dispatch=Wj.bind(null,xi,_),[b.memoizedState,_]}function Lm(_,b,I,k){return _={tag:_,create:b,destroy:I,deps:k,next:null},b=xi.updateQueue,b===null?(b={lastEffect:null,stores:null},xi.updateQueue=b,b.lastEffect=_.next=_):(I=b.lastEffect,I===null?b.lastEffect=_.next=_:(k=I.next,I.next=_,_.next=k,b.lastEffect=_)),_}function WM(){return Sl().memoizedState}function fv(_,b,I,k){var q=nc();xi.flags|=_,q.memoizedState=Lm(1|b,I,void 0,k===void 0?null:k)}function hv(_,b,I,k){var q=Sl();k=k===void 0?null:k;var oe=void 0;if(Is!==null){var De=Is.memoizedState;if(oe=De.destroy,k!==null&&gb(k,De.deps)){q.memoizedState=Lm(b,I,oe,k);return}}xi.flags|=_,q.memoizedState=Lm(1|b,I,oe,k)}function Eb(_,b){return fv(8390656,8,_,b)}function Nm(_,b){return hv(2048,8,_,b)}function jM(_,b){return hv(4,2,_,b)}function $M(_,b){return hv(4,4,_,b)}function XM(_,b){if(typeof b=="function")return _=_(),b(_),function(){b(null)};if(b!=null)return _=_(),b.current=_,function(){b.current=null}}function YM(_,b,I){return I=I!=null?I.concat([_]):null,hv(4,4,XM.bind(null,b,_),I)}function _b(){}function qM(_,b){var I=Sl();b=b===void 0?null:b;var k=I.memoizedState;return k!==null&&b!==null&&gb(b,k[1])?k[0]:(I.memoizedState=[_,b],_)}function KM(_,b){var I=Sl();b=b===void 0?null:b;var k=I.memoizedState;return k!==null&&b!==null&&gb(b,k[1])?k[0]:(_=_(),I.memoizedState=[_,b],_)}function Gj(_,b){var I=ze;ze=I!==0&&4>I?I:4,_(!0);var k=fa.transition;fa.transition={};try{_(!1),b()}finally{ze=I,fa.transition=k}}function JM(){return Sl().memoizedState}function Vj(_,b,I){var k=tu(_);I={lane:k,action:I,hasEagerState:!1,eagerState:null,next:null},QM(_)?ZM(b,I):(e6(_,b,I),I=to(),_=ha(_,k,I),_!==null&&t6(_,b,k))}function Wj(_,b,I){var k=tu(_),q={lane:k,action:I,hasEagerState:!1,eagerState:null,next:null};if(QM(_))ZM(b,q);else{e6(_,b,q);var oe=_.alternate;if(_.lanes===0&&(oe===null||oe.lanes===0)&&(oe=b.lastRenderedReducer,oe!==null))try{var De=b.lastRenderedState,Qe=oe(De,I);if(q.hasEagerState=!0,q.eagerState=Qe,tr(Qe,De))return}catch{}finally{}I=to(),_=ha(_,k,I),_!==null&&t6(_,b,k)}}function QM(_){var b=_.alternate;return _===xi||b!==null&&b===xi}function ZM(_,b){Im=lv=!0;var I=_.pending;I===null?b.next=b:(b.next=I.next,I.next=b),_.pending=b}function e6(_,b,I){Hi!==null&&_.mode&1&&!(qn&2)?(_=b.interleaved,_===null?(I.next=I,zo===null?zo=[b]:zo.push(b)):(I.next=_.next,_.next=I),b.interleaved=I):(_=b.pending,_===null?I.next=I:(I.next=_.next,_.next=I),b.pending=I)}function t6(_,b,I){if(I&4194240){var k=b.lanes;k&=_.pendingLanes,I|=k,b.lanes=I,Ne(_,I)}}var dv={readContext:Pi,useCallback:Ps,useContext:Ps,useEffect:Ps,useImperativeHandle:Ps,useInsertionEffect:Ps,useLayoutEffect:Ps,useMemo:Ps,useReducer:Ps,useRef:Ps,useState:Ps,useDebugValue:Ps,useDeferredValue:Ps,useTransition:Ps,useMutableSource:Ps,useSyncExternalStore:Ps,useId:Ps,unstable_isNewReconciler:!1},jj={readContext:Pi,useCallback:function(_,b){return nc().memoizedState=[_,b===void 0?null:b],_},useContext:Pi,useEffect:Eb,useImperativeHandle:function(_,b,I){return I=I!=null?I.concat([_]):null,fv(4194308,4,XM.bind(null,b,_),I)},useLayoutEffect:function(_,b){return fv(4194308,4,_,b)},useInsertionEffect:function(_,b){return fv(4,2,_,b)},useMemo:function(_,b){var I=nc();return b=b===void 0?null:b,_=_(),I.memoizedState=[_,b],_},useReducer:function(_,b,I){var k=nc();return b=I!==void 0?I(b):b,k.memoizedState=k.baseState=b,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_,lastRenderedState:b},k.queue=_,_=_.dispatch=Vj.bind(null,xi,_),[k.memoizedState,_]},useRef:function(_){var b=nc();return _={current:_},b.memoizedState=_},useState:xb,useDebugValue:_b,useDeferredValue:function(_){var b=xb(_),I=b[0],k=b[1];return Eb(function(){var q=fa.transition;fa.transition={};try{k(_)}finally{fa.transition=q}},[_]),I},useTransition:function(){var _=xb(!1),b=_[0];return _=Gj.bind(null,_[1]),nc().memoizedState=_,[b,_]},useMutableSource:function(){},useSyncExternalStore:function(_,b,I){var k=xi,q=nc();if(Jr){if(I===void 0)throw Error(o(407));I=I()}else{if(I=b(),Hi===null)throw Error(o(349));Hh&30||zM(k,b,I)}q.memoizedState=I;var oe={value:I,getSnapshot:b};return q.queue=oe,Eb(GM.bind(null,k,oe,_),[_]),k.flags|=2048,Lm(9,HM.bind(null,k,oe,I,b),void 0,null),I},useId:function(){var _=nc(),b=Hi.identifierPrefix;if(Jr){var I=tc,k=ec;I=(k&~(1<<32-sr(k)-1)).toString(32)+I,b=":"+b+"R"+I,I=Pm++,0<I&&(b+="H"+I.toString(32)),b+=":"}else I=Hj++,b=":"+b+"r"+I.toString(32)+":";return _.memoizedState=b},unstable_isNewReconciler:!1},$j={readContext:Pi,useCallback:qM,useContext:Pi,useEffect:Nm,useImperativeHandle:YM,useInsertionEffect:jM,useLayoutEffect:$M,useMemo:KM,useReducer:cv,useRef:WM,useState:function(){return cv(af)},useDebugValue:_b,useDeferredValue:function(_){var b=cv(af),I=b[0],k=b[1];return Nm(function(){var q=fa.transition;fa.transition={};try{k(_)}finally{fa.transition=q}},[_]),I},useTransition:function(){var _=cv(af)[0],b=Sl().memoizedState;return[_,b]},useMutableSource:FM,useSyncExternalStore:UM,useId:JM,unstable_isNewReconciler:!1},Xj={readContext:Pi,useCallback:qM,useContext:Pi,useEffect:Nm,useImperativeHandle:YM,useInsertionEffect:jM,useLayoutEffect:$M,useMemo:KM,useReducer:uv,useRef:WM,useState:function(){return uv(af)},useDebugValue:_b,useDeferredValue:function(_){var b=uv(af),I=b[0],k=b[1];return Nm(function(){var q=fa.transition;fa.transition={};try{k(_)}finally{fa.transition=q}},[_]),I},useTransition:function(){var _=uv(af)[0],b=Sl().memoizedState;return[_,b]},useMutableSource:FM,useSyncExternalStore:UM,useId:JM,unstable_isNewReconciler:!1};function bb(_,b){try{var I="",k=b;do I+=rf(k),k=k.return;while(k);var q=I}catch(oe){q=`
Error generating stack: `+oe.message+`
`+oe.stack}return{value:_,source:b,stack:q}}function Ab(_,b){try{console.error(b.value)}catch(I){setTimeout(function(){throw I})}}var Yj=typeof WeakMap=="function"?WeakMap:Map;function n6(_,b,I){I=Zl(-1,I),I.tag=3,I.payload={element:null};var k=b.value;return I.callback=function(){Rv||(Rv=!0,Hb=k),Ab(_,b)},I}function r6(_,b,I){I=Zl(-1,I),I.tag=3;var k=_.type.getDerivedStateFromError;if(typeof k=="function"){var q=b.value;I.payload=function(){return k(q)},I.callback=function(){Ab(_,b)}}var oe=_.stateNode;return oe!==null&&typeof oe.componentDidCatch=="function"&&(I.callback=function(){Ab(_,b),typeof k!="function"&&(Zc===null?Zc=new Set([this]):Zc.add(this));var De=b.stack;this.componentDidCatch(b.value,{componentStack:De!==null?De:""})}),I}function i6(_,b,I){var k=_.pingCache;if(k===null){k=_.pingCache=new Yj;var q=new Set;k.set(b,q)}else q=k.get(b),q===void 0&&(q=new Set,k.set(b,q));q.has(I)||(q.add(I),_=l$.bind(null,_,b,I),b.then(_,_))}function s6(_){do{var b;if((b=_.tag===13)&&(b=_.memoizedState,b=b!==null?b.dehydrated!==null:!0),b)return _;_=_.return}while(_!==null);return null}function o6(_,b,I,k,q){return _.mode&1?(_.flags|=65536,_.lanes=q,_):(_===b?_.flags|=65536:(_.flags|=128,I.flags|=131072,I.flags&=-52805,I.tag===1&&(I.alternate===null?I.tag=17:(b=Zl(-1,1),b.tag=2,Qc(I,b))),I.lanes|=1),_)}function Cl(_){_.flags|=4}function a6(_,b){if(_!==null&&_.child===b.child)return!0;if(b.flags&16)return!1;for(_=b.child;_!==null;){if(_.flags&12854||_.subtreeFlags&12854)return!1;_=_.sibling}return!0}var Om,Dm,pv,mv;if(Me)Om=function(_,b){for(var I=b.child;I!==null;){if(I.tag===5||I.tag===6)se(_,I.stateNode);else if(I.tag!==4&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===b)break;for(;I.sibling===null;){if(I.return===null||I.return===b)return;I=I.return}I.sibling.return=I.return,I=I.sibling}},Dm=function(){},pv=function(_,b,I,k,q){if(_=_.memoizedProps,_!==k){var oe=b.stateNode,De=wl(ua.current);I=Z(oe,I,_,k,q,De),(b.updateQueue=I)&&Cl(b)}},mv=function(_,b,I,k){I!==k&&Cl(b)};else if(he){Om=function(_,b,I,k){for(var q=b.child;q!==null;){if(q.tag===5){var oe=q.stateNode;I&&k&&(oe=$t(oe,q.type,q.memoizedProps,q)),se(_,oe)}else if(q.tag===6)oe=q.stateNode,I&&k&&(oe=Nn(oe,q.memoizedProps,q)),se(_,oe);else if(q.tag!==4){if(q.tag===22&&q.memoizedState!==null)oe=q.child,oe!==null&&(oe.return=q),Om(_,q,!0,!0);else if(q.child!==null){q.child.return=q,q=q.child;continue}}if(q===b)break;for(;q.sibling===null;){if(q.return===null||q.return===b)return;q=q.return}q.sibling.return=q.return,q=q.sibling}};var l6=function(_,b,I,k){for(var q=b.child;q!==null;){if(q.tag===5){var oe=q.stateNode;I&&k&&(oe=$t(oe,q.type,q.memoizedProps,q)),It(_,oe)}else if(q.tag===6)oe=q.stateNode,I&&k&&(oe=Nn(oe,q.memoizedProps,q)),It(_,oe);else if(q.tag!==4){if(q.tag===22&&q.memoizedState!==null)oe=q.child,oe!==null&&(oe.return=q),l6(_,q,!0,!0);else if(q.child!==null){q.child.return=q,q=q.child;continue}}if(q===b)break;for(;q.sibling===null;){if(q.return===null||q.return===b)return;q=q.return}q.sibling.return=q.return,q=q.sibling}};Dm=function(_,b){var I=b.stateNode;if(!a6(_,b)){_=I.containerInfo;var k=st(_);l6(k,b,!1,!1),I.pendingChildren=k,Cl(b),Ht(_,k)}},pv=function(_,b,I,k,q){var oe=_.stateNode,De=_.memoizedProps;if((_=a6(_,b))&&De===k)b.stateNode=oe;else{var Qe=b.stateNode,Tt=wl(ua.current),Gt=null;De!==k&&(Gt=Z(Qe,I,De,k,q,Tt)),_&&Gt===null?b.stateNode=oe:(oe=St(oe,Gt,I,De,k,b,_,Qe),re(oe,I,k,q,Tt)&&Cl(b),b.stateNode=oe,_?Cl(b):Om(oe,b,!1,!1))}},mv=function(_,b,I,k){I!==k?(_=wl(Uh.current),I=wl(ua.current),b.stateNode=W(k,_,I,b),Cl(b)):b.stateNode=_.stateNode}}else Dm=function(){},pv=function(){},mv=function(){};function Bm(_,b){if(!Jr)switch(_.tailMode){case"hidden":b=_.tail;for(var I=null;b!==null;)b.alternate!==null&&(I=b),b=b.sibling;I===null?_.tail=null:I.sibling=null;break;case"collapsed":I=_.tail;for(var k=null;I!==null;)I.alternate!==null&&(k=I),I=I.sibling;k===null?b||_.tail===null?_.tail=null:_.tail.sibling=null:k.sibling=null}}function Ls(_){var b=_.alternate!==null&&_.alternate.child===_.child,I=0,k=0;if(b)for(var q=_.child;q!==null;)I|=q.lanes|q.childLanes,k|=q.subtreeFlags&14680064,k|=q.flags&14680064,q.return=_,q=q.sibling;else for(q=_.child;q!==null;)I|=q.lanes|q.childLanes,k|=q.subtreeFlags,k|=q.flags,q.return=_,q=q.sibling;return _.subtreeFlags|=k,_.childLanes=I,b}function qj(_,b,I){var k=b.pendingProps;switch(lb(b),b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ls(b),null;case 1:return ar(b.type)&&Bn(),Ls(b),null;case 3:return k=b.stateNode,zh(),jt(yn),jt(fn),mb(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(_===null||_.child===null)&&(Sm(b)?Cl(b):_===null||_.memoizedState.isDehydrated&&!(b.flags&256)||(b.flags|=1024,Xa!==null&&(Wb(Xa),Xa=null))),Dm(_,b),Ls(b),null;case 5:db(b),I=wl(Uh.current);var q=b.type;if(_!==null&&b.stateNode!=null)pv(_,b,q,k,I),_.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!k){if(b.stateNode===null)throw Error(o(166));return Ls(b),null}if(_=wl(ua.current),Sm(b)){if(!Oe)throw Error(o(175));_=pe(b.stateNode,b.type,b.memoizedProps,I,_,b,!wm),b.updateQueue=_,_!==null&&Cl(b)}else{var oe=P(q,k,I,_,b);Om(oe,b,!1,!1),b.stateNode=oe,re(oe,q,k,I,_)&&Cl(b)}b.ref!==null&&(b.flags|=512,b.flags|=2097152)}return Ls(b),null;case 6:if(_&&b.stateNode!=null)mv(_,b,_.memoizedProps,k);else{if(typeof k!="string"&&b.stateNode===null)throw Error(o(166));if(_=wl(Uh.current),I=wl(ua.current),Sm(b)){if(!Oe)throw Error(o(176));if(_=b.stateNode,k=b.memoizedProps,(I=Ee(_,k,b,!wm))&&(q=Ho,q!==null))switch(oe=(q.mode&1)!==0,q.tag){case 3:ot(q.stateNode.containerInfo,_,k,oe);break;case 5:pt(q.type,q.memoizedProps,q.stateNode,_,k,oe)}I&&Cl(b)}else b.stateNode=W(k,_,I,b)}return Ls(b),null;case 13:if(jt(ui),k=b.memoizedState,Jr&&Go!==null&&b.mode&1&&!(b.flags&128)){for(_=Go;_;)_=Pr(_);return kh(),b.flags|=98560,b}if(k!==null&&k.dehydrated!==null){if(k=Sm(b),_===null){if(!k)throw Error(o(318));if(!Oe)throw Error(o(344));if(_=b.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));je(_,b)}else kh(),!(b.flags&128)&&(b.memoizedState=null),b.flags|=4;return Ls(b),null}return Xa!==null&&(Wb(Xa),Xa=null),b.flags&128?(b.lanes=I,b):(k=k!==null,I=!1,_===null?Sm(b):I=_.memoizedState!==null,k&&!I&&(b.child.flags|=8192,b.mode&1&&(_===null||ui.current&1?Ji===0&&(Ji=3):$b())),b.updateQueue!==null&&(b.flags|=4),Ls(b),null);case 4:return zh(),Dm(_,b),_===null&&Te(b.stateNode.containerInfo),Ls(b),null;case 10:return as(b.type._context),Ls(b),null;case 17:return ar(b.type)&&Bn(),Ls(b),null;case 19:if(jt(ui),q=b.memoizedState,q===null)return Ls(b),null;if(k=(b.flags&128)!==0,oe=q.rendering,oe===null)if(k)Bm(q,!1);else{if(Ji!==0||_!==null&&_.flags&128)for(_=b.child;_!==null;){if(oe=ov(_),oe!==null){for(b.flags|=128,Bm(q,!1),_=oe.updateQueue,_!==null&&(b.updateQueue=_,b.flags|=4),b.subtreeFlags=0,_=I,k=b.child;k!==null;)I=k,q=_,I.flags&=14680066,oe=I.alternate,oe===null?(I.childLanes=0,I.lanes=q,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=oe.childLanes,I.lanes=oe.lanes,I.child=oe.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=oe.memoizedProps,I.memoizedState=oe.memoizedState,I.updateQueue=oe.updateQueue,I.type=oe.type,q=oe.dependencies,I.dependencies=q===null?null:{lanes:q.lanes,firstContext:q.firstContext}),k=k.sibling;return Dt(ui,ui.current&1|2),b.child}_=_.sibling}q.tail!==null&&vt()>zb&&(b.flags|=128,k=!0,Bm(q,!1),b.lanes=4194304)}else{if(!k)if(_=ov(oe),_!==null){if(b.flags|=128,k=!0,_=_.updateQueue,_!==null&&(b.updateQueue=_,b.flags|=4),Bm(q,!0),q.tail===null&&q.tailMode==="hidden"&&!oe.alternate&&!Jr)return Ls(b),null}else 2*vt()-q.renderingStartTime>zb&&I!==1073741824&&(b.flags|=128,k=!0,Bm(q,!1),b.lanes=4194304);q.isBackwards?(oe.sibling=b.child,b.child=oe):(_=q.last,_!==null?_.sibling=oe:b.child=oe,q.last=oe)}return q.tail!==null?(b=q.tail,q.rendering=b,q.tail=b.sibling,q.renderingStartTime=vt(),b.sibling=null,_=ui.current,Dt(ui,k?_&1|2:_&1),b):(Ls(b),null);case 22:case 23:return jb(),k=b.memoizedState!==null,_!==null&&_.memoizedState!==null!==k&&(b.flags|=8192),k&&b.mode&1?Wo&1073741824&&(Ls(b),Me&&b.subtreeFlags&6&&(b.flags|=8192)):Ls(b),null;case 24:return null;case 25:return null}throw Error(o(156,b.tag))}var Kj=a.ReactCurrentOwner,Vo=!1;function eo(_,b,I,k){b.child=_===null?BM(b,null,I,k):Fh(b,_.child,I,k)}function c6(_,b,I,k,q){I=I.render;var oe=b.ref;return Ii(b,q),k=vb(_,b,I,k,oe,q),I=yb(),_!==null&&!Vo?(b.updateQueue=_.updateQueue,b.flags&=-2053,_.lanes&=~q,rc(_,b,q)):(Jr&&I&&ab(b),b.flags|=1,eo(_,b,k,q),b.child)}function u6(_,b,I,k,q){if(_===null){var oe=I.type;return typeof oe=="function"&&!Xb(oe)&&oe.defaultProps===void 0&&I.compare===null&&I.defaultProps===void 0?(b.tag=15,b.type=oe,f6(_,b,oe,k,q)):(_=Bv(I.type,null,k,b,b.mode,q),_.ref=b.ref,_.return=b,b.child=_)}if(oe=_.child,!(_.lanes&q)){var De=oe.memoizedProps;if(I=I.compare,I=I!==null?I:nf,I(De,k)&&_.ref===b.ref)return rc(_,b,q)}return b.flags|=1,_=ru(oe,k),_.ref=b.ref,_.return=b,b.child=_}function f6(_,b,I,k,q){if(_!==null&&nf(_.memoizedProps,k)&&_.ref===b.ref)if(Vo=!1,(_.lanes&q)!==0)_.flags&131072&&(Vo=!0);else return b.lanes=_.lanes,rc(_,b,q);return Tb(_,b,I,k,q)}function h6(_,b,I){var k=b.pendingProps,q=k.children,oe=_!==null?_.memoizedState:null;if(k.mode==="hidden")if(!(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null},Dt(Gh,Wo),Wo|=I;else if(I&1073741824)b.memoizedState={baseLanes:0,cachePool:null},k=oe!==null?oe.baseLanes:I,Dt(Gh,Wo),Wo|=k;else return _=oe!==null?oe.baseLanes|I:I,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:_,cachePool:null},b.updateQueue=null,Dt(Gh,Wo),Wo|=_,null;else oe!==null?(k=oe.baseLanes|I,b.memoizedState=null):k=I,Dt(Gh,Wo),Wo|=k;return eo(_,b,q,I),b.child}function d6(_,b){var I=b.ref;(_===null&&I!==null||_!==null&&_.ref!==I)&&(b.flags|=512,b.flags|=2097152)}function Tb(_,b,I,k,q){var oe=ar(I)?Jn:fn.current;return oe=or(b,oe),Ii(b,q),I=vb(_,b,I,k,oe,q),k=yb(),_!==null&&!Vo?(b.updateQueue=_.updateQueue,b.flags&=-2053,_.lanes&=~q,rc(_,b,q)):(Jr&&k&&ab(b),b.flags|=1,eo(_,b,I,q),b.child)}function p6(_,b,I,k,q){if(ar(I)){var oe=!0;En(b)}else oe=!1;if(Ii(b,q),b.stateNode===null)_!==null&&(_.alternate=null,b.alternate=null,b.flags|=2),MM(b,I,k),ob(b,I,k,q),k=!0;else if(_===null){var De=b.stateNode,Qe=b.memoizedProps;De.props=Qe;var Tt=De.context,Gt=I.contextType;typeof Gt=="object"&&Gt!==null?Gt=Pi(Gt):(Gt=ar(I)?Jn:fn.current,Gt=or(b,Gt));var tn=I.getDerivedStateFromProps,Un=typeof tn=="function"||typeof De.getSnapshotBeforeUpdate=="function";Un||typeof De.UNSAFE_componentWillReceiveProps!="function"&&typeof De.componentWillReceiveProps!="function"||(Qe!==k||Tt!==Gt)&&RM(b,De,k,Gt),Jc=!1;var bn=b.memoizedState;De.state=bn,tv(b,k,De,q),Tt=b.memoizedState,Qe!==k||bn!==Tt||yn.current||Jc?(typeof tn=="function"&&(sb(b,I,tn,k),Tt=b.memoizedState),(Qe=Jc||CM(b,I,Qe,k,bn,Tt,Gt))?(Un||typeof De.UNSAFE_componentWillMount!="function"&&typeof De.componentWillMount!="function"||(typeof De.componentWillMount=="function"&&De.componentWillMount(),typeof De.UNSAFE_componentWillMount=="function"&&De.UNSAFE_componentWillMount()),typeof De.componentDidMount=="function"&&(b.flags|=4194308)):(typeof De.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=k,b.memoizedState=Tt),De.props=k,De.state=Tt,De.context=Gt,k=Qe):(typeof De.componentDidMount=="function"&&(b.flags|=4194308),k=!1)}else{De=b.stateNode,AM(_,b),Qe=b.memoizedProps,Gt=b.type===b.elementType?Qe:Qs(b.type,Qe),De.props=Gt,Un=b.pendingProps,bn=De.context,Tt=I.contextType,typeof Tt=="object"&&Tt!==null?Tt=Pi(Tt):(Tt=ar(I)?Jn:fn.current,Tt=or(b,Tt));var Br=I.getDerivedStateFromProps;(tn=typeof Br=="function"||typeof De.getSnapshotBeforeUpdate=="function")||typeof De.UNSAFE_componentWillReceiveProps!="function"&&typeof De.componentWillReceiveProps!="function"||(Qe!==Un||bn!==Tt)&&RM(b,De,k,Tt),Jc=!1,bn=b.memoizedState,De.state=bn,tv(b,k,De,q);var mn=b.memoizedState;Qe!==Un||bn!==mn||yn.current||Jc?(typeof Br=="function"&&(sb(b,I,Br,k),mn=b.memoizedState),(Gt=Jc||CM(b,I,Gt,k,bn,mn,Tt)||!1)?(tn||typeof De.UNSAFE_componentWillUpdate!="function"&&typeof De.componentWillUpdate!="function"||(typeof De.componentWillUpdate=="function"&&De.componentWillUpdate(k,mn,Tt),typeof De.UNSAFE_componentWillUpdate=="function"&&De.UNSAFE_componentWillUpdate(k,mn,Tt)),typeof De.componentDidUpdate=="function"&&(b.flags|=4),typeof De.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof De.componentDidUpdate!="function"||Qe===_.memoizedProps&&bn===_.memoizedState||(b.flags|=4),typeof De.getSnapshotBeforeUpdate!="function"||Qe===_.memoizedProps&&bn===_.memoizedState||(b.flags|=1024),b.memoizedProps=k,b.memoizedState=mn),De.props=k,De.state=mn,De.context=Tt,k=Gt):(typeof De.componentDidUpdate!="function"||Qe===_.memoizedProps&&bn===_.memoizedState||(b.flags|=4),typeof De.getSnapshotBeforeUpdate!="function"||Qe===_.memoizedProps&&bn===_.memoizedState||(b.flags|=1024),k=!1)}return wb(_,b,I,k,oe,q)}function wb(_,b,I,k,q,oe){d6(_,b);var De=(b.flags&128)!==0;if(!k&&!De)return q&&wn(b,I,!1),rc(_,b,oe);k=b.stateNode,Kj.current=b;var Qe=De&&typeof I.getDerivedStateFromError!="function"?null:k.render();return b.flags|=1,_!==null&&De?(b.child=Fh(b,_.child,null,oe),b.child=Fh(b,null,Qe,oe)):eo(_,b,Qe,oe),b.memoizedState=k.state,q&&wn(b,I,!0),b.child}function m6(_){var b=_.stateNode;b.pendingContext?Rn(_,b.pendingContext,b.pendingContext!==b.context):b.context&&Rn(_,b.context,!1),hb(_,b.containerInfo)}function g6(_,b,I,k,q){return kh(),fb(q),b.flags|=256,eo(_,b,I,k),b.child}var gv={dehydrated:null,treeContext:null,retryLane:0};function vv(_){return{baseLanes:_,cachePool:null}}function v6(_,b,I){var k=b.pendingProps,q=ui.current,oe=!1,De=(b.flags&128)!==0,Qe;if((Qe=De)||(Qe=_!==null&&_.memoizedState===null?!1:(q&2)!==0),Qe?(oe=!0,b.flags&=-129):(_===null||_.memoizedState!==null)&&(q|=1),Dt(ui,q&1),_===null)return ub(b),_=b.memoizedState,_!==null&&(_=_.dehydrated,_!==null)?(b.mode&1?Ri(_)?b.lanes=8:b.lanes=1073741824:b.lanes=1,null):(q=k.children,_=k.fallback,oe?(k=b.mode,oe=b.child,q={mode:"hidden",children:q},!(k&1)&&oe!==null?(oe.childLanes=0,oe.pendingProps=q):oe=kv(q,k,0,null),_=df(_,k,I,null),oe.return=b,_.return=b,oe.sibling=_,b.child=oe,b.child.memoizedState=vv(I),b.memoizedState=gv,_):Sb(b,q));if(q=_.memoizedState,q!==null){if(Qe=q.dehydrated,Qe!==null){if(De)return b.flags&256?(b.flags&=-257,yv(_,b,I,Error(o(422)))):b.memoizedState!==null?(b.child=_.child,b.flags|=128,null):(oe=k.fallback,q=b.mode,k=kv({mode:"visible",children:k.children},q,0,null),oe=df(oe,q,I,null),oe.flags|=2,k.return=b,oe.return=b,k.sibling=oe,b.child=k,b.mode&1&&Fh(b,_.child,null,I),b.child.memoizedState=vv(I),b.memoizedState=gv,oe);if(!(b.mode&1))b=yv(_,b,I,null);else if(Ri(Qe))b=yv(_,b,I,Error(o(419)));else if(k=(I&_.childLanes)!==0,Vo||k){if(k=Hi,k!==null){switch(I&-I){case 4:oe=2;break;case 16:oe=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:oe=32;break;case 536870912:oe=268435456;break;default:oe=0}k=oe&(k.suspendedLanes|I)?0:oe,k!==0&&k!==q.retryLane&&(q.retryLane=k,ha(_,k,-1))}$b(),b=yv(_,b,I,Error(o(421)))}else ai(Qe)?(b.flags|=128,b.child=_.child,b=c$.bind(null,_),Vr(Qe,b),b=null):(I=q.treeContext,Oe&&(Go=ss(Qe),Ho=b,Jr=!0,Xa=null,wm=!1,I!==null&&(la[ca++]=ec,la[ca++]=tc,la[ca++]=sf,ec=I.id,tc=I.overflow,sf=b)),b=Sb(b,b.pendingProps.children),b.flags|=4096);return b}return oe?(k=x6(_,b,k.children,k.fallback,I),oe=b.child,q=_.child.memoizedState,oe.memoizedState=q===null?vv(I):{baseLanes:q.baseLanes|I,cachePool:null},oe.childLanes=_.childLanes&~I,b.memoizedState=gv,k):(I=y6(_,b,k.children,I),b.memoizedState=null,I)}return oe?(k=x6(_,b,k.children,k.fallback,I),oe=b.child,q=_.child.memoizedState,oe.memoizedState=q===null?vv(I):{baseLanes:q.baseLanes|I,cachePool:null},oe.childLanes=_.childLanes&~I,b.memoizedState=gv,k):(I=y6(_,b,k.children,I),b.memoizedState=null,I)}function Sb(_,b){return b=kv({mode:"visible",children:b},_.mode,0,null),b.return=_,_.child=b}function y6(_,b,I,k){var q=_.child;return _=q.sibling,I=ru(q,{mode:"visible",children:I}),!(b.mode&1)&&(I.lanes=k),I.return=b,I.sibling=null,_!==null&&(k=b.deletions,k===null?(b.deletions=[_],b.flags|=16):k.push(_)),b.child=I}function x6(_,b,I,k,q){var oe=b.mode;_=_.child;var De=_.sibling,Qe={mode:"hidden",children:I};return!(oe&1)&&b.child!==_?(I=b.child,I.childLanes=0,I.pendingProps=Qe,b.deletions=null):(I=ru(_,Qe),I.subtreeFlags=_.subtreeFlags&14680064),De!==null?k=ru(De,k):(k=df(k,oe,q,null),k.flags|=2),k.return=b,I.return=b,I.sibling=k,b.child=I,k}function yv(_,b,I,k){return k!==null&&fb(k),Fh(b,_.child,null,I),_=Sb(b,b.pendingProps.children),_.flags|=2,b.memoizedState=null,_}function E6(_,b,I){_.lanes|=b;var k=_.alternate;k!==null&&(k.lanes|=b),Zs(_.return,b,I)}function Cb(_,b,I,k,q){var oe=_.memoizedState;oe===null?_.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:k,tail:I,tailMode:q}:(oe.isBackwards=b,oe.rendering=null,oe.renderingStartTime=0,oe.last=k,oe.tail=I,oe.tailMode=q)}function _6(_,b,I){var k=b.pendingProps,q=k.revealOrder,oe=k.tail;if(eo(_,b,k.children,I),k=ui.current,k&2)k=k&1|2,b.flags|=128;else{if(_!==null&&_.flags&128)e:for(_=b.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&E6(_,I,b);else if(_.tag===19)E6(_,I,b);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===b)break e;for(;_.sibling===null;){if(_.return===null||_.return===b)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}k&=1}if(Dt(ui,k),!(b.mode&1))b.memoizedState=null;else switch(q){case"forwards":for(I=b.child,q=null;I!==null;)_=I.alternate,_!==null&&ov(_)===null&&(q=I),I=I.sibling;I=q,I===null?(q=b.child,b.child=null):(q=I.sibling,I.sibling=null),Cb(b,!1,q,I,oe);break;case"backwards":for(I=null,q=b.child,b.child=null;q!==null;){if(_=q.alternate,_!==null&&ov(_)===null){b.child=q;break}_=q.sibling,q.sibling=I,I=q,q=_}Cb(b,!0,I,null,oe);break;case"together":Cb(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function rc(_,b,I){if(_!==null&&(b.dependencies=_.dependencies),Vh|=b.lanes,!(I&b.childLanes))return null;if(_!==null&&b.child!==_.child)throw Error(o(153));if(b.child!==null){for(_=b.child,I=ru(_,_.pendingProps),b.child=I,I.return=b;_.sibling!==null;)_=_.sibling,I=I.sibling=ru(_,_.pendingProps),I.return=b;I.sibling=null}return b.child}function Jj(_,b,I){switch(b.tag){case 3:m6(b),kh();break;case 5:kM(b);break;case 1:ar(b.type)&&En(b);break;case 4:hb(b,b.stateNode.containerInfo);break;case 10:Zg(b,b.type._context,b.memoizedProps.value);break;case 13:var k=b.memoizedState;if(k!==null)return k.dehydrated!==null?(Dt(ui,ui.current&1),b.flags|=128,null):I&b.child.childLanes?v6(_,b,I):(Dt(ui,ui.current&1),_=rc(_,b,I),_!==null?_.sibling:null);Dt(ui,ui.current&1);break;case 19:if(k=(I&b.childLanes)!==0,_.flags&128){if(k)return _6(_,b,I);b.flags|=128}var q=b.memoizedState;if(q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),Dt(ui,ui.current),k)break;return null;case 22:case 23:return b.lanes=0,h6(_,b,I)}return rc(_,b,I)}function Qj(_,b){switch(lb(b),b.tag){case 1:return ar(b.type)&&Bn(),_=b.flags,_&65536?(b.flags=_&-65537|128,b):null;case 3:return zh(),jt(yn),jt(fn),mb(),_=b.flags,_&65536&&!(_&128)?(b.flags=_&-65537|128,b):null;case 5:return db(b),null;case 13:if(jt(ui),_=b.memoizedState,_!==null&&_.dehydrated!==null){if(b.alternate===null)throw Error(o(340));kh()}return _=b.flags,_&65536?(b.flags=_&-65537|128,b):null;case 19:return jt(ui),null;case 4:return zh(),null;case 10:return as(b.type._context),null;case 22:case 23:return jb(),null;case 24:return null;default:return null}}var xv=!1,lf=!1,Zj=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function Ev(_,b){var I=_.ref;if(I!==null)if(typeof I=="function")try{I(null)}catch(k){Ao(_,b,k)}else I.current=null}function Mb(_,b,I){try{I()}catch(k){Ao(_,b,k)}}var b6=!1;function e$(_,b){for(ee(_.containerInfo),Kt=b;Kt!==null;)if(_=Kt,b=_.child,(_.subtreeFlags&1028)!==0&&b!==null)b.return=_,Kt=b;else for(;Kt!==null;){_=Kt;try{var I=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var k=I.memoizedProps,q=I.memoizedState,oe=_.stateNode,De=oe.getSnapshotBeforeUpdate(_.elementType===_.type?k:Qs(_.type,k),q);oe.__reactInternalSnapshotBeforeUpdate=De}break;case 3:Me&&Ft(_.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Qe){Ao(_,_.return,Qe)}if(b=_.sibling,b!==null){b.return=_.return,Kt=b;break}Kt=_.return}return I=b6,b6=!1,I}function cf(_,b,I){var k=b.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var q=k=k.next;do{if((q.tag&_)===_){var oe=q.destroy;q.destroy=void 0,oe!==void 0&&Mb(b,I,oe)}q=q.next}while(q!==k)}}function km(_,b){if(b=b.updateQueue,b=b!==null?b.lastEffect:null,b!==null){var I=b=b.next;do{if((I.tag&_)===_){var k=I.create;I.destroy=k()}I=I.next}while(I!==b)}}function Rb(_){var b=_.ref;if(b!==null){var I=_.stateNode;switch(_.tag){case 5:_=U(I);break;default:_=I}typeof b=="function"?b(_):b.current=_}}function A6(_,b,I){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(en,b)}catch{}switch(b.tag){case 0:case 11:case 14:case 15:if(_=b.updateQueue,_!==null&&(_=_.lastEffect,_!==null)){var k=_=_.next;do{var q=k,oe=q.destroy;q=q.tag,oe!==void 0&&(q&2||q&4)&&Mb(b,I,oe),k=k.next}while(k!==_)}break;case 1:if(Ev(b,I),_=b.stateNode,typeof _.componentWillUnmount=="function")try{_.props=b.memoizedProps,_.state=b.memoizedState,_.componentWillUnmount()}catch(De){Ao(b,I,De)}break;case 5:Ev(b,I);break;case 4:Me?R6(_,b,I):he&&he&&(b=b.stateNode.containerInfo,I=st(b),zt(b,I))}}function T6(_,b,I){for(var k=b;;)if(A6(_,k,I),k.child===null||Me&&k.tag===4){if(k===b)break;for(;k.sibling===null;){if(k.return===null||k.return===b)return;k=k.return}k.sibling.return=k.return,k=k.sibling}else k.child.return=k,k=k.child}function w6(_){var b=_.alternate;b!==null&&(_.alternate=null,w6(b)),_.child=null,_.deletions=null,_.sibling=null,_.tag===5&&(b=_.stateNode,b!==null&&$e(b)),_.stateNode=null,_.return=null,_.dependencies=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.stateNode=null,_.updateQueue=null}function S6(_){return _.tag===5||_.tag===3||_.tag===4}function C6(_){e:for(;;){for(;_.sibling===null;){if(_.return===null||S6(_.return))return null;_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(_.flags&2||_.child===null||_.tag===4)continue e;_.child.return=_,_=_.child}if(!(_.flags&2))return _.stateNode}}function M6(_){if(Me){e:{for(var b=_.return;b!==null;){if(S6(b))break e;b=b.return}throw Error(o(160))}var I=b;switch(I.tag){case 5:b=I.stateNode,I.flags&32&&(tt(b),I.flags&=-33),I=C6(_),Pb(_,I,b);break;case 3:case 4:b=I.stateNode.containerInfo,I=C6(_),Ib(_,I,b);break;default:throw Error(o(161))}}}function Ib(_,b,I){var k=_.tag;if(k===5||k===6)_=_.stateNode,b?Ve(I,_,b):F(I,_);else if(k!==4&&(_=_.child,_!==null))for(Ib(_,b,I),_=_.sibling;_!==null;)Ib(_,b,I),_=_.sibling}function Pb(_,b,I){var k=_.tag;if(k===5||k===6)_=_.stateNode,b?ke(I,_,b):z(I,_);else if(k!==4&&(_=_.child,_!==null))for(Pb(_,b,I),_=_.sibling;_!==null;)Pb(_,b,I),_=_.sibling}function R6(_,b,I){for(var k=b,q=!1,oe,De;;){if(!q){q=k.return;e:for(;;){if(q===null)throw Error(o(160));switch(oe=q.stateNode,q.tag){case 5:De=!1;break e;case 3:oe=oe.containerInfo,De=!0;break e;case 4:oe=oe.containerInfo,De=!0;break e}q=q.return}q=!0}if(k.tag===5||k.tag===6)T6(_,k,I),De?Ye(oe,k.stateNode):Ce(oe,k.stateNode);else if(k.tag===18)De?Fe(oe,k.stateNode):Ge(oe,k.stateNode);else if(k.tag===4){if(k.child!==null){oe=k.stateNode.containerInfo,De=!0,k.child.return=k,k=k.child;continue}}else if(A6(_,k,I),k.child!==null){k.child.return=k,k=k.child;continue}if(k===b)break;for(;k.sibling===null;){if(k.return===null||k.return===b)return;k=k.return,k.tag===4&&(q=!1)}k.sibling.return=k.return,k=k.sibling}}function Lb(_,b){if(Me){switch(b.tag){case 0:case 11:case 14:case 15:cf(3,b,b.return),km(3,b),cf(5,b,b.return);return;case 1:return;case 5:var I=b.stateNode;if(I!=null){var k=b.memoizedProps;_=_!==null?_.memoizedProps:k;var q=b.type,oe=b.updateQueue;b.updateQueue=null,oe!==null&&Le(I,oe,q,_,k,b)}return;case 6:if(b.stateNode===null)throw Error(o(162));I=b.memoizedProps,ae(b.stateNode,_!==null?_.memoizedProps:I,I);return;case 3:Oe&&_!==null&&_.memoizedState.isDehydrated&&we(b.stateNode.containerInfo);return;case 12:return;case 13:_v(b);return;case 19:_v(b);return;case 17:return}throw Error(o(163))}switch(b.tag){case 0:case 11:case 14:case 15:cf(3,b,b.return),km(3,b),cf(5,b,b.return);return;case 12:return;case 13:_v(b);return;case 19:_v(b);return;case 3:Oe&&_!==null&&_.memoizedState.isDehydrated&&we(b.stateNode.containerInfo);break;case 22:case 23:return}e:if(he){switch(b.tag){case 1:case 5:case 6:break e;case 3:case 4:b=b.stateNode,zt(b.containerInfo,b.pendingChildren);break e}throw Error(o(163))}}function _v(_){var b=_.updateQueue;if(b!==null){_.updateQueue=null;var I=_.stateNode;I===null&&(I=_.stateNode=new Zj),b.forEach(function(k){var q=u$.bind(null,_,k);I.has(k)||(I.add(k),k.then(q,q))})}}function t$(_,b){for(Kt=b;Kt!==null;){b=Kt;var I=b.deletions;if(I!==null)for(var k=0;k<I.length;k++){var q=I[k];try{var oe=_;Me?R6(oe,q,b):T6(oe,q,b);var De=q.alternate;De!==null&&(De.return=null),q.return=null}catch(pn){Ao(q,b,pn)}}if(I=b.child,b.subtreeFlags&12854&&I!==null)I.return=b,Kt=I;else for(;Kt!==null;){b=Kt;try{var Qe=b.flags;if(Qe&32&&Me&&tt(b.stateNode),Qe&512){var Tt=b.alternate;if(Tt!==null){var Gt=Tt.ref;Gt!==null&&(typeof Gt=="function"?Gt(null):Gt.current=null)}}if(Qe&8192)switch(b.tag){case 13:if(b.memoizedState!==null){var tn=b.alternate;(tn===null||tn.memoizedState===null)&&(Ub=vt())}break;case 22:var Un=b.memoizedState!==null,bn=b.alternate,Br=bn!==null&&bn.memoizedState!==null;if(I=b,Me){e:if(k=I,q=Un,oe=null,Me)for(var mn=k;;){if(mn.tag===5){if(oe===null){oe=mn;var Ns=mn.stateNode;q?it(Ns):Ze(mn.stateNode,mn.memoizedProps)}}else if(mn.tag===6){if(oe===null){var pa=mn.stateNode;q?dt(pa):Be(pa,mn.memoizedProps)}}else if((mn.tag!==22&&mn.tag!==23||mn.memoizedState===null||mn===k)&&mn.child!==null){mn.child.return=mn,mn=mn.child;continue}if(mn===k)break;for(;mn.sibling===null;){if(mn.return===null||mn.return===k)break e;oe===mn&&(oe=null),mn=mn.return}oe===mn&&(oe=null),mn.sibling.return=mn.return,mn=mn.sibling}}if(Un&&!Br&&I.mode&1){Kt=I;for(var ht=I.child;ht!==null;){for(I=Kt=ht;Kt!==null;){k=Kt;var nt=k.child;switch(k.tag){case 0:case 11:case 14:case 15:cf(4,k,k.return);break;case 1:Ev(k,k.return);var At=k.stateNode;if(typeof At.componentWillUnmount=="function"){var Jt=k.return;try{At.props=k.memoizedProps,At.state=k.memoizedState,At.componentWillUnmount()}catch(pn){Ao(k,Jt,pn)}}break;case 5:Ev(k,k.return);break;case 22:if(k.memoizedState!==null){L6(I);continue}}nt!==null?(nt.return=k,Kt=nt):L6(I)}ht=ht.sibling}}}switch(Qe&4102){case 2:M6(b),b.flags&=-3;break;case 6:M6(b),b.flags&=-3,Lb(b.alternate,b);break;case 4096:b.flags&=-4097;break;case 4100:b.flags&=-4097,Lb(b.alternate,b);break;case 4:Lb(b.alternate,b)}}catch(pn){Ao(b,b.return,pn)}if(I=b.sibling,I!==null){I.return=b.return,Kt=I;break}Kt=b.return}}}function n$(_,b,I){Kt=_,I6(_)}function I6(_,b,I){for(var k=(_.mode&1)!==0;Kt!==null;){var q=Kt,oe=q.child;if(q.tag===22&&k){var De=q.memoizedState!==null||xv;if(!De){var Qe=q.alternate,Tt=Qe!==null&&Qe.memoizedState!==null||lf;Qe=xv;var Gt=lf;if(xv=De,(lf=Tt)&&!Gt)for(Kt=q;Kt!==null;)De=Kt,Tt=De.child,De.tag===22&&De.memoizedState!==null?N6(q):Tt!==null?(Tt.return=De,Kt=Tt):N6(q);for(;oe!==null;)Kt=oe,I6(oe),oe=oe.sibling;Kt=q,xv=Qe,lf=Gt}P6(_)}else q.subtreeFlags&8772&&oe!==null?(oe.return=q,Kt=oe):P6(_)}}function P6(_){for(;Kt!==null;){var b=Kt;if(b.flags&8772){var I=b.alternate;try{if(b.flags&8772)switch(b.tag){case 0:case 11:case 15:lf||km(5,b);break;case 1:var k=b.stateNode;if(b.flags&4&&!lf)if(I===null)k.componentDidMount();else{var q=b.elementType===b.type?I.memoizedProps:Qs(b.type,I.memoizedProps);k.componentDidUpdate(q,I.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var oe=b.updateQueue;oe!==null&&wM(b,oe,k);break;case 3:var De=b.updateQueue;if(De!==null){if(I=null,b.child!==null)switch(b.child.tag){case 5:I=U(b.child.stateNode);break;case 1:I=b.child.stateNode}wM(b,De,I)}break;case 5:var Qe=b.stateNode;I===null&&b.flags&4&&ye(Qe,b.type,b.memoizedProps,b);break;case 6:break;case 4:break;case 12:break;case 13:if(Oe&&b.memoizedState===null){var Tt=b.alternate;if(Tt!==null){var Gt=Tt.memoizedState;if(Gt!==null){var tn=Gt.dehydrated;tn!==null&&Pe(tn)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}lf||b.flags&512&&Rb(b)}catch(Un){Ao(b,b.return,Un)}}if(b===_){Kt=null;break}if(I=b.sibling,I!==null){I.return=b.return,Kt=I;break}Kt=b.return}}function L6(_){for(;Kt!==null;){var b=Kt;if(b===_){Kt=null;break}var I=b.sibling;if(I!==null){I.return=b.return,Kt=I;break}Kt=b.return}}function N6(_){for(;Kt!==null;){var b=Kt;try{switch(b.tag){case 0:case 11:case 15:var I=b.return;try{km(4,b)}catch(Tt){Ao(b,I,Tt)}break;case 1:var k=b.stateNode;if(typeof k.componentDidMount=="function"){var q=b.return;try{k.componentDidMount()}catch(Tt){Ao(b,q,Tt)}}var oe=b.return;try{Rb(b)}catch(Tt){Ao(b,oe,Tt)}break;case 5:var De=b.return;try{Rb(b)}catch(Tt){Ao(b,De,Tt)}}}catch(Tt){Ao(b,b.return,Tt)}if(b===_){Kt=null;break}var Qe=b.sibling;if(Qe!==null){Qe.return=b.return,Kt=Qe;break}Kt=b.return}}var bv=0,Av=1,Tv=2,wv=3,Sv=4;if(typeof Symbol=="function"&&Symbol.for){var Fm=Symbol.for;bv=Fm("selector.component"),Av=Fm("selector.has_pseudo_class"),Tv=Fm("selector.role"),wv=Fm("selector.test_id"),Sv=Fm("selector.text")}function Nb(_){var b=be(_);if(b!=null){if(typeof b.memoizedProps["data-testname"]!="string")throw Error(o(364));return b}if(_=Xe(_),_===null)throw Error(o(362));return _.stateNode.current}function Ob(_,b){switch(b.$$typeof){case bv:if(_.type===b.value)return!0;break;case Av:e:{b=b.value,_=[_,0];for(var I=0;I<_.length;){var k=_[I++],q=_[I++],oe=b[q];if(k.tag!==5||!ie(k)){for(;oe!=null&&Ob(k,oe);)q++,oe=b[q];if(q===b.length){b=!0;break e}else for(k=k.child;k!==null;)_.push(k,q),k=k.sibling}}b=!1}return b;case Tv:if(_.tag===5&&Ae(_.stateNode,b.value))return!0;break;case Sv:if((_.tag===5||_.tag===6)&&(_=fe(_),_!==null&&0<=_.indexOf(b.value)))return!0;break;case wv:if(_.tag===5&&(_=_.memoizedProps["data-testname"],typeof _=="string"&&_.toLowerCase()===b.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Db(_){switch(_.$$typeof){case bv:return"<"+(M(_.value)||"Unknown")+">";case Av:return":has("+(Db(_)||"")+")";case Tv:return'[role="'+_.value+'"]';case Sv:return'"'+_.value+'"';case wv:return'[data-testname="'+_.value+'"]';default:throw Error(o(365))}}function O6(_,b){var I=[];_=[_,0];for(var k=0;k<_.length;){var q=_[k++],oe=_[k++],De=b[oe];if(q.tag!==5||!ie(q)){for(;De!=null&&Ob(q,De);)oe++,De=b[oe];if(oe===b.length)I.push(q);else for(q=q.child;q!==null;)_.push(q,oe),q=q.sibling}}return I}function Bb(_,b){if(!We)throw Error(o(363));_=Nb(_),_=O6(_,b),b=[],_=Array.from(_);for(var I=0;I<_.length;){var k=_[I++];if(k.tag===5)ie(k)||b.push(k.stateNode);else for(k=k.child;k!==null;)_.push(k),k=k.sibling}return b}var r$=Math.ceil,Cv=a.ReactCurrentDispatcher,kb=a.ReactCurrentOwner,Li=a.ReactCurrentBatchConfig,qn=0,Hi=null,Gi=null,_s=0,Wo=0,Gh=vn(0),Ji=0,Um=null,Vh=0,Mv=0,Fb=0,zm=null,_o=null,Ub=0,zb=1/0;function Wh(){zb=vt()+500}var Rv=!1,Hb=null,Zc=null,Iv=!1,eu=null,Pv=0,Hm=0,Gb=null,Lv=-1,Nv=0;function to(){return qn&6?vt():Lv!==-1?Lv:Lv=vt()}function tu(_){return _.mode&1?qn&2&&_s!==0?_s&-_s:tf.transition!==null?(Nv===0&&(_=Es,Es<<=1,!(Es&4194240)&&(Es=64),Nv=_),Nv):(_=ze,_!==0?_:Re()):1}function ha(_,b,I){if(50<Hm)throw Hm=0,Gb=null,Error(o(185));var k=Ov(_,b);return k===null?null:(V(k,b,I),(!(qn&2)||k!==Hi)&&(k===Hi&&(!(qn&2)&&(Mv|=b),Ji===4&&nu(k,_s)),bo(k,I),b===1&&qn===0&&!(_.mode&1)&&(Wh(),Ks&&Eo())),k)}function Ov(_,b){_.lanes|=b;var I=_.alternate;for(I!==null&&(I.lanes|=b),I=_,_=_.return;_!==null;)_.childLanes|=b,I=_.alternate,I!==null&&(I.childLanes|=b),I=_,_=_.return;return I.tag===3?I.stateNode:null}function bo(_,b){var I=_.callbackNode;D(_,b);var k=an(_,_===Hi?_s:0);if(k===0)I!==null&&ut(I),_.callbackNode=null,_.callbackPriority=0;else if(b=k&-k,_.callbackPriority!==b){if(I!=null&&ut(I),b===1)_.tag===0?Tm(B6.bind(null,_)):Am(B6.bind(null,_)),ve?me(function(){qn===0&&Eo()}):ct(Mt,Eo),I=null;else{switch(Et(k)){case 1:I=Mt;break;case 4:I=Nt;break;case 16:I=kt;break;case 536870912:I=dn;break;default:I=kt}I=j6(I,D6.bind(null,_))}_.callbackPriority=b,_.callbackNode=I}}function D6(_,b){if(Lv=-1,Nv=0,qn&6)throw Error(o(327));var I=_.callbackNode;if(hf()&&_.callbackNode!==I)return null;var k=an(_,_===Hi?_s:0);if(k===0)return null;if(k&30||k&_.expiredLanes||b)b=Dv(_,k);else{b=k;var q=qn;qn|=2;var oe=U6();(Hi!==_||_s!==b)&&(Wh(),uf(_,b));do try{o$();break}catch(Qe){F6(_,Qe)}while(1);Oh(),Cv.current=oe,qn=q,Gi!==null?b=0:(Hi=null,_s=0,b=Ji)}if(b!==0){if(b===2&&(q=G(_),q!==0&&(k=q,b=Vb(_,q))),b===1)throw I=Um,uf(_,0),nu(_,k),bo(_,vt()),I;if(b===6)nu(_,k);else{if(q=_.current.alternate,!(k&30)&&!i$(q)&&(b=Dv(_,k),b===2&&(oe=G(_),oe!==0&&(k=oe,b=Vb(_,oe))),b===1))throw I=Um,uf(_,0),nu(_,k),bo(_,vt()),I;switch(_.finishedWork=q,_.finishedLanes=k,b){case 0:case 1:throw Error(o(345));case 2:ff(_,_o);break;case 3:if(nu(_,k),(k&130023424)===k&&(b=Ub+500-vt(),10<b)){if(an(_,0)!==0)break;if(q=_.suspendedLanes,(q&k)!==k){to(),_.pingedLanes|=_.suspendedLanes&q;break}_.timeoutHandle=K(ff.bind(null,_,_o),b);break}ff(_,_o);break;case 4:if(nu(_,k),(k&4194240)===k)break;for(b=_.eventTimes,q=-1;0<k;){var De=31-sr(k);oe=1<<De,De=b[De],De>q&&(q=De),k&=~oe}if(k=q,k=vt()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*r$(k/1960))-k,10<k){_.timeoutHandle=K(ff.bind(null,_,_o),k);break}ff(_,_o);break;case 5:ff(_,_o);break;default:throw Error(o(329))}}}return bo(_,vt()),_.callbackNode===I?D6.bind(null,_):null}function Vb(_,b){var I=zm;return _.current.memoizedState.isDehydrated&&(uf(_,b).flags|=256),_=Dv(_,b),_!==2&&(b=_o,_o=I,b!==null&&Wb(b)),_}function Wb(_){_o===null?_o=_:_o.push.apply(_o,_)}function i$(_){for(var b=_;;){if(b.flags&16384){var I=b.updateQueue;if(I!==null&&(I=I.stores,I!==null))for(var k=0;k<I.length;k++){var q=I[k],oe=q.getSnapshot;q=q.value;try{if(!tr(oe(),q))return!1}catch{return!1}}}if(I=b.child,b.subtreeFlags&16384&&I!==null)I.return=b,b=I;else{if(b===_)break;for(;b.sibling===null;){if(b.return===null||b.return===_)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function nu(_,b){for(b&=~Fb,b&=~Mv,_.suspendedLanes|=b,_.pingedLanes&=~b,_=_.expirationTimes;0<b;){var I=31-sr(b),k=1<<I;_[I]=-1,b&=~k}}function B6(_){if(qn&6)throw Error(o(327));hf();var b=an(_,0);if(!(b&1))return bo(_,vt()),null;var I=Dv(_,b);if(_.tag!==0&&I===2){var k=G(_);k!==0&&(b=k,I=Vb(_,k))}if(I===1)throw I=Um,uf(_,0),nu(_,b),bo(_,vt()),I;if(I===6)throw Error(o(345));return _.finishedWork=_.current.alternate,_.finishedLanes=b,ff(_,_o),bo(_,vt()),null}function k6(_){eu!==null&&eu.tag===0&&!(qn&6)&&hf();var b=qn;qn|=1;var I=Li.transition,k=ze;try{if(Li.transition=null,ze=1,_)return _()}finally{ze=k,Li.transition=I,qn=b,!(qn&6)&&Eo()}}function jb(){Wo=Gh.current,jt(Gh)}function uf(_,b){_.finishedWork=null,_.finishedLanes=0;var I=_.timeoutHandle;if(I!==Se&&(_.timeoutHandle=Se,ge(I)),Gi!==null)for(I=Gi.return;I!==null;){var k=I;switch(lb(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&Bn();break;case 3:zh(),jt(yn),jt(fn),mb();break;case 5:db(k);break;case 4:zh();break;case 13:jt(ui);break;case 19:jt(ui);break;case 10:as(k.type._context);break;case 22:case 23:jb()}I=I.return}if(Hi=_,Gi=_=ru(_.current,null),_s=Wo=b,Ji=0,Um=null,Fb=Mv=Vh=0,_o=zm=null,zo!==null){for(b=0;b<zo.length;b++)if(I=zo[b],k=I.interleaved,k!==null){I.interleaved=null;var q=k.next,oe=I.pending;if(oe!==null){var De=oe.next;oe.next=q,k.next=De}I.pending=k}zo=null}return _}function F6(_,b){do{var I=Gi;try{if(Oh(),av.current=dv,lv){for(var k=xi.memoizedState;k!==null;){var q=k.queue;q!==null&&(q.pending=null),k=k.next}lv=!1}if(Hh=0,ls=Is=xi=null,Im=!1,Pm=0,kb.current=null,I===null||I.return===null){Ji=1,Um=b,Gi=null;break}e:{var oe=_,De=I.return,Qe=I,Tt=b;if(b=_s,Qe.flags|=32768,Tt!==null&&typeof Tt=="object"&&typeof Tt.then=="function"){var Gt=Tt,tn=Qe,Un=tn.tag;if(!(tn.mode&1)&&(Un===0||Un===11||Un===15)){var bn=tn.alternate;bn?(tn.updateQueue=bn.updateQueue,tn.memoizedState=bn.memoizedState,tn.lanes=bn.lanes):(tn.updateQueue=null,tn.memoizedState=null)}var Br=s6(De);if(Br!==null){Br.flags&=-257,o6(Br,De,Qe,oe,b),Br.mode&1&&i6(oe,Gt,b),b=Br,Tt=Gt;var mn=b.updateQueue;if(mn===null){var Ns=new Set;Ns.add(Tt),b.updateQueue=Ns}else mn.add(Tt);break e}else{if(!(b&1)){i6(oe,Gt,b),$b();break e}Tt=Error(o(426))}}else if(Jr&&Qe.mode&1){var pa=s6(De);if(pa!==null){!(pa.flags&65536)&&(pa.flags|=256),o6(pa,De,Qe,oe,b),fb(Tt);break e}}oe=Tt,Ji!==4&&(Ji=2),zm===null?zm=[oe]:zm.push(oe),Tt=bb(Tt,Qe),Qe=De;do{switch(Qe.tag){case 3:Qe.flags|=65536,b&=-b,Qe.lanes|=b;var ht=n6(Qe,Tt,b);TM(Qe,ht);break e;case 1:oe=Tt;var nt=Qe.type,At=Qe.stateNode;if(!(Qe.flags&128)&&(typeof nt.getDerivedStateFromError=="function"||At!==null&&typeof At.componentDidCatch=="function"&&(Zc===null||!Zc.has(At)))){Qe.flags|=65536,b&=-b,Qe.lanes|=b;var Jt=r6(Qe,oe,b);TM(Qe,Jt);break e}}Qe=Qe.return}while(Qe!==null)}H6(I)}catch(pn){b=pn,Gi===I&&I!==null&&(Gi=I=I.return);continue}break}while(1)}function U6(){var _=Cv.current;return Cv.current=dv,_===null?dv:_}function $b(){(Ji===0||Ji===3||Ji===2)&&(Ji=4),Hi===null||!(Vh&268435455)&&!(Mv&268435455)||nu(Hi,_s)}function Dv(_,b){var I=qn;qn|=2;var k=U6();Hi===_&&_s===b||uf(_,b);do try{s$();break}catch(q){F6(_,q)}while(1);if(Oh(),qn=I,Cv.current=k,Gi!==null)throw Error(o(261));return Hi=null,_s=0,Ji}function s$(){for(;Gi!==null;)z6(Gi)}function o$(){for(;Gi!==null&&!mt();)z6(Gi)}function z6(_){var b=W6(_.alternate,_,Wo);_.memoizedProps=_.pendingProps,b===null?H6(_):Gi=b,kb.current=null}function H6(_){var b=_;do{var I=b.alternate;if(_=b.return,b.flags&32768){if(I=Qj(I,b),I!==null){I.flags&=32767,Gi=I;return}if(_!==null)_.flags|=32768,_.subtreeFlags=0,_.deletions=null;else{Ji=6,Gi=null;return}}else if(I=qj(I,b,Wo),I!==null){Gi=I;return}if(b=b.sibling,b!==null){Gi=b;return}Gi=b=_}while(b!==null);Ji===0&&(Ji=5)}function ff(_,b){var I=ze,k=Li.transition;try{Li.transition=null,ze=1,a$(_,b,I)}finally{Li.transition=k,ze=I}return null}function a$(_,b,I){do hf();while(eu!==null);if(qn&6)throw Error(o(327));var k=_.finishedWork,q=_.finishedLanes;if(k===null)return null;if(_.finishedWork=null,_.finishedLanes=0,k===_.current)throw Error(o(177));_.callbackNode=null,_.callbackPriority=0;var oe=k.lanes|k.childLanes;if(le(_,oe),_===Hi&&(Gi=Hi=null,_s=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||Iv||(Iv=!0,j6(kt,function(){return hf(),null})),oe=(k.flags&15990)!==0,k.subtreeFlags&15990||oe){oe=Li.transition,Li.transition=null;var De=ze;ze=1;var Qe=qn;qn|=4,kb.current=null,e$(_,k),t$(_,k),ne(_.containerInfo),_.current=k,n$(k),ft(),qn=Qe,ze=De,Li.transition=oe}else _.current=k;if(Iv&&(Iv=!1,eu=_,Pv=q),oe=_.pendingLanes,oe===0&&(Zc=null),In(k.stateNode),bo(_,vt()),b!==null)for(I=_.onRecoverableError,k=0;k<b.length;k++)I(b[k]);if(Rv)throw Rv=!1,_=Hb,Hb=null,_;return Pv&1&&_.tag!==0&&hf(),oe=_.pendingLanes,oe&1?_===Gb?Hm++:(Hm=0,Gb=_):Hm=0,Eo(),null}function hf(){if(eu!==null){var _=Et(Pv),b=Li.transition,I=ze;try{if(Li.transition=null,ze=16>_?16:_,eu===null)var k=!1;else{if(_=eu,eu=null,Pv=0,qn&6)throw Error(o(331));var q=qn;for(qn|=4,Kt=_.current;Kt!==null;){var oe=Kt,De=oe.child;if(Kt.flags&16){var Qe=oe.deletions;if(Qe!==null){for(var Tt=0;Tt<Qe.length;Tt++){var Gt=Qe[Tt];for(Kt=Gt;Kt!==null;){var tn=Kt;switch(tn.tag){case 0:case 11:case 15:cf(8,tn,oe)}var Un=tn.child;if(Un!==null)Un.return=tn,Kt=Un;else for(;Kt!==null;){tn=Kt;var bn=tn.sibling,Br=tn.return;if(w6(tn),tn===Gt){Kt=null;break}if(bn!==null){bn.return=Br,Kt=bn;break}Kt=Br}}}var mn=oe.alternate;if(mn!==null){var Ns=mn.child;if(Ns!==null){mn.child=null;do{var pa=Ns.sibling;Ns.sibling=null,Ns=pa}while(Ns!==null)}}Kt=oe}}if(oe.subtreeFlags&2064&&De!==null)De.return=oe,Kt=De;else e:for(;Kt!==null;){if(oe=Kt,oe.flags&2048)switch(oe.tag){case 0:case 11:case 15:cf(9,oe,oe.return)}var ht=oe.sibling;if(ht!==null){ht.return=oe.return,Kt=ht;break e}Kt=oe.return}}var nt=_.current;for(Kt=nt;Kt!==null;){De=Kt;var At=De.child;if(De.subtreeFlags&2064&&At!==null)At.return=De,Kt=At;else e:for(De=nt;Kt!==null;){if(Qe=Kt,Qe.flags&2048)try{switch(Qe.tag){case 0:case 11:case 15:km(9,Qe)}}catch(pn){Ao(Qe,Qe.return,pn)}if(Qe===De){Kt=null;break e}var Jt=Qe.sibling;if(Jt!==null){Jt.return=Qe.return,Kt=Jt;break e}Kt=Qe.return}}if(qn=q,Eo(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(en,_)}catch{}k=!0}return k}finally{ze=I,Li.transition=b}}return!1}function G6(_,b,I){b=bb(I,b),b=n6(_,b,1),Qc(_,b),b=to(),_=Ov(_,1),_!==null&&(V(_,1,b),bo(_,b))}function Ao(_,b,I){if(_.tag===3)G6(_,_,I);else for(;b!==null;){if(b.tag===3){G6(b,_,I);break}else if(b.tag===1){var k=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(Zc===null||!Zc.has(k))){_=bb(I,_),_=r6(b,_,1),Qc(b,_),_=to(),b=Ov(b,1),b!==null&&(V(b,1,_),bo(b,_));break}}b=b.return}}function l$(_,b,I){var k=_.pingCache;k!==null&&k.delete(b),b=to(),_.pingedLanes|=_.suspendedLanes&I,Hi===_&&(_s&I)===I&&(Ji===4||Ji===3&&(_s&130023424)===_s&&500>vt()-Ub?uf(_,0):Fb|=I),bo(_,b)}function V6(_,b){b===0&&(_.mode&1?(b=xo,xo<<=1,!(xo&130023424)&&(xo=4194304)):b=1);var I=to();_=Ov(_,b),_!==null&&(V(_,b,I),bo(_,I))}function c$(_){var b=_.memoizedState,I=0;b!==null&&(I=b.retryLane),V6(_,I)}function u$(_,b){var I=0;switch(_.tag){case 13:var k=_.stateNode,q=_.memoizedState;q!==null&&(I=q.retryLane);break;case 19:k=_.stateNode;break;default:throw Error(o(314))}k!==null&&k.delete(b),V6(_,I)}var W6;W6=function(_,b,I){if(_!==null)if(_.memoizedProps!==b.pendingProps||yn.current)Vo=!0;else{if(!(_.lanes&I)&&!(b.flags&128))return Vo=!1,Jj(_,b,I);Vo=!!(_.flags&131072)}else Vo=!1,Jr&&b.flags&1048576&&IM(b,iv,b.index);switch(b.lanes=0,b.tag){case 2:var k=b.type;_!==null&&(_.alternate=null,b.alternate=null,b.flags|=2),_=b.pendingProps;var q=or(b,fn.current);Ii(b,I),q=vb(null,b,k,_,q,I);var oe=yb();return b.flags|=1,typeof q=="object"&&q!==null&&typeof q.render=="function"&&q.$$typeof===void 0?(b.tag=1,b.memoizedState=null,b.updateQueue=null,ar(k)?(oe=!0,En(b)):oe=!1,b.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,ib(b),q.updater=nv,b.stateNode=q,q._reactInternals=b,ob(b,k,_,I),b=wb(null,b,k,!0,oe,I)):(b.tag=0,Jr&&oe&&ab(b),eo(null,b,q,I),b=b.child),b;case 16:k=b.elementType;e:{switch(_!==null&&(_.alternate=null,b.alternate=null,b.flags|=2),_=b.pendingProps,q=k._init,k=q(k._payload),b.type=k,q=b.tag=h$(k),_=Qs(k,_),q){case 0:b=Tb(null,b,k,_,I);break e;case 1:b=p6(null,b,k,_,I);break e;case 11:b=c6(null,b,k,_,I);break e;case 14:b=u6(null,b,k,Qs(k.type,_),I);break e}throw Error(o(306,k,""))}return b;case 0:return k=b.type,q=b.pendingProps,q=b.elementType===k?q:Qs(k,q),Tb(_,b,k,q,I);case 1:return k=b.type,q=b.pendingProps,q=b.elementType===k?q:Qs(k,q),p6(_,b,k,q,I);case 3:e:{if(m6(b),_===null)throw Error(o(387));k=b.pendingProps,oe=b.memoizedState,q=oe.element,AM(_,b),tv(b,k,null,I);var De=b.memoizedState;if(k=De.element,Oe&&oe.isDehydrated)if(oe={element:k,isDehydrated:!1,cache:De.cache,transitions:De.transitions},b.updateQueue.baseState=oe,b.memoizedState=oe,b.flags&256){q=Error(o(423)),b=g6(_,b,k,I,q);break e}else if(k!==q){q=Error(o(424)),b=g6(_,b,k,I,q);break e}else for(Oe&&(Go=br(b.stateNode.containerInfo),Ho=b,Jr=!0,Xa=null,wm=!1),I=BM(b,null,k,I),b.child=I;I;)I.flags=I.flags&-3|4096,I=I.sibling;else{if(kh(),k===q){b=rc(_,b,I);break e}eo(_,b,k,I)}b=b.child}return b;case 5:return kM(b),_===null&&ub(b),k=b.type,q=b.pendingProps,oe=_!==null?_.memoizedProps:null,De=q.children,X(k,q)?De=null:oe!==null&&X(k,oe)&&(b.flags|=32),d6(_,b),eo(_,b,De,I),b.child;case 6:return _===null&&ub(b),null;case 13:return v6(_,b,I);case 4:return hb(b,b.stateNode.containerInfo),k=b.pendingProps,_===null?b.child=Fh(b,null,k,I):eo(_,b,k,I),b.child;case 11:return k=b.type,q=b.pendingProps,q=b.elementType===k?q:Qs(k,q),c6(_,b,k,q,I);case 7:return eo(_,b,b.pendingProps,I),b.child;case 8:return eo(_,b,b.pendingProps.children,I),b.child;case 12:return eo(_,b,b.pendingProps.children,I),b.child;case 10:e:{if(k=b.type._context,q=b.pendingProps,oe=b.memoizedProps,De=q.value,Zg(b,k,De),oe!==null)if(tr(oe.value,De)){if(oe.children===q.children&&!yn.current){b=rc(_,b,I);break e}}else for(oe=b.child,oe!==null&&(oe.return=b);oe!==null;){var Qe=oe.dependencies;if(Qe!==null){De=oe.child;for(var Tt=Qe.firstContext;Tt!==null;){if(Tt.context===k){if(oe.tag===1){Tt=Zl(-1,I&-I),Tt.tag=2;var Gt=oe.updateQueue;if(Gt!==null){Gt=Gt.shared;var tn=Gt.pending;tn===null?Tt.next=Tt:(Tt.next=tn.next,tn.next=Tt),Gt.pending=Tt}}oe.lanes|=I,Tt=oe.alternate,Tt!==null&&(Tt.lanes|=I),Zs(oe.return,I,b),Qe.lanes|=I;break}Tt=Tt.next}}else if(oe.tag===10)De=oe.type===b.type?null:oe.child;else if(oe.tag===18){if(De=oe.return,De===null)throw Error(o(341));De.lanes|=I,Qe=De.alternate,Qe!==null&&(Qe.lanes|=I),Zs(De,I,b),De=oe.sibling}else De=oe.child;if(De!==null)De.return=oe;else for(De=oe;De!==null;){if(De===b){De=null;break}if(oe=De.sibling,oe!==null){oe.return=De.return,De=oe;break}De=De.return}oe=De}eo(_,b,q.children,I),b=b.child}return b;case 9:return q=b.type,k=b.pendingProps.children,Ii(b,I),q=Pi(q),k=k(q),b.flags|=1,eo(_,b,k,I),b.child;case 14:return k=b.type,q=Qs(k,b.pendingProps),q=Qs(k.type,q),u6(_,b,k,q,I);case 15:return f6(_,b,b.type,b.pendingProps,I);case 17:return k=b.type,q=b.pendingProps,q=b.elementType===k?q:Qs(k,q),_!==null&&(_.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,ar(k)?(_=!0,En(b)):_=!1,Ii(b,I),MM(b,k,q),ob(b,k,q,I),wb(null,b,k,!0,_,I);case 19:return _6(_,b,I);case 22:return h6(_,b,I)}throw Error(o(156,b.tag))};function j6(_,b){return ct(_,b)}function f$(_,b,I,k){this.tag=_,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function da(_,b,I,k){return new f$(_,b,I,k)}function Xb(_){return _=_.prototype,!(!_||!_.isReactComponent)}function h$(_){if(typeof _=="function")return Xb(_)?1:0;if(_!=null){if(_=_.$$typeof,_===m)return 11;if(_===x)return 14}return 2}function ru(_,b){var I=_.alternate;return I===null?(I=da(_.tag,b,_.key,_.mode),I.elementType=_.elementType,I.type=_.type,I.stateNode=_.stateNode,I.alternate=_,_.alternate=I):(I.pendingProps=b,I.type=_.type,I.flags=0,I.subtreeFlags=0,I.deletions=null),I.flags=_.flags&14680064,I.childLanes=_.childLanes,I.lanes=_.lanes,I.child=_.child,I.memoizedProps=_.memoizedProps,I.memoizedState=_.memoizedState,I.updateQueue=_.updateQueue,b=_.dependencies,I.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},I.sibling=_.sibling,I.index=_.index,I.ref=_.ref,I}function Bv(_,b,I,k,q,oe){var De=2;if(k=_,typeof _=="function")Xb(_)&&(De=1);else if(typeof _=="string")De=5;else e:switch(_){case u:return df(I.children,q,oe,b);case f:De=8,q|=8;break;case h:return _=da(12,I,b,q|2),_.elementType=h,_.lanes=oe,_;case g:return _=da(13,I,b,q),_.elementType=g,_.lanes=oe,_;case v:return _=da(19,I,b,q),_.elementType=v,_.lanes=oe,_;case A:return kv(I,q,oe,b);default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case d:De=10;break e;case p:De=9;break e;case m:De=11;break e;case x:De=14;break e;case y:De=16,k=null;break e}throw Error(o(130,_==null?_:typeof _,""))}return b=da(De,I,b,q),b.elementType=_,b.type=k,b.lanes=oe,b}function df(_,b,I,k){return _=da(7,_,k,b),_.lanes=I,_}function kv(_,b,I,k){return _=da(22,_,k,b),_.elementType=A,_.lanes=I,_.stateNode={},_}function Yb(_,b,I){return _=da(6,_,null,b),_.lanes=I,_}function qb(_,b,I){return b=da(4,_.children!==null?_.children:[],_.key,b),b.lanes=I,b.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},b}function d$(_,b,I,k,q){this.tag=b,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Se,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=j(0),this.expirationTimes=j(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=j(0),this.identifierPrefix=k,this.onRecoverableError=q,Oe&&(this.mutableSourceEagerHydrationData=null)}function $6(_,b,I,k,q,oe,De,Qe,Tt){return _=new d$(_,b,I,Qe,Tt),b===1?(b=1,oe===!0&&(b|=8)):b=0,oe=da(3,null,null,b),_.current=oe,oe.stateNode=_,oe.memoizedState={element:k,isDehydrated:I,cache:null,transitions:null},ib(oe),_}function X6(_){if(!_)return Mn;_=_._reactInternals;e:{if(S(_)!==_||_.tag!==1)throw Error(o(170));var b=_;do{switch(b.tag){case 3:b=b.stateNode.context;break e;case 1:if(ar(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break e}}b=b.return}while(b!==null);throw Error(o(171))}if(_.tag===1){var I=_.type;if(ar(I))return Zt(_,I,b)}return b}function Y6(_){var b=_._reactInternals;if(b===void 0)throw typeof _.render=="function"?Error(o(188)):(_=Object.keys(_).join(","),Error(o(268,_)));return _=L(b),_===null?null:_.stateNode}function q6(_,b){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var I=_.retryLane;_.retryLane=I!==0&&I<b?I:b}}function Kb(_,b){q6(_,b),(_=_.alternate)&&q6(_,b)}function p$(_){return _=L(_),_===null?null:_.stateNode}function m$(){return null}return n.attemptContinuousHydration=function(_){if(_.tag===13){var b=to();ha(_,134217728,b),Kb(_,134217728)}},n.attemptHydrationAtCurrentPriority=function(_){if(_.tag===13){var b=to(),I=tu(_);ha(_,I,b),Kb(_,I)}},n.attemptSynchronousHydration=function(_){switch(_.tag){case 3:var b=_.stateNode;if(b.current.memoizedState.isDehydrated){var I=cn(b.pendingLanes);I!==0&&(Ne(b,I|1),bo(b,vt()),!(qn&6)&&(Wh(),Eo()))}break;case 13:var k=to();k6(function(){return ha(_,1,k)}),Kb(_,1)}},n.batchedUpdates=function(_,b){var I=qn;qn|=1;try{return _(b)}finally{qn=I,qn===0&&(Wh(),Ks&&Eo())}},n.createComponentSelector=function(_){return{$$typeof:bv,value:_}},n.createContainer=function(_,b,I,k,q,oe,De){return $6(_,b,!1,null,I,k,q,oe,De)},n.createHasPseudoClassSelector=function(_){return{$$typeof:Av,value:_}},n.createHydrationContainer=function(_,b,I,k,q,oe,De,Qe,Tt){return _=$6(I,k,!0,_,q,oe,De,Qe,Tt),_.context=X6(null),I=_.current,k=to(),q=tu(I),oe=Zl(k,q),oe.callback=b??null,Qc(I,oe),_.current.lanes=q,V(_,q,k),bo(_,k),_},n.createPortal=function(_,b,I){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:k==null?null:""+k,children:_,containerInfo:b,implementation:I}},n.createRoleSelector=function(_){return{$$typeof:Tv,value:_}},n.createTestNameSelector=function(_){return{$$typeof:wv,value:_}},n.createTextSelector=function(_){return{$$typeof:Sv,value:_}},n.deferredUpdates=function(_){var b=ze,I=Li.transition;try{return Li.transition=null,ze=16,_()}finally{ze=b,Li.transition=I}},n.discreteUpdates=function(_,b,I,k,q){var oe=ze,De=Li.transition;try{return Li.transition=null,ze=1,_(b,I,k,q)}finally{ze=oe,Li.transition=De,qn===0&&Wh()}},n.findAllNodes=Bb,n.findBoundingRects=function(_,b){if(!We)throw Error(o(363));b=Bb(_,b),_=[];for(var I=0;I<b.length;I++)_.push(xt(b[I]));for(b=_.length-1;0<b;b--){I=_[b];for(var k=I.x,q=k+I.width,oe=I.y,De=oe+I.height,Qe=b-1;0<=Qe;Qe--)if(b!==Qe){var Tt=_[Qe],Gt=Tt.x,tn=Gt+Tt.width,Un=Tt.y,bn=Un+Tt.height;if(k>=Gt&&oe>=Un&&q<=tn&&De<=bn){_.splice(b,1);break}else if(k!==Gt||I.width!==Tt.width||bn<oe||Un>De){if(!(oe!==Un||I.height!==Tt.height||tn<k||Gt>q)){Gt>k&&(Tt.width+=Gt-k,Tt.x=k),tn<q&&(Tt.width=q-Gt),_.splice(b,1);break}}else{Un>oe&&(Tt.height+=Un-oe,Tt.y=oe),bn<De&&(Tt.height=De-Un),_.splice(b,1);break}}}return _},n.findHostInstance=Y6,n.findHostInstanceWithNoPortals=function(_){return _=O(_),_=_!==null?N(_):null,_===null?null:_.stateNode},n.findHostInstanceWithWarning=function(_){return Y6(_)},n.flushControlled=function(_){var b=qn;qn|=1;var I=Li.transition,k=ze;try{Li.transition=null,ze=1,_()}finally{ze=k,Li.transition=I,qn=b,qn===0&&(Wh(),Eo())}},n.flushPassiveEffects=hf,n.flushSync=k6,n.focusWithin=function(_,b){if(!We)throw Error(o(363));for(_=Nb(_),b=O6(_,b),b=Array.from(b),_=0;_<b.length;){var I=b[_++];if(!ie(I)){if(I.tag===5&&Je(I.stateNode))return!0;for(I=I.child;I!==null;)b.push(I),I=I.sibling}}return!1},n.getCurrentUpdatePriority=function(){return ze},n.getFindAllNodesFailureDescription=function(_,b){if(!We)throw Error(o(363));var I=0,k=[];_=[Nb(_),0];for(var q=0;q<_.length;){var oe=_[q++],De=_[q++],Qe=b[De];if((oe.tag!==5||!ie(oe))&&(Ob(oe,Qe)&&(k.push(Db(Qe)),De++,De>I&&(I=De)),De<b.length))for(oe=oe.child;oe!==null;)_.push(oe,De),oe=oe.sibling}if(I<b.length){for(_=[];I<b.length;I++)_.push(Db(b[I]));return`findAllNodes was able to match part of the selector:
  `+(k.join(" > ")+`

No matching component was found for:
  `)+_.join(" > ")}return null},n.getPublicRootInstance=function(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return U(_.child.stateNode);default:return _.child.stateNode}},n.injectIntoDevTools=function(_){if(_={bundleType:_.bundleType,version:_.version,rendererPackageName:_.rendererPackageName,rendererConfig:_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:p$,findFiberByHostInstance:_.findFiberByHostInstance||m$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")_=!1;else{var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)_=!0;else{try{en=b.inject(_),Xt=b}catch{}_=!!b.checkDCE}}return _},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(_,b,I,k){if(!We)throw Error(o(363));_=Bb(_,b);var q=te(_,I,k).disconnect;return{disconnect:function(){q()}}},n.registerMutableSourceForHydration=function(_,b){var I=b._getVersion;I=I(b._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[b,I]:_.mutableSourceEagerHydrationData.push(b,I)},n.runWithPriority=function(_,b){var I=ze;try{return ze=_,b()}finally{ze=I}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(_,b,I,k){var q=b.current,oe=to(),De=tu(q);return I=X6(I),b.context===null?b.context=I:b.pendingContext=I,b=Zl(oe,De),b.payload={element:_},k=k===void 0?null:k,k!==null&&(b.callback=k),Qc(q,b),_=ha(q,De,oe),_!==null&&ev(_,q,De),De},n}),e2}yU.exports=Wue();var jue=yU.exports;const $ue=go(jue),Xue=t=>typeof t=="object"&&typeof t.then=="function",jf=[];function EU(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function _U(t,e=null,n=!1,r={}){e===null&&(e=[t]);for(const s of jf)if(EU(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=jf.indexOf(i);s!==-1&&jf.splice(s,1)},promise:(Xue(t)?t:t(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(jf.push(i),!n)throw i.promise}const vh=(t,e,n)=>_U(t,e,!1,n),bU=(t,e,n)=>void _U(t,e,!0,n),G5=t=>{if(t===void 0||t.length===0)jf.splice(0,jf.length);else{const e=jf.find(n=>EU(t,n.keys,n.equal));e&&e.remove()}},V5={},Fi=t=>void Object.assign(V5,t);function Yue(t,e){function n(u,{args:f=[],attach:h,...d},p){let m=`${u[0].toUpperCase()}${u.slice(1)}`,g;if(u==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=d.object;g=Kd(v,{type:u,root:p,attach:h,primitive:!0})}else{const v=V5[m];if(!v)throw new Error(`R3F: ${m} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");g=Kd(new v(...f),{type:u,root:p,attach:h,memoizedProps:{args:f}})}return g.__r3f.attach===void 0&&(g instanceof on?g.__r3f.attach="geometry":g instanceof Gr&&(g.__r3f.attach="material")),m!=="inject"&&r2(g,d),g}function r(u,f){let h=!1;if(f){var d,p;(d=f.__r3f)!=null&&d.attach?n2(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),h=!0),h||(p=u.__r3f)==null||p.objects.push(f),f.__r3f||Kd(f,{}),f.__r3f.parent=u,MS(f),Jd(f)}}function i(u,f,h){let d=!1;if(f){var p,m;if((p=f.__r3f)!=null&&p.attach)n2(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"});const g=u.children.filter(x=>x!==f),v=g.indexOf(h);u.children=[...g.slice(0,v),f,...g.slice(v)],d=!0}d||(m=u.__r3f)==null||m.objects.push(f),f.__r3f||Kd(f,{}),f.__r3f.parent=u,MS(f),Jd(f)}}function s(u,f,h=!1){u&&[...u].forEach(d=>o(f,d,h))}function o(u,f,h){if(f){var d,p,m;if(f.__r3f&&(f.__r3f.parent=null),(d=u.__r3f)!=null&&d.objects&&(u.__r3f.objects=u.__r3f.objects.filter(A=>A!==f)),(p=f.__r3f)!=null&&p.attach)U7(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var g;u.remove(f),(g=f.__r3f)!=null&&g.root&&nfe(f.__r3f.root,f)}const x=(m=f.__r3f)==null?void 0:m.primitive,y=!x&&(h===void 0?f.dispose!==null:h);if(!x){var v;s((v=f.__r3f)==null?void 0:v.objects,f,y),s(f.children,f,y)}if(delete f.__r3f,y&&f.dispose&&f.type!=="Scene"){const A=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?SS.unstable_scheduleCallback(SS.unstable_IdlePriority,A):A()}Jd(u)}}function a(u,f,h,d){var p;const m=(p=u.__r3f)==null?void 0:p.parent;if(!m)return;const g=n(f,h,u.__r3f.root);if(u.children){for(const v of u.children)v.__r3f&&r(g,v);u.children=u.children.filter(v=>!v.__r3f)}u.__r3f.objects.forEach(v=>r(g,v)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(m,u),g.parent&&(g.__r3f.autoRemovedBeforeAppend=!0),r(m,g),g.raycast&&g.__r3f.eventCount&&g.__r3f.root.getState().internal.interaction.push(g),[d,d.alternate].forEach(v=>{v!==null&&(v.stateNode=g,v.ref&&(typeof v.ref=="function"?v.ref(g):v.ref.current=g))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:$ue({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const h=u.getState().scene;h.__r3f&&(h.__r3f.root=u,r(h,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,h)=>{if(!f||!h)return;const d=u.getState().scene;d.__r3f&&i(d,f,h)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,h,d){var p;if(((p=u==null?void 0:u.__r3f)!=null?p:{}).primitive&&d.object&&d.object!==u)return[!0];{const{args:g=[],children:v,...x}=d,{args:y=[],children:A,...T}=h;if(!Array.isArray(g))throw new Error("R3F: the args prop must be an array!");if(g.some((M,C)=>M!==y[C]))return[!0];const w=RU(u,x,T,!0);return w.changes.length?[!1,w]:null}},commitUpdate(u,[f,h],d,p,m,g){f?a(u,d,m,g):r2(u,h)},commitMount(u,f,h,d){var p;const m=(p=u.__r3f)!=null?p:{};u.raycast&&m.handlers&&m.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Kd(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:h,parent:d}=(f=u.__r3f)!=null?f:{};h&&d&&U7(d,u,h),u.isObject3D&&(u.visible=!1),Jd(u)},unhideInstance(u,f){var h;const{attach:d,parent:p}=(h=u.__r3f)!=null?h:{};d&&p&&n2(p,u,d),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),Jd(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():cp.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&jr.fun(performance.now)?performance.now:jr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:jr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:jr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:r2}}var D7,B7;const t2=t=>"colorSpace"in t||"outputColorSpace"in t,AU=()=>{var t;return(t=V5.ColorManagement)!=null?t:null},TU=t=>t&&t.isOrthographicCamera,que=t=>t&&t.hasOwnProperty("current"),Fg=typeof window<"u"&&((D7=window.document)!=null&&D7.createElement||((B7=window.navigator)==null?void 0:B7.product)==="ReactNative")?E.useLayoutEffect:E.useEffect;function wU(t){const e=E.useRef(t);return Fg(()=>void(e.current=t),[t]),e}function Kue({set:t}){return Fg(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class SU extends E.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}SU.getDerivedStateFromError=()=>({error:!0});const CU="__default",k7=new Map,Jue=t=>t&&!!t.memoized&&!!t.changes;function MU(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const a0=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},jr={obj:t=>t===Object(t)&&!jr.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(jr.str(t)||jr.num(t))return t===e;const s=jr.obj(t);if(s&&r==="reference")return t===e;const o=jr.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!jr.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(jr.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function Que(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function Zue(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Kd(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function CS(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const F7=/-\d+$/;function n2(t,e,n){if(jr.str(n)){if(F7.test(n)){const s=n.replace(F7,""),{target:o,key:a}=CS(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=CS(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function U7(t,e,n){var r,i;if(jr.str(n)){const{target:s,key:o}=CS(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function RU(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var u;const f=(u=t==null?void 0:t.__r3f)!=null?u:{},h=Object.entries(i),d=[];if(c){const m=Object.keys(l);for(let g=0;g<m.length;g++)i.hasOwnProperty(m[g])||h.unshift([m[g],CU+"remove"])}h.forEach(([m,g])=>{var v;if((v=t.__r3f)!=null&&v.primitive&&m==="object"||jr.equ(g,l[m]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(m))return d.push([m,g,!0,[]]);let x=[];m.includes("-")&&(x=m.split("-")),d.push([m,g,!1,x]);for(const y in i){const A=i[y];y.startsWith(`${m}-`)&&d.push([y,A,!1,y.split("-")])}});const p={...i};return f.memoizedProps&&f.memoizedProps.args&&(p.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(p.attach=f.memoizedProps.attach),{memoized:p,changes:d}}const efe=typeof process<"u"&&!1;function r2(t,e){var n,r,i;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=Jue(e)?e:RU(t,e),u=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let h=0;h<c.length;h++){let[d,p,m,g]=c[h];if(t2(t)){const A="srgb",T="srgb-linear";d==="encoding"?(d="colorSpace",p=p===3001?A:T):d==="outputEncoding"&&(d="outputColorSpace",p=p===3001?A:T)}let v=t,x=v[d];if(g.length&&(x=g.reduce((y,A)=>y[A],t),!(x&&x.set))){const[y,...A]=g.reverse();v=A.reverse().reduce((T,w)=>T[w],t),d=y}if(p===CU+"remove")if(v.constructor){let y=k7.get(v.constructor);y||(y=new v.constructor,k7.set(v.constructor,y)),p=y[d]}else p=0;if(m)p?s.handlers[d]=p:delete s.handlers[d],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof rh)){if(Array.isArray(p))x.fromArray?x.fromArray(p):x.set(...p);else if(x.copy&&p&&p.constructor&&(efe?x.constructor.name===p.constructor.name:x.constructor===p.constructor))x.copy(p);else if(p!==void 0){const y=x instanceof bt;!y&&x.setScalar?x.setScalar(p):x instanceof rh&&p instanceof rh?x.mask=p.mask:x.set(p),!AU()&&!a.linear&&y&&x.convertSRGBToLinear()}}else if(v[d]=p,v[d]instanceof Vn&&v[d].format===Sr&&v[d].type===Cs){const y=v[d];t2(y)&&t2(a.gl)?y.colorSpace=a.gl.outputColorSpace:y.encoding=a.gl.outputEncoding}Jd(t)}if(s.parent&&a.internal&&t.raycast&&u!==s.eventCount){const h=a.internal.interaction.indexOf(t);h>-1&&a.internal.interaction.splice(h,1),s.eventCount&&a.internal.interaction.push(t)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=t.__r3f)!=null&&i.parent&&MS(t),t}function Jd(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function MS(t){t.onUpdate==null||t.onUpdate(t)}function IU(t,e){t.manual||(TU(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function Uy(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function tfe(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return cp.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return cp.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return cp.ContinuousEventPriority;default:return cp.DefaultEventPriority}}function PU(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function nfe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{PU(n.capturedMap,e,r,i)})}function rfe(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function r(l,c){const u=t.getState(),f=new Set,h=[],d=c?c(u.internal.interaction):u.internal.interaction;for(let v=0;v<d.length;v++){const x=a0(d[v]);x&&(x.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function p(v){const x=a0(v);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var y;x.events.compute==null||x.events.compute(l,x,(y=x.previousRoot)==null?void 0:y.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(v,!0):[]}let m=d.flatMap(p).sort((v,x)=>{const y=a0(v.object),A=a0(x.object);return!y||!A?v.distance-x.distance:A.events.priority-y.events.priority||v.distance-x.distance}).filter(v=>{const x=Uy(v);return f.has(x)?!1:(f.add(x),!0)});u.events.filter&&(m=u.events.filter(m,u));for(const v of m){let x=v.object;for(;x;){var g;(g=x.__r3f)!=null&&g.eventCount&&h.push({...v,eventObject:x}),x=x.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let v of u.internal.capturedMap.get(l.pointerId).values())f.has(Uy(v.intersection))||h.push(v.intersection);return h}function i(l,c,u,f){const h=t.getState();if(l.length){const d={stopped:!1};for(const p of l){const m=a0(p.object)||h,{raycaster:g,pointer:v,camera:x,internal:y}=m,A=new J(v.x,v.y,0).unproject(x),T=R=>{var O,L;return(O=(L=y.capturedMap.get(R))==null?void 0:L.has(p.eventObject))!=null?O:!1},w=R=>{const O={intersection:p,target:c.target};y.capturedMap.has(R)?y.capturedMap.get(R).set(p.eventObject,O):y.capturedMap.set(R,new Map([[p.eventObject,O]])),c.target.setPointerCapture(R)},M=R=>{const O=y.capturedMap.get(R);O&&PU(y.capturedMap,p.eventObject,O,R)};let C={};for(let R in c){let O=c[R];typeof O!="function"&&(C[R]=O)}let S={...p,...C,pointer:v,intersections:l,stopped:d.stopped,delta:u,unprojectedPoint:A,ray:g.ray,camera:x,stopPropagation(){const R="pointerId"in c&&y.capturedMap.get(c.pointerId);if((!R||R.has(p.eventObject))&&(S.stopped=d.stopped=!0,y.hovered.size&&Array.from(y.hovered.values()).find(O=>O.eventObject===p.eventObject))){const O=l.slice(0,l.indexOf(p));s([...O,p])}},target:{hasPointerCapture:T,setPointerCapture:w,releasePointerCapture:M},currentTarget:{hasPointerCapture:T,setPointerCapture:w,releasePointerCapture:M},nativeEvent:c};if(f(S),d.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const h=u.eventObject.__r3f,d=h==null?void 0:h.handlers;if(c.hovered.delete(Uy(u)),h!=null&&h.eventCount){const p={...u,intersections:l};d.onPointerOut==null||d.onPointerOut(p),d.onPointerLeave==null||d.onPointerLeave(p)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:h}=t.getState();h.lastEvent.current=u;const d=l==="onPointerMove",p=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",g=r(u,d?n:void 0),v=p?e(u):0;l==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=g.map(y=>y.eventObject)),p&&!g.length&&v<=2&&(o(u,h.interaction),f&&f(u)),d&&s(g);function x(y){const A=y.eventObject,T=A.__r3f,w=T==null?void 0:T.handlers;if(T!=null&&T.eventCount)if(d){if(w.onPointerOver||w.onPointerEnter||w.onPointerOut||w.onPointerLeave){const M=Uy(y),C=h.hovered.get(M);C?C.stopped&&y.stopPropagation():(h.hovered.set(M,y),w.onPointerOver==null||w.onPointerOver(y),w.onPointerEnter==null||w.onPointerEnter(y))}w.onPointerMove==null||w.onPointerMove(y)}else{const M=w[l];M?(!p||h.initialHits.includes(A))&&(o(u,h.interaction.filter(C=>!h.initialHits.includes(C))),M(y)):p&&h.initialHits.includes(A)&&o(u,h.interaction.filter(C=>!h.initialHits.includes(C)))}}i(g,u,v,x)}}return{handlePointer:a}}const ife=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],LU=t=>!!(t!=null&&t.render),h_=E.createContext(null),sfe=(t,e)=>{const n=vU((a,l)=>{const c=new J,u=new J,f=new J;function h(v=l().camera,x=u,y=l().size){const{width:A,height:T,top:w,left:M}=y,C=A/T;x instanceof J?f.copy(x):f.set(...x);const S=v.getWorldPosition(c).distanceTo(f);if(TU(v))return{width:A/v.zoom,height:T/v.zoom,top:w,left:M,factor:1,distance:S,aspect:C};{const R=v.fov*Math.PI/180,O=2*Math.tan(R/2)*S,L=O*(A/T);return{width:L,height:O,top:w,left:M,factor:A/L,distance:S,aspect:C}}}let d;const p=v=>a(x=>({performance:{...x.performance,current:v}})),m=new qe;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>t(l(),v),advance:(v,x)=>e(v,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new f_,pointer:m,mouse:m,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();d&&clearTimeout(d),v.performance.current!==v.performance.min&&p(v.performance.min),d=setTimeout(()=>p(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:v=>a(x=>({...x,events:{...x.events,...v}})),setSize:(v,x,y,A,T)=>{const w=l().camera,M={width:v,height:x,top:A||0,left:T||0,updateStyle:y};a(C=>({size:M,viewport:{...C.viewport,...h(w,u,M)}}))},setDpr:v=>a(x=>{const y=MU(v);return{viewport:{...x.viewport,dpr:y,initialDpr:x.viewport.initialDpr||y}}}),setFrameloop:(v="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,v!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:E.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,x,y)=>{const A=l().internal;return A.priority=A.priority+(x>0?1:0),A.subscribers.push({ref:v,priority:x,store:y}),A.subscribers=A.subscribers.sort((T,w)=>T.priority-w.priority),()=>{const T=l().internal;T!=null&&T.subscribers&&(T.priority=T.priority-(x>0?1:0),T.subscribers=T.subscribers.filter(w=>w.ref!==v))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=n.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var h;i=l,s=c.dpr,IU(a,l),u.setPixelRatio(c.dpr);const d=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,d)}a!==o&&(o=a,f(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};function W5(t,e){const n={callback:t};return e.add(n),()=>void e.delete(n)}let zy,NU=new Set,OU=new Set,DU=new Set;const j5=t=>W5(t,NU),d_=t=>W5(t,OU),ofe=t=>W5(t,DU);function i2(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function l0(t,e){switch(t){case"before":return i2(NU,e);case"after":return i2(OU,e);case"tail":return i2(DU,e)}}let s2,o2;function a2(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),s2=e.internal.subscribers,zy=0;zy<s2.length;zy++)o2=s2[zy],o2.ref.current(o2.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function afe(t){let e=!1,n,r,i;function s(l){r=requestAnimationFrame(s),e=!0,n=0,l0("before",l);for(const u of t.values()){var c;i=u.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(n+=a2(l,i))}if(l0("after",l),n===0)return l0("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var u;if(!l)return t.forEach(f=>o(f.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,f){if(c&&l0("before",l),u)a2(l,u,f);else for(const h of t.values())a2(l,h.store.getState());c&&l0("after",l)}return{loop:s,invalidate:o,advance:a}}function $5(){const t=E.useContext(h_);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function wt(t=n=>n,e){return $5()(t,e)}function rn(t,e=0){const n=$5(),r=n.getState().internal.subscribe,i=wU(t);return Fg(()=>r(i,e,n),[e,r,n]),null}const z7=new WeakMap;function BU(t,e){return function(n,...r){let i=z7.get(n);return i||(i=new n,z7.set(n,i)),t&&t(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,Que(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function ys(t,e,n,r){const i=Array.isArray(e)?e:[e],s=vh(BU(n,r),[t,...i],{equal:jr.equ});return Array.isArray(e)?s:s[0]}ys.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return bU(BU(n),[t,...r])};ys.clear=function(t,e){const n=Array.isArray(e)?e:[e];return G5([t,...n])};const Op=new Map,{invalidate:ng,advance:H7}=afe(Op),{reconciler:rg,applyProps:co}=Yue(Op,tfe),vd={objects:"shallow",strict:!1},lfe=(t,e)=>{const n=typeof t=="function"?t(e):t;return LU(n)?n:new Pg({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function cfe(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=n}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:s,left:o}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function ufe(t){const e=Op.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||sfe(ng,H7),o=n||rg.createContainer(s,cp.ConcurrentRoot,null,!1,null,"",i,null);e||Op.set(t,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:h,scene:d,events:p,onCreated:m,shadows:g=!1,linear:v=!1,flat:x=!1,legacy:y=!1,orthographic:A=!1,frameloop:T="always",dpr:w=[1,2],performance:M,raycaster:C,camera:S,onPointerMissed:R}=u,O=s.getState(),L=O.gl;O.gl||O.set({gl:L=lfe(f,t)});let B=O.raycaster;B||O.set({raycaster:B=new z5});const{params:N,...$}=C||{};if(jr.equ($,B,vd)||co(B,{...$}),jr.equ(N,B.params,vd)||co(B,{params:{...B.params,...N}}),!O.camera||O.camera===c&&!jr.equ(c,S,vd)){c=S;const se=S instanceof Qp,re=se?S:A?new Bi(0,0,0,0,.1,1e3):new mr(75,0,.1,1e3);se||(re.position.z=5,S&&co(re,S),!O.camera&&!(S!=null&&S.rotation)&&re.lookAt(0,0,0)),O.set({camera:re}),B.camera=re}if(!O.scene){let se;d instanceof vs?se=d:(se=new vs,d&&co(se,d)),O.set({scene:Kd(se)})}if(!O.xr){var U;const se=(X,W)=>{const K=s.getState();K.frameloop!=="never"&&H7(X,!0,K,W)},re=()=>{const X=s.getState();X.gl.xr.enabled=X.gl.xr.isPresenting,X.gl.xr.setAnimationLoop(X.gl.xr.isPresenting?se:null),X.gl.xr.isPresenting||ng(X)},Z={connect(){const X=s.getState().gl;X.xr.addEventListener("sessionstart",re),X.xr.addEventListener("sessionend",re)},disconnect(){const X=s.getState().gl;X.xr.removeEventListener("sessionstart",re),X.xr.removeEventListener("sessionend",re)}};typeof((U=L.xr)==null?void 0:U.addEventListener)=="function"&&Z.connect(),O.set({xr:Z})}if(L.shadowMap){const se=L.shadowMap.enabled,re=L.shadowMap.type;if(L.shadowMap.enabled=!!g,jr.boo(g))L.shadowMap.type=u1;else if(jr.str(g)){var Q;const Z={basic:Tk,percentage:LE,soft:u1,variance:il};L.shadowMap.type=(Q=Z[g])!=null?Q:u1}else jr.obj(g)&&Object.assign(L.shadowMap,g);(se!==L.shadowMap.enabled||re!==L.shadowMap.type)&&(L.shadowMap.needsUpdate=!0)}const Y=AU();Y&&("enabled"in Y?Y.enabled=!y:"legacyMode"in Y&&(Y.legacyMode=y)),co(L,{outputEncoding:v?3e3:3001,toneMapping:x?fl:o5}),O.legacy!==y&&O.set(()=>({legacy:y})),O.linear!==v&&O.set(()=>({linear:v})),O.flat!==x&&O.set(()=>({flat:x})),f&&!jr.fun(f)&&!LU(f)&&!jr.equ(f,L,vd)&&co(L,f),p&&!O.events.handlers&&O.set({events:p(s)});const P=cfe(t,h);return jr.equ(P,O.size,vd)||O.setSize(P.width,P.height,P.updateStyle,P.top,P.left),w&&O.viewport.dpr!==MU(w)&&O.setDpr(w),O.frameloop!==T&&O.setFrameloop(T),O.onPointerMissed||O.set({onPointerMissed:R}),M&&!jr.equ(M,O.performance,vd)&&O.set(se=>({performance:{...se.performance,...M}})),a=m,l=!0,this},render(u){return l||this.configure(),rg.updateContainer(E.createElement(ffe,{store:s,children:u,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){kU(t)}}}function ffe({store:t,children:e,onCreated:n,rootElement:r}){return Fg(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),E.createElement(h_.Provider,{value:t},e)}function kU(t,e){const n=Op.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),rg.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),Zue(i),Op.delete(t),e&&e(t)}catch{}},500)})}}function Hc(t,e,n){return E.createElement(hfe,{key:e.uuid,children:t,container:e,state:n})}function hfe({state:t={},children:e,container:n}){const{events:r,size:i,...s}=t,o=$5(),[a]=E.useState(()=>new z5),[l]=E.useState(()=>new qe),c=E.useCallback((f,h)=>{const d={...f};Object.keys(f).forEach(m=>{(ife.includes(m)||f[m]!==h[m]&&h[m])&&delete d[m]});let p;if(h&&i){const m=h.camera;p=f.viewport.getCurrentViewport(m,new J,i),m!==f.camera&&IU(m,i)}return{...d,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...h==null?void 0:h.events,...r},size:{...f.size,...i},viewport:{...f.viewport,...p},...s}},[t]),[u]=E.useState(()=>{const f=o.getState();return vU((d,p)=>({...f,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...f.events,...r},size:{...f.size,...i},...s,set:d,get:p,setEvents:m=>d(g=>({...g,events:{...g.events,...m}}))}))});return E.useEffect(()=>{const f=o.subscribe(h=>u.setState(d=>c(h,d)));return()=>{f(),u.destroy()}},[]),E.useEffect(()=>{u.setState(f=>c(o.getState(),f))},[c]),E.createElement(E.Fragment,null,rg.createPortal(E.createElement(h_.Provider,{value:u},e),u,null))}rg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:E.version});function dfe(t){let e;const n=new Set,r=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const h=e;e=u?f:Object.assign({},e,f),n.forEach(d=>d(e,h))}},i=()=>e,s=(c,u=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function d(){const p=u(e);if(!f(h,p)){const m=h;c(h=p,m)}}return n.add(d),()=>n.delete(d)},l={setState:r,getState:i,subscribe:(c,u,f)=>u||f?s(c,u,f):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const pfe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),G7=pfe?E.useEffect:E.useLayoutEffect;function FU(t){const e=typeof t=="function"?dfe(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=E.useReducer(g=>g+1,0),o=e.getState(),a=E.useRef(o),l=E.useRef(r),c=E.useRef(i),u=E.useRef(!1),f=E.useRef();f.current===void 0&&(f.current=r(o));let h,d=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(h=r(o),d=!i(f.current,h)),G7(()=>{d&&(f.current=h),a.current=o,l.current=r,c.current=i,u.current=!1});const p=E.useRef(o);G7(()=>{const g=()=>{try{const x=e.getState(),y=l.current(x);c.current(f.current,y)||(a.current=x,f.current=y,s())}catch{u.current=!0,s()}},v=e.subscribe(g);return e.getState()!==p.current&&g(),v},[]);const m=d?h:f.current;return E.useDebugValue(m),m};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}class mfe extends ki{constructor(e,n){super(),this.inputSource=null,this.xrControllerModel=null,this.index=e,this.controller=n.xr.getController(e),this.grip=n.xr.getControllerGrip(e),this.hand=n.xr.getHand(e),this.grip.userData.name="grip",this.controller.userData.name="controller",this.hand.userData.name="hand",this.visible=!1,this.add(this.controller,this.grip,this.hand),this._onConnected=this._onConnected.bind(this),this._onDisconnected=this._onDisconnected.bind(this),this.controller.addEventListener("connected",this._onConnected),this.controller.addEventListener("disconnected",this._onDisconnected)}_onConnected(e){e.fake||e.data&&(this.visible=!0,this.inputSource=e.data,this.dispatchEvent(e))}_onDisconnected(e){e.fake||(this.visible=!1,this.inputSource=null,this.dispatchEvent(e))}dispose(){this.controller.removeEventListener("connected",this._onConnected),this.controller.removeEventListener("disconnected",this._onDisconnected)}}var V7,W7;const gfe=t=>Array.from(new Set(t)),ol=typeof window<"u"&&((V7=window.document)!=null&&V7.createElement||((W7=window.navigator)==null?void 0:W7.product)==="ReactNative")?E.useLayoutEffect:E.useEffect;function zl(t){const e=E.useRef(t);return ol(()=>void(e.current=t),[t]),e}function yd(t,e,{handedness:n}={}){const r=zl(e),i=oi(s=>s.controllers);ol(()=>{const s=i.map(o=>{if(n&&o.inputSource&&o.inputSource.handedness!==n)return;const a=l=>r.current({nativeEvent:l,target:o});return o.controller.addEventListener(t,a),()=>o.controller.removeEventListener(t,a)});return()=>s.forEach(o=>o==null?void 0:o())},[i,n,t])}const j7=new yt;function vfe({children:t}){const e=wt(f=>f.events),n=wt(f=>f.get),r=wt(f=>f.raycaster),i=oi(f=>f.controllers),s=oi(f=>f.interactions),o=oi(f=>f.hoverState),a=oi(f=>f.hasInteraction),l=oi(f=>f.getInteraction),c=E.useCallback(f=>{const h=Array.from(s.keys());return j7.identity().extractRotation(f.matrixWorld),r.ray.origin.setFromMatrixPosition(f.matrixWorld),r.ray.direction.set(0,0,-1).applyMatrix4(j7),r.intersectObjects(h,!0)},[s,r]);rn(()=>{var f;if(s.size!==0)for(const h of i){if(!((f=h.inputSource)!=null&&f.handedness))return;const d=o[h.inputSource.handedness],p=new Set;let m=c(h.controller);if(e.filter)m=e.filter(m,n());else{const g=m.find(v=>v==null?void 0:v.object);g&&(m=[g])}for(const g of m){let v=g.object;for(;v;){if(a(v,"onHover")&&!d.has(v)){const y=l(v,"onHover");for(const A of y)A({target:h,intersection:g,intersections:m})}const x=l(v,"onMove");x==null||x.forEach(y=>y({target:h,intersection:g,intersections:m})),d.set(v,g),p.add(v.id),v=v.parent}}for(const g of d.keys())if(!p.has(g.id)){d.delete(g);const v=l(g,"onBlur");if(!v)continue;for(const x of v)x({target:h,intersections:m})}}});const u=E.useCallback(f=>h=>{var d;if(!((d=h.target.inputSource)!=null&&d.handedness))return;const p=o[h.target.inputSource.handedness],m=Array.from(new Set(p.values()));s.forEach((g,v)=>{var x,y,A;if(p.has(v)){if(!g[f])return;for(const T of g[f])(x=T.current)==null||x.call(T,{target:h.target,intersection:p.get(v),intersections:m})}else if(f==="onSelect"&&g.onSelectMissed)for(const T of g.onSelectMissed)(y=T.current)==null||y.call(T,{target:h.target,intersections:m});else if(f==="onSqueeze"&&g.onSqueezeMissed)for(const T of g.onSqueezeMissed)(A=T.current)==null||A.call(T,{target:h.target,intersections:m})})},[o,s]);return yd("select",u("onSelect")),yd("selectstart",u("onSelectStart")),yd("selectend",u("onSelectEnd")),yd("squeeze",u("onSqueeze")),yd("squeezeend",u("onSqueezeEnd")),yd("squeezestart",u("onSqueezeStart")),E.createElement(E.Fragment,null,t)}function Ja(t,e,n){const r=oi(o=>o.addInteraction),i=oi(o=>o.removeInteraction),s=zl(n);ol(()=>{const o=t.current;if(!(!o||!s.current))return r(o,e,s),()=>i(o,e,s)},[t,e,r,i])}const UU=E.forwardRef(function({onHover:e,onBlur:n,onSelectStart:r,onSelectEnd:i,onSelectMissed:s,onSelect:o,onSqueezeStart:a,onSqueezeEnd:l,onSqueezeMissed:c,onSqueeze:u,onMove:f,children:h},d){const p=E.useRef(null);return E.useImperativeHandle(d,()=>p.current),Ja(p,"onHover",e),Ja(p,"onBlur",n),Ja(p,"onSelectStart",r),Ja(p,"onSelectEnd",i),Ja(p,"onSelectMissed",s),Ja(p,"onSelect",o),Ja(p,"onSqueezeStart",a),Ja(p,"onSqueezeEnd",l),Ja(p,"onSqueezeMissed",c),Ja(p,"onSqueeze",u),Ja(p,"onMove",f),E.createElement("group",{ref:p},h)});E.forwardRef(function({onSelectStart:e,onSelectEnd:n,children:r,...i},s){const o=E.useRef(),a=E.useRef(null),l=E.useMemo(()=>new yt,[]);return E.useImperativeHandle(s,()=>a.current),rn(()=>{const c=o.current,u=a.current;c&&(u.applyMatrix4(l),u.applyMatrix4(c.matrixWorld),u.updateMatrixWorld(),l.copy(c.matrixWorld).invert())}),E.createElement(UU,{ref:a,onSelectStart:c=>{o.current=c.target.controller,l.copy(c.target.controller.matrixWorld).invert(),e==null||e(c)},onSelectEnd:c=>{c.target.controller===o.current&&(o.current=void 0),n==null||n(c)},...i},r)});const zU=E.createContext(null),ih=FU((t,e)=>({set:t,get:e,session:null,referenceSpaceType:null}));function yfe({foveation:t=0,frameRate:e=void 0,referenceSpace:n="local-floor",onSessionStart:r,onSessionEnd:i,onVisibilityChange:s,onInputSourcesChange:o,children:a}){const l=wt(y=>y.gl),c=wt(y=>y.camera),u=oi(y=>y.player),f=oi(y=>y.get),h=oi(y=>y.set),d=oi(y=>y.session),p=oi(y=>y.controllers),m=zl(r),g=zl(i),v=zl(s),x=zl(o);return ol(()=>{const y=[0,1].map(A=>{const T=new mfe(A,l),w=()=>h(C=>({controllers:[...C.controllers,T]})),M=()=>h(C=>({controllers:C.controllers.filter(S=>S!==T)}));return T.addEventListener("connected",w),T.addEventListener("disconnected",M),()=>{T.removeEventListener("connected",w),T.removeEventListener("disconnected",M)}});return()=>y.forEach(A=>A())},[l,h]),ol(()=>ih.subscribe(({session:y})=>h(()=>({session:y}))),[l.xr,h]),ol(()=>{l.xr.setFoveation(t),h(()=>({foveation:t}))},[l.xr,t,h]),ol(()=>{var y;try{e&&((y=d==null?void 0:d.updateTargetFrameRate)==null||y.call(d,e))}catch{}h(()=>({frameRate:e}))},[d,e,h]),ol(()=>{const y=ih.getState();l.xr.setReferenceSpaceType(n),h(()=>({referenceSpace:n})),y.set({referenceSpaceType:n})},[l.xr,n,h]),ol(()=>{if(!d)return void l.xr.setSession(null);const y=M=>{var C;h(()=>({isPresenting:!0})),(C=m.current)==null||C.call(m,{nativeEvent:{...M,target:d},target:d})},A=M=>{var C;h(()=>({isPresenting:!1,session:null})),ih.setState(()=>({session:null})),(C=g.current)==null||C.call(g,{nativeEvent:{...M,target:d},target:d})},T=M=>{var C;(C=v.current)==null||C.call(v,{nativeEvent:M,target:d})},w=M=>{var C;const S=Object.values(d.inputSources).some(R=>R.hand);h(()=>({isHandTracking:S})),(C=x.current)==null||C.call(x,{nativeEvent:M,target:d})};return l.xr.addEventListener("sessionstart",y),l.xr.addEventListener("sessionend",A),d.addEventListener("visibilitychange",T),d.addEventListener("inputsourceschange",w),l.xr.setSession(d).then(()=>{l.xr.setFoveation(f().foveation)}),()=>{l.xr.removeEventListener("sessionstart",y),l.xr.removeEventListener("sessionend",A),d.removeEventListener("visibilitychange",T),d.removeEventListener("inputsourceschange",w)}},[d,l.xr,h,f]),E.createElement(vfe,null,E.createElement("primitive",{object:u},E.createElement("primitive",{object:c}),p.map(y=>E.createElement("primitive",{key:y.index,object:y}))),a)}function xfe(t){const e=E.useMemo(()=>FU((n,r)=>({set:n,get:r,controllers:[],isPresenting:!1,isHandTracking:!1,player:new ki,session:null,foveation:0,referenceSpace:"local-floor",hoverState:{left:new Map,right:new Map,none:new Map},interactions:new Map,hasInteraction(i,s){var o;return!!((o=r().interactions.get(i))!=null&&o[s].some(a=>a.current))},getInteraction(i,s){var o;return(o=r().interactions.get(i))==null?void 0:o[s].reduce((a,l)=>(l.current&&a.push(l.current),a),[])},addInteraction(i,s,o){const a=r().interactions;a.has(i)||a.set(i,{onHover:[],onBlur:[],onSelect:[],onSelectEnd:[],onSelectStart:[],onSelectMissed:[],onSqueeze:[],onSqueezeEnd:[],onSqueezeStart:[],onSqueezeMissed:[],onMove:[]}),a.get(i)[s].push(o)},removeInteraction(i,s,o){const a=r().interactions.get(i);if(a){const l=a[s].indexOf(o);l!==-1&&a[s].splice(l,1)}}})),[]);return E.createElement(zU.Provider,{value:e},E.createElement(yfe,{...t}))}const Efe=(t,e)=>{var n;if(!(!t&&!e))return t&&!e?{optionalFeatures:[t]}:t&&e?{...e,optionalFeatures:gfe([...(n=e.optionalFeatures)!=null?n:[],t])}:e},_fe=async(t,e)=>{const n=ih.getState();if(n.session){console.warn("@react-three/xr: session already started, please stop it first");return}const r=Efe(n.referenceSpaceType,e),i=await navigator.xr.requestSession(t,r);return n.set(()=>({session:i})),i},bfe=async()=>{const t=ih.getState();if(!t.session){console.warn("@react-three/xr: no session to stop, please start it first");return}await t.session.end(),t.set({session:null})},Afe=async(t,{sessionInit:e,enterOnly:n,exitOnly:r}={})=>{const i=ih.getState();if(!(i.session&&n)&&!(!i.session&&r))return i.session?await bfe():await _fe(t,e)},Tfe=(t,e,n)=>{switch(t){case"entered":return`Exit ${e}`;case"exited":return`Enter ${e}`;case"unsupported":default:switch(n){case"https":return"HTTPS needed";case"security":return`${e} blocked`;case"unknown":default:return`${e} unsupported`}}},HU=E.forwardRef(function({mode:e,sessionInit:n,enterOnly:r=!1,exitOnly:i=!1,onClick:s,onError:o,children:a,...l},c){var u;const[f,h]=E.useState("exited"),[d,p]=E.useState("unknown"),m=Tfe(f,e,d),g=e==="inline"?e:`immersive-${e.toLowerCase()}`,v=zl(o);ol(()=>{if(!(navigator!=null&&navigator.xr))return void h("unsupported");navigator.xr.isSessionSupported(g).then(y=>{if(y)h("exited");else{const A=location.protocol==="https:";h("unsupported"),p(A?"unknown":"https")}}).catch(y=>{h("unsupported"),"name"in y&&y.name==="SecurityError"?p("security"):p("unknown")})},[g]),ol(()=>ih.subscribe(y=>{y.session?h("entered"):f!=="unsupported"&&h("exited")}),[f]);const x=E.useCallback(async y=>{s==null||s(y);try{Afe(g,{sessionInit:n,enterOnly:r,exitOnly:i})}catch(A){const T=v.current;if(T&&A instanceof Error)T(A);else throw A}},[s,g,n,r,i,v]);return E.createElement("button",{...l,ref:c,onClick:f==="unsupported"?s:x},(u=typeof a=="function"?a(f):a)!=null?u:m)}),GU={position:"absolute",bottom:"24px",left:"50%",transform:"translateX(-50%)",padding:"12px 24px",border:"1px solid white",borderRadius:"4px",background:"rgba(0, 0, 0, 0.1)",color:"white",font:"normal 0.8125rem sans-serif",outline:"none",zIndex:99999,cursor:"pointer"},wfe=E.forwardRef(({style:t=GU,sessionInit:e={domOverlay:typeof document<"u"?{root:document.body}:void 0,optionalFeatures:["hit-test","dom-overlay","dom-overlay-for-handheld-ar"]},children:n,...r},i)=>E.createElement(HU,{...r,ref:i,mode:"AR",style:t,sessionInit:e},n)),Sfe=E.forwardRef(({style:t=GU,sessionInit:e={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]},children:n,...r},i)=>E.createElement(HU,{...r,ref:i,mode:"VR",style:t,sessionInit:e},n));function oi(t=n=>n,e){const n=E.useContext(zU);if(!n)throw new Error("useXR must be used within an <XR /> component!");return n(t,e)}function l2(t){const e=oi(r=>r.controllers);return E.useMemo(()=>e.find(({inputSource:r})=>(r==null?void 0:r.handedness)&&r.handedness===t),[t,e])}var VU="Expected a function",$7=0/0,Cfe="[object Symbol]",Mfe=/^\s+|\s+$/g,Rfe=/^[-+]0x[0-9a-f]+$/i,Ife=/^0b[01]+$/i,Pfe=/^0o[0-7]+$/i,Lfe=parseInt,Nfe=typeof Cr=="object"&&Cr&&Cr.Object===Object&&Cr,Ofe=typeof self=="object"&&self&&self.Object===Object&&self,Dfe=Nfe||Ofe||Function("return this")(),Bfe=Object.prototype,kfe=Bfe.toString,Ffe=Math.max,Ufe=Math.min,c2=function(){return Dfe.Date.now()};function zfe(t,e,n){var r,i,s,o,a,l,c=0,u=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(VU);e=X7(e)||0,V3(n)&&(u=!!n.leading,f="maxWait"in n,s=f?Ffe(X7(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function d(w){var M=r,C=i;return r=i=void 0,c=w,o=t.apply(C,M),o}function p(w){return c=w,a=setTimeout(v,e),u?d(w):o}function m(w){var M=w-l,C=w-c,S=e-M;return f?Ufe(S,s-C):S}function g(w){var M=w-l,C=w-c;return l===void 0||M>=e||M<0||f&&C>=s}function v(){var w=c2();if(g(w))return x(w);a=setTimeout(v,m(w))}function x(w){return a=void 0,h&&r?d(w):(r=i=void 0,o)}function y(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function A(){return a===void 0?o:x(c2())}function T(){var w=c2(),M=g(w);if(r=arguments,i=this,l=w,M){if(a===void 0)return p(l);if(f)return a=setTimeout(v,e),d(l)}return a===void 0&&(a=setTimeout(v,e)),o}return T.cancel=y,T.flush=A,T}function Hfe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(VU);return V3(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),zfe(t,e,{leading:r,maxWait:e,trailing:i})}function V3(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Gfe(t){return!!t&&typeof t=="object"}function Vfe(t){return typeof t=="symbol"||Gfe(t)&&kfe.call(t)==Cfe}function X7(t){if(typeof t=="number")return t;if(Vfe(t))return $7;if(V3(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=V3(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Mfe,"");var n=Ife.test(t);return n||Pfe.test(t)?Lfe(t.slice(2),n?2:8):Rfe.test(t)?$7:+t}var Wfe=Hfe;const jfe=go(Wfe),e1=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"];function Y7(t){return t!=null&&t.joints?e1.map(e=>{var n,r;return(r=(n=t.joints[e])==null?void 0:n.position)==null?void 0:r.toArray()}):[]}function $fe({_key:t="hands",children:e,fps:n=30,left:r,right:i,showLeft:s=!0,showRight:o=!0,stream:a=!1,...l}){const{sendMsg:c}=E.useContext(Ur),{isPresenting:u}=oi(),f=E.useRef(),h=E.useRef(),d=l2("left"),p=l2("right"),m=l2("none"),g=E.useCallback(jfe(()=>{var v,x,y,A,T,w,M,C;const S={keys:e1};i||(S.leftLandmarks=Y7(d==null?void 0:d.hand),S.leftHand=(y=(x=(v=d==null?void 0:d.hand)==null?void 0:v.joints.wrist)==null?void 0:x.matrix)==null?void 0:y.toArray(),S.leftState=(A=d==null?void 0:d.hand)==null?void 0:A.inputState),r||(S.rightLandmarks=Y7(p==null?void 0:p.hand),S.rightHand=(M=(w=(T=p==null?void 0:p.hand)==null?void 0:T.joints.wrist)==null?void 0:w.matrix)==null?void 0:M.toArray(),S.rightState=(C=p==null?void 0:p.hand)==null?void 0:C.inputState),setTimeout(()=>c({etype:"HAND_MOVE",key:t,value:S}),0)},1e3/n,{leading:!0,trailing:!0}),[n,c,u,d,p,m,r,i,a]);return rn(function(v){var x,y;if(!u)return;const A=(x=d==null?void 0:d.hand)==null?void 0:x.joints,T=(y=p==null?void 0:p.hand)==null?void 0:y.joints,w=f.current,M=h.current,C=!i&&!!(d!=null&&d.hand.visible),S=!r&&!!(p!=null&&p.hand.visible);w&&(w.visible=C),M&&(M.visible=S),!(!(d!=null&&d.hand.visible)&&!(p!=null&&p.hand.visible))&&(e1.forEach((R,O)=>{var L,B,N,$;A&&w&&(w.children[O].position.copy((L=A[R])==null?void 0:L.position),w.children[O].rotation.copy((B=A[R])==null?void 0:B.rotation)),T&&M&&(M.children[O].position.copy((N=T[R])==null?void 0:N.position),M.children[O].rotation.copy(($=T[R])==null?void 0:$.rotation))}),a&&g())}),!u||!d&&!p?null:ce.jsxs("group",{children:[i||!s?null:ce.jsx("group",{ref:f,children:e1.map((v,x)=>ce.jsxs("mesh",{children:[ce.jsx("boxGeometry",{args:[.01,.01,.01]}),ce.jsx("meshStandardMaterial",{attach:"material",color:"#ff4444",roughness:.1})]},v))}),r||!o?null:ce.jsx("group",{ref:h,children:e1.map((v,x)=>ce.jsxs("mesh",{children:[ce.jsx("boxGeometry",{args:[.01,.01,.01]}),ce.jsx("meshStandardMaterial",{attach:"material",color:"#23aaff",roughness:.1})]},v))})]})}var WU={};(function(t){var e=Cr&&Cr.__assign||function(){return e=Object.assign||function(p){for(var m,g=1,v=arguments.length;g<v;g++){m=arguments[g];for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&(p[x]=m[x])}return p},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n;(function(p){p.Browser="browser",p.Server="server",p.Native="native"})(n=t.Device||(t.Device={}));var r=n.Browser,i=n.Server,s=n.Native,o=!!(typeof window<"u"&&window.document&&window.document.createElement),a=typeof navigator<"u"&&navigator.product=="ReactNative",l=a?s:o?r:i,c={isBrowser:l===r,isServer:l===i,isNative:l===s,device:l,canUseWorkers:typeof Worker<"u",canUseEventListeners:l===r&&!!window.addEventListener,canUseViewport:l===r&&!!window.screen},u=function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];return p.reduce(function(g,v){return e(e({},g),v)},{})},f=function(p){return Object.keys(p).map(function(m){return p[m]})},h=function(){return u((f(c),c))},d=h();t.weAreServer=function(){c.isServer=!0,d=h()},t.useSSR=function(){return d},t.default=t.useSSR})(WU);const jU=go(WU);var p_={};Object.defineProperty(p_,"__esModule",{value:!0});var m1=Ue;p_.isObject=function(t){return Object.prototype.toString.call(t)==="[object Object]"};var Xfe=function(){var t=m1.useRef(!1);return m1.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),t};function $U(t,e){e===void 0&&(e=!0);var n=Xfe(),r=m1.useState(t),i=r[0],s=r[1],o=m1.useRef(i),a=m1.useCallback(function(l){!n.current&&e||(o.current=typeof l=="function"?l(o.current):l,s(o.current))},[]);return[o,a]}p_.useRefState=$U;var Yfe=p_.default=$U,Us;(function(t){t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.PATCH="PATCH",t.POST="POST",t.PUT="PUT",t.CONNECT="CONNECT",t.TRACE="TRACE"})(Us||(Us={}));var Dp;(function(t){t.CACHE_FIRST="cache-first",t.CACHE_AND_NETWORK="cache-and-network",t.NETWORK_ONLY="network-only",t.CACHE_ONLY="cache-only",t.NO_CACHE="no-cache",t.EXACT_CACHE_AND_NETWORK="exact-cache-and-network"})(Dp||(Dp={}));var X5=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},Y5=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},qfe=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r};function Ra(t,e,n,r,i,s,o,a){if(n===void 0&&(n=""),r===void 0&&(r=""),i===void 0&&(i=""),s===void 0&&(s=""),o===void 0&&(o=""),a===void 0&&(a=""),!t){var l=void 0;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,o,a],u=0;l=new Error(e.replace(/%s/g,function(){return c[u++]})),l.name="Invariant Violation"}throw l}}var g1=function(t){return typeof t=="string"},up=function(t){return Object.prototype.toString.call(t)==="[object Object]"},xd=function(t){return up(t)||Array.isArray(t)},Sc=function(t){return typeof t=="function"},Kfe=function(t){if(!t)return{};var e=["body","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];return e.reduce(function(n,r){return r in t&&(n[r]=t[r]),n},{})},q7=function(t){return t==null},ig;(function(t){t.Browser="browser",t.Server="server",t.Native="native"})(ig||(ig={}));var Jfe=ig.Browser,XU=ig.Server,Qfe=ig.Native,Zfe=!!(typeof window<"u"&&window.document&&window.document.createElement),ehe=typeof navigator<"u"&&navigator.product==="ReactNative",the=ehe?Qfe:Zfe?Jfe:XU,K7=the===XU,nhe=function(t,e,n){return X5(void 0,void 0,void 0,function(){var r,i;return Y5(this,function(s){switch(s.label){case 0:if(typeof t>"u")throw Error("Response cannot be undefined... 😵");if(typeof n>"u")throw Error("responseType cannot be undefined... 😵");if(r=Array.isArray(n)?n:[n],r[0]==null)throw Error("could not parse data from response 😵");return[4,YU(t,r)];case 1:return i=s.sent(),[2,!q7(e)&&q7(i)?e:i]}})})},YU=function(t,e,n){return n===void 0&&(n=0),X5(void 0,void 0,void 0,function(){var r;return Y5(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t.clone()[e[n]]()];case 1:return[2,i.sent()];case 2:if(r=i.sent(),e.length-1===n)throw r;return[2,YU(t.clone(),e,++n)];case 3:return[2]}})})},qU=["headers","ok","redirected","trailer","status","statusText","type","url","body","bodyUsed","data"],KU=["clone","arrayBuffer","blob","formData","json","text"],rhe=qfe(qU,KU),JU=function(t,e){return Object.defineProperties({},rhe.reduce(function(n,r){return qU.includes(r)?n[r]={get:function(){var i=t instanceof Response?t:t&&t.current;if(i){if(r==="data")return e.current;var s="clone"in i?i.clone():{};return s[r]}},enumerable:!0}:KU.includes(r)&&(n[r]={value:function(){var i=t instanceof Response?t:t&&t.current;if(i){var s="clone"in i?i.clone():{};return s[r]()}},enumerable:!0}),n},{}))};JU();var ihe=function(t){var e={};return t.forEach(function(n,r){e[r]=n}),e},she=function(t){return X5(void 0,void 0,void 0,function(){var e,n,r,i;return Y5(this,function(s){switch(s.label){case 0:return[4,t.text()];case 1:return e=s.sent(),n=t.status,r=t.statusText,i=ihe(t.headers),[2,{body:e,status:n,statusText:r,headers:i}]}})})};function ohe(t){var e=E.useRef();return JSON.stringify(t)!==JSON.stringify(e.current)&&(e.current=t),e.current}var ahe=function(t,e){return E.useCallback(t,ohe(e))},lhe=function(t){return new Promise(function(e){return setTimeout(e,t)})},che=function(t){return Number.isInteger(t)&&t>0},J7=function(t,e){var n=new Error(e);return n.name=t+"",n},Q7=function(t,e){return t?e?e.endsWith("/")&&t.startsWith("/")?t.substr(1):!e.endsWith("/")&&!t.startsWith("/")&&!t.startsWith("?")&&!t.startsWith("&")&&!e.includes("?")?"/"+t:t:t.startsWith("?")||t.startsWith("&")||t.startsWith("/")?t:"/"+t:""},uhe=E.createContext({url:"",options:{},graphql:!1}),fp=globalThis&&globalThis.__assign||function(){return fp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},fp.apply(this,arguments)},QU={host:"",path:void 0,customOptions:{cacheLife:0,cachePolicy:Dp.CACHE_FIRST,interceptors:{},onAbort:function(){},onError:function(){},onNewData:function(t,e){return e},onTimeout:function(){},perPage:0,persist:!1,responseType:["json","text","blob","arrayBuffer"],retries:0,retryDelay:1e3,retryOn:[],suspense:!1,timeout:0,data:void 0,loading:!1},requestInit:{headers:{Accept:"application/json, text/plain, */*"}},dependencies:void 0};const c0=Object.entries(QU).reduce(function(t,e){var n,r=e[0],i=e[1];return up(i)?fp(fp({},t),i):fp(fp({},t),(n={},n[r]=i,n))},{});var Mo=globalThis&&globalThis.__assign||function(){return Mo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Mo.apply(this,arguments)};function fhe(t,e,n){Ra(!(up(t)&&up(e)),"You cannot have a 2nd parameter of useFetch as object when your first argument is an object.");var r=E.useContext(uhe),i=E.useMemo(function(){var x=t;return g1(x)&&x.includes("://")?x:r.url?r.url:c0.host},[r.url,t]),s=E.useMemo(function(){var x=t;if(g1(x)&&!x.includes("://"))return x},[t]),o=E.useMemo(function(){if(Sc(t))return t;if(Sc(e))return e},[]),a=E.useMemo(function(){var x={headers:{}};up(t)?x=t:up(e)&&(x=e);var y=r.options,A=Mo(Mo(Mo(Mo({},c0),y),x),{headers:Mo(Mo(Mo({},c0.headers),y.headers),x.headers),interceptors:Mo(Mo(Mo({},c0.interceptors),y.interceptors),x.interceptors)});return o?o(A):A},[t,o,r.options]),l=E.useMemo(function(){return Kfe(a)},[a]),c=E.useMemo(function(){return Array.isArray(e)?e:Array.isArray(n)?n:c0.dependencies},[e,n]),u=a.cacheLife,f=a.retries,h=a.retryDelay,d=a.retryOn;Ra(Number.isInteger(u)&&u>=0,"`cacheLife` must be a number >= 0"),Ra(Number.isInteger(f)&&f>=0,"`retries` must be a number >= 0"),Ra(Sc(h)||Number.isInteger(h)&&h>=0,"`retryDelay` must be a positive number or a function returning a positive number.");var p=Sc(d)||Array.isArray(d)&&d.every(che);Ra(p,"`retryOn` must be an array of positive numbers or a function returning a boolean.");var m=a.loading||Array.isArray(c),g=E.useMemo(function(){var x={};return"request"in a.interceptors&&(x.request=a.interceptors.request),"response"in a.interceptors&&(x.response=a.interceptors.response),x},[a]),v=E.useMemo(function(){var x=Object.keys(QU.customOptions),y=x.reduce(function(A,T){return A[T]=a[T],A},{});return Mo(Mo({},y),{interceptors:g,loading:m})},[g,m]);return{host:i,path:s,customOptions:v,requestInit:l,dependencies:c}}var v1=globalThis&&globalThis.__assign||function(){return v1=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},v1.apply(this,arguments)},Z7=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},eI=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},tI=Us.GET;function hhe(t,e,n,r,i,s,o,a,l,c){return Z7(this,void 0,void 0,function(){var u,f,h,d,p,m,g,v,x=this;return eI(this,function(y){switch(y.label){case 0:return Ra(!(xd(a)&&xd(l)),"If first argument of "+e.toLowerCase()+"() is an object, you cannot have a 2nd argument. 😜"),Ra(!(e===tI&&xd(a)),"You can only have query params as 1st argument of request.get()"),Ra(!(e===tI&&l!==void 0),"You can only have query params as 1st argument of request.get()"),u=function(){return!K7&&a instanceof URLSearchParams?"?"+a:g1(a)?a:""}(),f=""+s+Q7(o,s)+Q7(u),h=function(){return a instanceof FormData?a:xd(a)?JSON.stringify(a):!K7&&(l instanceof FormData||l instanceof URLSearchParams)?l:xd(l)||g1(l)?JSON.stringify(l):xd(t.body)||g1(l)?JSON.stringify(t.body):null}(),d=function(){var A=(t.headers||{})["Content-Type"],T=!!A||[Us.POST,Us.PUT,Us.PATCH].includes(e)&&!(h instanceof FormData),w=v1({},t.headers);if(T)w["Content-Type"]=A||"application/json";else if(Object.keys(w).length===0)return null;return w}(),[4,function(){return Z7(x,void 0,void 0,function(){var A,T;return eI(this,function(w){switch(w.label){case 0:return A=v1(v1({},t),{method:e,signal:n.signal}),d!==null?A.headers=d:delete A.headers,h!==null&&(A.body=h),c?[4,c({options:A,url:s,path:o,route:u})]:[3,2];case 1:return T=w.sent(),[2,T];case 2:return[2,A]}})})}()];case 1:return p=y.sent(),m=Object.entries({url:f,method:e,body:p.body||""}).map(function(A){var T=A[0],w=A[1];return T+":"+w}).join("||"),g={url:f,options:p},v={},[4,i.has(m)];case 2:return v.isCached=y.sent(),v.id=m,[4,i.get(m)];case 3:return[2,(g.response=(v.cached=y.sent(),v),g)]}})})}var u0=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},f0=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},y1="useHTTPcache",h0=function(){try{return JSON.parse(localStorage.getItem(y1)||"{}")}catch{return localStorage.removeItem(y1),{}}},dhe=function(t){var e=t.cacheLife,n=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return u0(void 0,void 0,void 0,function(){var u;return f0(this,function(f){return u=h0(),l.forEach(function(h){return delete u[h]}),localStorage.setItem(y1,JSON.stringify(u)),[2]})})},r=function(l){var c=h0(),u=c[l]||{},f=u.expiration,h=u.response,d=f>0&&f<Date.now();return d&&n(l),d||!h},i=function(l){return u0(void 0,void 0,void 0,function(){return f0(this,function(c){return[2,!r(l)]})})},s=function(l){return u0(void 0,void 0,void 0,function(){var c,u,f,h,d,p;return f0(this,function(m){return r(l)?[2]:(c=h0(),u=c[l].response,f=u.body,h=u.headers,d=u.status,p=u.statusText,[2,new Response(f,{status:d,statusText:p,headers:new Headers(h||{})})])})})},o=function(l,c){return u0(void 0,void 0,void 0,function(){var u,f,h,d;return f0(this,function(p){switch(p.label){case 0:return u=h0(),f=u,h=l,d={},[4,she(c)];case 1:return f[h]=(d.response=p.sent(),d.expiration=Date.now()+e,d),localStorage.setItem(y1,JSON.stringify(u)),[2]}})})},a=function(){return u0(void 0,void 0,void 0,function(){return f0(this,function(l){return localStorage.setItem(y1,JSON.stringify({})),[2]})})};return Object.defineProperties(h0(),{get:{value:s,writable:!1},set:{value:o,writable:!1},has:{value:i,writable:!1},delete:{value:n,writable:!1},clear:{value:a,writable:!1}})},d0=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},p0=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},dc={},phe=function(t){var e=t.cacheLife,n=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return d0(void 0,void 0,void 0,function(){var u,f,h;return p0(this,function(d){for(u=0,f=l;u<f.length;u++)h=f[u],delete dc[h],delete dc[h+":ts"];return[2]})})},r=function(l){var c=dc[l+":ts"],u=c>0&&c<Date.now();return u&&n(l),u||!dc[l]},i=function(l){return d0(void 0,void 0,void 0,function(){return p0(this,function(c){return r(l)?[2]:[2,dc[l]]})})},s=function(l,c){return d0(void 0,void 0,void 0,function(){return p0(this,function(u){return dc[l]=c,dc[l+":ts"]=e>0?Date.now()+e:0,[2]})})},o=function(l){return d0(void 0,void 0,void 0,function(){return p0(this,function(c){return[2,!r(l)]})})},a=function(){return d0(void 0,void 0,void 0,function(){return p0(this,function(l){return dc={},[2]})})};return Object.defineProperties(dc,{get:{value:i,writable:!1,configurable:!0},set:{value:s,writable:!1,configurable:!0},has:{value:o,writable:!1,configurable:!0},delete:{value:n,writable:!1,configurable:!0},clear:{value:a,writable:!1,configurable:!0}})},mhe=Dp.NETWORK_ONLY,ghe=Dp.NO_CACHE,vhe=function(t){var e=t.persist,n=t.cacheLife,r=t.cachePolicy,i=jU(),s=i.isNative,o=i.isServer;return Ra(!(o&&e),"There is no persistent storage on the Server currently! 🙅‍♂️"),Ra(!(s&&e),"React Native support for persistent cache is not yet implemented. 🙅‍♂️"),Ra(!(e&&[ghe,mhe].includes(r)),"You cannot use option 'persist' with cachePolicy: "+r+" 🙅‍♂️"),e?dhe({cacheLife:n||24*36e5}):phe({cacheLife:n})},W3=globalThis&&globalThis.__assign||function(){return W3=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},W3.apply(this,arguments)},u2=globalThis&&globalThis.__awaiter||function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},f2=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},yhe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},nI=Dp.CACHE_FIRST;function xhe(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=fhe.apply(void 0,e),i=r.host,s=r.path,o=r.customOptions,a=r.requestInit,l=r.dependencies,c=o.cacheLife,u=o.cachePolicy,f=o.interceptors,h=o.onAbort,d=o.onError,p=o.onNewData,m=o.onTimeout,g=o.perPage,v=o.persist,x=o.responseType,y=o.retries,A=o.retryDelay,T=o.retryOn,w=o.suspense,M=o.timeout,C=yhe(o,["cacheLife","cachePolicy","interceptors","onAbort","onError","onNewData","onTimeout","perPage","persist","responseType","retries","retryDelay","retryOn","suspense","timeout"]),S=vhe({persist:v,cacheLife:c,cachePolicy:u}),R=jU().isServer,O=E.useRef(),L=E.useRef({}),B=E.useRef(C.data),N=E.useRef(!1),$=E.useRef(0),U=E.useRef(),Q=E.useRef(!0),Y=E.useRef("pending"),ee=E.useRef(),ne=E.useRef(!1),P=Yfe(C.loading),se=P[0],re=P[1],Z=E.useReducer(function(){return{}},[])[1],X=ahe(function(xe){var Me=function(Oe,be){return u2(t,void 0,void 0,function(){var Te,Re,$e,ve,me,We,Xe,xt,fe,ie,z,F,Ae,Je,Le,te,z,F,ae,ye,Le;return f2(this,function(ke){switch(ke.label){case 0:return R?[2]:(O.current=new AbortController,O.current.signal.onabort=h,Te=O.current,[4,hhe(a,xe,Te,c,S,i,s,Oe,be,f.request)]);case 1:if(Re=ke.sent(),$e=Re.url,ve=Re.options,me=Re.response,U.current=void 0,g>0&&!Q.current&&!U.current)return[2,B.current];w||re(!0),We=M&&setTimeout(function(){N.current=!0,Te.abort(),m&&m()},M),ke.label=2;case 2:return ke.trys.push([2,17,23,24]),me.isCached&&u===nI?(xt=me.cached,[3,5]):[3,3];case 3:return[4,fetch($e,ve)];case 4:xt=ke.sent().clone(),ke.label=5;case 5:return L.current=xt.clone(),[4,nhe(xt,C.data,x)];case 6:return Xe=ke.sent(),L.current.data=p(B.current,Xe),fe=L,f.response?[4,f.response({response:L.current,request:a})]:[3,8];case 7:return ie=ke.sent(),[3,9];case 8:ie=L.current,ke.label=9;case 9:return fe.current=ie,Ra("data"in L.current,"You must have `data` field on the Response returned from your `interceptors.response`"),B.current=L.current.data,z={attempt:$.current,response:xt},Ae=!Sc(T)&&Array.isArray(T)&&T.length<1&&(xt==null?void 0:xt.ok)===!1||Array.isArray(T)&&T.includes(xt.status),Ae?[3,12]:(Je=Sc(T),Je?[4,T(z)]:[3,11]);case 10:Je=ke.sent(),ke.label=11;case 11:Ae=Je,ke.label=12;case 12:return F=Ae&&y>0&&y>$.current,F?[4,he(z,Oe,be)]:[3,14];case 13:return Le=ke.sent(),[2,Le];case 14:return u===nI&&!me.isCached?[4,S.set(me.id,xt.clone())]:[3,16];case 15:ke.sent(),ke.label=16;case 16:return Array.isArray(B.current)&&B.current.length%g&&(Q.current=!1),[3,24];case 17:return te=ke.sent(),$.current>=y&&N.current&&(U.current=J7("AbortError","Timeout Error")),z={attempt:$.current,error:te},ae=!Sc(T)&&Array.isArray(T)&&T.length<1,ae?[3,20]:(ye=Sc(T),ye?[4,T(z)]:[3,19]);case 18:ye=ke.sent(),ke.label=19;case 19:ae=ye,ke.label=20;case 20:return F=ae&&y>0&&y>$.current,F?[4,he(z,Oe,be)]:[3,22];case 21:return Le=ke.sent(),[2,Le];case 22:return te.name!=="AbortError"&&(U.current=te),[3,24];case 23:return N.current=!1,We&&clearTimeout(We),O.current=void 0,[7];case 24:return xt&&!xt.ok&&!U.current&&(U.current=J7(xt.status,xt.statusText)),w||re(!1),$.current===y&&($.current=0),U.current&&d({error:U.current}),[2,B.current]}})})},he=function(Oe,be,Te){return u2(t,void 0,void 0,function(){var Re,$e;return f2(this,function(ve){switch(ve.label){case 0:return Re=Sc(A)?A(Oe):A,Number.isInteger(Re)&&Re>=0||console.error("retryDelay must be a number >= 0! If you're using it as a function, it must also return a number >= 0."),$.current++,Re?[4,lhe(Re)]:[3,2];case 1:ve.sent(),ve.label=2;case 2:return[4,Me(be,Te)];case 3:return $e=ve.sent(),[2,$e]}})})};return w?function(){for(var Oe=[],be=0;be<arguments.length;be++)Oe[be]=arguments[be];return u2(t,void 0,void 0,function(){var Te;return f2(this,function(Re){switch(Re.label){case 0:return ee.current=Me.apply(void 0,Oe).then(function($e){return Y.current="success",$e},function(){Y.current="error"}),Z(),[4,ee.current];case 1:return Te=Re.sent(),[2,Te]}})})}:Me},[R,h,a,i,s,f,u,g,M,v,c,m,C.data,p,Z,w]),W=E.useCallback(X(Us.POST),[X]),K=E.useCallback(X(Us.DELETE),[X]),ge=E.useMemo(function(){return Object.defineProperties({get:X(Us.GET),post:W,patch:X(Us.PATCH),put:X(Us.PUT),options:X(Us.OPTIONS),head:X(Us.HEAD),connect:X(Us.CONNECT),trace:X(Us.TRACE),del:K,delete:K,abort:function(){return O.current&&O.current.abort()},query:function(xe,Me){return W({query:xe,variables:Me})},mutate:function(xe,Me){return W({mutation:xe,variables:Me})},cache:S},{loading:{get:function(){return se.current}},error:{get:function(){return U.current}},data:{get:function(){return B.current}}})},[X]),Se=E.useMemo(function(){return JU(L,B)},[]);if(E.useEffect(function(){if(ne.current=!0,Array.isArray(l)){var xe=a.method||Us.GET,Me=xe.toLowerCase(),he=ge[Me];he()}return function(){return ne.current=!1}},l),E.useEffect(function(){return ge.abort},[]),w&&ee.current){if(R)throw new Error("Suspense on server side is not yet supported! 🙅‍♂️");switch(Y.current){case"pending":throw ee.current;case"error":throw U.current}}return Object.assign([ge,Se,se.current,U.current],W3(W3({request:ge,response:Se},ge),{loading:se.current,data:B.current,error:U.current}))}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function ZU(t){return typeof t>"u"||t===null}function Ehe(t){return typeof t=="object"&&t!==null}function _he(t){return Array.isArray(t)?t:ZU(t)?[]:[t]}function bhe(t,e){var n,r,i,s;if(e)for(s=Object.keys(e),n=0,r=s.length;n<r;n+=1)i=s[n],t[i]=e[i];return t}function Ahe(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}function The(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var whe=ZU,She=Ehe,Che=_he,Mhe=Ahe,Rhe=The,Ihe=bhe,Qi={isNothing:whe,isObject:She,toArray:Che,repeat:Mhe,isNegativeZero:Rhe,extend:Ihe};function ez(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}function sg(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=ez(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}sg.prototype=Object.create(Error.prototype);sg.prototype.constructor=sg;sg.prototype.toString=function(e){return this.name+": "+ez(this,e)};var uo=sg;function h2(t,e,n,r,i){var s="",o="",a=Math.floor(i/2)-1;return r-e>a&&(s=" ... ",e=r-a+s.length),n-r>a&&(o=" ...",n=r+a-o.length),{str:s+t.slice(e,n).replace(/\t/g,"→")+o,pos:r-e+s.length}}function d2(t,e){return Qi.repeat(" ",e-t.length)+t}function Phe(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],s,o=-1;s=n.exec(t.buffer);)i.push(s.index),r.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var a="",l,c,u=Math.min(t.line+e.linesAfter,i.length).toString().length,f=e.maxLength-(e.indent+u+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)c=h2(t.buffer,r[o-l],i[o-l],t.position-(r[o]-r[o-l]),f),a=Qi.repeat(" ",e.indent)+d2((t.line-l+1).toString(),u)+" | "+c.str+`
`+a;for(c=h2(t.buffer,r[o],i[o],t.position,f),a+=Qi.repeat(" ",e.indent)+d2((t.line+1).toString(),u)+" | "+c.str+`
`,a+=Qi.repeat("-",e.indent+u+3+c.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=i.length);l++)c=h2(t.buffer,r[o+l],i[o+l],t.position-(r[o]-r[o+l]),f),a+=Qi.repeat(" ",e.indent)+d2((t.line+l+1).toString(),u)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var Lhe=Phe,Nhe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Ohe=["scalar","sequence","mapping"];function Dhe(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}function Bhe(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(Nhe.indexOf(n)===-1)throw new uo('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Dhe(e.styleAliases||null),Ohe.indexOf(this.kind)===-1)throw new uo('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ms=Bhe;function rI(t,e){var n=[];return t[e].forEach(function(r){var i=n.length;n.forEach(function(s,o){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(i=o)}),n[i]=r}),n}function khe(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}function RS(t){return this.extend(t)}RS.prototype.extend=function(e){var n=[],r=[];if(e instanceof Ms)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new uo("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof Ms))throw new uo("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new uo("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new uo("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof Ms))throw new uo("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(RS.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=rI(i,"implicit"),i.compiledExplicit=rI(i,"explicit"),i.compiledTypeMap=khe(i.compiledImplicit,i.compiledExplicit),i};var tz=RS,nz=new Ms("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),rz=new Ms("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),iz=new Ms("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),sz=new tz({explicit:[nz,rz,iz]});function Fhe(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Uhe(){return null}function zhe(t){return t===null}var oz=new Ms("tag:yaml.org,2002:null",{kind:"scalar",resolve:Fhe,construct:Uhe,predicate:zhe,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Hhe(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Ghe(t){return t==="true"||t==="True"||t==="TRUE"}function Vhe(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var az=new Ms("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Hhe,construct:Ghe,predicate:Vhe,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Whe(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function jhe(t){return 48<=t&&t<=55}function $he(t){return 48<=t&&t<=57}function Xhe(t){if(t===null)return!1;var e=t.length,n=0,r=!1,i;if(!e)return!1;if(i=t[n],(i==="-"||i==="+")&&(i=t[++n]),i==="0"){if(n+1===e)return!0;if(i=t[++n],i==="b"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!Whe(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!jhe(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<e;n++)if(i=t[n],i!=="_"){if(!$he(t.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function Yhe(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function qhe(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Qi.isNegativeZero(t)}var lz=new Ms("tag:yaml.org,2002:int",{kind:"scalar",resolve:Xhe,construct:Yhe,predicate:qhe,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Khe=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Jhe(t){return!(t===null||!Khe.test(t)||t[t.length-1]==="_")}function Qhe(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var Zhe=/^[-+]?[0-9]+e/;function ede(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Qi.isNegativeZero(t))return"-0.0";return n=t.toString(10),Zhe.test(n)?n.replace("e",".e"):n}function tde(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Qi.isNegativeZero(t))}var cz=new Ms("tag:yaml.org,2002:float",{kind:"scalar",resolve:Jhe,construct:Qhe,predicate:tde,represent:ede,defaultStyle:"lowercase"}),uz=sz.extend({implicit:[oz,az,lz,cz]}),fz=uz,hz=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),dz=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function nde(t){return t===null?!1:hz.exec(t)!==null||dz.exec(t)!==null}function rde(t){var e,n,r,i,s,o,a,l=0,c=null,u,f,h;if(e=hz.exec(t),e===null&&(e=dz.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(u=+e[10],f=+(e[11]||0),c=(u*60+f)*6e4,e[9]==="-"&&(c=-c)),h=new Date(Date.UTC(n,r,i,s,o,a,l)),c&&h.setTime(h.getTime()-c),h}function ide(t){return t.toISOString()}var pz=new Ms("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:nde,construct:rde,instanceOf:Date,represent:ide});function sde(t){return t==="<<"||t===null}var mz=new Ms("tag:yaml.org,2002:merge",{kind:"scalar",resolve:sde}),q5=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function ode(t){if(t===null)return!1;var e,n,r=0,i=t.length,s=q5;for(n=0;n<i;n++)if(e=s.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function ade(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,s=q5,o=0,a=[];for(e=0;e<i;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(r.charAt(e));return n=i%4*6,n===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):n===18?(a.push(o>>10&255),a.push(o>>2&255)):n===12&&a.push(o>>4&255),new Uint8Array(a)}function lde(t){var e="",n=0,r,i,s=t.length,o=q5;for(r=0;r<s;r++)r%3===0&&r&&(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]),n=(n<<8)+t[r];return i=s%3,i===0?(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]):i===2?(e+=o[n>>10&63],e+=o[n>>4&63],e+=o[n<<2&63],e+=o[64]):i===1&&(e+=o[n>>2&63],e+=o[n<<4&63],e+=o[64],e+=o[64]),e}function cde(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var gz=new Ms("tag:yaml.org,2002:binary",{kind:"scalar",resolve:ode,construct:ade,predicate:cde,represent:lde}),ude=Object.prototype.hasOwnProperty,fde=Object.prototype.toString;function hde(t){if(t===null)return!0;var e=[],n,r,i,s,o,a=t;for(n=0,r=a.length;n<r;n+=1){if(i=a[n],o=!1,fde.call(i)!=="[object Object]")return!1;for(s in i)if(ude.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function dde(t){return t!==null?t:[]}var vz=new Ms("tag:yaml.org,2002:omap",{kind:"sequence",resolve:hde,construct:dde}),pde=Object.prototype.toString;function mde(t){if(t===null)return!0;var e,n,r,i,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1){if(r=o[e],pde.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;s[e]=[i[0],r[i[0]]]}return!0}function gde(t){if(t===null)return[];var e,n,r,i,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1)r=o[e],i=Object.keys(r),s[e]=[i[0],r[i[0]]];return s}var yz=new Ms("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:mde,construct:gde}),vde=Object.prototype.hasOwnProperty;function yde(t){if(t===null)return!0;var e,n=t;for(e in n)if(vde.call(n,e)&&n[e]!==null)return!1;return!0}function xde(t){return t!==null?t:{}}var xz=new Ms("tag:yaml.org,2002:set",{kind:"mapping",resolve:yde,construct:xde}),K5=fz.extend({implicit:[pz,mz],explicit:[gz,vz,yz,xz]}),Wu=Object.prototype.hasOwnProperty,j3=1,Ez=2,_z=3,$3=4,p2=1,Ede=2,iI=3,_de=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,bde=/[\x85\u2028\u2029]/,Ade=/[,\[\]\{\}]/,bz=/^(?:!|!!|![a-z\-]+!)$/i,Az=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function sI(t){return Object.prototype.toString.call(t)}function Wl(t){return t===10||t===13}function sh(t){return t===9||t===32}function Oo(t){return t===9||t===32||t===10||t===13}function hp(t){return t===44||t===91||t===93||t===123||t===125}function Tde(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function wde(t){return t===120?2:t===117?4:t===85?8:0}function Sde(t){return 48<=t&&t<=57?t-48:-1}function oI(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}function Cde(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Tz=new Array(256),wz=new Array(256);for(var Ed=0;Ed<256;Ed++)Tz[Ed]=oI(Ed)?1:0,wz[Ed]=oI(Ed);function Mde(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||K5,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Sz(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=Lhe(n),new uo(e,n)}function xn(t,e){throw Sz(t,e)}function X3(t,e){t.onWarning&&t.onWarning.call(null,Sz(t,e))}var aI={YAML:function(e,n,r){var i,s,o;e.version!==null&&xn(e,"duplication of %YAML directive"),r.length!==1&&xn(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&xn(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&xn(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&X3(e,"unsupported YAML version of the document")},TAG:function(e,n,r){var i,s;r.length!==2&&xn(e,"TAG directive accepts exactly two arguments"),i=r[0],s=r[1],bz.test(i)||xn(e,"ill-formed tag handle (first argument) of the TAG directive"),Wu.call(e.tagMap,i)&&xn(e,'there is a previously declared suffix for "'+i+'" tag handle'),Az.test(s)||xn(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{xn(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s}};function Pu(t,e,n,r){var i,s,o,a;if(e<n){if(a=t.input.slice(e,n),r)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||xn(t,"expected valid JSON character");else _de.test(a)&&xn(t,"the stream contains non-printable characters");t.result+=a}}function lI(t,e,n,r){var i,s,o,a;for(Qi.isObject(n)||xn(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),o=0,a=i.length;o<a;o+=1)s=i[o],Wu.call(e,s)||(e[s]=n[s],r[s]=!0)}function dp(t,e,n,r,i,s,o,a,l){var c,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,u=i.length;c<u;c+=1)Array.isArray(i[c])&&xn(t,"nested arrays are not supported inside keys"),typeof i=="object"&&sI(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&sI(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)lI(t,e,s[c],n);else lI(t,e,s,n);else!t.json&&!Wu.call(n,i)&&Wu.call(e,i)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,xn(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete n[i];return e}function J5(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):xn(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Yi(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);i!==0;){for(;sh(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Wl(i))for(J5(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&X3(t,"deficient indentation"),r}function m_(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Oo(n)))}function Q5(t,e){e===1?t.result+=" ":e>1&&(t.result+=Qi.repeat(`
`,e-1))}function Rde(t,e,n){var r,i,s,o,a,l,c,u,f=t.kind,h=t.result,d;if(d=t.input.charCodeAt(t.position),Oo(d)||hp(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(i=t.input.charCodeAt(t.position+1),Oo(i)||n&&hp(i)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,a=!1;d!==0;){if(d===58){if(i=t.input.charCodeAt(t.position+1),Oo(i)||n&&hp(i))break}else if(d===35){if(r=t.input.charCodeAt(t.position-1),Oo(r))break}else{if(t.position===t.lineStart&&m_(t)||n&&hp(d))break;if(Wl(d))if(l=t.line,c=t.lineStart,u=t.lineIndent,Yi(t,!1,-1),t.lineIndent>=e){a=!0,d=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=l,t.lineStart=c,t.lineIndent=u;break}}a&&(Pu(t,s,o,!1),Q5(t,t.line-l),s=o=t.position,a=!1),sh(d)||(o=t.position+1),d=t.input.charCodeAt(++t.position)}return Pu(t,s,o,!1),t.result?!0:(t.kind=f,t.result=h,!1)}function Ide(t,e){var n,r,i;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(Pu(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,i=t.position;else return!0;else Wl(n)?(Pu(t,r,i,!0),Q5(t,Yi(t,!1,e)),r=i=t.position):t.position===t.lineStart&&m_(t)?xn(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);xn(t,"unexpected end of the stream within a single quoted scalar")}function Pde(t,e){var n,r,i,s,o,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Pu(t,n,t.position,!0),t.position++,!0;if(a===92){if(Pu(t,n,t.position,!0),a=t.input.charCodeAt(++t.position),Wl(a))Yi(t,!1,e);else if(a<256&&Tz[a])t.result+=wz[a],t.position++;else if((o=wde(a))>0){for(i=o,s=0;i>0;i--)a=t.input.charCodeAt(++t.position),(o=Tde(a))>=0?s=(s<<4)+o:xn(t,"expected hexadecimal character");t.result+=Cde(s),t.position++}else xn(t,"unknown escape sequence");n=r=t.position}else Wl(a)?(Pu(t,n,r,!0),Q5(t,Yi(t,!1,e)),n=r=t.position):t.position===t.lineStart&&m_(t)?xn(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}xn(t,"unexpected end of the stream within a double quoted scalar")}function Lde(t,e){var n=!0,r,i,s,o=t.tag,a,l=t.anchor,c,u,f,h,d,p=Object.create(null),m,g,v,x;if(x=t.input.charCodeAt(t.position),x===91)u=93,d=!1,a=[];else if(x===123)u=125,d=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),x=t.input.charCodeAt(++t.position);x!==0;){if(Yi(t,!0,e),x=t.input.charCodeAt(t.position),x===u)return t.position++,t.tag=o,t.anchor=l,t.kind=d?"mapping":"sequence",t.result=a,!0;n?x===44&&xn(t,"expected the node content, but found ','"):xn(t,"missed comma between flow collection entries"),g=m=v=null,f=h=!1,x===63&&(c=t.input.charCodeAt(t.position+1),Oo(c)&&(f=h=!0,t.position++,Yi(t,!0,e))),r=t.line,i=t.lineStart,s=t.position,Bp(t,e,j3,!1,!0),g=t.tag,m=t.result,Yi(t,!0,e),x=t.input.charCodeAt(t.position),(h||t.line===r)&&x===58&&(f=!0,x=t.input.charCodeAt(++t.position),Yi(t,!0,e),Bp(t,e,j3,!1,!0),v=t.result),d?dp(t,a,p,g,m,v,r,i,s):f?a.push(dp(t,null,p,g,m,v,r,i,s)):a.push(m),Yi(t,!0,e),x=t.input.charCodeAt(t.position),x===44?(n=!0,x=t.input.charCodeAt(++t.position)):n=!1}xn(t,"unexpected end of the stream within a flow collection")}function Nde(t,e){var n,r,i=p2,s=!1,o=!1,a=e,l=0,c=!1,u,f;if(f=t.input.charCodeAt(t.position),f===124)r=!1;else if(f===62)r=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)p2===i?i=f===43?iI:Ede:xn(t,"repeat of a chomping mode identifier");else if((u=Sde(f))>=0)u===0?xn(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?xn(t,"repeat of an indentation width identifier"):(a=e+u-1,o=!0);else break;if(sh(f)){do f=t.input.charCodeAt(++t.position);while(sh(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!Wl(f)&&f!==0)}for(;f!==0;){for(J5(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),Wl(f)){l++;continue}if(t.lineIndent<a){i===iI?t.result+=Qi.repeat(`
`,s?1+l:l):i===p2&&s&&(t.result+=`
`);break}for(r?sh(f)?(c=!0,t.result+=Qi.repeat(`
`,s?1+l:l)):c?(c=!1,t.result+=Qi.repeat(`
`,l+1)):l===0?s&&(t.result+=" "):t.result+=Qi.repeat(`
`,l):t.result+=Qi.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,n=t.position;!Wl(f)&&f!==0;)f=t.input.charCodeAt(++t.position);Pu(t,n,t.position,!1)}return!0}function cI(t,e){var n,r=t.tag,i=t.anchor,s=[],o,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,xn(t,"tab characters must not be used in indentation")),!(l!==45||(o=t.input.charCodeAt(t.position+1),!Oo(o))));){if(a=!0,t.position++,Yi(t,!0,-1)&&t.lineIndent<=e){s.push(null),l=t.input.charCodeAt(t.position);continue}if(n=t.line,Bp(t,e,_z,!1,!0),s.push(t.result),Yi(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&l!==0)xn(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=r,t.anchor=i,t.kind="sequence",t.result=s,!0):!1}function Ode(t,e,n){var r,i,s,o,a,l,c=t.tag,u=t.anchor,f={},h=Object.create(null),d=null,p=null,m=null,g=!1,v=!1,x;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),x=t.input.charCodeAt(t.position);x!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,xn(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),s=t.line,(x===63||x===58)&&Oo(r))x===63?(g&&(dp(t,f,h,d,p,null,o,a,l),d=p=m=null),v=!0,g=!0,i=!0):g?(g=!1,i=!0):xn(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,x=r;else{if(o=t.line,a=t.lineStart,l=t.position,!Bp(t,n,Ez,!1,!0))break;if(t.line===s){for(x=t.input.charCodeAt(t.position);sh(x);)x=t.input.charCodeAt(++t.position);if(x===58)x=t.input.charCodeAt(++t.position),Oo(x)||xn(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(dp(t,f,h,d,p,null,o,a,l),d=p=m=null),v=!0,g=!1,i=!1,d=t.tag,p=t.result;else if(v)xn(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=u,!0}else if(v)xn(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=u,!0}if((t.line===s||t.lineIndent>e)&&(g&&(o=t.line,a=t.lineStart,l=t.position),Bp(t,e,$3,!0,i)&&(g?p=t.result:m=t.result),g||(dp(t,f,h,d,p,m,o,a,l),d=p=m=null),Yi(t,!0,-1),x=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&x!==0)xn(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&dp(t,f,h,d,p,null,o,a,l),v&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=f),v}function Dde(t){var e,n=!1,r=!1,i,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&xn(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(n=!0,o=t.input.charCodeAt(++t.position)):o===33?(r=!0,i="!!",o=t.input.charCodeAt(++t.position)):i="!",e=t.position,n){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):xn(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Oo(o);)o===33&&(r?xn(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),bz.test(i)||xn(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),Ade.test(s)&&xn(t,"tag suffix cannot contain flow indicator characters")}s&&!Az.test(s)&&xn(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{xn(t,"tag name is malformed: "+s)}return n?t.tag=s:Wu.call(t.tagMap,i)?t.tag=t.tagMap[i]+s:i==="!"?t.tag="!"+s:i==="!!"?t.tag="tag:yaml.org,2002:"+s:xn(t,'undeclared tag handle "'+i+'"'),!0}function Bde(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&xn(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Oo(n)&&!hp(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&xn(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function kde(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Oo(r)&&!hp(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&xn(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Wu.call(t.anchorMap,n)||xn(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Yi(t,!0,-1),!0}function Bp(t,e,n,r,i){var s,o,a,l=1,c=!1,u=!1,f,h,d,p,m,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=a=$3===n||_z===n,r&&Yi(t,!0,-1)&&(c=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;Dde(t)||Bde(t);)Yi(t,!0,-1)?(c=!0,a=s,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=c||i),(l===1||$3===n)&&(j3===n||Ez===n?m=e:m=e+1,g=t.position-t.lineStart,l===1?a&&(cI(t,g)||Ode(t,g,m))||Lde(t,m)?u=!0:(o&&Nde(t,m)||Ide(t,m)||Pde(t,m)?u=!0:kde(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&xn(t,"alias node should not have any properties")):Rde(t,m,j3===n)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(u=a&&cI(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&xn(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,h=t.implicitTypes.length;f<h;f+=1)if(p=t.implicitTypes[f],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Wu.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,d=t.typeMap.multi[t.kind||"fallback"],f=0,h=d.length;f<h;f+=1)if(t.tag.slice(0,d[f].tag.length)===d[f].tag){p=d[f];break}p||xn(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&xn(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):xn(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function Fde(t){var e=t.position,n,r,i,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(Yi(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),n=t.position;o!==0&&!Oo(o);)o=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),i=[],r.length<1&&xn(t,"directive name must not be less than one character in length");o!==0;){for(;sh(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!Wl(o));break}if(Wl(o))break;for(n=t.position;o!==0&&!Oo(o);)o=t.input.charCodeAt(++t.position);i.push(t.input.slice(n,t.position))}o!==0&&J5(t),Wu.call(aI,r)?aI[r](t,r,i):X3(t,'unknown document directive "'+r+'"')}if(Yi(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Yi(t,!0,-1)):s&&xn(t,"directives end mark is expected"),Bp(t,t.lineIndent-1,$3,!1,!0),Yi(t,!0,-1),t.checkLineBreaks&&bde.test(t.input.slice(e,t.position))&&X3(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&m_(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Yi(t,!0,-1));return}if(t.position<t.length-1)xn(t,"end of the stream or a document separator is expected");else return}function Cz(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new Mde(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,xn(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Fde(n);return n.documents}function Ude(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=Cz(t,n);if(typeof e!="function")return r;for(var i=0,s=r.length;i<s;i+=1)e(r[i])}function zde(t,e){var n=Cz(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new uo("expected a single document in the stream, but found more")}}var Hde=Ude,Gde=zde,Mz={loadAll:Hde,load:Gde},Rz=Object.prototype.toString,Iz=Object.prototype.hasOwnProperty,Z5=65279,Vde=9,og=10,Wde=13,jde=32,$de=33,Xde=34,IS=35,Yde=37,qde=38,Kde=39,Jde=42,Pz=44,Qde=45,Y3=58,Zde=61,epe=62,tpe=63,npe=64,Lz=91,Nz=93,rpe=96,Oz=123,ipe=124,Dz=125,Ys={};Ys[0]="\\0";Ys[7]="\\a";Ys[8]="\\b";Ys[9]="\\t";Ys[10]="\\n";Ys[11]="\\v";Ys[12]="\\f";Ys[13]="\\r";Ys[27]="\\e";Ys[34]='\\"';Ys[92]="\\\\";Ys[133]="\\N";Ys[160]="\\_";Ys[8232]="\\L";Ys[8233]="\\P";var spe=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],ope=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ape(t,e){var n,r,i,s,o,a,l;if(e===null)return{};for(n={},r=Object.keys(e),i=0,s=r.length;i<s;i+=1)o=r[i],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=t.compiledTypeMap.fallback[o],l&&Iz.call(l.styleAliases,a)&&(a=l.styleAliases[a]),n[o]=a;return n}function lpe(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new uo("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Qi.repeat("0",r-e.length)+e}var cpe=1,ag=2;function upe(t){this.schema=t.schema||K5,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Qi.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=ape(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?ag:cpe,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function uI(t,e){for(var n=Qi.repeat(" ",e),r=0,i=-1,s="",o,a=t.length;r<a;)i=t.indexOf(`
`,r),i===-1?(o=t.slice(r),r=a):(o=t.slice(r,i+1),r=i+1),o.length&&o!==`
`&&(s+=n),s+=o;return s}function PS(t,e){return`
`+Qi.repeat(" ",t.indent*e)}function fpe(t,e){var n,r,i;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(i=t.implicitTypes[n],i.resolve(e))return!0;return!1}function q3(t){return t===jde||t===Vde}function lg(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Z5||65536<=t&&t<=1114111}function fI(t){return lg(t)&&t!==Z5&&t!==Wde&&t!==og}function hI(t,e,n){var r=fI(t),i=r&&!q3(t);return(n?r:r&&t!==Pz&&t!==Lz&&t!==Nz&&t!==Oz&&t!==Dz)&&t!==IS&&!(e===Y3&&!i)||fI(e)&&!q3(e)&&t===IS||e===Y3&&i}function hpe(t){return lg(t)&&t!==Z5&&!q3(t)&&t!==Qde&&t!==tpe&&t!==Y3&&t!==Pz&&t!==Lz&&t!==Nz&&t!==Oz&&t!==Dz&&t!==IS&&t!==qde&&t!==Jde&&t!==$de&&t!==ipe&&t!==Zde&&t!==epe&&t!==Kde&&t!==Xde&&t!==Yde&&t!==npe&&t!==rpe}function dpe(t){return!q3(t)&&t!==Y3}function t1(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function Bz(t){var e=/^\n* /;return e.test(t)}var kz=1,LS=2,Fz=3,Uz=4,Qd=5;function ppe(t,e,n,r,i,s,o,a){var l,c=0,u=null,f=!1,h=!1,d=r!==-1,p=-1,m=hpe(t1(t,0))&&dpe(t1(t,t.length-1));if(e||o)for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=t1(t,l),!lg(c))return Qd;m=m&&hI(c,u,a),u=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=t1(t,l),c===og)f=!0,d&&(h=h||l-p-1>r&&t[p+1]!==" ",p=l);else if(!lg(c))return Qd;m=m&&hI(c,u,a),u=c}h=h||d&&l-p-1>r&&t[p+1]!==" "}return!f&&!h?m&&!o&&!i(t)?kz:s===ag?Qd:LS:n>9&&Bz(t)?Qd:o?s===ag?Qd:LS:h?Uz:Fz}function mpe(t,e,n,r,i){t.dump=function(){if(e.length===0)return t.quotingType===ag?'""':"''";if(!t.noCompatMode&&(spe.indexOf(e)!==-1||ope.test(e)))return t.quotingType===ag?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,n),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),a=r||t.flowLevel>-1&&n>=t.flowLevel;function l(c){return fpe(t,c)}switch(ppe(e,a,t.indent,o,l,t.quotingType,t.forceQuotes&&!r,i)){case kz:return e;case LS:return"'"+e.replace(/'/g,"''")+"'";case Fz:return"|"+dI(e,t.indent)+pI(uI(e,s));case Uz:return">"+dI(e,t.indent)+pI(uI(gpe(e,o),s));case Qd:return'"'+vpe(e)+'"';default:throw new uo("impossible error: invalid scalar style")}}()}function dI(t,e){var n=Bz(t)?String(e):"",r=t[t.length-1]===`
`,i=r&&(t[t.length-2]===`
`||t===`
`),s=i?"+":r?"":"-";return n+s+`
`}function pI(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function gpe(t,e){for(var n=/(\n+)([^\n]*)/g,r=function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,n.lastIndex=c,mI(t.slice(0,c),e)}(),i=t[0]===`
`||t[0]===" ",s,o;o=n.exec(t);){var a=o[1],l=o[2];s=l[0]===" ",r+=a+(!i&&!s&&l!==""?`
`:"")+mI(l,e),i=s}return r}function mI(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,i=0,s,o=0,a=0,l="";r=n.exec(t);)a=r.index,a-i>e&&(s=o>i?o:a,l+=`
`+t.slice(i,s),i=s+1),o=a;return l+=`
`,t.length-i>e&&o>i?l+=t.slice(i,o)+`
`+t.slice(o+1):l+=t.slice(i),l.slice(1)}function vpe(t){for(var e="",n=0,r,i=0;i<t.length;n>=65536?i+=2:i++)n=t1(t,i),r=Ys[n],!r&&lg(n)?(e+=t[i],n>=65536&&(e+=t[i+1])):e+=r||lpe(n);return e}function ype(t,e,n){var r="",i=t.tag,s,o,a;for(s=0,o=n.length;s<o;s+=1)a=n[s],t.replacer&&(a=t.replacer.call(n,String(s),a)),(Gc(t,e,a,!1,!1)||typeof a>"u"&&Gc(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=i,t.dump="["+r+"]"}function gI(t,e,n,r){var i="",s=t.tag,o,a,l;for(o=0,a=n.length;o<a;o+=1)l=n[o],t.replacer&&(l=t.replacer.call(n,String(o),l)),(Gc(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&Gc(t,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=PS(t,e)),t.dump&&og===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}function xpe(t,e,n){var r="",i=t.tag,s=Object.keys(n),o,a,l,c,u;for(o=0,a=s.length;o<a;o+=1)u="",r!==""&&(u+=", "),t.condenseFlow&&(u+='"'),l=s[o],c=n[l],t.replacer&&(c=t.replacer.call(n,l,c)),Gc(t,e,l,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Gc(t,e,c,!1,!1)&&(u+=t.dump,r+=u));t.tag=i,t.dump="{"+r+"}"}function Epe(t,e,n,r){var i="",s=t.tag,o=Object.keys(n),a,l,c,u,f,h;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new uo("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)h="",(!r||i!=="")&&(h+=PS(t,e)),c=o[a],u=n[c],t.replacer&&(u=t.replacer.call(n,c,u)),Gc(t,e+1,c,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&og===t.dump.charCodeAt(0)?h+="?":h+="? "),h+=t.dump,f&&(h+=PS(t,e)),Gc(t,e+1,u,!0,f)&&(t.dump&&og===t.dump.charCodeAt(0)?h+=":":h+=": ",h+=t.dump,i+=h));t.tag=s,t.dump=i||"{}"}function vI(t,e,n){var r,i,s,o,a,l;for(i=n?t.explicitTypes:t.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(n?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,Rz.call(a.represent)==="[object Function]")r=a.represent(e,l);else if(Iz.call(a.represent,l))r=a.represent[l](e,l);else throw new uo("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=r}return!0}return!1}function Gc(t,e,n,r,i,s,o){t.tag=null,t.dump=n,vI(t,n,!1)||vI(t,n,!0);var a=Rz.call(t.dump),l=r,c;r&&(r=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",f,h;if(u&&(f=t.duplicates.indexOf(n),h=f!==-1),(t.tag!==null&&t.tag!=="?"||h||t.indent!==2&&e>0)&&(i=!1),h&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(u&&h&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),a==="[object Object]")r&&Object.keys(t.dump).length!==0?(Epe(t,e,t.dump,i),h&&(t.dump="&ref_"+f+t.dump)):(xpe(t,e,t.dump),h&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?gI(t,e-1,t.dump,i):gI(t,e,t.dump,i),h&&(t.dump="&ref_"+f+t.dump)):(ype(t,e,t.dump),h&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&mpe(t,t.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new uo("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}function _pe(t,e){var n=[],r=[],i,s;for(NS(t,n,r),i=0,s=r.length;i<s;i+=1)e.duplicates.push(n[r[i]]);e.usedDuplicates=new Array(s)}function NS(t,e,n){var r,i,s;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)NS(t[i],e,n);else for(r=Object.keys(t),i=0,s=r.length;i<s;i+=1)NS(t[r[i]],e,n)}function bpe(t,e){e=e||{};var n=new upe(e);n.noRefs||_pe(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Gc(n,0,r,!0,!0)?n.dump+`
`:""}var Ape=bpe,Tpe={dump:Ape};function eC(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var wpe=Ms,Spe=tz,Cpe=sz,Mpe=uz,Rpe=fz,Ipe=K5,Ppe=Mz.load,Lpe=Mz.loadAll,Npe=Tpe.dump,Ope=uo,Dpe={binary:gz,float:cz,map:iz,null:oz,pairs:yz,set:xz,timestamp:pz,bool:az,int:lz,merge:mz,omap:vz,seq:rz,str:nz},Bpe=eC("safeLoad","load"),kpe=eC("safeLoadAll","loadAll"),Fpe=eC("safeDump","dump"),Upe={Type:wpe,Schema:Spe,FAILSAFE_SCHEMA:Cpe,JSON_SCHEMA:Mpe,CORE_SCHEMA:Rpe,DEFAULT_SCHEMA:Ipe,load:Ppe,loadAll:Lpe,dump:Npe,YAMLException:Ope,types:Dpe,safeLoad:Bpe,safeLoadAll:kpe,safeDump:Fpe};function OS(t,e,n){var r,i,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,n||(a=t.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(a=t.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=t.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}OS.debounce=OS;var zpe=OS;const yI=go(zpe);function Hpe(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=E.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=E.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,f=E.useRef(!1);E.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[h,d,p]=E.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:y,top:A,width:T,height:w,bottom:M,right:C,x:S,y:R}=l.current.element.getBoundingClientRect(),O={left:y,top:A,width:T,height:w,bottom:M,right:C,x:S,y:R};l.current.element instanceof HTMLElement&&i&&(O.height=l.current.element.offsetHeight,O.width=l.current.element.offsetWidth),Object.freeze(O),f.current&&!jpe(l.current.lastBounds,O)&&a(l.current.lastBounds=O)};return[x,u?yI(x,u):x,c?yI(x,c):x]},[a,i,c,u]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function g(){l.current.element&&(l.current.resizeObserver=new s(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",p,{capture:!0,passive:!0})))}const v=x=>{!x||x===l.current.element||(m(),l.current.element=x,l.current.scrollContainers=zz(x),g())};return Vpe(p,!!n),Gpe(d),E.useEffect(()=>{m(),g()},[n,p,d]),E.useEffect(()=>m,[]),[v,o,h]}function Gpe(t){E.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function Vpe(t,e){E.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function zz(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...zz(t.parentElement)]}const Wpe=["x","y","top","bottom","left","right","width","height"],jpe=(t,e)=>Wpe.every(n=>t[n]===e[n]);var $pe=Object.defineProperty,Xpe=Object.defineProperties,Ype=Object.getOwnPropertyDescriptors,xI=Object.getOwnPropertySymbols,qpe=Object.prototype.hasOwnProperty,Kpe=Object.prototype.propertyIsEnumerable,EI=(t,e,n)=>e in t?$pe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_I=(t,e)=>{for(var n in e||(e={}))qpe.call(e,n)&&EI(t,n,e[n]);if(xI)for(var n of xI(e))Kpe.call(e,n)&&EI(t,n,e[n]);return t},Jpe=(t,e)=>Xpe(t,Ype(e));function Hz(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=Hz(r,e,n);if(i)return i;r=e?null:r.sibling}}function Gz(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const tC=Gz(E.createContext(null));class Vz extends E.Component{render(){return E.createElement(tC.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:bI,ReactCurrentDispatcher:AI}=E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Qpe(){const t=E.useContext(tC);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=E.useId();return E.useMemo(()=>{for(const r of[bI==null?void 0:bI.current,t,t==null?void 0:t.alternate]){if(!r)continue;const i=Hz(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function Zpe(){var t,e;const n=Qpe(),[r]=E.useState(()=>new Map);r.clear();let i=n;for(;i;){const s=(t=i.type)==null?void 0:t._context;s&&s!==tC&&!r.has(s)&&r.set(s,(e=AI==null?void 0:AI.current)==null?void 0:e.readContext(Gz(s))),i=i.return}return r}function eme(){const t=Zpe();return E.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>E.createElement(e,null,E.createElement(n.Provider,Jpe(_I({},r),{value:t.get(n)}))),e=>E.createElement(Vz,_I({},e))),[t])}const m2={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function tme(t){const{handlePointer:e}=rfe(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(m2).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=m2[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=m2[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const nme=E.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=tme,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:h,orthographic:d,frameloop:p,dpr:m,performance:g,raycaster:v,camera:x,scene:y,onPointerMissed:A,onCreated:T,...w},M){E.useMemo(()=>Fi(Uue),[]);const C=eme(),[S,R]=Hpe({scroll:!0,debounce:{scroll:50,resize:0},...r}),O=E.useRef(null),L=E.useRef(null);E.useImperativeHandle(M,()=>O.current);const B=wU(A),[N,$]=E.useState(!1),[U,Q]=E.useState(!1);if(N)throw N;if(U)throw U;const Y=E.useRef(null);Fg(()=>{const ne=O.current;R.width>0&&R.height>0&&ne&&(Y.current||(Y.current=ufe(ne)),Y.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:h,orthographic:d,frameloop:p,dpr:m,performance:g,raycaster:v,camera:x,scene:y,size:R,onPointerMissed:(...P)=>B.current==null?void 0:B.current(...P),onCreated:P=>{P.events.connect==null||P.events.connect(a?que(a)?a.current:a:L.current),l&&P.setEvents({compute:(se,re)=>{const Z=se[l+"X"],X=se[l+"Y"];re.pointer.set(Z/re.size.width*2-1,-(X/re.size.height)*2+1),re.raycaster.setFromCamera(re.pointer,re.camera)}}),T==null||T(P)}}),Y.current.render(E.createElement(C,null,E.createElement(SU,{set:Q},E.createElement(E.Suspense,{fallback:E.createElement(Kue,{set:$})},e)))))}),E.useEffect(()=>{const ne=O.current;if(ne)return()=>kU(ne)},[]);const ee=a?"none":"auto";return E.createElement("div",Ct({ref:L,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ee,...i}},w),E.createElement("div",{ref:S,style:{width:"100%",height:"100%"}},E.createElement("canvas",{ref:O,style:{display:"block"}},n)))}),Wz=E.forwardRef(function(e,n){return E.createElement(Vz,null,E.createElement(nme,Ct({},e,{ref:n})))});var nC,TI=pE;nC=TI.createRoot,TI.hydrateRoot;const Ug=new J,rC=new J,rme=new J,wI=new qe;function ime(t,e,n){const r=Ug.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,s=n.height/2;return[r.x*i+i,-(r.y*s)+s]}function sme(t,e){const n=Ug.setFromMatrixPosition(t.matrixWorld),r=rC.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),s=e.getWorldDirection(rme);return i.angleTo(s)>Math.PI/2}function ome(t,e,n,r){const i=Ug.setFromMatrixPosition(t.matrixWorld),s=i.clone();s.project(e),wI.set(s.x,s.y),n.setFromCamera(wI,e);const o=n.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(n.ray.origin)<a}return!0}function ame(t,e){if(e instanceof Bi)return e.zoom;if(e instanceof mr){const n=Ug.setFromMatrixPosition(t.matrixWorld),r=rC.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=n.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function lme(t,e,n){if(e instanceof mr||e instanceof Bi){const r=Ug.setFromMatrixPosition(t.matrixWorld),i=rC.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const DS=t=>Math.abs(t)<1e-10?0:t;function jz(t,e,n=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=DS(e[i]*t.elements[i])+(i!==15?",":")");return n+r}const cme=(t=>e=>jz(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),ume=(t=>(e,n)=>jz(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function fme(t){return t&&typeof t=="object"&&"current"in t}const am=E.forwardRef(({children:t,eps:e=.001,style:n,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:f,onOcclude:h,castShadow:d,receiveShadow:p,material:m,geometry:g,zIndexRange:v=[16777271,0],calculatePosition:x=ime,as:y="div",wrapperClass:A,pointerEvents:T="auto",...w},M)=>{const{gl:C,camera:S,scene:R,size:O,raycaster:L,events:B,viewport:N}=wt(),[$]=E.useState(()=>document.createElement(y)),U=E.useRef(),Q=E.useRef(null),Y=E.useRef(0),ee=E.useRef([0,0]),ne=E.useRef(null),P=E.useRef(null),se=(a==null?void 0:a.current)||B.connected||C.domElement.parentNode,re=E.useRef(null),Z=E.useRef(!1),X=E.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&fme(f[0]),[f]);E.useLayoutEffect(()=>{const xe=C.domElement;f&&f==="blending"?(xe.style.zIndex=`${Math.floor(v[0]/2)}`,xe.style.position="absolute",xe.style.pointerEvents="none"):(xe.style.zIndex=null,xe.style.position=null,xe.style.pointerEvents=null)},[f]),E.useLayoutEffect(()=>{if(Q.current){const xe=U.current=nC($);if(R.updateMatrixWorld(),u)$.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Me=x(Q.current,S,O);$.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Me[0]}px,${Me[1]}px,0);transform-origin:0 0;`}return se&&(i?se.prepend($):se.appendChild($)),()=>{se&&se.removeChild($),xe.unmount()}}},[se,u]),E.useLayoutEffect(()=>{A&&($.className=A)},[A]);const W=E.useMemo(()=>u?{position:"absolute",top:0,left:0,width:O.width,height:O.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-O.height/2,left:-O.width/2,width:O.width,height:O.height},...n},[n,s,o,O,u]),K=E.useMemo(()=>({position:"absolute",pointerEvents:T}),[T]);E.useLayoutEffect(()=>{if(Z.current=!1,u){var xe;(xe=U.current)==null||xe.render(E.createElement("div",{ref:ne,style:W},E.createElement("div",{ref:P,style:K},E.createElement("div",{ref:M,className:r,style:n,children:t}))))}else{var Me;(Me=U.current)==null||Me.render(E.createElement("div",{ref:M,style:W,className:r,children:t}))}});const ge=E.useRef(!0);rn(xe=>{if(Q.current){S.updateMatrixWorld(),Q.current.updateWorldMatrix(!0,!1);const Me=u?ee.current:x(Q.current,S,O);if(u||Math.abs(Y.current-S.zoom)>e||Math.abs(ee.current[0]-Me[0])>e||Math.abs(ee.current[1]-Me[1])>e){const he=sme(Q.current,S);let Oe=!1;X&&(Array.isArray(f)?Oe=f.map($e=>$e.current):f!=="blending"&&(Oe=[R]));const be=ge.current;if(Oe){const $e=ome(Q.current,S,L,Oe);ge.current=$e&&!he}else ge.current=!he;be!==ge.current&&(h?h(!ge.current):$.style.display=ge.current?"block":"none");const Te=Math.floor(v[0]/2),Re=f?X?[v[0],Te]:[Te-1,0]:v;if($.style.zIndex=`${lme(Q.current,S,Re)}`,u){const[$e,ve]=[O.width/2,O.height/2],me=S.projectionMatrix.elements[5]*ve,{isOrthographicCamera:We,top:Xe,left:xt,bottom:fe,right:ie}=S,Ae=cme(S.matrixWorldInverse),Je=We?`scale(${me})translate(${DS(-(ie+xt)/2)}px,${DS((Xe+fe)/2)}px)`:`translateZ(${me}px)`;let te=Q.current.matrixWorld;c&&(te=S.matrixWorldInverse.clone().transpose().copyPosition(te).scale(Q.current.scale),te.elements[3]=te.elements[7]=te.elements[11]=0,te.elements[15]=1),$.style.width=O.width+"px",$.style.height=O.height+"px",$.style.perspective=We?"":`${me}px`,ne.current&&P.current&&(ne.current.style.transform=`${Je}${Ae}translate(${$e}px,${ve}px)`,P.current.style.transform=ume(te,1/((l||10)/400)))}else{const $e=l===void 0?1:ame(Q.current,S)*l;$.style.transform=`translate3d(${Me[0]}px,${Me[1]}px,0) scale(${$e})`}ee.current=Me,Y.current=S.zoom}}if(!X&&re.current&&!Z.current)if(u){if(ne.current){const Me=ne.current.children[0];if(Me!=null&&Me.clientWidth&&Me!=null&&Me.clientHeight){const{isOrthographicCamera:he}=S;if(he||g)w.scale&&(Array.isArray(w.scale)?w.scale instanceof J?re.current.scale.copy(w.scale.clone().divideScalar(1)):re.current.scale.set(1/w.scale[0],1/w.scale[1],1/w.scale[2]):re.current.scale.setScalar(1/w.scale));else{const Oe=(l||10)/400,be=Me.clientWidth*Oe,Te=Me.clientHeight*Oe;re.current.scale.set(be,Te,1)}Z.current=!0}}}else{const Me=$.children[0];if(Me!=null&&Me.clientWidth&&Me!=null&&Me.clientHeight){const he=1/N.factor,Oe=Me.clientWidth*he,be=Me.clientHeight*he;re.current.scale.set(Oe,be,1),Z.current=!0}re.current.lookAt(xe.camera.position)}});const Se=E.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return E.createElement("group",Ct({},w,{ref:Q}),f&&!X&&E.createElement("mesh",{castShadow:d,receiveShadow:p,ref:re},g||E.createElement("planeGeometry",null),m||E.createElement("shaderMaterial",{side:gr,vertexShader:Se.vertexShader,fragmentShader:Se.fragmentShader})))});function hme({onChanged:t,portal:e,preventDefault:n=!0,scroll:r=!0,keyCode:i=9}){const s=E.useRef(0),o=wt(c=>c.setEvents),a=wt(c=>c.get),l=wt(c=>c.gl);return E.useEffect(()=>{var c;let u=[],f;const h=a().events.filter,d=(c=e==null?void 0:e.current)!==null&&c!==void 0?c:l.domElement.parentNode,p=()=>d&&t&&t(u,Math.round(s.current)%u.length);o({filter:(y,A)=>{let T=[...y];(T.length!==u.length||!u.every(w=>T.map(M=>M.object.uuid).includes(w.object.uuid)))&&(s.current=0,u=T,p()),h&&(T=h(T,A));for(let w=0;w<Math.round(s.current)%T.length;w++){const M=T.shift();T=[...T,M]}return T}});const m=y=>{var A,T;s.current=y(s.current),(A=a().events.handlers)==null||A.onPointerCancel(void 0),(T=a().events.handlers)==null||T.onPointerMove(f),p()},g=y=>{(y.keyCode||y.which)===i&&(n&&y.preventDefault(),u.length>1&&m(A=>A+1))},v=y=>{n&&y.preventDefault();let A=0;y||(y=window.event),y.wheelDelta?A=y.wheelDelta/120:y.detail&&(A=-y.detail/3),u.length>1&&m(T=>Math.abs(T-A))},x=y=>f=y;return document.addEventListener("pointermove",x,{passive:!0}),r&&document.addEventListener("wheel",v),i!==void 0&&document.addEventListener("keydown",g),()=>{o({filter:h}),i!==void 0&&document.removeEventListener("keydown",g),r&&document.removeEventListener("wheel",v),document.removeEventListener("pointermove",x)}},[l,a,o,n,r,i]),null}var dme=Object.defineProperty,pme=(t,e,n)=>e in t?dme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,m0=(t,e,n)=>(pme(t,typeof e!="symbol"?e+"":e,n),n);const Zd=4,bp=1024,Bl=4,mme=(t=1)=>{const e=new Float32Array(bp*Bl*t*Zd),n=new mo(e,bp,Bl*t,Sr,fr);return n.wrapS=Rr,n.wrapT=Rr,n.magFilter=Ln,n.needsUpdate=!0,n},gme=(t,e,n=0)=>{const r=Math.floor(bp*(Bl/4));e.arcLengthDivisions=r/2,e.updateArcLengths();const i=e.getSpacedPoints(r),s=e.computeFrenetFrames(r,!0);for(let o=0;o<r;o++){const a=Math.floor(o/bp),l=o%bp;let c=i[o];Hy(t,l,c.x,c.y,c.z,0+a+Bl*n),c=s.tangents[o],Hy(t,l,c.x,c.y,c.z,1+a+Bl*n),c=s.normals[o],Hy(t,l,c.x,c.y,c.z,2+a+Bl*n),c=s.binormals[o],Hy(t,l,c.x,c.y,c.z,3+a+Bl*n)}t.needsUpdate=!0},Hy=(t,e,n,r,i,s)=>{const o=t.image,{data:a}=o,l=Zd*bp*s;a[e*Zd+l+0]=n,a[e*Zd+l+1]=r,a[e*Zd+l+2]=i,a[e*Zd+l+3]=1},vme=t=>({spineTexture:{value:t},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}});function yme(t,e,n=1){t.__ok||(t.__ok=!0,t.onBeforeCompile=r=>{if(r.__modified)return;r.__modified=!0,Object.assign(r.uniforms,e);const i=`
		uniform sampler2D spineTexture;
		uniform float pathOffset;
		uniform float pathSegment;
		uniform float spineOffset;
		uniform float spineLength;
		uniform int flow;

		float textureLayers = ${Bl*n}.;
		float textureStacks = ${Bl/4}.;

		${r.vertexShader}
		`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,`
        void main() {
        #include <beginnormal_vertex>

        vec4 worldPos = modelMatrix * vec4(position, 1.);

        bool bend = flow > 0;
        float xWeight = bend ? 0. : 1.;

        #ifdef USE_INSTANCING
        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];
        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;
        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;
        #else
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;
        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;
        #endif

        mt = mod(mt, textureStacks);
        float rowOffset = floor(mt);

        #ifdef USE_INSTANCING
        rowOffset += instanceMatrix[3][1] * ${Bl}.;
        #endif

        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;
        mat3 basis = mat3(a, b, c);

        vec3 transformed = basis
          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)
          + spinePos;

        vec3 transformedNormal = normalMatrix * (basis * objectNormal);
			`).replace("#include <project_vertex>",`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
				gl_Position = projectionMatrix * mvPosition;`);r.vertexShader=i})}class xme{constructor(e,n=1){m0(this,"curveArray"),m0(this,"curveLengthArray"),m0(this,"object3D"),m0(this,"splineTexure"),m0(this,"uniforms");const r=e.clone(),i=mme(n),s=vme(i);r.traverse(o=>{(o instanceof un||o instanceof rm)&&(o.material=o.material.clone(),yme(o.material,s,n))}),this.curveArray=new Array(n),this.curveLengthArray=new Array(n),this.object3D=r,this.splineTexure=i,this.uniforms=s}updateCurve(e,n){if(e>=this.curveArray.length)throw Error("Index out of range for Flow");const r=n.getLength();this.uniforms.spineLength.value=r,this.curveLengthArray[e]=r,this.curveArray[e]=n,gme(this.splineTexure,n,e)}moveAlongCurve(e){this.uniforms.pathOffset.value+=e}}new yt;function Eme(t,e=1e-4){e=Math.max(e,Number.EPSILON);const n={},r=t.getIndex(),i=t.getAttribute("position"),s=r?r.count:i.count;let o=0;const a=Object.keys(t.attributes),l={},c={},u=[],f=["getX","getY","getZ","getW"];for(let m=0,g=a.length;m<g;m++){const v=a[m];l[v]=[];const x=t.morphAttributes[v];x&&(c[v]=new Array(x.length).fill(0).map(()=>[]))}const h=Math.log10(1/e),d=Math.pow(10,h);for(let m=0;m<s;m++){const g=r?r.getX(m):m;let v="";for(let x=0,y=a.length;x<y;x++){const A=a[x],T=t.getAttribute(A),w=T.itemSize;for(let M=0;M<w;M++)v+=`${~~(T[f[M]](g)*d)},`}if(v in n)u.push(n[v]);else{for(let x=0,y=a.length;x<y;x++){const A=a[x],T=t.getAttribute(A),w=t.morphAttributes[A],M=T.itemSize,C=l[A],S=c[A];for(let R=0;R<M;R++){const O=f[R];if(C.push(T[O](g)),w)for(let L=0,B=w.length;L<B;L++)S[L].push(w[L][O](g))}}n[v]=o,u.push(o),o++}}const p=t.clone();for(let m=0,g=a.length;m<g;m++){const v=a[m],x=t.getAttribute(v),y=new x.array.constructor(l[v]),A=new Qt(y,x.itemSize,x.normalized);if(p.setAttribute(v,A),v in c)for(let T=0;T<c[v].length;T++){const w=t.morphAttributes[v][T],M=new w.array.constructor(c[v][T]),C=new Qt(M,w.itemSize,w.normalized);p.morphAttributes[v][T]=C}}return p.setIndex(u),p}function SI(t,e){if(e===h5)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===ph||e===Cg){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const r=n.count-2,i=[];if(n)if(e===ph)for(let o=1;o<=r;o++)i.push(n.getX(0)),i.push(n.getX(o)),i.push(n.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(n.getX(o)),i.push(n.getX(o+1)),i.push(n.getX(o+2))):(i.push(n.getX(o+2)),i.push(n.getX(o+1)),i.push(n.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}function $z(t,e=Math.PI/3){const n=Math.cos(e),r=(1+1e-10)*100,i=[new J,new J,new J],s=new J,o=new J,a=new J,l=new J;function c(m){const g=~~(m.x*r),v=~~(m.y*r),x=~~(m.z*r);return`${g},${v},${x}`}const u=t.index?t.toNonIndexed():t,f=u.attributes.position,h={};for(let m=0,g=f.count/3;m<g;m++){const v=3*m,x=i[0].fromBufferAttribute(f,v+0),y=i[1].fromBufferAttribute(f,v+1),A=i[2].fromBufferAttribute(f,v+2);s.subVectors(A,y),o.subVectors(x,y);const T=new J().crossVectors(s,o).normalize();for(let w=0;w<3;w++){const M=i[w],C=c(M);C in h||(h[C]=[]),h[C].push(T)}}const d=new Float32Array(f.count*3),p=new Qt(d,3,!1);for(let m=0,g=f.count/3;m<g;m++){const v=3*m,x=i[0].fromBufferAttribute(f,v+0),y=i[1].fromBufferAttribute(f,v+1),A=i[2].fromBufferAttribute(f,v+2);s.subVectors(A,y),o.subVectors(x,y),a.crossVectors(s,o).normalize();for(let T=0;T<3;T++){const w=i[T],M=c(w),C=h[M];l.set(0,0,0);for(let S=0,R=C.length;S<R;S++){const O=C[S];a.dot(O)>n&&l.add(O)}l.normalize(),p.setXYZ(v+T,l.x,l.y,l.z)}}return u.setAttribute("normal",p),u}const Xz=parseInt(yl.replace(/\D+/g,""));var Ia=Uint8Array,wu=Uint16Array,BS=Uint32Array,Yz=new Ia([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qz=new Ia([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_me=new Ia([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Kz=function(t,e){for(var n=new wu(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new BS(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},Jz=Kz(Yz,2),Qz=Jz[0],bme=Jz[1];Qz[28]=258,bme[258]=28;var Ame=Kz(qz,0),Tme=Ame[0],kS=new wu(32768);for(var $r=0;$r<32768;++$r){var du=($r&43690)>>>1|($r&21845)<<1;du=(du&52428)>>>2|(du&13107)<<2,du=(du&61680)>>>4|(du&3855)<<4,kS[$r]=((du&65280)>>>8|(du&255)<<8)>>>1}var x1=function(t,e,n){for(var r=t.length,i=0,s=new wu(e);i<r;++i)++s[t[i]-1];var o=new wu(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new wu(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],f=o[t[i]-1]++<<u,h=f|(1<<u)-1;f<=h;++f)a[kS[f]>>>l]=c}else for(a=new wu(r),i=0;i<r;++i)t[i]&&(a[i]=kS[o[t[i]-1]++]>>>15-t[i]);return a},zg=new Ia(288);for(var $r=0;$r<144;++$r)zg[$r]=8;for(var $r=144;$r<256;++$r)zg[$r]=9;for(var $r=256;$r<280;++$r)zg[$r]=7;for(var $r=280;$r<288;++$r)zg[$r]=8;var Zz=new Ia(32);for(var $r=0;$r<32;++$r)Zz[$r]=5;var wme=x1(zg,9,1),Sme=x1(Zz,5,1),g2=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Qa=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},v2=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Cme=function(t){return(t/8|0)+(t&7&&1)},Mme=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof wu?wu:t instanceof BS?BS:Ia)(n-e);return r.set(t.subarray(e,n)),r},Rme=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new Ia(0);var i=!e||n,s=!n||n.i;n||(n={}),e||(e=new Ia(r*3));var o=function(W){var K=e.length;if(W>K){var ge=new Ia(Math.max(K*2,W));ge.set(e),e=ge}},a=n.f||0,l=n.p||0,c=n.b||0,u=n.l,f=n.d,h=n.m,d=n.n,p=r*8;do{if(!u){n.f=a=Qa(t,l,1);var m=Qa(t,l+1,3);if(l+=3,m)if(m==1)u=wme,f=Sme,h=9,d=5;else if(m==2){var y=Qa(t,l,31)+257,A=Qa(t,l+10,15)+4,T=y+Qa(t,l+5,31)+1;l+=14;for(var w=new Ia(T),M=new Ia(19),C=0;C<A;++C)M[_me[C]]=Qa(t,l+C*3,7);l+=A*3;for(var S=g2(M),R=(1<<S)-1,O=x1(M,S,1),C=0;C<T;){var L=O[Qa(t,l,R)];l+=L&15;var g=L>>>4;if(g<16)w[C++]=g;else{var B=0,N=0;for(g==16?(N=3+Qa(t,l,3),l+=2,B=w[C-1]):g==17?(N=3+Qa(t,l,7),l+=3):g==18&&(N=11+Qa(t,l,127),l+=7);N--;)w[C++]=B}}var $=w.subarray(0,y),U=w.subarray(y);h=g2($),d=g2(U),u=x1($,h,1),f=x1(U,d,1)}else throw"invalid block type";else{var g=Cme(l)+4,v=t[g-4]|t[g-3]<<8,x=g+v;if(x>r){if(s)throw"unexpected EOF";break}i&&o(c+v),e.set(t.subarray(g,x),c),n.b=c+=v,n.p=l=x*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}i&&o(c+131072);for(var Q=(1<<h)-1,Y=(1<<d)-1,ee=l;;ee=l){var B=u[v2(t,l)&Q],ne=B>>>4;if(l+=B&15,l>p){if(s)throw"unexpected EOF";break}if(!B)throw"invalid length/literal";if(ne<256)e[c++]=ne;else if(ne==256){ee=l,u=null;break}else{var P=ne-254;if(ne>264){var C=ne-257,se=Yz[C];P=Qa(t,l,(1<<se)-1)+Qz[C],l+=se}var re=f[v2(t,l)&Y],Z=re>>>4;if(!re)throw"invalid distance";l+=re&15;var U=Tme[Z];if(Z>3){var se=qz[Z];U+=v2(t,l)&(1<<se)-1,l+=se}if(l>p){if(s)throw"unexpected EOF";break}i&&o(c+131072);for(var X=c+P;c<X;c+=4)e[c]=e[c-U],e[c+1]=e[c+1-U],e[c+2]=e[c+2-U],e[c+3]=e[c+3-U];c=X}}n.l=u,n.p=ee,n.b=c,u&&(a=1,n.m=h,n.d=f,n.n=d)}while(!a);return c==e.length?e:Mme(e,0,c)},Ime=new Ia(0),Pme=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Gy(t,e){return Rme((Pme(t),t.subarray(2,-4)),e)}var Lme=typeof TextDecoder<"u"&&new TextDecoder,Nme=0;try{Lme.decode(Ime,{stream:!0}),Nme=1}catch{}let Ome=class extends un{constructor(e,n,r=!1,i=!1,s=1e4){const o=new on;super(o,n),this.isMarchingCubes=!0;const a=this,l=new Float32Array(12*3),c=new Float32Array(12*3),u=new Float32Array(12*3);this.enableUvs=r,this.enableColors=i,this.init=function(x){this.resolution=x,this.isolation=80,this.size=x,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;const y=s*3;this.positionArray=new Float32Array(y*3);const A=new Qt(this.positionArray,3);A.setUsage(Zi),o.setAttribute("position",A),this.normalArray=new Float32Array(y*3);const T=new Qt(this.normalArray,3);if(T.setUsage(Zi),o.setAttribute("normal",T),this.enableUvs){this.uvArray=new Float32Array(y*2);const w=new Qt(this.uvArray,2);w.setUsage(Zi),o.setAttribute("uv",w)}if(this.enableColors){this.colorArray=new Float32Array(y*3);const w=new Qt(this.colorArray,3);w.setUsage(Zi),o.setAttribute("color",w)}o.boundingSphere=new Fr(new J,1)};function f(x,y,A){return x+(y-x)*A}function h(x,y,A,T,w,M,C,S,R,O){const L=(A-C)/(S-C),B=a.normal_cache;l[y+0]=T+L*a.delta,l[y+1]=w,l[y+2]=M,c[y+0]=f(B[x+0],B[x+3],L),c[y+1]=f(B[x+1],B[x+4],L),c[y+2]=f(B[x+2],B[x+5],L),u[y+0]=f(a.palette[R*3+0],a.palette[O*3+0],L),u[y+1]=f(a.palette[R*3+1],a.palette[O*3+1],L),u[y+2]=f(a.palette[R*3+2],a.palette[O*3+2],L)}function d(x,y,A,T,w,M,C,S,R,O){const L=(A-C)/(S-C),B=a.normal_cache;l[y+0]=T,l[y+1]=w+L*a.delta,l[y+2]=M;const N=x+a.yd*3;c[y+0]=f(B[x+0],B[N+0],L),c[y+1]=f(B[x+1],B[N+1],L),c[y+2]=f(B[x+2],B[N+2],L),u[y+0]=f(a.palette[R*3+0],a.palette[O*3+0],L),u[y+1]=f(a.palette[R*3+1],a.palette[O*3+1],L),u[y+2]=f(a.palette[R*3+2],a.palette[O*3+2],L)}function p(x,y,A,T,w,M,C,S,R,O){const L=(A-C)/(S-C),B=a.normal_cache;l[y+0]=T,l[y+1]=w,l[y+2]=M+L*a.delta;const N=x+a.zd*3;c[y+0]=f(B[x+0],B[N+0],L),c[y+1]=f(B[x+1],B[N+1],L),c[y+2]=f(B[x+2],B[N+2],L),u[y+0]=f(a.palette[R*3+0],a.palette[O*3+0],L),u[y+1]=f(a.palette[R*3+1],a.palette[O*3+1],L),u[y+2]=f(a.palette[R*3+2],a.palette[O*3+2],L)}function m(x){const y=x*3;a.normal_cache[y]===0&&(a.normal_cache[y+0]=a.field[x-1]-a.field[x+1],a.normal_cache[y+1]=a.field[x-a.yd]-a.field[x+a.yd],a.normal_cache[y+2]=a.field[x-a.zd]-a.field[x+a.zd])}function g(x,y,A,T,w){const M=T+1,C=T+a.yd,S=T+a.zd,R=M+a.yd,O=M+a.zd,L=T+a.yd+a.zd,B=M+a.yd+a.zd;let N=0;const $=a.field[T],U=a.field[M],Q=a.field[C],Y=a.field[R],ee=a.field[S],ne=a.field[O],P=a.field[L],se=a.field[B];$<w&&(N|=1),U<w&&(N|=2),Q<w&&(N|=8),Y<w&&(N|=4),ee<w&&(N|=16),ne<w&&(N|=32),P<w&&(N|=128),se<w&&(N|=64);const re=Dme[N];if(re===0)return 0;const Z=a.delta,X=x+Z,W=y+Z,K=A+Z;re&1&&(m(T),m(M),h(T*3,0,w,x,y,A,$,U,T,M)),re&2&&(m(M),m(R),d(M*3,3,w,X,y,A,U,Y,M,R)),re&4&&(m(C),m(R),h(C*3,6,w,x,W,A,Q,Y,C,R)),re&8&&(m(T),m(C),d(T*3,9,w,x,y,A,$,Q,T,C)),re&16&&(m(S),m(O),h(S*3,12,w,x,y,K,ee,ne,S,O)),re&32&&(m(O),m(B),d(O*3,15,w,X,y,K,ne,se,O,B)),re&64&&(m(L),m(B),h(L*3,18,w,x,W,K,P,se,L,B)),re&128&&(m(S),m(L),d(S*3,21,w,x,y,K,ee,P,S,L)),re&256&&(m(T),m(S),p(T*3,24,w,x,y,A,$,ee,T,S)),re&512&&(m(M),m(O),p(M*3,27,w,X,y,A,U,ne,M,O)),re&1024&&(m(R),m(B),p(R*3,30,w,X,W,A,Y,se,R,B)),re&2048&&(m(C),m(L),p(C*3,33,w,x,W,A,Q,P,C,L)),N<<=4;let ge,Se,xe,Me=0,he=0;for(;Vy[N+he]!=-1;)ge=N+he,Se=ge+1,xe=ge+2,v(l,c,u,3*Vy[ge],3*Vy[Se],3*Vy[xe]),he+=3,Me++;return Me}function v(x,y,A,T,w,M){const C=a.count*3;if(a.positionArray[C+0]=x[T],a.positionArray[C+1]=x[T+1],a.positionArray[C+2]=x[T+2],a.positionArray[C+3]=x[w],a.positionArray[C+4]=x[w+1],a.positionArray[C+5]=x[w+2],a.positionArray[C+6]=x[M],a.positionArray[C+7]=x[M+1],a.positionArray[C+8]=x[M+2],a.material.flatShading===!0){const S=(y[T+0]+y[w+0]+y[M+0])/3,R=(y[T+1]+y[w+1]+y[M+1])/3,O=(y[T+2]+y[w+2]+y[M+2])/3;a.normalArray[C+0]=S,a.normalArray[C+1]=R,a.normalArray[C+2]=O,a.normalArray[C+3]=S,a.normalArray[C+4]=R,a.normalArray[C+5]=O,a.normalArray[C+6]=S,a.normalArray[C+7]=R,a.normalArray[C+8]=O}else a.normalArray[C+0]=y[T+0],a.normalArray[C+1]=y[T+1],a.normalArray[C+2]=y[T+2],a.normalArray[C+3]=y[w+0],a.normalArray[C+4]=y[w+1],a.normalArray[C+5]=y[w+2],a.normalArray[C+6]=y[M+0],a.normalArray[C+7]=y[M+1],a.normalArray[C+8]=y[M+2];if(a.enableUvs){const S=a.count*2;a.uvArray[S+0]=x[T+0],a.uvArray[S+1]=x[T+2],a.uvArray[S+2]=x[w+0],a.uvArray[S+3]=x[w+2],a.uvArray[S+4]=x[M+0],a.uvArray[S+5]=x[M+2]}a.enableColors&&(a.colorArray[C+0]=A[T+0],a.colorArray[C+1]=A[T+1],a.colorArray[C+2]=A[T+2],a.colorArray[C+3]=A[w+0],a.colorArray[C+4]=A[w+1],a.colorArray[C+5]=A[w+2],a.colorArray[C+6]=A[M+0],a.colorArray[C+7]=A[M+1],a.colorArray[C+8]=A[M+2]),a.count+=3}this.addBall=function(x,y,A,T,w,M){const C=Math.sign(T);T=Math.abs(T);const S=M!=null;let R=new bt(x,y,A);if(S)try{R=M instanceof bt?M:Array.isArray(M)?new bt(Math.min(Math.abs(M[0]),1),Math.min(Math.abs(M[1]),1),Math.min(Math.abs(M[2]),1)):new bt(M)}catch{R=new bt(x,y,A)}const O=this.size*Math.sqrt(T/w),L=A*this.size,B=y*this.size,N=x*this.size;let $=Math.floor(L-O);$<1&&($=1);let U=Math.floor(L+O);U>this.size-1&&(U=this.size-1);let Q=Math.floor(B-O);Q<1&&(Q=1);let Y=Math.floor(B+O);Y>this.size-1&&(Y=this.size-1);let ee=Math.floor(N-O);ee<1&&(ee=1);let ne=Math.floor(N+O);ne>this.size-1&&(ne=this.size-1);let P,se,re,Z,X,W,K,ge,Se,xe,Me;for(re=$;re<U;re++)for(X=this.size2*re,ge=re/this.size-A,Se=ge*ge,se=Q;se<Y;se++)for(Z=X+this.size*se,K=se/this.size-y,xe=K*K,P=ee;P<ne;P++)if(W=P/this.size-x,Me=T/(1e-6+W*W+xe+Se)-w,Me>0){this.field[Z+P]+=Me*C;const he=Math.sqrt((P-N)*(P-N)+(se-B)*(se-B)+(re-L)*(re-L))/O,Oe=1-he*he*he*(he*(he*6-15)+10);this.palette[(Z+P)*3+0]+=R.r*Oe,this.palette[(Z+P)*3+1]+=R.g*Oe,this.palette[(Z+P)*3+2]+=R.b*Oe}},this.addPlaneX=function(x,y){const A=this.size,T=this.yd,w=this.zd,M=this.field;let C,S,R,O,L,B,N,$=A*Math.sqrt(x/y);for($>A&&($=A),C=0;C<$;C++)if(B=C/A,O=B*B,L=x/(1e-4+O)-y,L>0)for(S=0;S<A;S++)for(N=C+S*T,R=0;R<A;R++)M[w*R+N]+=L},this.addPlaneY=function(x,y){const A=this.size,T=this.yd,w=this.zd,M=this.field;let C,S,R,O,L,B,N,$,U=A*Math.sqrt(x/y);for(U>A&&(U=A),S=0;S<U;S++)if(B=S/A,O=B*B,L=x/(1e-4+O)-y,L>0)for(N=S*T,C=0;C<A;C++)for($=N+C,R=0;R<A;R++)M[w*R+$]+=L},this.addPlaneZ=function(x,y){const A=this.size,T=this.yd,w=this.zd,M=this.field;let C,S,R,O,L,B,N,$,U=A*Math.sqrt(x/y);for(U>A&&(U=A),R=0;R<U;R++)if(B=R/A,O=B*B,L=x/(1e-4+O)-y,L>0)for(N=w*R,S=0;S<A;S++)for($=N+S*T,C=0;C<A;C++)M[$+C]+=L},this.setCell=function(x,y,A,T){const w=this.size2*A+this.size*y+x;this.field[w]=T},this.getCell=function(x,y,A){const T=this.size2*A+this.size*y+x;return this.field[T]},this.blur=function(x=1){const y=this.field,A=y.slice(),T=this.size,w=this.size2;for(let M=0;M<T;M++)for(let C=0;C<T;C++)for(let S=0;S<T;S++){const R=w*S+T*C+M;let O=A[R],L=1;for(let B=-1;B<=1;B+=2){const N=B+M;if(!(N<0||N>=T))for(let $=-1;$<=1;$+=2){const U=$+C;if(!(U<0||U>=T))for(let Q=-1;Q<=1;Q+=2){const Y=Q+S;if(Y<0||Y>=T)continue;const ee=w*Y+T*U+N,ne=A[ee];L++,O+=x*(ne-O)/L}}}y[R]=O}},this.reset=function(){for(let x=0;x<this.size3;x++)this.normal_cache[x*3]=0,this.field[x]=0,this.palette[x*3]=this.palette[x*3+1]=this.palette[x*3+2]=0},this.update=function(){this.count=0;const x=this.size-2;for(let y=1;y<x;y++){const A=this.size2*y,T=(y-this.halfsize)/this.halfsize;for(let w=1;w<x;w++){const M=A+this.size*w,C=(w-this.halfsize)/this.halfsize;for(let S=1;S<x;S++){const R=(S-this.halfsize)/this.halfsize,O=M+S;g(R,C,T,O,this.isolation)}}}this.geometry.setDrawRange(0,this.count),o.getAttribute("position").needsUpdate=!0,o.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(o.getAttribute("uv").needsUpdate=!0),this.enableColors&&(o.getAttribute("color").needsUpdate=!0),this.count/3>s&&console.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(e)}};const Dme=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),Vy=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);var Bme=Object.defineProperty,kme=(t,e,n)=>e in t?Bme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Za=(t,e,n)=>(kme(t,typeof e!="symbol"?e+"":e,n),n);class y2{constructor(e=Math){Za(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),Za(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),Za(this,"p",[]),Za(this,"perm",[]),Za(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),Za(this,"dot",(n,r,i)=>n[0]*r+n[1]*i),Za(this,"dot3",(n,r,i,s)=>n[0]*r+n[1]*i+n[2]*s),Za(this,"dot4",(n,r,i,s,o)=>n[0]*r+n[1]*i+n[2]*s+n[3]*o),Za(this,"noise",(n,r)=>{let i,s,o;const a=.5*(Math.sqrt(3)-1),l=(n+r)*a,c=Math.floor(n+l),u=Math.floor(r+l),f=(3-Math.sqrt(3))/6,h=(c+u)*f,d=c-h,p=u-h,m=n-d,g=r-p;let v=0,x=1;m>g&&(v=1,x=0);const y=m-v+f,A=g-x+f,T=m-1+2*f,w=g-1+2*f,M=c&255,C=u&255,S=this.perm[M+this.perm[C]]%12,R=this.perm[M+v+this.perm[C+x]]%12,O=this.perm[M+1+this.perm[C+1]]%12;let L=.5-m*m-g*g;L<0?i=0:(L*=L,i=L*L*this.dot(this.grad3[S],m,g));let B=.5-y*y-A*A;B<0?s=0:(B*=B,s=B*B*this.dot(this.grad3[R],y,A));let N=.5-T*T-w*w;return N<0?o=0:(N*=N,o=N*N*this.dot(this.grad3[O],T,w)),70*(i+s+o)}),Za(this,"noise3d",(n,r,i)=>{let s,o,a,l;const c=.3333333333333333,u=(n+r+i)*c,f=Math.floor(n+u),h=Math.floor(r+u),d=Math.floor(i+u),p=1/6,m=(f+h+d)*p,g=f-m,v=h-m,x=d-m,y=n-g,A=r-v,T=i-x;let w,M,C,S,R,O;y>=A?A>=T?(w=1,M=0,C=0,S=1,R=1,O=0):y>=T?(w=1,M=0,C=0,S=1,R=0,O=1):(w=0,M=0,C=1,S=1,R=0,O=1):A<T?(w=0,M=0,C=1,S=0,R=1,O=1):y<T?(w=0,M=1,C=0,S=0,R=1,O=1):(w=0,M=1,C=0,S=1,R=1,O=0);const L=y-w+p,B=A-M+p,N=T-C+p,$=y-S+2*p,U=A-R+2*p,Q=T-O+2*p,Y=y-1+3*p,ee=A-1+3*p,ne=T-1+3*p,P=f&255,se=h&255,re=d&255,Z=this.perm[P+this.perm[se+this.perm[re]]]%12,X=this.perm[P+w+this.perm[se+M+this.perm[re+C]]]%12,W=this.perm[P+S+this.perm[se+R+this.perm[re+O]]]%12,K=this.perm[P+1+this.perm[se+1+this.perm[re+1]]]%12;let ge=.6-y*y-A*A-T*T;ge<0?s=0:(ge*=ge,s=ge*ge*this.dot3(this.grad3[Z],y,A,T));let Se=.6-L*L-B*B-N*N;Se<0?o=0:(Se*=Se,o=Se*Se*this.dot3(this.grad3[X],L,B,N));let xe=.6-$*$-U*U-Q*Q;xe<0?a=0:(xe*=xe,a=xe*xe*this.dot3(this.grad3[W],$,U,Q));let Me=.6-Y*Y-ee*ee-ne*ne;return Me<0?l=0:(Me*=Me,l=Me*Me*this.dot3(this.grad3[K],Y,ee,ne)),32*(s+o+a+l)}),Za(this,"noise4d",(n,r,i,s)=>{const o=this.grad4,a=this.simplex,l=this.perm,c=(Math.sqrt(5)-1)/4,u=(5-Math.sqrt(5))/20;let f,h,d,p,m;const g=(n+r+i+s)*c,v=Math.floor(n+g),x=Math.floor(r+g),y=Math.floor(i+g),A=Math.floor(s+g),T=(v+x+y+A)*u,w=v-T,M=x-T,C=y-T,S=A-T,R=n-w,O=r-M,L=i-C,B=s-S,N=R>O?32:0,$=R>L?16:0,U=O>L?8:0,Q=R>B?4:0,Y=O>B?2:0,ee=L>B?1:0,ne=N+$+U+Q+Y+ee;let P,se,re,Z,X,W,K,ge,Se,xe,Me,he;P=a[ne][0]>=3?1:0,se=a[ne][1]>=3?1:0,re=a[ne][2]>=3?1:0,Z=a[ne][3]>=3?1:0,X=a[ne][0]>=2?1:0,W=a[ne][1]>=2?1:0,K=a[ne][2]>=2?1:0,ge=a[ne][3]>=2?1:0,Se=a[ne][0]>=1?1:0,xe=a[ne][1]>=1?1:0,Me=a[ne][2]>=1?1:0,he=a[ne][3]>=1?1:0;const Oe=R-P+u,be=O-se+u,Te=L-re+u,Re=B-Z+u,$e=R-X+2*u,ve=O-W+2*u,me=L-K+2*u,We=B-ge+2*u,Xe=R-Se+3*u,xt=O-xe+3*u,fe=L-Me+3*u,ie=B-he+3*u,Ae=R-1+4*u,Je=O-1+4*u,te=L-1+4*u,z=B-1+4*u,F=v&255,ae=x&255,ye=y&255,Le=A&255,ke=l[F+l[ae+l[ye+l[Le]]]]%32,Ve=l[F+P+l[ae+se+l[ye+re+l[Le+Z]]]]%32,Ce=l[F+X+l[ae+W+l[ye+K+l[Le+ge]]]]%32,Ye=l[F+Se+l[ae+xe+l[ye+Me+l[Le+he]]]]%32,tt=l[F+1+l[ae+1+l[ye+1+l[Le+1]]]]%32;let it=.6-R*R-O*O-L*L-B*B;it<0?f=0:(it*=it,f=it*it*this.dot4(o[ke],R,O,L,B));let dt=.6-Oe*Oe-be*be-Te*Te-Re*Re;dt<0?h=0:(dt*=dt,h=dt*dt*this.dot4(o[Ve],Oe,be,Te,Re));let Ze=.6-$e*$e-ve*ve-me*me-We*We;Ze<0?d=0:(Ze*=Ze,d=Ze*Ze*this.dot4(o[Ce],$e,ve,me,We));let Be=.6-Xe*Xe-xt*xt-fe*fe-ie*ie;Be<0?p=0:(Be*=Be,p=Be*Be*this.dot4(o[Ye],Xe,xt,fe,ie));let Ft=.6-Ae*Ae-Je*Je-te*te-z*z;return Ft<0?m=0:(Ft*=Ft,m=Ft*Ft*this.dot4(o[tt],Ae,Je,te,z)),27*(f+h+d+p+m)});for(let n=0;n<256;n++)this.p[n]=Math.floor(e.random()*256);for(let n=0;n<512;n++)this.perm[n]=this.p[n&255]}}var Fme=Object.defineProperty,Ume=(t,e,n)=>e in t?Fme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eH=(t,e,n)=>(Ume(t,typeof e!="symbol"?e+"":e,n),n);const i3={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new J},up:{value:new J(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${Xz>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},tH=new ur({name:"SkyShader",fragmentShader:i3.fragmentShader,vertexShader:i3.vertexShader,uniforms:Gu.clone(i3.uniforms),side:Ti,depthWrite:!1});let iC=class extends un{constructor(){super(new Yc(1,1,1),tH)}};eH(iC,"SkyShader",i3);eH(iC,"material",tH);const zme=t=>t&&t.isCubeTexture;class Hme extends un{constructor(e,n){var r,i;const s=zme(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),f=4*c,h=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${l}.0`],d=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,p=h.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(yl.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,m={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},g=new Og(1,16),v=new ur({uniforms:m,fragmentShader:p,vertexShader:d,side:gr});super(g,v)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}function nH(t,e,n={}){const r=new J,i=new kn,s=new J,o=new yt,a=new yt,l=new yt;n.preserveMatrix=n.preserveMatrix!==void 0?n.preserveMatrix:!0,n.preservePosition=n.preservePosition!==void 0?n.preservePosition:!0,n.preserveHipPosition=n.preserveHipPosition!==void 0?n.preserveHipPosition:!1,n.useTargetMatrix=n.useTargetMatrix!==void 0?n.useTargetMatrix:!1,n.hip=n.hip!==void 0?n.hip:"hip",n.names=n.names||{};const c=e.isObject3D?e.skeleton.bones:K3(e),u=t.isObject3D?t.skeleton.bones:K3(t);let f,h,d,p,m;if(t.isObject3D?t.skeleton.pose():(n.useTargetMatrix=!0,n.preserveMatrix=!1),n.preservePosition){m=[];for(let g=0;g<u.length;g++)m.push(u[g].position.clone())}if(n.preserveMatrix){t.updateMatrixWorld(),t.matrixWorld.identity();for(let g=0;g<t.children.length;++g)t.children[g].updateMatrixWorld(!0)}if(n.offsets){f=[];for(let g=0;g<u.length;++g)h=u[g],d=n.names[h.name]||h.name,n.offsets[d]&&(h.matrix.multiply(n.offsets[d]),h.matrix.decompose(h.position,h.quaternion,h.scale),h.updateMatrixWorld()),f.push(h.matrixWorld.clone())}for(let g=0;g<u.length;++g){if(h=u[g],d=n.names[h.name]||h.name,p=rH(d,c),l.copy(h.matrixWorld),p){if(p.updateMatrixWorld(),n.useTargetMatrix?a.copy(p.matrixWorld):(a.copy(t.matrixWorld).invert(),a.multiply(p.matrixWorld)),s.setFromMatrixScale(a),a.scale(s.set(1/s.x,1/s.y,1/s.z)),l.makeRotationFromQuaternion(i.setFromRotationMatrix(a)),t.isObject3D){const v=u.indexOf(h),x=f?f[v]:o.copy(t.skeleton.boneInverses[v]).invert();l.multiply(x)}l.copyPosition(a)}h.parent&&h.parent.isBone?(h.matrix.copy(h.parent.matrixWorld).invert(),h.matrix.multiply(l)):h.matrix.copy(l),n.preserveHipPosition&&d===n.hip&&h.matrix.setPosition(r.set(0,h.position.y,0)),h.matrix.decompose(h.position,h.quaternion,h.scale),h.updateMatrixWorld()}if(n.preservePosition)for(let g=0;g<u.length;++g)h=u[g],d=n.names[h.name]||h.name,d!==n.hip&&h.position.copy(m[g]);n.preserveMatrix&&t.updateMatrixWorld(!0)}function Gme(t,e,n,r={}){r.useFirstFramePosition=r.useFirstFramePosition!==void 0?r.useFirstFramePosition:!1,r.fps=r.fps!==void 0?r.fps:30,r.names=r.names||[],e.isObject3D||(e=Wme(e));const i=Math.round(n.duration*(r.fps/1e3)*1e3),s=1/r.fps,o=[],a=new lU(e),l=K3(t.skeleton),c=[];let u,f,h,d,p;a.clipAction(n).play(),a.update(0),e.updateMatrixWorld();for(let m=0;m<i;++m){const g=m*s;nH(t,e,r);for(let v=0;v<l.length;++v)p=r.names[l[v].name]||l[v].name,h=rH(p,e.skeleton),h&&(f=l[v],d=c[v]=c[v]||{bone:f},r.hip===p&&(d.pos||(d.pos={times:new Float32Array(i),values:new Float32Array(i*3)}),r.useFirstFramePosition&&(m===0&&(u=f.position.clone()),f.position.sub(u)),d.pos.times[m]=g,f.position.toArray(d.pos.values,m*3)),d.quat||(d.quat={times:new Float32Array(i),values:new Float32Array(i*4)}),d.quat.times[m]=g,f.quaternion.toArray(d.quat.values,m*4));a.update(s),e.updateMatrixWorld()}for(let m=0;m<c.length;++m)d=c[m],d&&(d.pos&&o.push(new aa(".bones["+d.bone.name+"].position",d.pos.times,d.pos.values)),o.push(new oa(".bones["+d.bone.name+"].quaternion",d.quat.times,d.quat.values)));return a.uncacheAction(n),new Ua(n.name,-1,o)}function Vme(t){const e=new Map,n=new Map,r=t.clone();return iH(t,r,function(i,s){e.set(s,i),n.set(i,s)}),r.traverse(function(i){if(!i.isSkinnedMesh)return;const s=i,o=e.get(i),a=o.skeleton.bones;s.skeleton=o.skeleton.clone(),s.bindMatrix.copy(o.bindMatrix),s.skeleton.bones=a.map(function(l){return n.get(l)}),s.bind(s.skeleton,s.bindMatrix)}),r}function rH(t,e){for(let n=0,r=K3(e);n<r.length;n++)if(t===r[n].name)return r[n]}function K3(t){return Array.isArray(t)?t:t.bones}function Wme(t){const e=new fU(t.bones[0]);return e.skeleton=t,e}function iH(t,e,n){n(t,e);for(let r=0;r<t.children.length;r++)iH(t.children[r],e.children[r],n)}const jme={retarget:nH,retargetClip:Gme,clone:Vme},bs=new Xi,Wy=new J;class $me{constructor(e){let n=e.geometry;n.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),n=n.toNonIndexed()),this.geometry=n,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){const e=this.positionAttribute,n=this.weightAttribute,r=new Float32Array(e.count/3);for(let s=0;s<e.count;s+=3){let o=1;n&&(o=n.getX(s)+n.getX(s+1)+n.getX(s+2)),bs.a.fromBufferAttribute(e,s),bs.b.fromBufferAttribute(e,s+1),bs.c.fromBufferAttribute(e,s+2),o*=bs.getArea(),r[s/3]=o}this.distribution=new Float32Array(e.count/3);let i=0;for(let s=0;s<r.length;s++)i+=r[s],this.distribution[s]=i;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,n,r){const i=this.sampleFaceIndex();return this.sampleFace(i,e,n,r)}sampleFaceIndex(){const e=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*e)}binarySearch(e){const n=this.distribution;let r=0,i=n.length-1,s=-1;for(;r<=i;){const o=Math.ceil((r+i)/2);if(o===0||n[o-1]<=e&&n[o]>e){s=o;break}else e<n[o]?i=o-1:r=o+1}return s}sampleFace(e,n,r,i){let s=this.randomFunction(),o=this.randomFunction();return s+o>1&&(s=1-s,o=1-o),bs.a.fromBufferAttribute(this.positionAttribute,e*3),bs.b.fromBufferAttribute(this.positionAttribute,e*3+1),bs.c.fromBufferAttribute(this.positionAttribute,e*3+2),n.set(0,0,0).addScaledVector(bs.a,s).addScaledVector(bs.b,o).addScaledVector(bs.c,1-(s+o)),r!==void 0&&bs.getNormal(r),i!==void 0&&this.colorAttribute!==void 0&&(bs.a.fromBufferAttribute(this.colorAttribute,e*3),bs.b.fromBufferAttribute(this.colorAttribute,e*3+1),bs.c.fromBufferAttribute(this.colorAttribute,e*3+2),Wy.set(0,0,0).addScaledVector(bs.a,s).addScaledVector(bs.b,o).addScaledVector(bs.c,1-(s+o)),i.r=Wy.x,i.g=Wy.y,i.b=Wy.z),this}}var Xme=Object.defineProperty,Yme=(t,e,n)=>e in t?Xme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,On=(t,e,n)=>(Yme(t,typeof e!="symbol"?e+"":e,n),n);const jy=new xl,CI=new zs,qme=Math.cos(70*(Math.PI/180)),MI=(t,e)=>(t%e+e)%e;let Kme=class extends Jl{constructor(e,n){super(),On(this,"object"),On(this,"domElement"),On(this,"enabled",!0),On(this,"target",new J),On(this,"minDistance",0),On(this,"maxDistance",1/0),On(this,"minZoom",0),On(this,"maxZoom",1/0),On(this,"minPolarAngle",0),On(this,"maxPolarAngle",Math.PI),On(this,"minAzimuthAngle",-1/0),On(this,"maxAzimuthAngle",1/0),On(this,"enableDamping",!1),On(this,"dampingFactor",.05),On(this,"enableZoom",!0),On(this,"zoomSpeed",1),On(this,"enableRotate",!0),On(this,"rotateSpeed",1),On(this,"enablePan",!0),On(this,"panSpeed",1),On(this,"screenSpacePanning",!0),On(this,"keyPanSpeed",7),On(this,"zoomToCursor",!1),On(this,"autoRotate",!1),On(this,"autoRotateSpeed",2),On(this,"reverseOrbit",!1),On(this,"reverseHorizontalOrbit",!1),On(this,"reverseVerticalOrbit",!1),On(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),On(this,"mouseButtons",{LEFT:Lf.ROTATE,MIDDLE:Lf.DOLLY,RIGHT:Lf.PAN}),On(this,"touches",{ONE:Nf.ROTATE,TWO:Nf.DOLLY_PAN}),On(this,"target0"),On(this,"position0"),On(this,"zoom0"),On(this,"_domElementKeyEvents",null),On(this,"getPolarAngle"),On(this,"getAzimuthalAngle"),On(this,"setPolarAngle"),On(this,"setAzimuthalAngle"),On(this,"getDistance"),On(this,"listenToKeyEvents"),On(this,"stopListenToKeyEvents"),On(this,"saveState"),On(this,"reset"),On(this,"update"),On(this,"connect"),On(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=Ce=>{let Ye=MI(Ce,2*Math.PI),tt=u.phi;tt<0&&(tt+=2*Math.PI),Ye<0&&(Ye+=2*Math.PI);let it=Math.abs(Ye-tt);2*Math.PI-it<it&&(Ye<tt?Ye+=2*Math.PI:tt+=2*Math.PI),f.phi=Ye-tt,r.update()},this.setAzimuthalAngle=Ce=>{let Ye=MI(Ce,2*Math.PI),tt=u.theta;tt<0&&(tt+=2*Math.PI),Ye<0&&(Ye+=2*Math.PI);let it=Math.abs(Ye-tt);2*Math.PI-it<it&&(Ye<tt?Ye+=2*Math.PI:tt+=2*Math.PI),f.theta=Ye-tt,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Ce=>{Ce.addEventListener("keydown",te),this._domElementKeyEvents=Ce},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",te),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Ce=new J,Ye=new J(0,1,0),tt=new kn().setFromUnitVectors(e.up,Ye),it=tt.clone().invert(),dt=new J,Ze=new kn,Be=2*Math.PI;return function(){const St=r.object.position;tt.setFromUnitVectors(e.up,Ye),it.copy(tt).invert(),Ce.copy(St).sub(r.target),Ce.applyQuaternion(tt),u.setFromVector3(Ce),r.autoRotate&&l===a.NONE&&N(L()),r.enableDamping?(u.theta+=f.theta*r.dampingFactor,u.phi+=f.phi*r.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let st=r.minAzimuthAngle,It=r.maxAzimuthAngle;isFinite(st)&&isFinite(It)&&(st<-Math.PI?st+=Be:st>Math.PI&&(st-=Be),It<-Math.PI?It+=Be:It>Math.PI&&(It-=Be),st<=It?u.theta=Math.max(st,Math.min(It,u.theta)):u.theta=u.theta>(st+It)/2?Math.max(st,u.theta):Math.min(It,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(d,r.dampingFactor):r.target.add(d),r.zoomToCursor&&S||r.object.isOrthographicCamera?u.radius=se(u.radius):u.radius=se(u.radius*h),Ce.setFromSpherical(u),Ce.applyQuaternion(it),St.copy(r.target).add(Ce),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,d.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),d.set(0,0,0));let Ht=!1;if(r.zoomToCursor&&S){let zt=null;if(r.object instanceof mr&&r.object.isPerspectiveCamera){const $t=Ce.length();zt=se($t*h);const Nn=$t-zt;r.object.position.addScaledVector(M,Nn),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const $t=new J(C.x,C.y,0);$t.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix(),Ht=!0;const Nn=new J(C.x,C.y,0);Nn.unproject(r.object),r.object.position.sub(Nn).add($t),r.object.updateMatrixWorld(),zt=Ce.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;zt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(zt).add(r.object.position):(jy.origin.copy(r.object.position),jy.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(jy.direction))<qme?e.lookAt(r.target):(CI.setFromNormalAndCoplanarPoint(r.object.up,r.target),jy.intersectPlane(CI,r.target))))}else r.object instanceof Bi&&r.object.isOrthographicCamera&&(Ht=h!==1,Ht&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix()));return h=1,S=!1,Ht||dt.distanceToSquared(r.object.position)>c||8*(1-Ze.dot(r.object.quaternion))>c?(r.dispatchEvent(i),dt.copy(r.object.position),Ze.copy(r.object.quaternion),Ht=!1,!0):!1}})(),this.connect=Ce=>{Ce===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=Ce,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",ae),r.domElement.addEventListener("pointerdown",Xe),r.domElement.addEventListener("pointercancel",fe),r.domElement.addEventListener("wheel",Je)},this.dispose=()=>{var Ce,Ye,tt,it,dt,Ze;r.domElement&&(r.domElement.style.touchAction="auto"),(Ce=r.domElement)==null||Ce.removeEventListener("contextmenu",ae),(Ye=r.domElement)==null||Ye.removeEventListener("pointerdown",Xe),(tt=r.domElement)==null||tt.removeEventListener("pointercancel",fe),(it=r.domElement)==null||it.removeEventListener("wheel",Je),(dt=r.domElement)==null||dt.ownerDocument.removeEventListener("pointermove",xt),(Ze=r.domElement)==null||Ze.ownerDocument.removeEventListener("pointerup",fe),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",te)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new G3,f=new G3;let h=1;const d=new J,p=new qe,m=new qe,g=new qe,v=new qe,x=new qe,y=new qe,A=new qe,T=new qe,w=new qe,M=new J,C=new qe;let S=!1;const R=[],O={};function L(){return 2*Math.PI/60/60*r.autoRotateSpeed}function B(){return Math.pow(.95,r.zoomSpeed)}function N(Ce){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=Ce:f.theta-=Ce}function $(Ce){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=Ce:f.phi-=Ce}const U=(()=>{const Ce=new J;return function(tt,it){Ce.setFromMatrixColumn(it,0),Ce.multiplyScalar(-tt),d.add(Ce)}})(),Q=(()=>{const Ce=new J;return function(tt,it){r.screenSpacePanning===!0?Ce.setFromMatrixColumn(it,1):(Ce.setFromMatrixColumn(it,0),Ce.crossVectors(r.object.up,Ce)),Ce.multiplyScalar(tt),d.add(Ce)}})(),Y=(()=>{const Ce=new J;return function(tt,it){const dt=r.domElement;if(dt&&r.object instanceof mr&&r.object.isPerspectiveCamera){const Ze=r.object.position;Ce.copy(Ze).sub(r.target);let Be=Ce.length();Be*=Math.tan(r.object.fov/2*Math.PI/180),U(2*tt*Be/dt.clientHeight,r.object.matrix),Q(2*it*Be/dt.clientHeight,r.object.matrix)}else dt&&r.object instanceof Bi&&r.object.isOrthographicCamera?(U(tt*(r.object.right-r.object.left)/r.object.zoom/dt.clientWidth,r.object.matrix),Q(it*(r.object.top-r.object.bottom)/r.object.zoom/dt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function ee(Ce){r.object instanceof mr&&r.object.isPerspectiveCamera||r.object instanceof Bi&&r.object.isOrthographicCamera?h/=Ce:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ne(Ce){r.object instanceof mr&&r.object.isPerspectiveCamera||r.object instanceof Bi&&r.object.isOrthographicCamera?h*=Ce:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function P(Ce){if(!r.zoomToCursor||!r.domElement)return;S=!0;const Ye=r.domElement.getBoundingClientRect(),tt=Ce.clientX-Ye.left,it=Ce.clientY-Ye.top,dt=Ye.width,Ze=Ye.height;C.x=tt/dt*2-1,C.y=-(it/Ze)*2+1,M.set(C.x,C.y,1).unproject(r.object).sub(r.object.position).normalize()}function se(Ce){return Math.max(r.minDistance,Math.min(r.maxDistance,Ce))}function re(Ce){p.set(Ce.clientX,Ce.clientY)}function Z(Ce){P(Ce),A.set(Ce.clientX,Ce.clientY)}function X(Ce){v.set(Ce.clientX,Ce.clientY)}function W(Ce){m.set(Ce.clientX,Ce.clientY),g.subVectors(m,p).multiplyScalar(r.rotateSpeed);const Ye=r.domElement;Ye&&(N(2*Math.PI*g.x/Ye.clientHeight),$(2*Math.PI*g.y/Ye.clientHeight)),p.copy(m),r.update()}function K(Ce){T.set(Ce.clientX,Ce.clientY),w.subVectors(T,A),w.y>0?ee(B()):w.y<0&&ne(B()),A.copy(T),r.update()}function ge(Ce){x.set(Ce.clientX,Ce.clientY),y.subVectors(x,v).multiplyScalar(r.panSpeed),Y(y.x,y.y),v.copy(x),r.update()}function Se(Ce){P(Ce),Ce.deltaY<0?ne(B()):Ce.deltaY>0&&ee(B()),r.update()}function xe(Ce){let Ye=!1;switch(Ce.code){case r.keys.UP:Y(0,r.keyPanSpeed),Ye=!0;break;case r.keys.BOTTOM:Y(0,-r.keyPanSpeed),Ye=!0;break;case r.keys.LEFT:Y(r.keyPanSpeed,0),Ye=!0;break;case r.keys.RIGHT:Y(-r.keyPanSpeed,0),Ye=!0;break}Ye&&(Ce.preventDefault(),r.update())}function Me(){if(R.length==1)p.set(R[0].pageX,R[0].pageY);else{const Ce=.5*(R[0].pageX+R[1].pageX),Ye=.5*(R[0].pageY+R[1].pageY);p.set(Ce,Ye)}}function he(){if(R.length==1)v.set(R[0].pageX,R[0].pageY);else{const Ce=.5*(R[0].pageX+R[1].pageX),Ye=.5*(R[0].pageY+R[1].pageY);v.set(Ce,Ye)}}function Oe(){const Ce=R[0].pageX-R[1].pageX,Ye=R[0].pageY-R[1].pageY,tt=Math.sqrt(Ce*Ce+Ye*Ye);A.set(0,tt)}function be(){r.enableZoom&&Oe(),r.enablePan&&he()}function Te(){r.enableZoom&&Oe(),r.enableRotate&&Me()}function Re(Ce){if(R.length==1)m.set(Ce.pageX,Ce.pageY);else{const tt=Ve(Ce),it=.5*(Ce.pageX+tt.x),dt=.5*(Ce.pageY+tt.y);m.set(it,dt)}g.subVectors(m,p).multiplyScalar(r.rotateSpeed);const Ye=r.domElement;Ye&&(N(2*Math.PI*g.x/Ye.clientHeight),$(2*Math.PI*g.y/Ye.clientHeight)),p.copy(m)}function $e(Ce){if(R.length==1)x.set(Ce.pageX,Ce.pageY);else{const Ye=Ve(Ce),tt=.5*(Ce.pageX+Ye.x),it=.5*(Ce.pageY+Ye.y);x.set(tt,it)}y.subVectors(x,v).multiplyScalar(r.panSpeed),Y(y.x,y.y),v.copy(x)}function ve(Ce){const Ye=Ve(Ce),tt=Ce.pageX-Ye.x,it=Ce.pageY-Ye.y,dt=Math.sqrt(tt*tt+it*it);T.set(0,dt),w.set(0,Math.pow(T.y/A.y,r.zoomSpeed)),ee(w.y),A.copy(T)}function me(Ce){r.enableZoom&&ve(Ce),r.enablePan&&$e(Ce)}function We(Ce){r.enableZoom&&ve(Ce),r.enableRotate&&Re(Ce)}function Xe(Ce){var Ye,tt;r.enabled!==!1&&(R.length===0&&((Ye=r.domElement)==null||Ye.ownerDocument.addEventListener("pointermove",xt),(tt=r.domElement)==null||tt.ownerDocument.addEventListener("pointerup",fe)),ye(Ce),Ce.pointerType==="touch"?z(Ce):ie(Ce))}function xt(Ce){r.enabled!==!1&&(Ce.pointerType==="touch"?F(Ce):Ae(Ce))}function fe(Ce){var Ye,tt,it;Le(Ce),R.length===0&&((Ye=r.domElement)==null||Ye.releasePointerCapture(Ce.pointerId),(tt=r.domElement)==null||tt.ownerDocument.removeEventListener("pointermove",xt),(it=r.domElement)==null||it.ownerDocument.removeEventListener("pointerup",fe)),r.dispatchEvent(o),l=a.NONE}function ie(Ce){let Ye;switch(Ce.button){case 0:Ye=r.mouseButtons.LEFT;break;case 1:Ye=r.mouseButtons.MIDDLE;break;case 2:Ye=r.mouseButtons.RIGHT;break;default:Ye=-1}switch(Ye){case Lf.DOLLY:if(r.enableZoom===!1)return;Z(Ce),l=a.DOLLY;break;case Lf.ROTATE:if(Ce.ctrlKey||Ce.metaKey||Ce.shiftKey){if(r.enablePan===!1)return;X(Ce),l=a.PAN}else{if(r.enableRotate===!1)return;re(Ce),l=a.ROTATE}break;case Lf.PAN:if(Ce.ctrlKey||Ce.metaKey||Ce.shiftKey){if(r.enableRotate===!1)return;re(Ce),l=a.ROTATE}else{if(r.enablePan===!1)return;X(Ce),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Ae(Ce){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;W(Ce);break;case a.DOLLY:if(r.enableZoom===!1)return;K(Ce);break;case a.PAN:if(r.enablePan===!1)return;ge(Ce);break}}function Je(Ce){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Ce.preventDefault(),r.dispatchEvent(s),Se(Ce),r.dispatchEvent(o))}function te(Ce){r.enabled===!1||r.enablePan===!1||xe(Ce)}function z(Ce){switch(ke(Ce),R.length){case 1:switch(r.touches.ONE){case Nf.ROTATE:if(r.enableRotate===!1)return;Me(),l=a.TOUCH_ROTATE;break;case Nf.PAN:if(r.enablePan===!1)return;he(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Nf.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;be(),l=a.TOUCH_DOLLY_PAN;break;case Nf.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Te(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function F(Ce){switch(ke(Ce),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Re(Ce),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;$e(Ce),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;me(Ce),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;We(Ce),r.update();break;default:l=a.NONE}}function ae(Ce){r.enabled!==!1&&Ce.preventDefault()}function ye(Ce){R.push(Ce)}function Le(Ce){delete O[Ce.pointerId];for(let Ye=0;Ye<R.length;Ye++)if(R[Ye].pointerId==Ce.pointerId){R.splice(Ye,1);return}}function ke(Ce){let Ye=O[Ce.pointerId];Ye===void 0&&(Ye=new qe,O[Ce.pointerId]=Ye),Ye.set(Ce.pageX,Ce.pageY)}function Ve(Ce){const Ye=Ce.pointerId===R[0].pointerId?R[1]:R[0];return O[Ye.pointerId]}n!==void 0&&this.connect(n),this.update()}};var Jme=Object.defineProperty,Qme=(t,e,n)=>e in t?Jme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$f=(t,e,n)=>(Qme(t,typeof e!="symbol"?e+"":e,n),n);class g_{constructor(){$f(this,"enabled",!0),$f(this,"needsSwap",!0),$f(this,"clear",!1),$f(this,"renderToScreen",!1)}setSize(e,n){}render(e,n,r,i,s){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}class Cc{constructor(e){$f(this,"camera",new Bi(-1,1,1,-1,0,1)),$f(this,"geometry",new Fo(2,2)),$f(this,"mesh"),this.mesh=new un(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}}var Zme=Object.defineProperty,e0e=(t,e,n)=>e in t?Zme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$y=(t,e,n)=>(e0e(t,typeof e!="symbol"?e+"":e,n),n);class FS extends g_{constructor(e,n="tDiffuse"){super(),$y(this,"textureID"),$y(this,"uniforms"),$y(this,"material"),$y(this,"fsQuad"),this.textureID=n,e instanceof ur?(this.uniforms=e.uniforms,this.material=e):(this.uniforms=Gu.clone(e.uniforms),this.material=new ur({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Cc(this.material)}render(e,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}const RI={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)};var t0e=Object.defineProperty,n0e=(t,e,n)=>e in t?t0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x2=(t,e,n)=>(n0e(t,typeof e!="symbol"?e+"":e,n),n);class II extends g_{constructor(e,n){super(),x2(this,"scene"),x2(this,"camera"),x2(this,"inverse"),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,r){const i=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),s.buffers.stencil.setFunc(i.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(i.EQUAL,1,4294967295),s.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),s.buffers.stencil.setLocked(!0)}}class r0e extends g_{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}var i0e=Object.defineProperty,s0e=(t,e,n)=>e in t?i0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ga=(t,e,n)=>(s0e(t,typeof e!="symbol"?e+"":e,n),n);class o0e{constructor(e,n){if(ga(this,"renderer"),ga(this,"_pixelRatio"),ga(this,"_width"),ga(this,"_height"),ga(this,"renderTarget1"),ga(this,"renderTarget2"),ga(this,"writeBuffer"),ga(this,"readBuffer"),ga(this,"renderToScreen"),ga(this,"passes",[]),ga(this,"copyPass"),ga(this,"clock"),this.renderer=e,n===void 0){const r={minFilter:Cn,magFilter:Cn,format:Sr},i=e.getSize(new qe);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,n=new pr(this._width*this._pixelRatio,this._height*this._pixelRatio,r),n.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,RI===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),FS===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new FS(RI),this.copyPass.material.blending=Da,this.clock=new f_}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const n=this.passes.indexOf(e);n!==-1&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const n=this.renderer.getRenderTarget();let r=!1;const i=this.passes.length;for(let s=0;s<i;s++){const o=this.passes[s];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(s),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),o.needsSwap){if(r){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}II!==void 0&&(o instanceof II?r=!0:o instanceof r0e&&(r=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(e===void 0){const n=this.renderer.getSize(new qe);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}var a0e=Object.defineProperty,l0e=(t,e,n)=>e in t?a0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wf=(t,e,n)=>(l0e(t,typeof e!="symbol"?e+"":e,n),n);class c0e extends g_{constructor(e,n,r,i,s=0){super(),wf(this,"scene"),wf(this,"camera"),wf(this,"overrideMaterial"),wf(this,"clearColor"),wf(this,"clearAlpha"),wf(this,"clearDepth",!1),wf(this,"_oldClearColor",new bt),this.scene=e,this.camera=n,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=s,this.clear=!0,this.needsSwap=!1}render(e,n,r){let i=e.autoClear;e.autoClear=!1;let s,o=null;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),e.autoClear=i}}function J3(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}}const Xf="srgb",Dc="srgb-linear",PI=3001,u0e=3e3;let sC=class extends _r{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new m0e(n)}),this.register(function(n){return new g0e(n)}),this.register(function(n){return new w0e(n)}),this.register(function(n){return new S0e(n)}),this.register(function(n){return new C0e(n)}),this.register(function(n){return new y0e(n)}),this.register(function(n){return new x0e(n)}),this.register(function(n){return new E0e(n)}),this.register(function(n){return new _0e(n)}),this.register(function(n){return new p0e(n)}),this.register(function(n){return new b0e(n)}),this.register(function(n){return new v0e(n)}),this.register(function(n){return new T0e(n)}),this.register(function(n){return new A0e(n)}),this.register(function(n){return new h0e(n)}),this.register(function(n){return new M0e(n)}),this.register(function(n){return new R0e(n)})}load(e,n,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=Si.extractUrlBase(e);o=Si.resolveURL(c,this.path)}else o=Si.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ir(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){n(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(J3(new Uint8Array(e.slice(0,4)))===sH){try{o[Zn.KHR_BINARY_GLTF]=new I0e(e)}catch(u){i&&i(u);return}s=JSON.parse(o[Zn.KHR_BINARY_GLTF].content)}else s=JSON.parse(J3(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new V0e(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(u){case Zn.KHR_MATERIALS_UNLIT:o[u]=new d0e;break;case Zn.KHR_DRACO_MESH_COMPRESSION:o[u]=new P0e(s,this.dracoLoader);break;case Zn.KHR_TEXTURE_TRANSFORM:o[u]=new L0e;break;case Zn.KHR_MESH_QUANTIZATION:o[u]=new N0e;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,n){const r=this;return new Promise(function(i,s){r.parse(e,n,i,s)})}};function f0e(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Zn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};let h0e=class{constructor(e){this.parser=e,this.name=Zn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let r=0,i=n.length;r<i;r++){const s=n[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,r="light:"+e;let i=n.cache.get(r);if(i)return i;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new bt(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],Dc);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new om(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new sm(u),c.distance=f;break;case"spot":c=new im(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,_c(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),n.cache.add(r,i),i}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(n.cache,a,l)})}},d0e=class{constructor(){this.name=Zn.KHR_MATERIALS_UNLIT}getMaterialType(){return Or}extendParams(e,n,r){const i=[];e.color=new bt(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Dc),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,Xf))}return Promise.all(i)}},p0e=class{constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}},m0e=class{constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new qe(a,a)}return Promise.all(s)}};class g0e{constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return n.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}let v0e=class{constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}},y0e=class{constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new bt(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;n.sheenColor.setRGB(a[0],a[1],a[2],Dc)}return o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(n,"sheenColorMap",o.sheenColorTexture,Xf)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}},x0e=class{constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}},E0e=class{constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new bt().setRGB(a[0],a[1],a[2],Dc),Promise.all(s)}},_0e=class{constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}},b0e=class{constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new bt().setRGB(a[0],a[1],a[2],Dc),o.specularColorTexture!==void 0&&s.push(r.assignTexture(n,"specularColorMap",o.specularColorTexture,Xf)),Promise.all(s)}};class A0e{constructor(e){this.parser=e,this.name=Zn.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return n.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(n,"bumpMap",o.bumpTexture)),Promise.all(s)}}let T0e=class{constructor(e){this.parser=e,this.name=Zn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(n.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(n.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(n,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}},w0e=class{constructor(e){this.parser=e,this.name=Zn.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}},S0e=class{constructor(e){this.parser=e,this.name=Zn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}},C0e=class{constructor(e){this.parser=e,this.name=Zn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}},M0e=class{constructor(e){this.name=Zn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,r=n.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,f=i.byteStride,h=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,h,i.mode,i.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(d),u,f,h,i.mode,i.filter),d})})}else return null}},R0e=class{constructor(e){this.name=Zn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=n.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==Aa.TRIANGLES&&c.mode!==Aa.TRIANGLE_STRIP&&c.mode!==Aa.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],h=c[0].count,d=[];for(const p of f){const m=new yt,g=new J,v=new kn,x=new J(1,1,1),y=new rm(p.geometry,p.material,h);for(let A=0;A<h;A++)l.TRANSLATION&&g.fromBufferAttribute(l.TRANSLATION,A),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,A),l.SCALE&&x.fromBufferAttribute(l.SCALE,A),y.setMatrixAt(A,m.compose(g,v,x));for(const A in l)if(A==="_COLOR_0"){const T=l[A];y.instanceColor=new ml(T.array,T.itemSize,T.normalized)}else A!=="TRANSLATION"&&A!=="ROTATION"&&A!=="SCALE"&&p.geometry.setAttribute(A,l[A]);hn.prototype.copy.call(y,p),this.parser.assignFinalMaterial(y),d.push(y)}return u.isGroup?(u.clear(),u.add(...d),u):d[0]}))}};const sH="glTF",g0=12,LI={JSON:1313821514,BIN:5130562};let I0e=class{constructor(e){this.name=Zn.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,g0);if(this.header={magic:J3(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==sH)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-g0,i=new DataView(e,g0);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===LI.JSON){const l=new Uint8Array(e,g0+s,o);this.content=J3(l)}else if(a===LI.BIN){const l=g0+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},P0e=class{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Zn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const f=US[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=US[u]||u.toLowerCase();if(o[u]!==void 0){const h=r.accessors[e.attributes[u]],d=Ap[h.componentType];c[f]=d.name,l[f]=h.normalized===!0}}return n.getDependency("bufferView",s).then(function(u){return new Promise(function(f,h){i.decodeDracoFile(u,function(d){for(const p in d.attributes){const m=d.attributes[p],g=l[p];g!==void 0&&(m.normalized=g)}f(d)},a,c,Dc,h)})})}},L0e=class{constructor(){this.name=Zn.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}},N0e=class{constructor(){this.name=Zn.KHR_MESH_QUANTIZATION}},oH=class extends Sh{constructor(e,n,r,i){super(e,n,r,i)}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)n[o]=r[s+o];return n}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=i-n,f=(r-n)/u,h=f*f,d=h*f,p=e*c,m=p-c,g=-2*d+3*h,v=d-h,x=1-g,y=v-h+f;for(let A=0;A!==a;A++){const T=o[m+A+a],w=o[m+A+l]*u,M=o[p+A+a],C=o[p+A]*u;s[A]=x*T+y*w+g*M+v*C}return s}};const O0e=new kn;let D0e=class extends oH{interpolate_(e,n,r,i){const s=super.interpolate_(e,n,r,i);return O0e.fromArray(s).normalize().toArray(s),s}};const Aa={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ap={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},NI={9728:Ln,9729:Cn,9984:Ip,9985:wg,9986:Zf,9987:js},OI={33071:Er,33648:uh,10497:Rr},E2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},US={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Xz>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},pu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},B0e={CUBICSPLINE:void 0,LINEAR:zc,STEP:dh},_2={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function k0e(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new _l({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:es})),t.DefaultMaterial}function Sf(t,e,n){for(const r in n.extensions)t[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function _c(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function F0e(t,e,n){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(r){const h=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):t.attributes.position;o.push(h)}if(i){const h=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):t.attributes.normal;a.push(h)}if(s){const h=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):t.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],h=c[2];return r&&(t.morphAttributes.position=u),i&&(t.morphAttributes.normal=f),s&&(t.morphAttributes.color=h),t.morphTargetsRelative=!0,t})}function U0e(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let r=0,i=n.length;r<i;r++)t.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function z0e(t){let e;const n=t.extensions&&t.extensions[Zn.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+b2(n.attributes):e=t.indices+":"+b2(t.attributes)+":"+t.mode,t.targets!==void 0)for(let r=0,i=t.targets.length;r<i;r++)e+=":"+b2(t.targets[r]);return e}function b2(t){let e="";const n=Object.keys(t).sort();for(let r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function zS(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function H0e(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const G0e=new yt;let V0e=class{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new f0e,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new Ki(this.options.manager):this.textureLoader=new B5(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ir(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return Sf(s,a,i),_c(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=n.length;i<s;i++){const o=n[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,r){if(e.refs[n]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[n]++,i}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const i=e(n[r]);if(i)return i}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let i=0;i<n.length;i++){const s=e(n[i]);s&&r.push(s)}return r}getDependency(e,n){const r=e+":"+n;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(n);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":i=this.loadAccessor(n);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":i=this.loadBuffer(n);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":i=this.loadSkin(n);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":i=this.loadCamera(n);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let n=this.cache.get(e);if(!n){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Zn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Si.resolveURL(n.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(r){const i=n.byteLength||0,s=n.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const n=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=E2[i.type],a=Ap[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new Qt(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=E2[i.type],c=Ap[i.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,h=i.byteOffset||0,d=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,p=i.normalized===!0;let m,g;if(d&&d!==f){const v=Math.floor(h/d),x="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+v+":"+i.count;let y=n.cache.get(x);y||(m=new c(a,v*d,i.count*d/u),y=new nm(m,d/u),n.cache.add(x,y)),g=new po(y,l,h%d/u,p)}else a===null?m=new c(i.count*l):m=new c(a,h,i.count*l),g=new Qt(m,l,p);if(i.sparse!==void 0){const v=E2.SCALAR,x=Ap[i.sparse.indices.componentType],y=i.sparse.indices.byteOffset||0,A=i.sparse.values.byteOffset||0,T=new x(o[1],y,i.sparse.count*v),w=new c(o[2],A,i.sparse.count*l);a!==null&&(g=new Qt(g.array.slice(),g.itemSize,g.normalized));for(let M=0,C=T.length;M<C;M++){const S=T[M];if(g.setX(S,w[M*l]),l>=2&&g.setY(S,w[M*l+1]),l>=3&&g.setZ(S,w[M*l+2]),l>=4&&g.setW(S,w[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const n=this.json,r=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,r){const i=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=NI[h.magFilter]||Cn,u.minFilter=NI[h.minFilter]||js,u.wrapS=OI[h.wrapS]||Rr,u.wrapT=OI[h.wrapT]||Rr,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const h=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(h,d){let p=h;n.isImageBitmapLoader===!0&&(p=function(m){const g=new Vn(m);g.needsUpdate=!0,h(g)}),n.load(Si.resolveURL(f,s.path),p,void 0,d)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),_c(f,o),f.userData.mimeType=o.mimeType||H0e(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,n,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[Zn.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[Zn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Zn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===PI?Xf:Dc),"colorSpace"in o?o.colorSpace=i:o.encoding=i===Xf?PI:u0e),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let r=e.material;const i=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new ul,Gr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new yi,Gr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return _l}loadMaterial(e){const n=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Zn.KHR_MATERIALS_UNLIT]){const f=i[Zn.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,n))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new bt(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],Dc),a.opacity=h[3]}f.baseColorTexture!==void 0&&c.push(n.assignTexture(a,"map",f.baseColorTexture,Xf)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=gr);const u=s.alphaMode||_2.OPAQUE;if(u===_2.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===_2.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Or&&(c.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new qe(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==Or&&(c.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Or){const f=s.emissiveFactor;a.emissive=new bt().setRGB(f[0],f[1],f[2],Dc)}return s.emissiveTexture!==void 0&&o!==Or&&c.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,Xf)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),_c(f,s),n.associations.set(f,{materials:e}),s.extensions&&Sf(i,f,s),f})}createUniqueName(e){const n=nr.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[Zn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return DI(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=z0e(c),f=i[u];if(f)o.push(f.promise);else{let h;c.extensions&&c.extensions[Zn.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=DI(new on,c,n),i[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const n=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?k0e(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],g=o[d];let v;const x=c[d];if(g.mode===Aa.TRIANGLES||g.mode===Aa.TRIANGLE_STRIP||g.mode===Aa.TRIANGLE_FAN||g.mode===void 0)v=s.isSkinnedMesh===!0?new bh(m,x):new un(m,x),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),g.mode===Aa.TRIANGLE_STRIP?v.geometry=SI(v.geometry,Cg):g.mode===Aa.TRIANGLE_FAN&&(v.geometry=SI(v.geometry,ph));else if(g.mode===Aa.LINES)v=new $s(m,x);else if(g.mode===Aa.LINE_STRIP)v=new Fa(m,x);else if(g.mode===Aa.LINE_LOOP)v=new jE(m,x);else if(g.mode===Aa.POINTS)v=new Nc(m,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(v.geometry.morphAttributes).length>0&&U0e(v,s),v.name=n.createUniqueName(s.name||"mesh_"+e),_c(v,s),g.extensions&&Sf(i,v,g),n.assignFinalMaterial(v),f.push(v)}for(let d=0,p=f.length;d<p;d++)n.associations.set(f[d],{meshes:e,primitives:d});if(f.length===1)return s.extensions&&Sf(i,f[0],s),f[0];const h=new ki;s.extensions&&Sf(i,h,s),n.associations.set(h,{meshes:e});for(let d=0,p=f.length;d<p;d++)h.add(f[d]);return h})}loadCamera(e){let n;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new mr(si.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(n=new Bi(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),_c(n,r),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],r=[];for(let i=0,s=n.joints.length;i<s;i++)r.push(this._loadNodeShallow(n.joints[i]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const f=o[c];if(f){a.push(f);const h=new yt;s!==null&&h.fromArray(s.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new Xu(a,l)})}loadAnimation(e){const n=this.json,r=this,i=n.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let f=0,h=i.channels.length;f<h;f++){const d=i.channels[f],p=i.samplers[d.sampler],m=d.target,g=m.node,v=i.parameters!==void 0?i.parameters[p.input]:p.input,x=i.parameters!==void 0?i.parameters[p.output]:p.output;m.node!==void 0&&(o.push(this.getDependency("node",g)),a.push(this.getDependency("accessor",v)),l.push(this.getDependency("accessor",x)),c.push(p),u.push(m))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(f){const h=f[0],d=f[1],p=f[2],m=f[3],g=f[4],v=[];for(let x=0,y=h.length;x<y;x++){const A=h[x],T=d[x],w=p[x],M=m[x],C=g[x];if(A===void 0)continue;A.updateMatrix&&A.updateMatrix();const S=r._createAnimationTracks(A,T,w,M,C);if(S)for(let R=0;R<S.length;R++)v.push(S[R])}return new Ua(s,void 0,v)})}createNodeMesh(e){const n=this.json,r=this,i=n.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const n=this.json,r=this,i=n.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],f=c[1],h=c[2];h!==null&&u.traverse(function(d){d.isSkinnedMesh&&d.bind(h,G0e)});for(let d=0,p=f.length;d<p;d++)u.add(f[d]);return u})}_loadNodeShallow(e){const n=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new Ah:c.length>1?u=new ki:c.length===1?u=c[0]:u=new hn,u!==c[0])for(let f=0,h=c.length;f<h;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=o),_c(u,s),s.extensions&&Sf(r,u,s),s.matrix!==void 0){const f=new yt;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const n=this.extensions,r=this.json.scenes[e],i=this,s=new ki;r.name&&(s.name=i.createUniqueName(r.name)),_c(s,r),r.extensions&&Sf(n,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[h,d]of i.associations)(h instanceof Gr||h instanceof Vn)&&f.set(h,d);return u.traverse(h=>{const d=i.associations.get(h);d!=null&&f.set(h,d)}),f};return i.associations=c(s),s})}_createAnimationTracks(e,n,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];pu[s.path]===pu.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a);let c;switch(pu[s.path]){case pu.weights:c=Vu;break;case pu.rotation:c=oa;break;case pu.position:case pu.scale:c=aa;break;default:switch(r.itemSize){case 1:c=Vu;break;case 2:case 3:default:c=aa;break}break}const u=i.interpolation!==void 0?B0e[i.interpolation]:zc,f=this._getArrayFromAccessor(r);for(let h=0,d=l.length;h<d;h++){const p=new c(l[h]+"."+pu[s.path],n.array,f,u);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const r=zS(n.constructor),i=new Float32Array(n.length);for(let s=0,o=n.length;s<o;s++)i[s]=n[s]*r;n=i}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof oa?D0e:oH;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function W0e(t,e,n){const r=e.attributes,i=new Yn;if(r.POSITION!==void 0){const a=n.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new J(l[0],l[1],l[2]),new J(c[0],c[1],c[2])),a.normalized){const u=zS(Ap[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new J,l=new J;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const h=n.json.accessors[f.POSITION],d=h.min,p=h.max;if(d!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(p[2]))),h.normalized){const m=zS(Ap[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}t.boundingBox=i;const o=new Fr;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=o}function DI(t,e,n){const r=e.attributes,i=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in r){const a=US[o]||o.toLowerCase();a in t.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});i.push(o)}return _c(t,e),W0e(t,e,n),Promise.all(i).then(function(){return e.targets!==void 0?F0e(t,e.targets,n):t})}class j0e extends on{constructor(e,n,r,i){super();const s=[],o=[],a=[],l=new J,c=new yt;c.makeRotationFromEuler(r),c.setPosition(n);const u=new yt;u.copy(c).invert(),f(),this.setAttribute("position",new Ot(s,3)),this.setAttribute("normal",new Ot(o,3)),this.setAttribute("uv",new Ot(a,2));function f(){let m,g=[];const v=new J,x=new J;if(e.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const y=e.geometry,A=y.attributes.position,T=y.attributes.normal;if(y.index!==null){const w=y.index;for(m=0;m<w.count;m++)v.fromBufferAttribute(A,w.getX(m)),x.fromBufferAttribute(T,w.getX(m)),h(g,v,x)}else for(m=0;m<A.count;m++)v.fromBufferAttribute(A,m),x.fromBufferAttribute(T,m),h(g,v,x);for(g=d(g,l.set(1,0,0)),g=d(g,l.set(-1,0,0)),g=d(g,l.set(0,1,0)),g=d(g,l.set(0,-1,0)),g=d(g,l.set(0,0,1)),g=d(g,l.set(0,0,-1)),m=0;m<g.length;m++){const w=g[m];a.push(.5+w.position.x/i.x,.5+w.position.y/i.y),w.position.applyMatrix4(c),s.push(w.position.x,w.position.y,w.position.z),o.push(w.normal.x,w.normal.y,w.normal.z)}}function h(m,g,v){g.applyMatrix4(e.matrixWorld),g.applyMatrix4(u),v.transformDirection(e.matrixWorld),m.push(new BI(g.clone(),v.clone()))}function d(m,g){const v=[],x=.5*Math.abs(i.dot(g));for(let y=0;y<m.length;y+=3){let A,T,w,M=0,C,S,R,O;const L=m[y+0].position.dot(g)-x,B=m[y+1].position.dot(g)-x,N=m[y+2].position.dot(g)-x;switch(A=L>0,T=B>0,w=N>0,M=(A?1:0)+(T?1:0)+(w?1:0),M){case 0:{v.push(m[y]),v.push(m[y+1]),v.push(m[y+2]);break}case 1:{if(A&&(C=m[y+1],S=m[y+2],R=p(m[y],C,g,x),O=p(m[y],S,g,x)),T){C=m[y],S=m[y+2],R=p(m[y+1],C,g,x),O=p(m[y+1],S,g,x),v.push(R),v.push(S.clone()),v.push(C.clone()),v.push(S.clone()),v.push(R.clone()),v.push(O);break}w&&(C=m[y],S=m[y+1],R=p(m[y+2],C,g,x),O=p(m[y+2],S,g,x)),v.push(C.clone()),v.push(S.clone()),v.push(R),v.push(O),v.push(R.clone()),v.push(S.clone());break}case 2:{A||(C=m[y].clone(),S=p(C,m[y+1],g,x),R=p(C,m[y+2],g,x),v.push(C),v.push(S),v.push(R)),T||(C=m[y+1].clone(),S=p(C,m[y+2],g,x),R=p(C,m[y],g,x),v.push(C),v.push(S),v.push(R)),w||(C=m[y+2].clone(),S=p(C,m[y],g,x),R=p(C,m[y+1],g,x),v.push(C),v.push(S),v.push(R));break}}}return v}function p(m,g,v,x){const y=m.position.dot(v)-x,A=g.position.dot(v)-x,T=y/(y-A);return new BI(new J(m.position.x+T*(g.position.x-m.position.x),m.position.y+T*(g.position.y-m.position.y),m.position.z+T*(g.position.z-m.position.z)),new J(m.normal.x+T*(g.normal.x-m.normal.x),m.normal.y+T*(g.normal.y-m.normal.y),m.normal.z+T*(g.normal.z-m.normal.z)))}}}class BI{constructor(e,n){this.position=e,this.normal=n}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}class $0e extends Ng{constructor(e,n={}){const{bevelEnabled:r=!1,bevelSize:i=8,bevelThickness:s=10,font:o,height:a=50,size:l=100,lineHeight:c=1,letterSpacing:u=0,...f}=n;if(o===void 0)super();else{const h=o.generateShapes(e,l,{lineHeight:c,letterSpacing:u});super(h,{...f,bevelEnabled:r,bevelSize:i,bevelThickness:s,depth:a})}this.type="TextGeometry"}}const X0e={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 tex = texture2D( tDiffuse, vUv );","	gl_FragColor = LinearTosRGB( tex );","}"].join(`
`)},Y0e={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},q0e={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},A2=new _h,T2=new J,_d=new J,el=new J,pc=new J,Rl=new J,mc=new J,gc=new J,v0=new J,y0=new J,x0=new J,Xy=new J,E0=new J,_0=new J,b0=new J;class K0e{constructor(e,n,r){this.camera=e,this.scene=n,this.startPoint=new J,this.endPoint=new J,this.collection=[],this.deep=r||Number.MAX_VALUE}select(e,n){return this.startPoint=e||this.startPoint,this.endPoint=n||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(A2,this.scene),this.collection}updateFrustum(e,n){if(e=e||this.startPoint,n=n||this.endPoint,e.x===n.x&&(n.x+=Number.EPSILON),e.y===n.y&&(n.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){_d.copy(e),_d.x=Math.min(e.x,n.x),_d.y=Math.max(e.y,n.y),n.x=Math.max(e.x,n.x),n.y=Math.min(e.y,n.y),el.setFromMatrixPosition(this.camera.matrixWorld),pc.copy(_d),Rl.set(n.x,_d.y,0),mc.copy(n),gc.set(_d.x,n.y,0),pc.unproject(this.camera),Rl.unproject(this.camera),mc.unproject(this.camera),gc.unproject(this.camera),E0.copy(pc).sub(el),_0.copy(Rl).sub(el),b0.copy(mc).sub(el),E0.normalize(),_0.normalize(),b0.normalize(),E0.multiplyScalar(this.deep),_0.multiplyScalar(this.deep),b0.multiplyScalar(this.deep),E0.add(el),_0.add(el),b0.add(el);var r=A2.planes;r[0].setFromCoplanarPoints(el,pc,Rl),r[1].setFromCoplanarPoints(el,Rl,mc),r[2].setFromCoplanarPoints(mc,gc,el),r[3].setFromCoplanarPoints(gc,pc,el),r[4].setFromCoplanarPoints(Rl,mc,gc),r[5].setFromCoplanarPoints(b0,_0,E0),r[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const i=Math.min(e.x,n.x),s=Math.max(e.y,n.y),o=Math.max(e.x,n.x),a=Math.min(e.y,n.y);pc.set(i,s,-1),Rl.set(o,s,-1),mc.set(o,a,-1),gc.set(i,a,-1),v0.set(i,s,1),y0.set(o,s,1),x0.set(o,a,1),Xy.set(i,a,1),pc.unproject(this.camera),Rl.unproject(this.camera),mc.unproject(this.camera),gc.unproject(this.camera),v0.unproject(this.camera),y0.unproject(this.camera),x0.unproject(this.camera),Xy.unproject(this.camera);var r=A2.planes;r[0].setFromCoplanarPoints(pc,v0,y0),r[1].setFromCoplanarPoints(Rl,y0,x0),r[2].setFromCoplanarPoints(x0,Xy,gc),r[3].setFromCoplanarPoints(Xy,v0,pc),r[4].setFromCoplanarPoints(Rl,mc,gc),r[5].setFromCoplanarPoints(x0,y0,v0),r[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,n){if((n.isMesh||n.isLine||n.isPoints)&&n.material!==void 0&&(n.geometry.boundingSphere===null&&n.geometry.computeBoundingSphere(),T2.copy(n.geometry.boundingSphere.center),T2.applyMatrix4(n.matrixWorld),e.containsPoint(T2)&&this.collection.push(n)),n.children.length>0)for(let r=0;r<n.children.length;r++)this.searchChildInFrustum(e,n.children[r])}}class J0e{constructor(e,n=" .:-=+*#%@",r={}){const i=r.resolution||.15,s=r.scale||1,o=r.color||!1,a=r.alpha||!1,l=r.block||!1,c=r.invert||!1,u=r.strResolution||"low";let f,h;const d=document.createElement("div");d.style.cursor="default";const p=document.createElement("table");d.appendChild(p);let m,g,v;this.setSize=function(N,$){f=N,h=$,e.setSize(N,$),x()},this.render=function(N,$){e.render(N,$),B(p)},this.domElement=d;function x(){m=Math.floor(f*i),g=Math.floor(h*i),M.width=m,M.height=g,v=e.domElement,v.style.backgroundColor&&(p.rows[0].cells[0].style.backgroundColor=v.style.backgroundColor,p.rows[0].cells[0].style.color=v.style.color),p.cellSpacing=0,p.cellPadding=0;const N=p.style;N.whiteSpace="pre",N.margin="0px",N.padding="0px",N.letterSpacing=L+"px",N.fontFamily=T,N.fontSize=R+"px",N.lineHeight=O+"px",N.textAlign="left",N.textDecoration="none"}const y=" .,:;i1tfLCG08@".split(""),A=" CGO08@".split(""),T="courier new, monospace",w=e.domElement,M=document.createElement("canvas");if(!M.getContext)return;const C=M.getContext("2d");if(!C.getImageData)return;let S=o?A:y;n&&(S=n);const R=2/i*s,O=2/i*s;let L=0;if(u=="low")switch(s){case 1:L=-1;break;case 2:case 3:L=-2.1;break;case 4:L=-3.1;break;case 5:L=-4.15;break}if(u=="medium")switch(s){case 1:L=0;break;case 2:L=-1;break;case 3:L=-1.04;break;case 4:case 5:L=-2.1;break}if(u=="high")switch(s){case 1:case 2:L=0;break;case 3:case 4:case 5:L=-1;break}function B(N){C.clearRect(0,0,m,g),C.drawImage(w,0,0,m,g);const $=C.getImageData(0,0,m,g).data;let U="";for(let Q=0;Q<g;Q+=2){for(let Y=0;Y<m;Y++){const ee=(Q*m+Y)*4,ne=$[ee],P=$[ee+1],se=$[ee+2],re=$[ee+3];let Z,X;X=(.3*ne+.59*P+.11*se)/255,re==0&&(X=1),Z=Math.floor((1-X)*(S.length-1)),c&&(Z=S.length-Z-1);let W=S[Z];(W===void 0||W==" ")&&(W="&nbsp;"),o?U+="<span style='color:rgb("+ne+","+P+","+se+");"+(l?"background-color:rgb("+ne+","+P+","+se+");":"")+(a?"opacity:"+re/255+";":"")+"'>"+W+"</span>":U+=W}U+="<br/>"}N.innerHTML=`<tr><td style="display:block;width:${f}px;height:${h}px;overflow:hidden">${U}</td></tr>`}}}var Q0e=Object.defineProperty,Z0e=(t,e,n)=>e in t?Q0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oC=(t,e,n)=>(Z0e(t,typeof e!="symbol"?e+"":e,n),n);class e1e extends _r{constructor(e){super(e)}load(e,n,r,i){const s=new Ir(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{if(typeof o!="string")throw new Error("unsupported data type");const a=JSON.parse(o),l=this.parse(a);n&&n(l)},r,i)}loadAsync(e,n){return super.loadAsync(e,n)}parse(e){return new aC(e)}}class aC{constructor(e){oC(this,"data"),this.data=e}generateShapes(e,n=100,r){const i=[],s={letterSpacing:0,lineHeight:1,...r},o=t1e(e,n,this.data,s);for(let a=0,l=o.length;a<l;a++)Array.prototype.push.apply(i,o[a].toShapes(!1));return i}}oC(aC,"isFont");oC(aC,"type");function t1e(t,e,n,r){const i=Array.from(t),s=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*s,a=[];let l=0,c=0;for(let u=0;u<i.length;u++){const f=i[u];if(f===`
`)l=0,c-=o*r.lineHeight;else{const h=n1e(f,s,l,c,n);h&&(l+=h.offsetX+r.letterSpacing,a.push(h.path))}}return a}function n1e(t,e,n,r,i){const s=i.glyphs[t]||i.glyphs["?"];if(!s){console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".");return}const o=new Ec;let a,l,c,u,f,h,d,p;if(s.o){const m=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let g=0,v=m.length;g<v;)switch(m[g++]){case"m":a=parseInt(m[g++])*e+n,l=parseInt(m[g++])*e+r,o.moveTo(a,l);break;case"l":a=parseInt(m[g++])*e+n,l=parseInt(m[g++])*e+r,o.lineTo(a,l);break;case"q":c=parseInt(m[g++])*e+n,u=parseInt(m[g++])*e+r,f=parseInt(m[g++])*e+n,h=parseInt(m[g++])*e+r,o.quadraticCurveTo(f,h,c,u);break;case"b":c=parseInt(m[g++])*e+n,u=parseInt(m[g++])*e+r,f=parseInt(m[g++])*e+n,h=parseInt(m[g++])*e+r,d=parseInt(m[g++])*e+n,p=parseInt(m[g++])*e+r,o.bezierCurveTo(f,h,d,p,c,u);break}}return{offsetX:s.ha*e,path:o}}class r1e extends Bg{constructor(e){super(e),this.type=Xr}parse(e){const o=function(C,S){switch(C){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(S||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(S||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(S||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(S||""))}},u=`
`,f=function(C,S,R){S=S||1024;let L=C.pos,B=-1,N=0,$="",U=String.fromCharCode.apply(null,new Uint16Array(C.subarray(L,L+128)));for(;0>(B=U.indexOf(u))&&N<S&&L<C.byteLength;)$+=U,N+=U.length,L+=128,U+=String.fromCharCode.apply(null,new Uint16Array(C.subarray(L,L+128)));return-1<B?(R!==!1&&(C.pos+=N+B+1),$+U.slice(0,B)):!1},h=function(C){const S=/^#\?(\S+)/,R=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,O=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,L=/^\s*FORMAT=(\S+)\s*$/,B=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,N={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let $,U;for((C.pos>=C.byteLength||!($=f(C)))&&o(1,"no header found"),(U=$.match(S))||o(3,"bad initial token"),N.valid|=1,N.programtype=U[1],N.string+=$+`
`;$=f(C),$!==!1;){if(N.string+=$+`
`,$.charAt(0)==="#"){N.comments+=$+`
`;continue}if((U=$.match(R))&&(N.gamma=parseFloat(U[1])),(U=$.match(O))&&(N.exposure=parseFloat(U[1])),(U=$.match(L))&&(N.valid|=2,N.format=U[1]),(U=$.match(B))&&(N.valid|=4,N.height=parseInt(U[1],10),N.width=parseInt(U[2],10)),N.valid&2&&N.valid&4)break}return N.valid&2||o(3,"missing format specifier"),N.valid&4||o(3,"missing image size specifier"),N},d=function(C,S,R){const O=S;if(O<8||O>32767||C[0]!==2||C[1]!==2||C[2]&128)return new Uint8Array(C);O!==(C[2]<<8|C[3])&&o(3,"wrong scanline width");const L=new Uint8Array(4*S*R);L.length||o(4,"unable to allocate buffer space");let B=0,N=0;const $=4*O,U=new Uint8Array(4),Q=new Uint8Array($);let Y=R;for(;Y>0&&N<C.byteLength;){N+4>C.byteLength&&o(1),U[0]=C[N++],U[1]=C[N++],U[2]=C[N++],U[3]=C[N++],(U[0]!=2||U[1]!=2||(U[2]<<8|U[3])!=O)&&o(3,"bad rgbe scanline format");let ee=0,ne;for(;ee<$&&N<C.byteLength;){ne=C[N++];const se=ne>128;if(se&&(ne-=128),(ne===0||ee+ne>$)&&o(3,"bad scanline data"),se){const re=C[N++];for(let Z=0;Z<ne;Z++)Q[ee++]=re}else Q.set(C.subarray(N,N+ne),ee),ee+=ne,N+=ne}const P=O;for(let se=0;se<P;se++){let re=0;L[B]=Q[se+re],re+=O,L[B+1]=Q[se+re],re+=O,L[B+2]=Q[se+re],re+=O,L[B+3]=Q[se+re],B+=4}Y--}return L},p=function(C,S,R,O){const L=C[S+3],B=Math.pow(2,L-128)/255;R[O+0]=C[S+0]*B,R[O+1]=C[S+1]*B,R[O+2]=C[S+2]*B,R[O+3]=1},m=function(C,S,R,O){const L=C[S+3],B=Math.pow(2,L-128)/255;R[O+0]=Vf.toHalfFloat(Math.min(C[S+0]*B,65504)),R[O+1]=Vf.toHalfFloat(Math.min(C[S+1]*B,65504)),R[O+2]=Vf.toHalfFloat(Math.min(C[S+2]*B,65504)),R[O+3]=Vf.toHalfFloat(1)},g=new Uint8Array(e);g.pos=0;const v=h(g),x=v.width,y=v.height,A=d(g.subarray(g.pos),x,y);let T,w,M;switch(this.type){case fr:M=A.length/4;const C=new Float32Array(M*4);for(let R=0;R<M;R++)p(A,R*4,C,R*4);T=C,w=fr;break;case Xr:M=A.length/4;const S=new Uint16Array(M*4);for(let R=0;R<M;R++)m(A,R*4,S,R*4);T=S,w=Xr;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:x,height:y,data:T,header:v.string,gamma:v.gamma,exposure:v.exposure,type:w}}setDataType(e){return this.type=e,this}load(e,n,r,i){function s(o,a){switch(o.type){case fr:case Xr:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Cn,o.magFilter=Cn,o.generateMipmaps=!1,o.flipY=!0;break}n&&n(o,a)}return super.load(e,s,r,i)}}const A0="colorSpace"in new Vn;class i1e extends Bg{constructor(e){super(e),this.type=Xr}parse(e){const S=Math.pow(2.7182818,2.2);function R(pe,Ee){for(var je=0,ue=0;ue<65536;++ue)(ue==0||pe[ue>>3]&1<<(ue&7))&&(Ee[je++]=ue);for(var we=je-1;je<65536;)Ee[je++]=0;return we}function O(pe){for(var Ee=0;Ee<16384;Ee++)pe[Ee]={},pe[Ee].len=0,pe[Ee].lit=0,pe[Ee].p=null}const L={l:0,c:0,lc:0};function B(pe,Ee,je,ue,we){for(;je<pe;)Ee=Ee<<8|Ce(ue,we),je+=8;je-=pe,L.l=Ee>>je&(1<<pe)-1,L.c=Ee,L.lc=je}const N=new Array(59);function $(pe){for(var Ee=0;Ee<=58;++Ee)N[Ee]=0;for(var Ee=0;Ee<65537;++Ee)N[pe[Ee]]+=1;for(var je=0,Ee=58;Ee>0;--Ee){var ue=je+N[Ee]>>1;N[Ee]=je,je=ue}for(var Ee=0;Ee<65537;++Ee){var we=pe[Ee];we>0&&(pe[Ee]=we|N[we]++<<6)}}function U(pe,Ee,je,ue,we,Pe,Ge){for(var Fe=je,lt=0,ot=0;we<=Pe;we++){if(Fe.value-je.value>ue)return!1;B(6,lt,ot,pe,Fe);var pt=L.l;if(lt=L.c,ot=L.lc,Ge[we]=pt,pt==63){if(Fe.value-je.value>ue)throw"Something wrong with hufUnpackEncTable";B(8,lt,ot,pe,Fe);var Ke=L.l+6;if(lt=L.c,ot=L.lc,we+Ke>Pe+1)throw"Something wrong with hufUnpackEncTable";for(;Ke--;)Ge[we++]=0;we--}else if(pt>=59){var Ke=pt-59+2;if(we+Ke>Pe+1)throw"Something wrong with hufUnpackEncTable";for(;Ke--;)Ge[we++]=0;we--}}$(Ge)}function Q(pe){return pe&63}function Y(pe){return pe>>6}function ee(pe,Ee,je,ue){for(;Ee<=je;Ee++){var we=Y(pe[Ee]),Pe=Q(pe[Ee]);if(we>>Pe)throw"Invalid table entry";if(Pe>14){var Ge=ue[we>>Pe-14];if(Ge.len)throw"Invalid table entry";if(Ge.lit++,Ge.p){var Fe=Ge.p;Ge.p=new Array(Ge.lit);for(var lt=0;lt<Ge.lit-1;++lt)Ge.p[lt]=Fe[lt]}else Ge.p=new Array(1);Ge.p[Ge.lit-1]=Ee}else if(Pe)for(var ot=0,lt=1<<14-Pe;lt>0;lt--){var Ge=ue[(we<<14-Pe)+ot];if(Ge.len||Ge.p)throw"Invalid table entry";Ge.len=Pe,Ge.lit=Ee,ot++}}return!0}const ne={c:0,lc:0};function P(pe,Ee,je,ue){pe=pe<<8|Ce(je,ue),Ee+=8,ne.c=pe,ne.lc=Ee}const se={c:0,lc:0};function re(pe,Ee,je,ue,we,Pe,Ge,Fe,lt,ot){if(pe==Ee){ue<8&&(P(je,ue,we,Ge),je=ne.c,ue=ne.lc),ue-=8;var pt=je>>ue,pt=new Uint8Array([pt])[0];if(lt.value+pt>ot)return!1;for(var Ke=Fe[lt.value-1];pt-- >0;)Fe[lt.value++]=Ke}else if(lt.value<ot)Fe[lt.value++]=pe;else return!1;se.c=je,se.lc=ue}function Z(pe){return pe&65535}function X(pe){var Ee=Z(pe);return Ee>32767?Ee-65536:Ee}const W={a:0,b:0};function K(pe,Ee){var je=X(pe),ue=X(Ee),we=ue,Pe=je+(we&1)+(we>>1),Ge=Pe,Fe=Pe-we;W.a=Ge,W.b=Fe}function ge(pe,Ee){var je=Z(pe),ue=Z(Ee),we=je-(ue>>1)&65535,Pe=ue+we-32768&65535;W.a=Pe,W.b=we}function Se(pe,Ee,je,ue,we,Pe,Ge){for(var Fe=Ge<16384,lt=je>we?we:je,ot=1,pt;ot<=lt;)ot<<=1;for(ot>>=1,pt=ot,ot>>=1;ot>=1;){for(var Ke=0,Vt=Ke+Pe*(we-pt),Lt=Pe*ot,Pt=Pe*pt,qt=ue*ot,sn=ue*pt,ln,vn,jt,Dt;Ke<=Vt;Ke+=Pt){for(var Mn=Ke,fn=Ke+ue*(je-pt);Mn<=fn;Mn+=sn){var yn=Mn+qt,Jn=Mn+Lt,or=Jn+qt;Fe?(K(pe[Mn+Ee],pe[Jn+Ee]),ln=W.a,jt=W.b,K(pe[yn+Ee],pe[or+Ee]),vn=W.a,Dt=W.b,K(ln,vn),pe[Mn+Ee]=W.a,pe[yn+Ee]=W.b,K(jt,Dt),pe[Jn+Ee]=W.a,pe[or+Ee]=W.b):(ge(pe[Mn+Ee],pe[Jn+Ee]),ln=W.a,jt=W.b,ge(pe[yn+Ee],pe[or+Ee]),vn=W.a,Dt=W.b,ge(ln,vn),pe[Mn+Ee]=W.a,pe[yn+Ee]=W.b,ge(jt,Dt),pe[Jn+Ee]=W.a,pe[or+Ee]=W.b)}if(je&ot){var Jn=Mn+Lt;Fe?K(pe[Mn+Ee],pe[Jn+Ee]):ge(pe[Mn+Ee],pe[Jn+Ee]),ln=W.a,pe[Jn+Ee]=W.b,pe[Mn+Ee]=ln}}if(we&ot)for(var Mn=Ke,fn=Ke+ue*(je-pt);Mn<=fn;Mn+=sn){var yn=Mn+qt;Fe?K(pe[Mn+Ee],pe[yn+Ee]):ge(pe[Mn+Ee],pe[yn+Ee]),ln=W.a,pe[yn+Ee]=W.b,pe[Mn+Ee]=ln}pt=ot,ot>>=1}return Ke}function xe(pe,Ee,je,ue,we,Pe,Ge,Fe,lt,ot){for(var pt=0,Ke=0,Vt=Fe,Lt=Math.trunc(we.value+(Pe+7)/8);we.value<Lt;)for(P(pt,Ke,je,we),pt=ne.c,Ke=ne.lc;Ke>=14;){var Pt=pt>>Ke-14&16383,qt=Ee[Pt];if(qt.len)Ke-=qt.len,re(qt.lit,Ge,pt,Ke,je,ue,we,lt,ot,Vt),pt=se.c,Ke=se.lc;else{if(!qt.p)throw"hufDecode issues";var sn;for(sn=0;sn<qt.lit;sn++){for(var ln=Q(pe[qt.p[sn]]);Ke<ln&&we.value<Lt;)P(pt,Ke,je,we),pt=ne.c,Ke=ne.lc;if(Ke>=ln&&Y(pe[qt.p[sn]])==(pt>>Ke-ln&(1<<ln)-1)){Ke-=ln,re(qt.p[sn],Ge,pt,Ke,je,ue,we,lt,ot,Vt),pt=se.c,Ke=se.lc;break}}if(sn==qt.lit)throw"hufDecode issues"}}var vn=8-Pe&7;for(pt>>=vn,Ke-=vn;Ke>0;){var qt=Ee[pt<<14-Ke&16383];if(qt.len)Ke-=qt.len,re(qt.lit,Ge,pt,Ke,je,ue,we,lt,ot,Vt),pt=se.c,Ke=se.lc;else throw"hufDecode issues"}return!0}function Me(pe,Ee,je,ue,we,Pe){var Ge={value:0},Fe=je.value,lt=Ve(Ee,je),ot=Ve(Ee,je);je.value+=4;var pt=Ve(Ee,je);if(je.value+=4,lt<0||lt>=65537||ot<0||ot>=65537)throw"Something wrong with HUF_ENCSIZE";var Ke=new Array(65537),Vt=new Array(16384);O(Vt);var Lt=ue-(je.value-Fe);if(U(pe,Ee,je,Lt,lt,ot,Ke),pt>8*(ue-(je.value-Fe)))throw"Something wrong with hufUncompress";ee(Ke,lt,ot,Vt),xe(Ke,Vt,pe,Ee,je,pt,ot,Pe,we,Ge)}function he(pe,Ee,je){for(var ue=0;ue<je;++ue)Ee[ue]=pe[Ee[ue]]}function Oe(pe){for(var Ee=1;Ee<pe.length;Ee++){var je=pe[Ee-1]+pe[Ee]-128;pe[Ee]=je}}function be(pe,Ee){for(var je=0,ue=Math.floor((pe.length+1)/2),we=0,Pe=pe.length-1;!(we>Pe||(Ee[we++]=pe[je++],we>Pe));)Ee[we++]=pe[ue++]}function Te(pe){for(var Ee=pe.byteLength,je=new Array,ue=0,we=new DataView(pe);Ee>0;){var Pe=we.getInt8(ue++);if(Pe<0){var Ge=-Pe;Ee-=Ge+1;for(var Fe=0;Fe<Ge;Fe++)je.push(we.getUint8(ue++))}else{var Ge=Pe;Ee-=2;for(var lt=we.getUint8(ue++),Fe=0;Fe<Ge+1;Fe++)je.push(lt)}}return je}function Re(pe,Ee,je,ue,we,Pe){var yn=new DataView(Pe.buffer),Ge=je[pe.idx[0]].width,Fe=je[pe.idx[0]].height,lt=3,ot=Math.floor(Ge/8),pt=Math.ceil(Ge/8),Ke=Math.ceil(Fe/8),Vt=Ge-(pt-1)*8,Lt=Fe-(Ke-1)*8,Pt={value:0},qt=new Array(lt),sn=new Array(lt),ln=new Array(lt),vn=new Array(lt),jt=new Array(lt);for(let Rn=0;Rn<lt;++Rn)jt[Rn]=Ee[pe.idx[Rn]],qt[Rn]=Rn<1?0:qt[Rn-1]+pt*Ke,sn[Rn]=new Float32Array(64),ln[Rn]=new Uint16Array(64),vn[Rn]=new Uint16Array(pt*64);for(let Rn=0;Rn<Ke;++Rn){var Dt=8;Rn==Ke-1&&(Dt=Lt);var Mn=8;for(let En=0;En<pt;++En){En==pt-1&&(Mn=Vt);for(let wn=0;wn<lt;++wn)ln[wn].fill(0),ln[wn][0]=we[qt[wn]++],$e(Pt,ue,ln[wn]),ve(ln[wn],sn[wn]),me(sn[wn]);We(sn);for(let wn=0;wn<lt;++wn)Xe(sn[wn],vn[wn],En*64)}let Zt=0;for(let En=0;En<lt;++En){const wn=je[pe.idx[En]].type;for(let sr=8*Rn;sr<8*Rn+Dt;++sr){Zt=jt[En][sr];for(let li=0;li<ot;++li){const Ar=li*64+(sr&7)*8;yn.setUint16(Zt+0*2*wn,vn[En][Ar+0],!0),yn.setUint16(Zt+1*2*wn,vn[En][Ar+1],!0),yn.setUint16(Zt+2*2*wn,vn[En][Ar+2],!0),yn.setUint16(Zt+3*2*wn,vn[En][Ar+3],!0),yn.setUint16(Zt+4*2*wn,vn[En][Ar+4],!0),yn.setUint16(Zt+5*2*wn,vn[En][Ar+5],!0),yn.setUint16(Zt+6*2*wn,vn[En][Ar+6],!0),yn.setUint16(Zt+7*2*wn,vn[En][Ar+7],!0),Zt+=8*2*wn}}if(ot!=pt)for(let sr=8*Rn;sr<8*Rn+Dt;++sr){const li=jt[En][sr]+8*ot*2*wn,Ar=ot*64+(sr&7)*8;for(let ci=0;ci<Mn;++ci)yn.setUint16(li+ci*2*wn,vn[En][Ar+ci],!0)}}}for(var fn=new Uint16Array(Ge),yn=new DataView(Pe.buffer),Jn=0;Jn<lt;++Jn){je[pe.idx[Jn]].decoded=!0;var or=je[pe.idx[Jn]].type;if(je[Jn].type==2)for(var ar=0;ar<Fe;++ar){const Rn=jt[Jn][ar];for(var Bn=0;Bn<Ge;++Bn)fn[Bn]=yn.getUint16(Rn+Bn*2*or,!0);for(var Bn=0;Bn<Ge;++Bn)yn.setFloat32(Rn+Bn*2*or,Ze(fn[Bn]),!0)}}}function $e(pe,Ee,je){for(var ue,we=1;we<64;)ue=Ee[pe.value],ue==65280?we=64:ue>>8==255?we+=ue&255:(je[we]=ue,we++),pe.value++}function ve(pe,Ee){Ee[0]=Ze(pe[0]),Ee[1]=Ze(pe[1]),Ee[2]=Ze(pe[5]),Ee[3]=Ze(pe[6]),Ee[4]=Ze(pe[14]),Ee[5]=Ze(pe[15]),Ee[6]=Ze(pe[27]),Ee[7]=Ze(pe[28]),Ee[8]=Ze(pe[2]),Ee[9]=Ze(pe[4]),Ee[10]=Ze(pe[7]),Ee[11]=Ze(pe[13]),Ee[12]=Ze(pe[16]),Ee[13]=Ze(pe[26]),Ee[14]=Ze(pe[29]),Ee[15]=Ze(pe[42]),Ee[16]=Ze(pe[3]),Ee[17]=Ze(pe[8]),Ee[18]=Ze(pe[12]),Ee[19]=Ze(pe[17]),Ee[20]=Ze(pe[25]),Ee[21]=Ze(pe[30]),Ee[22]=Ze(pe[41]),Ee[23]=Ze(pe[43]),Ee[24]=Ze(pe[9]),Ee[25]=Ze(pe[11]),Ee[26]=Ze(pe[18]),Ee[27]=Ze(pe[24]),Ee[28]=Ze(pe[31]),Ee[29]=Ze(pe[40]),Ee[30]=Ze(pe[44]),Ee[31]=Ze(pe[53]),Ee[32]=Ze(pe[10]),Ee[33]=Ze(pe[19]),Ee[34]=Ze(pe[23]),Ee[35]=Ze(pe[32]),Ee[36]=Ze(pe[39]),Ee[37]=Ze(pe[45]),Ee[38]=Ze(pe[52]),Ee[39]=Ze(pe[54]),Ee[40]=Ze(pe[20]),Ee[41]=Ze(pe[22]),Ee[42]=Ze(pe[33]),Ee[43]=Ze(pe[38]),Ee[44]=Ze(pe[46]),Ee[45]=Ze(pe[51]),Ee[46]=Ze(pe[55]),Ee[47]=Ze(pe[60]),Ee[48]=Ze(pe[21]),Ee[49]=Ze(pe[34]),Ee[50]=Ze(pe[37]),Ee[51]=Ze(pe[47]),Ee[52]=Ze(pe[50]),Ee[53]=Ze(pe[56]),Ee[54]=Ze(pe[59]),Ee[55]=Ze(pe[61]),Ee[56]=Ze(pe[35]),Ee[57]=Ze(pe[36]),Ee[58]=Ze(pe[48]),Ee[59]=Ze(pe[49]),Ee[60]=Ze(pe[57]),Ee[61]=Ze(pe[58]),Ee[62]=Ze(pe[62]),Ee[63]=Ze(pe[63])}function me(pe){const Ee=.5*Math.cos(.7853975),je=.5*Math.cos(3.14159/16),ue=.5*Math.cos(3.14159/8),we=.5*Math.cos(3*3.14159/16),Pe=.5*Math.cos(5*3.14159/16),Ge=.5*Math.cos(3*3.14159/8),Fe=.5*Math.cos(7*3.14159/16);for(var lt=new Array(4),ot=new Array(4),pt=new Array(4),Ke=new Array(4),Vt=0;Vt<8;++Vt){var Lt=Vt*8;lt[0]=ue*pe[Lt+2],lt[1]=Ge*pe[Lt+2],lt[2]=ue*pe[Lt+6],lt[3]=Ge*pe[Lt+6],ot[0]=je*pe[Lt+1]+we*pe[Lt+3]+Pe*pe[Lt+5]+Fe*pe[Lt+7],ot[1]=we*pe[Lt+1]-Fe*pe[Lt+3]-je*pe[Lt+5]-Pe*pe[Lt+7],ot[2]=Pe*pe[Lt+1]-je*pe[Lt+3]+Fe*pe[Lt+5]+we*pe[Lt+7],ot[3]=Fe*pe[Lt+1]-Pe*pe[Lt+3]+we*pe[Lt+5]-je*pe[Lt+7],pt[0]=Ee*(pe[Lt+0]+pe[Lt+4]),pt[3]=Ee*(pe[Lt+0]-pe[Lt+4]),pt[1]=lt[0]+lt[3],pt[2]=lt[1]-lt[2],Ke[0]=pt[0]+pt[1],Ke[1]=pt[3]+pt[2],Ke[2]=pt[3]-pt[2],Ke[3]=pt[0]-pt[1],pe[Lt+0]=Ke[0]+ot[0],pe[Lt+1]=Ke[1]+ot[1],pe[Lt+2]=Ke[2]+ot[2],pe[Lt+3]=Ke[3]+ot[3],pe[Lt+4]=Ke[3]-ot[3],pe[Lt+5]=Ke[2]-ot[2],pe[Lt+6]=Ke[1]-ot[1],pe[Lt+7]=Ke[0]-ot[0]}for(var Pt=0;Pt<8;++Pt)lt[0]=ue*pe[16+Pt],lt[1]=Ge*pe[16+Pt],lt[2]=ue*pe[48+Pt],lt[3]=Ge*pe[48+Pt],ot[0]=je*pe[8+Pt]+we*pe[24+Pt]+Pe*pe[40+Pt]+Fe*pe[56+Pt],ot[1]=we*pe[8+Pt]-Fe*pe[24+Pt]-je*pe[40+Pt]-Pe*pe[56+Pt],ot[2]=Pe*pe[8+Pt]-je*pe[24+Pt]+Fe*pe[40+Pt]+we*pe[56+Pt],ot[3]=Fe*pe[8+Pt]-Pe*pe[24+Pt]+we*pe[40+Pt]-je*pe[56+Pt],pt[0]=Ee*(pe[Pt]+pe[32+Pt]),pt[3]=Ee*(pe[Pt]-pe[32+Pt]),pt[1]=lt[0]+lt[3],pt[2]=lt[1]-lt[2],Ke[0]=pt[0]+pt[1],Ke[1]=pt[3]+pt[2],Ke[2]=pt[3]-pt[2],Ke[3]=pt[0]-pt[1],pe[0+Pt]=Ke[0]+ot[0],pe[8+Pt]=Ke[1]+ot[1],pe[16+Pt]=Ke[2]+ot[2],pe[24+Pt]=Ke[3]+ot[3],pe[32+Pt]=Ke[3]-ot[3],pe[40+Pt]=Ke[2]-ot[2],pe[48+Pt]=Ke[1]-ot[1],pe[56+Pt]=Ke[0]-ot[0]}function We(pe){for(var Ee=0;Ee<64;++Ee){var je=pe[0][Ee],ue=pe[1][Ee],we=pe[2][Ee];pe[0][Ee]=je+1.5747*we,pe[1][Ee]=je-.1873*ue-.4682*we,pe[2][Ee]=je+1.8556*ue}}function Xe(pe,Ee,je){for(var ue=0;ue<64;++ue)Ee[je+ue]=Vf.toHalfFloat(xt(pe[ue]))}function xt(pe){return pe<=1?Math.sign(pe)*Math.pow(Math.abs(pe),2.2):Math.sign(pe)*Math.pow(S,Math.abs(pe)-1)}function fe(pe){return new DataView(pe.array.buffer,pe.offset.value,pe.size)}function ie(pe){var Ee=pe.viewer.buffer.slice(pe.offset.value,pe.offset.value+pe.size),je=new Uint8Array(Te(Ee)),ue=new Uint8Array(je.length);return Oe(je),be(je,ue),new DataView(ue.buffer)}function Ae(pe){var Ee=pe.array.slice(pe.offset.value,pe.offset.value+pe.size),je=Gy(Ee),ue=new Uint8Array(je.length);return Oe(je),be(je,ue),new DataView(ue.buffer)}function Je(pe){for(var Ee=pe.viewer,je={value:pe.offset.value},ue=new Uint16Array(pe.width*pe.scanlineBlockSize*(pe.channels*pe.type)),we=new Uint8Array(8192),Pe=0,Ge=new Array(pe.channels),Fe=0;Fe<pe.channels;Fe++)Ge[Fe]={},Ge[Fe].start=Pe,Ge[Fe].end=Ge[Fe].start,Ge[Fe].nx=pe.width,Ge[Fe].ny=pe.lines,Ge[Fe].size=pe.type,Pe+=Ge[Fe].nx*Ge[Fe].ny*Ge[Fe].size;var lt=Be(Ee,je),ot=Be(Ee,je);if(ot>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(lt<=ot)for(var Fe=0;Fe<ot-lt+1;Fe++)we[Fe+lt]=Ye(Ee,je);var pt=new Uint16Array(65536),Ke=R(we,pt),Vt=Ve(Ee,je);Me(pe.array,Ee,je,Vt,ue,Pe);for(var Fe=0;Fe<pe.channels;++Fe)for(var Lt=Ge[Fe],Pt=0;Pt<Ge[Fe].size;++Pt)Se(ue,Lt.start+Pt,Lt.nx,Lt.size,Lt.ny,Lt.nx*Lt.size,Ke);he(pt,ue,Pe);for(var qt=0,sn=new Uint8Array(ue.buffer.byteLength),ln=0;ln<pe.lines;ln++)for(var vn=0;vn<pe.channels;vn++){var Lt=Ge[vn],jt=Lt.nx*Lt.size,Dt=new Uint8Array(ue.buffer,Lt.end*2,jt*2);sn.set(Dt,qt),qt+=jt*2,Lt.end+=jt}return new DataView(sn.buffer)}function te(pe){var Ee=pe.array.slice(pe.offset.value,pe.offset.value+pe.size),je=Gy(Ee);const ue=pe.lines*pe.channels*pe.width,we=pe.type==1?new Uint16Array(ue):new Uint32Array(ue);let Pe=0,Ge=0;const Fe=new Array(4);for(let lt=0;lt<pe.lines;lt++)for(let ot=0;ot<pe.channels;ot++){let pt=0;switch(pe.type){case 1:Fe[0]=Pe,Fe[1]=Fe[0]+pe.width,Pe=Fe[1]+pe.width;for(let Ke=0;Ke<pe.width;++Ke){const Vt=je[Fe[0]++]<<8|je[Fe[1]++];pt+=Vt,we[Ge]=pt,Ge++}break;case 2:Fe[0]=Pe,Fe[1]=Fe[0]+pe.width,Fe[2]=Fe[1]+pe.width,Pe=Fe[2]+pe.width;for(let Ke=0;Ke<pe.width;++Ke){const Vt=je[Fe[0]++]<<24|je[Fe[1]++]<<16|je[Fe[2]++]<<8;pt+=Vt,we[Ge]=pt,Ge++}break}}return new DataView(we.buffer)}function z(pe){var Ee=pe.viewer,je={value:pe.offset.value},ue=new Uint8Array(pe.width*pe.lines*(pe.channels*pe.type*2)),we={version:tt(Ee,je),unknownUncompressedSize:tt(Ee,je),unknownCompressedSize:tt(Ee,je),acCompressedSize:tt(Ee,je),dcCompressedSize:tt(Ee,je),rleCompressedSize:tt(Ee,je),rleUncompressedSize:tt(Ee,je),rleRawSize:tt(Ee,je),totalAcUncompressedCount:tt(Ee,je),totalDcUncompressedCount:tt(Ee,je),acCompression:tt(Ee,je)};if(we.version<2)throw"EXRLoader.parse: "+Pr.compression+" version "+we.version+" is unsupported";for(var Pe=new Array,Ge=Be(Ee,je)-2;Ge>0;){var Fe=F(Ee.buffer,je),lt=Ye(Ee,je),ot=lt>>2&3,pt=(lt>>4)-1,Ke=new Int8Array([pt])[0],Vt=Ye(Ee,je);Pe.push({name:Fe,index:Ke,type:Vt,compression:ot}),Ge-=Fe.length+3}for(var Lt=Pr.channels,Pt=new Array(pe.channels),qt=0;qt<pe.channels;++qt){var sn=Pt[qt]={},ln=Lt[qt];sn.name=ln.name,sn.compression=0,sn.decoded=!1,sn.type=ln.pixelType,sn.pLinear=ln.pLinear,sn.width=pe.width,sn.height=pe.lines}for(var vn={idx:new Array(3)},jt=0;jt<pe.channels;++jt)for(var sn=Pt[jt],qt=0;qt<Pe.length;++qt){var Dt=Pe[qt];sn.name==Dt.name&&(sn.compression=Dt.compression,Dt.index>=0&&(vn.idx[Dt.index]=jt),sn.offset=jt)}if(we.acCompressedSize>0)switch(we.acCompression){case 0:var yn=new Uint16Array(we.totalAcUncompressedCount);Me(pe.array,Ee,je,we.acCompressedSize,yn,we.totalAcUncompressedCount);break;case 1:var Mn=pe.array.slice(je.value,je.value+we.totalAcUncompressedCount),fn=Gy(Mn),yn=new Uint16Array(fn.buffer);je.value+=we.totalAcUncompressedCount;break}if(we.dcCompressedSize>0){var Jn={array:pe.array,offset:je,size:we.dcCompressedSize},or=new Uint16Array(Ae(Jn).buffer);je.value+=we.dcCompressedSize}if(we.rleRawSize>0){var Mn=pe.array.slice(je.value,je.value+we.rleCompressedSize),fn=Gy(Mn),ar=Te(fn.buffer);je.value+=we.rleCompressedSize}for(var Bn=0,Rn=new Array(Pt.length),qt=0;qt<Rn.length;++qt)Rn[qt]=new Array;for(var Zt=0;Zt<pe.lines;++Zt)for(var En=0;En<Pt.length;++En)Rn[En].push(Bn),Bn+=Pt[En].width*pe.type*2;Re(vn,Rn,Pt,yn,or,ue);for(var qt=0;qt<Pt.length;++qt){var sn=Pt[qt];if(!sn.decoded)switch(sn.compression){case 2:for(var wn=0,sr=0,Zt=0;Zt<pe.lines;++Zt){for(var li=Rn[qt][wn],Ar=0;Ar<sn.width;++Ar){for(var ci=0;ci<2*sn.type;++ci)ue[li++]=ar[sr+ci*sn.width*sn.height];sr++}wn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(ue.buffer)}function F(pe,Ee){for(var je=new Uint8Array(pe),ue=0;je[Ee.value+ue]!=0;)ue+=1;var we=new TextDecoder().decode(je.slice(Ee.value,Ee.value+ue));return Ee.value=Ee.value+ue+1,we}function ae(pe,Ee,je){var ue=new TextDecoder().decode(new Uint8Array(pe).slice(Ee.value,Ee.value+je));return Ee.value=Ee.value+je,ue}function ye(pe,Ee){var je=ke(pe,Ee),ue=Ve(pe,Ee);return[je,ue]}function Le(pe,Ee){var je=Ve(pe,Ee),ue=Ve(pe,Ee);return[je,ue]}function ke(pe,Ee){var je=pe.getInt32(Ee.value,!0);return Ee.value=Ee.value+4,je}function Ve(pe,Ee){var je=pe.getUint32(Ee.value,!0);return Ee.value=Ee.value+4,je}function Ce(pe,Ee){var je=pe[Ee.value];return Ee.value=Ee.value+1,je}function Ye(pe,Ee){var je=pe.getUint8(Ee.value);return Ee.value=Ee.value+1,je}const tt=function(pe,Ee){let je;return"getBigInt64"in DataView.prototype?je=Number(pe.getBigInt64(Ee.value,!0)):je=pe.getUint32(Ee.value+4,!0)+Number(pe.getUint32(Ee.value,!0)<<32),Ee.value+=8,je};function it(pe,Ee){var je=pe.getFloat32(Ee.value,!0);return Ee.value+=4,je}function dt(pe,Ee){return Vf.toHalfFloat(it(pe,Ee))}function Ze(pe){var Ee=(pe&31744)>>10,je=pe&1023;return(pe>>15?-1:1)*(Ee?Ee===31?je?NaN:1/0:Math.pow(2,Ee-15)*(1+je/1024):6103515625e-14*(je/1024))}function Be(pe,Ee){var je=pe.getUint16(Ee.value,!0);return Ee.value+=2,je}function Ft(pe,Ee){return Ze(Be(pe,Ee))}function St(pe,Ee,je,ue){for(var we=je.value,Pe=[];je.value<we+ue-1;){var Ge=F(Ee,je),Fe=ke(pe,je),lt=Ye(pe,je);je.value+=3;var ot=ke(pe,je),pt=ke(pe,je);Pe.push({name:Ge,pixelType:Fe,pLinear:lt,xSampling:ot,ySampling:pt})}return je.value+=1,Pe}function st(pe,Ee){var je=it(pe,Ee),ue=it(pe,Ee),we=it(pe,Ee),Pe=it(pe,Ee),Ge=it(pe,Ee),Fe=it(pe,Ee),lt=it(pe,Ee),ot=it(pe,Ee);return{redX:je,redY:ue,greenX:we,greenY:Pe,blueX:Ge,blueY:Fe,whiteX:lt,whiteY:ot}}function It(pe,Ee){var je=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],ue=Ye(pe,Ee);return je[ue]}function Ht(pe,Ee){var je=Ve(pe,Ee),ue=Ve(pe,Ee),we=Ve(pe,Ee),Pe=Ve(pe,Ee);return{xMin:je,yMin:ue,xMax:we,yMax:Pe}}function zt(pe,Ee){var je=["INCREASING_Y"],ue=Ye(pe,Ee);return je[ue]}function $t(pe,Ee){var je=it(pe,Ee),ue=it(pe,Ee);return[je,ue]}function Nn(pe,Ee){var je=it(pe,Ee),ue=it(pe,Ee),we=it(pe,Ee);return[je,ue,we]}function Tn(pe,Ee,je,ue,we){if(ue==="string"||ue==="stringvector"||ue==="iccProfile")return ae(Ee,je,we);if(ue==="chlist")return St(pe,Ee,je,we);if(ue==="chromaticities")return st(pe,je);if(ue==="compression")return It(pe,je);if(ue==="box2i")return Ht(pe,je);if(ue==="lineOrder")return zt(pe,je);if(ue==="float")return it(pe,je);if(ue==="v2f")return $t(pe,je);if(ue==="v3f")return Nn(pe,je);if(ue==="int")return ke(pe,je);if(ue==="rational")return ye(pe,je);if(ue==="timecode")return Le(pe,je);if(ue==="preview")return je.value+=we,"skipped";je.value+=we}function Fn(pe,Ee,je){const ue={};if(pe.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";ue.version=pe.getUint8(4);const we=pe.getUint8(5);ue.spec={singleTile:!!(we&2),longName:!!(we&4),deepFormat:!!(we&8),multiPart:!!(we&16)},je.value=8;for(var Pe=!0;Pe;){var Ge=F(Ee,je);if(Ge==0)Pe=!1;else{var Fe=F(Ee,je),lt=Ve(pe,je),ot=Tn(pe,Ee,je,Fe,lt);ot===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Fe}'.`):ue[Ge]=ot}}if(we&-5)throw console.error("EXRHeader:",ue),"THREE.EXRLoader: provided file is currently unsupported.";return ue}function vr(pe,Ee,je,ue,we){const Pe={size:0,viewer:Ee,array:je,offset:ue,width:pe.dataWindow.xMax-pe.dataWindow.xMin+1,height:pe.dataWindow.yMax-pe.dataWindow.yMin+1,channels:pe.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:pe.channels[0].pixelType,uncompress:null,getter:null,format:null,[A0?"colorSpace":"encoding"]:null};switch(pe.compression){case"NO_COMPRESSION":Pe.lines=1,Pe.uncompress=fe;break;case"RLE_COMPRESSION":Pe.lines=1,Pe.uncompress=ie;break;case"ZIPS_COMPRESSION":Pe.lines=1,Pe.uncompress=Ae;break;case"ZIP_COMPRESSION":Pe.lines=16,Pe.uncompress=Ae;break;case"PIZ_COMPRESSION":Pe.lines=32,Pe.uncompress=Je;break;case"PXR24_COMPRESSION":Pe.lines=16,Pe.uncompress=te;break;case"DWAA_COMPRESSION":Pe.lines=32,Pe.uncompress=z;break;case"DWAB_COMPRESSION":Pe.lines=256,Pe.uncompress=z;break;default:throw"EXRLoader.parse: "+pe.compression+" is unsupported"}if(Pe.scanlineBlockSize=Pe.lines,Pe.type==1)switch(we){case fr:Pe.getter=Ft,Pe.inputSize=2;break;case Xr:Pe.getter=Be,Pe.inputSize=2;break}else if(Pe.type==2)switch(we){case fr:Pe.getter=it,Pe.inputSize=4;break;case Xr:Pe.getter=dt,Pe.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Pe.type+" for "+pe.compression+".";Pe.blockCount=(pe.dataWindow.yMax+1)/Pe.scanlineBlockSize;for(var Ge=0;Ge<Pe.blockCount;Ge++)tt(Ee,ue);Pe.outputChannels=Pe.channels==3?4:Pe.channels;const Fe=Pe.width*Pe.height*Pe.outputChannels;switch(we){case fr:Pe.byteArray=new Float32Array(Fe),Pe.channels<Pe.outputChannels&&Pe.byteArray.fill(1,0,Fe);break;case Xr:Pe.byteArray=new Uint16Array(Fe),Pe.channels<Pe.outputChannels&&Pe.byteArray.fill(15360,0,Fe);break;default:console.error("THREE.EXRLoader: unsupported type: ",we);break}return Pe.bytesPerLine=Pe.width*Pe.inputSize*Pe.channels,Pe.outputChannels==4?Pe.format=Sr:Pe.format=th,A0?Pe.colorSpace="srgb-linear":Pe.encoding=3e3,Pe}const ai=new DataView(e),Ri=new Uint8Array(e),Vr={value:0},Pr=Fn(ai,e,Vr),gn=vr(Pr,ai,Ri,Vr,this.type),br={value:0},ss={R:0,G:1,B:2,A:3,Y:0};for(let pe=0;pe<gn.height/gn.scanlineBlockSize;pe++){const Ee=Ve(ai,Vr);gn.size=Ve(ai,Vr),gn.lines=Ee+gn.scanlineBlockSize>gn.height?gn.height-Ee:gn.scanlineBlockSize;const ue=gn.size<gn.lines*gn.bytesPerLine?gn.uncompress(gn):fe(gn);Vr.value+=gn.size;for(let we=0;we<gn.scanlineBlockSize;we++){const Pe=we+pe*gn.scanlineBlockSize;if(Pe>=gn.height)break;for(let Ge=0;Ge<gn.channels;Ge++){const Fe=ss[Pr.channels[Ge].name];for(let lt=0;lt<gn.width;lt++){br.value=(we*(gn.channels*gn.width)+Ge*gn.width+lt)*gn.inputSize;const ot=(gn.height-1-Pe)*(gn.width*gn.outputChannels)+lt*gn.outputChannels+Fe;gn.byteArray[ot]=gn.getter(ue,br)}}}}return{header:Pr,width:gn.width,height:gn.height,data:gn.byteArray,format:gn.format,[A0?"colorSpace":"encoding"]:gn[A0?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,r,i){function s(o,a){A0?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Cn,o.magFilter=Cn,o.generateMipmaps=!1,o.flipY=!1,n&&n(o,a)}return super.load(e,s,r,i)}}const s1e="srgb";class E1 extends _r{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,n,r,i){const s=this,o=new Ir(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(a))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this;function r(Z,X){if(Z.nodeType!==1)return;const W=A(Z);let K=!1,ge=null;switch(Z.nodeName){case"svg":X=p(Z,X);break;case"style":s(Z);break;case"g":X=p(Z,X);break;case"path":X=p(Z,X),Z.hasAttribute("d")&&(ge=i(Z));break;case"rect":X=p(Z,X),ge=l(Z);break;case"polygon":X=p(Z,X),ge=c(Z);break;case"polyline":X=p(Z,X),ge=u(Z);break;case"circle":X=p(Z,X),ge=f(Z);break;case"ellipse":X=p(Z,X),ge=h(Z);break;case"line":X=p(Z,X),ge=d(Z);break;case"defs":K=!0;break;case"use":X=p(Z,X);const Me=(Z.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),he=Z.viewportElement.getElementById(Me);he?r(he,X):console.warn("SVGLoader: 'use node' references non-existent node id: "+Me);break}ge&&(X.fill!==void 0&&X.fill!=="none"&&ge.color.setStyle(X.fill,s1e),w(ge,P),L.push(ge),ge.userData={node:Z,style:X});const Se=Z.childNodes;for(let xe=0;xe<Se.length;xe++){const Me=Se[xe];K&&Me.nodeName!=="style"&&Me.nodeName!=="defs"||r(Me,X)}W&&(N.pop(),N.length>0?P.copy(N[N.length-1]):P.identity())}function i(Z){const X=new Ec,W=new qe,K=new qe,ge=new qe;let Se=!0,xe=!1;const Me=Z.getAttribute("d");if(Me===""||Me==="none")return null;const he=Me.match(/[a-df-z][^a-df-z]*/gi);for(let Oe=0,be=he.length;Oe<be;Oe++){const Te=he[Oe],Re=Te.charAt(0),$e=Te.slice(1).trim();Se===!0&&(xe=!0,Se=!1);let ve;switch(Re){case"M":ve=g($e);for(let me=0,We=ve.length;me<We;me+=2)W.x=ve[me+0],W.y=ve[me+1],K.x=W.x,K.y=W.y,me===0?X.moveTo(W.x,W.y):X.lineTo(W.x,W.y),me===0&&ge.copy(W);break;case"H":ve=g($e);for(let me=0,We=ve.length;me<We;me++)W.x=ve[me],K.x=W.x,K.y=W.y,X.lineTo(W.x,W.y),me===0&&xe===!0&&ge.copy(W);break;case"V":ve=g($e);for(let me=0,We=ve.length;me<We;me++)W.y=ve[me],K.x=W.x,K.y=W.y,X.lineTo(W.x,W.y),me===0&&xe===!0&&ge.copy(W);break;case"L":ve=g($e);for(let me=0,We=ve.length;me<We;me+=2)W.x=ve[me+0],W.y=ve[me+1],K.x=W.x,K.y=W.y,X.lineTo(W.x,W.y),me===0&&xe===!0&&ge.copy(W);break;case"C":ve=g($e);for(let me=0,We=ve.length;me<We;me+=6)X.bezierCurveTo(ve[me+0],ve[me+1],ve[me+2],ve[me+3],ve[me+4],ve[me+5]),K.x=ve[me+2],K.y=ve[me+3],W.x=ve[me+4],W.y=ve[me+5],me===0&&xe===!0&&ge.copy(W);break;case"S":ve=g($e);for(let me=0,We=ve.length;me<We;me+=4)X.bezierCurveTo(m(W.x,K.x),m(W.y,K.y),ve[me+0],ve[me+1],ve[me+2],ve[me+3]),K.x=ve[me+0],K.y=ve[me+1],W.x=ve[me+2],W.y=ve[me+3],me===0&&xe===!0&&ge.copy(W);break;case"Q":ve=g($e);for(let me=0,We=ve.length;me<We;me+=4)X.quadraticCurveTo(ve[me+0],ve[me+1],ve[me+2],ve[me+3]),K.x=ve[me+0],K.y=ve[me+1],W.x=ve[me+2],W.y=ve[me+3],me===0&&xe===!0&&ge.copy(W);break;case"T":ve=g($e);for(let me=0,We=ve.length;me<We;me+=2){const Xe=m(W.x,K.x),xt=m(W.y,K.y);X.quadraticCurveTo(Xe,xt,ve[me+0],ve[me+1]),K.x=Xe,K.y=xt,W.x=ve[me+0],W.y=ve[me+1],me===0&&xe===!0&&ge.copy(W)}break;case"A":ve=g($e,[3,4],7);for(let me=0,We=ve.length;me<We;me+=7){if(ve[me+5]==W.x&&ve[me+6]==W.y)continue;const Xe=W.clone();W.x=ve[me+5],W.y=ve[me+6],K.x=W.x,K.y=W.y,o(X,ve[me],ve[me+1],ve[me+2],ve[me+3],ve[me+4],Xe,W),me===0&&xe===!0&&ge.copy(W)}break;case"m":ve=g($e);for(let me=0,We=ve.length;me<We;me+=2)W.x+=ve[me+0],W.y+=ve[me+1],K.x=W.x,K.y=W.y,me===0?X.moveTo(W.x,W.y):X.lineTo(W.x,W.y),me===0&&ge.copy(W);break;case"h":ve=g($e);for(let me=0,We=ve.length;me<We;me++)W.x+=ve[me],K.x=W.x,K.y=W.y,X.lineTo(W.x,W.y),me===0&&xe===!0&&ge.copy(W);break;case"v":ve=g($e);for(let me=0,We=ve.length;me<We;me++)W.y+=ve[me],K.x=W.x,K.y=W.y,X.lineTo(W.x,W.y),me===0&&xe===!0&&ge.copy(W);break;case"l":ve=g($e);for(let me=0,We=ve.length;me<We;me+=2)W.x+=ve[me+0],W.y+=ve[me+1],K.x=W.x,K.y=W.y,X.lineTo(W.x,W.y),me===0&&xe===!0&&ge.copy(W);break;case"c":ve=g($e);for(let me=0,We=ve.length;me<We;me+=6)X.bezierCurveTo(W.x+ve[me+0],W.y+ve[me+1],W.x+ve[me+2],W.y+ve[me+3],W.x+ve[me+4],W.y+ve[me+5]),K.x=W.x+ve[me+2],K.y=W.y+ve[me+3],W.x+=ve[me+4],W.y+=ve[me+5],me===0&&xe===!0&&ge.copy(W);break;case"s":ve=g($e);for(let me=0,We=ve.length;me<We;me+=4)X.bezierCurveTo(m(W.x,K.x),m(W.y,K.y),W.x+ve[me+0],W.y+ve[me+1],W.x+ve[me+2],W.y+ve[me+3]),K.x=W.x+ve[me+0],K.y=W.y+ve[me+1],W.x+=ve[me+2],W.y+=ve[me+3],me===0&&xe===!0&&ge.copy(W);break;case"q":ve=g($e);for(let me=0,We=ve.length;me<We;me+=4)X.quadraticCurveTo(W.x+ve[me+0],W.y+ve[me+1],W.x+ve[me+2],W.y+ve[me+3]),K.x=W.x+ve[me+0],K.y=W.y+ve[me+1],W.x+=ve[me+2],W.y+=ve[me+3],me===0&&xe===!0&&ge.copy(W);break;case"t":ve=g($e);for(let me=0,We=ve.length;me<We;me+=2){const Xe=m(W.x,K.x),xt=m(W.y,K.y);X.quadraticCurveTo(Xe,xt,W.x+ve[me+0],W.y+ve[me+1]),K.x=Xe,K.y=xt,W.x=W.x+ve[me+0],W.y=W.y+ve[me+1],me===0&&xe===!0&&ge.copy(W)}break;case"a":ve=g($e,[3,4],7);for(let me=0,We=ve.length;me<We;me+=7){if(ve[me+5]==0&&ve[me+6]==0)continue;const Xe=W.clone();W.x+=ve[me+5],W.y+=ve[me+6],K.x=W.x,K.y=W.y,o(X,ve[me],ve[me+1],ve[me+2],ve[me+3],ve[me+4],Xe,W),me===0&&xe===!0&&ge.copy(W)}break;case"Z":case"z":X.currentPath.autoClose=!0,X.currentPath.curves.length>0&&(W.copy(ge),X.currentPath.currentPoint.copy(W),Se=!0);break;default:console.warn(Te)}xe=!1}return X}function s(Z){if(!(!Z.sheet||!Z.sheet.cssRules||!Z.sheet.cssRules.length))for(let X=0;X<Z.sheet.cssRules.length;X++){const W=Z.sheet.cssRules[X];if(W.type!==1)continue;const K=W.selectorText.split(/,/gm).filter(Boolean).map(ge=>ge.trim());for(let ge=0;ge<K.length;ge++){const Se=Object.fromEntries(Object.entries(W.style).filter(([,xe])=>xe!==""));B[K[ge]]=Object.assign(B[K[ge]]||{},Se)}}}function o(Z,X,W,K,ge,Se,xe,Me){if(X==0||W==0){Z.lineTo(Me.x,Me.y);return}K=K*Math.PI/180,X=Math.abs(X),W=Math.abs(W);const he=(xe.x-Me.x)/2,Oe=(xe.y-Me.y)/2,be=Math.cos(K)*he+Math.sin(K)*Oe,Te=-Math.sin(K)*he+Math.cos(K)*Oe;let Re=X*X,$e=W*W;const ve=be*be,me=Te*Te,We=ve/Re+me/$e;if(We>1){const ae=Math.sqrt(We);X=ae*X,W=ae*W,Re=X*X,$e=W*W}const Xe=Re*me+$e*ve,xt=(Re*$e-Xe)/Xe;let fe=Math.sqrt(Math.max(0,xt));ge===Se&&(fe=-fe);const ie=fe*X*Te/W,Ae=-fe*W*be/X,Je=Math.cos(K)*ie-Math.sin(K)*Ae+(xe.x+Me.x)/2,te=Math.sin(K)*ie+Math.cos(K)*Ae+(xe.y+Me.y)/2,z=a(1,0,(be-ie)/X,(Te-Ae)/W),F=a((be-ie)/X,(Te-Ae)/W,(-be-ie)/X,(-Te-Ae)/W)%(Math.PI*2);Z.currentPath.absellipse(Je,te,X,W,z,z+F,Se===0,K)}function a(Z,X,W,K){const ge=Z*W+X*K,Se=Math.sqrt(Z*Z+X*X)*Math.sqrt(W*W+K*K);let xe=Math.acos(Math.max(-1,Math.min(1,ge/Se)));return Z*K-X*W<0&&(xe=-xe),xe}function l(Z){const X=y(Z.getAttribute("x")||0),W=y(Z.getAttribute("y")||0),K=y(Z.getAttribute("rx")||Z.getAttribute("ry")||0),ge=y(Z.getAttribute("ry")||Z.getAttribute("rx")||0),Se=y(Z.getAttribute("width")),xe=y(Z.getAttribute("height")),Me=1-.551915024494,he=new Ec;return he.moveTo(X+K,W),he.lineTo(X+Se-K,W),(K!==0||ge!==0)&&he.bezierCurveTo(X+Se-K*Me,W,X+Se,W+ge*Me,X+Se,W+ge),he.lineTo(X+Se,W+xe-ge),(K!==0||ge!==0)&&he.bezierCurveTo(X+Se,W+xe-ge*Me,X+Se-K*Me,W+xe,X+Se-K,W+xe),he.lineTo(X+K,W+xe),(K!==0||ge!==0)&&he.bezierCurveTo(X+K*Me,W+xe,X,W+xe-ge*Me,X,W+xe-ge),he.lineTo(X,W+ge),(K!==0||ge!==0)&&he.bezierCurveTo(X,W+ge*Me,X+K*Me,W,X+K,W),he}function c(Z){function X(Se,xe,Me){const he=y(xe),Oe=y(Me);ge===0?K.moveTo(he,Oe):K.lineTo(he,Oe),ge++}const W=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,K=new Ec;let ge=0;return Z.getAttribute("points").replace(W,X),K.currentPath.autoClose=!0,K}function u(Z){function X(Se,xe,Me){const he=y(xe),Oe=y(Me);ge===0?K.moveTo(he,Oe):K.lineTo(he,Oe),ge++}const W=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,K=new Ec;let ge=0;return Z.getAttribute("points").replace(W,X),K.currentPath.autoClose=!1,K}function f(Z){const X=y(Z.getAttribute("cx")||0),W=y(Z.getAttribute("cy")||0),K=y(Z.getAttribute("r")||0),ge=new Iu;ge.absarc(X,W,K,0,Math.PI*2);const Se=new Ec;return Se.subPaths.push(ge),Se}function h(Z){const X=y(Z.getAttribute("cx")||0),W=y(Z.getAttribute("cy")||0),K=y(Z.getAttribute("rx")||0),ge=y(Z.getAttribute("ry")||0),Se=new Iu;Se.absellipse(X,W,K,ge,0,Math.PI*2);const xe=new Ec;return xe.subPaths.push(Se),xe}function d(Z){const X=y(Z.getAttribute("x1")||0),W=y(Z.getAttribute("y1")||0),K=y(Z.getAttribute("x2")||0),ge=y(Z.getAttribute("y2")||0),Se=new Ec;return Se.moveTo(X,W),Se.lineTo(K,ge),Se.currentPath.autoClose=!1,Se}function p(Z,X){X=Object.assign({},X);let W={};if(Z.hasAttribute("class")){const xe=Z.getAttribute("class").split(/\s/).filter(Boolean).map(Me=>Me.trim());for(let Me=0;Me<xe.length;Me++)W=Object.assign(W,B["."+xe[Me]])}Z.hasAttribute("id")&&(W=Object.assign(W,B["#"+Z.getAttribute("id")]));function K(xe,Me,he){he===void 0&&(he=function(be){return be.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),be}),Z.hasAttribute(xe)&&(X[Me]=he(Z.getAttribute(xe))),W[xe]&&(X[Me]=he(W[xe])),Z.style&&Z.style[xe]!==""&&(X[Me]=he(Z.style[xe]))}function ge(xe){return Math.max(0,Math.min(1,y(xe)))}function Se(xe){return Math.max(0,y(xe))}return K("fill","fill"),K("fill-opacity","fillOpacity",ge),K("fill-rule","fillRule"),K("opacity","opacity",ge),K("stroke","stroke"),K("stroke-opacity","strokeOpacity",ge),K("stroke-width","strokeWidth",Se),K("stroke-linejoin","strokeLineJoin"),K("stroke-linecap","strokeLineCap"),K("stroke-miterlimit","strokeMiterLimit",Se),K("visibility","visibility"),X}function m(Z,X){return Z-(X-Z)}function g(Z,X,W){if(typeof Z!="string")throw new TypeError("Invalid input: "+typeof Z);const K={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},ge=0,Se=1,xe=2,Me=3;let he=ge,Oe=!0,be="",Te="";const Re=[];function $e(Xe,xt,fe){const ie=new SyntaxError('Unexpected character "'+Xe+'" at index '+xt+".");throw ie.partial=fe,ie}function ve(){be!==""&&(Te===""?Re.push(Number(be)):Re.push(Number(be)*Math.pow(10,Number(Te)))),be="",Te=""}let me;const We=Z.length;for(let Xe=0;Xe<We;Xe++){if(me=Z[Xe],Array.isArray(X)&&X.includes(Re.length%W)&&K.FLAGS.test(me)){he=Se,be=me,ve();continue}if(he===ge){if(K.WHITESPACE.test(me))continue;if(K.DIGIT.test(me)||K.SIGN.test(me)){he=Se,be=me;continue}if(K.POINT.test(me)){he=xe,be=me;continue}K.COMMA.test(me)&&(Oe&&$e(me,Xe,Re),Oe=!0)}if(he===Se){if(K.DIGIT.test(me)){be+=me;continue}if(K.POINT.test(me)){be+=me,he=xe;continue}if(K.EXP.test(me)){he=Me;continue}K.SIGN.test(me)&&be.length===1&&K.SIGN.test(be[0])&&$e(me,Xe,Re)}if(he===xe){if(K.DIGIT.test(me)){be+=me;continue}if(K.EXP.test(me)){he=Me;continue}K.POINT.test(me)&&be[be.length-1]==="."&&$e(me,Xe,Re)}if(he===Me){if(K.DIGIT.test(me)){Te+=me;continue}if(K.SIGN.test(me)){if(Te===""){Te+=me;continue}Te.length===1&&K.SIGN.test(Te)&&$e(me,Xe,Re)}}K.WHITESPACE.test(me)?(ve(),he=ge,Oe=!1):K.COMMA.test(me)?(ve(),he=ge,Oe=!0):K.SIGN.test(me)?(ve(),he=Se,be=me):K.POINT.test(me)?(ve(),he=xe,be=me):$e(me,Xe,Re)}return ve(),Re}const v=["mm","cm","in","pt","pc","px"],x={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function y(Z){let X="px";if(typeof Z=="string"||Z instanceof String)for(let K=0,ge=v.length;K<ge;K++){const Se=v[K];if(Z.endsWith(Se)){X=Se,Z=Z.substring(0,Z.length-Se.length);break}}let W;return X==="px"&&n.defaultUnit!=="px"?W=x.in[n.defaultUnit]/n.defaultDPI:(W=x[X][n.defaultUnit],W<0&&(W=x[X].in*n.defaultDPI)),W*parseFloat(Z)}function A(Z){if(!(Z.hasAttribute("transform")||Z.nodeName==="use"&&(Z.hasAttribute("x")||Z.hasAttribute("y"))))return null;const X=T(Z);return N.length>0&&X.premultiply(N[N.length-1]),P.copy(X),N.push(X),X}function T(Z){const X=new Pn,W=$;if(Z.nodeName==="use"&&(Z.hasAttribute("x")||Z.hasAttribute("y"))){const K=y(Z.getAttribute("x")),ge=y(Z.getAttribute("y"));X.translate(K,ge)}if(Z.hasAttribute("transform")){const K=Z.getAttribute("transform").split(")");for(let ge=K.length-1;ge>=0;ge--){const Se=K[ge].trim();if(Se==="")continue;const xe=Se.indexOf("("),Me=Se.length;if(xe>0&&xe<Me){const he=Se.slice(0,xe),Oe=g(Se.slice(xe+1));switch(W.identity(),he){case"translate":if(Oe.length>=1){const be=Oe[0];let Te=0;Oe.length>=2&&(Te=Oe[1]),W.translate(be,Te)}break;case"rotate":if(Oe.length>=1){let be=0,Te=0,Re=0;be=Oe[0]*Math.PI/180,Oe.length>=3&&(Te=Oe[1],Re=Oe[2]),U.makeTranslation(-Te,-Re),Q.makeRotation(be),Y.multiplyMatrices(Q,U),U.makeTranslation(Te,Re),W.multiplyMatrices(U,Y)}break;case"scale":if(Oe.length>=1){const be=Oe[0];let Te=be;Oe.length>=2&&(Te=Oe[1]),W.scale(be,Te)}break;case"skewX":Oe.length===1&&W.set(1,Math.tan(Oe[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":Oe.length===1&&W.set(1,0,0,Math.tan(Oe[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":Oe.length===6&&W.set(Oe[0],Oe[2],Oe[4],Oe[1],Oe[3],Oe[5],0,0,1);break}}X.premultiply(W)}}return X}function w(Z,X){function W(xe){ne.set(xe.x,xe.y,1).applyMatrix3(X),xe.set(ne.x,ne.y)}function K(xe){const Me=xe.xRadius,he=xe.yRadius,Oe=Math.cos(xe.aRotation),be=Math.sin(xe.aRotation),Te=new J(Me*Oe,Me*be,0),Re=new J(-he*be,he*Oe,0),$e=Te.applyMatrix3(X),ve=Re.applyMatrix3(X),me=$.set($e.x,ve.x,0,$e.y,ve.y,0,0,0,1),We=U.copy(me).invert(),fe=Q.copy(We).transpose().multiply(We).elements,ie=O(fe[0],fe[1],fe[4]),Ae=Math.sqrt(ie.rt1),Je=Math.sqrt(ie.rt2);if(xe.xRadius=1/Ae,xe.yRadius=1/Je,xe.aRotation=Math.atan2(ie.sn,ie.cs),!((xe.aEndAngle-xe.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const z=U.set(Ae,0,0,0,Je,0,0,0,1),F=Q.set(ie.cs,ie.sn,0,-ie.sn,ie.cs,0,0,0,1),ae=z.multiply(F).multiply(me),ye=Le=>{const{x:ke,y:Ve}=new J(Math.cos(Le),Math.sin(Le),0).applyMatrix3(ae);return Math.atan2(Ve,ke)};xe.aStartAngle=ye(xe.aStartAngle),xe.aEndAngle=ye(xe.aEndAngle),M(X)&&(xe.aClockwise=!xe.aClockwise)}}function ge(xe){const Me=S(X),he=R(X);xe.xRadius*=Me,xe.yRadius*=he;const Oe=Me>Number.EPSILON?Math.atan2(X.elements[1],X.elements[0]):Math.atan2(-X.elements[3],X.elements[4]);xe.aRotation+=Oe,M(X)&&(xe.aStartAngle*=-1,xe.aEndAngle*=-1,xe.aClockwise=!xe.aClockwise)}const Se=Z.subPaths;for(let xe=0,Me=Se.length;xe<Me;xe++){const Oe=Se[xe].curves;for(let be=0;be<Oe.length;be++){const Te=Oe[be];Te.isLineCurve?(W(Te.v1),W(Te.v2)):Te.isCubicBezierCurve?(W(Te.v0),W(Te.v1),W(Te.v2),W(Te.v3)):Te.isQuadraticBezierCurve?(W(Te.v0),W(Te.v1),W(Te.v2)):Te.isEllipseCurve&&(ee.set(Te.aX,Te.aY),W(ee),Te.aX=ee.x,Te.aY=ee.y,C(X)?K(Te):ge(Te))}}}function M(Z){const X=Z.elements;return X[0]*X[4]-X[1]*X[3]<0}function C(Z){const X=Z.elements,W=X[0]*X[3]+X[1]*X[4];if(W===0)return!1;const K=S(Z),ge=R(Z);return Math.abs(W/(K*ge))>Number.EPSILON}function S(Z){const X=Z.elements;return Math.sqrt(X[0]*X[0]+X[1]*X[1])}function R(Z){const X=Z.elements;return Math.sqrt(X[3]*X[3]+X[4]*X[4])}function O(Z,X,W){let K,ge,Se,xe,Me;const he=Z+W,Oe=Z-W,be=Math.sqrt(Oe*Oe+4*X*X);return he>0?(K=.5*(he+be),Me=1/K,ge=Z*Me*W-X*Me*X):he<0?ge=.5*(he-be):(K=.5*be,ge=-.5*be),Oe>0?Se=Oe+be:Se=Oe-be,Math.abs(Se)>2*Math.abs(X)?(Me=-2*X/Se,xe=1/Math.sqrt(1+Me*Me),Se=Me*xe):Math.abs(X)===0?(Se=1,xe=0):(Me=-.5*Se/X,Se=1/Math.sqrt(1+Me*Me),xe=Me*Se),Oe>0&&(Me=Se,Se=-xe,xe=Me),{rt1:K,rt2:ge,cs:Se,sn:xe}}const L=[],B={},N=[],$=new Pn,U=new Pn,Q=new Pn,Y=new Pn,ee=new qe,ne=new J,P=new Pn,se=new DOMParser().parseFromString(e,"image/svg+xml");return r(se.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:L,xml:se.documentElement}}static createShapes(e){const r={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},i={loc:r.ORIGIN,t:0};function s(m,g,v,x){const y=m.x,A=g.x,T=v.x,w=x.x,M=m.y,C=g.y,S=v.y,R=x.y,O=(w-T)*(M-S)-(R-S)*(y-T),L=(A-y)*(M-S)-(C-M)*(y-T),B=(R-S)*(A-y)-(w-T)*(C-M),N=O/B,$=L/B;if(B===0&&O!==0||N<=0||N>=1||$<0||$>1)return null;if(O===0&&B===0){for(let U=0;U<2;U++)if(o(U===0?v:x,m,g),i.loc==r.ORIGIN){const Q=U===0?v:x;return{x:Q.x,y:Q.y,t:i.t}}else if(i.loc==r.BETWEEN){const Q=+(y+i.t*(A-y)).toPrecision(10),Y=+(M+i.t*(C-M)).toPrecision(10);return{x:Q,y:Y,t:i.t}}return null}else{for(let Y=0;Y<2;Y++)if(o(Y===0?v:x,m,g),i.loc==r.ORIGIN){const ee=Y===0?v:x;return{x:ee.x,y:ee.y,t:i.t}}const U=+(y+N*(A-y)).toPrecision(10),Q=+(M+N*(C-M)).toPrecision(10);return{x:U,y:Q,t:N}}}function o(m,g,v){const x=v.x-g.x,y=v.y-g.y,A=m.x-g.x,T=m.y-g.y,w=x*T-A*y;if(m.x===g.x&&m.y===g.y){i.loc=r.ORIGIN,i.t=0;return}if(m.x===v.x&&m.y===v.y){i.loc=r.DESTINATION,i.t=1;return}if(w<-Number.EPSILON){i.loc=r.LEFT;return}if(w>Number.EPSILON){i.loc=r.RIGHT;return}if(x*A<0||y*T<0){i.loc=r.BEHIND;return}if(Math.sqrt(x*x+y*y)<Math.sqrt(A*A+T*T)){i.loc=r.BEYOND;return}let M;x!==0?M=A/x:M=T/y,i.loc=r.BETWEEN,i.t=M}function a(m,g){const v=[],x=[];for(let y=1;y<m.length;y++){const A=m[y-1],T=m[y];for(let w=1;w<g.length;w++){const M=g[w-1],C=g[w],S=s(A,T,M,C);S!==null&&v.find(R=>R.t<=S.t+Number.EPSILON&&R.t>=S.t-Number.EPSILON)===void 0&&(v.push(S),x.push(new qe(S.x,S.y)))}}return x}function l(m,g,v){const x=new qe;g.getCenter(x);const y=[];return v.forEach(A=>{A.boundingBox.containsPoint(x)&&a(m,A.points).forEach(w=>{y.push({identifier:A.identifier,isCW:A.isCW,point:w})})}),y.sort((A,T)=>A.point.x-T.point.x),y}function c(m,g,v,x,y){(y==null||y==="")&&(y="nonzero");const A=new qe;m.boundingBox.getCenter(A);const T=[new qe(v,A.y),new qe(x,A.y)],w=l(T,m.boundingBox,g);w.sort((L,B)=>L.point.x-B.point.x);const M=[],C=[];w.forEach(L=>{L.identifier===m.identifier?M.push(L):C.push(L)});const S=M[0].point.x,R=[];let O=0;for(;O<C.length&&C[O].point.x<S;)R.length>0&&R[R.length-1]===C[O].identifier?R.pop():R.push(C[O].identifier),O++;if(R.push(m.identifier),y==="evenodd"){const L=R.length%2===0,B=R[R.length-2];return{identifier:m.identifier,isHole:L,for:B}}else if(y==="nonzero"){let L=!0,B=null,N=null;for(let $=0;$<R.length;$++){const U=R[$];L?(N=g[U].isCW,L=!1,B=U):N!==g[U].isCW&&(N=g[U].isCW,L=!0)}return{identifier:m.identifier,isHole:L,for:B}}else console.warn('fill-rule: "'+y+'" is currently not implemented.')}let u=999999999,f=-999999999,h=e.subPaths.map(m=>{const g=m.getPoints();let v=-999999999,x=999999999,y=-999999999,A=999999999;for(let T=0;T<g.length;T++){const w=g[T];w.y>v&&(v=w.y),w.y<x&&(x=w.y),w.x>y&&(y=w.x),w.x<A&&(A=w.x)}return f<=y&&(f=y+1),u>=A&&(u=A-1),{curves:m.curves,points:g,isCW:hl.isClockWise(g),identifier:-1,boundingBox:new cU(new qe(A,x),new qe(y,v))}});h=h.filter(m=>m.points.length>1);for(let m=0;m<h.length;m++)h[m].identifier=m;const d=h.map(m=>c(m,h,u,f,e.userData?e.userData.style.fillRule:void 0)),p=[];return h.forEach(m=>{if(!d[m.identifier].isHole){const v=new Oc;v.curves=m.curves,d.filter(y=>y.isHole&&y.for===m.identifier).forEach(y=>{const A=h[y.identifier],T=new Iu;T.curves=A.curves,v.holes.push(T)}),p.push(v)}}),p}static getStrokeStyle(e,n,r,i,s){return e=e!==void 0?e:1,n=n!==void 0?n:"#000",r=r!==void 0?r:"miter",i=i!==void 0?i:"butt",s=s!==void 0?s:4,{strokeColor:n,strokeWidth:e,strokeLineJoin:r,strokeLineCap:i,strokeMiterLimit:s}}static pointsToStroke(e,n,r,i){const s=[],o=[],a=[];if(E1.pointsToStrokeWithBuffers(e,n,r,i,s,o,a)===0)return null;const l=new on;return l.setAttribute("position",new Ot(s,3)),l.setAttribute("normal",new Ot(o,3)),l.setAttribute("uv",new Ot(a,2)),l}static pointsToStrokeWithBuffers(e,n,r,i,s,o,a,l){const c=new qe,u=new qe,f=new qe,h=new qe,d=new qe,p=new qe,m=new qe,g=new qe,v=new qe,x=new qe,y=new qe,A=new qe,T=new qe,w=new qe,M=new qe,C=new qe,S=new qe;r=r!==void 0?r:12,i=i!==void 0?i:.001,l=l!==void 0?l:0,e=Oe(e);const R=e.length;if(R<2)return 0;const O=e[0].equals(e[R-1]);let L,B=e[0],N;const $=n.strokeWidth/2,U=1/(R-1);let Q=0,Y,ee,ne,P,se=!1,re=0,Z=l*3,X=l*2;W(e[0],e[1],c).multiplyScalar($),g.copy(e[0]).sub(c),v.copy(e[0]).add(c),x.copy(g),y.copy(v);for(let be=1;be<R;be++){L=e[be],be===R-1?O?N=e[1]:N=void 0:N=e[be+1];const Te=c;if(W(B,L,Te),f.copy(Te).multiplyScalar($),A.copy(L).sub(f),T.copy(L).add(f),Y=Q+U,ee=!1,N!==void 0){W(L,N,u),f.copy(u).multiplyScalar($),w.copy(L).sub(f),M.copy(L).add(f),ne=!0,f.subVectors(N,B),Te.dot(f)<0&&(ne=!1),be===1&&(se=ne),f.subVectors(N,L),f.normalize();const Re=Math.abs(Te.dot(f));if(Re>Number.EPSILON){const $e=$/Re;f.multiplyScalar(-$e),h.subVectors(L,B),d.copy(h).setLength($e).add(f),C.copy(d).negate();const ve=d.length(),me=h.length();h.divideScalar(me),p.subVectors(N,L);const We=p.length();switch(p.divideScalar(We),h.dot(C)<me&&p.dot(C)<We&&(ee=!0),S.copy(d).add(L),C.add(L),P=!1,ee?ne?(M.copy(C),T.copy(C)):(w.copy(C),A.copy(C)):Se(),n.strokeLineJoin){case"bevel":xe(ne,ee,Y);break;case"round":Me(ne,ee),ne?ge(L,A,w,Y,0):ge(L,M,T,Y,1);break;case"miter":case"miter-clip":default:const Xe=$*n.strokeMiterLimit/ve;if(Xe<1)if(n.strokeLineJoin!=="miter-clip"){xe(ne,ee,Y);break}else Me(ne,ee),ne?(p.subVectors(S,A).multiplyScalar(Xe).add(A),m.subVectors(S,w).multiplyScalar(Xe).add(w),K(A,Y,0),K(p,Y,0),K(L,Y,.5),K(L,Y,.5),K(p,Y,0),K(m,Y,0),K(L,Y,.5),K(m,Y,0),K(w,Y,0)):(p.subVectors(S,T).multiplyScalar(Xe).add(T),m.subVectors(S,M).multiplyScalar(Xe).add(M),K(T,Y,1),K(p,Y,1),K(L,Y,.5),K(L,Y,.5),K(p,Y,1),K(m,Y,1),K(L,Y,.5),K(m,Y,1),K(M,Y,1));else ee?(ne?(K(v,Q,1),K(g,Q,0),K(S,Y,0),K(v,Q,1),K(S,Y,0),K(C,Y,1)):(K(v,Q,1),K(g,Q,0),K(S,Y,1),K(g,Q,0),K(C,Y,0),K(S,Y,1)),ne?w.copy(S):M.copy(S)):ne?(K(A,Y,0),K(S,Y,0),K(L,Y,.5),K(L,Y,.5),K(S,Y,0),K(w,Y,0)):(K(T,Y,1),K(S,Y,1),K(L,Y,.5),K(L,Y,.5),K(S,Y,1),K(M,Y,1)),P=!0;break}}else Se()}else Se();!O&&be===R-1&&he(e[0],x,y,ne,!0,Q),Q=Y,B=L,g.copy(w),v.copy(M)}if(!O)he(L,A,T,ne,!1,Y);else if(ee&&s){let be=S,Te=C;se!==ne&&(be=C,Te=S),ne?(P||se)&&(Te.toArray(s,0*3),Te.toArray(s,3*3),P&&be.toArray(s,1*3)):(P||!se)&&(Te.toArray(s,1*3),Te.toArray(s,3*3),P&&be.toArray(s,0*3))}return re;function W(be,Te,Re){return Re.subVectors(Te,be),Re.set(-Re.y,Re.x).normalize()}function K(be,Te,Re){s&&(s[Z]=be.x,s[Z+1]=be.y,s[Z+2]=0,o&&(o[Z]=0,o[Z+1]=0,o[Z+2]=1),Z+=3,a&&(a[X]=Te,a[X+1]=Re,X+=2)),re+=3}function ge(be,Te,Re,$e,ve){c.copy(Te).sub(be).normalize(),u.copy(Re).sub(be).normalize();let me=Math.PI;const We=c.dot(u);Math.abs(We)<1&&(me=Math.abs(Math.acos(We))),me/=r,f.copy(Te);for(let Xe=0,xt=r-1;Xe<xt;Xe++)h.copy(f).rotateAround(be,me),K(f,$e,ve),K(h,$e,ve),K(be,$e,.5),f.copy(h);K(h,$e,ve),K(Re,$e,ve),K(be,$e,.5)}function Se(){K(v,Q,1),K(g,Q,0),K(A,Y,0),K(v,Q,1),K(A,Y,0),K(T,Y,1)}function xe(be,Te,Re){Te?be?(K(v,Q,1),K(g,Q,0),K(A,Y,0),K(v,Q,1),K(A,Y,0),K(C,Y,1),K(A,Re,0),K(w,Re,0),K(C,Re,.5)):(K(v,Q,1),K(g,Q,0),K(T,Y,1),K(g,Q,0),K(C,Y,0),K(T,Y,1),K(T,Re,1),K(C,Re,0),K(M,Re,1)):be?(K(A,Re,0),K(w,Re,0),K(L,Re,.5)):(K(T,Re,1),K(M,Re,0),K(L,Re,.5))}function Me(be,Te){Te&&(be?(K(v,Q,1),K(g,Q,0),K(A,Y,0),K(v,Q,1),K(A,Y,0),K(C,Y,1),K(A,Q,0),K(L,Y,.5),K(C,Y,1),K(L,Y,.5),K(w,Q,0),K(C,Y,1)):(K(v,Q,1),K(g,Q,0),K(T,Y,1),K(g,Q,0),K(C,Y,0),K(T,Y,1),K(T,Q,1),K(C,Y,0),K(L,Y,.5),K(L,Y,.5),K(C,Y,0),K(M,Q,1)))}function he(be,Te,Re,$e,ve,me){switch(n.strokeLineCap){case"round":ve?ge(be,Re,Te,me,.5):ge(be,Te,Re,me,.5);break;case"square":if(ve)c.subVectors(Te,be),u.set(c.y,-c.x),f.addVectors(c,u).add(be),h.subVectors(u,c).add(be),$e?(f.toArray(s,1*3),h.toArray(s,0*3),h.toArray(s,3*3)):(f.toArray(s,1*3),a[3*2+1]===1?h.toArray(s,3*3):f.toArray(s,3*3),h.toArray(s,0*3));else{c.subVectors(Re,be),u.set(c.y,-c.x),f.addVectors(c,u).add(be),h.subVectors(u,c).add(be);const We=s.length;$e?(f.toArray(s,We-1*3),h.toArray(s,We-2*3),h.toArray(s,We-4*3)):(h.toArray(s,We-2*3),f.toArray(s,We-1*3),h.toArray(s,We-4*3))}break}}function Oe(be){let Te=!1;for(let $e=1,ve=be.length-1;$e<ve;$e++)if(be[$e].distanceTo(be[$e+1])<i){Te=!0;break}if(!Te)return be;const Re=[];Re.push(be[0]);for(let $e=1,ve=be.length-1;$e<ve;$e++)be[$e].distanceTo(be[$e+1])>=i&&Re.push(be[$e]);return Re.push(be[be.length-1]),Re}}}const w2=new WeakMap;class o1e extends _r{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,r,i){const s=new Ir(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(n).catch(i)},r,i)}decodeDracoFile(e,n,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const l in n.attributeTypes){const c=n.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=c.name)}const r=JSON.stringify(n);if(w2.has(e)){const l=w2.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),w2.set(e,{key:r,promise:a}),a}_createGeometry(e){const n=new on;e.index&&n.setIndex(new Qt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;n.setAttribute(s,new Qt(o,a))}return n}_loadLibrary(e,n){const r=new Ir(this.manager);return r.setPath(this.decoderPath),r.setResponseType(n),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=a1e.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=n,r._taskLoad+=n,r})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function a1e(){let t,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(u){t.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const f=u.draco,h=new f.Decoder,d=new f.DecoderBuffer;d.Init(new Int8Array(l),l.byteLength);try{const p=n(f,h,d,c),m=p.attributes.map(g=>g.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:a.id,error:p.message})}finally{f.destroy(d),f.destroy(h)}});break}};function n(o,a,l,c){const u=c.attributeIDs,f=c.attributeTypes;let h,d;const p=a.GetEncodedGeometryType(l);if(p===o.TRIANGULAR_MESH)h=new o.Mesh,d=a.DecodeBufferToMesh(l,h);else if(p===o.POINT_CLOUD)h=new o.PointCloud,d=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!d.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const m={index:null,attributes:[]};for(const g in u){const v=self[f[g]];let x,y;if(c.useUniqueIDs)y=u[g],x=a.GetAttributeByUniqueId(h,y);else{if(y=a.GetAttributeId(h,o[u[g]]),y===-1)continue;x=a.GetAttribute(h,y)}m.attributes.push(i(o,a,h,g,v,x))}return p===o.TRIANGULAR_MESH&&(m.index=r(o,a,h)),o.destroy(h),m}function r(o,a,l){const u=l.num_faces()*3,f=u*4,h=o._malloc(f);a.GetTrianglesUInt32Array(l,f,h);const d=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:d,itemSize:1}}function i(o,a,l,c,u,f){const h=f.num_components(),p=l.num_points()*h,m=p*u.BYTES_PER_ELEMENT,g=s(o,u),v=o._malloc(m);a.GetAttributeDataArrayForAllPoints(l,f,g,m,v);const x=new u(o.HEAPF32.buffer,v,p).slice();return o._free(v),{name:c,array:x,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const kI=new Yn,Yy=new J;class v_ extends kg{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],r=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(r),this.setAttribute("position",new Ot(e,3)),this.setAttribute("uv",new Ot(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,r=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),r.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const r=new H3(n,6,1);return this.setAttribute("instanceStart",new po(r,3,0)),this.setAttribute("instanceEnd",new po(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,n=3){let r;e instanceof Float32Array?r=e:Array.isArray(e)&&(r=new Float32Array(e));const i=new H3(r,n*2,1);return this.setAttribute("instanceColorStart",new po(i,n,0)),this.setAttribute("instanceColorEnd",new po(i,n,n)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new P5(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yn);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),kI.setFromBufferAttribute(n),this.boundingBox.union(kI))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fr),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const r=this.boundingSphere.center;this.boundingBox.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Yy.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Yy)),Yy.fromBufferAttribute(n,s),i=Math.max(i,r.distanceToSquared(Yy));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class aH extends v_{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setPositions(r),this}setColors(e,n=3){const r=e.length-n,i=new Float32Array(2*r);if(n===3)for(let s=0;s<r;s+=n)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5];else for(let s=0;s<r;s+=n)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5],i[2*s+6]=e[s+6],i[2*s+7]=e[s+7];return super.setColors(i,n),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}class y_ extends ur{constructor(e){super({type:"LineMaterial",uniforms:Gu.clone(Gu.merge([Wt.common,Wt.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new qe(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${parseInt(yl.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(n){!!n!="USE_DASH"in this.defines&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(n){!!n!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const FI=new J,UI=new J,As=new Xn,Ts=new Xn,Il=new Xn,S2=new J,C2=new yt,Fs=new dl,zI=new J,qy=new Yn,Ky=new Fr,Pl=new Xn;let kl,HS,lH,oh;function HI(t,e,n){return Pl.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),Pl.multiplyScalar(1/Pl.w),Pl.x=oh/n.width,Pl.y=oh/n.height,Pl.applyMatrix4(t.projectionMatrixInverse),Pl.multiplyScalar(1/Pl.w),Math.abs(Math.max(Pl.x,Pl.y))}function l1e(t,e){for(let n=0,r=HS.count;n<r;n++){Fs.start.fromBufferAttribute(HS,n),Fs.end.fromBufferAttribute(lH,n);const i=new J,s=new J;kl.distanceSqToSegment(Fs.start,Fs.end,s,i),s.distanceTo(i)<oh*.5&&e.push({point:s,pointOnLine:i,distance:kl.origin.distanceTo(s),object:t,face:null,faceIndex:n,uv:null,uv2:null})}}function c1e(t,e,n){const r=e.projectionMatrix,s=t.material.resolution,o=t.matrixWorld,a=t.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=-e.near;kl.at(1,Il),Il.w=1,Il.applyMatrix4(e.matrixWorldInverse),Il.applyMatrix4(r),Il.multiplyScalar(1/Il.w),Il.x*=s.x/2,Il.y*=s.y/2,Il.z=0,S2.copy(Il),C2.multiplyMatrices(e.matrixWorldInverse,o);for(let f=0,h=l.count;f<h;f++){if(As.fromBufferAttribute(l,f),Ts.fromBufferAttribute(c,f),As.w=1,Ts.w=1,As.applyMatrix4(C2),Ts.applyMatrix4(C2),As.z>u&&Ts.z>u)continue;if(As.z>u){const x=As.z-Ts.z,y=(As.z-u)/x;As.lerp(Ts,y)}else if(Ts.z>u){const x=Ts.z-As.z,y=(Ts.z-u)/x;Ts.lerp(As,y)}As.applyMatrix4(r),Ts.applyMatrix4(r),As.multiplyScalar(1/As.w),Ts.multiplyScalar(1/Ts.w),As.x*=s.x/2,As.y*=s.y/2,Ts.x*=s.x/2,Ts.y*=s.y/2,Fs.start.copy(As),Fs.start.z=0,Fs.end.copy(Ts),Fs.end.z=0;const p=Fs.closestPointToPointParameter(S2,!0);Fs.at(p,zI);const m=si.lerp(As.z,Ts.z,p),g=m>=-1&&m<=1,v=S2.distanceTo(zI)<oh*.5;if(g&&v){Fs.start.fromBufferAttribute(l,f),Fs.end.fromBufferAttribute(c,f),Fs.start.applyMatrix4(o),Fs.end.applyMatrix4(o);const x=new J,y=new J;kl.distanceSqToSegment(Fs.start,Fs.end,y,x),n.push({point:y,pointOnLine:x,distance:kl.origin.distanceTo(y),object:t,face:null,faceIndex:f,uv:null,uv2:null})}}}class cH extends un{constructor(e=new v_,n=new y_({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,r=e.attributes.instanceEnd,i=new Float32Array(2*n.count);for(let o=0,a=0,l=n.count;o<l;o++,a+=2)FI.fromBufferAttribute(n,o),UI.fromBufferAttribute(r,o),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+FI.distanceTo(UI);const s=new H3(i,2,1);return e.setAttribute("instanceDistanceStart",new po(s,1,0)),e.setAttribute("instanceDistanceEnd",new po(s,1,1)),this}raycast(e,n){const r=this.material.worldUnits,i=e.camera;i===null&&!r&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;kl=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;oh=l.linewidth+s,HS=a.attributes.instanceStart,lH=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),Ky.copy(a.boundingSphere).applyMatrix4(o);let c;if(r)c=oh*.5;else{const f=Math.max(i.near,Ky.distanceToPoint(kl.origin));c=HI(i,f,l.resolution)}if(Ky.radius+=c,kl.intersectsSphere(Ky)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),qy.copy(a.boundingBox).applyMatrix4(o);let u;if(r)u=oh*.5;else{const f=Math.max(i.near,qy.distanceToPoint(kl.origin));u=HI(i,f,l.resolution)}qy.expandByScalar(u),kl.intersectsBox(qy)!==!1&&(r?l1e(this,n):c1e(this,i,n))}}class uH extends cH{constructor(e=new aH,n=new y_({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}let Jy;const M2=()=>{if(Jy)return Jy;const t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=t;WebAssembly.validate(n)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const h=new Uint8Array(f.length);for(let p=0;p<f.length;++p){const m=f.charCodeAt(p);h[p]=m>96?m-71:m>64?m-65:m>47?m+4:m>46?63:62}let d=0;for(let p=0;p<f.length;++p)h[d++]=h[p]<60?r[h[p]]:(h[p]-60)*64+h[++p];return h.buffer.slice(0,d)}function l(f,h,d,p,m,g){const v=s.exports.sbrk,x=d+3&-4,y=v(x*p),A=v(m.length),T=new Uint8Array(s.exports.memory.buffer);T.set(m,A);const w=f(y,d,p,A,m.length);if(w===0&&g&&g(y,x,p),h.set(T.subarray(y,y+d*p)),v(y-v(0)),w!==0)throw new Error(`Malformed buffer data: ${w}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Jy={ready:o,supported:!0,decodeVertexBuffer(f,h,d,p,m){l(s.exports.meshopt_decodeVertexBuffer,f,h,d,p,s.exports[c[m]])},decodeIndexBuffer(f,h,d,p){l(s.exports.meshopt_decodeIndexBuffer,f,h,d,p)},decodeIndexSequence(f,h,d,p){l(s.exports.meshopt_decodeIndexSequence,f,h,d,p)},decodeGltfBuffer(f,h,d,p,m,g){l(s.exports[u[m]],f,h,d,p,s.exports[c[g]])}},Jy};function u1e(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}const f1e=E.createContext([]);function h1e({box:t,multiple:e,children:n,onChange:r,onChangePointerUp:i,border:s="1px solid #55aaff",backgroundColor:o="rgba(75, 160, 255, 0.1)",filter:a=c=>c,...l}){const[c,u]=E.useState(!1),{setEvents:f,camera:h,raycaster:d,gl:p,controls:m,size:g,get:v}=wt(),[x,y]=E.useState(!1),[A,T]=E.useReducer((S,{object:R,shift:O})=>R===void 0?[]:Array.isArray(R)?R:O?S.includes(R)?S.filter(L=>L!==R):[R,...S]:S[0]===R?[]:[R],[]);E.useEffect(()=>{c?r==null||r(A):i==null||i(A)},[A,c]);const w=E.useCallback(S=>{S.stopPropagation(),T({object:a([S.object])[0],shift:e&&S.shiftKey})},[]),M=E.useCallback(S=>!x&&T({}),[x]),C=E.useRef(null);return E.useEffect(()=>{if(!t||!e)return;const S=new K0e(h,C.current),R=document.createElement("div");R.style.pointerEvents="none",R.style.border=s,R.style.backgroundColor=o,R.style.position="fixed";const O=new qe,L=new qe,B=new qe,N=v().events.enabled,$=m==null?void 0:m.enabled;let U=!1;function Q(X,W){const{offsetX:K,offsetY:ge}=X,{width:Se,height:xe}=g;W.set(K/Se*2-1,-(ge/xe)*2+1)}function Y(X){var W;m&&(m.enabled=!1),f({enabled:!1}),u(U=!0),(W=p.domElement.parentElement)==null||W.appendChild(R),R.style.left=`${X.clientX}px`,R.style.top=`${X.clientY}px`,R.style.width="0px",R.style.height="0px",O.x=X.clientX,O.y=X.clientY}function ee(X){B.x=Math.max(O.x,X.clientX),B.y=Math.max(O.y,X.clientY),L.x=Math.min(O.x,X.clientX),L.y=Math.min(O.y,X.clientY),R.style.left=`${L.x}px`,R.style.top=`${L.y}px`,R.style.width=`${B.x-L.x}px`,R.style.height=`${B.y-L.y}px`}function ne(){if(U){var X;m&&(m.enabled=$),f({enabled:N}),u(U=!1),(X=R.parentElement)==null||X.removeChild(R)}}function P(X){X.shiftKey&&(Y(X),Q(X,S.startPoint))}let se=[];function re(X){if(U){ee(X),Q(X,S.endPoint);const W=S.select().sort(K=>K.uuid).filter(K=>K.isMesh);u1e(W,se)||(se=W,T({object:a(W)}))}}function Z(X){U&&ne()}return document.addEventListener("pointerdown",P,{passive:!0}),document.addEventListener("pointermove",re,{passive:!0,capture:!0}),document.addEventListener("pointerup",Z,{passive:!0}),()=>{document.removeEventListener("pointerdown",P),document.removeEventListener("pointermove",re,!0),document.removeEventListener("pointerup",Z)}},[g.width,g.height,d,h,m,p]),E.createElement("group",Ct({ref:C,onClick:w,onPointerOver:()=>y(!0),onPointerOut:()=>y(!1),onPointerMissed:M},l),E.createElement(f1e.Provider,{value:A},n))}const d1e=E.forwardRef(function({children:e,follow:n=!0,lockX:r=!1,lockY:i=!1,lockZ:s=!1,...o},a){const l=E.useRef(null),c=E.useRef(null),u=new kn;return rn(({camera:f})=>{if(!n||!c.current)return;const h=c.current.rotation.clone();c.current.updateMatrix(),c.current.updateWorldMatrix(!1,!1),c.current.getWorldQuaternion(u),f.getWorldQuaternion(l.current.quaternion).premultiply(u.invert()),r&&(c.current.rotation.x=h.x),i&&(c.current.rotation.y=h.y),s&&(c.current.rotation.z=h.z)}),E.useImperativeHandle(a,()=>c.current,[]),E.createElement("group",Ct({ref:c,matrixAutoUpdate:!1,matrixWorldAutoUpdate:!1},o),E.createElement("group",{ref:l},e))}),p1e=E.forwardRef(({children:t,depth:e=-1,...n},r)=>{const i=E.useRef(null);return E.useImperativeHandle(r,()=>i.current,[]),rn(({camera:s})=>{i.current.quaternion.copy(s.quaternion),i.current.position.copy(s.position)}),E.createElement("group",Ct({ref:i},n),E.createElement("group",{"position-z":-e},t))}),m1e=new J,g1e=new J,v1e=new J,y1e=(t,e,n)=>{const r=n.width/2,i=n.height/2;e.updateMatrixWorld(!1);const s=t.project(e);return s.x=s.x*r+r,s.y=-(s.y*i)+i,s},x1e=(t,e,n,r=1)=>{const i=m1e.set(t.x/n.width*2-1,-(t.y/n.height)*2+1,r);return i.unproject(e),i},fH=(t,e,n,r)=>{const i=y1e(v1e.copy(t),n,r);let s=0;for(let o=0;o<2;++o){const a=g1e.copy(i).setComponent(o,i.getComponent(o)+e),l=x1e(a,n,r,a.z);s=Math.max(s,t.distanceTo(l))}return s},$i=E.forwardRef(function({points:e,color:n=16777215,vertexColors:r,linewidth:i,lineWidth:s,segments:o,dashed:a,...l},c){var u,f;const h=wt(v=>v.size),d=E.useMemo(()=>o?new cH:new uH,[o]),[p]=E.useState(()=>new y_),m=(r==null||(u=r[0])==null?void 0:u.length)===4?4:3,g=E.useMemo(()=>{const v=o?new v_:new aH,x=e.map(y=>{const A=Array.isArray(y);return y instanceof J||y instanceof Xn?[y.x,y.y,y.z]:y instanceof qe?[y.x,y.y,0]:A&&y.length===3?[y[0],y[1],y[2]]:A&&y.length===2?[y[0],y[1],0]:y});if(v.setPositions(x.flat()),r){n=16777215;const y=r.map(A=>A instanceof bt?A.toArray():A);v.setColors(y.flat(),m)}return v},[e,o,r,m]);return E.useLayoutEffect(()=>{d.computeLineDistances()},[e,d]),E.useLayoutEffect(()=>{a?p.defines.USE_DASH="":delete p.defines.USE_DASH,p.needsUpdate=!0},[a,p]),E.useEffect(()=>()=>g.dispose(),[g]),E.createElement("primitive",Ct({object:d,ref:c},l),E.createElement("primitive",{object:g,attach:"geometry"}),E.createElement("primitive",Ct({object:p,attach:"material",color:n,vertexColors:!!r,resolution:[h.width,h.height],linewidth:(f=i??s)!==null&&f!==void 0?f:1,dashed:a,transparent:m===4},l)))}),E1e=new J,_1e=E.forwardRef(function({start:e=[0,0,0],end:n=[0,0,0],mid:r,segments:i=20,...s},o){const a=E.useRef(null);E.useImperativeHandle(o,()=>a.current);const[l]=E.useState(()=>new YE(void 0,void 0,void 0)),c=E.useCallback((f,h,d,p=20)=>(f instanceof J?l.v0.copy(f):l.v0.set(...f),h instanceof J?l.v2.copy(h):l.v2.set(...h),d instanceof J?l.v1.copy(d):Array.isArray(d)?l.v1.set(...d):l.v1.copy(l.v0.clone().add(l.v2.clone().sub(l.v0)).add(E1e.set(0,l.v0.y-l.v2.y,0))),l.getPoints(p)),[]);E.useLayoutEffect(()=>{a.current.setPoints=(f,h,d)=>{const p=c(f,h,d);a.current.geometry&&a.current.geometry.setPositions(p.map(m=>m.toArray()).flat())}},[]);const u=E.useMemo(()=>c(e,n,r,i),[e,n,r,i]);return E.createElement($i,Ct({ref:a,points:u},s))}),b1e=E.forwardRef(function({start:e,end:n,midA:r,midB:i,segments:s=20,...o},a){const l=E.useMemo(()=>{const c=e instanceof J?e:new J(...e),u=n instanceof J?n:new J(...n),f=r instanceof J?r:new J(...r),h=i instanceof J?i:new J(...i);return new S5(c,f,h,u).getPoints(s)},[e,n,r,i,s]);return E.createElement($i,Ct({ref:a,points:l},o))}),A1e=E.forwardRef(function({points:e,closed:n=!1,curveType:r="centripetal",tension:i=.5,segments:s=20,vertexColors:o,...a},l){const c=E.useMemo(()=>{const h=e.map(d=>d instanceof J?d:new J(...d));return new T5(h,n,r,i)},[e,n,r,i]),u=E.useMemo(()=>c.getPoints(s),[c,s]),f=E.useMemo(()=>{if(!o||o.length<2)return;if(o.length===s+1)return o;const h=o.map(m=>m instanceof bt?m:new bt(...m));n&&h.push(h[0].clone());const d=[h[0]],p=s/(h.length-1);for(let m=1;m<s;m++){const g=m%p/p,v=Math.floor(m/p);d.push(h[v].clone().lerp(h[v+1],g))}return d.push(h[h.length-1]),d},[o,s]);return E.createElement($i,Ct({ref:l,points:u,vertexColors:f},a))}),T1e=E.forwardRef(({url:t,distance:e=1,loop:n=!0,autoplay:r,...i},s)=>{const o=E.useRef(null);E.useImperativeHandle(s,()=>o.current,[]);const a=wt(({camera:u})=>u),[l]=E.useState(()=>new iU),c=ys(rU,t);return E.useEffect(()=>{const u=o.current;u&&(u.setBuffer(c),u.setRefDistance(e),u.setLoop(n),r&&!u.isPlaying&&u.play())},[c,a,e,n]),E.useEffect(()=>{const u=o.current;return a.add(l),()=>{a.remove(l),u&&(u.isPlaying&&u.stop(),u.source&&u.source._connected&&u.disconnect())}},[]),E.createElement("positionalAudio",Ct({ref:o,args:[l]},i))});function w1e(){var t=Object.create(null);function e(i,s){var o=i.id,a=i.name,l=i.dependencies;l===void 0&&(l=[]);var c=i.init;c===void 0&&(c=function(){});var u=i.getTransferables;if(u===void 0&&(u=null),!t[o])try{l=l.map(function(h){return h&&h.isWorkerModule&&(e(h,function(d){if(d instanceof Error)throw d}),h=t[h.id].value),h}),c=r("<"+a+">.init",c),u&&(u=r("<"+a+">.getTransferables",u));var f=null;typeof c=="function"?f=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[o]={id:o,value:f,getTransferables:u},s(f)}catch(h){h&&h.noLog||console.error(h),s(h)}}function n(i,s){var o,a=i.id,l=i.args;(!t[a]||typeof t[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=t[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(f){return s(f instanceof Error?f:new Error(""+f))}):u(c)}catch(f){s(f)}function u(f){try{var h=t[a].getTransferables&&t[a].getTransferables(f);(!h||!Array.isArray(h)||!h.length)&&(h=void 0),s(f,h)}catch(d){console.error(d),s(d)}}}function r(i,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&n(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function S1e(t){var e=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,r=t.init;n=Array.isArray(n)?n.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var i=Promise.all(n).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var hH=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return hH=function(){return t},t},C1e=0,M1e=0,R2=!1,_1=Object.create(null),b1=Object.create(null),GS=Object.create(null);function lm(t){if((!t||typeof t.init!="function")&&!R2)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,r=t.getTransferables,i=t.workerId;if(!hH())return S1e(t);i==null&&(i="#default");var s="workerModule"+ ++C1e,o=t.name||s,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(R2=!0,c=lm({workerId:i,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+s3(c)+`
)}`}),R2=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!a){a=GI(i,"registerModule",l.workerModuleData);var f=function(){a=null,b1[i].delete(f)};(b1[i]||(b1[i]=new Set)).add(f)}return a.then(function(h){var d=h.isCallable;if(d)return GI(i,"callModule",{id:s,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:s3(n),getTransferables:r&&s3(r)},l}function R1e(t){b1[t]&&b1[t].forEach(function(e){e()}),_1[t]&&(_1[t].terminate(),delete _1[t])}function s3(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function I1e(t){var e=_1[t];if(!e){var n=s3(w1e);e=_1[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,o=GS[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete GS[s],o(i)}}return e}function GI(t,e,n){return new Promise(function(r,i){var s=++M1e;GS[s]=function(o){o.success?r(o.result):i(new Error("Error in worker "+e+" call: "+o.error))},I1e(t).postMessage({messageId:s,action:e,data:n})})}function dH(){var t=function(e){function n(ee,ne,P,se,re,Z,X,W){var K=1-X;W.x=K*K*ee+2*K*X*P+X*X*re,W.y=K*K*ne+2*K*X*se+X*X*Z}function r(ee,ne,P,se,re,Z,X,W,K,ge){var Se=1-K;ge.x=Se*Se*Se*ee+3*Se*Se*K*P+3*Se*K*K*re+K*K*K*X,ge.y=Se*Se*Se*ne+3*Se*Se*K*se+3*Se*K*K*Z+K*K*K*W}function i(ee,ne){for(var P=/([MLQCZ])([^MLQCZ]*)/g,se,re,Z,X,W;se=P.exec(ee);){var K=se[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(ge){return parseFloat(ge)});switch(se[1]){case"M":X=re=K[0],W=Z=K[1];break;case"L":(K[0]!==X||K[1]!==W)&&ne("L",X,W,X=K[0],W=K[1]);break;case"Q":{ne("Q",X,W,X=K[2],W=K[3],K[0],K[1]);break}case"C":{ne("C",X,W,X=K[4],W=K[5],K[0],K[1],K[2],K[3]);break}case"Z":(X!==re||W!==Z)&&ne("L",X,W,re,Z);break}}}function s(ee,ne,P){P===void 0&&(P=16);var se={x:0,y:0};i(ee,function(re,Z,X,W,K,ge,Se,xe,Me){switch(re){case"L":ne(Z,X,W,K);break;case"Q":{for(var he=Z,Oe=X,be=1;be<P;be++)n(Z,X,ge,Se,W,K,be/(P-1),se),ne(he,Oe,se.x,se.y),he=se.x,Oe=se.y;break}case"C":{for(var Te=Z,Re=X,$e=1;$e<P;$e++)r(Z,X,ge,Se,xe,Me,W,K,$e/(P-1),se),ne(Te,Re,se.x,se.y),Te=se.x,Re=se.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(ee,ne){var P=ee.getContext?ee.getContext("webgl",c):ee,se=l.get(P);if(!se){let Se=function(Te){var Re=Z[Te];if(!Re&&(Re=Z[Te]=P.getExtension(Te),!Re))throw new Error(Te+" not supported");return Re},xe=function(Te,Re){var $e=P.createShader(Re);return P.shaderSource($e,Te),P.compileShader($e),$e},Me=function(Te,Re,$e,ve){if(!X[Te]){var me={},We={},Xe=P.createProgram();P.attachShader(Xe,xe(Re,P.VERTEX_SHADER)),P.attachShader(Xe,xe($e,P.FRAGMENT_SHADER)),P.linkProgram(Xe),X[Te]={program:Xe,transaction:function(fe){P.useProgram(Xe),fe({setUniform:function(Ae,Je){for(var te=[],z=arguments.length-2;z-- >0;)te[z]=arguments[z+2];var F=We[Je]||(We[Je]=P.getUniformLocation(Xe,Je));P["uniform"+Ae].apply(P,[F].concat(te))},setAttribute:function(Ae,Je,te,z,F){var ae=me[Ae];ae||(ae=me[Ae]={buf:P.createBuffer(),loc:P.getAttribLocation(Xe,Ae),data:null}),P.bindBuffer(P.ARRAY_BUFFER,ae.buf),P.vertexAttribPointer(ae.loc,Je,P.FLOAT,!1,0,0),P.enableVertexAttribArray(ae.loc),re?P.vertexAttribDivisor(ae.loc,z):Se("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ae.loc,z),F!==ae.data&&(P.bufferData(P.ARRAY_BUFFER,F,te),ae.data=F)}})}}}X[Te].transaction(ve)},he=function(Te,Re){K++;try{P.activeTexture(P.TEXTURE0+K);var $e=W[Te];$e||($e=W[Te]=P.createTexture(),P.bindTexture(P.TEXTURE_2D,$e),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,P.NEAREST),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,P.NEAREST)),P.bindTexture(P.TEXTURE_2D,$e),Re($e,K)}finally{K--}},Oe=function(Te,Re,$e){var ve=P.createFramebuffer();ge.push(ve),P.bindFramebuffer(P.FRAMEBUFFER,ve),P.activeTexture(P.TEXTURE0+Re),P.bindTexture(P.TEXTURE_2D,Te),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,Te,0);try{$e(ve)}finally{P.deleteFramebuffer(ve),P.bindFramebuffer(P.FRAMEBUFFER,ge[--ge.length-1]||null)}},be=function(){Z={},X={},W={},K=-1,ge.length=0};var re=typeof WebGL2RenderingContext<"u"&&P instanceof WebGL2RenderingContext,Z={},X={},W={},K=-1,ge=[];P.canvas.addEventListener("webglcontextlost",function(Te){be(),Te.preventDefault()},!1),l.set(P,se={gl:P,isWebGL2:re,getExtension:Se,withProgram:Me,withTexture:he,withTextureFramebuffer:Oe,handleContextLoss:be})}ne(se)}function f(ee,ne,P,se,re,Z,X,W){X===void 0&&(X=15),W===void 0&&(W=null),u(ee,function(K){var ge=K.gl,Se=K.withProgram,xe=K.withTexture;xe("copy",function(Me,he){ge.texImage2D(ge.TEXTURE_2D,0,ge.RGBA,re,Z,0,ge.RGBA,ge.UNSIGNED_BYTE,ne),Se("copy",o,a,function(Oe){var be=Oe.setUniform,Te=Oe.setAttribute;Te("aUV",2,ge.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),be("1i","image",he),ge.bindFramebuffer(ge.FRAMEBUFFER,W||null),ge.disable(ge.BLEND),ge.colorMask(X&8,X&4,X&2,X&1),ge.viewport(P,se,re,Z),ge.scissor(P,se,re,Z),ge.drawArrays(ge.TRIANGLES,0,3)})})})}function h(ee,ne,P){var se=ee.width,re=ee.height;u(ee,function(Z){var X=Z.gl,W=new Uint8Array(se*re*4);X.readPixels(0,0,se,re,X.RGBA,X.UNSIGNED_BYTE,W),ee.width=ne,ee.height=P,f(X,W,0,0,se,re)})}var d=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:f,resizeWebGLCanvasWithoutClearing:h});function p(ee,ne,P,se,re,Z){Z===void 0&&(Z=1);var X=new Uint8Array(ee*ne),W=se[2]-se[0],K=se[3]-se[1],ge=[];s(P,function(Te,Re,$e,ve){ge.push({x1:Te,y1:Re,x2:$e,y2:ve,minX:Math.min(Te,$e),minY:Math.min(Re,ve),maxX:Math.max(Te,$e),maxY:Math.max(Re,ve)})}),ge.sort(function(Te,Re){return Te.maxX-Re.maxX});for(var Se=0;Se<ee;Se++)for(var xe=0;xe<ne;xe++){var Me=Oe(se[0]+W*(Se+.5)/ee,se[1]+K*(xe+.5)/ne),he=Math.pow(1-Math.abs(Me)/re,Z)/2;Me<0&&(he=1-he),he=Math.max(0,Math.min(255,Math.round(he*255))),X[xe*ee+Se]=he}return X;function Oe(Te,Re){for(var $e=1/0,ve=1/0,me=ge.length;me--;){var We=ge[me];if(We.maxX+ve<=Te)break;if(Te+ve>We.minX&&Re-ve<We.maxY&&Re+ve>We.minY){var Xe=v(Te,Re,We.x1,We.y1,We.x2,We.y2);Xe<$e&&($e=Xe,ve=Math.sqrt($e))}}return be(Te,Re)&&(ve=-ve),ve}function be(Te,Re){for(var $e=0,ve=ge.length;ve--;){var me=ge[ve];if(me.maxX<=Te)break;var We=me.y1>Re!=me.y2>Re&&Te<(me.x2-me.x1)*(Re-me.y1)/(me.y2-me.y1)+me.x1;We&&($e+=me.y1<me.y2?1:-1)}return $e!==0}}function m(ee,ne,P,se,re,Z,X,W,K,ge){Z===void 0&&(Z=1),W===void 0&&(W=0),K===void 0&&(K=0),ge===void 0&&(ge=0),g(ee,ne,P,se,re,Z,X,null,W,K,ge)}function g(ee,ne,P,se,re,Z,X,W,K,ge,Se){Z===void 0&&(Z=1),K===void 0&&(K=0),ge===void 0&&(ge=0),Se===void 0&&(Se=0);for(var xe=p(ee,ne,P,se,re,Z),Me=new Uint8Array(xe.length*4),he=0;he<xe.length;he++)Me[he*4+Se]=xe[he];f(X,Me,K,ge,ee,ne,1<<3-Se,W)}function v(ee,ne,P,se,re,Z){var X=re-P,W=Z-se,K=X*X+W*W,ge=K?Math.max(0,Math.min(1,((ee-P)*X+(ne-se)*W)/K)):0,Se=ee-(P+ge*X),xe=ne-(se+ge*W);return Se*Se+xe*xe}var x=Object.freeze({__proto__:null,generate:p,generateIntoCanvas:m,generateIntoFramebuffer:g}),y="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",A="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",T="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",w=new Float32Array([0,0,2,0,0,2]),M=null,C=!1,S={},R=new WeakMap;function O(ee){if(!C&&!$(ee))throw new Error("WebGL generation not supported")}function L(ee,ne,P,se,re,Z,X){if(Z===void 0&&(Z=1),X===void 0&&(X=null),!X&&(X=M,!X)){var W=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!W)throw new Error("OffscreenCanvas or DOM canvas not supported");X=M=W.getContext("webgl",{depth:!1})}O(X);var K=new Uint8Array(ee*ne*4);u(X,function(Me){var he=Me.gl,Oe=Me.withTexture,be=Me.withTextureFramebuffer;Oe("readable",function(Te,Re){he.texImage2D(he.TEXTURE_2D,0,he.RGBA,ee,ne,0,he.RGBA,he.UNSIGNED_BYTE,null),be(Te,Re,function($e){N(ee,ne,P,se,re,Z,he,$e,0,0,0),he.readPixels(0,0,ee,ne,he.RGBA,he.UNSIGNED_BYTE,K)})})});for(var ge=new Uint8Array(ee*ne),Se=0,xe=0;Se<K.length;Se+=4)ge[xe++]=K[Se];return ge}function B(ee,ne,P,se,re,Z,X,W,K,ge){Z===void 0&&(Z=1),W===void 0&&(W=0),K===void 0&&(K=0),ge===void 0&&(ge=0),N(ee,ne,P,se,re,Z,X,null,W,K,ge)}function N(ee,ne,P,se,re,Z,X,W,K,ge,Se){Z===void 0&&(Z=1),K===void 0&&(K=0),ge===void 0&&(ge=0),Se===void 0&&(Se=0),O(X);var xe=[];s(P,function(Me,he,Oe,be){xe.push(Me,he,Oe,be)}),xe=new Float32Array(xe),u(X,function(Me){var he=Me.gl,Oe=Me.isWebGL2,be=Me.getExtension,Te=Me.withProgram,Re=Me.withTexture,$e=Me.withTextureFramebuffer,ve=Me.handleContextLoss;if(Re("rawDistances",function(me,We){(ee!==me._lastWidth||ne!==me._lastHeight)&&he.texImage2D(he.TEXTURE_2D,0,he.RGBA,me._lastWidth=ee,me._lastHeight=ne,0,he.RGBA,he.UNSIGNED_BYTE,null),Te("main",y,A,function(Xe){var xt=Xe.setAttribute,fe=Xe.setUniform,ie=!Oe&&be("ANGLE_instanced_arrays"),Ae=!Oe&&be("EXT_blend_minmax");xt("aUV",2,he.STATIC_DRAW,0,w),xt("aLineSegment",4,he.DYNAMIC_DRAW,1,xe),fe.apply(void 0,["4f","uGlyphBounds"].concat(se)),fe("1f","uMaxDistance",re),fe("1f","uExponent",Z),$e(me,We,function(Je){he.enable(he.BLEND),he.colorMask(!0,!0,!0,!0),he.viewport(0,0,ee,ne),he.scissor(0,0,ee,ne),he.blendFunc(he.ONE,he.ONE),he.blendEquationSeparate(he.FUNC_ADD,Oe?he.MAX:Ae.MAX_EXT),he.clear(he.COLOR_BUFFER_BIT),Oe?he.drawArraysInstanced(he.TRIANGLES,0,3,xe.length/4):ie.drawArraysInstancedANGLE(he.TRIANGLES,0,3,xe.length/4)})}),Te("post",o,T,function(Xe){Xe.setAttribute("aUV",2,he.STATIC_DRAW,0,w),Xe.setUniform("1i","tex",We),he.bindFramebuffer(he.FRAMEBUFFER,W),he.disable(he.BLEND),he.colorMask(Se===0,Se===1,Se===2,Se===3),he.viewport(K,ge,ee,ne),he.scissor(K,ge,ee,ne),he.drawArrays(he.TRIANGLES,0,3)})}),he.isContextLost())throw ve(),new Error("webgl context lost")})}function $(ee){var ne=!ee||ee===M?S:ee.canvas||ee,P=R.get(ne);if(P===void 0){C=!0;var se=null;try{var re=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],Z=L(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,ee);P=Z&&re.length===Z.length&&Z.every(function(X,W){return X===re[W]}),P||(se="bad trial run results",console.info(re,Z))}catch(X){P=!1,se=X.message}se&&console.warn("WebGL SDF generation not supported:",se),C=!1,R.set(ne,P)}return P}var U=Object.freeze({__proto__:null,generate:L,generateIntoCanvas:B,generateIntoFramebuffer:N,isSupported:$});function Q(ee,ne,P,se,re,Z){re===void 0&&(re=Math.max(se[2]-se[0],se[3]-se[1])/2),Z===void 0&&(Z=1);try{return L.apply(U,arguments)}catch(X){return console.info("WebGL SDF generation failed, falling back to JS",X),p.apply(x,arguments)}}function Y(ee,ne,P,se,re,Z,X,W,K,ge){re===void 0&&(re=Math.max(se[2]-se[0],se[3]-se[1])/2),Z===void 0&&(Z=1),W===void 0&&(W=0),K===void 0&&(K=0),ge===void 0&&(ge=0);try{return B.apply(U,arguments)}catch(Se){return console.info("WebGL SDF generation failed, falling back to JS",Se),m.apply(x,arguments)}}return e.forEachPathCommand=i,e.generate=Q,e.generateIntoCanvas=Y,e.javascript=x,e.pathToLineSegments=s,e.webgl=U,e.webglUtils=d,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}function P1e(){var t=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(n).forEach(function(ve,me){r[ve]=1<<me+1,i[r[ve]]=ve}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,c=r.S|r.WS|r.B|s|r.PDI|l,u=null;function f(){if(!u){u=new Map;var ve=function(We){if(n.hasOwnProperty(We)){var Xe=0;n[We].split(",").forEach(function(xt){var fe=xt.split("+"),ie=fe[0],Ae=fe[1];ie=parseInt(ie,36),Ae=Ae?parseInt(Ae,36):0,u.set(Xe+=ie,r[We]);for(var Je=0;Je<Ae;Je++)u.set(++Xe,r[We])})}};for(var me in n)ve(me)}}function h(ve){return f(),u.get(ve.codePointAt(0))||r.L}function d(ve){return i[h(ve)]}var p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function m(ve,me){var We=36,Xe=0,xt=new Map,fe=me&&new Map,ie;return ve.split(",").forEach(function Ae(Je){if(Je.indexOf("+")!==-1)for(var te=+Je;te--;)Ae(ie);else{ie=Je;var z=Je.split(">"),F=z[0],ae=z[1];F=String.fromCodePoint(Xe+=parseInt(F,We)),ae=String.fromCodePoint(Xe+=parseInt(ae,We)),xt.set(F,ae),me&&fe.set(ae,F)}}),{map:xt,reverseMap:fe}}var g,v,x;function y(){if(!g){var ve=m(p.pairs,!0),me=ve.map,We=ve.reverseMap;g=me,v=We,x=m(p.canonical,!1).map}}function A(ve){return y(),g.get(ve)||null}function T(ve){return y(),v.get(ve)||null}function w(ve){return y(),x.get(ve)||null}var M=r.L,C=r.R,S=r.EN,R=r.ES,O=r.ET,L=r.AN,B=r.CS,N=r.B,$=r.S,U=r.ON,Q=r.BN,Y=r.NSM,ee=r.AL,ne=r.LRO,P=r.RLO,se=r.LRE,re=r.RLE,Z=r.PDF,X=r.LRI,W=r.RLI,K=r.FSI,ge=r.PDI;function Se(ve,me){for(var We=125,Xe=new Uint32Array(ve.length),xt=0;xt<ve.length;xt++)Xe[xt]=h(ve[xt]);var fe=new Map;function ie(as,Zs){var Ii=Xe[as];Xe[as]=Zs,fe.set(Ii,fe.get(Ii)-1),Ii&a&&fe.set(a,fe.get(a)-1),fe.set(Zs,(fe.get(Zs)||0)+1),Zs&a&&fe.set(a,(fe.get(a)||0)+1)}for(var Ae=new Uint8Array(ve.length),Je=new Map,te=[],z=null,F=0;F<ve.length;F++)z||te.push(z={start:F,end:ve.length-1,level:me==="rtl"?1:me==="ltr"?0:Oh(F,!1)}),Xe[F]&N&&(z.end=F,z=null);for(var ae=re|se|P|ne|s|ge|Z|N,ye=function(as){return as+(as&1?1:2)},Le=function(as){return as+(as&1?2:1)},ke=0;ke<te.length;ke++){z=te[ke];var Ve=[{_level:z.level,_override:0,_isolate:0}],Ce=void 0,Ye=0,tt=0,it=0;fe.clear();for(var dt=z.start;dt<=z.end;dt++){var Ze=Xe[dt];if(Ce=Ve[Ve.length-1],fe.set(Ze,(fe.get(Ze)||0)+1),Ze&a&&fe.set(a,(fe.get(a)||0)+1),Ze&ae)if(Ze&(re|se)){Ae[dt]=Ce._level;var Be=(Ze===re?Le:ye)(Ce._level);Be<=We&&!Ye&&!tt?Ve.push({_level:Be,_override:0,_isolate:0}):Ye||tt++}else if(Ze&(P|ne)){Ae[dt]=Ce._level;var Ft=(Ze===P?Le:ye)(Ce._level);Ft<=We&&!Ye&&!tt?Ve.push({_level:Ft,_override:Ze&P?C:M,_isolate:0}):Ye||tt++}else if(Ze&s){Ze&K&&(Ze=Oh(dt+1,!0)===1?W:X),Ae[dt]=Ce._level,Ce._override&&ie(dt,Ce._override);var St=(Ze===W?Le:ye)(Ce._level);St<=We&&Ye===0&&tt===0?(it++,Ve.push({_level:St,_override:0,_isolate:1,_isolInitIndex:dt})):Ye++}else if(Ze&ge){if(Ye>0)Ye--;else if(it>0){for(tt=0;!Ve[Ve.length-1]._isolate;)Ve.pop();var st=Ve[Ve.length-1]._isolInitIndex;st!=null&&(Je.set(st,dt),Je.set(dt,st)),Ve.pop(),it--}Ce=Ve[Ve.length-1],Ae[dt]=Ce._level,Ce._override&&ie(dt,Ce._override)}else Ze&Z?(Ye===0&&(tt>0?tt--:!Ce._isolate&&Ve.length>1&&(Ve.pop(),Ce=Ve[Ve.length-1])),Ae[dt]=Ce._level):Ze&N&&(Ae[dt]=z.level);else Ae[dt]=Ce._level,Ce._override&&Ze!==Q&&ie(dt,Ce._override)}for(var It=[],Ht=null,zt=z.start;zt<=z.end;zt++){var $t=Xe[zt];if(!($t&l)){var Nn=Ae[zt],Tn=$t&s,Fn=$t===ge;Ht&&Nn===Ht._level?(Ht._end=zt,Ht._endsWithIsolInit=Tn):It.push(Ht={_start:zt,_end:zt,_level:Nn,_startsWithPDI:Fn,_endsWithIsolInit:Tn})}}for(var vr=[],ai=0;ai<It.length;ai++){var Ri=It[ai];if(!Ri._startsWithPDI||Ri._startsWithPDI&&!Je.has(Ri._start)){for(var Vr=[Ht=Ri],Pr=void 0;Ht&&Ht._endsWithIsolInit&&(Pr=Je.get(Ht._end))!=null;)for(var gn=ai+1;gn<It.length;gn++)if(It[gn]._start===Pr){Vr.push(Ht=It[gn]);break}for(var br=[],ss=0;ss<Vr.length;ss++)for(var pe=Vr[ss],Ee=pe._start;Ee<=pe._end;Ee++)br.push(Ee);for(var je=Ae[br[0]],ue=z.level,we=br[0]-1;we>=0;we--)if(!(Xe[we]&l)){ue=Ae[we];break}var Pe=br[br.length-1],Ge=Ae[Pe],Fe=z.level;if(!(Xe[Pe]&s)){for(var lt=Pe+1;lt<=z.end;lt++)if(!(Xe[lt]&l)){Fe=Ae[lt];break}}vr.push({_seqIndices:br,_sosType:Math.max(ue,je)%2?C:M,_eosType:Math.max(Fe,Ge)%2?C:M})}}for(var ot=0;ot<vr.length;ot++){var pt=vr[ot],Ke=pt._seqIndices,Vt=pt._sosType,Lt=pt._eosType,Pt=Ae[Ke[0]]&1?C:M;if(fe.get(Y))for(var qt=0;qt<Ke.length;qt++){var sn=Ke[qt];if(Xe[sn]&Y){for(var ln=Vt,vn=qt-1;vn>=0;vn--)if(!(Xe[Ke[vn]]&l)){ln=Xe[Ke[vn]];break}ie(sn,ln&(s|ge)?U:ln)}}if(fe.get(S))for(var jt=0;jt<Ke.length;jt++){var Dt=Ke[jt];if(Xe[Dt]&S)for(var Mn=jt-1;Mn>=-1;Mn--){var fn=Mn===-1?Vt:Xe[Ke[Mn]];if(fn&o){fn===ee&&ie(Dt,L);break}}}if(fe.get(ee))for(var yn=0;yn<Ke.length;yn++){var Jn=Ke[yn];Xe[Jn]&ee&&ie(Jn,C)}if(fe.get(R)||fe.get(B))for(var or=1;or<Ke.length-1;or++){var ar=Ke[or];if(Xe[ar]&(R|B)){for(var Bn=0,Rn=0,Zt=or-1;Zt>=0&&(Bn=Xe[Ke[Zt]],!!(Bn&l));Zt--);for(var En=or+1;En<Ke.length&&(Rn=Xe[Ke[En]],!!(Rn&l));En++);Bn===Rn&&(Xe[ar]===R?Bn===S:Bn&(S|L))&&ie(ar,Bn)}}if(fe.get(S))for(var wn=0;wn<Ke.length;wn++){var sr=Ke[wn];if(Xe[sr]&S){for(var li=wn-1;li>=0&&Xe[Ke[li]]&(O|l);li--)ie(Ke[li],S);for(wn++;wn<Ke.length&&Xe[Ke[wn]]&(O|l|S);wn++)Xe[Ke[wn]]!==S&&ie(Ke[wn],S)}}if(fe.get(O)||fe.get(R)||fe.get(B))for(var Ar=0;Ar<Ke.length;Ar++){var ci=Ke[Ar];if(Xe[ci]&(O|R|B)){ie(ci,U);for(var Es=Ar-1;Es>=0&&Xe[Ke[Es]]&l;Es--)ie(Ke[Es],U);for(var xo=Ar+1;xo<Ke.length&&Xe[Ke[xo]]&l;xo++)ie(Ke[xo],U)}}if(fe.get(S))for(var cn=0,an=Vt;cn<Ke.length;cn++){var de=Ke[cn],D=Xe[de];D&S?an===M&&ie(de,M):D&o&&(an=D)}if(fe.get(a)){var G=C|S|L,j=G|M,V=[];{for(var le=[],Ne=0;Ne<Ke.length;Ne++)if(Xe[Ke[Ne]]&a){var ze=ve[Ke[Ne]],Et=void 0;if(A(ze)!==null)if(le.length<63)le.push({char:ze,seqIndex:Ne});else break;else if((Et=T(ze))!==null)for(var ct=le.length-1;ct>=0;ct--){var ut=le[ct].char;if(ut===Et||ut===T(w(ze))||A(w(ut))===ze){V.push([le[ct].seqIndex,Ne]),le.length=ct;break}}}V.sort(function(as,Zs){return as[0]-Zs[0]})}for(var mt=0;mt<V.length;mt++){for(var ft=V[mt],vt=ft[0],Mt=ft[1],Nt=!1,kt=0,dn=vt+1;dn<Mt;dn++){var en=Ke[dn];if(Xe[en]&j){Nt=!0;var Xt=Xe[en]&G?C:M;if(Xt===Pt){kt=Xt;break}}}if(Nt&&!kt){kt=Vt;for(var In=vt-1;In>=0;In--){var Tr=Ke[In];if(Xe[Tr]&j){var tr=Xe[Tr]&G?C:M;tr!==Pt?kt=tr:kt=Pt;break}}}if(kt){if(Xe[Ke[vt]]=Xe[Ke[Mt]]=kt,kt!==Pt){for(var Kr=vt+1;Kr<Ke.length;Kr++)if(!(Xe[Ke[Kr]]&l)){h(ve[Ke[Kr]])&Y&&(Xe[Ke[Kr]]=kt);break}}if(kt!==Pt){for(var Ks=Mt+1;Ks<Ke.length;Ks++)if(!(Xe[Ke[Ks]]&l)){h(ve[Ke[Ks]])&Y&&(Xe[Ke[Ks]]=kt);break}}}}for(var Js=0;Js<Ke.length;Js++)if(Xe[Ke[Js]]&a){for(var Am=Js,Tm=Js,Eo=Vt,tf=Js-1;tf>=0;tf--)if(Xe[Ke[tf]]&l)Am=tf;else{Eo=Xe[Ke[tf]]&G?C:M;break}for(var nf=Lt,rf=Js+1;rf<Ke.length;rf++)if(Xe[Ke[rf]]&(a|l))Tm=rf;else{nf=Xe[Ke[rf]]&G?C:M;break}for(var Qs=Am;Qs<=Tm;Qs++)Xe[Ke[Qs]]=Eo===nf?Eo:Pt;Js=Tm}}}for(var os=z.start;os<=z.end;os++){var Nh=Ae[os],$a=Xe[os];if(Nh&1?$a&(M|S|L)&&Ae[os]++:$a&C?Ae[os]++:$a&(L|S)&&(Ae[os]+=2),$a&l&&(Ae[os]=os===0?z.level:Ae[os-1]),os===z.end||h(ve[os])&($|N))for(var Kc=os;Kc>=0&&h(ve[Kc])&c;Kc--)Ae[Kc]=z.level}}return{levels:Ae,paragraphs:te};function Oh(as,Zs){for(var Ii=as;Ii<ve.length;Ii++){var Pi=Xe[Ii];if(Pi&(C|ee))return 1;if(Pi&(N|M)||Zs&&Pi===ge)return 0;if(Pi&s){var zo=Zg(Ii);Ii=zo===-1?ve.length:zo}}return 0}function Zg(as){for(var Zs=1,Ii=as+1;Ii<ve.length;Ii++){var Pi=Xe[Ii];if(Pi&N)break;if(Pi&ge){if(--Zs===0)return Ii}else Pi&s&&Zs++}return-1}}var xe="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Me;function he(){if(!Me){var ve=m(xe,!0),me=ve.map,We=ve.reverseMap;We.forEach(function(Xe,xt){me.set(xt,Xe)}),Me=me}}function Oe(ve){return he(),Me.get(ve)||null}function be(ve,me,We,Xe){var xt=ve.length;We=Math.max(0,We==null?0:+We),Xe=Math.min(xt-1,Xe==null?xt-1:+Xe);for(var fe=new Map,ie=We;ie<=Xe;ie++)if(me[ie]&1){var Ae=Oe(ve[ie]);Ae!==null&&fe.set(ie,Ae)}return fe}function Te(ve,me,We,Xe){var xt=ve.length;We=Math.max(0,We==null?0:+We),Xe=Math.min(xt-1,Xe==null?xt-1:+Xe);var fe=[];return me.paragraphs.forEach(function(ie){var Ae=Math.max(We,ie.start),Je=Math.min(Xe,ie.end);if(Ae<Je){for(var te=me.levels.slice(Ae,Je+1),z=Je;z>=Ae&&h(ve[z])&c;z--)te[z]=ie.level;for(var F=ie.level,ae=1/0,ye=0;ye<te.length;ye++){var Le=te[ye];Le>F&&(F=Le),Le<ae&&(ae=Le|1)}for(var ke=F;ke>=ae;ke--)for(var Ve=0;Ve<te.length;Ve++)if(te[Ve]>=ke){for(var Ce=Ve;Ve+1<te.length&&te[Ve+1]>=ke;)Ve++;Ve>Ce&&fe.push([Ce+Ae,Ve+Ae])}}}),fe}function Re(ve,me,We,Xe){var xt=$e(ve,me,We,Xe),fe=[].concat(ve);return xt.forEach(function(ie,Ae){fe[Ae]=(me.levels[ie]&1?Oe(ve[ie]):null)||ve[ie]}),fe.join("")}function $e(ve,me,We,Xe){for(var xt=Te(ve,me,We,Xe),fe=[],ie=0;ie<ve.length;ie++)fe[ie]=ie;return xt.forEach(function(Ae){for(var Je=Ae[0],te=Ae[1],z=fe.slice(Je,te+1),F=z.length;F--;)fe[te-F]=z[F]}),fe}return e.closingToOpeningBracket=T,e.getBidiCharType=h,e.getBidiCharTypeName=d,e.getCanonicalBracket=w,e.getEmbeddingLevels=Se,e.getMirroredCharacter=Oe,e.getMirroredCharactersMap=be,e.getReorderSegments=Te,e.getReorderedIndices=$e,e.getReorderedString=Re,e.openingToClosingBracket=A,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}const pH=/\bvoid\s+main\s*\(\s*\)\s*{/g;function VS(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(r,i){let s=Dn[i];return s?VS(s):r}return t.replace(e,n)}const ws=[];for(let t=0;t<256;t++)ws[t]=(t<16?"0":"")+t.toString(16);function L1e(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ws[t&255]+ws[t>>8&255]+ws[t>>16&255]+ws[t>>24&255]+"-"+ws[e&255]+ws[e>>8&255]+"-"+ws[e>>16&15|64]+ws[e>>24&255]+"-"+ws[n&63|128]+ws[n>>8&255]+"-"+ws[n>>16&255]+ws[n>>24&255]+ws[r&255]+ws[r>>8&255]+ws[r>>16&255]+ws[r>>24&255]).toUpperCase()}const Cf=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let r=arguments[e];if(r)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},N1e=Date.now(),VI=new WeakMap,WI=new Map;let O1e=1e10;function WS(t,e){const n=F1e(e);let r=VI.get(t);if(r||VI.set(t,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,s=function(c,u){t.onBeforeCompile.call(this,c,u);const f=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let h=WI[f];if(!h){const d=D1e(this,c,e,n);h=WI[f]=d}c.vertexShader=h.vertexShader,c.fragmentShader=h.fragmentShader,Cf(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-N1e}}),this[i]&&this[i](c)},o=function(){return a(e.chained?t:t.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:t}),Object.defineProperty(u,"id",{value:O1e++}),u.uuid=L1e(),u.uniforms=Cf({},c.uniforms,e.uniforms),u.defines=Cf({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",u.extensions=Cf({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return s},set(c){this[i]=c}},copy:{writable:!0,configurable:!0,value:function(c){return t.copy.call(this,c),!t.isShaderMaterial&&!t.isDerivedMaterial&&(Cf(this.extensions,c.extensions),Cf(this.defines,c.defines),Cf(this.uniforms,Gu.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new t.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=WS(t.isDerivedMaterial?t.getDepthMaterial():new tm({depthPacking:p5}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=WS(t.isDerivedMaterial?t.getDistanceMaterial():new GE,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),t.dispose.call(this)}}};return r[n]=o,new o}function D1e(t,{vertexShader:e,fragmentShader:n},r,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:f,fragmentColorTransform:h,customRewriter:d,timeUniform:p}=r;if(s=s||"",o=o||"",a=a||"",c=c||"",u=u||"",f=f||"",(l||d)&&(e=VS(e)),(h||d)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=VS(n)),d){let m=d({vertexShader:e,fragmentShader:n});e=m.vertexShader,n=m.fragmentShader}if(h){let m=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,g=>(m.push(g),"")),f=`${h}
${m.join(`
`)}
${f}`}if(p){const m=`
uniform float ${p};
`;s=m+s,c=m+c}return l&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(m,g,v,x)=>/\battribute\s+vec[23]\s+$/.test(x.substr(0,v))?g:`troika_${g}_${i}`),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=jI(e,i,s,o,a),n=jI(n,i,c,u,f),{vertexShader:e,fragmentShader:n}}function jI(t,e,n,r,i){return(r||i||n)&&(t=t.replace(pH,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),t}function B1e(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let k1e=0;const $I=new Map;function F1e(t){const e=JSON.stringify(t,B1e);let n=$I.get(e);return n==null&&$I.set(e,n=++k1e),n}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function U1e(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var f=s.readUint(o,a);a+=4,c.push(e._readFont(o,f))}return c}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,a=s;o.readFixed(i,s),s+=4;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],u={_data:i,_offset:a},f={},h=0;h<l;h++){var d=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var p=o.readUint(i,s);s+=4;var m=o.readUint(i,s);s+=4,f[d]={offset:p,length:m}}for(h=0;h<c.length;h++){var g=c[h];f[g]&&(u[g.trim()]=e[g.trim()].parse(i,f[g].offset,f[g].length,u))}return u},_tabOffset:function(i,s,o){for(var a=e._bin,l=a.readUshort(i,o+4),c=o+12,u=0;u<l;u++){var f=a.readASCII(i,c,4);c+=4,a.readUint(i,c),c+=4;var h=a.readUint(i,c);if(c+=4,a.readUint(i,c),c+=4,f==s)return h}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(i,s+2*l));return a},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},readUnicode:function(i,s,o){for(var a="",l=0;l<o;l++){var c=i[s++]<<8|i[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var a=e._bin._tdec;return a&&s==0&&o==i.length?a.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(i[s+l]);return a},readASCIIArray:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(i[s+l]));return a},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,a,l){var c=e._bin,u={},f=s;c.readFixed(i,s),s+=4;var h=c.readUshort(i,s);s+=2;var d=c.readUshort(i,s);s+=2;var p=c.readUshort(i,s);return s+=2,u.scriptList=e._lctf.readScriptList(i,f+h),u.featureList=e._lctf.readFeatureList(i,f+d),u.lookupList=e._lctf.readLookupList(i,f+p,l),u},e._lctf.readLookupList=function(i,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(i,s);s+=2;for(var f=0;f<u;f++){var h=a.readUshort(i,s);s+=2;var d=e._lctf.readLookupTable(i,l+h,o);c.push(d)}return c},e._lctf.readLookupTable=function(i,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(i,s),s+=2,c.flag=a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;for(var f=c.ltype,h=0;h<u;h++){var d=a.readUshort(i,s);s+=2;var p=o(i,f,l+d,c);c.tabs.push(p)}return c},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)i>>>o&1&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,a=[],l=o.readUshort(i,s);if(s+=2,l==1){var c=o.readUshort(i,s);s+=2;var u=o.readUshort(i,s);s+=2;for(var f=0;f<u;f++)a.push(c+f),a.push(c+f),a.push(o.readUshort(i,s)),s+=2}if(l==2){var h=o.readUshort(i,s);for(s+=2,f=0;f<h;f++)a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2}return a},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var a=i[o],l=i[o+1];if(i[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,a={};a.fmt=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(i,s,l)),a.fmt==2&&(a.tab=o.readUshorts(i,s,3*l)),a},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(i,s,4);s+=4;var h=o.readUshort(i,s);s+=2;var d=e._lctf.readFeatureTable(i,a+h);d.tag=f.trim(),l.push(d)}return l},e._lctf.readFeatureTable=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(i,s);s+=2,l.tab=[];for(var f=0;f<u;f++)l.tab.push(o.readUshort(i,s+2*f));return l},e._lctf.readScriptList=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=o.readASCII(i,s,4);s+=4;var h=o.readUshort(i,s);s+=2,l[f.trim()]=e._lctf.readScriptTable(i,a+h)}return l},e._lctf.readScriptTable=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2,c>0&&(l.default=e._lctf.readLangSysTable(i,a+c));var u=o.readUshort(i,s);s+=2;for(var f=0;f<u;f++){var h=o.readASCII(i,s,4);s+=4;var d=o.readUshort(i,s);s+=2,l[h.trim()]=e._lctf.readLangSysTable(i,a+d)}return l},e._lctf.readLangSysTable=function(i,s){var o=e._bin,a={};o.readUshort(i,s),s+=2,a.reqFeature=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.features=o.readUshorts(i,s,l),a},e.CFF={},e.CFF.parse=function(i,s,o){var a=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var l=[];s=e.CFF.readIndex(i,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(i,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var f=[];s=e.CFF.readIndex(i,s,f);var h=[];for(u=0;u<f.length-1;u++)h.push(e.CFF.readDict(i,s+f[u],s+f[u+1]));s+=f[f.length-1];var d=h[0],p=[];s=e.CFF.readIndex(i,s,p);var m=[];for(u=0;u<p.length-1;u++)m.push(a.readASCII(i,s+p[u],p[u+1]-p[u]));if(s+=p[p.length-1],e.CFF.readSubrs(i,s,d),d.CharStrings){s=d.CharStrings,p=[],s=e.CFF.readIndex(i,s,p);var g=[];for(u=0;u<p.length-1;u++)g.push(a.readBytes(i,s+p[u],p[u+1]-p[u]));d.CharStrings=g}if(d.ROS){s=d.FDArray;var v=[];for(s=e.CFF.readIndex(i,s,v),d.FDArray=[],u=0;u<v.length-1;u++){var x=e.CFF.readDict(i,s+v[u],s+v[u+1]);e.CFF._readFDict(i,x,m),d.FDArray.push(x)}s+=v[v.length-1],s=d.FDSelect,d.FDSelect=[];var y=i[s];if(s++,y!=3)throw y;var A=a.readUshort(i,s);for(s+=2,u=0;u<A+1;u++)d.FDSelect.push(a.readUshort(i,s),i[s+2]),s+=3}return d.Encoding&&(d.Encoding=e.CFF.readEncoding(i,d.Encoding,d.CharStrings.length)),d.charset&&(d.charset=e.CFF.readCharset(i,d.charset,d.CharStrings.length)),e.CFF._readFDict(i,d,m),d},e.CFF._readFDict=function(i,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(i,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(i,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(i,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var f=0;f<l.length-1;f++)o.Subrs.push(a.readBytes(i,s+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var a=[".notdef"],l=i[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=i[s];s++;for(var u=0;u<c;u++)a.push(i[s+u]);return a},e.CFF.readCharset=function(i,s,o){var a=e._bin,l=[".notdef"],c=i[s];if(s++,c==0)for(var u=0;u<o;u++){var f=a.readUshort(i,s);s+=2,l.push(f)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){f=a.readUshort(i,s),s+=2;var h=0;for(c==1?(h=i[s],s++):(h=a.readUshort(i,s),s+=2),u=0;u<=h;u++)l.push(f),f++}}return l},e.CFF.readIndex=function(i,s,o){var a=e._bin,l=a.readUshort(i,s)+1,c=i[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(i[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(i,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(i,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(i,s,o){var a=e._bin,l=i[s],c=i[s+1];i[s+2],i[s+3],i[s+4];var u=1,f=null,h=null;l<=20&&(f=l,u=1),l==12&&(f=100*l+c,u=2),21<=l&&l<=27&&(f=l,u=1),l==28&&(h=a.readShort(i,s+1),u=3),29<=l&&l<=31&&(f=l,u=1),32<=l&&l<=246&&(h=l-139,u=1),247<=l&&l<=250&&(h=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(h=256*-(l-251)-c-108,u=2),l==255&&(h=a.readInt(i,s+1)/65535,u=5),o.val=h??"o"+f,o.size=u},e.CFF.readCharString=function(i,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var h=1,d=null,p=null;u<=20&&(d=u,h=1),u==12&&(d=100*u+f,h=2),u!=19&&u!=20||(d=u,h=2),21<=u&&u<=27&&(d=u,h=1),u==28&&(p=l.readShort(i,s+1),h=3),29<=u&&u<=31&&(d=u,h=1),32<=u&&u<=246&&(p=u-139,h=1),247<=u&&u<=250&&(p=256*(u-247)+f+108,h=2),251<=u&&u<=254&&(p=256*-(u-251)-f-108,h=2),u==255&&(p=l.readInt(i,s+1)/65535,h=5),c.push(p??"o"+d),s+=h}return c},e.CFF.readDict=function(i,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var h=1,d=null,p=null;if(u==28&&(p=a.readShort(i,s+1),h=3),u==29&&(p=a.readInt(i,s+1),h=5),32<=u&&u<=246&&(p=u-139,h=1),247<=u&&u<=250&&(p=256*(u-247)+f+108,h=2),251<=u&&u<=254&&(p=256*-(u-251)-f-108,h=2),u==255)throw p=a.readInt(i,s+1)/65535,h=5,"unknown number";if(u==30){var m=[];for(h=1;;){var g=i[s+h];h++;var v=g>>4,x=15&g;if(v!=15&&m.push(v),x!=15&&m.push(x),x==15)break}for(var y="",A=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],T=0;T<m.length;T++)y+=A[m[T]];p=parseFloat(y)}u<=21&&(d=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],h=1,u==12&&(d=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],h=2)),d!=null?(l[d]=c.length==1?c[0]:c,c=[]):c.push(p),s+=h}return l},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2;var u=[];l.tables=[];for(var f=0;f<c;f++){var h=a.readUshort(i,s);s+=2;var d=a.readUshort(i,s);s+=2;var p=a.readUint(i,s);s+=4;var m="p"+h+"e"+d,g=u.indexOf(p);if(g==-1){var v;g=l.tables.length,u.push(p);var x=a.readUshort(i,p);x==0?v=e.cmap.parse0(i,p):x==4?v=e.cmap.parse4(i,p):x==6?v=e.cmap.parse6(i,p):x==12?v=e.cmap.parse12(i,p):console.debug("unknown format: "+x,h,d,p),l.tables.push(v)}if(l[m]!=null)throw"multiple tables for one platform+encoding";l[m]=g}return l},e.cmap.parse0=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(i[s+c]);return a},e.cmap.parse4=function(i,s){var o=e._bin,a=s,l={};l.format=o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2;var f=u/2;l.searchRange=o.readUshort(i,s),s+=2,l.entrySelector=o.readUshort(i,s),s+=2,l.rangeShift=o.readUshort(i,s),s+=2,l.endCount=o.readUshorts(i,s,f),s+=2*f,s+=2,l.startCount=o.readUshorts(i,s,f),s+=2*f,l.idDelta=[];for(var h=0;h<f;h++)l.idDelta.push(o.readShort(i,s)),s+=2;for(l.idRangeOffset=o.readUshorts(i,s,f),s+=2*f,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(i,s)),s+=2;return l},e.cmap.parse6=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,a.firstCode=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(i,s)),s+=2;return a},e.cmap.parse12=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var l=o.readUint(i,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,f=o.readUint(i,u+0),h=o.readUint(i,u+4),d=o.readUint(i,u+8);a.groups.push([f,h,d])}return a},e.glyf={},e.glyf.parse=function(i,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(i,s){var o=e._bin,a=i._data,l=e._tabOffset(a,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var f=o.readUshort(a,l);if(l+=2,a.length-l<f)return null;c.instructions=o.readBytes(a,l,f),l+=f;var h=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<h;u++){var d=a[l];if(l++,c.flags.push(d),(8&d)!=0){var p=a[l];l++;for(var m=0;m<p;m++)c.flags.push(d),u++}}for(c.xs=[],u=0;u<h;u++){var g=(2&c.flags[u])!=0,v=(16&c.flags[u])!=0;g?(c.xs.push(v?a[l]:-a[l]),l++):v?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<h;u++)g=(4&c.flags[u])!=0,v=(32&c.flags[u])!=0,g?(c.ys.push(v?a[l]:-a[l]),l++):v?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var x=0,y=0;for(u=0;u<h;u++)x+=c.xs[u],y+=c.ys[u],c.xs[u]=x,c.ys[u]=y}else{var A;c.parts=[];do{A=o.readUshort(a,l),l+=2;var T={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(T),T.glyphIndex=o.readUshort(a,l),l+=2,1&A){var w=o.readShort(a,l);l+=2;var M=o.readShort(a,l);l+=2}else w=o.readInt8(a,l),l++,M=o.readInt8(a,l),l++;2&A?(T.m.tx=w,T.m.ty=M):(T.p1=w,T.p2=M),8&A?(T.m.a=T.m.d=o.readF2dot14(a,l),l+=2):64&A?(T.m.a=o.readF2dot14(a,l),l+=2,T.m.d=o.readF2dot14(a,l),l+=2):128&A&&(T.m.a=o.readF2dot14(a,l),l+=2,T.m.b=o.readF2dot14(a,l),l+=2,T.m.c=o.readF2dot14(a,l),l+=2,T.m.d=o.readF2dot14(a,l),l+=2)}while(32&A);if(256&A){var C=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<C;u++)c.instr.push(a[l]),l++}}return c},e.GDEF={},e.GDEF.parse=function(i,s,o,a){var l=s;s+=4;var c=e._bin.readUshort(i,s);return{glyphClassDef:c===0?null:e._lctf.readClassDef(i,l+c)}},e.GPOS={},e.GPOS.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var f=l.readUshort(i,o);o+=2,u.coverage=e._lctf.readCoverage(i,f+c)}if(s==1&&u.fmt==1){var h=l.readUshort(i,o);o+=2,h!=0&&(u.pos=e.GPOS.readValueRecord(i,o,h))}else if(s==2&&u.fmt>=1&&u.fmt<=2){h=l.readUshort(i,o),o+=2;var d=l.readUshort(i,o);o+=2;var p=e._lctf.numOfOnes(h),m=e._lctf.numOfOnes(d);if(u.fmt==1){u.pairsets=[];var g=l.readUshort(i,o);o+=2;for(var v=0;v<g;v++){var x=c+l.readUshort(i,o);o+=2;var y=l.readUshort(i,x);x+=2;for(var A=[],T=0;T<y;T++){var w=l.readUshort(i,x);x+=2,h!=0&&(L=e.GPOS.readValueRecord(i,x,h),x+=2*p),d!=0&&(B=e.GPOS.readValueRecord(i,x,d),x+=2*m),A.push({gid2:w,val1:L,val2:B})}u.pairsets.push(A)}}if(u.fmt==2){var M=l.readUshort(i,o);o+=2;var C=l.readUshort(i,o);o+=2;var S=l.readUshort(i,o);o+=2;var R=l.readUshort(i,o);for(o+=2,u.classDef1=e._lctf.readClassDef(i,c+M),u.classDef2=e._lctf.readClassDef(i,c+C),u.matrix=[],v=0;v<S;v++){var O=[];for(T=0;T<R;T++){var L=null,B=null;h!=0&&(L=e.GPOS.readValueRecord(i,o,h),o+=2*p),d!=0&&(B=e.GPOS.readValueRecord(i,o,d),o+=2*m),O.push({val1:L,val2:B})}u.matrix.push(O)}}}else if(s==4&&u.fmt==1)u.markCoverage=e._lctf.readCoverage(i,l.readUshort(i,o)+c),u.baseCoverage=e._lctf.readCoverage(i,l.readUshort(i,o+2)+c),u.markClassCount=l.readUshort(i,o+4),u.markArray=e.GPOS.readMarkArray(i,l.readUshort(i,o+6)+c),u.baseArray=e.GPOS.readBaseArray(i,l.readUshort(i,o+8)+c,u.markClassCount);else if(s==6&&u.fmt==1)u.mark1Coverage=e._lctf.readCoverage(i,l.readUshort(i,o)+c),u.mark2Coverage=e._lctf.readCoverage(i,l.readUshort(i,o+2)+c),u.markClassCount=l.readUshort(i,o+4),u.mark1Array=e.GPOS.readMarkArray(i,l.readUshort(i,o+6)+c),u.mark2Array=e.GPOS.readBaseArray(i,l.readUshort(i,o+8)+c,u.markClassCount);else{if(s==9&&u.fmt==1){var N=l.readUshort(i,o);o+=2;var $=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=N;else if(a.ltype!=N)throw"invalid extension substitution";return e.GPOS.subt(i,a.ltype,c+$)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(i,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(i,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(i,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(i,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(i,s):0),s+=8&o?2:0,l},e.GPOS.readBaseArray=function(i,s,o){var a=e._bin,l=[],c=s,u=a.readUshort(i,s);s+=2;for(var f=0;f<u;f++){for(var h=[],d=0;d<o;d++)h.push(e.GPOS.readAnchorRecord(i,c+a.readUshort(i,s))),s+=2;l.push(h)}return l},e.GPOS.readMarkArray=function(i,s){var o=e._bin,a=[],l=s,c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=e.GPOS.readAnchorRecord(i,o.readUshort(i,s+2)+l);f.markClass=o.readUshort(i,s),a.push(f),s+=4}return a},e.GPOS.readAnchorRecord=function(i,s){var o=e._bin,a={};return a.fmt=o.readUshort(i,s),a.x=o.readShort(i,s+2),a.y=o.readShort(i,s+4),a},e.GSUB={},e.GSUB.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(i,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var f=l.readUshort(i,o);o+=2,u.coverage=e._lctf.readCoverage(i,c+f)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(i,o),o+=2;else if(u.fmt==2){var h=l.readUshort(i,o);o+=2,u.newg=l.readUshorts(i,o,h),o+=2*u.newg.length}}else if(s==2&&u.fmt==1){h=l.readUshort(i,o),o+=2,u.seqs=[];for(var d=0;d<h;d++){var p=l.readUshort(i,o)+c;o+=2;var m=l.readUshort(i,p);u.seqs.push(l.readUshorts(i,p+2,m))}}else if(s==4)for(u.vals=[],h=l.readUshort(i,o),o+=2,d=0;d<h;d++){var g=l.readUshort(i,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(i,c+g))}else if(s==5&&u.fmt==2){if(u.fmt==2){var v=l.readUshort(i,o);o+=2,u.cDef=e._lctf.readClassDef(i,c+v),u.scset=[];var x=l.readUshort(i,o);for(o+=2,d=0;d<x;d++){var y=l.readUshort(i,o);o+=2,u.scset.push(y==0?null:e.GSUB.readSubClassSet(i,c+y))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(d=0;d<3;d++){h=l.readUshort(i,o),o+=2;for(var A=[],T=0;T<h;T++)A.push(e._lctf.readCoverage(i,c+l.readUshort(i,o+2*T)));o+=2*h,d==0&&(u.backCvg=A),d==1&&(u.inptCvg=A),d==2&&(u.ahedCvg=A)}h=l.readUshort(i,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(i,o,h)}}else{if(s==7&&u.fmt==1){var w=l.readUshort(i,o);o+=2;var M=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=w;else if(a.ltype!=w)throw"invalid extension substitution";return e.GSUB.subt(i,a.ltype,c+M)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,a=s,l=[],c=o(i,s);s+=2;for(var u=0;u<c;u++){var f=o(i,s);s+=2,l.push(e.GSUB.readSubClassRule(i,a+f))}return l},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,a={},l=o(i,s),c=o(i,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(i,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,c),a},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(i,s),a(i,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readChainSubClassRule(i,a+f))}return l},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(i,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(i,s,u),s+=2*a[l[c]].length}return u=o.readUshort(i,s),s+=2,a.subst=o.readUshorts(i,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readLigature(i,a+f))}return l},e.GSUB.readLigature=function(i,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(i,s)),s+=2;return a},e.head={},e.head.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.fontRevision=a.readFixed(i,s),s+=4,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4,l.flags=a.readUshort(i,s),s+=2,l.unitsPerEm=a.readUshort(i,s),s+=2,l.created=a.readUint64(i,s),s+=8,l.modified=a.readUint64(i,s),s+=8,l.xMin=a.readShort(i,s),s+=2,l.yMin=a.readShort(i,s),s+=2,l.xMax=a.readShort(i,s),s+=2,l.yMax=a.readShort(i,s),s+=2,l.macStyle=a.readUshort(i,s),s+=2,l.lowestRecPPEM=a.readUshort(i,s),s+=2,l.fontDirectionHint=a.readShort(i,s),s+=2,l.indexToLocFormat=a.readShort(i,s),s+=2,l.glyphDataFormat=a.readShort(i,s),s+=2,l},e.hhea={},e.hhea.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.ascender=a.readShort(i,s),s+=2,l.descender=a.readShort(i,s),s+=2,l.lineGap=a.readShort(i,s),s+=2,l.advanceWidthMax=a.readUshort(i,s),s+=2,l.minLeftSideBearing=a.readShort(i,s),s+=2,l.minRightSideBearing=a.readShort(i,s),s+=2,l.xMaxExtent=a.readShort(i,s),s+=2,l.caretSlopeRise=a.readShort(i,s),s+=2,l.caretSlopeRun=a.readShort(i,s),s+=2,l.caretOffset=a.readShort(i,s),s+=2,s+=8,l.metricDataFormat=a.readShort(i,s),s+=2,l.numberOfHMetrics=a.readUshort(i,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(i,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,f=0,h=0;h<a.maxp.numGlyphs;h++)h<a.hhea.numberOfHMetrics&&(u=l.readUshort(i,s),s+=2,f=l.readShort(i,s),s+=2),c.aWidth.push(u),c.lsBearing.push(f);return c},e.kern={},e.kern.parse=function(i,s,o,a){var l=e._bin,c=l.readUshort(i,s);if(s+=2,c==1)return e.kern.parseV1(i,s-2,o,a);var u=l.readUshort(i,s);s+=2;for(var f={glyph1:[],rval:[]},h=0;h<u;h++){s+=2,o=l.readUshort(i,s),s+=2;var d=l.readUshort(i,s);s+=2;var p=d>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;s=e.kern.readFormat0(i,s,f)}return f},e.kern.parseV1=function(i,s,o,a){var l=e._bin;l.readFixed(i,s),s+=4;var c=l.readUint(i,s);s+=4;for(var u={glyph1:[],rval:[]},f=0;f<c;f++){l.readUint(i,s),s+=4;var h=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2;var d=h>>>8;if((d&=15)!=0)throw"unknown kern table format: "+d;s=e.kern.readFormat0(i,s,u)}return u},e.kern.readFormat0=function(i,s,o){var a=e._bin,l=-1,c=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var u=0;u<c;u++){var f=a.readUshort(i,s);s+=2;var h=a.readUshort(i,s);s+=2;var d=a.readShort(i,s);s+=2,f!=l&&(o.glyph1.push(f),o.rval.push({glyph2:[],vals:[]}));var p=o.rval[o.rval.length-1];p.glyph2.push(h),p.vals.push(d),l=f}return s},e.loca={},e.loca.parse=function(i,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,f=a.maxp.numGlyphs+1;if(u==0)for(var h=0;h<f;h++)c.push(l.readUshort(i,s+(h<<1))<<1);if(u==1)for(h=0;h<f;h++)c.push(l.readUint(i,s+(h<<2)));return c},e.maxp={},e.maxp.parse=function(i,s,o){var a=e._bin,l={},c=a.readUint(i,s);return s+=4,l.numGlyphs=a.readUshort(i,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(i,s),s+=2,l.maxContours=a.readUshort(i,s),s+=2,l.maxCompositePoints=a.readUshort(i,s),s+=2,l.maxCompositeContours=a.readUshort(i,s),s+=2,l.maxZones=a.readUshort(i,s),s+=2,l.maxTwilightPoints=a.readUshort(i,s),s+=2,l.maxStorage=a.readUshort(i,s),s+=2,l.maxFunctionDefs=a.readUshort(i,s),s+=2,l.maxInstructionDefs=a.readUshort(i,s),s+=2,l.maxStackElements=a.readUshort(i,s),s+=2,l.maxSizeOfInstructions=a.readUshort(i,s),s+=2,l.maxComponentElements=a.readUshort(i,s),s+=2,l.maxComponentDepth=a.readUshort(i,s),s+=2),l},e.name={},e.name.parse=function(i,s,o){var a=e._bin,l={};a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2,a.readUshort(i,s);for(var u,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=s+=2,d=0;d<c;d++){var p=a.readUshort(i,s);s+=2;var m=a.readUshort(i,s);s+=2;var g=a.readUshort(i,s);s+=2;var v=a.readUshort(i,s);s+=2;var x=a.readUshort(i,s);s+=2;var y=a.readUshort(i,s);s+=2;var A,T=f[v],w=h+12*c+y;if(p==0)A=a.readUnicode(i,w,x/2);else if(p==3&&m==0)A=a.readUnicode(i,w,x/2);else if(m==0)A=a.readASCII(i,w,x);else if(m==1)A=a.readUnicode(i,w,x/2);else if(m==3)A=a.readUnicode(i,w,x/2);else{if(p!=1)throw"unknown encoding "+m+", platformID: "+p;A=a.readASCII(i,w,x),console.debug("reading unknown MAC encoding "+m+" as ASCII")}var M="p"+p+","+g.toString(16);l[M]==null&&(l[M]={}),l[M][T!==void 0?T:v]=A,l[M]._lang=g}for(var C in l)if(l[C].postScriptName!=null&&l[C]._lang==1033)return l[C];for(var C in l)if(l[C].postScriptName!=null&&l[C]._lang==0)return l[C];for(var C in l)if(l[C].postScriptName!=null&&l[C]._lang==3084)return l[C];for(var C in l)if(l[C].postScriptName!=null)return l[C];for(var C in l){u=C;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var a=e._bin.readUshort(i,s);s+=2;var l={};if(a==0)e["OS/2"].version0(i,s,l);else if(a==1)e["OS/2"].version1(i,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(i,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(i,s,l)}return l},e["OS/2"].version0=function(i,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(i,s),s+=2,o.usWeightClass=a.readUshort(i,s),s+=2,o.usWidthClass=a.readUshort(i,s),s+=2,o.fsType=a.readUshort(i,s),s+=2,o.ySubscriptXSize=a.readShort(i,s),s+=2,o.ySubscriptYSize=a.readShort(i,s),s+=2,o.ySubscriptXOffset=a.readShort(i,s),s+=2,o.ySubscriptYOffset=a.readShort(i,s),s+=2,o.ySuperscriptXSize=a.readShort(i,s),s+=2,o.ySuperscriptYSize=a.readShort(i,s),s+=2,o.ySuperscriptXOffset=a.readShort(i,s),s+=2,o.ySuperscriptYOffset=a.readShort(i,s),s+=2,o.yStrikeoutSize=a.readShort(i,s),s+=2,o.yStrikeoutPosition=a.readShort(i,s),s+=2,o.sFamilyClass=a.readShort(i,s),s+=2,o.panose=a.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=a.readUint(i,s),s+=4,o.ulUnicodeRange2=a.readUint(i,s),s+=4,o.ulUnicodeRange3=a.readUint(i,s),s+=4,o.ulUnicodeRange4=a.readUint(i,s),s+=4,o.achVendID=[a.readInt8(i,s),a.readInt8(i,s+1),a.readInt8(i,s+2),a.readInt8(i,s+3)],s+=4,o.fsSelection=a.readUshort(i,s),s+=2,o.usFirstCharIndex=a.readUshort(i,s),s+=2,o.usLastCharIndex=a.readUshort(i,s),s+=2,o.sTypoAscender=a.readShort(i,s),s+=2,o.sTypoDescender=a.readShort(i,s),s+=2,o.sTypoLineGap=a.readShort(i,s),s+=2,o.usWinAscent=a.readUshort(i,s),s+=2,o.usWinDescent=a.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var a=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=a.readUint(i,s),s+=4,o.ulCodePageRange2=a.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var a=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=a.readShort(i,s),s+=2,o.sCapHeight=a.readShort(i,s),s+=2,o.usDefault=a.readUshort(i,s),s+=2,o.usBreak=a.readUshort(i,s),s+=2,o.usMaxContext=a.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var a=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=a.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var a=e._bin,l={};return l.version=a.readFixed(i,s),s+=4,l.italicAngle=a.readFixed(i,s),s+=4,l.underlinePosition=a.readShort(i,s),s+=2,l.underlineThickness=a.readShort(i,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var f=l.groups[u];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var a=i.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),i.SVG.entries[s]=a),a)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},c=i.CFF,u=i.CFF.Private;if(c.ROS){for(var f=0;c.FDSelect[f+2]<=s;)f+=2;u=c.FDArray[c.FDSelect[f+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],l,c,u,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var a=s.glyf[i];a==null&&(a=s.glyf[i]=e.glyf._parseGlyf(s,i)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var a=o==0?0:i.endPts[o-1]+1,l=i.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,f=c==l?a:c+1,h=1&i.flags[c],d=1&i.flags[u],p=1&i.flags[f],m=i.xs[c],g=i.ys[c];if(c==a)if(h){if(!d){e.U.P.moveTo(s,m,g);continue}e.U.P.moveTo(s,i.xs[u],i.ys[u])}else d?e.U.P.moveTo(s,i.xs[u],i.ys[u]):e.U.P.moveTo(s,(i.xs[u]+m)/2,(i.ys[u]+g)/2);h?d&&e.U.P.lineTo(s,m,g):p?e.U.P.qcurveTo(s,m,g,i.xs[f],i.ys[f]):e.U.P.qcurveTo(s,m,g,(m+i.xs[f])/2,(g+i.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var a=0;a<i.parts.length;a++){var l={cmds:[],crds:[]},c=i.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,f=0;f<l.crds.length;f+=2){var h=l.crds[f],d=l.crds[f+1];o.crds.push(h*u.a+d*u.b+u.tx),o.crds.push(h*u.c+d*u.d+u.ty)}for(f=0;f<l.cmds.length;f++)o.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U._applySubs=function(i,s,o,a){for(var l=i.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,f=o.tabs[c];if(!f.coverage||(u=e._lctf.coverageIndex(f.coverage,i[s]))!=-1){if(o.ltype==1)i[s],f.fmt==1?i[s]=i[s]+f.delta:i[s]=f.newg[u];else if(o.ltype==4)for(var h=f.vals[u],d=0;d<h.length;d++){var p=h[d],m=p.chain.length;if(!(m>l)){for(var g=!0,v=0,x=0;x<m;x++){for(;i[s+v+(1+x)]==-1;)v++;p.chain[x]!=i[s+v+(1+x)]&&(g=!1)}if(g){for(i[s]=p.nglyph,x=0;x<m+v;x++)i[s+x+1]=-1;break}}}else if(o.ltype==5&&f.fmt==2)for(var y=e._lctf.getInterval(f.cDef,i[s]),A=f.cDef[y+2],T=f.scset[A],w=0;w<T.length;w++){var M=T[w],C=M.input;if(!(C.length>l)){for(g=!0,x=0;x<C.length;x++){var S=e._lctf.getInterval(f.cDef,i[s+1+x]);if(y==-1&&f.cDef[S+2]!=C[x]){g=!1;break}}if(g){var R=M.substLookupRecords;for(d=0;d<R.length;d+=2)R[d],R[d+1]}}}else if(o.ltype==6&&f.fmt==3){if(!e.U._glsCovered(i,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(i,f.inptCvg,s)||!e.U._glsCovered(i,f.ahedCvg,s+f.inptCvg.length))continue;var O=f.lookupRec;for(w=0;w<O.length;w+=2){y=O[w];var L=a[O[w+1]];e.U._applySubs(i,s+y,L,a)}}}}},e.U._glsCovered=function(i,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],i[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var f=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,h=e.U.glyphToPath(i,u),d=0;d<h.crds.length;d+=2)a.crds.push(h.crds[d]+l),a.crds.push(h.crds[d+1]);for(o&&a.cmds.push(o),d=0;d<h.cmds.length;d++)a.cmds.push(h.cmds[d]);o&&a.cmds.push("X"),l+=i.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(i,u,f))}}return a},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,a,l,c,u){i.cmds.push("C"),i.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(i,s,o,a,l){i.cmds.push("Q"),i.crds.push(s,o,a,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,a,l){for(var c=s.stack,u=s.nStems,f=s.haveWidth,h=s.width,d=s.open,p=0,m=s.x,g=s.y,v=0,x=0,y=0,A=0,T=0,w=0,M=0,C=0,S=0,R=0,O={val:0,size:0};p<i.length;){e.CFF.getCharString(i,p,O);var L=O.val;if(p+=O.size,L=="o1"||L=="o18")c.length%2!=0&&!f&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(L=="o3"||L=="o23")c.length%2!=0&&!f&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0;else if(L=="o4")c.length>1&&!f&&(h=c.shift()+a.nominalWidthX,f=!0),d&&e.U.P.closePath(l),g+=c.pop(),e.U.P.moveTo(l,m,g),d=!0;else if(L=="o5")for(;c.length>0;)m+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,m,g);else if(L=="o6"||L=="o7")for(var B=c.length,N=L=="o6",$=0;$<B;$++){var U=c.shift();N?m+=U:g+=U,N=!N,e.U.P.lineTo(l,m,g)}else if(L=="o8"||L=="o24"){B=c.length;for(var Q=0;Q+6<=B;)v=m+c.shift(),x=g+c.shift(),y=v+c.shift(),A=x+c.shift(),m=y+c.shift(),g=A+c.shift(),e.U.P.curveTo(l,v,x,y,A,m,g),Q+=6;L=="o24"&&(m+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,m,g))}else{if(L=="o11")break;if(L=="o1234"||L=="o1235"||L=="o1236"||L=="o1237")L=="o1234"&&(x=g,y=(v=m+c.shift())+c.shift(),R=A=x+c.shift(),w=A,C=g,m=(M=(T=(S=y+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,v,x,y,A,S,R),e.U.P.curveTo(l,T,w,M,C,m,g)),L=="o1235"&&(v=m+c.shift(),x=g+c.shift(),y=v+c.shift(),A=x+c.shift(),S=y+c.shift(),R=A+c.shift(),T=S+c.shift(),w=R+c.shift(),M=T+c.shift(),C=w+c.shift(),m=M+c.shift(),g=C+c.shift(),c.shift(),e.U.P.curveTo(l,v,x,y,A,S,R),e.U.P.curveTo(l,T,w,M,C,m,g)),L=="o1236"&&(v=m+c.shift(),x=g+c.shift(),y=v+c.shift(),R=A=x+c.shift(),w=A,M=(T=(S=y+c.shift())+c.shift())+c.shift(),C=w+c.shift(),m=M+c.shift(),e.U.P.curveTo(l,v,x,y,A,S,R),e.U.P.curveTo(l,T,w,M,C,m,g)),L=="o1237"&&(v=m+c.shift(),x=g+c.shift(),y=v+c.shift(),A=x+c.shift(),S=y+c.shift(),R=A+c.shift(),T=S+c.shift(),w=R+c.shift(),M=T+c.shift(),C=w+c.shift(),Math.abs(M-m)>Math.abs(C-g)?m=M+c.shift():g=C+c.shift(),e.U.P.curveTo(l,v,x,y,A,S,R),e.U.P.curveTo(l,T,w,M,C,m,g));else if(L=="o14"){if(c.length>0&&!f&&(h=c.shift()+o.nominalWidthX,f=!0),c.length==4){var Y=c.shift(),ee=c.shift(),ne=c.shift(),P=c.shift(),se=e.CFF.glyphBySE(o,ne),re=e.CFF.glyphBySE(o,P);e.U._drawCFF(o.CharStrings[se],s,o,a,l),s.x=Y,s.y=ee,e.U._drawCFF(o.CharStrings[re],s,o,a,l)}d&&(e.U.P.closePath(l),d=!1)}else if(L=="o19"||L=="o20")c.length%2!=0&&!f&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,f=!0,p+=u+7>>3;else if(L=="o21")c.length>2&&!f&&(h=c.shift()+a.nominalWidthX,f=!0),g+=c.pop(),m+=c.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,m,g),d=!0;else if(L=="o22")c.length>1&&!f&&(h=c.shift()+a.nominalWidthX,f=!0),m+=c.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,m,g),d=!0;else if(L=="o25"){for(;c.length>6;)m+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,m,g);v=m+c.shift(),x=g+c.shift(),y=v+c.shift(),A=x+c.shift(),m=y+c.shift(),g=A+c.shift(),e.U.P.curveTo(l,v,x,y,A,m,g)}else if(L=="o26")for(c.length%2&&(m+=c.shift());c.length>0;)v=m,x=g+c.shift(),m=y=v+c.shift(),g=(A=x+c.shift())+c.shift(),e.U.P.curveTo(l,v,x,y,A,m,g);else if(L=="o27")for(c.length%2&&(g+=c.shift());c.length>0;)x=g,y=(v=m+c.shift())+c.shift(),A=x+c.shift(),m=y+c.shift(),g=A,e.U.P.curveTo(l,v,x,y,A,m,g);else if(L=="o10"||L=="o29"){var Z=L=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var X=c.pop(),W=Z.Subrs[X+Z.Bias];s.x=m,s.y=g,s.nStems=u,s.haveWidth=f,s.width=h,s.open=d,e.U._drawCFF(W,s,o,a,l),m=s.x,g=s.y,u=s.nStems,f=s.haveWidth,h=s.width,d=s.open}}else if(L=="o30"||L=="o31"){var K=c.length,ge=(Q=0,L=="o31");for(Q+=K-(B=-3&K);Q<B;)ge?(x=g,y=(v=m+c.shift())+c.shift(),g=(A=x+c.shift())+c.shift(),B-Q==5?(m=y+c.shift(),Q++):m=y,ge=!1):(v=m,x=g+c.shift(),y=v+c.shift(),A=x+c.shift(),m=y+c.shift(),B-Q==5?(g=A+c.shift(),Q++):g=A,ge=!0),e.U.P.curveTo(l,v,x,y,A,m,g),Q+=4}else{if((L+"").charAt(0)=="o")throw console.debug("Unknown operation: "+L,i),L;c.push(L)}}}s.x=m,s.y=g,s.nStems=u,s.haveWidth=f,s.width=h,s.open=d};var n=e,r={Typr:n};return t.Typr=n,t.default=r,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function z1e(){return function(t){var e=Uint8Array,n=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(L,B){for(var N=new n(31),$=0;$<31;++$)N[$]=B+=1<<L[$-1];var U=new r(N[30]);for($=1;$<30;++$)for(var Q=N[$];Q<N[$+1];++Q)U[Q]=Q-N[$]<<5|$;return[N,U]},l=a(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var f=a(s,0)[0],h=new n(32768),d=0;d<32768;++d){var p=(43690&d)>>>1|(21845&d)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,h[d]=((65280&p)>>>8|(255&p)<<8)>>>1}var m=function(L,B,N){for(var $=L.length,U=0,Q=new n(B);U<$;++U)++Q[L[U]-1];var Y,ee=new n(B);for(U=0;U<B;++U)ee[U]=ee[U-1]+Q[U-1]<<1;if(N){Y=new n(1<<B);var ne=15-B;for(U=0;U<$;++U)if(L[U])for(var P=U<<4|L[U],se=B-L[U],re=ee[L[U]-1]++<<se,Z=re|(1<<se)-1;re<=Z;++re)Y[h[re]>>>ne]=P}else for(Y=new n($),U=0;U<$;++U)L[U]&&(Y[U]=h[ee[L[U]-1]++]>>>15-L[U]);return Y},g=new e(288);for(d=0;d<144;++d)g[d]=8;for(d=144;d<256;++d)g[d]=9;for(d=256;d<280;++d)g[d]=7;for(d=280;d<288;++d)g[d]=8;var v=new e(32);for(d=0;d<32;++d)v[d]=5;var x=m(g,9,1),y=m(v,5,1),A=function(L){for(var B=L[0],N=1;N<L.length;++N)L[N]>B&&(B=L[N]);return B},T=function(L,B,N){var $=B/8|0;return(L[$]|L[$+1]<<8)>>(7&B)&N},w=function(L,B){var N=B/8|0;return(L[N]|L[N+1]<<8|L[N+2]<<16)>>(7&B)},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],C=function(L,B,N){var $=new Error(B||M[L]);if($.code=L,Error.captureStackTrace&&Error.captureStackTrace($,C),!N)throw $;return $},S=function(L,B,N){var $=L.length;if(!$||N&&!N.l&&$<5)return B||new e(0);var U=!B||N,Q=!N||N.i;N||(N={}),B||(B=new e(3*$));var Y,ee=function(Ce){var Ye=B.length;if(Ce>Ye){var tt=new e(Math.max(2*Ye,Ce));tt.set(B),B=tt}},ne=N.f||0,P=N.p||0,se=N.b||0,re=N.l,Z=N.d,X=N.m,W=N.n,K=8*$;do{if(!re){N.f=ne=T(L,P,1);var ge=T(L,P+1,3);if(P+=3,!ge){var Se=L[(We=((Y=P)/8|0)+(7&Y&&1)+4)-4]|L[We-3]<<8,xe=We+Se;if(xe>$){Q&&C(0);break}U&&ee(se+Se),B.set(L.subarray(We,xe),se),N.b=se+=Se,N.p=P=8*xe;continue}if(ge==1)re=x,Z=y,X=9,W=5;else if(ge==2){var Me=T(L,P,31)+257,he=T(L,P+10,15)+4,Oe=Me+T(L,P+5,31)+1;P+=14;for(var be=new e(Oe),Te=new e(19),Re=0;Re<he;++Re)Te[o[Re]]=T(L,P+3*Re,7);P+=3*he;var $e=A(Te),ve=(1<<$e)-1,me=m(Te,$e,1);for(Re=0;Re<Oe;){var We,Xe=me[T(L,P,ve)];if(P+=15&Xe,(We=Xe>>>4)<16)be[Re++]=We;else{var xt=0,fe=0;for(We==16?(fe=3+T(L,P,3),P+=2,xt=be[Re-1]):We==17?(fe=3+T(L,P,7),P+=3):We==18&&(fe=11+T(L,P,127),P+=7);fe--;)be[Re++]=xt}}var ie=be.subarray(0,Me),Ae=be.subarray(Me);X=A(ie),W=A(Ae),re=m(ie,X,1),Z=m(Ae,W,1)}else C(1);if(P>K){Q&&C(0);break}}U&&ee(se+131072);for(var Je=(1<<X)-1,te=(1<<W)-1,z=P;;z=P){var F=(xt=re[w(L,P)&Je])>>>4;if((P+=15&xt)>K){Q&&C(0);break}if(xt||C(2),F<256)B[se++]=F;else{if(F==256){z=P,re=null;break}var ae=F-254;if(F>264){var ye=i[Re=F-257];ae=T(L,P,(1<<ye)-1)+c[Re],P+=ye}var Le=Z[w(L,P)&te],ke=Le>>>4;if(Le||C(3),P+=15&Le,Ae=f[ke],ke>3&&(ye=s[ke],Ae+=w(L,P)&(1<<ye)-1,P+=ye),P>K){Q&&C(0);break}U&&ee(se+131072);for(var Ve=se+ae;se<Ve;se+=4)B[se]=B[se-Ae],B[se+1]=B[se+1-Ae],B[se+2]=B[se+2-Ae],B[se+3]=B[se+3-Ae];se=Ve}}N.l=re,N.p=z,N.b=se,re&&(ne=1,N.m=X,N.d=Z,N.n=W)}while(!ne);return se==B.length?B:function(Ce,Ye,tt){(Ye==null||Ye<0)&&(Ye=0),(tt==null||tt>Ce.length)&&(tt=Ce.length);var it=new(Ce instanceof n?n:Ce instanceof r?r:e)(tt-Ye);return it.set(Ce.subarray(Ye,tt)),it}(B,0,se)},R=new e(0),O=typeof TextDecoder<"u"&&new TextDecoder;try{O.decode(R,{stream:!0})}catch{}return t.convert_streams=function(L){var B=new DataView(L),N=0;function $(){var Me=B.getUint16(N);return N+=2,Me}function U(){var Me=B.getUint32(N);return N+=4,Me}function Q(Me){Se.setUint16(xe,Me),xe+=2}function Y(Me){Se.setUint32(xe,Me),xe+=4}for(var ee={signature:U(),flavor:U(),length:U(),numTables:$(),reserved:$(),totalSfntSize:U(),majorVersion:$(),minorVersion:$(),metaOffset:U(),metaLength:U(),metaOrigLength:U(),privOffset:U(),privLength:U()},ne=0;Math.pow(2,ne)<=ee.numTables;)ne++;ne--;for(var P=16*Math.pow(2,ne),se=16*ee.numTables-P,re=12,Z=[],X=0;X<ee.numTables;X++)Z.push({tag:U(),offset:U(),compLength:U(),origLength:U(),origChecksum:U()}),re+=16;var W,K=new Uint8Array(12+16*Z.length+Z.reduce(function(Me,he){return Me+he.origLength+4},0)),ge=K.buffer,Se=new DataView(ge),xe=0;return Y(ee.flavor),Q(ee.numTables),Q(P),Q(ne),Q(se),Z.forEach(function(Me){Y(Me.tag),Y(Me.origChecksum),Y(re),Y(Me.origLength),Me.outOffset=re,(re+=Me.origLength)%4!=0&&(re+=4-re%4)}),Z.forEach(function(Me){var he,Oe=L.slice(Me.offset,Me.offset+Me.compLength);if(Me.compLength!=Me.origLength){var be=new Uint8Array(Me.origLength);he=new Uint8Array(Oe,2),S(he,be)}else be=new Uint8Array(Oe);K.set(be,Me.outOffset);var Te=0;(re=Me.outOffset+Me.origLength)%4!=0&&(Te=4-re%4),K.set(new Uint8Array(Te).buffer,Me.outOffset+Me.origLength),W=re+Te}),ge.slice(0,W)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams}function H1e(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,a=8,l=16,c=32;let u;function f(M){if(!u){const C={R:s,L:i,D:o,C:l,U:c,T:a};u=new Map;for(let S in r){let R=0;r[S].split(",").forEach(O=>{let[L,B]=O.split("+");L=parseInt(L,36),B=B?parseInt(B,36):0,u.set(R+=L,C[S]);for(let N=B;N--;)u.set(++R,C[S])})}}return u.get(M)||c}const h=1,d=2,p=3,m=4,g=[null,"isol","init","fina","medi"];function v(M){const C=new Uint8Array(M.length);let S=c,R=h,O=-1;for(let L=0;L<M.length;L++){const B=M.codePointAt(L);let N=f(B)|0,$=h;N&a||(S&(i|o|l)?N&(s|o|l)?($=p,(R===h||R===p)&&C[O]++):N&(i|c)&&(R===d||R===m)&&C[O]--:S&(s|c)&&(R===d||R===m)&&C[O]--,R=C[L]=$,S=N,O=L,B>65535&&L++)}return C}function x(M,C){const S=[];for(let O=0;O<C.length;O++){const L=C.codePointAt(O);L>65535&&O++,S.push(t.U.codeToGlyph(M,L))}const R=M.GSUB;if(R){const{lookupList:O,featureList:L}=R;let B;const N=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,$=[];L.forEach(U=>{if(N.test(U.tag))for(let Q=0;Q<U.tab.length;Q++){if($[U.tab[Q]])continue;$[U.tab[Q]]=!0;const Y=O[U.tab[Q]],ee=/^(isol|init|fina|medi)$/.test(U.tag);ee&&!B&&(B=v(C));for(let ne=0;ne<S.length;ne++)(!B||!ee||g[B[ne]]===U.tag)&&t.U._applySubs(S,ne,Y,O)}})}return S}function y(M,C){const S=new Int16Array(C.length*3);let R=0;for(;R<C.length;R++){const N=C[R];if(N===-1)continue;S[R*3+2]=M.hmtx.aWidth[N];const $=M.GPOS;if($){const U=$.lookupList;for(let Q=0;Q<U.length;Q++){const Y=U[Q];for(let ee=0;ee<Y.tabs.length;ee++){const ne=Y.tabs[ee];if(Y.ltype===1){if(t._lctf.coverageIndex(ne.coverage,N)!==-1&&ne.pos){B(ne.pos,R);break}}else if(Y.ltype===2){let P=null,se=O();if(se!==-1){const re=t._lctf.coverageIndex(ne.coverage,C[se]);if(re!==-1){if(ne.fmt===1){const Z=ne.pairsets[re];for(let X=0;X<Z.length;X++)Z[X].gid2===N&&(P=Z[X])}else if(ne.fmt===2){const Z=t.U._getGlyphClass(C[se],ne.classDef1),X=t.U._getGlyphClass(N,ne.classDef2);P=ne.matrix[Z][X]}if(P){P.val1&&B(P.val1,se),P.val2&&B(P.val2,R);break}}}}else if(Y.ltype===4){const P=t._lctf.coverageIndex(ne.markCoverage,N);if(P!==-1){const se=O(L),re=se===-1?-1:t._lctf.coverageIndex(ne.baseCoverage,C[se]);if(re!==-1){const Z=ne.markArray[P],X=ne.baseArray[re][Z.markClass];S[R*3]=X.x-Z.x+S[se*3]-S[se*3+2],S[R*3+1]=X.y-Z.y+S[se*3+1];break}}}else if(Y.ltype===6){const P=t._lctf.coverageIndex(ne.mark1Coverage,N);if(P!==-1){const se=O();if(se!==-1){const re=C[se];if(A(M,re)===3){const Z=t._lctf.coverageIndex(ne.mark2Coverage,re);if(Z!==-1){const X=ne.mark1Array[P],W=ne.mark2Array[Z][X.markClass];S[R*3]=W.x-X.x+S[se*3]-S[se*3+2],S[R*3+1]=W.y-X.y+S[se*3+1];break}}}}}}}}else if(M.kern&&!M.cff){const U=O();if(U!==-1){const Q=M.kern.glyph1.indexOf(C[U]);if(Q!==-1){const Y=M.kern.rval[Q].glyph2.indexOf(N);Y!==-1&&(S[U*3+2]+=M.kern.rval[Q].vals[Y])}}}}return S;function O(N){for(let $=R-1;$>=0;$--)if(C[$]!==-1&&(!N||N(C[$])))return $;return-1}function L(N){return A(M,N)===1}function B(N,$){for(let U=0;U<3;U++)S[$*3+U]+=N[U]||0}}function A(M,C){const S=M.GDEF&&M.GDEF.glyphClassDef;return S?t.U._getGlyphClass(C,S):0}function T(...M){for(let C=0;C<M.length;C++)if(typeof M[C]=="number")return M[C]}function w(M){const C=Object.create(null),S=M["OS/2"],R=M.hhea,O=M.head.unitsPerEm,L=T(S&&S.sTypoAscender,R&&R.ascender,O),B={unitsPerEm:O,ascender:L,descender:T(S&&S.sTypoDescender,R&&R.descender,0),capHeight:T(S&&S.sCapHeight,L),xHeight:T(S&&S.sxHeight,L),lineGap:T(S&&S.sTypoLineGap,R&&R.lineGap),supportsCodePoint(N){return t.U.codeToGlyph(M,N)>0},forEachGlyph(N,$,U,Q){let Y=0;const ee=1/B.unitsPerEm*$,ne=x(M,N);let P=0;const se=y(M,ne);return ne.forEach((re,Z)=>{if(re!==-1){let X=C[re];if(!X){const{cmds:W,crds:K}=t.U.glyphToPath(M,re);let ge="",Se=0;for(let be=0,Te=W.length;be<Te;be++){const Re=n[W[be]];ge+=W[be];for(let $e=1;$e<=Re;$e++)ge+=($e>1?",":"")+K[Se++]}let xe,Me,he,Oe;if(K.length){xe=Me=1/0,he=Oe=-1/0;for(let be=0,Te=K.length;be<Te;be+=2){let Re=K[be],$e=K[be+1];Re<xe&&(xe=Re),$e<Me&&(Me=$e),Re>he&&(he=Re),$e>Oe&&(Oe=$e)}}else xe=he=Me=Oe=0;X=C[re]={index:re,advanceWidth:M.hmtx.aWidth[re],xMin:xe,yMin:Me,xMax:he,yMax:Oe,path:ge}}Q.call(null,X,Y+se[Z*3]*ee,se[Z*3+1]*ee,P),Y+=se[Z*3+2]*ee,U&&(Y+=U*$)}P+=N.codePointAt(P)>65535?2:1}),Y}};return B}return function(C){const S=new Uint8Array(C,0,4),R=t._bin.readASCII(S,0,4);if(R==="wOFF")C=e(C);else if(R==="wOF2")throw new Error("woff2 fonts not supported");return w(t.parse(C)[0])}}const G1e=lm({name:"Typr Font Parser",dependencies:[U1e,z1e,H1e],init(t,e,n){const r=t(),i=e();return n(r,i)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function V1e(){return function(t){var e=function(){this.buckets=new Map};e.prototype.add=function(y){var A=y>>5;this.buckets.set(A,(this.buckets.get(A)||0)|1<<(31&y))},e.prototype.has=function(y){var A=this.buckets.get(y>>5);return A!==void 0&&(A&1<<(31&y))!=0},e.prototype.serialize=function(){var y=[];return this.buckets.forEach(function(A,T){y.push((+T).toString(36)+":"+A.toString(36))}),y.join(",")},e.prototype.deserialize=function(y){var A=this;this.buckets.clear(),y.split(",").forEach(function(T){var w=T.split(":");A.buckets.set(parseInt(w[0],36),parseInt(w[1],36))})};var n=Math.pow(2,8),r=n-1,i=~r;function s(y){var A=function(w){return w&i}(y).toString(16),T=function(w){return(w&i)+n-1}(y).toString(16);return"codepoint-index/plane"+(y>>16)+"/"+A+"-"+T+".json"}function o(y,A){var T=y&r,w=A.codePointAt(T/6|0);return((w=(w||48)-48)&1<<T%6)!=0}function a(y,A){var T;(T=y,T.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(w){return w.split("-").map(function(M){return parseInt(M.trim(),16)})})).forEach(function(w){var M=w[0],C=w[1];C===void 0&&(C=M),A(M,C)})}function l(y,A){a(y,function(T,w){for(var M=T;M<=w;M++)A(M)})}var c={},u={},f=new WeakMap,h="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function d(y){var A=f.get(y);return A||(A=new e,l(y.ranges,function(T){return A.add(T)}),f.set(y,A)),A}var p,m=new Map;function g(y,A,T){return y[A]?A:y[T]?T:function(w){for(var M in w)return M}(y)}function v(y,A){var T=A;if(!y.includes(T)){T=1/0;for(var w=0;w<y.length;w++)Math.abs(y[w]-A)<Math.abs(T-A)&&(T=y[w])}return T}function x(y){return p||(p=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(A){p.add(A)})),p.has(y)}return t.CodePointSet=e,t.clearCache=function(){c={},u={}},t.getFontsForString=function(y,A){A===void 0&&(A={});var T,w=A.lang;w===void 0&&(w=/\p{Script=Hangul}/u.test(T=y)?"ko":/\p{Script=Hiragana}|\p{Script=Katakana}/u.test(T)?"ja":"en");var M=A.category;M===void 0&&(M="sans-serif");var C=A.style;C===void 0&&(C="normal");var S=A.weight;S===void 0&&(S=400);var R=(A.dataUrl||h).replace(/\/$/g,""),O=new Map,L=new Uint8Array(y.length),B={},N={},$=new Array(y.length),U=new Map,Q=!1;function Y(P){var se=m.get(P);return se||(se=fetch(R+"/"+P).then(function(re){if(!re.ok)throw new Error(re.statusText);return re.json().then(function(Z){if(!Array.isArray(Z)||Z[0]!==1)throw new Error("Incorrect schema version; need 1, got "+Z[0]);return Z[1]})}).catch(function(re){if(R!==h)return Q||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+R+'", trying default CDN. '+re.message),Q=!0),R=h,m.delete(P),Y(P);throw re}),m.set(P,se)),se}for(var ee=function(P){var se=y.codePointAt(P),re=s(se);$[P]=re,c[re]||U.has(re)||U.set(re,Y(re).then(function(Z){c[re]=Z})),se>65535&&(P++,ne=P)},ne=0;ne<y.length;ne++)ee(ne);return Promise.all(U.values()).then(function(){U.clear();for(var P=function(re){var Z=y.codePointAt(re),X=null,W=c[$[re]],K=void 0;for(var ge in W){var Se=N[ge];if(Se===void 0&&(Se=N[ge]=new RegExp(ge).test(w||"en")),Se){for(var xe in K=ge,W[ge])if(o(Z,W[ge][xe])){X=xe;break}break}}if(!X){e:for(var Me in W)if(Me!==K){for(var he in W[Me])if(o(Z,W[Me][he])){X=he;break e}}}X||(console.debug("No font coverage for U+"+Z.toString(16)),X="latin"),$[re]=X,u[X]||U.has(X)||U.set(X,Y("font-meta/"+X+".json").then(function(Oe){u[X]=Oe})),Z>65535&&(re++,se=re)},se=0;se<y.length;se++)P(se);return Promise.all(U.values())}).then(function(){for(var P,se=null,re=0;re<y.length;re++){var Z=y.codePointAt(re);if(se&&(x(Z)||d(se).has(Z)))L[re]=L[re-1];else{se=u[$[re]];var X=B[se.id];if(!X){var W=se.typeforms,K=g(W,M,"sans-serif"),ge=g(W[K],C,"normal"),Se=v((P=W[K])===null||P===void 0?void 0:P[ge],S);X=B[se.id]=R+"/font-files/"+se.id+"/"+K+"."+ge+"."+Se+".woff"}var xe=O.get(X);xe==null&&(xe=O.size,O.set(X,xe)),L[re]=xe}Z>65535&&(re++,L[re]=L[re-1])}return{fontUrls:Array.from(O.keys()),chars:L}})},Object.defineProperty(t,"__esModule",{value:!0}),t}({})}function W1e(t,e){const n=Object.create(null),r=Object.create(null);function i(o,a){const l=c=>{console.error(`Failure loading font ${o}`,c)};try{const c=new XMLHttpRequest;c.open("get",o,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>=400)l(new Error(c.statusText));else if(c.status>0)try{const u=t(c.response);u.src=o,a(u)}catch(u){l(u)}},c.onerror=l,c.send()}catch(c){l(c)}}function s(o,a){let l=n[o];l?a(l):r[o]?r[o].push(a):(r[o]=[a],i(o,c=>{c.src=o,n[o]=c,r[o].forEach(u=>u(c)),delete r[o]}))}return function(o,a,{lang:l,fonts:c=[],style:u="normal",weight:f="normal",unicodeFontsURL:h}={}){const d=new Uint8Array(o.length),p=[];o.length||x();const m=new Map,g=[];if(u!=="italic"&&(u="normal"),typeof f!="number"&&(f=f==="bold"?700:400),c&&!Array.isArray(c)&&(c=[c]),c=c.slice().filter(A=>!A.lang||A.lang.test(l)).reverse(),c.length){let M=0;(function C(S=0){for(let R=S,O=o.length;R<O;R++){const L=o.codePointAt(R);if(M===1&&p[d[R-1]].supportsCodePoint(L)||/\s/.test(o[R]))d[R]=d[R-1],M===2&&(g[g.length-1][1]=R);else for(let B=d[R],N=c.length;B<=N;B++)if(B===N){const $=M===2?g[g.length-1]:g[g.length]=[R,R];$[1]=R,M=2}else{d[R]=B;const{src:$,unicodeRange:U}=c[B];if(!U||y(L,U)){const Q=n[$];if(!Q){s($,()=>{C(R)});return}if(Q.supportsCodePoint(L)){let Y=m.get(Q);typeof Y!="number"&&(Y=p.length,p.push(Q),m.set(Q,Y)),d[R]=Y,M=1;break}}}L>65535&&R+1<O&&(d[R+1]=d[R],R++,M===2&&(g[g.length-1][1]=R))}v()})()}else g.push([0,o.length-1]),v();function v(){if(g.length){const A=g.map(T=>o.substring(T[0],T[1]+1)).join(`
`);e.getFontsForString(A,{lang:l||void 0,style:u,weight:f,dataUrl:h}).then(({fontUrls:T,chars:w})=>{const M=p.length;let C=0;g.forEach(R=>{for(let O=0,L=R[1]-R[0];O<=L;O++)d[R[0]+O]=w[C++]+M;C++});let S=0;T.forEach((R,O)=>{s(R,L=>{p[O+M]=L,++S===T.length&&x()})})})}else x()}function x(){a({chars:d,fonts:p})}function y(A,T){for(let w=0;w<T.length;w++){const[M,C=M]=T[w];if(M<=A&&A<=C)return!0}return!1}}}const j1e=lm({name:"FontResolver",dependencies:[W1e,G1e,V1e],init(t,e,n){return t(e,n())}});function $1e(t,e){const r=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i="[^\\S\\u00A0]",s=new RegExp(`${i}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:p,lang:m,fonts:g,style:v,weight:x,preResolvedFonts:y,unicodeFontsURL:A},T){const w=({chars:M,fonts:C})=>{let S,R;const O=[];for(let L=0;L<M.length;L++)M[L]!==R?(R=M[L],O.push(S={start:L,end:L,fontObj:C[M[L]]})):S.end=L;T(O)};y?w(y):t(p,w,{lang:m,fonts:g,style:v,weight:x,unicodeFontsURL:A})}function a({text:p="",font:m,lang:g,sdfGlyphSize:v=64,fontSize:x=400,fontWeight:y=1,fontStyle:A="normal",letterSpacing:T=0,lineHeight:w="normal",maxWidth:M=1/0,direction:C,textAlign:S="left",textIndent:R=0,whiteSpace:O="normal",overflowWrap:L="normal",anchorX:B=0,anchorY:N=0,metricsOnly:$=!1,unicodeFontsURL:U,preResolvedFonts:Q=null,includeCaretPositions:Y=!1,chunkedBoundsSize:ee=8192,colorRanges:ne=null},P){const se=f(),re={fontLoad:0,typesetting:0};p.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),p=p.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),x=+x,T=+T,M=+M,w=w||"normal",R=+R,o({text:p,lang:g,style:A,weight:y,fonts:typeof m=="string"?[{src:m}]:m,unicodeFontsURL:U,preResolvedFonts:Q},Z=>{re.fontLoad=f()-se;const X=isFinite(M);let W=null,K=null,ge=null,Se=null,xe=null,Me=null,he=null,Oe=null,be=0,Te=0,Re=O!=="nowrap";const $e=new Map,ve=f();let me=R,We=0,Xe=new h;const xt=[Xe];Z.forEach(te=>{const{fontObj:z}=te,{ascender:F,descender:ae,unitsPerEm:ye,lineGap:Le,capHeight:ke,xHeight:Ve}=z;let Ce=$e.get(z);if(!Ce){const Ze=x/ye,Be=w==="normal"?(F-ae+Le)*Ze:w*x,Ft=(Be-(F-ae)*Ze)/2,St=Math.min(Be,(F-ae)*Ze),st=(F+ae)/2*Ze+St/2;Ce={index:$e.size,src:z.src,fontObj:z,fontSizeMult:Ze,unitsPerEm:ye,ascender:F*Ze,descender:ae*Ze,capHeight:ke*Ze,xHeight:Ve*Ze,lineHeight:Be,baseline:-Ft-F*Ze,caretTop:st,caretBottom:st-St},$e.set(z,Ce)}const{fontSizeMult:Ye}=Ce,tt=p.slice(te.start,te.end+1);let it,dt;z.forEachGlyph(tt,x,T,(Ze,Be,Ft,St)=>{Be+=We,St+=te.start,it=Be,dt=Ze;const st=p.charAt(St),It=Ze.advanceWidth*Ye,Ht=Xe.count;let zt;if("isEmpty"in Ze||(Ze.isWhitespace=!!st&&new RegExp(i).test(st),Ze.canBreakAfter=!!st&&s.test(st),Ze.isEmpty=Ze.xMin===Ze.xMax||Ze.yMin===Ze.yMax||r.test(st)),!Ze.isWhitespace&&!Ze.isEmpty&&Te++,Re&&X&&!Ze.isWhitespace&&Be+It+me>M&&Ht){if(Xe.glyphAt(Ht-1).glyphObj.canBreakAfter)zt=new h,me=-Be;else for(let Nn=Ht;Nn--;)if(Nn===0&&L==="break-word"){zt=new h,me=-Be;break}else if(Xe.glyphAt(Nn).glyphObj.canBreakAfter){zt=Xe.splitAt(Nn+1);const Tn=zt.glyphAt(0).x;me-=Tn;for(let Fn=zt.count;Fn--;)zt.glyphAt(Fn).x-=Tn;break}zt&&(Xe.isSoftWrapped=!0,Xe=zt,xt.push(Xe),be=M)}let $t=Xe.glyphAt(Xe.count);$t.glyphObj=Ze,$t.x=Be+me,$t.y=Ft,$t.width=It,$t.charIndex=St,$t.fontData=Ce,st===`
`&&(Xe=new h,xt.push(Xe),me=-(Be+It+T*x)+R)}),We=it+dt.advanceWidth*Ye+T*x});let fe=0;xt.forEach(te=>{let z=!0;for(let F=te.count;F--;){const ae=te.glyphAt(F);z&&!ae.glyphObj.isWhitespace&&(te.width=ae.x+ae.width,te.width>be&&(be=te.width),z=!1);let{lineHeight:ye,capHeight:Le,xHeight:ke,baseline:Ve}=ae.fontData;ye>te.lineHeight&&(te.lineHeight=ye);const Ce=Ve-te.baseline;Ce<0&&(te.baseline+=Ce,te.cap+=Ce,te.ex+=Ce),te.cap=Math.max(te.cap,te.baseline+Le),te.ex=Math.max(te.ex,te.baseline+ke)}te.baseline-=fe,te.cap-=fe,te.ex-=fe,fe+=te.lineHeight});let ie=0,Ae=0;if(B&&(typeof B=="number"?ie=-B:typeof B=="string"&&(ie=-be*(B==="left"?0:B==="center"?.5:B==="right"?1:c(B)))),N&&(typeof N=="number"?Ae=-N:typeof N=="string"&&(Ae=N==="top"?0:N==="top-baseline"?-xt[0].baseline:N==="top-cap"?-xt[0].cap:N==="top-ex"?-xt[0].ex:N==="middle"?fe/2:N==="bottom"?fe:N==="bottom-baseline"?-xt[xt.length-1].baseline:c(N)*fe)),!$){const te=e.getEmbeddingLevels(p,C);W=new Uint16Array(Te),K=new Uint8Array(Te),ge=new Float32Array(Te*2),Se={},he=[1/0,1/0,-1/0,-1/0],Oe=[],Y&&(Me=new Float32Array(p.length*4)),ne&&(xe=new Uint8Array(Te*3));let z=0,F=-1,ae=-1,ye,Le;if(xt.forEach((ke,Ve)=>{let{count:Ce,width:Ye}=ke;if(Ce>0){let tt=0;for(let St=Ce;St--&&ke.glyphAt(St).glyphObj.isWhitespace;)tt++;let it=0,dt=0;if(S==="center")it=(be-Ye)/2;else if(S==="right")it=be-Ye;else if(S==="justify"&&ke.isSoftWrapped){let St=0;for(let st=Ce-tt;st--;)ke.glyphAt(st).glyphObj.isWhitespace&&St++;dt=(be-Ye)/St}if(dt||it){let St=0;for(let st=0;st<Ce;st++){let It=ke.glyphAt(st);const Ht=It.glyphObj;It.x+=it+St,dt!==0&&Ht.isWhitespace&&st<Ce-tt&&(St+=dt,It.width+=dt)}}const Ze=e.getReorderSegments(p,te,ke.glyphAt(0).charIndex,ke.glyphAt(ke.count-1).charIndex);for(let St=0;St<Ze.length;St++){const[st,It]=Ze[St];let Ht=1/0,zt=-1/0;for(let $t=0;$t<Ce;$t++)if(ke.glyphAt($t).charIndex>=st){let Nn=$t,Tn=$t;for(;Tn<Ce;Tn++){let Fn=ke.glyphAt(Tn);if(Fn.charIndex>It)break;Tn<Ce-tt&&(Ht=Math.min(Ht,Fn.x),zt=Math.max(zt,Fn.x+Fn.width))}for(let Fn=Nn;Fn<Tn;Fn++){const vr=ke.glyphAt(Fn);vr.x=zt-(vr.x+vr.width-Ht)}break}}let Be;const Ft=St=>Be=St;for(let St=0;St<Ce;St++){const st=ke.glyphAt(St);Be=st.glyphObj;const It=Be.index,Ht=te.levels[st.charIndex]&1;if(Ht){const zt=e.getMirroredCharacter(p[st.charIndex]);zt&&st.fontData.fontObj.forEachGlyph(zt,0,0,Ft)}if(Y){const{charIndex:zt,fontData:$t}=st,Nn=st.x+ie,Tn=st.x+st.width+ie;Me[zt*4]=Ht?Tn:Nn,Me[zt*4+1]=Ht?Nn:Tn,Me[zt*4+2]=ke.baseline+$t.caretBottom+Ae,Me[zt*4+3]=ke.baseline+$t.caretTop+Ae;const Fn=zt-F;Fn>1&&u(Me,F,Fn),F=zt}if(ne){const{charIndex:zt}=st;for(;zt>ae;)ae++,ne.hasOwnProperty(ae)&&(Le=ne[ae])}if(!Be.isWhitespace&&!Be.isEmpty){const zt=z++,{fontSizeMult:$t,src:Nn,index:Tn}=st.fontData,Fn=Se[Nn]||(Se[Nn]={});Fn[It]||(Fn[It]={path:Be.path,pathBounds:[Be.xMin,Be.yMin,Be.xMax,Be.yMax]});const vr=st.x+ie,ai=st.y+ke.baseline+Ae;ge[zt*2]=vr,ge[zt*2+1]=ai;const Ri=vr+Be.xMin*$t,Vr=ai+Be.yMin*$t,Pr=vr+Be.xMax*$t,gn=ai+Be.yMax*$t;Ri<he[0]&&(he[0]=Ri),Vr<he[1]&&(he[1]=Vr),Pr>he[2]&&(he[2]=Pr),gn>he[3]&&(he[3]=gn),zt%ee===0&&(ye={start:zt,end:zt,rect:[1/0,1/0,-1/0,-1/0]},Oe.push(ye)),ye.end++;const br=ye.rect;if(Ri<br[0]&&(br[0]=Ri),Vr<br[1]&&(br[1]=Vr),Pr>br[2]&&(br[2]=Pr),gn>br[3]&&(br[3]=gn),W[zt]=It,K[zt]=Tn,ne){const ss=zt*3;xe[ss]=Le>>16&255,xe[ss+1]=Le>>8&255,xe[ss+2]=Le&255}}}}}),Me){const ke=p.length-F;ke>1&&u(Me,F,ke)}}const Je=[];$e.forEach(({index:te,src:z,unitsPerEm:F,ascender:ae,descender:ye,lineHeight:Le,capHeight:ke,xHeight:Ve})=>{Je[te]={src:z,unitsPerEm:F,ascender:ae,descender:ye,lineHeight:Le,capHeight:ke,xHeight:Ve}}),re.typesetting=f()-ve,P({glyphIds:W,glyphFontIndices:K,glyphPositions:ge,glyphData:Se,fontData:Je,caretPositions:Me,glyphColors:xe,chunkedBounds:Oe,fontSize:x,topBaseline:Ae+xt[0].baseline,blockBounds:[ie,Ae-fe,ie+be,Ae],visibleBounds:he,timings:re})})}function l(p,m){a({...p,metricsOnly:!0},g=>{const[v,x,y,A]=g.blockBounds;m({width:y-v,height:A-x})})}function c(p){let m=p.match(/^([\d.]+)%$/),g=m?parseFloat(m[1]):NaN;return isNaN(g)?0:g/100}function u(p,m,g){const v=p[m*4],x=p[m*4+1],y=p[m*4+2],A=p[m*4+3],T=(x-v)/g;for(let w=0;w<g;w++){const M=(m+w)*4;p[M]=v+T*w,p[M+1]=v+T*(w+1),p[M+2]=y,p[M+3]=A}}function f(){return(self.performance||Date).now()}function h(){this.data=[]}const d=["glyphObj","x","y","width","charIndex","fontData"];return h.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/d.length)},glyphAt(p){let m=h.flyweight;return m.data=this.data,m.index=p,m},splitAt(p){let m=new h;return m.data=this.data.splice(p*d.length),m}},h.flyweight=d.reduce((p,m,g,v)=>(Object.defineProperty(p,m,{get(){return this.data[this.index*d.length+g]},set(x){this.data[this.index*d.length+g]=x}}),p),{data:null,index:0}),{typeset:a,measure:l}}const ah=()=>(self.performance||Date).now(),x_=dH();let XI;function X1e(t,e,n,r,i,s,o,a,l,c,u=!0){return u?q1e(t,e,n,r,i,s,o,a,l,c).then(null,f=>(XI||(console.warn("WebGL SDF generation failed, falling back to JS",f),XI=!0),qI(t,e,n,r,i,s,o,a,l,c))):qI(t,e,n,r,i,s,o,a,l,c)}const o3=[],Y1e=5;let jS=0;function mH(){const t=ah();for(;o3.length&&ah()-t<Y1e;)o3.shift()();jS=o3.length?setTimeout(mH,0):0}const q1e=(...t)=>new Promise((e,n)=>{o3.push(()=>{const r=ah();try{x_.webgl.generateIntoCanvas(...t),e({timing:ah()-r})}catch(i){n(i)}}),jS||(jS=setTimeout(mH,0))}),K1e=4,J1e=2e3,YI={};let Q1e=0;function qI(t,e,n,r,i,s,o,a,l,c){const u="TroikaTextSDFGenerator_JS_"+Q1e++%K1e;let f=YI[u];return f||(f=YI[u]={workerModule:lm({name:u,workerId:u,dependencies:[dH,ah],init(h,d){const p=h().javascript.generate;return function(...m){const g=d();return{textureData:p(...m),timing:d()-g}}},getTransferables(h){return[h.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(t,e,n,r,i,s).then(({textureData:h,timing:d})=>{const p=ah(),m=new Uint8Array(h.length*4);for(let g=0;g<h.length;g++)m[g*4+c]=h[g];return x_.webglUtils.renderImageData(o,m,a,l,t,e,1<<3-c),d+=ah()-p,--f.requests===0&&(f.idleTimer=setTimeout(()=>{R1e(u)},J1e)),{timing:d}})}function Z1e(t){t._warm||(x_.webgl.isSupported(t),t._warm=!0)}const ege=x_.webglUtils.resizeWebGLCanvasWithoutClearing,ep={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},tge=new bt;function bd(){return(self.performance||Date).now()}const KI=Object.create(null);function gH(t,e){t=ige({},t);const n=bd(),{defaultFontURL:r}=ep,i=[];if(r&&i.push({label:"default",src:JI(r)}),t.font&&i.push({label:"user",src:JI(t.font)}),t.font=i,t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||ep.sdfGlyphSize,t.unicodeFontsURL=t.unicodeFontsURL||ep.unicodeFontsURL,t.colorRanges!=null){let h={};for(let d in t.colorRanges)if(t.colorRanges.hasOwnProperty(d)){let p=t.colorRanges[d];typeof p!="number"&&(p=tge.set(p).getHex()),h[d]=p}t.colorRanges=h}Object.freeze(t);const{textureWidth:s,sdfExponent:o}=ep,{sdfGlyphSize:a}=t,l=s/a*4;let c=KI[a];if(!c){const h=document.createElement("canvas");h.width=s,h.height=a*256/l,c=KI[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:h,sdfTexture:new Vn(h,void 0,void 0,void 0,Cn,Cn),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,nge(c)}const{sdfTexture:u,sdfCanvas:f}=c;oge(t).then(h=>{const{glyphIds:d,glyphFontIndices:p,fontData:m,glyphPositions:g,fontSize:v,timings:x}=h,y=[],A=new Float32Array(d.length*4);let T=0,w=0;const M=bd(),C=m.map(B=>{let N=c.glyphsByFont.get(B.src);return N||c.glyphsByFont.set(B.src,N=new Map),N});d.forEach((B,N)=>{const $=p[N],{src:U,unitsPerEm:Q}=m[$];let Y=C[$].get(B);if(!Y){const{path:re,pathBounds:Z}=h.glyphData[U][B],X=Math.max(Z[2]-Z[0],Z[3]-Z[1])/a*(ep.sdfMargin*a+.5),W=c.glyphCount++,K=[Z[0]-X,Z[1]-X,Z[2]+X,Z[3]+X];C[$].set(B,Y={path:re,atlasIndex:W,sdfViewBox:K}),y.push(Y)}const{sdfViewBox:ee}=Y,ne=g[w++],P=g[w++],se=v/Q;A[T++]=ne+ee[0]*se,A[T++]=P+ee[1]*se,A[T++]=ne+ee[2]*se,A[T++]=P+ee[3]*se,d[N]=Y.atlasIndex}),x.quads=(x.quads||0)+(bd()-M);const S=bd();x.sdf={};const R=f.height,O=Math.ceil(c.glyphCount/l),L=Math.pow(2,Math.ceil(Math.log2(O*a)));L>R&&(console.info(`Increasing SDF texture size ${R}->${L}`),ege(f,s,L),u.dispose()),Promise.all(y.map(B=>vH(B,c,t.gpuAccelerateSDF).then(({timing:N})=>{x.sdf[B.atlasIndex]=N}))).then(()=>{y.length&&!c.contextLost&&(yH(c),u.needsUpdate=!0),x.sdfTotal=bd()-S,x.total=bd()-n,e(Object.freeze({parameters:t,sdfTexture:u,sdfGlyphSize:a,sdfExponent:o,glyphBounds:A,glyphAtlasIndices:d,glyphColors:h.glyphColors,caretPositions:h.caretPositions,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,capHeight:h.capHeight,xHeight:h.xHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings}))})}),Promise.resolve().then(()=>{c.contextLost||Z1e(f)})}function vH({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=ep,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(e/4),f=u%(a/r)*r,h=Math.floor(u/(a/r))*r,d=e%4;return X1e(r,r,t,n,c,l,i,f,h,d,o)}function nge(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const r=[];t.glyphsByFont.forEach(i=>{i.forEach(s=>{r.push(vH(s,t,!0))})}),Promise.all(r).then(()=>{yH(t),t.sdfTexture.needsUpdate=!0})})}function rge({font:t,characters:e,sdfGlyphSize:n},r){let i=Array.isArray(e)?e.join(`
`):""+e;gH({font:t,sdfGlyphSize:n,text:i},r)}function ige(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let Qy;function JI(t){return Qy||(Qy=typeof document>"u"?{}:document.createElement("a")),Qy.href=t,Qy.href}function yH(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:r,height:i}=e,s=t.sdfCanvas.getContext("webgl");let o=n.image.data;(!o||o.length!==r*i*4)&&(o=new Uint8Array(r*i*4),n.image={width:r,height:i,data:o},n.flipY=!1,n.isDataTexture=!0),s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,o)}}const sge=lm({name:"Typesetter",dependencies:[$1e,j1e,P1e],init(t,e,n){return t(e,n())}}),oge=lm({name:"Typesetter",dependencies:[sge],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[];for(let n in t)t[n]&&t[n].buffer&&e.push(t[n].buffer);return e}}),QI={};function age(t){let e=QI[t];if(!e){const n=new Fo(1,1,t,t),r=n.clone(),i=n.attributes,s=r.attributes,o=new on,a=i.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new Ot([...i[l].array,...s[l].array],i[l].itemSize))}),o.setIndex([...n.index.array,...r.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=QI[t]=o}return e}const lge="aTroikaGlyphBounds",ZI="aTroikaGlyphIndex",cge="aTroikaGlyphColor";class uge extends kg{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Fr,this.boundingBox=new Yn}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const n=this.getIndex().count;this.setDrawRange(e===Ti?n/2:0,e===gr?n:n/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=age(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=n.attributes[r].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,r,i,s){I2(this,lge,e,4),I2(this,ZI,n,1),I2(this,cge,s,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:r}=this;if(n){const{PI:i,floor:s,min:o,max:a,sin:l,cos:c}=Math,u=i/2,f=i*2,h=Math.abs(n),d=e[0]/h,p=e[2]/h,m=s((d+u)/f)!==s((p+u)/f)?-h:o(l(d)*h,l(p)*h),g=s((d-u)/f)!==s((p-u)/f)?h:a(l(d)*h,l(p)*h),v=s((d+i)/f)!==s((p+i)/f)?h*2:a(h-c(d)*h,h-c(p)*h);r.min.set(m,e[1],n<0?-v:0),r.max.set(g,e[3],n<0?0:v)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(ZI).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){n=r[i].end;let s=r[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=n}}function I2(t,e,n,r){const i=t.getAttribute(e);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(t.setAttribute(e,new ml(n,r)),delete t._maxInstanceCount,t.dispose()):i&&t.deleteAttribute(e)}const fge=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,hge=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,dge=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,pge=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function mge(t){const e=WS(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new qe},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Xn(0,0,0,0)},uTroikaClipRect:{value:new Xn(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new qe},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new bt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Pn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:fge,vertexTransform:hge,fragmentDefs:dge,fragmentColorTransform:pge,customRewriter({vertexShader:n,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(n)||(n=n.replace(pH,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const lC=new Or({color:16777215,side:gr,transparent:!0}),eP=8421504,tP=new yt,Zy=new J,P2=new J,T0=[],gge=new J,L2="+x+y";function nP(t){return Array.isArray(t)?t[0]:t}let xH=()=>{const t=new un(new Fo(1,1),lC);return xH=()=>t,t},EH=()=>{const t=new un(new Fo(1,1,32,1),lC);return EH=()=>t,t};const vge={type:"syncstart"},yge={type:"synccomplete"},_H=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],xge=_H.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let bH=class extends un{constructor(){const e=new uge;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=eP,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=L2,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(vge),gH({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(yge),e&&e()})))}onBeforeRender(e,n,r,i,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=es}onAfterRender(e,n,r,i,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=lC.clone());if((!e||e.baseMaterial!==n)&&(e=this._derivedMaterial=mge(n),n.addEventListener("dispose",function r(){n.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return nP(this.material).getDepthMaterial()}get customDistanceMaterial(){return nP(this.material).getDistanceMaterial()}_prepareForRender(e){const n=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:a,blockBounds:l}=i;r.uTroikaSDFTexture.value=a,r.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!n&&!!i.glyphColors;let c=0,u=0,f=0,h,d,p,m=0,g=0;if(n){let{outlineWidth:x,outlineOffsetX:y,outlineOffsetY:A,outlineBlur:T,outlineOpacity:w}=this;c=this._parsePercent(x)||0,u=Math.max(0,this._parsePercent(T)||0),h=w,m=this._parsePercent(y)||0,g=this._parsePercent(A)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(p=this.strokeColor,r.uTroikaStrokeColor.value.set(p??eP),d=this.strokeOpacity,d==null&&(d=1)),h=this.fillOpacity;r.uTroikaDistanceOffset.value=c,r.uTroikaPositionOffset.value.set(m,g),r.uTroikaBlurRadius.value=u,r.uTroikaStrokeWidth.value=f,r.uTroikaStrokeOpacity.value=d,r.uTroikaFillOpacity.value=h??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let v=this.clipRect;if(v&&Array.isArray(v)&&v.length===4)r.uTroikaClipRect.value.fromArray(v);else{const x=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-x,l[1]-x,l[2]+x,l[3]+x)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=n?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new bt;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||L2;if(o!==e._orientation){let a=r.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==L2&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,f,h]=l;Zy.set(0,0,0)[u]=c==="-"?1:-1,P2.set(0,0,0)[h]=f==="-"?-1:1,tP.lookAt(gge,Zy.cross(P2),P2),a.setFromMatrix4(tP)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),r=n?parseFloat(n[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new qe){n.copy(e);const r=this.curveRadius;return r&&(n.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),n}worldPositionToTextCoords(e,n=new qe){return Zy.copy(e),this.localPositionToTextCoords(this.worldToLocal(Zy),n)}raycast(e,n){const{textRenderInfo:r,curveRadius:i}=this;if(r){const s=r.blockBounds,o=i?EH():xH(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let u=0;u<c.count;u++){let f=s[0]+c.getX(u)*(s[2]-s[0]);const h=s[1]+c.getY(u)*(s[3]-s[1]);let d=0;i&&(d=i-Math.cos(f/i)*i,f=Math.sin(f/i)*i),l.setXYZ(u,f,h,d)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,T0.length=0,o.raycast(e,T0);for(let u=0;u<T0.length;u++)T0[u].object=this,n.push(T0[u])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,xge.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};_H.forEach(t=>{const e="_private_"+t;Object.defineProperty(bH.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});const Ege=E.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:r,fontSize:i=1,children:s,characters:o,onSync:a,...l},c)=>{const u=wt(({invalidate:p})=>p),[f]=E.useState(()=>new bH),[h,d]=E.useMemo(()=>{const p=[];let m="";return E.Children.forEach(s,g=>{typeof g=="string"||typeof g=="number"?m+=g:p.push(g)}),[p,m]},[s]);return vh(()=>new Promise(p=>rge({font:r,characters:o},p)),["troika-text",r,o]),E.useLayoutEffect(()=>void f.sync(()=>{u(),a&&a(f)})),E.useEffect(()=>()=>f.dispose(),[f]),E.createElement("primitive",Ct({object:f,ref:c,font:r,text:d,anchorX:e,anchorY:n,fontSize:i,sdfGlyphSize:t},l),h)});let N2=null;async function _ge(t){return typeof t=="string"?await(await fetch(t)).json():t}function bge(t){return N2||(N2=new e1e),N2.parse(t)}async function AH(t){const e=await _ge(t);return bge(e)}function cC(t){return vh(AH,[t])}cC.preload=t=>bU(AH,[t]);cC.clear=t=>G5([t]);const Age=["string","number"],Tge=t=>{let e="";const n=[];return E.Children.forEach(t,r=>{Age.includes(typeof r)?e+=r+"":n.push(r)}),[e,...n]},wge=E.forwardRef(({font:t,letterSpacing:e=0,lineHeight:n=1,size:r=1,height:i=.2,bevelThickness:s=.1,bevelSize:o=.01,bevelEnabled:a=!1,bevelOffset:l=0,bevelSegments:c=4,curveSegments:u=8,smooth:f,children:h,...d},p)=>{E.useMemo(()=>Fi({RenamedTextGeometry:$0e}),[]);const m=E.useRef(null),g=cC(t),v=E.useMemo(()=>({font:g,size:r,height:i,bevelThickness:s,bevelSize:o,bevelEnabled:a,bevelSegments:c,bevelOffset:l,curveSegments:u,letterSpacing:e,lineHeight:n}),[g,r,i,s,o,a,c,l,u,e,n]),[x,...y]=E.useMemo(()=>Tge(h),[h]),A=E.useMemo(()=>[x,v],[x,v]);return E.useLayoutEffect(()=>{f&&(m.current.geometry=Eme(m.current.geometry,f),m.current.geometry.computeVertexNormals())},[A,f]),E.useImperativeHandle(p,()=>m.current,[]),E.createElement("mesh",Ct({},d,{ref:m}),E.createElement("renamedTextGeometry",{args:A}),y)}),Sge=E.forwardRef(({children:t,multisamping:e=8,renderIndex:n=1,disableRender:r,disableGamma:i,disableRenderPass:s,depthBuffer:o=!0,stencilBuffer:a=!1,anisotropy:l=1,encoding:c,type:u,...f},h)=>{E.useMemo(()=>Fi({EffectComposer:o0e,RenderPass:c0e,ShaderPass:FS}),[]);const d=E.useRef(null);E.useImperativeHandle(h,()=>d.current,[]);const{scene:p,camera:m,gl:g,size:v,viewport:x}=wt(),[y]=E.useState(()=>{const T=new pr(v.width,v.height,{type:u||Xr,format:Sr,depthBuffer:o,stencilBuffer:a,anisotropy:l});return u===Cs&&c!=null&&("colorSpace"in T?T.texture.colorSpace=c:T.texture.encoding=c),T.samples=e,T});E.useEffect(()=>{var T,w;(T=d.current)==null||T.setSize(v.width,v.height),(w=d.current)==null||w.setPixelRatio(x.dpr)},[g,v,x.dpr]),rn(()=>{var T;r||(T=d.current)==null||T.render()},n);const A=[];return s||A.push(E.createElement("renderPass",{key:"renderpass",attach:`passes-${A.length}`,args:[p,m]})),i||A.push(E.createElement("shaderPass",{attach:`passes-${A.length}`,key:"gammapass",args:[X0e]})),E.Children.forEach(t,T=>{T&&A.push(E.cloneElement(T,{key:A.length,attach:`passes-${A.length}`}))}),E.createElement("effectComposer",Ct({ref:d,args:[g,y]},f),A)});let rP=function(t){return t.Linear="linear",t.Radial="radial",t}({});function Cge({stops:t,colors:e,size:n=1024,width:r=16,type:i=rP.Linear,innerCircleRadius:s=0,outerCircleRadius:o="auto",...a}){const l=wt(u=>u.gl),c=E.useMemo(()=>{const u=document.createElement("canvas"),f=u.getContext("2d");u.width=r,u.height=n;let h;if(i===rP.Linear)h=f.createLinearGradient(0,0,0,n);else{const p=u.width/2,m=u.height/2,g=o!=="auto"?Math.abs(Number(o)):Math.sqrt(p**2+m**2);h=f.createRadialGradient(p,m,Math.abs(s),p,m,g)}let d=t.length;for(;d--;)h.addColorStop(t[d],e[d]);return f.save(),f.fillStyle=h,f.fillRect(0,0,r,n),f.restore(),u},[t]);return E.createElement("canvasTexture",Ct({colorSpace:l.outputColorSpace,args:[c],attach:"map"},a))}function Ga(t,e,n,r){const i=class extends ur{constructor(o={}){const a=Object.entries(t);super({uniforms:a.reduce((l,[c,u])=>{const f=Gu.clone({[c]:{value:u}});return{...l,...f}},{}),vertexShader:e,fragmentShader:n}),this.key="",a.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c})),Object.assign(this,o),r&&r(this)}};return i.key=si.generateUUID(),i}const O2=t=>t===Object(t)&&!Array.isArray(t)&&typeof t!="function";function E_(t,e){const n=wt(s=>s.gl),r=ys(Ki,O2(t)?Object.values(t):t);return E.useLayoutEffect(()=>{e==null||e(r)},[e]),E.useEffect(()=>{if("initTexture"in n){let s=[];Array.isArray(r)?s=r:r instanceof Vn?s=[r]:O2(r)&&(s=Object.values(r)),s.forEach(o=>{o instanceof Vn&&n.initTexture(o)})}},[n,r]),E.useMemo(()=>{if(O2(t)){const s={};let o=0;for(const a in t)s[a]=r[o++];return s}else return r},[t,r])}E_.preload=t=>ys.preload(Ki,t);E_.clear=t=>ys.clear(Ki,t);const Mge=()=>parseInt(yl.replace(/\D+/g,"")),vo=Mge(),iP=Ga({color:new bt("white"),scale:new qe(1,1),imageBounds:new qe(1,1),resolution:1024,map:null,zoom:1,radius:0,grayscale:0,opacity:1},`
  varying vec2 vUv;
  varying vec2 vPos;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
    vPos = position.xy;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  varying vec2 vPos;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform float resolution;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float radius;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  
  const float PI = 3.14159265;
    
  // from https://iquilezles.org/articles/distfunctions
  float udRoundBox( vec2 p, vec2 b, float r ) {
    return length(max(abs(p)-b+r,0.0))-r;
  }

  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);

    vec2 res = vec2(scale * resolution);
    vec2 halfRes = 0.5 * res;
    float b = udRoundBox(vUv.xy * res - halfRes, halfRes, resolution * radius);    
	  vec3 a = mix(vec3(1.0,0.0,0.0), vec3(0.0,0.0,0.0), smoothstep(0.0, 1.0, b));
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity * a), grayscale);
    
    #include <tonemapping_fragment>
    #include <${vo>=154?"colorspace_fragment":"encodings_fragment"}>
  }
`),TH=E.forwardRef(({children:t,color:e,segments:n=1,scale:r=1,zoom:i=1,grayscale:s=0,opacity:o=1,radius:a=0,texture:l,toneMapped:c,transparent:u,side:f,...h},d)=>{Fi({ImageMaterial:iP});const p=E.useRef(null),m=wt(y=>y.size),g=Array.isArray(r)?[r[0],r[1]]:[r,r],v=[l.image.width,l.image.height],x=Math.max(m.width,m.height);return E.useImperativeHandle(d,()=>p.current,[]),E.useLayoutEffect(()=>{p.current.geometry.parameters&&p.current.material.scale.set(g[0]*p.current.geometry.parameters.width,g[1]*p.current.geometry.parameters.height)},[]),E.createElement("mesh",Ct({ref:p,scale:Array.isArray(r)?[...r,1]:r},h),E.createElement("planeGeometry",{args:[1,1,n,n]}),E.createElement("imageMaterial",{color:e,map:l,zoom:i,grayscale:s,opacity:o,scale:g,imageBounds:v,resolution:x,radius:a,toneMapped:c,transparent:u,side:f,key:iP.key}),t)}),Rge=E.forwardRef(({url:t,...e},n)=>{const r=E_(t);return E.createElement(TH,Ct({},e,{texture:r,ref:n}))}),Ige=E.forwardRef(({url:t,...e},n)=>E.createElement(TH,Ct({},e,{ref:n}))),Pge=E.forwardRef((t,e)=>{if(t.url)return E.createElement(Rge,Ct({},t,{ref:e}));if(t.texture)return E.createElement(Ige,Ct({},t,{ref:e}));throw new Error("<Image /> requires a url or texture")}),uC=E.forwardRef(({threshold:t=15,...e},n)=>{const r=E.useRef(null);E.useImperativeHandle(n,()=>r.current,[]);const i=E.useMemo(()=>[0,0,0,1,0,0],[]),s=E.useRef(),o=E.useRef();return E.useLayoutEffect(()=>{const a=r.current.parent;if(a){const l=a.geometry;if(l!==s.current||t!==o.current){s.current=l,o.current=t;const c=new I5(l,t).attributes.position.array;r.current.geometry.setPositions(c),r.current.geometry.attributes.instanceStart.needsUpdate=!0,r.current.geometry.attributes.instanceEnd.needsUpdate=!0,r.current.computeLineDistances()}}}),E.createElement($i,Ct({segments:!0,points:i,ref:r,raycast:()=>null},e))}),sP=Ga({screenspace:!1,color:new bt("black"),opacity:1,thickness:.05,size:new qe},`#include <common>
   #include <morphtarget_pars_vertex>
   #include <skinning_pars_vertex>
   uniform float thickness;
   uniform float screenspace;
   uniform vec2 size;
   void main() {
     #if defined (USE_SKINNING)
	     #include <beginnormal_vertex>
       #include <morphnormal_vertex>
       #include <skinbase_vertex>
       #include <skinnormal_vertex>
       #include <defaultnormal_vertex>
     #endif
     #include <begin_vertex>
	   #include <morphtarget_vertex>
	   #include <skinning_vertex>
     #include <project_vertex>
     vec4 tNormal = vec4(normal, 0.0);
     vec4 tPosition = vec4(transformed, 1.0);
     #ifdef USE_INSTANCING
       tNormal = instanceMatrix * tNormal;
       tPosition = instanceMatrix * tPosition;
     #endif
     if (screenspace == 0.0) {
       vec3 newPosition = tPosition.xyz + tNormal.xyz * thickness;
       gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0); 
     } else {
       vec4 clipPosition = projectionMatrix * modelViewMatrix * tPosition;
       vec4 clipNormal = projectionMatrix * modelViewMatrix * tNormal;
       vec2 offset = normalize(clipNormal.xy) * thickness / size * clipPosition.w * 2.0;
       clipPosition.xy += offset;
       gl_Position = clipPosition;
     }
   }`,`uniform vec3 color;
   uniform float opacity;
   void main(){
     gl_FragColor = vec4(color, opacity);
     #include <tonemapping_fragment>
     #include <${vo>=154?"colorspace_fragment":"encodings_fragment"}>
   }`);function wH({color:t="black",opacity:e=1,transparent:n=!1,screenspace:r=!1,toneMapped:i=!0,polygonOffset:s=!1,polygonOffsetFactor:o=0,renderOrder:a=0,thickness:l=.05,angle:c=Math.PI,...u}){const f=E.useRef(),[h]=E.useState(()=>new sP({side:Ti})),{gl:d}=wt(),p=d.getDrawingBufferSize(new qe);E.useMemo(()=>Fi({OutlinesMaterial:sP}),[]);const m=E.useRef(0),g=E.useRef();return E.useLayoutEffect(()=>{const v=f.current;if(!v)return;const x=v.parent;if(x&&x.geometry&&(m.current!==c||g.current!==x.geometry)){var y;m.current=c,g.current=x.geometry;let A=(y=v.children)==null?void 0:y[0];A&&(c&&A.geometry.dispose(),v.remove(A)),x.skeleton?(A=new bh,A.material=h,A.bind(x.skeleton,x.bindMatrix),v.add(A)):x.isInstancedMesh?(A=new rm(x.geometry,h,x.count),A.instanceMatrix=x.instanceMatrix,v.add(A)):(A=new un,A.material=h,v.add(A)),A.geometry=c?$z(x.geometry,c):x.geometry}}),E.useLayoutEffect(()=>{const v=f.current;if(!v)return;const x=v.children[0];x&&(x.renderOrder=a,co(x.material,{transparent:n,thickness:l,color:t,opacity:e,size:p,screenspace:r,toneMapped:i,polygonOffset:s,polygonOffsetFactor:o}))}),E.useEffect(()=>()=>{const v=f.current;if(!v)return;const x=v.children[0];x&&(c&&x.geometry.dispose(),v.remove(x))},[]),E.createElement("group",Ct({ref:f},u))}var Lge=Object.defineProperty,Nge=(t,e,n)=>e in t?Lge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dr=(t,e,n)=>(Nge(t,typeof e!="symbol"?e+"":e,n),n);function D2(t,e,n,r,i){let s;if(t=t.subarray||t.slice?t:t.buffer,n=n.subarray||n.slice?n:n.buffer,t=e?t.subarray?t.subarray(e,i&&e+i):t.slice(e,i&&e+i):t,n.set)n.set(t,r);else for(s=0;s<t.length;s++)n[s+r]=t[s];return n}function Oge(t){return t instanceof Float32Array?t:t instanceof on?t.getAttribute("position").array:t.map(e=>{const n=Array.isArray(e);return e instanceof J?[e.x,e.y,e.z]:e instanceof qe?[e.x,e.y,0]:n&&e.length===3?[e[0],e[1],e[2]]:n&&e.length===2?[e[0],e[1],0]:e}).flat()}class Dge extends on{constructor(){super(),dr(this,"type","MeshLine"),dr(this,"isMeshLine",!0),dr(this,"positions",[]),dr(this,"previous",[]),dr(this,"next",[]),dr(this,"side",[]),dr(this,"width",[]),dr(this,"indices_array",[]),dr(this,"uvs",[]),dr(this,"counters",[]),dr(this,"widthCallback",null),dr(this,"_attributes"),dr(this,"_points",[]),dr(this,"points"),dr(this,"matrixWorld",new yt),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(e){this.setPoints(e,this.widthCallback)}}})}setMatrixWorld(e){this.matrixWorld=e}setPoints(e,n){if(e=Oge(e),this._points=e,this.widthCallback=n??null,this.positions=[],this.counters=[],e.length&&e[0]instanceof J)for(let r=0;r<e.length;r++){const i=e[r],s=r/(e.length-1);this.positions.push(i.x,i.y,i.z),this.positions.push(i.x,i.y,i.z),this.counters.push(s),this.counters.push(s)}else for(let r=0;r<e.length;r+=3){const i=r/(e.length-1);this.positions.push(e[r],e[r+1],e[r+2]),this.positions.push(e[r],e[r+1],e[r+2]),this.counters.push(i),this.counters.push(i)}this.process()}compareV3(e,n){const r=e*6,i=n*6;return this.positions[r]===this.positions[i]&&this.positions[r+1]===this.positions[i+1]&&this.positions[r+2]===this.positions[i+2]}copyV3(e){const n=e*6;return[this.positions[n],this.positions[n+1],this.positions[n+2]]}process(){const e=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];let n,r;this.compareV3(0,e-1)?r=this.copyV3(e-2):r=[this.positions[0]-(this.positions[6]-this.positions[0]),this.positions[1]-(this.positions[6+1]-this.positions[1]),this.positions[2]-(this.positions[6+2]-this.positions[2])],this.previous.push(r[0],r[1],r[2]),this.previous.push(r[0],r[1],r[2]);for(let i=0;i<e;i++){if(this.side.push(1),this.side.push(-1),this.widthCallback?n=this.widthCallback(i/(e-1)):n=1,this.width.push(n),this.width.push(n),this.uvs.push(i/(e-1),0),this.uvs.push(i/(e-1),1),i<e-1){r=this.copyV3(i),this.previous.push(r[0],r[1],r[2]),this.previous.push(r[0],r[1],r[2]);const s=i*2;this.indices_array.push(s,s+1,s+2),this.indices_array.push(s+2,s+1,s+3)}i>0&&(r=this.copyV3(i),this.next.push(r[0],r[1],r[2]),this.next.push(r[0],r[1],r[2]))}this.compareV3(e-1,0)?r=this.copyV3(1):r=[this.positions[e-1]+(this.positions[e-1]-this.positions[e-1-6]),this.positions[e-2]+(this.positions[e-2]-this.positions[e-2-6]),this.positions[e-3]+(this.positions[e-3]-this.positions[e-3-6])],this.next.push(r[0],r[1],r[2]),this.next.push(r[0],r[1],r[2]),!this._attributes||this._attributes.position.count!==this.counters.length?this._attributes={position:new Qt(new Float32Array(this.positions),3),previous:new Qt(new Float32Array(this.previous),3),next:new Qt(new Float32Array(this.next),3),side:new Qt(new Float32Array(this.side),1),width:new Qt(new Float32Array(this.width),1),uv:new Qt(new Float32Array(this.uvs),2),index:new Qt(new Uint16Array(this.indices_array),1),counters:new Qt(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:e,y:n,z:r}){const i=this._attributes.position.array,s=this._attributes.previous.array,o=this._attributes.next.array,a=i.length;D2(i,0,s,0,a),D2(i,6,i,0,a-6),i[a-6]=e,i[a-5]=n,i[a-4]=r,i[a-3]=e,i[a-2]=n,i[a-1]=r,D2(i,6,o,0,a-6),o[a-6]=e,o[a-5]=n,o[a-4]=r,o[a-3]=e,o[a-2]=n,o[a-1]=r,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const Bge=`
  #include <common>
  #include <logdepthbuf_pars_vertex>
  #include <fog_pars_vertex>

  attribute vec3 previous;
  attribute vec3 next;
  attribute float side;
  attribute float width;
  attribute float counters;
  
  uniform vec2 resolution;
  uniform float lineWidth;
  uniform vec3 color;
  uniform float opacity;
  uniform float sizeAttenuation;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  vec2 fix(vec4 i, float aspect) {
    vec2 res = i.xy / i.w;
    res.x *= aspect;
  	vCounters = counters;
    return res;
  }
  
  void main() {
    float aspect = resolution.x / resolution.y;
    vColor = vec4(color, opacity);
    vUV = uv;
  
    mat4 m = projectionMatrix * modelViewMatrix;
    vec4 finalPosition = m * vec4(position, 1.0);
    vec4 prevPos = m * vec4(previous, 1.0);
    vec4 nextPos = m * vec4(next, 1.0);
  
    vec2 currentP = fix(finalPosition, aspect);
    vec2 prevP = fix(prevPos, aspect);
    vec2 nextP = fix(nextPos, aspect);
  
    float w = lineWidth * width;
  
    vec2 dir1 = normalize(currentP - prevP);
    vec2 dir2 = normalize(nextP - currentP);
    vec2 dir = normalize(dir1 + dir2);

    vec2 perp = vec2(-dir1.y, dir1.x);
    vec2 miter = vec2(-dir.y, dir.x);
    //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);
  
    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;
    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);
    normal.xy *= .5 * w;
    //normal *= projectionMatrix;
    if (sizeAttenuation == 0.) {
      normal.xy *= finalPosition.w;
      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy;
    }
  
    finalPosition.xy += normal.xy * side;
    gl_Position = finalPosition;
    #include <logdepthbuf_vertex>
    #include <fog_vertex>
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    #include <fog_vertex>
  }
`,kge=`
  #include <fog_pars_fragment>
  #include <logdepthbuf_pars_fragment>
  
  uniform sampler2D map;
  uniform sampler2D alphaMap;
  uniform float useGradient;
  uniform float useMap;
  uniform float useAlphaMap;
  uniform float useDash;
  uniform float dashArray;
  uniform float dashOffset;
  uniform float dashRatio;
  uniform float visibility;
  uniform float alphaTest;
  uniform vec2 repeat;
  uniform vec3 gradient[2];
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  void main() {
    #include <logdepthbuf_fragment>
    vec4 c = vColor;
    if (useGradient == 1.) c = vec4(mix(gradient[0], gradient[1], vCounters), 1.0);
    if (useMap == 1.) c *= texture2D(map, vUV * repeat);
    if (useAlphaMap == 1.) c.a *= texture2D(alphaMap, vUV * repeat).a;
    if (c.a < alphaTest) discard;
    if (useDash == 1.) {
      c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));
    }
    gl_FragColor = c;
    gl_FragColor.a *= step(vCounters, visibility);
    #include <fog_fragment>
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }
`;class Fge extends ur{constructor(e){super({uniforms:{...Wt.fog,lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new bt(16777215)},gradient:{value:[new bt(16711680),new bt(65280)]},opacity:{value:1},resolution:{value:new qe(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},useGradient:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new qe(1,1)}},vertexShader:Bge,fragmentShader:kge}),dr(this,"lineWidth"),dr(this,"map"),dr(this,"useMap"),dr(this,"alphaMap"),dr(this,"useAlphaMap"),dr(this,"color"),dr(this,"gradient"),dr(this,"resolution"),dr(this,"sizeAttenuation"),dr(this,"dashArray"),dr(this,"dashOffset"),dr(this,"dashRatio"),dr(this,"useDash"),dr(this,"useGradient"),dr(this,"visibility"),dr(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(n){this.uniforms.lineWidth.value=n}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(n){this.uniforms.map.value=n}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(n){this.uniforms.useMap.value=n}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(n){this.uniforms.alphaMap.value=n}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(n){this.uniforms.useAlphaMap.value=n}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(n){this.uniforms.color.value=n}},gradient:{enumerable:!0,get(){return this.uniforms.gradient.value},set(n){this.uniforms.gradient.value=n}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(n){this.uniforms.resolution.value.copy(n)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(n){this.uniforms.sizeAttenuation.value=n}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(n){this.uniforms.dashArray.value=n,this.useDash=n!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(n){this.uniforms.dashOffset.value=n}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(n){this.uniforms.dashRatio.value=n}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(n){this.uniforms.useDash.value=n}},useGradient:{enumerable:!0,get(){return this.uniforms.useGradient.value},set(n){this.uniforms.useGradient.value=n}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(n){this.uniforms.visibility.value=n}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(n){this.uniforms.alphaTest.value=n}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(n){this.uniforms.repeat.value.copy(n)}}}),this.setValues(e)}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.gradient=e.gradient,this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray=e.dashArray,this.dashOffset=e.dashOffset,this.dashRatio=e.dashRatio,this.useDash=e.useDash,this.useGradient=e.useGradient,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this}}const SH={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},Uge=(t,e=1)=>(t.set(t.subarray(e)),t.fill(-1/0,-e),t);function zge(t,e){const{length:n,local:r,decay:i,interval:s,stride:o}={...SH,...e},a=E.useRef(),[l]=E.useState(()=>new J);E.useLayoutEffect(()=>{t&&(a.current=Float32Array.from({length:n*10*3},(f,h)=>t.position.getComponent(h%3)))},[n,t]);const c=E.useRef(new J),u=E.useRef(0);return rn(()=>{if(t&&a.current){if(u.current===0){let f;r?f=t.position:(t.getWorldPosition(l),f=l);const h=1*i;for(let d=0;d<h;d++)f.distanceTo(c.current)<o||(Uge(a.current,3),a.current.set(f.toArray(),a.current.length-3));c.current.copy(f)}u.current++,u.current=u.current%s}}),a}const Hge=E.forwardRef((t,e)=>{const{children:n}=t,{width:r,length:i,decay:s,local:o,stride:a,interval:l}={...SH,...t},{color:c="hotpink",attenuation:u,target:f}=t,h=wt(A=>A.size),d=wt(A=>A.scene),p=E.useRef(null),[m,g]=E.useState(null),v=zge(m,{length:i,decay:s,local:o,stride:a,interval:l});E.useEffect(()=>{const A=(f==null?void 0:f.current)||p.current.children.find(T=>T instanceof hn);A&&g(A)},[v,f]);const x=E.useMemo(()=>new Dge,[]),y=E.useMemo(()=>{var A;const T=new Fge({lineWidth:.1*r,color:c,sizeAttenuation:1,resolution:new qe(h.width,h.height)});let w;if(n)if(Array.isArray(n))w=n.find(M=>{const C=M;return typeof C.type=="string"&&C.type==="meshLineMaterial"});else{const M=n;typeof M.type=="string"&&M.type==="meshLineMaterial"&&(w=M)}return typeof((A=w)==null?void 0:A.props)=="object"&&T.setValues(w.props),T},[r,c,h,n]);return E.useEffect(()=>{y.uniforms.resolution.value.set(h.width,h.height)},[h]),rn(()=>{v.current&&x.setPoints(v.current,u)}),E.createElement("group",null,Hc(E.createElement("mesh",{ref:e,geometry:x,material:y}),d),E.createElement("group",{ref:p},n))});function Gge(t,e=16,n,r,i){const[s,o]=E.useState(()=>{const a=Array.from({length:e},()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]).flat();return new ml(Float32Array.from(a),16)});return E.useLayoutEffect(()=>{if(typeof t.current>"u")return;const a=new $me(t.current);r&&a.setWeightAttribute(r),a.build();const l=new J,c=new J,u=new bt,f=new hn;t.current.updateMatrixWorld(!0);for(let h=0;h<e;h++)a.sample(l,c,u),typeof n=="function"?n({dummy:f,sampledMesh:t.current,position:l,normal:c,color:u},h):f.position.copy(l),f.updateMatrix(),i!=null&&i.current&&i.current.setMatrixAt(h,f.matrix),f.matrix.toArray(s.array,h*16);i!=null&&i.current&&(i.current.instanceMatrix.needsUpdate=!0),s.needsUpdate=!0,o(new ml(s.array,s.itemSize).copy(s))},[t,i,r,e,n]),s}function Vge({children:t,weight:e,transform:n,instances:r,mesh:i,count:s=16,...o}){const a=E.useRef(null),l=E.useRef(null),c=E.useRef(null);return E.useLayoutEffect(()=>{var u,f;l.current=(u=r==null?void 0:r.current)!==null&&u!==void 0?u:a.current.children.find(h=>h.hasOwnProperty("instanceMatrix")),c.current=(f=i==null?void 0:i.current)!==null&&f!==void 0?f:a.current.children.find(h=>h.type==="Mesh")},[t,i==null?void 0:i.current,r==null?void 0:r.current]),Gge(c,s,n,e,l),E.createElement("group",Ct({ref:a},o),t)}const Wge=({compute:t,name:e,...n})=>{const[r]=E.useState(()=>new Qt(new Float32Array(0),1)),i=E.useRef(null);return E.useLayoutEffect(()=>{if(i.current){var s;const o=(s=i.current.parent)!==null&&s!==void 0?s:i.current.__r3f.parent,a=t(o);i.current.copy(a)}},[t]),E.createElement("primitive",Ct({ref:i,object:r,attach:`attributes-${e}`},n))};function jge(t,{keys:e=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:n,inject:r,castShadow:i,receiveShadow:s}){let o={};for(const a of e)o[a]=t[a];return n&&(o.geometry&&n!=="materialsOnly"&&(o.geometry=o.geometry.clone()),o.material&&n!=="geometriesOnly"&&(o.material=o.material.clone())),r&&(typeof r=="function"?o={...o,children:r(t)}:E.isValidElement(r)?o={...o,children:r}:o={...o,...r}),t instanceof un&&(i&&(o.castShadow=!0),s&&(o.receiveShadow=!0)),o}const Q3=E.forwardRef(({isChild:t=!1,object:e,children:n,deep:r,castShadow:i,receiveShadow:s,inject:o,keys:a,...l},c)=>{const u={keys:a,deep:r,inject:o,castShadow:i,receiveShadow:s};if(e=E.useMemo(()=>{if(t===!1&&!Array.isArray(e)){let p=!1;if(e.traverse(m=>{m.isSkinnedMesh&&(p=!0)}),p)return jme.clone(e)}return e},[e,t]),Array.isArray(e))return E.createElement("group",Ct({},l,{ref:c}),e.map(p=>E.createElement(Q3,Ct({key:p.uuid,object:p},u))),n);const{children:f,...h}=jge(e,u),d=e.type[0].toLowerCase()+e.type.slice(1);return E.createElement(d,Ct({},h,l,{ref:c}),e.children.map(p=>p.type==="Bone"?E.createElement("primitive",Ct({key:p.uuid,object:p},u)):E.createElement(Q3,Ct({key:p.uuid,object:p},u,{isChild:!0}))),n,f)}),$ge=E.createContext(null),Xge=E.forwardRef(({resolution:t=28,maxPolyCount:e=1e4,enableUvs:n=!1,enableColors:r=!1,children:i,...s},o)=>{const a=E.useRef(null);E.useImperativeHandle(o,()=>a.current,[]);const l=E.useMemo(()=>new Ome(t,null,n,r,e),[t,e,n,r]),c=E.useMemo(()=>({getParent:()=>a}),[]);return rn(()=>{l.update(),l.reset()},-1),E.createElement(E.Fragment,null,E.createElement("primitive",Ct({object:l,ref:a},s),E.createElement($ge.Provider,{value:c},i)))});function Yge(t){return Array.isArray(t)}function B2(t=[0,0,0]){return Yge(t)?t:t instanceof J||t instanceof wi?[t.x,t.y,t.z]:[t,t,t]}const qge=E.forwardRef(function({debug:e,depthTest:n=!1,polygonOffsetFactor:r=-10,map:i,mesh:s,children:o,position:a,rotation:l,scale:c,...u},f){const h=E.useRef(null);E.useImperativeHandle(f,()=>h.current);const d=E.useRef(null);return E.useLayoutEffect(()=>{const p=(s==null?void 0:s.current)||h.current.parent,m=h.current;if(!(p instanceof un))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const g={position:new J,rotation:new wi,scale:new J(1,1,1)};if(p){co(g,{position:a,scale:c});const v=p.matrixWorld.clone();if(p.matrixWorld.identity(),!l||typeof l=="number"){const x=new hn;x.position.copy(g.position),x.lookAt(p.position),typeof l=="number"&&x.rotateZ(l),co(g,{rotation:x.rotation})}else co(g,{rotation:l});return m.geometry=new j0e(p,g.position,g.rotation,g.scale),d.current&&(co(d.current,g),d.current.traverse(x=>x.raycast=()=>null)),p.matrixWorld=v,()=>{m.geometry.dispose()}}},[s,...B2(a),...B2(c),...B2(l)]),E.createElement("mesh",Ct({ref:h,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":r,"material-depthTest":n,"material-map":i},u),o,e&&E.createElement("mesh",{ref:d},E.createElement("boxGeometry",null),E.createElement("meshNormalMaterial",{wireframe:!0}),E.createElement("axesHelper",null)))}),Kge=E.forwardRef(function({src:e,skipFill:n,skipStrokes:r,fillMaterial:i,strokeMaterial:s,fillMeshProps:o,strokeMeshProps:a,...l},c){const u=ys(E1,e.startsWith("<svg")?`data:image/svg+xml;utf8,${e}`:e),f=E.useMemo(()=>r?[]:u.paths.map(h=>{var d;return((d=h.userData)==null?void 0:d.style.stroke)===void 0||h.userData.style.stroke==="none"?null:h.subPaths.map(p=>E1.pointsToStroke(p.getPoints(),h.userData.style))}),[u,r]);return E.useEffect(()=>()=>f.forEach(h=>h&&h.map(d=>d.dispose())),[f]),E.createElement("object3D",Ct({ref:c},l),E.createElement("object3D",{scale:[1,-1,1]},u.paths.map((h,d)=>{var p,m;return E.createElement(E.Fragment,{key:d},!n&&((p=h.userData)==null?void 0:p.style.fill)!==void 0&&h.userData.style.fill!=="none"&&E1.createShapes(h).map((g,v)=>E.createElement("mesh",Ct({key:v},o),E.createElement("shapeGeometry",{args:[g]}),E.createElement("meshBasicMaterial",Ct({color:h.userData.style.fill,opacity:h.userData.style.fillOpacity,transparent:!0,side:gr,depthWrite:!1},i)))),!r&&((m=h.userData)==null?void 0:m.style.stroke)!==void 0&&h.userData.style.stroke!=="none"&&h.subPaths.map((g,v)=>E.createElement("mesh",Ct({key:v,geometry:f[d][v]},a),E.createElement("meshBasicMaterial",Ct({color:h.userData.style.stroke,opacity:h.userData.style.strokeOpacity,transparent:!0,side:gr,depthWrite:!1},s)))))})))});let ex=null,CH="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function MH(t,e,n){return r=>{n&&n(r),t&&(ex||(ex=new o1e),ex.setDecoderPath(typeof t=="string"?t:CH),r.setDRACOLoader(ex)),e&&r.setMeshoptDecoder(typeof M2=="function"?M2():M2)}}function __(t,e=!0,n=!0,r){return ys(sC,t,MH(e,n,r))}__.preload=(t,e=!0,n=!0,r)=>ys.preload(sC,t,MH(e,n,r));__.clear=t=>ys.clear(sC,t);__.setDecoderPath=t=>{CH=t};const Jge=E.forwardRef(({src:t,...e},n)=>{const{scene:r}=__(t);return E.createElement(Q3,Ct({ref:n},e,{object:r}))});function Qge({renderIndex:t=1,bgColor:e="black",fgColor:n="white",characters:r=" .:-+*=%@#",invert:i=!0,color:s=!1,resolution:o=.15}){const{size:a,gl:l,scene:c,camera:u}=wt(),f=E.useMemo(()=>{const h=new J0e(l,r,{invert:i,color:s,resolution:o});return h.domElement.style.position="absolute",h.domElement.style.top="0px",h.domElement.style.left="0px",h.domElement.style.pointerEvents="none",h},[r,i,s,o]);return E.useLayoutEffect(()=>{f.domElement.style.color=n,f.domElement.style.backgroundColor=e},[n,e]),E.useEffect(()=>(l.domElement.style.opacity="0",l.domElement.parentNode.appendChild(f.domElement),()=>{l.domElement.style.opacity="1",l.domElement.parentNode.removeChild(f.domElement)}),[f]),E.useEffect(()=>{f.setSize(a.width,a.height)},[f,a]),rn(h=>{f.render(c,u)},t),E.createElement(E.Fragment,null)}const oP=Ga({alphaTest:0,viewport:new qe(1980,1080),focal:1e3,centerAndScaleTexture:null,covAndColorTexture:null},`
    precision highp sampler2D;
    precision highp usampler2D;
    out vec4 vColor;
    out vec3 vPosition;
    uniform vec2 resolution;
    uniform vec2 viewport;
    uniform float focal;
    attribute uint splatIndex;
    uniform sampler2D centerAndScaleTexture;
    uniform usampler2D covAndColorTexture;    

    vec2 unpackInt16(in uint value) {
      int v = int(value);
      int v0 = v >> 16;
      int v1 = (v & 0xFFFF);
      if((v & 0x8000) != 0)
        v1 |= 0xFFFF0000;
      return vec2(float(v1), float(v0));
    }

    void main () {
      ivec2 texSize = textureSize(centerAndScaleTexture, 0);
      ivec2 texPos = ivec2(splatIndex%uint(texSize.x), splatIndex/uint(texSize.x));
      vec4 centerAndScaleData = texelFetch(centerAndScaleTexture, texPos, 0);
      vec4 center = vec4(centerAndScaleData.xyz, 1);
      vec4 camspace = modelViewMatrix * center;
      vec4 pos2d = projectionMatrix * camspace;

      float bounds = 1.2 * pos2d.w;
      if (pos2d.z < -pos2d.w || pos2d.x < -bounds || pos2d.x > bounds
        || pos2d.y < -bounds || pos2d.y > bounds) {
        gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
        return;
      }

      uvec4 covAndColorData = texelFetch(covAndColorTexture, texPos, 0);
      vec2 cov3D_M11_M12 = unpackInt16(covAndColorData.x) * centerAndScaleData.w;
      vec2 cov3D_M13_M22 = unpackInt16(covAndColorData.y) * centerAndScaleData.w;
      vec2 cov3D_M23_M33 = unpackInt16(covAndColorData.z) * centerAndScaleData.w;
      mat3 Vrk = mat3(
        cov3D_M11_M12.x, cov3D_M11_M12.y, cov3D_M13_M22.x,
        cov3D_M11_M12.y, cov3D_M13_M22.y, cov3D_M23_M33.x,
        cov3D_M13_M22.x, cov3D_M23_M33.x, cov3D_M23_M33.y
      );

      mat3 J = mat3(
        focal / camspace.z, 0., -(focal * camspace.x) / (camspace.z * camspace.z),
        0., focal / camspace.z, -(focal * camspace.y) / (camspace.z * camspace.z),
        0., 0., 0.
      );

      mat3 W = transpose(mat3(modelViewMatrix));
      mat3 T = W * J;
      mat3 cov = transpose(T) * Vrk * T;
      vec2 vCenter = vec2(pos2d) / pos2d.w;
      float diagonal1 = cov[0][0] + 0.3;
      float offDiagonal = cov[0][1];
      float diagonal2 = cov[1][1] + 0.3;
      float mid = 0.5 * (diagonal1 + diagonal2);
      float radius = length(vec2((diagonal1 - diagonal2) / 2.0, offDiagonal));
      float lambda1 = mid + radius;
      float lambda2 = max(mid - radius, 0.1);
      vec2 diagonalVector = normalize(vec2(offDiagonal, lambda1 - diagonal1));
      vec2 v1 = min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector;
      vec2 v2 = min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x);
      uint colorUint = covAndColorData.w;
      vColor = vec4(
        float(colorUint & uint(0xFF)) / 255.0,
        float((colorUint >> uint(8)) & uint(0xFF)) / 255.0,
        float((colorUint >> uint(16)) & uint(0xFF)) / 255.0,
        float(colorUint >> uint(24)) / 255.0
      );
      vPosition = position;

      gl_Position = vec4(
        vCenter 
          + position.x * v2 / viewport * 2.0 
          + position.y * v1 / viewport * 2.0, pos2d.z / pos2d.w, 1.0);
    }
    `,`
    #include <alphatest_pars_fragment>
    #include <alphahash_pars_fragment>
    in vec4 vColor;
    in vec3 vPosition;
    void main () {
      float A = -dot(vPosition.xy, vPosition.xy);
      if (A < -4.0) discard;
      float B = exp(A) * vColor.a;
      vec4 diffuseColor = vec4(vColor.rgb, B);
      #include <alphatest_fragment>
      #include <alphahash_fragment>
      gl_FragColor = diffuseColor;
      #include <tonemapping_fragment>
      #include <${parseInt(yl.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `);function Zge(t){let e=null,n=0;function r(i,s=!1){const o=e.length/16,a=-1e-4;let l=-1/0,c=1/0;const u=new Float32Array(o),f=new Int32Array(u.buffer),h=new Int32Array(o);let d=0;for(let x=0;x<o;x++){const y=i[0]*e[x*16+12]+i[1]*e[x*16+13]+i[2]*e[x*16+14]+i[3];(s||y<0&&e[x*16+15]>a*y)&&(u[d]=y,h[d]=x,d++,y>l&&(l=y),y<c&&(c=y))}const p=(256*256-1)/(l-c),m=new Uint32Array(256*256);for(let x=0;x<d;x++)f[x]=(u[x]-c)*p|0,m[f[x]]++;const g=new Uint32Array(256*256);for(let x=1;x<256*256;x++)g[x]=g[x-1]+m[x-1];const v=new Uint32Array(d);for(let x=0;x<d;x++)v[g[f[x]]++]=h[x];return v}t.onmessage=i=>{if(i.data.method=="push"){n===0&&(e=new Float32Array(i.data.length));const s=new Float32Array(i.data.matrices);e.set(s,n),n+=s.length}else if(i.data.method=="sort"&&e!==null){const s=r(new Float32Array(i.data.view),i.data.hashed);t.postMessage({indices:s,key:i.data.key},[s.buffer])}}}class eve extends _r{constructor(...e){super(...e),this.gl=null,this.chunkSize=25e3}load(e,n,r,i){const s={gl:this.gl,url:this.manager.resolveURL(e),worker:new Worker(URL.createObjectURL(new Blob(["(",Zge.toString(),")(self)"],{type:"application/javascript"}))),manager:this.manager,update:(o,a,l)=>rve(a,s,o,l),connect:o=>ive(s,o),loading:!1,loaded:!1,loadedVertexCount:0,chunkSize:this.chunkSize,totalDownloadBytes:0,numVertices:0,rowLength:32,maxVertexes:0,bufferTextureWidth:0,bufferTextureHeight:0,stream:null,centerAndScaleData:null,covAndColorData:null,covAndColorTexture:null,centerAndScaleTexture:null,onProgress:r};tve(s).then(n).catch(o=>{i==null||i(o),s.manager.itemError(s.url)})}}async function tve(t){t.manager.itemStart(t.url);const e=await fetch(t.url);if(e.body===null)throw"Failed to fetch file";let n=e.headers.get("Content-Length");const r=n?parseInt(n):void 0;if(r==null)throw"Failed to get content length";t.stream=e.body.getReader(),t.totalDownloadBytes=r,t.numVertices=Math.floor(t.totalDownloadBytes/t.rowLength);const i=t.gl.getContext();let s=i.getParameter(i.MAX_TEXTURE_SIZE);return t.maxVertexes=s*s,t.numVertices>t.maxVertexes&&(t.numVertices=t.maxVertexes),t.bufferTextureWidth=s,t.bufferTextureHeight=Math.floor((t.numVertices-1)/s)+1,t.centerAndScaleData=new Float32Array(t.bufferTextureWidth*t.bufferTextureHeight*4),t.covAndColorData=new Uint32Array(t.bufferTextureWidth*t.bufferTextureHeight*4),t.centerAndScaleTexture=new mo(t.centerAndScaleData,t.bufferTextureWidth,t.bufferTextureHeight,Sr,fr),t.centerAndScaleTexture.needsUpdate=!0,t.covAndColorTexture=new mo(t.covAndColorData,t.bufferTextureWidth,t.bufferTextureHeight,hh,Ws),t.covAndColorTexture.internalFormat="RGBA32UI",t.covAndColorTexture.needsUpdate=!0,t}async function nve(t){t.loading=!0;let e=0,n=0;const r=[];let i=0;const s=t.totalDownloadBytes!==0;for(;;)try{const{value:o,done:a}=await t.stream.read();if(a)break;if(e+=o.length,t.totalDownloadBytes!=null){const c=e/t.totalDownloadBytes*100;if(t.onProgress&&c-i>1){const u=new ProgressEvent("progress",{lengthComputable:s,loaded:e,total:t.totalDownloadBytes});t.onProgress(u),i=c}}r.push(o);const l=e-n;if(t.totalDownloadBytes!=null&&l>t.rowLength*t.chunkSize){let c=Math.floor(l/t.rowLength);const u=new Uint8Array(l);let f=0;for(const p of r)u.set(p,f),f+=p.length;if(r.length=0,l>c*t.rowLength){const p=new Uint8Array(l-c*t.rowLength);p.set(u.subarray(l-p.length,l),0),r.push(p)}const h=new Uint8Array(c*t.rowLength);h.set(u.subarray(0,h.byteLength),0);const d=aP(t,h.buffer,c);if(t.worker.postMessage({method:"push",src:t.url,length:t.numVertices*16,matrices:d.buffer},[d.buffer]),n+=c*t.rowLength,t.onProgress){const p=new ProgressEvent("progress",{lengthComputable:s,loaded:t.totalDownloadBytes,total:t.totalDownloadBytes});t.onProgress(p)}}}catch(o){console.error(o);break}if(e-n>0){let o=new Uint8Array(r.reduce((u,f)=>u+f.length,0)),a=0;for(const u of r)o.set(u,a),a+=u.length;let l=Math.floor(o.byteLength/t.rowLength);const c=aP(t,o.buffer,l);t.worker.postMessage({method:"push",src:t.url,length:l*16,matrices:c.buffer},[c.buffer])}t.loaded=!0,t.manager.itemEnd(t.url)}function rve(t,e,n,r){if(t.updateMatrixWorld(),e.gl.getCurrentViewport(n.viewport),n.material.viewport.x=n.viewport.z,n.material.viewport.y=n.viewport.w,n.material.focal=n.viewport.w/2*Math.abs(t.projectionMatrix.elements[5]),n.ready){if(r&&n.sorted)return;n.ready=!1;const i=new Float32Array([n.modelViewMatrix.elements[2],-n.modelViewMatrix.elements[6],n.modelViewMatrix.elements[10],n.modelViewMatrix.elements[14]]);e.worker.postMessage({method:"sort",src:e.url,key:n.uuid,view:i.buffer,hashed:r},[i.buffer]),r&&e.loaded&&(n.sorted=!0)}}function ive(t,e){t.loading||nve(t),e.ready=!1,e.pm=new yt,e.vm1=new yt,e.vm2=new yt,e.viewport=new Xn;let n=new Uint32Array(t.bufferTextureWidth*t.bufferTextureHeight);const r=new ml(n,1,!1);r.setUsage(Zi);const i=e.geometry=new kg,s=new Float32Array(6*3),o=new Qt(s,3);i.setAttribute("position",o),o.setXYZ(2,-2,2,0),o.setXYZ(1,2,2,0),o.setXYZ(0,-2,-2,0),o.setXYZ(5,-2,-2,0),o.setXYZ(4,2,2,0),o.setXYZ(3,2,-2,0),o.needsUpdate=!0,i.setAttribute("splatIndex",r),i.instanceCount=1;function a(c){if(e&&c.data.key===e.uuid){let u=new Uint32Array(c.data.indices);i.attributes.splatIndex.set(u),i.attributes.splatIndex.needsUpdate=!0,i.instanceCount=u.length,e.ready=!0}}t.worker.addEventListener("message",a);async function l(){for(;;){const c=t.gl.properties.get(t.centerAndScaleTexture),u=t.gl.properties.get(t.covAndColorTexture);if(c!=null&&c.__webglTexture&&u!=null&&u.__webglTexture&&t.loadedVertexCount>0)break;await new Promise(f=>setTimeout(f,10))}e.ready=!0}return l(),()=>t.worker.removeEventListener("message",a)}function aP(t,e,n){const r=t.gl.getContext();if(t.loadedVertexCount+n>t.maxVertexes&&(n=t.maxVertexes-t.loadedVertexCount),n<=0)throw"Failed to parse file";const i=new Uint8Array(e),s=new Float32Array(e),o=new Float32Array(n*16),a=new Uint8Array(t.covAndColorData.buffer),l=new Int16Array(t.covAndColorData.buffer);for(let c=0;c<n;c++){const u=new kn(-(i[32*c+28+1]-128)/128,(i[32*c+28+2]-128)/128,(i[32*c+28+3]-128)/128,-(i[32*c+28+0]-128)/128);u.invert();const f=new J(s[8*c+0],s[8*c+1],-s[8*c+2]),h=new J(s[8*c+3+0],s[8*c+3+1],s[8*c+3+2]),d=new yt;d.makeRotationFromQuaternion(u),d.transpose(),d.scale(h);const p=d.clone();d.transpose(),d.premultiply(p),d.setPosition(f);const m=[0,1,2,5,6,10];let g=0;for(let y=0;y<m.length;y++)Math.abs(d.elements[m[y]])>g&&(g=Math.abs(d.elements[m[y]]));let v=t.loadedVertexCount*4+c*4;t.centerAndScaleData[v+0]=f.x,t.centerAndScaleData[v+1]=-f.y,t.centerAndScaleData[v+2]=f.z,t.centerAndScaleData[v+3]=g/32767,v=t.loadedVertexCount*8+c*4*2;for(let y=0;y<m.length;y++)l[v+y]=d.elements[m[y]]*32767/g;v=t.loadedVertexCount*16+(c*4+3)*4;const x=new bt(i[32*c+24+0]/255,i[32*c+24+1]/255,i[32*c+24+2]/255);x.convertSRGBToLinear(),a[v+0]=x.r*255,a[v+1]=x.g*255,a[v+2]=x.b*255,a[v+3]=i[32*c+24+3],d.elements[15]=Math.max(h.x,h.y,h.z)*i[32*c+24+3]/255;for(let y=0;y<16;y++)o[c*16+y]=d.elements[y]}for(;n>0;){let c=0,u=0;const f=t.loadedVertexCount%t.bufferTextureWidth,h=Math.floor(t.loadedVertexCount/t.bufferTextureWidth);t.loadedVertexCount%t.bufferTextureWidth!=0?(c=Math.min(t.bufferTextureWidth,f+n)-f,u=1):Math.floor(n/t.bufferTextureWidth)>0?(c=t.bufferTextureWidth,u=Math.floor(n/t.bufferTextureWidth)):(c=n%t.bufferTextureWidth,u=1);const d=t.gl.properties.get(t.centerAndScaleTexture);r.bindTexture(r.TEXTURE_2D,d.__webglTexture),r.texSubImage2D(r.TEXTURE_2D,0,f,h,c,u,r.RGBA,r.FLOAT,t.centerAndScaleData,t.loadedVertexCount*4);const p=t.gl.properties.get(t.covAndColorTexture);r.bindTexture(r.TEXTURE_2D,p.__webglTexture),r.texSubImage2D(r.TEXTURE_2D,0,f,h,c,u,r.RGBA_INTEGER,r.UNSIGNED_INT,t.covAndColorData,t.loadedVertexCount*4),t.gl.resetState(),t.loadedVertexCount+=c*u,n-=c*u}return o}function lP({src:t,toneMapped:e=!1,alphaTest:n=0,alphaHash:r=!1,chunkSize:i=25e3,...s}){Fi({SplatMaterial:oP});const o=E.useRef(null),a=wt(u=>u.gl),l=wt(u=>u.camera),c=ys(eve,t,u=>{u.gl=a,u.chunkSize=i});return E.useLayoutEffect(()=>c.connect(o.current),[t]),rn(()=>c.update(o.current,l,r)),E.createElement("mesh",Ct({ref:o,frustumCulled:!1},s),E.createElement("splatMaterial",{key:`${t}/${n}/${r}${oP.key}`,transparent:!r,depthTest:!0,alphaTest:r?0:n,centerAndScaleTexture:c.centerAndScaleTexture,covAndColorTexture:c.covAndColorTexture,depthWrite:r?!0:n>0,blending:r?Vl:NE,blendSrcAlpha:OE,alphaHash:!!r,toneMapped:e}))}function Do(t,e,n){const r=wt(h=>h.size),i=wt(h=>h.viewport),s=typeof t=="number"?t:r.width*i.dpr,o=typeof e=="number"?e:r.height*i.dpr,a=(typeof t=="number"?n:t)||{},{samples:l=0,depth:c,...u}=a,f=E.useMemo(()=>{const h=new pr(s,o,{minFilter:Cn,magFilter:Cn,type:Xr,...u});return c&&(h.depthTexture=new Ig(s,o,fr)),h.samples=l,h},[]);return E.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),E.useEffect(()=>()=>f.dispose(),[]),f}const sve=t=>typeof t=="function",b_=E.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,children:r,makeDefault:i,...s},o)=>{const a=wt(({set:g})=>g),l=wt(({camera:g})=>g),c=wt(({size:g})=>g),u=E.useRef(null);E.useImperativeHandle(o,()=>u.current,[]);const f=E.useRef(null),h=Do(e);E.useLayoutEffect(()=>{s.manual||u.current.updateProjectionMatrix()},[c,s]),E.useLayoutEffect(()=>{u.current.updateProjectionMatrix()}),E.useLayoutEffect(()=>{if(i){const g=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:g}))}},[u,i,a]);let d=0,p=null;const m=sve(r);return rn(g=>{m&&(n===1/0||d<n)&&(f.current.visible=!1,g.gl.setRenderTarget(h),p=g.scene.background,t&&(g.scene.background=t),g.gl.render(g.scene,u.current),g.scene.background=p,g.gl.setRenderTarget(null),f.current.visible=!0,d++)}),E.createElement(E.Fragment,null,E.createElement("orthographicCamera",Ct({left:c.width/-2,right:c.width/2,top:c.height/2,bottom:c.height/-2,ref:u},s),!m&&r),E.createElement("group",{ref:f},m&&r(h.texture)))}),ove=t=>typeof t=="function",RH=E.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:r,children:i,...s},o)=>{const a=wt(({set:g})=>g),l=wt(({camera:g})=>g),c=wt(({size:g})=>g),u=E.useRef(null);E.useImperativeHandle(o,()=>u.current,[]);const f=E.useRef(null),h=Do(e);E.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),E.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let d=0,p=null;const m=ove(i);return rn(g=>{m&&(n===1/0||d<n)&&(f.current.visible=!1,g.gl.setRenderTarget(h),p=g.scene.background,t&&(g.scene.background=t),g.gl.render(g.scene,u.current),g.scene.background=p,g.gl.setRenderTarget(null),f.current.visible=!0,d++)}),E.useLayoutEffect(()=>{if(r){const g=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:g}))}},[u,r,a]),E.createElement(E.Fragment,null,E.createElement("perspectiveCamera",Ct({ref:u},s),!m&&i),E.createElement("group",{ref:f},m&&i(h.texture)))});function ave({resolution:t=256,near:e=.1,far:n=1e3,envMap:r,fog:i}={}){const s=wt(({gl:h})=>h),o=wt(({scene:h})=>h),a=E.useMemo(()=>{const h=new Zp(t);return h.texture.type=Xr,h},[t]);E.useEffect(()=>()=>{a.dispose()},[a]);const l=E.useMemo(()=>new zE(e,n,a),[e,n,a]);let c,u;const f=E.useCallback(()=>{c=o.fog,u=o.background,o.background=r||u,o.fog=i||c,l.update(s,o),o.fog=c,o.background=u},[s,o,l]);return{fbo:a,camera:l,update:f}}function lve({children:t,frames:e=1/0,resolution:n,near:r,far:i,envMap:s,fog:o,...a}){const l=E.useRef(null),{fbo:c,camera:u,update:f}=ave({resolution:n,near:r,far:i,envMap:s,fog:o});let h=0;return rn(()=>{l.current&&(e===1/0||h<e)&&(l.current.visible=!1,f(),l.current.visible=!0,h++)}),E.createElement("group",a,E.createElement("primitive",{object:u}),E.createElement("group",{ref:l},t(c.texture)))}const cve=E.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const f=wt(w=>w.invalidate),h=wt(w=>w.camera),d=wt(w=>w.gl),p=wt(w=>w.events),m=wt(w=>w.setEvents),g=wt(w=>w.set),v=wt(w=>w.get),x=wt(w=>w.performance),y=e||h,A=r||p.connected||d.domElement,T=E.useMemo(()=>new Kme(y),[y]);return rn(()=>{T.enabled&&T.update()},-1),E.useEffect(()=>(s&&T.connect(s===!0?A:s),T.connect(A),()=>void T.dispose()),[s,A,n,T,f]),E.useEffect(()=>{const w=S=>{f(),n&&x.regress(),o&&o(S)},M=S=>{a&&a(S)},C=S=>{l&&l(S)};return T.addEventListener("change",w),T.addEventListener("start",M),T.addEventListener("end",C),()=>{T.removeEventListener("start",M),T.removeEventListener("end",C),T.removeEventListener("change",w)}},[o,a,l,T,f,m]),E.useEffect(()=>{if(t){const w=v().controls;return g({controls:T}),()=>g({controls:w})}},[t,T]),E.createElement("primitive",Ct({ref:u,object:T,enableDamping:i},c))});function uve({defaultScene:t,defaultCamera:e,renderPriority:n=1}){const{gl:r,scene:i,camera:s}=wt();let o;return rn(()=>{o=r.autoClear,n===1&&(r.autoClear=!0,r.render(t,e)),r.autoClear=!1,r.clearDepth(),r.render(i,s),r.autoClear=o},n),E.createElement("group",{onPointerOver:()=>null})}function IH({children:t,renderPriority:e=1}){const{scene:n,camera:r}=wt(),[i]=E.useState(()=>new vs);return E.createElement(E.Fragment,null,Hc(E.createElement(E.Fragment,null,t,E.createElement(uve,{defaultScene:n,defaultCamera:r,renderPriority:e})),i,{events:{priority:e+1}}))}const PH=E.createContext({}),fve=()=>E.useContext(PH),hve=2*Math.PI,k2=new hn,cP=new yt,[Ad,F2]=[new kn,new kn],uP=new J,fP=new J,dve=t=>"minPolarAngle"in t,pve=({alignment:t="bottom-right",margin:e=[80,80],renderPriority:n=1,onUpdate:r,onTarget:i,children:s})=>{const o=wt(w=>w.size),a=wt(w=>w.camera),l=wt(w=>w.controls),c=wt(w=>w.invalidate),u=E.useRef(null),f=E.useRef(null),h=E.useRef(!1),d=E.useRef(0),p=E.useRef(new J(0,0,0)),m=E.useRef(new J(0,0,0));E.useEffect(()=>{m.current.copy(a.up)},[a]);const g=E.useCallback(w=>{h.current=!0,(l||i)&&(p.current=(l==null?void 0:l.target)||(i==null?void 0:i())),d.current=a.position.distanceTo(uP),Ad.copy(a.quaternion),fP.copy(w).multiplyScalar(d.current).add(uP),k2.lookAt(fP),k2.up.copy(a.up),F2.copy(k2.quaternion),c()},[l,a,i,c]);rn((w,M)=>{if(f.current&&u.current){var C;if(h.current)if(Ad.angleTo(F2)<.01)h.current=!1,dve(l)&&a.up.copy(m.current);else{const S=M*hve;Ad.rotateTowards(F2,S),a.position.set(0,0,1).applyQuaternion(Ad).multiplyScalar(d.current).add(p.current),a.up.set(0,1,0).applyQuaternion(Ad).normalize(),a.quaternion.copy(Ad),r?r():l&&l.update(),c()}cP.copy(a.matrix).invert(),(C=u.current)==null||C.quaternion.setFromRotationMatrix(cP)}});const v=E.useMemo(()=>({tweenCamera:g}),[g]),[x,y]=e,A=t.endsWith("-center")?0:t.endsWith("-left")?-o.width/2+x:o.width/2-x,T=t.startsWith("center-")?0:t.startsWith("top-")?o.height/2-y:-o.height/2+y;return E.createElement(IH,{renderPriority:n},E.createElement(PH.Provider,{value:v},E.createElement(b_,{makeDefault:!0,ref:f,position:[0,0,200]}),E.createElement("group",{ref:u,position:[A,T,0]},s)))};function U2({scale:t=[.8,.05,.05],color:e,rotation:n}){return E.createElement("group",{rotation:n},E.createElement("mesh",{position:[.4,0,0]},E.createElement("boxGeometry",{args:t}),E.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function Td({onClick:t,font:e,disabled:n,arcStyle:r,label:i,labelColor:s,axisHeadScale:o=1,...a}){const l=wt(m=>m.gl),c=E.useMemo(()=>{const m=document.createElement("canvas");m.width=64,m.height=64;const g=m.getContext("2d");return g.beginPath(),g.arc(32,32,16,0,2*Math.PI),g.closePath(),g.fillStyle=r,g.fill(),i&&(g.font=e,g.textAlign="center",g.fillStyle=s,g.fillText(i,32,41)),new OF(m)},[r,i,s,e]),[u,f]=E.useState(!1),h=(i?1:.75)*(u?1.2:1)*o,d=m=>{m.stopPropagation(),f(!0)},p=m=>{m.stopPropagation(),f(!1)};return E.createElement("sprite",Ct({scale:h,onPointerOver:n?void 0:d,onPointerOut:n?void 0:t||p},a),E.createElement("spriteMaterial",{map:c,"map-anisotropy":l.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:i?1:.75,toneMapped:!1}))}const mve=({hideNegativeAxes:t,hideAxisHeads:e,disabled:n,font:r="18px Inter var, Arial, sans-serif",axisColors:i=["#ff2060","#20df80","#2080ff"],axisHeadScale:s=1,axisScale:o,labels:a=["X","Y","Z"],labelColor:l="#000",onClick:c,...u})=>{const[f,h,d]=i,{tweenCamera:p}=fve(),m={font:r,disabled:n,labelColor:l,onClick:c,axisHeadScale:s,onPointerDown:n?void 0:g=>{p(g.object.position),g.stopPropagation()}};return E.createElement("group",Ct({scale:40},u),E.createElement(U2,{color:f,rotation:[0,0,0],scale:o}),E.createElement(U2,{color:h,rotation:[0,0,Math.PI/2],scale:o}),E.createElement(U2,{color:d,rotation:[0,-Math.PI/2,0],scale:o}),!e&&E.createElement(E.Fragment,null,E.createElement(Td,Ct({arcStyle:f,position:[1,0,0],label:a[0]},m)),E.createElement(Td,Ct({arcStyle:h,position:[0,1,0],label:a[1]},m)),E.createElement(Td,Ct({arcStyle:d,position:[0,0,1],label:a[2]},m)),!t&&E.createElement(E.Fragment,null,E.createElement(Td,Ct({arcStyle:f,position:[-1,0,0]},m)),E.createElement(Td,Ct({arcStyle:h,position:[0,-1,0]},m)),E.createElement(Td,Ct({arcStyle:d,position:[0,0,-1]},m)))))},gve=Ga({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new bt,sectionColor:new bt,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new J,worldPlanePosition:new J},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${vo>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),vve=E.forwardRef(({args:t,cellColor:e="#000000",sectionColor:n="#2080ff",cellSize:r=.5,sectionSize:i=1,followCamera:s=!1,infiniteGrid:o=!1,fadeDistance:a=100,fadeStrength:l=1,fadeFrom:c=1,cellThickness:u=.5,sectionThickness:f=1,side:h=Ti,...d},p)=>{Fi({GridMaterial:gve});const m=E.useRef(null);E.useImperativeHandle(p,()=>m.current,[]);const g=new zs,v=new J(0,1,0),x=new J(0,0,0);rn(T=>{g.setFromNormalAndCoplanarPoint(v,x).applyMatrix4(m.current.matrixWorld);const w=m.current.material,M=w.uniforms.worldCamProjPosition,C=w.uniforms.worldPlanePosition;g.projectPoint(T.camera.position,M.value),C.value.set(0,0,0).applyMatrix4(m.current.matrixWorld)});const y={cellSize:r,sectionSize:i,cellColor:e,sectionColor:n,cellThickness:u,sectionThickness:f},A={fadeDistance:a,fadeStrength:l,fadeFrom:c,infiniteGrid:o,followCamera:s};return E.createElement("mesh",Ct({ref:m,frustumCulled:!1},d),E.createElement("gridMaterial",Ct({transparent:!0,"extensions-derivatives":!0,side:h},y,A)),E.createElement("planeGeometry",{args:t}))}),yve=t=>{if(Array.isArray(t))return t[0];if(typeof t=="object"&&t!==null){const e=Object.keys(t);return t[e[0]][0]}else return{w:0,h:0}},hP=(t,e,n,r)=>{const i=e*(r.aspect>t/e?r.width/t:r.height/e),o=t*(r.aspect>t/e?r.width/t:r.height/e)*n,a=i*n,l=1;let c=Math.min(l,o),u=Math.min(l,a);return o>l&&(c=l,u=a/o*l),new J(c,u,1)};function fC(t,e,n,r,i){const s=wt(T=>T.viewport),o=E.useRef(null),a=E.useRef(0),l=.1,[c,u]=E.useState(null),[f,h]=E.useState(new Vn),d=new Ki,[p,m]=E.useState(null);E.useLayoutEffect(()=>(e&&t?x(e,t,y):t&&v(),()=>{t&&ys.clear(Ki,t)}),[]);function g(T,w){w&&T?x(w,T,y):v(T)}function v(T){(T||t)&&new Promise(w=>{d.load(T??t,w)}).then(w=>{y(null,w)})}function x(T,w,M){const C=fetch(T).then(R=>R.json()),S=new Promise(R=>{d.load(w,R)});Promise.all([C,S]).then(R=>{M(R[0],R[1])})}const y=(T,w)=>{let M=new J(1,1,1);if(T===null){if(w&&r){const C=w.image.width,S=w.image.height,R=C/r,O=S;if(a.current=r,o.current={frames:[],meta:{version:"1.0",size:{w:C,h:S},scale:"1"}},parseInt(R.toString(),10)===R)for(let L=0;L<r;L++)o.current.frames.push({frame:{x:L*R,y:0,w:R,h:O},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:R,h:O},sourceSize:{w:R,h:S}});M=hP(R,O,l,s)}}else if(w){o.current=T,o.current.frames=A(),a.current=Array.isArray(T.frames)?T.frames.length:Object.keys(T.frames).length;const{w:C,h:S}=yve(T.frames).sourceSize;M=hP(C,S,l,s)}u(o.current),"encoding"in w?w.encoding=3001:w.colorSpace="srgb",h(w),m({spriteTexture:w,spriteData:o.current,aspect:M})},A=()=>{const T={},w=o.current,M=n;if(M&&Array.isArray(w.frames)){for(let C=0;C<M.length;C++){T[M[C]]=[];for(const S of w.frames){const R=S.frame,O=R.x,L=R.y,B=R.w,N=R.h,$=S.sourceSize.w,U=S.sourceSize.h;typeof S.filename=="string"&&S.filename.toLowerCase().indexOf(M[C].toLowerCase())!==-1&&T[M[C]].push({x:O,y:L,w:B,h:N,frame:R,sourceSize:{w:$,h:U}})}}return T}else if(M&&typeof w.frames=="object"){for(let C=0;C<M.length;C++){T[M[C]]=[];for(const S in w.frames){const R=w.frames[S],O=R.frame,L=O.x,B=O.y,N=O.w,$=O.h,U=R.sourceSize.w,Q=R.sourceSize.h;typeof S=="string"&&S.toLowerCase().indexOf(M[C].toLowerCase())!==-1&&T[M[C]].push({x:L,y:B,w:N,h:$,frame:O,sourceSize:{w:U,h:Q}})}}return T}else{const C=[];for(const S in w.frames)C.push(w.frames[S]);return C}};return E.useLayoutEffect(()=>{i==null||i(f,c)},[f,c]),{spriteObj:p,loadJsonAndTexture:g}}fC.preload=t=>ys.preload(Ki,t);fC.clear=t=>ys.clear(Ki,t);var LH={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Cr,function(){var n=function(){function r(d){return o.appendChild(d.dom),d}function i(d){for(var p=0;p<o.children.length;p++)o.children[p].style.display=p===d?"block":"none";s=d}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(d){d.preventDefault(),i(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,c=0,u=r(new n.Panel("FPS","#0ff","#002")),f=r(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=r(new n.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:o,addPanel:r,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){c++;var d=(performance||Date).now();if(f.update(d-a,200),d>l+1e3&&(u.update(1e3*c/(d-l),100),l=d,c=0,h)){var p=performance.memory;h.update(p.usedJSHeapSize/1048576,p.jsHeapSizeLimit/1048576)}return d},update:function(){a=this.end()},domElement:o,setMode:i}};return n.Panel=function(r,i,s){var o=1/0,a=0,l=Math.round,c=l(window.devicePixelRatio||1),u=80*c,f=48*c,h=3*c,d=2*c,p=3*c,m=15*c,g=74*c,v=30*c,x=document.createElement("canvas");x.width=u,x.height=f,x.style.cssText="width:80px;height:48px";var y=x.getContext("2d");return y.font="bold "+9*c+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=s,y.fillRect(0,0,u,f),y.fillStyle=i,y.fillText(r,h,d),y.fillRect(p,m,g,v),y.fillStyle=s,y.globalAlpha=.9,y.fillRect(p,m,g,v),{dom:x,update:function(A,T){o=Math.min(o,A),a=Math.max(a,A),y.fillStyle=s,y.globalAlpha=1,y.fillRect(0,0,u,m),y.fillStyle=i,y.fillText(l(A)+" "+r+" ("+l(o)+"-"+l(a)+")",h,d),y.drawImage(x,p+c,m,g-c,v,p,m,g-c,v),y.fillRect(p+g-c,m,c,v),y.fillStyle=s,y.globalAlpha=.9,y.fillRect(p+g-c,m,c,l((1-A/T)*v))}}},n})})(LH);var xve=LH.exports;const Eve=go(xve);function dP(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function _ve(t,e=[],n){const[r,i]=E.useState();return E.useLayoutEffect(()=>{const s=t();return i(s),dP(n,s),()=>dP(n,null)},e),r}function bve({showPanel:t=0,className:e,parent:n}){const r=_ve(()=>new Eve,[]);return E.useEffect(()=>{if(r){const i=n&&n.current||document.body;r.showPanel(t),i==null||i.appendChild(r.dom),e&&r.dom.classList.add(...e.split(" ").filter(a=>a));const s=j5(()=>r.begin()),o=d_(()=>r.end());return()=>{i==null||i.removeChild(r.dom),s(),o()}}},[n,r,e,t]),null}class Ave{constructor(e,n,r){this.name=e,this.fg=n,this.bg=r,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=90*this.PR,this.canvas.height=48*this.PR,this.canvas.style.width="90px",this.canvas.style.position="absolute",this.canvas.style.height="48px",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(e,n,r,i,s=0){let o=1/0,a=0;this.context&&(o=Math.min(o,e),a=Math.max(r,e),i=Math.max(i,n),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(e.toFixed(s)+" "+this.name+" ("+o.toFixed(s)+"-"+parseFloat(a.toFixed(s))+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,(1-n/i)*this.GRAPH_HEIGHT))}}const NH=class tp{constructor({logsPerSecond:e=20,samplesLog:n=100,samplesGraph:r=10,precision:i=2,minimal:s=!1,horizontal:o=!0,mode:a=0}={}){this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalGpuDurationCompute=0,this.totalFps=0,this.activeQuery=null,this.gpuQueries=[],this.renderCount=0,this.mode=a,this.horizontal=o,this.dom=document.createElement("div"),this.dom.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000;",s&&(this.dom.style.cssText+="cursor:pointer"),this.gl=null,this.query=null,this.isRunningCPUProfiling=!1,this.minimal=s,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.frames=0,this.renderCount=0,this.threeRendererPatched=!1,this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.averageGpuCompute={logs:[],graph:[]},this.queryCreated=!1,this.fpsPanel=this.addPanel(new tp.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new tp.Panel("CPU","#0f0","#020"),1),this.gpuPanel=null,this.gpuPanelCompute=null,this.samplesLog=n,this.samplesGraph=r,this.precision=i,this.logsPerSecond=e,this.minimal?(this.dom.addEventListener("click",l=>{l.preventDefault(),this.showPanel(++this.mode%this.dom.children.length)},!1),this.mode=a,this.showPanel(this.mode)):window.addEventListener("resize",()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2),this.gpuPanelCompute&&this.resizePanel(this.gpuPanelCompute,3)})}patchThreeRenderer(e){const n=e.render,r=this;e.render=function(i,s){r.begin(),n.call(this,i,s),r.end()},this.threeRendererPatched=!0}resizePanel(e,n){e.canvas.style.position="absolute",this.minimal?e.canvas.style.display="none":(e.canvas.style.display="block",this.horizontal?(e.canvas.style.top="0px",e.canvas.style.left=n*e.WIDTH/e.PR+"px"):(e.canvas.style.left="0px",e.canvas.style.top=n*e.HEIGHT/e.PR+"px"))}addPanel(e,n){return e.canvas&&(this.dom.appendChild(e.canvas),this.resizePanel(e,n)),e}showPanel(e){for(let n=0;n<this.dom.children.length;n++){const r=this.dom.children[n];r.style.display=n===e?"block":"none"}this.mode=e}async init(e){if(!e){console.error('Stats: The "canvas" parameter is undefined.');return}if(e.isWebGLRenderer&&!this.threeRendererPatched){const n=e;this.patchThreeRenderer(n),this.gl=n.getContext()}else!this.gl&&e instanceof WebGL2RenderingContext&&(this.gl=e);if(e.isWebGPURenderer){e.backend.trackTimestamp=!0,await e.hasFeatureAsync("timestamp-query")&&(this.gpuPanel=this.addPanel(new tp.Panel("GPU","#ff0","#220"),2),this.gpuPanelCompute=this.addPanel(new tp.Panel("CPT","#e1e1e1","#212121"),3),this.info=e.info);return}else if(!this.gl&&e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas){if(this.gl=e.getContext("webgl2"),!this.gl){console.error("Stats: Unable to obtain WebGL2 context.");return}}else if(!this.gl){console.error("Stats: Invalid input type. Expected WebGL2RenderingContext, HTMLCanvasElement, or OffscreenCanvas.");return}this.ext=this.gl.getExtension("EXT_disjoint_timer_query_webgl2"),this.ext&&(this.gpuPanel=this.addPanel(new tp.Panel("GPU","#ff0","#220"),2))}begin(){this.isRunningCPUProfiling||this.beginProfiling("cpu-started"),!(!this.gl||!this.ext)&&this.gl&&this.ext&&(this.activeQuery&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.activeQuery=this.gl.createQuery(),this.activeQuery!==null&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.activeQuery))}end(){this.renderCount++,this.gl&&this.ext&&this.activeQuery&&(this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.gpuQueries.push({query:this.activeQuery}),this.activeQuery=null)}processGpuQueries(){!this.gl||!this.ext||(this.totalGpuDuration=0,this.gpuQueries.forEach((e,n)=>{if(this.gl){const r=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT_AVAILABLE),i=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT);if(r&&!i){const o=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT)*1e-6;this.totalGpuDuration+=o,this.gl.deleteQuery(e.query),this.gpuQueries.splice(n,1)}}}))}update(){this.info===void 0?this.processGpuQueries():(this.totalGpuDuration=this.info.render.timestamp,this.totalGpuDurationCompute=this.info.compute.timestamp,this.addToAverage(this.totalGpuDurationCompute,this.averageGpuCompute)),this.endProfiling("cpu-started","cpu-finished","cpu-duration"),this.addToAverage(this.totalCpuDuration,this.averageCpu),this.addToAverage(this.totalGpuDuration,this.averageGpu),this.renderCount=0,this.totalCpuDuration===0&&this.beginProfiling("cpu-started"),this.totalCpuDuration=0,this.totalFps=0,this.beginTime=this.endInternal()}endInternal(){this.frames++;const e=(performance||Date).now();if(e>=this.prevCpuTime+1e3/this.logsPerSecond&&(this.updatePanel(this.msPanel,this.averageCpu),this.updatePanel(this.gpuPanel,this.averageGpu),this.gpuPanelCompute&&this.updatePanel(this.gpuPanelCompute,this.averageGpuCompute),this.prevCpuTime=e),e>=this.prevTime+1e3){const n=this.frames*1e3/(e-this.prevTime);this.fpsPanel.update(n,n,100,100,0),this.prevTime=e,this.frames=0}return e}addToAverage(e,n){n.logs.push(e),n.logs.length>this.samplesLog&&n.logs.shift(),n.graph.push(e),n.graph.length>this.samplesGraph&&n.graph.shift()}beginProfiling(e){window.performance&&(window.performance.mark(e),this.isRunningCPUProfiling=!0)}endProfiling(e,n,r){if(window.performance&&n&&this.isRunningCPUProfiling){window.performance.mark(n);const i=performance.measure(r,e,n);this.totalCpuDuration+=i.duration,this.isRunningCPUProfiling=!1}}updatePanel(e,n){if(n.logs.length>0){let r=0,i=.01;for(let a=0;a<n.logs.length;a++)r+=n.logs[a],n.logs[a]>i&&(i=n.logs[a]);let s=0,o=.01;for(let a=0;a<n.graph.length;a++)s+=n.graph[a],n.graph[a]>o&&(o=n.graph[a]);e&&e.update(r/Math.min(n.logs.length,this.samplesLog),s/Math.min(n.graph.length,this.samplesGraph),i,o,this.precision)}}get domElement(){return this.dom}get container(){return console.warn("Stats: Deprecated! this.container as been replaced to this.dom "),this.dom}};NH.Panel=Ave;let Tve=NH;function wve({className:t,parent:e,...n}){const r=wt(s=>s.gl),i=E.useMemo(()=>{const s=new Tve({...n});return s.init(r),s},[r]);return E.useEffect(()=>{if(i){const s=e&&e.current||document.body;s==null||s.appendChild(i.dom),t&&i.container.classList.add(...t.split(" ").filter(a=>a));const o=d_(()=>i.update());return()=>{s==null||s.removeChild(i.dom),o()}}},[e,i,t]),null}function cm(t,e,...n){const r=E.useRef(),i=wt(s=>s.scene);return E.useLayoutEffect(()=>{let s;if(t&&t!=null&&t.current&&e&&(r.current=s=new e(t.current,...n)),s)return s.traverse(o=>o.raycast=()=>null),i.add(s),()=>{r.current=void 0,i.remove(s),s.dispose==null||s.dispose()}},[i,e,t,...n]),rn(()=>{var s;return void((s=r.current)==null||s.update==null?void 0:s.update())}),r}const OH=0,Sve=1,hC=2,pP=2,z2=1.25,mP=1,Lu=6*4+4+4,A_=65535,Cve=Math.pow(2,-24),H2=Symbol("SKIP_GENERATION");function DH(t){return t.index?t.index.count:t.attributes.position.count}function um(t){return DH(t)/3}function BH(t,e=ArrayBuffer){return t>65535?new Uint32Array(new e(4*t)):new Uint16Array(new e(2*t))}function Mve(t,e){if(!t.index){const n=t.attributes.position.count,r=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,i=BH(n,r);t.setIndex(new Qt(i,1));for(let s=0;s<n;s++)i[s]=s}}function kH(t){const e=um(t),n=t.drawRange,r=n.start/3,i=(n.start+n.count)/3,s=Math.max(0,r),o=Math.min(e,i)-s;return[{offset:Math.floor(s),count:Math.floor(o)}]}function FH(t){if(!t.groups||!t.groups.length)return kH(t);const e=[],n=new Set,r=t.drawRange,i=r.start/3,s=(r.start+r.count)/3;for(const a of t.groups){const l=a.start/3,c=(a.start+a.count)/3;n.add(Math.max(i,l)),n.add(Math.min(s,c))}const o=Array.from(n.values()).sort((a,l)=>a-l);for(let a=0;a<o.length-1;a++){const l=o[a],c=o[a+1];e.push({offset:Math.floor(l),count:Math.floor(c-l)})}return e}function Rve(t){if(t.groups.length===0)return!1;const e=um(t),n=FH(t).sort((s,o)=>s.offset-o.offset),r=n[n.length-1];r.count=Math.min(e-r.offset,r.count);let i=0;return n.forEach(({count:s})=>i+=s),e!==i}function G2(t,e,n,r,i){let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0,f=1/0,h=1/0,d=1/0,p=-1/0,m=-1/0,g=-1/0;for(let v=e*6,x=(e+n)*6;v<x;v+=6){const y=t[v+0],A=t[v+1],T=y-A,w=y+A;T<s&&(s=T),w>l&&(l=w),y<f&&(f=y),y>p&&(p=y);const M=t[v+2],C=t[v+3],S=M-C,R=M+C;S<o&&(o=S),R>c&&(c=R),M<h&&(h=M),M>m&&(m=M);const O=t[v+4],L=t[v+5],B=O-L,N=O+L;B<a&&(a=B),N>u&&(u=N),O<d&&(d=O),O>g&&(g=O)}r[0]=s,r[1]=o,r[2]=a,r[3]=l,r[4]=c,r[5]=u,i[0]=f,i[1]=h,i[2]=d,i[3]=p,i[4]=m,i[5]=g}function Ive(t,e=null,n=null,r=null){const i=t.attributes.position,s=t.index?t.index.array:null,o=um(t),a=i.normalized;let l;e===null?(l=new Float32Array(o*6*4),n=0,r=o):(l=e,n=n||0,r=r||o);const c=i.array,u=i.offset||0;let f=3;i.isInterleavedBufferAttribute&&(f=i.data.stride);const h=["getX","getY","getZ"];for(let d=n;d<n+r;d++){const p=d*3,m=d*6;let g=p+0,v=p+1,x=p+2;s&&(g=s[g],v=s[v],x=s[x]),a||(g=g*f+u,v=v*f+u,x=x*f+u);for(let y=0;y<3;y++){let A,T,w;a?(A=i[h[y]](g),T=i[h[y]](v),w=i[h[y]](x)):(A=c[g+y],T=c[v+y],w=c[x+y]);let M=A;T<M&&(M=T),w<M&&(M=w);let C=A;T>C&&(C=T),w>C&&(C=w);const S=(C-M)/2,R=y*2;l[m+R+0]=M+S,l[m+R+1]=S+(Math.abs(M)+S)*Cve}}return l}function bi(t,e,n){return n.min.x=e[t],n.min.y=e[t+1],n.min.z=e[t+2],n.max.x=e[t+3],n.max.y=e[t+4],n.max.z=e[t+5],n}function gP(t){let e=-1,n=-1/0;for(let r=0;r<3;r++){const i=t[r+3]-t[r];i>n&&(n=i,e=r)}return e}function vP(t,e){e.set(t)}function yP(t,e,n){let r,i;for(let s=0;s<3;s++){const o=s+3;r=t[s],i=e[s],n[s]=r<i?r:i,r=t[o],i=e[o],n[o]=r>i?r:i}}function tx(t,e,n){for(let r=0;r<3;r++){const i=e[t+2*r],s=e[t+2*r+1],o=i-s,a=i+s;o<n[r]&&(n[r]=o),a>n[r+3]&&(n[r+3]=a)}}function w0(t){const e=t[3]-t[0],n=t[4]-t[1],r=t[5]-t[2];return 2*(e*n+n*r+r*e)}const yc=32,Pve=(t,e)=>t.candidate-e.candidate,mu=new Array(yc).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),nx=new Float32Array(6);function Lve(t,e,n,r,i,s){let o=-1,a=0;if(s===OH)o=gP(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===Sve)o=gP(t),o!==-1&&(a=Nve(n,r,i,o));else if(s===hC){const l=w0(t);let c=z2*i;const u=r*6,f=(r+i)*6;for(let h=0;h<3;h++){const d=e[h],g=(e[h+3]-d)/yc;if(i<yc/4){const v=[...mu];v.length=i;let x=0;for(let A=u;A<f;A+=6,x++){const T=v[x];T.candidate=n[A+2*h],T.count=0;const{bounds:w,leftCacheBounds:M,rightCacheBounds:C}=T;for(let S=0;S<3;S++)C[S]=1/0,C[S+3]=-1/0,M[S]=1/0,M[S+3]=-1/0,w[S]=1/0,w[S+3]=-1/0;tx(A,n,w)}v.sort(Pve);let y=i;for(let A=0;A<y;A++){const T=v[A];for(;A+1<y&&v[A+1].candidate===T.candidate;)v.splice(A+1,1),y--}for(let A=u;A<f;A+=6){const T=n[A+2*h];for(let w=0;w<y;w++){const M=v[w];T>=M.candidate?tx(A,n,M.rightCacheBounds):(tx(A,n,M.leftCacheBounds),M.count++)}}for(let A=0;A<y;A++){const T=v[A],w=T.count,M=i-T.count,C=T.leftCacheBounds,S=T.rightCacheBounds;let R=0;w!==0&&(R=w0(C)/l);let O=0;M!==0&&(O=w0(S)/l);const L=mP+z2*(R*w+O*M);L<c&&(o=h,c=L,a=T.candidate)}}else{for(let y=0;y<yc;y++){const A=mu[y];A.count=0,A.candidate=d+g+y*g;const T=A.bounds;for(let w=0;w<3;w++)T[w]=1/0,T[w+3]=-1/0}for(let y=u;y<f;y+=6){let w=~~((n[y+2*h]-d)/g);w>=yc&&(w=yc-1);const M=mu[w];M.count++,tx(y,n,M.bounds)}const v=mu[yc-1];vP(v.bounds,v.rightCacheBounds);for(let y=yc-2;y>=0;y--){const A=mu[y],T=mu[y+1];yP(A.bounds,T.rightCacheBounds,A.rightCacheBounds)}let x=0;for(let y=0;y<yc-1;y++){const A=mu[y],T=A.count,w=A.bounds,C=mu[y+1].rightCacheBounds;T!==0&&(x===0?vP(w,nx):yP(w,nx,nx)),x+=T;let S=0,R=0;x!==0&&(S=w0(nx)/l);const O=i-x;O!==0&&(R=w0(C)/l);const L=mP+z2*(S*x+R*O);L<c&&(o=h,c=L,a=A.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function Nve(t,e,n,r){let i=0;for(let s=e,o=e+n;s<o;s++)i+=t[s*6+r*2];return i/n}class V2{constructor(){this.boundingData=new Float32Array(6)}}function Ove(t,e,n,r,i,s){let o=r,a=r+i-1;const l=s.pos,c=s.axis*2;for(;;){for(;o<=a&&n[o*6+c]<l;)o++;for(;o<=a&&n[a*6+c]>=l;)a--;if(o<a){for(let u=0;u<3;u++){let f=e[o*3+u];e[o*3+u]=e[a*3+u],e[a*3+u]=f}for(let u=0;u<6;u++){let f=n[o*6+u];n[o*6+u]=n[a*6+u],n[a*6+u]=f}o++,a--}else return o}}function Dve(t,e,n,r,i,s){let o=r,a=r+i-1;const l=s.pos,c=s.axis*2;for(;;){for(;o<=a&&n[o*6+c]<l;)o++;for(;o<=a&&n[a*6+c]>=l;)a--;if(o<a){let u=t[o];t[o]=t[a],t[a]=u;for(let f=0;f<6;f++){let h=n[o*6+f];n[o*6+f]=n[a*6+f],n[a*6+f]=h}o++,a--}else return o}}function fo(t,e){return e[t+15]===65535}function Bo(t,e){return e[t+6]}function Zo(t,e){return e[t+14]}function La(t){return t+8}function ea(t,e){return e[t+6]}function dC(t,e){return e[t+7]}let UH,n1,a3,zH;const Bve=Math.pow(2,32);function $S(t){return"count"in t?1:1+$S(t.left)+$S(t.right)}function kve(t,e,n){return UH=new Float32Array(n),n1=new Uint32Array(n),a3=new Uint16Array(n),zH=new Uint8Array(n),XS(t,e)}function XS(t,e){const n=t/4,r=t/2,i="count"in e,s=e.boundingData;for(let o=0;o<6;o++)UH[n+o]=s[o];if(i)if(e.buffer){const o=e.buffer;zH.set(new Uint8Array(o),t);for(let a=t,l=t+o.byteLength;a<l;a+=Lu){const c=a/2;fo(c,a3)||(n1[a/4+6]+=n)}return t+o.byteLength}else{const o=e.offset,a=e.count;return n1[n+6]=o,a3[r+14]=a,a3[r+15]=A_,t+Lu}else{const o=e.left,a=e.right,l=e.splitAxis;let c;if(c=XS(t+Lu,o),c/4>Bve)throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n1[n+6]=c/4,c=XS(c,a),n1[n+7]=l,c}}function Fve(t,e){const n=(t.index?t.index.count:t.attributes.position.count)/3,r=n>2**16,i=r?4:2,s=e?new SharedArrayBuffer(n*i):new ArrayBuffer(n*i),o=r?new Uint32Array(s):new Uint16Array(s);for(let a=0,l=o.length;a<l;a++)o[a]=a;return o}function Uve(t,e,n,r,i){const{maxDepth:s,verbose:o,maxLeafTris:a,strategy:l,onProgress:c,indirect:u}=i,f=t._indirectBuffer,h=t.geometry,d=h.index?h.index.array:null,p=u?Dve:Ove,m=um(h),g=new Float32Array(6);let v=!1;const x=new V2;return G2(e,n,r,x.boundingData,g),A(x,n,r,g),x;function y(T){c&&c(T/m)}function A(T,w,M,C=null,S=0){if(!v&&S>=s&&(v=!0,o&&(console.warn(`MeshBVH: Max depth of ${s} reached when generating BVH. Consider increasing maxDepth.`),console.warn(h))),M<=a||S>=s)return y(w+M),T.offset=w,T.count=M,T;const R=Lve(T.boundingData,C,e,w,M,l);if(R.axis===-1)return y(w+M),T.offset=w,T.count=M,T;const O=p(f,d,e,w,M,R);if(O===w||O===w+M)y(w+M),T.offset=w,T.count=M;else{T.splitAxis=R.axis;const L=new V2,B=w,N=O-w;T.left=L,G2(e,B,N,L.boundingData,g),A(L,B,N,g,S+1);const $=new V2,U=O,Q=M-N;T.right=$,G2(e,U,Q,$.boundingData,g),A($,U,Q,g,S+1)}return T}}function zve(t,e){const n=t.geometry;e.indirect&&(t._indirectBuffer=Fve(n,e.useSharedArrayBuffer),Rve(n)&&!e.verbose&&console.warn('MeshBVH: Provided geometry contains groups that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),t._indirectBuffer||Mve(n,e);const r=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,i=Ive(n),s=e.indirect?kH(n):FH(n);t._roots=s.map(o=>{const a=Uve(t,i,o.offset,o.count,e),l=$S(a),c=new r(Lu*l);return kve(0,a,c),c})}class Vc{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,n){let r=1/0,i=-1/0;for(let s=0,o=e.length;s<o;s++){const l=e[s][n];r=l<r?l:r,i=l>i?l:i}this.min=r,this.max=i}setFromPoints(e,n){let r=1/0,i=-1/0;for(let s=0,o=n.length;s<o;s++){const a=n[s],l=e.dot(a);r=l<r?l:r,i=l>i?l:i}this.min=r,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}}Vc.prototype.setFromBox=function(){const t=new J;return function(n,r){const i=r.min,s=r.max;let o=1/0,a=-1/0;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){t.x=i.x*l+s.x*(1-l),t.y=i.y*c+s.y*(1-c),t.z=i.z*u+s.z*(1-u);const f=n.dot(t);o=Math.min(f,o),a=Math.max(f,a)}this.min=o,this.max=a}}();const Hve=function(){const t=new J,e=new J,n=new J;return function(i,s,o){const a=i.start,l=t,c=s.start,u=e;n.subVectors(a,c),t.subVectors(i.end,i.start),e.subVectors(s.end,s.start);const f=n.dot(u),h=u.dot(l),d=u.dot(u),p=n.dot(l),g=l.dot(l)*d-h*h;let v,x;g!==0?v=(f*h-p*d)/g:v=0,x=(f+v*h)/d,o.x=v,o.y=x}}(),pC=function(){const t=new qe,e=new J,n=new J;return function(i,s,o,a){Hve(i,s,t);let l=t.x,c=t.y;if(l>=0&&l<=1&&c>=0&&c<=1){i.at(l,o),s.at(c,a);return}else if(l>=0&&l<=1){c<0?s.at(0,a):s.at(1,a),i.closestPointToPoint(a,!0,o);return}else if(c>=0&&c<=1){l<0?i.at(0,o):i.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let u;l<0?u=i.start:u=i.end;let f;c<0?f=s.start:f=s.end;const h=e,d=n;if(i.closestPointToPoint(f,!0,e),s.closestPointToPoint(u,!0,n),h.distanceToSquared(f)<=d.distanceToSquared(u)){o.copy(h),a.copy(f);return}else{o.copy(u),a.copy(d);return}}}}(),Gve=function(){const t=new J,e=new J,n=new zs,r=new dl;return function(s,o){const{radius:a,center:l}=s,{a:c,b:u,c:f}=o;if(r.start=c,r.end=u,r.closestPointToPoint(l,!0,t).distanceTo(l)<=a||(r.start=c,r.end=f,r.closestPointToPoint(l,!0,t).distanceTo(l)<=a)||(r.start=u,r.end=f,r.closestPointToPoint(l,!0,t).distanceTo(l)<=a))return!0;const m=o.getPlane(n);if(Math.abs(m.distanceToPoint(l))<=a){const v=m.projectPoint(l,e);if(o.containsPoint(v))return!0}return!1}}(),Vve=1e-15;function W2(t){return Math.abs(t)<Vve}class gl extends Xi{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new J),this.satBounds=new Array(4).fill().map(()=>new Vc),this.points=[this.a,this.b,this.c],this.sphere=new Fr,this.plane=new zs,this.needsUpdate=!0}intersectsSphere(e){return Gve(e,this)}update(){const e=this.a,n=this.b,r=this.c,i=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,i);const c=s[1],u=o[1];c.subVectors(e,n),u.setFromPoints(c,i);const f=s[2],h=o[2];f.subVectors(n,r),h.setFromPoints(f,i);const d=s[3],p=o[3];d.subVectors(r,e),p.setFromPoints(d,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}gl.prototype.closestPointToSegment=function(){const t=new J,e=new J,n=new dl;return function(i,s=null,o=null){const{start:a,end:l}=i,c=this.points;let u,f=1/0;for(let h=0;h<3;h++){const d=(h+1)%3;n.start.copy(c[h]),n.end.copy(c[d]),pC(n,i,t,e),u=t.distanceToSquared(e),u<f&&(f=u,s&&s.copy(t),o&&o.copy(e))}return this.closestPointToPoint(a,t),u=a.distanceToSquared(t),u<f&&(f=u,s&&s.copy(t),o&&o.copy(a)),this.closestPointToPoint(l,t),u=l.distanceToSquared(t),u<f&&(f=u,s&&s.copy(t),o&&o.copy(l)),Math.sqrt(f)}}();gl.prototype.intersectsTriangle=function(){const t=new gl,e=new Array(3),n=new Array(3),r=new Vc,i=new Vc,s=new J,o=new J,a=new J,l=new J,c=new J,u=new dl,f=new dl,h=new dl,d=new J;function p(m,g,v){const x=m.points;let y=0,A=-1;for(let T=0;T<3;T++){const{start:w,end:M}=u;w.copy(x[T]),M.copy(x[(T+1)%3]),u.delta(o);const C=W2(g.distanceToPoint(w));if(W2(g.normal.dot(o))&&C){v.copy(u),y=2;break}const S=g.intersectLine(u,d);if(!S&&C&&d.copy(w),(S||C)&&!W2(d.distanceTo(M))){if(y<=1)(y===1?v.start:v.end).copy(d),C&&(A=y);else if(y>=2){(A===1?v.start:v.end).copy(d),y=2;break}if(y++,y===2&&A===-1)break}}return y}return function(g,v=null,x=!1){this.needsUpdate&&this.update(),g.isExtendedTriangle?g.needsUpdate&&g.update():(t.copy(g),t.update(),g=t);const y=this.plane,A=g.plane;if(Math.abs(y.normal.dot(A.normal))>1-1e-10){const T=this.satBounds,w=this.satAxes;n[0]=g.a,n[1]=g.b,n[2]=g.c;for(let S=0;S<4;S++){const R=T[S],O=w[S];if(r.setFromPoints(O,n),R.isSeparated(r))return!1}const M=g.satBounds,C=g.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let S=0;S<4;S++){const R=M[S],O=C[S];if(r.setFromPoints(O,e),R.isSeparated(r))return!1}for(let S=0;S<4;S++){const R=w[S];for(let O=0;O<4;O++){const L=C[O];if(s.crossVectors(R,L),r.setFromPoints(s,e),i.setFromPoints(s,n),r.isSeparated(i))return!1}}return v&&(x||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),v.start.set(0,0,0),v.end.set(0,0,0)),!0}else{const T=p(this,A,f);if(T===1&&g.containsPoint(f.end))return v&&(v.start.copy(f.end),v.end.copy(f.end)),!0;if(T!==2)return!1;const w=p(g,y,h);if(w===1&&this.containsPoint(h.end))return v&&(v.start.copy(h.end),v.end.copy(h.end)),!0;if(w!==2)return!1;if(f.delta(a),h.delta(l),a.dot(l)<0){let B=h.start;h.start=h.end,h.end=B}const M=f.start.dot(a),C=f.end.dot(a),S=h.start.dot(a),R=h.end.dot(a),O=C<S,L=M<R;return M!==R&&S!==C&&O===L?!1:(v&&(c.subVectors(f.start,h.start),c.dot(a)>0?v.start.copy(f.start):v.start.copy(h.start),c.subVectors(f.end,h.end),c.dot(a)<0?v.end.copy(f.end):v.end.copy(h.end)),!0)}}}();gl.prototype.distanceToPoint=function(){const t=new J;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}();gl.prototype.distanceToTriangle=function(){const t=new J,e=new J,n=["a","b","c"],r=new dl,i=new dl;return function(o,a=null,l=null){const c=a||l?r:null;if(this.intersectsTriangle(o,c))return(a||l)&&(a&&c.getCenter(a),l&&c.getCenter(l)),0;let u=1/0;for(let f=0;f<3;f++){let h;const d=n[f],p=o[d];this.closestPointToPoint(p,t),h=p.distanceToSquared(t),h<u&&(u=h,a&&a.copy(t),l&&l.copy(p));const m=this[d];o.closestPointToPoint(m,t),h=m.distanceToSquared(t),h<u&&(u=h,a&&a.copy(m),l&&l.copy(t))}for(let f=0;f<3;f++){const h=n[f],d=n[(f+1)%3];r.set(this[h],this[d]);for(let p=0;p<3;p++){const m=n[p],g=n[(p+1)%3];i.set(o[m],o[g]),pC(r,i,t,e);const v=t.distanceToSquared(e);v<u&&(u=v,a&&a.copy(t),l&&l.copy(e))}}return Math.sqrt(u)}}();class yo{constructor(e,n,r){this.isOrientedBox=!0,this.min=new J,this.max=new J,this.matrix=new yt,this.invMatrix=new yt,this.points=new Array(8).fill().map(()=>new J),this.satAxes=new Array(3).fill().map(()=>new J),this.satBounds=new Array(3).fill().map(()=>new Vc),this.alignedSatBounds=new Array(3).fill().map(()=>new Vc),this.needsUpdate=!1,e&&this.min.copy(e),n&&this.max.copy(n),r&&this.matrix.copy(r)}set(e,n,r){this.min.copy(e),this.max.copy(n),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}yo.prototype.update=function(){return function(){const e=this.matrix,n=this.min,r=this.max,i=this.points;for(let c=0;c<=1;c++)for(let u=0;u<=1;u++)for(let f=0;f<=1;f++){const h=1*c|2*u|4*f,d=i[h];d.x=c?r.x:n.x,d.y=u?r.y:n.y,d.z=f?r.z:n.z,d.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=i[0];for(let c=0;c<3;c++){const u=o[c],f=s[c],h=1<<c,d=i[h];u.subVectors(a,d),f.setFromPoints(u,i)}const l=this.alignedSatBounds;l[0].setFromPointsField(i,"x"),l[1].setFromPointsField(i,"y"),l[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();yo.prototype.intersectsBox=function(){const t=new Vc;return function(n){this.needsUpdate&&this.update();const r=n.min,i=n.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(t.min=r.x,t.max=i.x,a[0].isSeparated(t)||(t.min=r.y,t.max=i.y,a[1].isSeparated(t))||(t.min=r.z,t.max=i.z,a[2].isSeparated(t)))return!1;for(let l=0;l<3;l++){const c=o[l],u=s[l];if(t.setFromBox(c,n),u.isSeparated(t))return!1}return!0}}();yo.prototype.intersectsTriangle=function(){const t=new gl,e=new Array(3),n=new Vc,r=new Vc,i=new J;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(t.copy(o),t.update(),o=t);const a=this.satBounds,l=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let h=0;h<3;h++){const d=a[h],p=l[h];if(n.setFromPoints(p,e),d.isSeparated(n))return!1}const c=o.satBounds,u=o.satAxes,f=this.points;for(let h=0;h<3;h++){const d=c[h],p=u[h];if(n.setFromPoints(p,f),d.isSeparated(n))return!1}for(let h=0;h<3;h++){const d=l[h];for(let p=0;p<4;p++){const m=u[p];if(i.crossVectors(d,m),n.setFromPoints(i,e),r.setFromPoints(i,f),n.isSeparated(r))return!1}}return!0}}();yo.prototype.closestPointToPoint=function(){return function(e,n){return this.needsUpdate&&this.update(),n.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),n}}();yo.prototype.distanceToPoint=function(){const t=new J;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}();yo.prototype.distanceToBox=function(){const t=["x","y","z"],e=new Array(12).fill().map(()=>new dl),n=new Array(12).fill().map(()=>new dl),r=new J,i=new J;return function(o,a=0,l=null,c=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(l||c)&&(o.getCenter(i),this.closestPointToPoint(i,r),o.closestPointToPoint(r,i),l&&l.copy(r),c&&c.copy(i)),0;const u=a*a,f=o.min,h=o.max,d=this.points;let p=1/0;for(let g=0;g<8;g++){const v=d[g];i.copy(v).clamp(f,h);const x=v.distanceToSquared(i);if(x<p&&(p=x,l&&l.copy(v),c&&c.copy(i),x<u))return Math.sqrt(x)}let m=0;for(let g=0;g<3;g++)for(let v=0;v<=1;v++)for(let x=0;x<=1;x++){const y=(g+1)%3,A=(g+2)%3,T=v<<y|x<<A,w=1<<g|v<<y|x<<A,M=d[T],C=d[w];e[m].set(M,C);const R=t[g],O=t[y],L=t[A],B=n[m],N=B.start,$=B.end;N[R]=f[R],N[O]=v?f[O]:h[O],N[L]=x?f[L]:h[O],$[R]=h[R],$[O]=v?f[O]:h[O],$[L]=x?f[L]:h[O],m++}for(let g=0;g<=1;g++)for(let v=0;v<=1;v++)for(let x=0;x<=1;x++){i.x=g?h.x:f.x,i.y=v?h.y:f.y,i.z=x?h.z:f.z,this.closestPointToPoint(i,r);const y=i.distanceToSquared(r);if(y<p&&(p=y,l&&l.copy(r),c&&c.copy(i),y<u))return Math.sqrt(y)}for(let g=0;g<12;g++){const v=e[g];for(let x=0;x<12;x++){const y=n[x];pC(v,y,r,i);const A=r.distanceToSquared(i);if(A<p&&(p=A,l&&l.copy(r),c&&c.copy(i),A<u))return Math.sqrt(A)}}return Math.sqrt(p)}}();class mC{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class Wve extends mC{constructor(){super(()=>new gl)}}const Na=new Wve;class jve{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const e=[];let n=null;this.setBuffer=r=>{n&&e.push(n),n=r,this.float32Array=new Float32Array(r),this.uint16Array=new Uint16Array(r),this.uint32Array=new Uint32Array(r)},this.clearBuffer=()=>{n=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,e.length!==0&&this.setBuffer(e.pop())}}}const Yr=new jve;let Su,pp;const wd=[],rx=new mC(()=>new Yn);function $ve(t,e,n,r,i,s){Su=rx.getPrimitive(),pp=rx.getPrimitive(),wd.push(Su,pp),Yr.setBuffer(t._roots[e]);const o=YS(0,t.geometry,n,r,i,s);Yr.clearBuffer(),rx.releasePrimitive(Su),rx.releasePrimitive(pp),wd.pop(),wd.pop();const a=wd.length;return a>0&&(pp=wd[a-1],Su=wd[a-2]),o}function YS(t,e,n,r,i=null,s=0,o=0){const{float32Array:a,uint16Array:l,uint32Array:c}=Yr;let u=t*2;if(fo(u,l)){const h=Bo(t,c),d=Zo(u,l);return bi(t,a,Su),r(h,d,!1,o,s+t,Su)}else{let h=function(L){const{uint16Array:B,uint32Array:N}=Yr;let $=L*2;for(;!fo($,B);)L=La(L),$=L*2;return Bo(L,N)},d=function(L){const{uint16Array:B,uint32Array:N}=Yr;let $=L*2;for(;!fo($,B);)L=ea(L,N),$=L*2;return Bo(L,N)+Zo($,B)};const p=La(t),m=ea(t,c);let g=p,v=m,x,y,A,T;if(i&&(A=Su,T=pp,bi(g,a,A),bi(v,a,T),x=i(A),y=i(T),y<x)){g=m,v=p;const L=x;x=y,y=L,A=T}A||(A=Su,bi(g,a,A));const w=fo(g*2,l),M=n(A,w,x,o+1,s+g);let C;if(M===pP){const L=h(g),N=d(g)-L;C=r(L,N,!0,o+1,s+g,A)}else C=M&&YS(g,e,n,r,i,s,o+1);if(C)return!0;T=pp,bi(v,a,T);const S=fo(v*2,l),R=n(T,S,y,o+1,s+v);let O;if(R===pP){const L=h(v),N=d(v)-L;O=r(L,N,!0,o+1,s+v,T)}else O=R&&YS(v,e,n,r,i,s,o+1);return!!O}}const S0=new J,j2=new J;function Xve(t,e,n={},r=0,i=1/0){const s=r*r,o=i*i;let a=1/0,l=null;if(t.shapecast({boundsTraverseOrder:u=>(S0.copy(e).clamp(u.min,u.max),S0.distanceToSquared(e)),intersectsBounds:(u,f,h)=>h<a&&h<o,intersectsTriangle:(u,f)=>{u.closestPointToPoint(e,S0);const h=e.distanceToSquared(S0);return h<a&&(j2.copy(S0),a=h,l=f),h<s}}),a===1/0)return null;const c=Math.sqrt(a);return n.point?n.point.copy(j2):n.point=j2.clone(),n.distance=c,n.faceIndex=l,n}const Sd=new J,Cd=new J,Md=new J,ix=new qe,sx=new qe,ox=new qe,xP=new J,EP=new J,_P=new J,ax=new J;function Yve(t,e,n,r,i,s,o,a){let l;if(s===Ti?l=t.intersectTriangle(r,n,e,!0,i):l=t.intersectTriangle(e,n,r,s!==gr,i),l===null)return null;const c=t.origin.distanceTo(i);return c<o||c>a?null:{distance:c,point:i.clone()}}function qve(t,e,n,r,i,s,o,a,l,c,u){Sd.fromBufferAttribute(e,s),Cd.fromBufferAttribute(e,o),Md.fromBufferAttribute(e,a);const f=Yve(t,Sd,Cd,Md,ax,l,c,u);if(f){r&&(ix.fromBufferAttribute(r,s),sx.fromBufferAttribute(r,o),ox.fromBufferAttribute(r,a),f.uv=Xi.getInterpolation(ax,Sd,Cd,Md,ix,sx,ox,new qe)),i&&(ix.fromBufferAttribute(i,s),sx.fromBufferAttribute(i,o),ox.fromBufferAttribute(i,a),f.uv1=Xi.getInterpolation(ax,Sd,Cd,Md,ix,sx,ox,new qe)),n&&(xP.fromBufferAttribute(n,s),EP.fromBufferAttribute(n,o),_P.fromBufferAttribute(n,a),f.normal=Xi.getInterpolation(ax,Sd,Cd,Md,xP,EP,_P,new J),f.normal.dot(t.direction)>0&&f.normal.multiplyScalar(-1));const h={a:s,b:o,c:a,normal:new J,materialIndex:0};Xi.getNormal(Sd,Cd,Md,h.normal),f.face=h,f.faceIndex=s}return f}function T_(t,e,n,r,i,s,o){const a=r*3;let l=a+0,c=a+1,u=a+2;const f=t.index;t.index&&(l=f.getX(l),c=f.getX(c),u=f.getX(u));const{position:h,normal:d,uv:p,uv1:m}=t.attributes,g=qve(n,h,d,p,m,l,c,u,e,s,o);return g?(g.faceIndex=r,i&&i.push(g),g):null}function qi(t,e,n,r){const i=t.a,s=t.b,o=t.c;let a=e,l=e+1,c=e+2;n&&(a=n.getX(a),l=n.getX(l),c=n.getX(c)),i.x=r.getX(a),i.y=r.getY(a),i.z=r.getZ(a),s.x=r.getX(l),s.y=r.getY(l),s.z=r.getZ(l),o.x=r.getX(c),o.y=r.getY(c),o.z=r.getZ(c)}function Kve(t,e,n,r,i,s,o,a){const{geometry:l,_indirectBuffer:c}=t;for(let u=r,f=r+i;u<f;u++)T_(l,e,n,u,s,o,a)}function Jve(t,e,n,r,i,s,o){const{geometry:a,_indirectBuffer:l}=t;let c=1/0,u=null;for(let f=r,h=r+i;f<h;f++){let d;d=T_(a,e,n,f,null,s,o),d&&d.distance<c&&(u=d,c=d.distance)}return u}function Qve(t,e,n,r,i,s,o){const{geometry:a}=n,{index:l}=a,c=a.attributes.position;for(let u=t,f=e+t;u<f;u++){let h;if(h=u,qi(o,h*3,l,c),o.needsUpdate=!0,r(o,h,i,s))return!0}return!1}function Zve(t,e=null){e&&Array.isArray(e)&&(e=new Set(e));const n=t.geometry,r=n.index?n.index.array:null,i=n.attributes.position;let s,o,a,l,c=0;const u=t._roots;for(let h=0,d=u.length;h<d;h++)s=u[h],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),f(0,c),c+=s.byteLength;function f(h,d,p=!1){const m=h*2;if(a[m+15]===A_){const v=o[h+6],x=a[m+14];let y=1/0,A=1/0,T=1/0,w=-1/0,M=-1/0,C=-1/0;for(let S=3*v,R=3*(v+x);S<R;S++){let O=r[S];const L=i.getX(O),B=i.getY(O),N=i.getZ(O);L<y&&(y=L),L>w&&(w=L),B<A&&(A=B),B>M&&(M=B),N<T&&(T=N),N>C&&(C=N)}return l[h+0]!==y||l[h+1]!==A||l[h+2]!==T||l[h+3]!==w||l[h+4]!==M||l[h+5]!==C?(l[h+0]=y,l[h+1]=A,l[h+2]=T,l[h+3]=w,l[h+4]=M,l[h+5]=C,!0):!1}else{const v=h+8,x=o[h+6],y=v+d,A=x+d;let T=p,w=!1,M=!1;e?T||(w=e.has(y),M=e.has(A),T=!w&&!M):(w=!0,M=!0);const C=T||w,S=T||M;let R=!1;C&&(R=f(v,d,T));let O=!1;S&&(O=f(x,d,T));const L=R||O;if(L)for(let B=0;B<3;B++){const N=v+B,$=x+B,U=l[N],Q=l[N+3],Y=l[$],ee=l[$+3];l[h+B]=U<Y?U:Y,l[h+B+3]=Q>ee?Q:ee}return L}}}function ju(t,e,n,r,i){let s,o,a,l,c,u;const f=1/n.direction.x,h=1/n.direction.y,d=1/n.direction.z,p=n.origin.x,m=n.origin.y,g=n.origin.z;let v=e[t],x=e[t+3],y=e[t+1],A=e[t+3+1],T=e[t+2],w=e[t+3+2];return f>=0?(s=(v-p)*f,o=(x-p)*f):(s=(x-p)*f,o=(v-p)*f),h>=0?(a=(y-m)*h,l=(A-m)*h):(a=(A-m)*h,l=(y-m)*h),s>l||a>o||((a>s||isNaN(s))&&(s=a),(l<o||isNaN(o))&&(o=l),d>=0?(c=(T-g)*d,u=(w-g)*d):(c=(w-g)*d,u=(T-g)*d),s>u||c>o)?!1:((c>s||s!==s)&&(s=c),(u<o||o!==o)&&(o=u),s<=i&&o>=r)}function eye(t,e,n,r,i,s,o,a){const{geometry:l,_indirectBuffer:c}=t;for(let u=r,f=r+i;u<f;u++){let h=c?c[u]:u;T_(l,e,n,h,s,o,a)}}function tye(t,e,n,r,i,s,o){const{geometry:a,_indirectBuffer:l}=t;let c=1/0,u=null;for(let f=r,h=r+i;f<h;f++){let d;d=T_(a,e,n,l?l[f]:f,null,s,o),d&&d.distance<c&&(u=d,c=d.distance)}return u}function nye(t,e,n,r,i,s,o){const{geometry:a}=n,{index:l}=a,c=a.attributes.position;for(let u=t,f=e+t;u<f;u++){let h;if(h=n.resolveTriangleIndex(u),qi(o,h*3,l,c),o.needsUpdate=!0,r(o,h,i,s))return!0}return!1}function rye(t,e,n,r,i,s,o){Yr.setBuffer(t._roots[e]),qS(0,t,n,r,i,s,o),Yr.clearBuffer()}function qS(t,e,n,r,i,s,o){const{float32Array:a,uint16Array:l,uint32Array:c}=Yr,u=t*2;if(fo(u,l)){const h=Bo(t,c),d=Zo(u,l);Kve(e,n,r,h,d,i,s,o)}else{const h=La(t);ju(h,a,r,s,o)&&qS(h,e,n,r,i,s,o);const d=ea(t,c);ju(d,a,r,s,o)&&qS(d,e,n,r,i,s,o)}}const iye=["x","y","z"];function sye(t,e,n,r,i,s){Yr.setBuffer(t._roots[e]);const o=KS(0,t,n,r,i,s);return Yr.clearBuffer(),o}function KS(t,e,n,r,i,s){const{float32Array:o,uint16Array:a,uint32Array:l}=Yr;let c=t*2;if(fo(c,a)){const f=Bo(t,l),h=Zo(c,a);return Jve(e,n,r,f,h,i,s)}else{const f=dC(t,l),h=iye[f],p=r.direction[h]>=0;let m,g;p?(m=La(t),g=ea(t,l)):(m=ea(t,l),g=La(t));const x=ju(m,o,r,i,s)?KS(m,e,n,r,i,s):null;if(x){const T=x.point[h];if(p?T<=o[g+f]:T>=o[g+f+3])return x}const A=ju(g,o,r,i,s)?KS(g,e,n,r,i,s):null;return x&&A?x.distance<=A.distance?x:A:x||A||null}}const lx=new Yn,Rd=new gl,Id=new gl,C0=new yt,bP=new yo,cx=new yo;function oye(t,e,n,r){Yr.setBuffer(t._roots[e]);const i=JS(0,t,n,r);return Yr.clearBuffer(),i}function JS(t,e,n,r,i=null){const{float32Array:s,uint16Array:o,uint32Array:a}=Yr;let l=t*2;if(i===null&&(n.boundingBox||n.computeBoundingBox(),bP.set(n.boundingBox.min,n.boundingBox.max,r),i=bP),fo(l,o)){const u=e.geometry,f=u.index,h=u.attributes.position,d=n.index,p=n.attributes.position,m=Bo(t,a),g=Zo(l,o);if(C0.copy(r).invert(),n.boundsTree)return bi(t,s,cx),cx.matrix.copy(C0),cx.needsUpdate=!0,n.boundsTree.shapecast({intersectsBounds:x=>cx.intersectsBox(x),intersectsTriangle:x=>{x.a.applyMatrix4(r),x.b.applyMatrix4(r),x.c.applyMatrix4(r),x.needsUpdate=!0;for(let y=m*3,A=(g+m)*3;y<A;y+=3)if(qi(Id,y,f,h),Id.needsUpdate=!0,x.intersectsTriangle(Id))return!0;return!1}});for(let v=m*3,x=(g+m)*3;v<x;v+=3){qi(Rd,v,f,h),Rd.a.applyMatrix4(C0),Rd.b.applyMatrix4(C0),Rd.c.applyMatrix4(C0),Rd.needsUpdate=!0;for(let y=0,A=d.count;y<A;y+=3)if(qi(Id,y,d,p),Id.needsUpdate=!0,Rd.intersectsTriangle(Id))return!0}}else{const u=t+8,f=a[t+6];return bi(u,s,lx),!!(i.intersectsBox(lx)&&JS(u,e,n,r,i)||(bi(f,s,lx),i.intersectsBox(lx)&&JS(f,e,n,r,i)))}}const ux=new yt,$2=new yo,M0=new yo,aye=new J,lye=new J,cye=new J,uye=new J;function fye(t,e,n,r={},i={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),$2.set(e.boundingBox.min,e.boundingBox.max,n),$2.needsUpdate=!0;const a=t.geometry,l=a.attributes.position,c=a.index,u=e.attributes.position,f=e.index,h=Na.getPrimitive(),d=Na.getPrimitive();let p=aye,m=lye,g=null,v=null;i&&(g=cye,v=uye);let x=1/0,y=null,A=null;return ux.copy(n).invert(),M0.matrix.copy(ux),t.shapecast({boundsTraverseOrder:T=>$2.distanceToBox(T),intersectsBounds:(T,w,M)=>M<x&&M<o?(w&&(M0.min.copy(T.min),M0.max.copy(T.max),M0.needsUpdate=!0),!0):!1,intersectsRange:(T,w)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:C=>M0.distanceToBox(C),intersectsBounds:(C,S,R)=>R<x&&R<o,intersectsRange:(C,S)=>{for(let R=C,O=C+S;R<O;R++){qi(d,3*R,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let L=T,B=T+w;L<B;L++){qi(h,3*L,c,l),h.needsUpdate=!0;const N=h.distanceToTriangle(d,p,g);if(N<x&&(m.copy(p),v&&v.copy(g),x=N,y=L,A=R),N<s)return!0}}}});{const M=um(e);for(let C=0,S=M;C<S;C++){qi(d,3*C,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let R=T,O=T+w;R<O;R++){qi(h,3*R,c,l),h.needsUpdate=!0;const L=h.distanceToTriangle(d,p,g);if(L<x&&(m.copy(p),v&&v.copy(g),x=L,y=R,A=C),L<s)return!0}}}}}),Na.releasePrimitive(h),Na.releasePrimitive(d),x===1/0?null:(r.point?r.point.copy(m):r.point=m.clone(),r.distance=x,r.faceIndex=y,i&&(i.point?i.point.copy(v):i.point=v.clone(),i.point.applyMatrix4(ux),m.applyMatrix4(ux),i.distance=m.sub(i.point).length(),i.faceIndex=A),r)}function hye(t,e=null){e&&Array.isArray(e)&&(e=new Set(e));const n=t.geometry,r=n.index?n.index.array:null,i=n.attributes.position;let s,o,a,l,c=0;const u=t._roots;for(let h=0,d=u.length;h<d;h++)s=u[h],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),f(0,c),c+=s.byteLength;function f(h,d,p=!1){const m=h*2;if(a[m+15]===A_){const v=o[h+6],x=a[m+14];let y=1/0,A=1/0,T=1/0,w=-1/0,M=-1/0,C=-1/0;for(let S=v,R=v+x;S<R;S++){const O=3*t.resolveTriangleIndex(S);for(let L=0;L<3;L++){let B=O+L;B=r?r[B]:B;const N=i.getX(B),$=i.getY(B),U=i.getZ(B);N<y&&(y=N),N>w&&(w=N),$<A&&(A=$),$>M&&(M=$),U<T&&(T=U),U>C&&(C=U)}}return l[h+0]!==y||l[h+1]!==A||l[h+2]!==T||l[h+3]!==w||l[h+4]!==M||l[h+5]!==C?(l[h+0]=y,l[h+1]=A,l[h+2]=T,l[h+3]=w,l[h+4]=M,l[h+5]=C,!0):!1}else{const v=h+8,x=o[h+6],y=v+d,A=x+d;let T=p,w=!1,M=!1;e?T||(w=e.has(y),M=e.has(A),T=!w&&!M):(w=!0,M=!0);const C=T||w,S=T||M;let R=!1;C&&(R=f(v,d,T));let O=!1;S&&(O=f(x,d,T));const L=R||O;if(L)for(let B=0;B<3;B++){const N=v+B,$=x+B,U=l[N],Q=l[N+3],Y=l[$],ee=l[$+3];l[h+B]=U<Y?U:Y,l[h+B+3]=Q>ee?Q:ee}return L}}}function dye(t,e,n,r,i,s,o){Yr.setBuffer(t._roots[e]),QS(0,t,n,r,i,s,o),Yr.clearBuffer()}function QS(t,e,n,r,i,s,o){const{float32Array:a,uint16Array:l,uint32Array:c}=Yr,u=t*2;if(fo(u,l)){const h=Bo(t,c),d=Zo(u,l);eye(e,n,r,h,d,i,s,o)}else{const h=La(t);ju(h,a,r,s,o)&&QS(h,e,n,r,i,s,o);const d=ea(t,c);ju(d,a,r,s,o)&&QS(d,e,n,r,i,s,o)}}const pye=["x","y","z"];function mye(t,e,n,r,i,s){Yr.setBuffer(t._roots[e]);const o=ZS(0,t,n,r,i,s);return Yr.clearBuffer(),o}function ZS(t,e,n,r,i,s){const{float32Array:o,uint16Array:a,uint32Array:l}=Yr;let c=t*2;if(fo(c,a)){const f=Bo(t,l),h=Zo(c,a);return tye(e,n,r,f,h,i,s)}else{const f=dC(t,l),h=pye[f],p=r.direction[h]>=0;let m,g;p?(m=La(t),g=ea(t,l)):(m=ea(t,l),g=La(t));const x=ju(m,o,r,i,s)?ZS(m,e,n,r,i,s):null;if(x){const T=x.point[h];if(p?T<=o[g+f]:T>=o[g+f+3])return x}const A=ju(g,o,r,i,s)?ZS(g,e,n,r,i,s):null;return x&&A?x.distance<=A.distance?x:A:x||A||null}}const fx=new Yn,Pd=new gl,Ld=new gl,R0=new yt,AP=new yo,hx=new yo;function gye(t,e,n,r){Yr.setBuffer(t._roots[e]);const i=e4(0,t,n,r);return Yr.clearBuffer(),i}function e4(t,e,n,r,i=null){const{float32Array:s,uint16Array:o,uint32Array:a}=Yr;let l=t*2;if(i===null&&(n.boundingBox||n.computeBoundingBox(),AP.set(n.boundingBox.min,n.boundingBox.max,r),i=AP),fo(l,o)){const u=e.geometry,f=u.index,h=u.attributes.position,d=n.index,p=n.attributes.position,m=Bo(t,a),g=Zo(l,o);if(R0.copy(r).invert(),n.boundsTree)return bi(t,s,hx),hx.matrix.copy(R0),hx.needsUpdate=!0,n.boundsTree.shapecast({intersectsBounds:x=>hx.intersectsBox(x),intersectsTriangle:x=>{x.a.applyMatrix4(r),x.b.applyMatrix4(r),x.c.applyMatrix4(r),x.needsUpdate=!0;for(let y=m,A=g+m;y<A;y++)if(qi(Ld,3*e.resolveTriangleIndex(y),f,h),Ld.needsUpdate=!0,x.intersectsTriangle(Ld))return!0;return!1}});for(let v=m,x=g+m;v<x;v++){const y=e.resolveTriangleIndex(v);qi(Pd,3*y,f,h),Pd.a.applyMatrix4(R0),Pd.b.applyMatrix4(R0),Pd.c.applyMatrix4(R0),Pd.needsUpdate=!0;for(let A=0,T=d.count;A<T;A+=3)if(qi(Ld,A,d,p),Ld.needsUpdate=!0,Pd.intersectsTriangle(Ld))return!0}}else{const u=t+8,f=a[t+6];return bi(u,s,fx),!!(i.intersectsBox(fx)&&e4(u,e,n,r,i)||(bi(f,s,fx),i.intersectsBox(fx)&&e4(f,e,n,r,i)))}}const dx=new yt,X2=new yo,I0=new yo,vye=new J,yye=new J,xye=new J,Eye=new J;function _ye(t,e,n,r={},i={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),X2.set(e.boundingBox.min,e.boundingBox.max,n),X2.needsUpdate=!0;const a=t.geometry,l=a.attributes.position,c=a.index,u=e.attributes.position,f=e.index,h=Na.getPrimitive(),d=Na.getPrimitive();let p=vye,m=yye,g=null,v=null;i&&(g=xye,v=Eye);let x=1/0,y=null,A=null;return dx.copy(n).invert(),I0.matrix.copy(dx),t.shapecast({boundsTraverseOrder:T=>X2.distanceToBox(T),intersectsBounds:(T,w,M)=>M<x&&M<o?(w&&(I0.min.copy(T.min),I0.max.copy(T.max),I0.needsUpdate=!0),!0):!1,intersectsRange:(T,w)=>{if(e.boundsTree){const M=e.boundsTree;return M.shapecast({boundsTraverseOrder:C=>I0.distanceToBox(C),intersectsBounds:(C,S,R)=>R<x&&R<o,intersectsRange:(C,S)=>{for(let R=C,O=C+S;R<O;R++){const L=M.resolveTriangleIndex(R);qi(d,3*L,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let B=T,N=T+w;B<N;B++){const $=t.resolveTriangleIndex(B);qi(h,3*$,c,l),h.needsUpdate=!0;const U=h.distanceToTriangle(d,p,g);if(U<x&&(m.copy(p),v&&v.copy(g),x=U,y=B,A=R),U<s)return!0}}}})}else{const M=um(e);for(let C=0,S=M;C<S;C++){qi(d,3*C,f,u),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let R=T,O=T+w;R<O;R++){const L=t.resolveTriangleIndex(R);qi(h,3*L,c,l),h.needsUpdate=!0;const B=h.distanceToTriangle(d,p,g);if(B<x&&(m.copy(p),v&&v.copy(g),x=B,y=R,A=C),B<s)return!0}}}}}),Na.releasePrimitive(h),Na.releasePrimitive(d),x===1/0?null:(r.point?r.point.copy(m):r.point=m.clone(),r.distance=x,r.faceIndex=y,i&&(i.point?i.point.copy(v):i.point=v.clone(),i.point.applyMatrix4(dx),m.applyMatrix4(dx),i.distance=m.sub(i.point).length(),i.faceIndex=A),r)}function bye(){return typeof SharedArrayBuffer<"u"}const A1=new Yr.constructor,Z3=new Yr.constructor,_u=new mC(()=>new Yn),Nd=new Yn,Od=new Yn,Y2=new Yn,q2=new Yn;let K2=!1;function Aye(t,e,n,r){if(K2)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");K2=!0;const i=t._roots,s=e._roots;let o,a=0,l=0;const c=new yt().copy(n).invert();for(let u=0,f=i.length;u<f;u++){A1.setBuffer(i[u]),l=0;const h=_u.getPrimitive();bi(0,A1.float32Array,h),h.applyMatrix4(c);for(let d=0,p=s.length;d<p&&(Z3.setBuffer(s[u]),o=tl(0,0,n,c,r,a,l,0,0,h),Z3.clearBuffer(),l+=s[d].length,!o);d++);if(_u.releasePrimitive(h),A1.clearBuffer(),a+=i[u].length,o)break}return K2=!1,o}function tl(t,e,n,r,i,s=0,o=0,a=0,l=0,c=null,u=!1){let f,h;u?(f=Z3,h=A1):(f=A1,h=Z3);const d=f.float32Array,p=f.uint32Array,m=f.uint16Array,g=h.float32Array,v=h.uint32Array,x=h.uint16Array,y=t*2,A=e*2,T=fo(y,m),w=fo(A,x);let M=!1;if(w&&T)u?M=i(Bo(e,v),Zo(e*2,x),Bo(t,p),Zo(t*2,m),l,o+e,a,s+t):M=i(Bo(t,p),Zo(t*2,m),Bo(e,v),Zo(e*2,x),a,s+t,l,o+e);else if(w){const C=_u.getPrimitive();bi(e,g,C),C.applyMatrix4(n);const S=La(t),R=ea(t,p);bi(S,d,Nd),bi(R,d,Od);const O=C.intersectsBox(Nd),L=C.intersectsBox(Od);M=O&&tl(e,S,r,n,i,o,s,l,a+1,C,!u)||L&&tl(e,R,r,n,i,o,s,l,a+1,C,!u),_u.releasePrimitive(C)}else{const C=La(e),S=ea(e,v);bi(C,g,Y2),bi(S,g,q2);const R=c.intersectsBox(Y2),O=c.intersectsBox(q2);if(R&&O)M=tl(t,C,n,r,i,s,o,a,l+1,c,u)||tl(t,S,n,r,i,s,o,a,l+1,c,u);else if(R)if(T)M=tl(t,C,n,r,i,s,o,a,l+1,c,u);else{const L=_u.getPrimitive();L.copy(Y2).applyMatrix4(n);const B=La(t),N=ea(t,p);bi(B,d,Nd),bi(N,d,Od);const $=L.intersectsBox(Nd),U=L.intersectsBox(Od);M=$&&tl(C,B,r,n,i,o,s,l,a+1,L,!u)||U&&tl(C,N,r,n,i,o,s,l,a+1,L,!u),_u.releasePrimitive(L)}else if(O)if(T)M=tl(t,S,n,r,i,s,o,a,l+1,c,u);else{const L=_u.getPrimitive();L.copy(q2).applyMatrix4(n);const B=La(t),N=ea(t,p);bi(B,d,Nd),bi(N,d,Od);const $=L.intersectsBox(Nd),U=L.intersectsBox(Od);M=$&&tl(S,B,r,n,i,o,s,l,a+1,L,!u)||U&&tl(S,N,r,n,i,o,s,l,a+1,L,!u),_u.releasePrimitive(L)}}return M}const px=new yo,TP=new Yn,Tye={strategy:OH,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0};class w_{static serialize(e,n={}){n={cloneBuffers:!0,...n};const r=e.geometry,i=e._roots,s=e._indirectBuffer,o=r.getIndex();let a;return n.cloneBuffers?a={roots:i.map(l=>l.slice()),index:o?o.array.slice():null,indirectBuffer:s?s.slice():null}:a={roots:i,index:o?o.array:null,indirectBuffer:s},a}static deserialize(e,n,r={}){r={setIndex:!0,indirect:!!e.indirectBuffer,...r};const{index:i,roots:s,indirectBuffer:o}=e,a=new w_(n,{...r,[H2]:!0});if(a._roots=s,a._indirectBuffer=o||null,r.setIndex){const l=n.getIndex();if(l===null){const c=new Qt(e.index,1,!1);n.setIndex(c)}else l.array!==i&&(l.array.set(i),l.needsUpdate=!0)}return a}get indirect(){return!!this._indirectBuffer}constructor(e,n={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(n=Object.assign({...Tye,[H2]:!1},n),n.useSharedArrayBuffer&&!bye())throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,n[H2]||(zve(this,n),!e.boundingBox&&n.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Yn))),this.resolveTriangleIndex=n.indirect?r=>this._indirectBuffer[r]:r=>r}refit(e=null){return(this.indirect?hye:Zve)(this,e)}traverse(e,n=0){const r=this._roots[n],i=new Uint32Array(r),s=new Uint16Array(r);o(0);function o(a,l=0){const c=a*2,u=s[c+15]===A_;if(u){const f=i[a+6],h=s[c+14];e(l,u,new Float32Array(r,a*4,6),f,h)}else{const f=a+Lu/4,h=i[a+6],d=i[a+7];e(l,u,new Float32Array(r,a*4,6),d)||(o(f,l+1),o(h,l+1))}}}raycast(e,n=es,r=0,i=1/0){const s=this._roots,o=this.geometry,a=[],l=n.isMaterial,c=Array.isArray(n),u=o.groups,f=l?n.side:n,h=this.indirect?dye:rye;for(let d=0,p=s.length;d<p;d++){const m=c?n[u[d].materialIndex].side:f,g=a.length;if(h(this,d,m,e,a,r,i),c){const v=u[d].materialIndex;for(let x=g,y=a.length;x<y;x++)a[x].face.materialIndex=v}}return a}raycastFirst(e,n=es,r=0,i=1/0){const s=this._roots,o=this.geometry,a=n.isMaterial,l=Array.isArray(n);let c=null;const u=o.groups,f=a?n.side:n,h=this.indirect?mye:sye;for(let d=0,p=s.length;d<p;d++){const m=l?n[u[d].materialIndex].side:f,g=h(this,d,m,e,r,i);g!=null&&(c==null||g.distance<c.distance)&&(c=g,l&&(g.face.materialIndex=u[d].materialIndex))}return c}intersectsGeometry(e,n){let r=!1;const i=this._roots,s=this.indirect?gye:oye;for(let o=0,a=i.length;o<a&&(r=s(this,o,e,n),!r);o++);return r}shapecast(e){const n=Na.getPrimitive(),r=this.indirect?nye:Qve;let{boundsTraverseOrder:i,intersectsBounds:s,intersectsRange:o,intersectsTriangle:a}=e;if(o&&a){const f=o;o=(h,d,p,m,g)=>f(h,d,p,m,g)?!0:r(h,d,this,a,p,m,n)}else o||(a?o=(f,h,d,p)=>r(f,h,this,a,d,p,n):o=(f,h,d)=>d);let l=!1,c=0;const u=this._roots;for(let f=0,h=u.length;f<h;f++){const d=u[f];if(l=$ve(this,f,s,o,i,c),l)break;c+=d.byteLength}return Na.releasePrimitive(n),l}bvhcast(e,n,r){let{intersectsRanges:i,intersectsTriangles:s}=r;const o=Na.getPrimitive(),a=this.geometry.index,l=this.geometry.attributes.position,c=this.indirect?p=>{const m=this.resolveTriangleIndex(p);qi(o,m*3,a,l)}:p=>{qi(o,p*3,a,l)},u=Na.getPrimitive(),f=e.geometry.index,h=e.geometry.attributes.position,d=e.indirect?p=>{const m=e.resolveTriangleIndex(p);qi(u,m*3,f,h)}:p=>{qi(u,p*3,f,h)};if(s){const p=(m,g,v,x,y,A,T,w)=>{for(let M=v,C=v+x;M<C;M++){d(M),u.a.applyMatrix4(n),u.b.applyMatrix4(n),u.c.applyMatrix4(n),u.needsUpdate=!0;for(let S=m,R=m+g;S<R;S++)if(c(S),o.needsUpdate=!0,s(o,u,S,M,y,A,T,w))return!0}return!1};if(i){const m=i;i=function(g,v,x,y,A,T,w,M){return m(g,v,x,y,A,T,w,M)?!0:p(g,v,x,y,A,T,w,M)}}else i=p}return Aye(this,e,n,i)}intersectsBox(e,n){return px.set(e.min,e.max,n),px.needsUpdate=!0,this.shapecast({intersectsBounds:r=>px.intersectsBox(r),intersectsTriangle:r=>px.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:n=>e.intersectsBox(n),intersectsTriangle:n=>n.intersectsSphere(e)})}closestPointToGeometry(e,n,r={},i={},s=0,o=1/0){return(this.indirect?_ye:fye)(this,e,n,r,i,s,o)}closestPointToPoint(e,n={},r=0,i=1/0){return Xve(this,e,n,r,i)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(r=>{bi(0,new Float32Array(r),TP),e.union(TP)}),e}}function wP(t,e,n){return t===null?null:(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(n.ray.origin),t.object=e,t)}const mx=new xl,SP=new J,CP=new yt,MP=new J,wye=un.prototype.raycast;function Sye(t,e){if(this.geometry.boundsTree){if(this.material===void 0)return;CP.copy(this.matrixWorld).invert(),mx.copy(t.ray).applyMatrix4(CP),this.getWorldScale(MP),SP.copy(mx.direction).multiply(MP);const n=SP.length(),r=t.near/n,i=t.far/n,s=this.geometry.boundsTree;if(t.firstHitOnly===!0){const o=wP(s.raycastFirst(mx,this.material,r,i),this,t);o&&e.push(o)}else{const o=s.raycast(mx,this.material,r,i);for(let a=0,l=o.length;a<l;a++){const c=wP(o[a],this,t);c&&e.push(c)}}}else wye.call(this,t,e)}function Cye(t){return this.boundsTree=new w_(this,t),this.boundsTree}function Mye(){this.boundsTree=null}function Rye(t){switch(t){case 1:return"R";case 2:return"RG";case 3:return"RGBA";case 4:return"RGBA"}throw new Error}function Iye(t){switch(t){case 1:return th;case 2:return c5;case 3:return Sr;case 4:return Sr}}function RP(t){switch(t){case 1:return BE;case 2:return Sg;case 3:return hh;case 4:return hh}}class HH extends mo{constructor(){super(),this.minFilter=Ln,this.magFilter=Ln,this.generateMipmaps=!1,this.overrideItemSize=null,this._forcedType=null}updateFrom(e){const n=this.overrideItemSize,r=e.itemSize,i=e.count;if(n!==null){if(r*i%n!==0)throw new Error("VertexAttributeTexture: overrideItemSize must divide evenly into buffer length.");e.itemSize=n,e.count=i*r/n}const s=e.itemSize,o=e.count,a=e.normalized,l=e.array.constructor,c=l.BYTES_PER_ELEMENT;let u=this._forcedType,f=s;if(u===null)switch(l){case Float32Array:u=fr;break;case Uint8Array:case Uint16Array:case Uint32Array:u=Ws;break;case Int8Array:case Int16Array:case Int32Array:u=eh;break}let h,d,p,m,g=Rye(s);switch(u){case fr:p=1,d=Iye(s),a&&c===1?(m=l,g+="8",l===Uint8Array?h=Cs:(h=j1,g+="_SNORM")):(m=Float32Array,g+="32F",h=fr);break;case eh:g+=c*8+"I",p=a?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,d=RP(s),c===1?(m=Int8Array,h=j1):c===2?(m=Int16Array,h=DE):(m=Int32Array,h=eh);break;case Ws:g+=c*8+"UI",p=a?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,d=RP(s),c===1?(m=Uint8Array,h=Cs):c===2?(m=Uint16Array,h=Jp):(m=Uint32Array,h=Ws);break}f===3&&(d===Sr||d===hh)&&(f=4);const v=Math.ceil(Math.sqrt(o))||1,x=f*v*v,y=new m(x),A=e.normalized;e.normalized=!1;for(let T=0;T<o;T++){const w=f*T;y[w]=e.getX(T)/p,s>=2&&(y[w+1]=e.getY(T)/p),s>=3&&(y[w+2]=e.getZ(T)/p,f===4&&(y[w+3]=1)),s>=4&&(y[w+3]=e.getW(T)/p)}e.normalized=A,this.internalFormat=g,this.format=d,this.type=h,this.image.width=v,this.image.height=v,this.image.data=y,this.needsUpdate=!0,this.dispose(),e.itemSize=r,e.count=i}}class Pye extends HH{constructor(){super(),this._forcedType=Ws}}class Lye extends HH{constructor(){super(),this._forcedType=fr}}class GH{constructor(){this.index=new Pye,this.position=new Lye,this.bvhBounds=new mo,this.bvhContents=new mo,this._cachedIndexAttr=null,this.index.overrideItemSize=3}updateFrom(e){const{geometry:n}=e;if(Oye(e,this.bvhBounds,this.bvhContents),this.position.updateFrom(n.attributes.position),e.indirect){const r=e._indirectBuffer;if(this._cachedIndexAttr===null||this._cachedIndexAttr.count!==r.length)if(n.index)this._cachedIndexAttr=n.index.clone();else{const i=BH(DH(n));this._cachedIndexAttr=new Qt(i,1,!1)}Nye(n,r,this._cachedIndexAttr),this.index.updateFrom(this._cachedIndexAttr)}else this.index.updateFrom(n.index)}dispose(){const{index:e,position:n,bvhBounds:r,bvhContents:i}=this;e&&e.dispose(),n&&n.dispose(),r&&r.dispose(),i&&i.dispose()}}function Nye(t,e,n){const r=n.array,i=t.index?t.index.array:null;for(let s=0,o=e.length;s<o;s++){const a=3*s,l=3*e[s];for(let c=0;c<3;c++)r[a+c]=i?i[l+c]:l+c}}function Oye(t,e,n){const r=t._roots;if(r.length!==1)throw new Error("MeshBVHUniformStruct: Multi-root BVHs not supported.");const i=r[0],s=new Uint16Array(i),o=new Uint32Array(i),a=new Float32Array(i),l=i.byteLength/Lu,c=2*Math.ceil(Math.sqrt(l/2)),u=new Float32Array(4*c*c),f=Math.ceil(Math.sqrt(l)),h=new Uint32Array(2*f*f);for(let d=0;d<l;d++){const p=d*Lu/4,m=p*2,g=p;for(let v=0;v<3;v++)u[8*d+0+v]=a[g+0+v],u[8*d+4+v]=a[g+3+v];if(fo(m,s)){const v=Zo(m,s),x=Bo(p,o),y=4294901760|v;h[d*2+0]=y,h[d*2+1]=x}else{const v=4*ea(p,o)/Lu,x=dC(p,o);h[d*2+0]=x,h[d*2+1]=v}}e.image.data=u,e.image.width=c,e.image.height=c,e.format=Sr,e.type=fr,e.internalFormat="RGBA32F",e.minFilter=Ln,e.magFilter=Ln,e.generateMipmaps=!1,e.needsUpdate=!0,e.dispose(),n.image.data=h,n.image.width=f,n.image.height=f,n.format=Sg,n.type=Ws,n.internalFormat="RG32UI",n.minFilter=Ln,n.magFilter=Ln,n.generateMipmaps=!1,n.needsUpdate=!0,n.dispose()}const Dye=`

// A stack of uint32 indices can can store the indices for
// a perfectly balanced tree with a depth up to 31. Lower stack
// depth gets higher performance.
//
// However not all trees are balanced. Best value to set this to
// is the trees max depth.
#ifndef BVH_STACK_DEPTH
#define BVH_STACK_DEPTH 60
#endif

#ifndef INFINITY
#define INFINITY 1e20
#endif

// Utilities
uvec4 uTexelFetch1D( usampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

ivec4 iTexelFetch1D( isampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 texelFetch1D( sampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 textureSampleBarycoord( sampler2D tex, vec3 barycoord, uvec3 faceIndices ) {

	return
		barycoord.x * texelFetch1D( tex, faceIndices.x ) +
		barycoord.y * texelFetch1D( tex, faceIndices.y ) +
		barycoord.z * texelFetch1D( tex, faceIndices.z );

}

void ndcToCameraRay(
	vec2 coord, mat4 cameraWorld, mat4 invProjectionMatrix,
	out vec3 rayOrigin, out vec3 rayDirection
) {

	// get camera look direction and near plane for camera clipping
	vec4 lookDirection = cameraWorld * vec4( 0.0, 0.0, - 1.0, 0.0 );
	vec4 nearVector = invProjectionMatrix * vec4( 0.0, 0.0, - 1.0, 1.0 );
	float near = abs( nearVector.z / nearVector.w );

	// get the camera direction and position from camera matrices
	vec4 origin = cameraWorld * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec4 direction = invProjectionMatrix * vec4( coord, 0.5, 1.0 );
	direction /= direction.w;
	direction = cameraWorld * direction - origin;

	// slide the origin along the ray until it sits at the near clip plane position
	origin.xyz += direction.xyz * near / dot( direction, lookDirection );

	rayOrigin = origin.xyz;
	rayDirection = direction.xyz;

}
`,Bye=`

#ifndef TRI_INTERSECT_EPSILON
#define TRI_INTERSECT_EPSILON 1e-5
#endif

// Raycasting
bool intersectsBounds( vec3 rayOrigin, vec3 rayDirection, vec3 boundsMin, vec3 boundsMax, out float dist ) {

	// https://www.reddit.com/r/opengl/comments/8ntzz5/fast_glsl_ray_box_intersection/
	// https://tavianator.com/2011/ray_box.html
	vec3 invDir = 1.0 / rayDirection;

	// find intersection distances for each plane
	vec3 tMinPlane = invDir * ( boundsMin - rayOrigin );
	vec3 tMaxPlane = invDir * ( boundsMax - rayOrigin );

	// get the min and max distances from each intersection
	vec3 tMinHit = min( tMaxPlane, tMinPlane );
	vec3 tMaxHit = max( tMaxPlane, tMinPlane );

	// get the furthest hit distance
	vec2 t = max( tMinHit.xx, tMinHit.yz );
	float t0 = max( t.x, t.y );

	// get the minimum hit distance
	t = min( tMaxHit.xx, tMaxHit.yz );
	float t1 = min( t.x, t.y );

	// set distance to 0.0 if the ray starts inside the box
	dist = max( t0, 0.0 );

	return t1 >= dist;

}

bool intersectsTriangle(
	vec3 rayOrigin, vec3 rayDirection, vec3 a, vec3 b, vec3 c,
	out vec3 barycoord, out vec3 norm, out float dist, out float side
) {

	// https://stackoverflow.com/questions/42740765/intersection-between-line-and-triangle-in-3d
	vec3 edge1 = b - a;
	vec3 edge2 = c - a;
	norm = cross( edge1, edge2 );

	float det = - dot( rayDirection, norm );
	float invdet = 1.0 / det;

	vec3 AO = rayOrigin - a;
	vec3 DAO = cross( AO, rayDirection );

	vec4 uvt;
	uvt.x = dot( edge2, DAO ) * invdet;
	uvt.y = - dot( edge1, DAO ) * invdet;
	uvt.z = dot( AO, norm ) * invdet;
	uvt.w = 1.0 - uvt.x - uvt.y;

	// set the hit information
	barycoord = uvt.wxy; // arranged in A, B, C order
	dist = uvt.z;
	side = sign( det );
	norm = side * normalize( norm );

	// add an epsilon to avoid misses between triangles
	uvt += vec4( TRI_INTERSECT_EPSILON );

	return all( greaterThanEqual( uvt, vec4( 0.0 ) ) );

}

bool intersectTriangles(
	// geometry info and triangle range
	sampler2D positionAttr, usampler2D indexAttr, uint offset, uint count,

	// ray
	vec3 rayOrigin, vec3 rayDirection,

	// outputs
	inout float minDistance, inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,
	inout float side, inout float dist
) {

	bool found = false;
	vec3 localBarycoord, localNormal;
	float localDist, localSide;
	for ( uint i = offset, l = offset + count; i < l; i ++ ) {

		uvec3 indices = uTexelFetch1D( indexAttr, i ).xyz;
		vec3 a = texelFetch1D( positionAttr, indices.x ).rgb;
		vec3 b = texelFetch1D( positionAttr, indices.y ).rgb;
		vec3 c = texelFetch1D( positionAttr, indices.z ).rgb;

		if (
			intersectsTriangle( rayOrigin, rayDirection, a, b, c, localBarycoord, localNormal, localDist, localSide )
			&& localDist < minDistance
		) {

			found = true;
			minDistance = localDist;

			faceIndices = uvec4( indices.xyz, i );
			faceNormal = localNormal;

			side = localSide;
			barycoord = localBarycoord;
			dist = localDist;

		}

	}

	return found;

}

bool intersectsBVHNodeBounds( vec3 rayOrigin, vec3 rayDirection, sampler2D bvhBounds, uint currNodeIndex, out float dist ) {

	uint cni2 = currNodeIndex * 2u;
	vec3 boundsMin = texelFetch1D( bvhBounds, cni2 ).xyz;
	vec3 boundsMax = texelFetch1D( bvhBounds, cni2 + 1u ).xyz;
	return intersectsBounds( rayOrigin, rayDirection, boundsMin, boundsMax, dist );

}

// use a macro to hide the fact that we need to expand the struct into separate fields
#define	bvhIntersectFirstHit(		bvh,		rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist	)	_bvhIntersectFirstHit(		bvh.position, bvh.index, bvh.bvhBounds, bvh.bvhContents,		rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist	)

bool _bvhIntersectFirstHit(
	// bvh info
	sampler2D bvh_position, usampler2D bvh_index, sampler2D bvh_bvhBounds, usampler2D bvh_bvhContents,

	// ray
	vec3 rayOrigin, vec3 rayDirection,

	// output variables split into separate variables due to output precision
	inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,
	inout float side, inout float dist
) {

	// stack needs to be twice as long as the deepest tree we expect because
	// we push both the left and right child onto the stack every traversal
	int ptr = 0;
	uint stack[ BVH_STACK_DEPTH ];
	stack[ 0 ] = 0u;

	float triangleDistance = INFINITY;
	bool found = false;
	while ( ptr > - 1 && ptr < BVH_STACK_DEPTH ) {

		uint currNodeIndex = stack[ ptr ];
		ptr --;

		// check if we intersect the current bounds
		float boundsHitDistance;
		if (
			! intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh_bvhBounds, currNodeIndex, boundsHitDistance )
			|| boundsHitDistance > triangleDistance
		) {

			continue;

		}

		uvec2 boundsInfo = uTexelFetch1D( bvh_bvhContents, currNodeIndex ).xy;
		bool isLeaf = bool( boundsInfo.x & 0xffff0000u );

		if ( isLeaf ) {

			uint count = boundsInfo.x & 0x0000ffffu;
			uint offset = boundsInfo.y;

			found = intersectTriangles(
				bvh_position, bvh_index, offset, count,
				rayOrigin, rayDirection, triangleDistance,
				faceIndices, faceNormal, barycoord, side, dist
			) || found;

		} else {

			uint leftIndex = currNodeIndex + 1u;
			uint splitAxis = boundsInfo.x & 0x0000ffffu;
			uint rightIndex = boundsInfo.y;

			bool leftToRight = rayDirection[ splitAxis ] >= 0.0;
			uint c1 = leftToRight ? leftIndex : rightIndex;
			uint c2 = leftToRight ? rightIndex : leftIndex;

			// set c2 in the stack so we traverse it later. We need to keep track of a pointer in
			// the stack while we traverse. The second pointer added is the one that will be
			// traversed first
			ptr ++;
			stack[ ptr ] = c2;

			ptr ++;
			stack[ ptr ] = c1;

		}

	}

	return found;

}
`,kye=`
struct BVH {

	usampler2D index;
	sampler2D position;

	sampler2D bvhBounds;
	usampler2D bvhContents;

};
`,Fye=kye,Uye=`
	${Dye}
	${Bye}
`,IP=t=>t.isMesh,zye=E.forwardRef(({enabled:t=!0,firstHitOnly:e=!1,children:n,strategy:r=hC,verbose:i=!1,setBoundingBox:s=!0,maxDepth:o=40,maxLeafTris:a=10,indirect:l=!1,...c},u)=>{const f=E.useRef(null),h=wt(d=>d.raycaster);return E.useImperativeHandle(u,()=>f.current,[]),E.useEffect(()=>{if(t){const d={strategy:r,verbose:i,setBoundingBox:s,maxDepth:o,maxLeafTris:a,indirect:l},p=f.current;return h.firstHitOnly=e,p.traverse(m=>{IP(m)&&!m.geometry.boundsTree&&m.raycast===un.prototype.raycast&&(m.raycast=Sye,m.geometry.computeBoundsTree=Cye,m.geometry.disposeBoundsTree=Mye,m.geometry.computeBoundsTree(d))}),()=>{delete h.firstHitOnly,p.traverse(m=>{IP(m)&&m.geometry.boundsTree&&(m.geometry.disposeBoundsTree(),m.raycast=un.prototype.raycast)})}}},[]),E.createElement("group",Ct({ref:f},c),n)});function Hye(t){const e=E.useRef(null),n=E.useRef(!1),r=E.useRef(!1),i=E.useRef(t);return E.useLayoutEffect(()=>void(i.current=t),[t]),E.useEffect(()=>{const s=e.current;if(s){const o=j5(()=>(n.current=!1,!0)),a=s.onBeforeRender;s.onBeforeRender=()=>n.current=!0;const l=d_(()=>(n.current!==r.current&&(i.current==null||i.current(r.current=n.current)),!0));return()=>{s.onBeforeRender=a,o(),l()}}},[]),e}const PP=new Yn,gx=new J,Gye=({anchor:t,...e})=>{const n=E.useRef(null),r=E.useRef(null);return E.useEffect(()=>{var i;(i=n.current)!=null&&(i=i.parent)!=null&&i.parent&&(r.current=n.current.parent,n.current.parent.parent.add(n.current))},[]),rn(()=>{r.current&&(PP.setFromObject(r.current),PP.getSize(gx),n.current.position.set(r.current.position.x+gx.x*(Array.isArray(t)?t[0]:t.x)/2,r.current.position.y+gx.y*(Array.isArray(t)?t[1]:t.y)/2,r.current.position.z+gx.z*(Array.isArray(t)?t[2]:t.z)/2))}),E.createElement("group",Ct({ref:n},e))},VH=E.forwardRef(function({children:e,disable:n,disableX:r,disableY:i,disableZ:s,left:o,right:a,top:l,bottom:c,front:u,back:f,onCentered:h,precise:d=!0,cacheKey:p=0,...m},g){const v=E.useRef(null),x=E.useRef(null),y=E.useRef(null);return E.useLayoutEffect(()=>{x.current.matrixWorld.identity();const A=new Yn().setFromObject(y.current,d),T=new J,w=new Fr,M=A.max.x-A.min.x,C=A.max.y-A.min.y,S=A.max.z-A.min.z;A.getCenter(T),A.getBoundingSphere(w);const R=l?C/2:c?-C/2:0,O=o?-M/2:a?M/2:0,L=u?S/2:f?-S/2:0;x.current.position.set(n||r?0:-T.x+O,n||i?0:-T.y+R,n||s?0:-T.z+L),typeof h<"u"&&h({parent:v.current.parent,container:v.current,width:M,height:C,depth:S,boundingBox:A,boundingSphere:w,center:T,verticalAlignment:R,horizontalAlignment:O,depthAlignment:L})},[p,h,l,o,u,n,r,i,s,d,a,c,f]),E.useImperativeHandle(g,()=>v.current,[]),E.createElement("group",Ct({ref:v},m),E.createElement("group",{ref:x},E.createElement("group",{ref:y},e)))});function WH(t){return jH(t.children,t.components)}WH.propTypes={children:hr.func.isRequired,components:hr.arrayOf(hr.oneOfType([hr.element,hr.func])).isRequired};function jH(t,e,n){if(n=n||[],!e[0])return t(n);function r(i){return jH(t,e.slice(1),n.concat([i]))}return typeof e[0]=="function"?e[0]({results:n,render:r}):E.cloneElement(e[0],{children:r})}const T1=(t,e)=>{"updateRanges"in t?t.updateRanges[0]=e:t.updateRange=e},Vye=3e3,Wye=3001;function jye(t){return typeof t=="function"}const LP=new yt,NP=new yt,vx=[],P0=new un;class $ye extends ki{constructor(){super(),this.color=new bt("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,n){const r=this.instance.current;if(!r||!r.geometry||!r.material)return;P0.geometry=r.geometry;const i=r.matrixWorld,s=r.userData.instances.indexOf(this.instanceKey);if(!(s===-1||s>r.count)){r.getMatrixAt(s,LP),NP.multiplyMatrices(i,LP),P0.matrixWorld=NP,r.material instanceof Gr?P0.material.side=r.material.side:P0.material.side=r.material[0].side,P0.raycast(e,vx);for(let o=0,a=vx.length;o<a;o++){const l=vx[o];l.instanceId=s,l.object=this,n.push(l)}vx.length=0}}}const $H=E.createContext(null),OP=new yt,DP=new yt,Xye=new yt,BP=new J,kP=new kn,FP=new J,XH=E.forwardRef(({context:t,children:e,...n},r)=>{E.useMemo(()=>Fi({PositionMesh:$ye}),[]);const i=E.useRef();E.useImperativeHandle(r,()=>i.current,[]);const{subscribe:s,getParent:o}=E.useContext(t||$H);return E.useLayoutEffect(()=>s(i),[]),E.createElement("positionMesh",Ct({instance:o(),instanceKey:i,ref:i},n),e)}),gC=E.forwardRef(({children:t,range:e,limit:n=1e3,frames:r=1/0,...i},s)=>{const[{context:o,instance:a}]=E.useState(()=>{const g=E.createContext(null);return{context:g,instance:E.forwardRef((v,x)=>E.createElement(XH,Ct({context:g},v,{ref:x})))}}),l=E.useRef(null);E.useImperativeHandle(s,()=>l.current,[]);const[c,u]=E.useState([]),[[f,h]]=E.useState(()=>{const g=new Float32Array(n*16);for(let v=0;v<n;v++)Xye.identity().toArray(g,v*16);return[g,new Float32Array([...new Array(n*3)].map(()=>1))]});E.useEffect(()=>{l.current.instanceMatrix.needsUpdate=!0});let d=0,p=0;rn(()=>{if(r===1/0||d<r){l.current.updateMatrix(),l.current.updateMatrixWorld(),OP.copy(l.current.matrixWorld).invert(),p=Math.min(n,e!==void 0?e:n,c.length),l.current.count=p,T1(l.current.instanceMatrix,{offset:0,count:p*16}),T1(l.current.instanceColor,{offset:0,count:p*3});for(let g=0;g<c.length;g++){const v=c[g].current;v.matrixWorld.decompose(BP,kP,FP),DP.compose(BP,kP,FP).premultiply(OP),DP.toArray(f,g*16),l.current.instanceMatrix.needsUpdate=!0,v.color.toArray(h,g*3),l.current.instanceColor.needsUpdate=!0}d++}});const m=E.useMemo(()=>({getParent:()=>l,subscribe:g=>(u(v=>[...v,g]),()=>u(v=>v.filter(x=>x.current!==g.current)))}),[]);return E.createElement("instancedMesh",Ct({userData:{instances:c},matrixAutoUpdate:!1,ref:l,args:[null,null,0],raycast:()=>null},i),E.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:f.length/16,array:f,itemSize:16,usage:Zi}),E.createElement("instancedBufferAttribute",{attach:"instanceColor",count:h.length/3,array:h,itemSize:3,usage:Zi}),jye(t)?E.createElement(o.Provider,{value:m},t(a)):E.createElement($H.Provider,{value:m},t))}),Yye=E.forwardRef(function({meshes:e,children:n,...r},i){const s=Array.isArray(e);if(!s)for(const o of Object.keys(e))e[o].isMesh||delete e[o];return E.createElement("group",{ref:i},E.createElement(WH,{components:(s?e:Object.values(e)).map(({geometry:o,material:a})=>E.createElement(gC,Ct({key:o.uuid,geometry:o,material:a},r)))},o=>s?n(...o):n(Object.keys(e).filter(a=>e[a].isMesh).reduce((a,l,c)=>({...a,[l]:o[c]}),{}))))}),qye=E.createContext(null),Kye=E.forwardRef(({startFrame:t,endFrame:e,fps:n,frameName:r,textureDataURL:i,textureImageURL:s,loop:o,numberOfFrames:a,autoPlay:l,animationNames:c,onStart:u,onEnd:f,onLoopEnd:h,onFrame:d,play:p,pause:m,flipX:g,alphaTest:v,children:x,asSprite:y,offset:A,playBackwards:T,resetOnEnd:w,maxItems:M,instanceItems:C,spriteDataset:S,...R},O)=>{var L;const B=E.useRef(),N=E.useRef(null),$=E.useRef(),U=E.useRef(),Q=E.useRef(window.performance.now()),Y=E.useRef(t||0),ee=E.useRef(r||""),ne=1e3/(n||30),[P,se]=E.useState(new Vn),re=E.useRef(0),[Z,X]=E.useState([1,1,1]),W=g?-1:1,[K,ge]=E.useState(y??!0),Se=E.useRef(m),xe=E.useRef(A),Me=E.useRef(!1),he=E.useRef([]),{spriteObj:Oe,loadJsonAndTexture:be}=fC(null,null,c,a);function Te(){}const Re=E.useMemo(()=>({current:xe.current,offset:xe.current,imageUrl:s,reset:Te,hasEnded:!1,ref:O}),[s,S]);E.useImperativeHandle(O,()=>B.current,[]),E.useLayoutEffect(()=>{xe.current=A},[A]);const $e=(ie,Ae)=>{const Je=Ae/ie;return U.current&&U.current.scale.set(1,Je,1),[1,Je,1]};E.useEffect(()=>{if(S){var ie;ve(S==null||(ie=S.spriteTexture)==null?void 0:ie.clone(),S.spriteData)}else be(s,i)},[S]),E.useEffect(()=>{if(Oe){var ie;ve(Oe==null||(ie=Oe.spriteTexture)==null?void 0:ie.clone(),Oe==null?void 0:Oe.spriteData)}},[Oe]),E.useEffect(()=>{ge(y??!0)},[y]),E.useEffect(()=>{Re.hasEnded=!1,N.current&&T===!0?Y.current=N.current.frames.length-1:Y.current=0},[T]),E.useLayoutEffect(()=>{me()},[P,g]),E.useEffect(()=>{l&&(Se.current=!1)},[l]),E.useLayoutEffect(()=>{if(ee.current!==r&&r&&(Y.current=0,ee.current=r,Re.hasEnded=!1,N.current)){const{w:ie,h:Ae}=xt(N.current.frames).sourceSize,Je=$e(ie,Ae);X(Je)}},[r]);const ve=(ie,Ae=null)=>{if(Ae===null){if(a){const te=ie.image.width,z=ie.image.height;re.current=a,T&&(Y.current=a-1),N.current={frames:[],meta:{version:"1.0",size:{w:te,h:z},scale:"1"}},N.current.frames=Ae}}else{N.current=Ae,re.current=N.current.frames.length,T&&(Y.current=re.current-1);const{w:te,h:z}=xt(N.current.frames).sourceSize,F=$e(te,z);X(F),$.current&&($.current.map=ie)}if(C)for(var Je=0;Je<C.length;Je++){const te=Object.keys(N.current.frames),z=te[Math.floor(Math.random()*te.length)];he.current.push({key:Je,frames:N.current.frames,selectedFrame:z,offset:{x:0,y:0}})}se(ie)},me=()=>{if(!N.current)return;const{meta:{size:ie},frames:Ae}=N.current,{w:Je,h:te}=Array.isArray(Ae)?Ae[0].sourceSize:r?Ae[r]?Ae[r][0].sourceSize:{w:0,h:0}:{w:0,h:0};$.current.map.wrapS=$.current.map.wrapT=Rr,$.current.map.center.set(0,0),$.current.map.repeat.set(1*W/(ie.w/Je),1/(ie.h/te));const F=1/((ie.h-1)/te);$.current.map.offset.x=0,$.current.map.offset.y=1-F,u&&u({currentFrameName:r,currentFrame:Y.current})},We=()=>{const ie=window.performance.now(),Ae=ie-Q.current,{meta:{size:Je},frames:te}=N.current,{w:z,h:F}=xt(te).sourceSize,ae=Array.isArray(te)?te:r?te[r]:[],ye=e||ae.length-1;var Le=A===void 0?Re.current:A,ke=T?Y.current<0:Y.current>ye,Ve=T?Y.current===ye:Y.current===0,Ce=T?Y.current<0:Y.current>=ye;if(ke){if(Y.current=o?t??0:0,T&&(Y.current=ye),o?h==null||h({currentFrameName:r,currentFrame:Y.current}):(f==null||f({currentFrameName:r,currentFrame:Y.current}),Re.hasEnded=!w,w&&(Se.current=!0)),!o)return}else Ve&&(u==null||u({currentFrameName:r,currentFrame:Y.current}));Le!==void 0&&Ce?Me.current===!1&&(f==null||f({currentFrameName:r,currentFrame:Y.current}),Me.current=!0):Me.current=!1,!(Ae<=ne)&&(Q.current=ie-Ae%ne,Xe(z,F,Je,ae))},Xe=(ie,Ae,Je,te)=>{var z=A===void 0?Re.current:A;const F=Y.current;let ae=0,ye=0;$e(ie,Ae);const Le=Math.round((Je.w-1)/ie),ke=Math.round((Je.h-1)/Ae);if(!te[F])return;const{frame:{x:Ve,y:Ce},sourceSize:{w:Ye,h:tt}}=te[F],it=1/Le,dt=1/ke;if(ae=W>0?it*(Ve/Ye):it*(Ve/Ye)-$.current.map.repeat.x,ye=Math.abs(1-dt)-dt*(Ce/tt),$.current.map.offset.x=ae,$.current.map.offset.y=ye,z!=null){let Ze=Math.floor(z*te.length);Ze=Math.max(0,Math.min(Ze,te.length-1)),isNaN(Ze)&&(Ze=0),Y.current=Ze}else T?Y.current-=1:Y.current+=1};rn((ie,Ae)=>{var Je,te;!((Je=N.current)!=null&&Je.frames)||!((te=$.current)!=null&&te.map)||Se.current||!Re.hasEnded&&(l||p)&&(We(),d&&d({currentFrameName:ee.current,currentFrame:Y.current}))});const xt=ie=>{if(Array.isArray(ie))return ie[0];if(typeof ie=="object"&&ie!==null){const Ae=Object.keys(ie);return r?ie[r][0]:ie[Ae[0]][0]}else return{w:0,h:0}};function fe(ie,Ae){let Je=[];return typeof Ae=="number"?Je=[Ae,Ae,Ae]:Array.isArray(Ae)?Je=Ae:Ae instanceof J&&(Je=[Ae.x,Ae.y,Ae.z]),ie.map((z,F)=>z*Je[F])}return E.createElement("group",Ct({},R,{ref:B,scale:fe(Z??[1,1,1],(L=R.scale)!==null&&L!==void 0?L:1)}),E.createElement(qye.Provider,{value:Re},E.createElement(E.Suspense,{fallback:null},K&&E.createElement("sprite",{ref:U,scale:1},E.createElement("spriteMaterial",{premultipliedAlpha:!1,toneMapped:!1,ref:$,map:P,transparent:!0,alphaTest:v??0})),!K&&E.createElement(gC,{limit:M??1},E.createElement("planeGeometry",{args:[1,1]}),E.createElement("meshBasicMaterial",{premultipliedAlpha:!1,toneMapped:!1,side:gr,ref:$,map:P,transparent:!0,alphaTest:v??0}),(C??[0]).map((ie,Ae)=>E.createElement(XH,{key:Ae,ref:(C==null?void 0:C.length)===1?U:null,position:ie,scale:1})))),x))}),Jye=E.forwardRef(({children:t,curve:e},n)=>{const[r]=E.useState(()=>new vs),[i,s]=E.useState(),o=E.useRef();return E.useEffect(()=>{o.current=new xme(r.children[0]),s(o.current.object3D)},[t]),E.useEffect(()=>{var a;e&&((a=o.current)==null||a.updateCurve(0,e))},[e]),E.useImperativeHandle(n,()=>({moveAlongCurve:a=>{var l;(l=o.current)==null||l.moveAlongCurve(a)}})),E.createElement(E.Fragment,null,Hc(t,r),i&&E.createElement("primitive",{object:i}))});var Qye=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class Zye extends Mi{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${Qye}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const exe=E.forwardRef(({speed:t=1,...e},n)=>{const[r]=E.useState(()=>new Zye);return rn(i=>r&&(r.time=i.clock.getElapsedTime()*t)),E.createElement("primitive",Ct({object:r,ref:n,attach:"material"},e))});class txe extends _l{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._factor={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.factor=this._factor,e.vertexShader=`
      uniform float time;
      uniform float factor;
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`float theta = sin( time + position.y ) / 2.0 * factor;
        float c = cos( theta );
        float s = sin( theta );
        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );
        vec3 transformed = vec3( position ) * m;
        vNormal = vNormal * m;`)}get time(){return this._time.value}set time(e){this._time.value=e}get factor(){return this._factor.value}set factor(e){this._factor.value=e}}const nxe=E.forwardRef(({speed:t=1,...e},n)=>{const[r]=E.useState(()=>new txe);return rn(i=>r&&(r.time=i.clock.getElapsedTime()*t)),E.createElement("primitive",Ct({object:r,ref:n,attach:"material"},e))});class rxe extends ur{constructor(e=new qe){super({uniforms:{inputBuffer:new ks(null),depthBuffer:new ks(null),resolution:new ks(new qe),texelSize:new ks(new qe),halfTexelSize:new ks(new qe),kernel:new ks(0),scale:new ks(1),cameraNear:new ks(0),cameraFar:new ks(1),minDepthThreshold:new ks(0),maxDepthThreshold:new ks(1),depthScale:new ks(0),depthToBlurRatioBias:new ks(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <${vo>=154?"colorspace_fragment":"encodings_fragment"}>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:Da,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(e,n){this.uniforms.texelSize.value.set(e,n),this.uniforms.halfTexelSize.value.set(e,n).multiplyScalar(.5)}setResolution(e){this.uniforms.resolution.value.copy(e)}}class ixe{constructor({gl:e,resolution:n,width:r=500,height:i=500,minDepthThreshold:s=0,maxDepthThreshold:o=1,depthScale:a=0,depthToBlurRatioBias:l=.25}){this.renderToScreen=!1,this.renderTargetA=new pr(n,n,{minFilter:Cn,magFilter:Cn,stencilBuffer:!1,depthBuffer:!1,type:Xr}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new rxe,this.convolutionMaterial.setTexelSize(1/r,1/i),this.convolutionMaterial.setResolution(new qe(r,i)),this.scene=new vs,this.camera=new Qp,this.convolutionMaterial.uniforms.minDepthThreshold.value=s,this.convolutionMaterial.uniforms.maxDepthThreshold.value=o,this.convolutionMaterial.uniforms.depthScale.value=a,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=l,this.convolutionMaterial.defines.USE_DEPTH=a>0;const c=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),u=new Float32Array([0,0,2,0,0,2]),f=new on;f.setAttribute("position",new Qt(c,3)),f.setAttribute("uv",new Qt(u,2)),this.screen=new un(f,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(e,n,r){const i=this.scene,s=this.camera,o=this.renderTargetA,a=this.renderTargetB;let l=this.convolutionMaterial,c=l.uniforms;c.depthBuffer.value=n.depthTexture;const u=l.kernel;let f=n,h,d,p;for(d=0,p=u.length-1;d<p;++d)h=d&1?a:o,c.kernel.value=u[d],c.inputBuffer.value=f.texture,e.setRenderTarget(h),e.render(i,s),f=h;c.kernel.value=u[d],c.inputBuffer.value=f.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(i,s)}}let sxe=class extends _l{constructor(e={}){super(e),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(e)}onBeforeCompile(e){var n;(n=e.defines)!=null&&n.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),e.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${e.fragmentShader}`,e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(e){this._tDiffuse.value=e}get tDepth(){return this._tDepth.value}set tDepth(e){this._tDepth.value=e}get distortionMap(){return this._distortionMap.value}set distortionMap(e){this._distortionMap.value=e}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(e){this._tDiffuseBlur.value=e}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(e){this._textureMatrix.value=e}get hasBlur(){return this._hasBlur.value}set hasBlur(e){this._hasBlur.value=e}get mirror(){return this._mirror.value}set mirror(e){this._mirror.value=e}get mixBlur(){return this._mixBlur.value}set mixBlur(e){this._mixBlur.value=e}get mixStrength(){return this._blurStrength.value}set mixStrength(e){this._blurStrength.value=e}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(e){this._minDepthThreshold.value=e}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(e){this._maxDepthThreshold.value=e}get depthScale(){return this._depthScale.value}set depthScale(e){this._depthScale.value=e}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(e){this._depthToBlurRatioBias.value=e}get distortion(){return this._distortion.value}set distortion(e){this._distortion.value=e}get mixContrast(){return this._mixContrast.value}set mixContrast(e){this._mixContrast.value=e}};const oxe=E.forwardRef(({mixBlur:t=0,mixStrength:e=1,resolution:n=256,blur:r=[0,0],minDepthThreshold:i=.9,maxDepthThreshold:s=1,depthScale:o=0,depthToBlurRatioBias:a=.25,mirror:l=0,distortion:c=1,mixContrast:u=1,distortionMap:f,reflectorOffset:h=0,...d},p)=>{Fi({MeshReflectorMaterialImpl:sxe});const m=wt(({gl:P})=>P),g=wt(({camera:P})=>P),v=wt(({scene:P})=>P);r=Array.isArray(r)?r:[r,r];const x=r[0]+r[1]>0,y=E.useRef(null);E.useImperativeHandle(p,()=>y.current,[]);const[A]=E.useState(()=>new zs),[T]=E.useState(()=>new J),[w]=E.useState(()=>new J),[M]=E.useState(()=>new J),[C]=E.useState(()=>new yt),[S]=E.useState(()=>new J(0,0,-1)),[R]=E.useState(()=>new Xn),[O]=E.useState(()=>new J),[L]=E.useState(()=>new J),[B]=E.useState(()=>new Xn),[N]=E.useState(()=>new yt),[$]=E.useState(()=>new mr),U=E.useCallback(()=>{var P;const se=y.current.parent||((P=y.current)==null?void 0:P.__r3f.parent);if(!se||(w.setFromMatrixPosition(se.matrixWorld),M.setFromMatrixPosition(g.matrixWorld),C.extractRotation(se.matrixWorld),T.set(0,0,1),T.applyMatrix4(C),w.addScaledVector(T,h),O.subVectors(w,M),O.dot(T)>0))return;O.reflect(T).negate(),O.add(w),C.extractRotation(g.matrixWorld),S.set(0,0,-1),S.applyMatrix4(C),S.add(M),L.subVectors(w,S),L.reflect(T).negate(),L.add(w),$.position.copy(O),$.up.set(0,1,0),$.up.applyMatrix4(C),$.up.reflect(T),$.lookAt(L),$.far=g.far,$.updateMatrixWorld(),$.projectionMatrix.copy(g.projectionMatrix),N.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),N.multiply($.projectionMatrix),N.multiply($.matrixWorldInverse),N.multiply(se.matrixWorld),A.setFromNormalAndCoplanarPoint(T,w),A.applyMatrix4($.matrixWorldInverse),R.set(A.normal.x,A.normal.y,A.normal.z,A.constant);const re=$.projectionMatrix;B.x=(Math.sign(R.x)+re.elements[8])/re.elements[0],B.y=(Math.sign(R.y)+re.elements[9])/re.elements[5],B.z=-1,B.w=(1+re.elements[10])/re.elements[14],R.multiplyScalar(2/R.dot(B)),re.elements[2]=R.x,re.elements[6]=R.y,re.elements[10]=R.z+1,re.elements[14]=R.w},[g,h]),[Q,Y,ee,ne]=E.useMemo(()=>{const P={minFilter:Cn,magFilter:Cn,type:Xr},se=new pr(n,n,P);se.depthBuffer=!0,se.depthTexture=new Ig(n,n),se.depthTexture.format=Lc,se.depthTexture.type=Jp;const re=new pr(n,n,P),Z=new ixe({gl:m,resolution:n,width:r[0],height:r[1],minDepthThreshold:i,maxDepthThreshold:s,depthScale:o,depthToBlurRatioBias:a}),X={mirror:l,textureMatrix:N,mixBlur:t,tDiffuse:se.texture,tDepth:se.depthTexture,tDiffuseBlur:re.texture,hasBlur:x,mixStrength:e,minDepthThreshold:i,maxDepthThreshold:s,depthScale:o,depthToBlurRatioBias:a,distortion:c,distortionMap:f,mixContrast:u,"defines-USE_BLUR":x?"":void 0,"defines-USE_DEPTH":o>0?"":void 0,"defines-USE_DISTORTION":f?"":void 0};return[se,re,Z,X]},[m,r,N,n,l,x,t,e,i,s,o,a,c,f,u]);return rn(()=>{var P;const se=y.current.parent||((P=y.current)==null?void 0:P.__r3f.parent);if(!se)return;se.visible=!1;const re=m.xr.enabled,Z=m.shadowMap.autoUpdate;U(),m.xr.enabled=!1,m.shadowMap.autoUpdate=!1,m.setRenderTarget(Q),m.state.buffers.depth.setMask(!0),m.autoClear||m.clear(),m.render(v,$),x&&ee.render(m,Q,Y),m.xr.enabled=re,m.shadowMap.autoUpdate=Z,se.visible=!0,m.setRenderTarget(null)}),E.createElement("meshReflectorMaterialImpl",Ct({attach:"material",key:"key"+ne["defines-USE_BLUR"]+ne["defines-USE_DEPTH"]+ne["defines-USE_DISTORTION"],ref:y},ne,d))}),axe=Ga({envMap:null,bounces:3,ior:2.4,correctMips:!0,aberrationStrength:.01,fresnel:0,bvh:new GH,color:new bt("white"),resolution:new qe,viewMatrixInverse:new yt,projectionMatrixInverse:new yt},`
  uniform mat4 viewMatrixInverse;

  varying vec3 vWorldPosition;  
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif

  void main() {        
    vec4 transformedNormal = vec4(normal, 0.0);
    vec4 transformedPosition = vec4(position, 1.0);
    #ifdef USE_INSTANCING
      transformedNormal = instanceMatrix * transformedNormal;
      transformedPosition = instanceMatrix * transformedPosition;
    #endif

    #ifdef USE_INSTANCING
      vModelMatrixInverse = inverse(modelMatrix * instanceMatrix);
    #else
      vModelMatrixInverse = inverse(modelMatrix);
    #endif

    #ifdef USE_INSTANCING_COLOR
      vInstanceColor = instanceColor.rgb;
    #endif

    vWorldPosition = (modelMatrix * transformedPosition).xyz;
    vNormal = normalize((viewMatrixInverse * vec4(normalMatrix * transformedNormal.xyz, 0.0)).xyz);
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * transformedPosition;
  }`,`
  #define ENVMAP_TYPE_CUBE_UV
  precision highp isampler2D;
  precision highp usampler2D;
  varying vec3 vWorldPosition;
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif
    
  #ifdef ENVMAP_TYPE_CUBEM
    uniform samplerCube envMap;
  #else
    uniform sampler2D envMap;
  #endif
    
  uniform float bounces;
  ${Fye}
  ${Uye}
  uniform BVH bvh;
  uniform float ior;
  uniform bool correctMips;
  uniform vec2 resolution;
  uniform float fresnel;
  uniform mat4 modelMatrix;
  uniform mat4 projectionMatrixInverse;
  uniform mat4 viewMatrixInverse;
  uniform float aberrationStrength;
  uniform vec3 color;
  
  float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {
    return pow( 1.0 + dot( viewDirection, worldNormal), 10.0 );
  }
    
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 normal, float ior, mat4 modelMatrixInverse) {
    vec3 rayOrigin = ro;
    vec3 rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = vWorldPosition + rayDirection * 0.001;
    rayOrigin = (modelMatrixInverse * vec4(rayOrigin, 1.0)).xyz;
    rayDirection = normalize((modelMatrixInverse * vec4(rayDirection, 0.0)).xyz);
    for(float i = 0.0; i < bounces; i++) {
      uvec4 faceIndices = uvec4( 0u );
      vec3 faceNormal = vec3( 0.0, 0.0, 1.0 );
      vec3 barycoord = vec3( 0.0 );
      float side = 1.0;
      float dist = 0.0;
      bvhIntersectFirstHit( bvh, rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist );
      vec3 hitPos = rayOrigin + rayDirection * max(dist - 0.001, 0.0);      
      vec3 tempDir = refract(rayDirection, faceNormal, ior);
      if (length(tempDir) != 0.0) {
        rayDirection = tempDir;
        break;
      }
      rayDirection = reflect(rayDirection, faceNormal);
      rayOrigin = hitPos + rayDirection * 0.01;
    }
    rayDirection = normalize((modelMatrix * vec4(rayDirection, 0.0)).xyz);
    return rayDirection;
  }
    
  #include <common>
  #include <cube_uv_reflection_fragment>
    
  #ifdef ENVMAP_TYPE_CUBEM
    vec4 textureGradient(samplerCube envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      return textureGrad(envMap, rayDirection, dFdx(correctMips ? directionCamPerfect: rayDirection), dFdy(correctMips ? directionCamPerfect: rayDirection));
    }
  #else
    vec4 textureGradient(sampler2D envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      vec2 uvv = equirectUv( rayDirection );
      vec2 smoothUv = equirectUv( directionCamPerfect );
      return textureGrad(envMap, uvv, dFdx(correctMips ? smoothUv : uvv), dFdy(correctMips ? smoothUv : uvv));
    }
  #endif
  
  void main() {
    vec2 uv = gl_FragCoord.xy / resolution;
    vec3 directionCamPerfect = (projectionMatrixInverse * vec4(uv * 2.0 - 1.0, 0.0, 1.0)).xyz;
    directionCamPerfect = (viewMatrixInverse * vec4(directionCamPerfect, 0.0)).xyz;
    directionCamPerfect = normalize(directionCamPerfect);
    vec3 normal = vNormal;
    vec3 rayOrigin = cameraPosition;
    vec3 rayDirection = normalize(vWorldPosition - cameraPosition);
    vec3 finalColor;
    #ifdef CHROMATIC_ABERRATIONS
      vec3 rayDirectionG = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      #ifdef FAST_CHROMA 
        vec3 rayDirectionR = normalize(rayDirectionG + 1.0 * vec3(aberrationStrength / 2.0));
        vec3 rayDirectionB = normalize(rayDirectionG - 1.0 * vec3(aberrationStrength / 2.0));
      #else
        vec3 rayDirectionR = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 - aberrationStrength), 1.0), vModelMatrixInverse);
        vec3 rayDirectionB = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 + aberrationStrength), 1.0), vModelMatrixInverse);
      #endif
      float finalColorR = textureGradient(envMap, rayDirectionR, directionCamPerfect).r;
      float finalColorG = textureGradient(envMap, rayDirectionG, directionCamPerfect).g;
      float finalColorB = textureGradient(envMap, rayDirectionB, directionCamPerfect).b;
      finalColor = vec3(finalColorR, finalColorG, finalColorB);
    #else
      rayDirection = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      finalColor = textureGradient(envMap, rayDirection, directionCamPerfect).rgb;    
    #endif

    finalColor *= color;
    #ifdef USE_INSTANCING_COLOR
      finalColor *= vInstanceColor;
    #endif

    vec3 viewDirection = normalize(vWorldPosition - cameraPosition);
    float nFresnel = fresnelFunc(viewDirection, normal) * fresnel;
    gl_FragColor = vec4(mix(finalColor, vec3(1.0), nFresnel), 1.0);      
    #include <tonemapping_fragment>
    #include <${vo>=154?"colorspace_fragment":"encodings_fragment"}>
  }`),lxe=t=>t&&t.isCubeTexture;function cxe({aberrationStrength:t=0,fastChroma:e=!0,envMap:n,...r}){Fi({MeshRefractionMaterial:axe});const i=E.useRef(),{size:s}=wt(),o=E.useMemo(()=>{var a,l;const c={},u=lxe(n),h=((a=u?(l=n.image[0])==null?void 0:l.width:n.image.width)!==null&&a!==void 0?a:1024)/4,d=Math.floor(Math.log2(h)),p=Math.pow(2,d),m=3*Math.max(p,16*7),g=4*p;return u&&(c.ENVMAP_TYPE_CUBEM=""),c.CUBEUV_TEXEL_WIDTH=`${1/m}`,c.CUBEUV_TEXEL_HEIGHT=`${1/g}`,c.CUBEUV_MAX_MIP=`${d}.0`,t>0&&(c.CHROMATIC_ABERRATIONS=""),e&&(c.FAST_CHROMA=""),c},[t,e]);return E.useLayoutEffect(()=>{var a;const l=(a=i.current)==null||(a=a.__r3f)==null||(a=a.parent)==null?void 0:a.geometry;l&&(i.current.bvh=new GH,i.current.bvh.updateFrom(new w_(l.clone().toNonIndexed(),{lazyGeneration:!1,strategy:hC})))},[]),rn(({camera:a})=>{i.current.viewMatrixInverse=a.matrixWorld,i.current.projectionMatrixInverse=a.projectionMatrixInverse}),E.createElement("meshRefractionMaterial",Ct({key:JSON.stringify(o),defines:o,ref:i,resolution:[s.width,s.height],aberrationStrength:t,envMap:n},r))}const vC=Ga({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");class uxe extends Mi{constructor(e=6,n=!1){super(),this.uniforms={chromaticAberration:{value:.05},transmission:{value:0},_transmission:{value:1},transmissionMap:{value:null},roughness:{value:0},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:1/0},attenuationColor:{value:new bt("white")},anisotropicBlur:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},this.onBeforeCompile=r=>{r.uniforms={...r.uniforms,...this.uniforms},this.anisotropy>0&&(r.defines.USE_ANISOTROPY=""),n?r.defines.USE_SAMPLER="":r.defines.USE_TRANSMISSION="",r.fragmentShader=`
      uniform float chromaticAberration;         
      uniform float anisotropicBlur;      
      uniform float time;
      uniform float distortion;
      uniform float distortionScale;
      uniform float temporalDistortion;
      uniform sampler2D buffer;

      vec3 random3(vec3 c) {
        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
        vec3 r;
        r.z = fract(512.0*j);
        j *= .125;
        r.x = fract(512.0*j);
        j *= .125;
        r.y = fract(512.0*j);
        return r-0.5;
      }

      uint hash( uint x ) {
        x += ( x << 10u );
        x ^= ( x >>  6u );
        x += ( x <<  3u );
        x ^= ( x >> 11u );
        x += ( x << 15u );
        return x;
      }

      // Compound versions of the hashing algorithm I whipped together.
      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }
      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }
      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }

      // Construct a float with half-open range [0:1] using low 23 bits.
      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.
      float floatConstruct( uint m ) {
        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask
        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32
        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)
        m |= ieeeOne;                          // Add fractional part to 1.0
        float  f = uintBitsToFloat( m );       // Range [1:2]
        return f - 1.0;                        // Range [0:1]
      }

      // Pseudo-random value in half-open range [0:1].
      float randomBase( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }
      float randomBase( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float randomBase( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float randomBase( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float rand(float seed) {
        float result = randomBase(vec3(gl_FragCoord.xy, seed));
        return result;
      }

      const float F3 =  0.3333333;
      const float G3 =  0.1666667;

      float snoise(vec3 p) {
        vec3 s = floor(p + dot(p, vec3(F3)));
        vec3 x = p - s + dot(s, vec3(G3));
        vec3 e = step(vec3(0.0), x - x.yzx);
        vec3 i1 = e*(1.0 - e.zxy);
        vec3 i2 = 1.0 - e.zxy*(1.0 - e);
        vec3 x1 = x - i1 + G3;
        vec3 x2 = x - i2 + 2.0*G3;
        vec3 x3 = x - 1.0 + 3.0*G3;
        vec4 w, d;
        w.x = dot(x, x);
        w.y = dot(x1, x1);
        w.z = dot(x2, x2);
        w.w = dot(x3, x3);
        w = max(0.6 - w, 0.0);
        d.x = dot(random3(s), x);
        d.y = dot(random3(s + i1), x1);
        d.z = dot(random3(s + i2), x2);
        d.w = dot(random3(s + 1.0), x3);
        w *= w;
        w *= w;
        d *= w;
        return dot(d, vec4(52.0));
      }

      float snoiseFractal(vec3 m) {
        return 0.5333333* snoise(m)
              +0.2666667* snoise(2.0*m)
              +0.1333333* snoise(4.0*m)
              +0.0666667* snoise(8.0*m);
      }
`+r.fragmentShader,r.fragmentShader=r.fragmentShader.replace("#include <transmission_pars_fragment>",`
        #ifdef USE_TRANSMISSION
          // Transmission code is based on glTF-Sampler-Viewer
          // https://github.com/KhronosGroup/glTF-Sample-Viewer
          uniform float _transmission;
          uniform float thickness;
          uniform float attenuationDistance;
          uniform vec3 attenuationColor;
          #ifdef USE_TRANSMISSIONMAP
            uniform sampler2D transmissionMap;
          #endif
          #ifdef USE_THICKNESSMAP
            uniform sampler2D thicknessMap;
          #endif
          uniform vec2 transmissionSamplerSize;
          uniform sampler2D transmissionSamplerMap;
          uniform mat4 modelMatrix;
          uniform mat4 projectionMatrix;
          varying vec3 vWorldPosition;
          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
            // Direction of refracted light.
            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
            // Compute rotation-independant scaling of the model matrix.
            vec3 modelScale;
            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
            // The thickness is specified in local space.
            return normalize( refractionVector ) * thickness * modelScale;
          }
          float applyIorToRoughness( const in float roughness, const in float ior ) {
            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
            // an IOR of 1.5 results in the default amount of microfacet refraction.
            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
          }
          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );            
            #ifdef USE_SAMPLER
              #ifdef texture2DLodEXT
                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #else
                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #endif
            #else
              return texture2D(buffer, fragCoord.xy);
            #endif
          }
          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
            if ( isinf( attenuationDistance ) ) {
              // Attenuation distance is +∞, i.e. the transmitted color is not attenuated at all.
              return radiance;
            } else {
              // Compute light attenuation using Beer's law.
              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law
              return transmittance * radiance;
            }
          }
          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
            const in vec3 attenuationColor, const in float attenuationDistance ) {
            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
            vec3 refractedRayExit = position + transmissionRay;
            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
            vec2 refractionCoords = ndcPos.xy / ndcPos.w;
            refractionCoords += 1.0;
            refractionCoords /= 2.0;
            // Sample framebuffer to get pixel the refracted ray hits.
            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
            // Get the specular component.
            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
          }
        #endif
`),r.fragmentShader=r.fragmentShader.replace("#include <transmission_fragment>",`  
        // Improve the refraction to use the world pos
        material.transmission = _transmission;
        material.transmissionAlpha = 1.0;
        material.thickness = thickness;
        material.attenuationDistance = attenuationDistance;
        material.attenuationColor = attenuationColor;
        #ifdef USE_TRANSMISSIONMAP
          material.transmission *= texture2D( transmissionMap, vUv ).r;
        #endif
        #ifdef USE_THICKNESSMAP
          material.thickness *= texture2D( thicknessMap, vUv ).g;
        #endif
        
        vec3 pos = vWorldPosition;
        float runningSeed = 0.0;
        vec3 v = normalize( cameraPosition - pos );
        vec3 n = inverseTransformDirection( normal, viewMatrix );
        vec3 transmission = vec3(0.0);
        float transmissionR, transmissionB, transmissionG;
        float randomCoords = rand(runningSeed++);
        float thickness_smear = thickness * max(pow(roughnessFactor, 0.33), anisotropicBlur);
        vec3 distortionNormal = vec3(0.0);
        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;
        if (distortion > 0.0) {
          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));
        }
        for (float i = 0.0; i < ${e}.0; i ++) {
          vec3 sampleNorm = normalize(n + roughnessFactor * roughnessFactor * 2.0 * normalize(vec3(rand(runningSeed++) - 0.5, rand(runningSeed++) - 0.5, rand(runningSeed++) - 0.5)) * pow(rand(runningSeed++), 0.33) + distortionNormal);
          transmissionR = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).r;
          transmissionG = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (1.0 + chromaticAberration * (i + randomCoords) / float(${e})) , material.thickness + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).g;
          transmissionB = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (1.0 + 2.0 * chromaticAberration * (i + randomCoords) / float(${e})), material.thickness + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).b;
          transmission.r += transmissionR;
          transmission.g += transmissionG;
          transmission.b += transmissionB;
        }
        transmission /= ${e}.0;
        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
`)},Object.keys(this.uniforms).forEach(r=>Object.defineProperty(this,r,{get:()=>this.uniforms[r].value,set:i=>this.uniforms[r].value=i}))}}const fxe=E.forwardRef(({buffer:t,transmissionSampler:e=!1,backside:n=!1,side:r=es,transmission:i=1,thickness:s=0,backsideThickness:o=0,backsideEnvMapIntensity:a=1,samples:l=10,resolution:c,backsideResolution:u,background:f,anisotropy:h,anisotropicBlur:d,...p},m)=>{Fi({MeshTransmissionMaterial:uxe});const g=E.useRef(null),[v]=E.useState(()=>new vC),x=Do(u||c),y=Do(c);let A,T,w,M;return rn(C=>{g.current.time=C.clock.getElapsedTime(),g.current.buffer===y.texture&&!e&&(M=g.current.__r3f.parent,M&&(w=C.gl.toneMapping,A=C.scene.background,T=g.current.envMapIntensity,C.gl.toneMapping=fl,f&&(C.scene.background=f),M.material=v,n&&(C.gl.setRenderTarget(x),C.gl.render(C.scene,C.camera),M.material=g.current,M.material.buffer=x.texture,M.material.thickness=o,M.material.side=Ti,M.material.envMapIntensity=a),C.gl.setRenderTarget(y),C.gl.render(C.scene,C.camera),M.material=g.current,M.material.thickness=s,M.material.side=r,M.material.buffer=y.texture,M.material.envMapIntensity=T,C.scene.background=A,C.gl.setRenderTarget(null),C.gl.toneMapping=w))}),E.useImperativeHandle(m,()=>g.current,[]),E.createElement("meshTransmissionMaterial",Ct({args:[l,e],ref:g},p,{buffer:t||y.texture,_transmission:i,anisotropicBlur:d??h,transmission:e?i:0,thickness:s,side:r}))}),hxe=E.forwardRef((t,e)=>(Fi({DiscardMaterialImpl:vC}),E.createElement("discardMaterialImpl",Ct({ref:e},t)))),J2=vo>=154?"opaque_fragment":"output_fragment";class dxe extends ul{constructor(e){super(e),this.onBeforeCompile=(n,r)=>{const{isWebGL2:i}=r.capabilities;n.fragmentShader=n.fragmentShader.replace(`#include <${J2}>`,`
        ${i?`#include <${J2}>`:`#extension GL_OES_standard_derivatives : enable
#include <${J2}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${vo>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const pxe=E.forwardRef((t,e)=>{const[n]=E.useState(()=>new dxe(null));return E.createElement("primitive",Ct({},t,{object:n,ref:e,attach:"material"}))}),mxe=({focus:t=0,size:e=25,samples:n=10}={})=>`
#define PENUMBRA_FILTER_SIZE float(${e})
#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))
vec3 randRGB(vec2 uv) {
  return vec3(
    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),
    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),
    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)
  );
}

vec3 lowPassRandRGB(vec2 uv) {
  // 3x3 convolution (average)
  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9
  vec3 result = vec3(0);
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));
  result *= 0.111111111; // 1.0 / 9.0
  return result;
}
vec3 highPassRandRGB(vec2 uv) {
  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal
  // hp(x) = x - lp(x)
  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;
}


vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}
float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}
float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float blockerDepthSum = float(${t});
  float blockers = 0.0;

  int j = 0;
  vec2 offset = vec2(0.);
  float depth = 0.;

  #pragma unroll_loop_start
  for(int i = 0; i < ${n}; i ++) {
    offset = (vogelDiskSample(j, ${n}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;
    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));
    if (depth < compare) {
      blockerDepthSum += depth;
      blockers++;
    }
    j++;
  }
  #pragma unroll_loop_end

  if (blockers > 0.0) {
    return blockerDepthSum / blockers;
  }
  return -1.0;
}

        
float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float shadow = 0.0f;
  int j = 0;
  vec2 vogelSample = vec2(0.0);
  vec2 offset = vec2(0.0);
  #pragma unroll_loop_start
  for (int i = 0; i < ${n}; i++) {
    vogelSample = vogelDiskSample(j, ${n}, angle) * texelSize;
    offset = vogelSample * (1.0 + filterRadius * float(${e}));
    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    j++;
  }
  #pragma unroll_loop_end
  return shadow * 1.0 / ${n}.0;
}

float PCSS (sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);
  if (avgBlockerDepth == -1.0) {
    return 1.0;
  }
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);
}`;function UP(t,e,n){e.traverse(r=>{r.material&&(t.properties.remove(r.material),r.material.dispose==null||r.material.dispose())}),t.info.programs.length=0,t.compile(e,n)}function gxe({focus:t=0,samples:e=10,size:n=25}){const r=wt(o=>o.gl),i=wt(o=>o.scene),s=wt(o=>o.camera);return E.useEffect(()=>{const o=Dn.shadowmap_pars_fragment;return Dn.shadowmap_pars_fragment=Dn.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+mxe({size:n,samples:e,focus:t})).replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),UP(r,i,s),()=>{Dn.shadowmap_pars_fragment=o,UP(r,i,s)}},[t,n,e]),null}function Hg(t,e){const n=t+"Geometry";return E.forwardRef(({args:r,children:i,...s},o)=>{const a=E.useRef(null);return E.useImperativeHandle(o,()=>a.current),E.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),E.createElement("mesh",Ct({ref:a},s),E.createElement(n,{attach:"geometry",args:r}),i)})}const yC=Hg("sphere"),vxe=Hg("plane"),yxe=Hg("extrude"),xxe=Hg("lathe"),Exe=Hg("shape",({geometry:t})=>{const e=t.attributes.position,n=new Yn().setFromBufferAttribute(e),r=new J;n.getSize(r);const i=[];let s=0,o=0,a=0,l=0;for(let c=0;c<e.count;c++)s=e.getX(c),o=e.getY(c),a=(s-n.min.x)/r.x,l=(o-n.min.y)/r.y,i.push(a,l);t.setAttribute("uv",new Ot(i,2))}),Nl=1e-5;function _xe(t,e,n){const r=new Oc,i=n-Nl;return r.absarc(Nl,Nl,Nl,-Math.PI/2,-Math.PI,!0),r.absarc(Nl,e-i*2,Nl,Math.PI,Math.PI/2,!0),r.absarc(t-i*2,e-i*2,Nl,Math.PI/2,0,!0),r.absarc(t-i*2,Nl,Nl,0,-Math.PI/2,!0),r}const bxe=E.forwardRef(function({args:[e=1,n=1,r=1]=[],radius:i=.05,steps:s=1,smoothness:o=4,bevelSegments:a=4,creaseAngle:l=.4,children:c,...u},f){const h=E.useMemo(()=>_xe(e,n,i),[e,n,i]),d=E.useMemo(()=>({depth:r-i*2,bevelEnabled:!0,bevelSegments:a*2,steps:s,bevelSize:i-Nl,bevelThickness:i,curveSegments:o}),[r,i,o]),p=E.useRef(null);return E.useLayoutEffect(()=>{p.current&&(p.current.center(),$z(p.current,l))},[h,d]),E.createElement("mesh",Ct({ref:f},u),E.createElement("extrudeGeometry",{ref:p,args:[h,d]}),c)});function Axe(){const t=new on,e=new Float32Array([-1,-1,3,-1,-1,3]);return t.boundingSphere=new Fr,t.boundingSphere.set(new J,1/0),t.setAttribute("position",new Qt(e,2)),t}const Txe=E.forwardRef(function({children:e,...n},r){const i=E.useMemo(Axe,[]);return E.createElement("mesh",Ct({ref:r,geometry:i,frustumCulled:!1},n),e)}),wxe=E.forwardRef(({children:t,width:e,height:n,depth:r,box3:i,precise:s=!0,...o},a)=>{const l=E.useRef(null),c=E.useRef(null),u=E.useRef(null);return E.useLayoutEffect(()=>{c.current.matrixWorld.identity();let f=i||new Yn().setFromObject(u.current,s);const h=f.max.x-f.min.x,d=f.max.y-f.min.y,p=f.max.z-f.min.z;let m=Math.max(h,d,p);e&&(m=h),n&&(m=d),r&&(m=p),c.current.scale.setScalar(1/m)},[e,n,r,i,s]),E.useImperativeHandle(a,()=>l.current,[]),E.createElement("group",Ct({ref:l},o),E.createElement("group",{ref:c},E.createElement("group",{ref:u},t)))});var _a=function(t){return t[t.NONE=0]="NONE",t[t.START=1]="START",t[t.ACTIVE=2]="ACTIVE",t}(_a||{});const Dd=t=>t&&t.isOrthographicCamera,Sxe=t=>t&&t.isBox3,Cxe=t=>1-Math.exp(-5*t)+.007*t,YH=E.createContext(null);function qH({children:t,maxDuration:e=1,margin:n=1.2,observe:r,fit:i,clip:s,interpolateFunc:o=Cxe,onFit:a}){const l=E.useRef(null),{camera:c,size:u,invalidate:f}=wt(),h=wt(T=>T.controls),d=E.useRef(a);d.current=a;const p=E.useRef({camPos:new J,camRot:new kn,camZoom:1}),m=E.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),g=E.useRef(_a.NONE),v=E.useRef(0),[x]=E.useState(()=>new Yn),y=E.useMemo(()=>{function T(){const w=x.getSize(new J),M=x.getCenter(new J),C=Math.max(w.x,w.y,w.z),S=Dd(c)?C*4:C/(2*Math.atan(Math.PI*c.fov/360)),R=Dd(c)?C*4:S/c.aspect,O=n*Math.max(S,R);return{box:x,size:w,center:M,distance:O}}return{getSize:T,refresh(w){if(Sxe(w))x.copy(w);else{const M=w||l.current;if(!M)return this;M.updateWorldMatrix(!0,!0),x.setFromObject(M)}if(x.isEmpty()){const M=c.position.length()||10;x.setFromCenterAndSize(new J,new J(M,M,M))}return p.current.camPos.copy(c.position),p.current.camRot.copy(c.quaternion),Dd(c)&&(p.current.camZoom=c.zoom),m.current.camPos=void 0,m.current.camRot=void 0,m.current.camZoom=void 0,m.current.camUp=void 0,m.current.target=void 0,this},reset(){const{center:w,distance:M}=T(),C=c.position.clone().sub(w).normalize();m.current.camPos=w.clone().addScaledVector(C,M),m.current.target=w.clone();const S=new yt().lookAt(m.current.camPos,m.current.target,c.up);return m.current.camRot=new kn().setFromRotationMatrix(S),g.current=_a.START,v.current=0,this},moveTo(w){return m.current.camPos=Array.isArray(w)?new J(...w):w.clone(),g.current=_a.START,v.current=0,this},lookAt({target:w,up:M}){m.current.target=Array.isArray(w)?new J(...w):w.clone(),M?m.current.camUp=Array.isArray(M)?new J(...M):M.clone():m.current.camUp=c.up.clone();const C=new yt().lookAt(m.current.camPos||c.position,m.current.target,m.current.camUp);return m.current.camRot=new kn().setFromRotationMatrix(C),g.current=_a.START,v.current=0,this},to({position:w,target:M}){return this.moveTo(w).lookAt({target:M})},fit(){if(!Dd(c))return this.reset();let w=0,M=0;const C=[new J(x.min.x,x.min.y,x.min.z),new J(x.min.x,x.max.y,x.min.z),new J(x.min.x,x.min.y,x.max.z),new J(x.min.x,x.max.y,x.max.z),new J(x.max.x,x.max.y,x.max.z),new J(x.max.x,x.max.y,x.min.z),new J(x.max.x,x.min.y,x.max.z),new J(x.max.x,x.min.y,x.min.z)],S=m.current.camPos||c.position,R=m.current.target||(h==null?void 0:h.target),O=m.current.camUp||c.up,L=R?new yt().lookAt(S,R,O).setPosition(S).invert():c.matrixWorldInverse;for(const $ of C)$.applyMatrix4(L),w=Math.max(w,Math.abs($.y)),M=Math.max(M,Math.abs($.x));w*=2,M*=2;const B=(c.top-c.bottom)/w,N=(c.right-c.left)/M;return m.current.camZoom=Math.min(B,N)/n,g.current=_a.START,v.current=0,d.current&&d.current(this.getSize()),this},clip(){const{distance:w}=T();return c.near=w/100,c.far=w*100,c.updateProjectionMatrix(),h&&(h.maxDistance=w*10,h.update()),f(),this}}},[x,c,h,n,f]);E.useLayoutEffect(()=>{if(h){const T=()=>{if(h&&m.current.target&&g.current!==_a.NONE){const w=new J().setFromMatrixColumn(c.matrix,2),M=p.current.camPos.distanceTo(h.target),C=(m.current.camPos||p.current.camPos).distanceTo(m.current.target),S=(1-v.current)*M+v.current*C;h.target.copy(c.position).addScaledVector(w,-S),h.update()}g.current=_a.NONE};return h.addEventListener("start",T),()=>h.removeEventListener("start",T)}},[h]);const A=E.useRef(0);return E.useLayoutEffect(()=>{(r||A.current++===0)&&(y.refresh(),i&&y.reset().fit(),s&&y.clip())},[u,s,i,r,c,h]),rn((T,w)=>{if(g.current===_a.START)g.current=_a.ACTIVE,f();else if(g.current===_a.ACTIVE){if(v.current+=w/e,v.current>=1)m.current.camPos&&c.position.copy(m.current.camPos),m.current.camRot&&c.quaternion.copy(m.current.camRot),m.current.camUp&&c.up.copy(m.current.camUp),m.current.camZoom&&Dd(c)&&(c.zoom=m.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix(),h&&m.current.target&&(h.target.copy(m.current.target),h.update()),g.current=_a.NONE;else{const M=o(v.current);m.current.camPos&&c.position.lerpVectors(p.current.camPos,m.current.camPos,M),m.current.camRot&&c.quaternion.slerpQuaternions(p.current.camRot,m.current.camRot,M),m.current.camUp&&c.up.set(0,1,0).applyQuaternion(c.quaternion),m.current.camZoom&&Dd(c)&&(c.zoom=(1-M)*p.current.camZoom+M*m.current.camZoom),c.updateMatrixWorld(),c.updateProjectionMatrix()}f()}}),E.createElement("group",{ref:l},E.createElement(YH.Provider,{value:y},t))}function Mxe(){return E.useContext(YH)}const Rxe=E.forwardRef(({intensity:t=1,decay:e,decayRate:n=.65,maxYaw:r=.1,maxPitch:i=.1,maxRoll:s=.1,yawFrequency:o=.1,pitchFrequency:a=.1,rollFrequency:l=.1},c)=>{const u=wt(x=>x.camera),f=wt(x=>x.controls),h=E.useRef(t),d=E.useRef(u.rotation.clone()),[p]=E.useState(()=>new y2),[m]=E.useState(()=>new y2),[g]=E.useState(()=>new y2),v=()=>{(h.current<0||h.current>1)&&(h.current=h.current<0?0:1)};return E.useImperativeHandle(c,()=>({getIntensity:()=>h.current,setIntensity:x=>{h.current=x,v()}}),[]),E.useEffect(()=>{if(f){const x=()=>void(d.current=u.rotation.clone());return f.addEventListener("change",x),x(),()=>void f.removeEventListener("change",x)}},[u,f]),rn((x,y)=>{const A=Math.pow(h.current,2),T=r*A*p.noise(x.clock.elapsedTime*o,1),w=i*A*m.noise(x.clock.elapsedTime*a,1),M=s*A*g.noise(x.clock.elapsedTime*l,1);u.rotation.set(d.current.x+w,d.current.y+T,d.current.z+M),e&&h.current>0&&(h.current-=n*y,v())}),null}),Ixe=E.forwardRef(({children:t,enabled:e=!0,speed:n=1,rotationIntensity:r=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],...o},a)=>{const l=E.useRef(null);E.useImperativeHandle(a,()=>l.current,[]);const c=E.useRef(Math.random()*1e4);return rn(u=>{var f,h;if(!e||n===0)return;const d=c.current+u.clock.getElapsedTime();l.current.rotation.x=Math.cos(d/4*n)/8*r,l.current.rotation.y=Math.sin(d/4*n)/8*r,l.current.rotation.z=Math.sin(d/4*n)/20*r;let p=Math.sin(d/4*n)/10;p=si.mapLinear(p,-.1,.1,(f=s==null?void 0:s[0])!==null&&f!==void 0?f:-.1,(h=s==null?void 0:s[1])!==null&&h!==void 0?h:.1),l.current.position.y=p*i,l.current.updateMatrix()}),E.createElement("group",o,E.createElement("group",{ref:l,matrixAutoUpdate:!1},t))}),KH=(t,e,n)=>{let r;switch(t){case Cs:r=new Uint8ClampedArray(e*n*4);break;case Xr:r=new Uint16Array(e*n*4);break;case Ws:r=new Uint32Array(e*n*4);break;case j1:r=new Int8Array(e*n*4);break;case DE:r=new Int16Array(e*n*4);break;case eh:r=new Int32Array(e*n*4);break;case fr:r=new Float32Array(e*n*4);break;default:throw new Error("Unsupported data type")}return r};let yx;const Pxe=(t,e,n,r)=>{if(yx!==void 0)return yx;const i=new pr(1,1,r);e.setRenderTarget(i);const s=new un(new Fo,new Or({color:16777215}));e.render(s,n),e.setRenderTarget(null);const o=KH(t,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,o),i.dispose(),s.geometry.dispose(),s.material.dispose(),yx=o[0]!==0,yx};class xC{constructor(e){var n,r,i,s,o,a,l,c,u,f,h,d,p,m,g,v;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(y){throw this._renderer.setRenderTarget(null),y}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const x={format:Sr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Cn,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:Cn,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples:void 0,wrapS:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.wrapS)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS:Er,wrapT:((p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapT)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapT:Er};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=xC.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new vs,this._camera=new Bi,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Pxe(this._type,this._renderer,this._camera,x)){let y;switch(this._type){case Xr:y=this._renderer.extensions.has("EXT_color_buffer_float")?fr:void 0;break}y!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${fr}`),this._type=y):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new un(new Fo,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new pr(this.width,this.height,x),this._renderTarget.texture.mapping=((g=e.renderTargetOptions)===null||g===void 0?void 0:g.mapping)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.mapping:zu}static instantiateRenderer(){const e=new Pg;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=KH(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const n=new mo(this.toArray(),this.width,this.height,Sr,this._type,(e==null?void 0:e.mapping)||zu,(e==null?void 0:e.wrapS)||Er,(e==null?void 0:e.wrapT)||Er,(e==null?void 0:e.magFilter)||Cn,(e==null?void 0:e.minFilter)||Cn,(e==null?void 0:e.anisotropy)||1,sa);return n.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof ur&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof Vn&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof Vn&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const Lxe=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Nxe=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Oxe extends ur{constructor({gamma:e,offsetHdr:n,offsetSdr:r,gainMapMin:i,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:Lxe,fragmentShader:Nxe,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new J(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new J().fromArray(n)},offsetSdr:{value:new J().fromArray(r)},gainMapMin:{value:new J().fromArray(i)},gainMapMax:{value:new J().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:Da,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const n=this.uniforms.gamma.value;n.x=1/e[0],n.y=1/e[1],n.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class JH extends Error{}class QH extends Error{}const L0=(t,e,n)=>{var r;let i;const s=(r=t.attributes.getNamedItem(e))===null||r===void 0?void 0:r.nodeValue;if(s)i=s;else{const o=t.getElementsByTagName(e)[0];if(o){const a=o.getElementsByTagName("rdf:li");if(a.length===3)i=Array.from(a).map(l=>l.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`)}else{if(n)return n;throw new Error(`Can't find ${e} in gainmap metadata`)}}return i},Dxe=t=>{var e,n;let r;typeof TextDecoder<"u"?r=new TextDecoder().decode(t):r=t.toString();let i=r.indexOf("<x:xmpmeta");const s=new DOMParser;for(;i!==-1;){const o=r.indexOf("x:xmpmeta>",i);r.slice(i,o+10);const a=r.slice(i,o+10);try{const c=s.parseFromString(a,"text/xml").getElementsByTagName("rdf:Description")[0],u=L0(c,"hdrgm:GainMapMin","0"),f=L0(c,"hdrgm:GainMapMax"),h=L0(c,"hdrgm:Gamma","1"),d=L0(c,"hdrgm:OffsetSDR","0.015625"),p=L0(c,"hdrgm:OffsetHDR","0.015625");let m=(e=c.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||e===void 0?void 0:e.nodeValue;m||(m="0");const g=(n=c.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||n===void 0?void 0:n.nodeValue;if(!g)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(u)?u.map(v=>parseFloat(v)):[parseFloat(u),parseFloat(u),parseFloat(u)],gainMapMax:Array.isArray(f)?f.map(v=>parseFloat(v)):[parseFloat(f),parseFloat(f),parseFloat(f)],gamma:Array.isArray(h)?h.map(v=>parseFloat(v)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetSdr:Array.isArray(d)?d.map(v=>parseFloat(v)):[parseFloat(d),parseFloat(d),parseFloat(d)],offsetHdr:Array.isArray(p)?p.map(v=>parseFloat(v)):[parseFloat(p),parseFloat(p),parseFloat(p)],hdrCapacityMin:parseFloat(m),hdrCapacityMax:parseFloat(g)}}catch{}i=r.indexOf("<x:xmpmeta",o)}};class Bxe{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((n,r)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){r(new Error(`Found no marker after ${l} loops 😵`));return}if(s.getUint8(a)!==255){r(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(c=s.getUint8(a+1),i&&console.log(`Marker: ${c.toString(16)}`),c===226){i&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(s.getUint32(u)===1297106432){const f=u+4;let h;if(s.getUint16(f)===18761)h=!1;else if(s.getUint16(f)===19789)h=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(f+2,!h)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const d=s.getUint32(f+4,!h);if(d<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const p=f+d,m=s.getUint16(p,!h),g=p+2;let v=0;for(let T=g;T<g+12*m;T+=12)s.getUint16(T,!h)===45057&&(v=s.getUint32(T+8,!h));const x=4,y=p+2+m*12+x,A=[];for(let T=y;T<y+v*16;T+=16){const w={MPType:s.getUint32(T,!h),size:s.getUint32(T+4,!h),dataOffset:s.getUint32(T+8,!h),dependantImages:s.getUint32(T+12,!h),start:-1,end:-1,isFII:!1};w.dataOffset?(w.start=f+w.dataOffset,w.isFII=!1):(w.start=0,w.isFII=!0),w.end=w.start+w.size,A.push(w)}if(this.options.extractNonFII&&A.length){const T=new Blob([s]),w=[];for(const M of A){if(M.isFII&&!this.options.extractFII)continue;const C=T.slice(M.start,M.end+1,"image/jpeg");w.push(C)}n(w)}}}a+=2+s.getUint16(a+2)}})}}const kxe=async t=>{const e=Dxe(t);if(!e)throw new QH("Gain map XMP metadata not found");const r=await new Bxe({extractFII:!0,extractNonFII:!0}).extract(t);if(r.length!==2)throw new JH("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},zP=t=>new Promise((e,n)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=i=>{n(i)},r.src=URL.createObjectURL(t)});class ZH extends _r{constructor(e,n){super(n),e&&(this._renderer=e),this._internalLoadingManager=new a_}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new Oxe({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Vn,sdr:new Vn});return new xC({width:16,height:16,type:Xr,colorSpace:sa,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,n,r,i){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,o=new Blob([r],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const h=await Promise.all([s?zP(s):Promise.resolve(void 0),zP(o)]);l=h[0],a=h[1],c=!0}else{const h=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=h[0],a=h[1]}const u=new Vn(l||new ImageData(2,2),zu,Er,Er,Cn,jw,Sr,Cs,1,sa);u.flipY=c,u.needsUpdate=!0;const f=new Vn(a,zu,Er,Er,Cn,jw,Sr,Cs,1,ii);f.flipY=c,f.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=f,e.material.gainMapMin=n.gainMapMin,e.material.gainMapMax=n.gainMapMax,e.material.offsetHdr=n.offsetHdr,e.material.offsetSdr=n.offsetSdr,e.material.gamma=n.gamma,e.material.hdrCapacityMin=n.hdrCapacityMin,e.material.hdrCapacityMax=n.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,n.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Fxe extends ZH{load([e,n,r],i,s,o){const a=this.prepareQuadRenderer();let l,c,u;const f=async()=>{if(l&&c&&u){try{await this.render(a,u,l,c)}catch(S){this.manager.itemError(e),this.manager.itemError(n),this.manager.itemError(r),typeof o=="function"&&o(S),a.disposeOnDemandRenderer();return}typeof i=="function"&&i(a),this.manager.itemEnd(e),this.manager.itemEnd(n),this.manager.itemEnd(r),a.disposeOnDemandRenderer()}};let h=!0,d=0,p=0,m=!0,g=0,v=0,x=!0,y=0,A=0;const T=()=>{if(typeof s=="function"){const S=d+g+y,R=p+v+A,O=h&&m&&x;s(new ProgressEvent("progress",{lengthComputable:O,loaded:R,total:S}))}};this.manager.itemStart(e),this.manager.itemStart(n),this.manager.itemStart(r);const w=new Ir(this._internalLoadingManager);w.setResponseType("arraybuffer"),w.setRequestHeader(this.requestHeader),w.setPath(this.path),w.setWithCredentials(this.withCredentials),w.load(e,async S=>{if(typeof S=="string")throw new Error("Invalid sdr buffer");l=S,await f()},S=>{h=S.lengthComputable,p=S.loaded,d=S.total,T()},S=>{this.manager.itemError(e),typeof o=="function"&&o(S)});const M=new Ir(this._internalLoadingManager);M.setResponseType("arraybuffer"),M.setRequestHeader(this.requestHeader),M.setPath(this.path),M.setWithCredentials(this.withCredentials),M.load(n,async S=>{if(typeof S=="string")throw new Error("Invalid gainmap buffer");c=S,await f()},S=>{m=S.lengthComputable,v=S.loaded,g=S.total,T()},S=>{this.manager.itemError(n),typeof o=="function"&&o(S)});const C=new Ir(this._internalLoadingManager);return C.setRequestHeader(this.requestHeader),C.setPath(this.path),C.setWithCredentials(this.withCredentials),C.load(r,async S=>{if(typeof S!="string")throw new Error("Invalid metadata string");u=JSON.parse(S),await f()},S=>{x=S.lengthComputable,A=S.loaded,y=S.total,T()},S=>{this.manager.itemError(r),typeof o=="function"&&o(S)}),a}}class Uxe extends ZH{load(e,n,r,i){const s=this.prepareQuadRenderer(),o=new Ir(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,f;try{const h=await kxe(l);c=h.sdr,u=h.gainMap,f=h.metadata}catch(h){if(h instanceof QH||h instanceof JH)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),f={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw h}try{await this.render(s,f,c,u)}catch(h){this.manager.itemError(e),typeof i=="function"&&i(h),s.disposeOnDemandRenderer();return}typeof n=="function"&&n(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},r,a=>{this.manager.itemError(e),typeof i=="function"&&i(a)}),s}}const Q2={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},zxe="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",xx=t=>Array.isArray(t);function eG({files:t=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:n=void 0,encoding:r=void 0,extensions:i}={}){var s;let o=null,a=!1,l;if(n){if(!(n in Q2))throw new Error("Preset must be one of: "+Object.keys(Q2).join(", "));t=Q2[n],e=zxe}const c=xx(t)&&t.length===6,u=xx(t)&&t.length===3&&t.some(g=>g.endsWith("json")),f=xx(t)?t[0]:t;if(a=xx(t),l=c?"cube":u?"webp":f.startsWith("data:application/exr")?"exr":f.startsWith("data:application/hdr")?"hdr":f.startsWith("data:image/jpeg")?"jpg":(s=f.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=l==="cube"?JF:l==="hdr"?r1e:l==="exr"?i1e:l==="jpg"||l==="jpeg"?Uxe:l==="webp"?Fxe:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);const h=wt(g=>g.gl),d=ys(o,a?[t]:t,g=>{(l==="webp"||l==="jpg"||l==="jpeg")&&g.setRenderer(h),g.setPath==null||g.setPath(e),i&&i(g)});let p=a?d[0]:d;if(l==="jpg"||l==="jpeg"||l==="webp"){var m;p=(m=p.renderTarget)==null?void 0:m.texture}return p.mapping=c?Xl:Rp,"colorSpace"in p?p.colorSpace=r??c?"srgb":"srgb-linear":p.encoding=r??c?Wye:Vye,p}const Hxe=t=>t.current&&t.current.isScene,Gxe=t=>Hxe(t)?t.current:t;function EC(t,e,n,r,i={}){var s,o,a,l,c;i={backgroundBlurriness:(s=i.blur)!==null&&s!==void 0?s:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const u=Gxe(e||n),f=u.background,h=u.environment,d={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(o=(a=u.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(l=(c=u.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&l!==void 0?l:[0,0,0]};return t!=="only"&&(u.environment=r),t&&(u.background=r),co(u,i),()=>{t!=="only"&&(u.environment=h),t&&(u.background=f),co(u,d)}}function _C({scene:t,background:e=!1,map:n,...r}){const i=wt(s=>s.scene);return E.useLayoutEffect(()=>{if(n)return EC(e,t,i,n,r)}),null}function tG({background:t=!1,scene:e,blur:n,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const c=eG(l),u=wt(f=>f.scene);return E.useLayoutEffect(()=>EC(t,e,u,c,{blur:n,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),null}function Vxe({children:t,near:e=1,far:n=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:h,scene:d,files:p,path:m,preset:g=void 0,extensions:v}){const x=wt(C=>C.gl),y=wt(C=>C.scene),A=E.useRef(null),[T]=E.useState(()=>new vs),w=E.useMemo(()=>{const C=new Zp(r);return C.texture.type=Xr,C},[r]);E.useLayoutEffect(()=>(i===1&&A.current.update(x,T),EC(o,d,y,w.texture,{blur:a,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:u,environmentIntensity:f,environmentRotation:h})),[t,T,w.texture,d,y,o,i,x]);let M=1;return rn(()=>{(i===1/0||M<i)&&(A.current.update(x,T),M++)}),E.createElement(E.Fragment,null,Hc(E.createElement(E.Fragment,null,t,E.createElement("cubeCamera",{ref:A,args:[e,n,w]}),p||g?E.createElement(tG,{background:!0,files:p,preset:g,path:m,extensions:v}):s?E.createElement(_C,{background:!0,map:s,extensions:v}):null),T))}function Wxe(t){var e,n,r,i;const s=eG(t),o=t.map||s;E.useMemo(()=>Fi({GroundProjectedEnvImpl:Hme}),[]);const a=E.useMemo(()=>[o],[o]),l=(e=t.ground)==null?void 0:e.height,c=(n=t.ground)==null?void 0:n.radius,u=(r=(i=t.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return E.createElement(E.Fragment,null,E.createElement(_C,Ct({},t,{map:o})),E.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function nG(t){return t.ground?E.createElement(Wxe,t):t.map?E.createElement(_C,t):t.children?E.createElement(Vxe,t):E.createElement(tG,t)}const rG=E.forwardRef(({scale:t=10,frames:e=1/0,opacity:n=1,width:r=1,height:i=1,blur:s=1,near:o=0,far:a=10,resolution:l=512,smooth:c=!0,color:u="#000000",depthWrite:f=!1,renderOrder:h,...d},p)=>{const m=E.useRef(null),g=wt(N=>N.scene),v=wt(N=>N.gl),x=E.useRef(null);r=r*(Array.isArray(t)?t[0]:t||1),i=i*(Array.isArray(t)?t[1]:t||1);const[y,A,T,w,M,C,S]=E.useMemo(()=>{const N=new pr(l,l),$=new pr(l,l);$.texture.generateMipmaps=N.texture.generateMipmaps=!1;const U=new Fo(r,i).rotateX(Math.PI/2),Q=new un(U),Y=new tm;Y.depthTest=Y.depthWrite=!1,Y.onBeforeCompile=P=>{P.uniforms={...P.uniforms,ucolor:{value:new bt(u)}},P.fragmentShader=P.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),P.fragmentShader=P.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const ee=new ur(Y0e),ne=new ur(q0e);return ne.depthTest=ee.depthTest=!1,[N,U,Y,Q,ee,ne,$]},[l,r,i,t,u]),R=N=>{w.visible=!0,w.material=M,M.uniforms.tDiffuse.value=y.texture,M.uniforms.h.value=N*1/256,v.setRenderTarget(S),v.render(w,x.current),w.material=C,C.uniforms.tDiffuse.value=S.texture,C.uniforms.v.value=N*1/256,v.setRenderTarget(y),v.render(w,x.current),w.visible=!1};let O=0,L,B;return rn(()=>{x.current&&(e===1/0||O<e)&&(O++,L=g.background,B=g.overrideMaterial,m.current.visible=!1,g.background=null,g.overrideMaterial=T,v.setRenderTarget(y),v.render(g,x.current),R(s),c&&R(s*.4),v.setRenderTarget(null),m.current.visible=!0,g.overrideMaterial=B,g.background=L)}),E.useImperativeHandle(p,()=>m.current,[]),E.createElement("group",Ct({"rotation-x":Math.PI/2},d,{ref:m}),E.createElement("mesh",{renderOrder:h,geometry:A,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},E.createElement("meshBasicMaterial",{transparent:!0,map:y.texture,opacity:n,depthWrite:f})),E.createElement("orthographicCamera",{ref:x,args:[-r/2,r/2,i/2,-i/2,o,a]}))});function jxe(t){return t.isLight}function $xe(t){return!!t.geometry}const iG=E.createContext(null),Xxe=Ga({color:new bt,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${vo>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),sG=E.forwardRef(({children:t,temporal:e,frames:n=40,limit:r=1/0,blend:i=20,scale:s=10,opacity:o=1,alphaTest:a=.75,color:l="black",colorBlend:c=2,resolution:u=1024,toneMapped:f=!0,...h},d)=>{Fi({SoftShadowMaterial:Xxe});const p=wt(w=>w.gl),m=wt(w=>w.scene),g=wt(w=>w.camera),v=wt(w=>w.invalidate),x=E.useRef(null),y=E.useRef(null),[A]=E.useState(()=>new Yxe(p,m,u));E.useLayoutEffect(()=>{A.configure(x.current)},[]);const T=E.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,n),blend:Math.max(2,n===1/0?i:n),count:0,getMesh:()=>x.current,reset:()=>{A.clear();const w=x.current.material;w.opacity=0,w.alphaTest=0,T.count=0},update:(w=1)=>{const M=x.current.material;T.temporal?(M.opacity=Math.min(o,M.opacity+o/T.blend),M.alphaTest=Math.min(a,M.alphaTest+a/T.blend)):(M.opacity=o,M.alphaTest=a),y.current.visible=!0,A.prepare();for(let C=0;C<w;C++)T.lights.forEach(S=>S.update()),A.update(g,T.blend);y.current.visible=!1,A.finish()}}),[A,g,m,e,n,i,o,a]);return E.useLayoutEffect(()=>{T.reset(),!T.temporal&&T.frames!==1/0&&T.update(T.blend)}),E.useImperativeHandle(d,()=>T,[T]),rn(()=>{(T.temporal||T.frames===1/0)&&T.count<T.frames&&T.count<r&&(v(),T.update(),T.count++)}),E.createElement("group",h,E.createElement("group",{traverse:()=>null,ref:y},E.createElement(iG.Provider,{value:T},t)),E.createElement("mesh",{receiveShadow:!0,ref:x,scale:s,rotation:[-Math.PI/2,0,0]},E.createElement("planeGeometry",null),E.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:f,color:l,blend:c,map:A.progressiveLightMap2.texture})))}),oG=E.forwardRef(({castShadow:t=!0,bias:e=.001,mapSize:n=512,size:r=5,near:i=.5,far:s=500,frames:o=1,position:a=[0,0,0],radius:l=1,amount:c=8,intensity:u=vo>=155?Math.PI:1,ambient:f=.5,...h},d)=>{const p=E.useRef(null),m=new J(...a).length(),g=E.useContext(iG),v=E.useCallback(()=>{let y;if(p.current)for(let A=0;A<p.current.children.length;A++)if(y=p.current.children[A],Math.random()>f)y.position.set(a[0]+si.randFloatSpread(l),a[1]+si.randFloatSpread(l),a[2]+si.randFloatSpread(l));else{let T=Math.acos(2*Math.random()-1)-Math.PI/2,w=2*Math.PI*Math.random();y.position.set(Math.cos(T)*Math.cos(w)*m,Math.abs(Math.cos(T)*Math.sin(w)*m),Math.sin(T)*m)}},[l,f,m,...a]),x=E.useMemo(()=>({update:v}),[v]);return E.useImperativeHandle(d,()=>x,[x]),E.useLayoutEffect(()=>{var y;const A=p.current;return g&&((y=g.lights)==null||y.set(A.uuid,x)),()=>{var T;return void(g==null||(T=g.lights)==null?void 0:T.delete(A.uuid))}},[g,x]),E.createElement("group",Ct({ref:p},h),Array.from({length:c},(y,A)=>E.createElement("directionalLight",{key:A,castShadow:t,"shadow-bias":e,"shadow-mapSize":[n,n],intensity:u/c},E.createElement("orthographicCamera",{attach:"shadow-camera",args:[-r,r,r,-r,i,s]}))))});class Yxe{constructor(e,n,r=1024){this.renderer=e,this.res=r,this.scene=n,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new bt,this.clearAlpha=0;const i={type:Xr,magFilter:Ln,minFilter:Ln};this.progressiveLightMap1=new pr(this.res,this.res,i),this.progressiveLightMap2=new pr(this.res,this.res,i),this.discardMat=new vC,this.targetMat=new wh({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=s=>{s.vertexShader=`varying vec2 vUv;
`+s.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const o=s.fragmentShader.indexOf("void main() {");s.fragmentShader=`varying vec2 vUv;
`+s.fragmentShader.slice(0,o)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+s.fragmentShader.slice(o-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,s.uniforms.previousShadowMap=this.previousShadowMap,s.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{$xe(e)?this.meshes.push({object:e,material:e.material}):jxe(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,n=100){if(!this.object)return;this.averagingWindow.value=n,this.object.material=this.targetMat;const r=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,i=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,s=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(r),this.previousShadowMap.value=i.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=s}}const qxe={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function Kxe({radius:t,adjustCamera:e}){const n=Mxe();return E.useEffect(()=>{e&&n.refresh().clip().fit()},[t,e]),null}function Jxe({children:t,center:e,adjustCamera:n=!0,intensity:r=.5,shadows:i="contact",environment:s="city",preset:o="rembrandt",...a}){var l,c,u,f,h,d,p,m;const g=typeof o=="string"?qxe[o]:o,[{radius:v,height:x},y]=E.useState({radius:0,width:0,height:0,depth:0}),A=(l=i==null?void 0:i.bias)!==null&&l!==void 0?l:-1e-4,T=(c=i==null?void 0:i.normalBias)!==null&&c!==void 0?c:0,w=(u=i==null?void 0:i.size)!==null&&u!==void 0?u:1024,M=(f=i==null?void 0:i.offset)!==null&&f!==void 0?f:0,C=i==="contact"||(i==null?void 0:i.type)==="contact",S=i==="accumulative"||(i==null?void 0:i.type)==="accumulative",R={...typeof i=="object"?i:{}},O=s?typeof s=="string"?{preset:s}:s:null,L=E.useCallback(B=>{const{width:N,height:$,depth:U,boundingSphere:Q}=B;y({radius:Q.radius,width:N,height:$,depth:U}),e!=null&&e.onCentered&&e.onCentered(B)},[]);return E.createElement(E.Fragment,null,E.createElement("ambientLight",{intensity:r/3}),E.createElement("spotLight",{penumbra:1,position:[g.main[0]*v,g.main[1]*v,g.main[2]*v],intensity:r*2,castShadow:!!i,"shadow-bias":A,"shadow-normalBias":T,"shadow-mapSize":w}),E.createElement("pointLight",{position:[g.fill[0]*v,g.fill[1]*v,g.fill[2]*v],intensity:r}),E.createElement(qH,Ct({fit:!!n,clip:!!n,margin:Number(n),observe:!0},a),E.createElement(Kxe,{radius:v,adjustCamera:n}),E.createElement(VH,Ct({},e,{position:[0,M/2,0],onCentered:L}),t)),E.createElement("group",{position:[0,-x/2-M/2,0]},C&&E.createElement(rG,Ct({scale:v*4,far:v,blur:2},R)),S&&E.createElement(sG,Ct({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:v*4},R),E.createElement(oG,{amount:(h=R.amount)!==null&&h!==void 0?h:8,radius:(d=R.radius)!==null&&d!==void 0?d:v,ambient:(p=R.ambient)!==null&&p!==void 0?p:.5,intensity:(m=R.intensity)!==null&&m!==void 0?m:1,position:[g.main[0]*v,g.main[1]*v,g.main[2]*v],size:v*4,bias:-A,mapSize:w}))),s&&E.createElement(nG,O))}const Qxe=t=>t===0?0:Math.pow(2,10*t-10);function Zxe({children:t,floor:e=.25,segments:n=20,receiveShadow:r,...i}){const s=E.useRef(null);return E.useLayoutEffect(()=>{let o=0;const a=n/n/2,l=s.current.attributes.position;for(let c=0;c<n+1;c++)for(let u=0;u<n+1;u++)l.setXYZ(o++,c/n-a+(c===0?-e:0),u/n-a,Qxe(c/n));l.needsUpdate=!0,s.current.computeVertexNormals()},[n,e]),E.createElement("group",i,E.createElement("mesh",{receiveShadow:r,rotation:[-Math.PI/2,0,Math.PI/2]},E.createElement("planeGeometry",{ref:s,args:[1,1,n,n]}),t))}const e3e=E.forwardRef(({fog:t=!1,renderOrder:e,depthWrite:n=!1,colorStop:r=0,color:i="black",opacity:s=.5,...o},a)=>{const l=E.useMemo(()=>{const c=document.createElement("canvas");c.width=128,c.height=128;const u=c.getContext("2d"),f=u.createRadialGradient(c.width/2,c.height/2,0,c.width/2,c.height/2,c.width/2);return f.addColorStop(r,new bt(i).getStyle()),f.addColorStop(1,"rgba(0,0,0,0)"),u.fillStyle=f,u.fillRect(0,0,c.width,c.height),c},[i,r]);return E.createElement("mesh",Ct({renderOrder:e,ref:a,"rotation-x":-Math.PI/2},o),E.createElement("planeGeometry",null),E.createElement("meshBasicMaterial",{transparent:!0,opacity:s,fog:t,depthWrite:n,side:gr},E.createElement("canvasTexture",{attach:"map",args:[l]})))});function HP(t=es){const e={value:new yt};return Object.assign(new o_({side:t}),{viewMatrix:e,onBeforeCompile:n=>{n.uniforms.viewMatrix=e,n.fragmentShader=`vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
           return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
         }
`+n.fragmentShader.replace("#include <normal_fragment_maps>",`#include <normal_fragment_maps>
           normal = inverseTransformDirection( normal, viewMatrix );
`)}})}const t3e=Ga({causticsTexture:null,causticsTextureB:null,color:new bt,lightProjMatrix:new yt,lightViewMatrix:new yt},`varying vec3 vWorldPosition;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vec4 worldPosition = modelMatrix * vec4(position, 1.);
     vWorldPosition = worldPosition.xyz;
   }`,`varying vec3 vWorldPosition;
  uniform vec3 color;
  uniform sampler2D causticsTexture;
  uniform sampler2D causticsTextureB;
  uniform mat4 lightProjMatrix;
  uniform mat4 lightViewMatrix;
   void main() {
    // Apply caustics
    vec4 lightSpacePos = lightProjMatrix * lightViewMatrix * vec4(vWorldPosition, 1.0);
    lightSpacePos.xyz /= lightSpacePos.w;
    lightSpacePos.xyz = lightSpacePos.xyz * 0.5 + 0.5;
    vec3 front = texture2D(causticsTexture, lightSpacePos.xy).rgb;
    vec3 back = texture2D(causticsTextureB, lightSpacePos.xy).rgb;
    gl_FragColor = vec4((front + back) * color, 1.0);
    #include <tonemapping_fragment>
    #include <${vo>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),n3e=Ga({cameraMatrixWorld:new yt,cameraProjectionMatrixInv:new yt,normalTexture:null,depthTexture:null,lightDir:new J(0,1,0),lightPlaneNormal:new J(0,1,0),lightPlaneConstant:0,near:.1,far:100,modelMatrix:new yt,worldRadius:1/40,ior:1.1,bounces:0,resolution:1024,size:10,intensity:.5},`
  varying vec2 vUv;
  void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }`,`
  uniform mat4 cameraMatrixWorld;
  uniform mat4 cameraProjectionMatrixInv;
  uniform vec3 lightDir;
  uniform vec3 lightPlaneNormal;
  uniform float lightPlaneConstant;
  uniform float near;
  uniform float far;
  uniform float time;
  uniform float worldRadius;
  uniform float resolution;
  uniform float size;
  uniform float intensity;
  uniform float ior;
  precision highp isampler2D;
  precision highp usampler2D;
  uniform sampler2D normalTexture;
  uniform sampler2D depthTexture;
  uniform float bounces;
  varying vec2 vUv;
  vec3 WorldPosFromDepth(float depth, vec2 coord) {
    float z = depth * 2.0 - 1.0;
    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
    vec4 viewSpacePosition = cameraProjectionMatrixInv * clipSpacePosition;
    // Perspective division
    viewSpacePosition /= viewSpacePosition.w;
    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;
    return worldSpacePosition.xyz;
  }
  float sdPlane( vec3 p, vec3 n, float h ) {
    // n must be normalized
    return dot(p,n) + h;
  }
  float planeIntersect( vec3 ro, vec3 rd, vec4 p ) {
    return -(dot(ro,p.xyz)+p.w)/dot(rd,p.xyz);
  }
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 pos, vec3 normal, float ior, out vec3 rayOrigin, out vec3 rayDirection) {
    rayOrigin = ro;
    rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = pos + rayDirection * 0.1;
    return rayDirection;
  }
  void main() {
    // Each sample consists of random offset in the x and y direction
    float caustic = 0.0;
    float causticTexelSize = (1.0 / resolution) * size * 2.0;
    float texelsNeeded = worldRadius / causticTexelSize;
    float sampleRadius = texelsNeeded / resolution;
    float sum = 0.0;
    if (texture2D(depthTexture, vUv).x == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec2 offset1 = vec2(-0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset2 = vec2(-0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset3 = vec2(0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset4 = vec2(0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 uv1 = vUv + offset1 * sampleRadius;
    vec2 uv2 = vUv + offset2 * sampleRadius;
    vec2 uv3 = vUv + offset3 * sampleRadius;
    vec2 uv4 = vUv + offset4 * sampleRadius;
    vec3 normal1 = texture2D(normalTexture, uv1, -10.0).rgb * 2.0 - 1.0;
    vec3 normal2 = texture2D(normalTexture, uv2, -10.0).rgb * 2.0 - 1.0;
    vec3 normal3 = texture2D(normalTexture, uv3, -10.0).rgb * 2.0 - 1.0;
    vec3 normal4 = texture2D(normalTexture, uv4, -10.0).rgb * 2.0 - 1.0;
    float depth1 = texture2D(depthTexture, uv1, -10.0).x;
    float depth2 = texture2D(depthTexture, uv2, -10.0).x;
    float depth3 = texture2D(depthTexture, uv3, -10.0).x;
    float depth4 = texture2D(depthTexture, uv4, -10.0).x;
    // Sanity check the depths
    if (depth1 == 1.0 || depth2 == 1.0 || depth3 == 1.0 || depth4 == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec3 pos1 = WorldPosFromDepth(depth1, uv1);
    vec3 pos2 = WorldPosFromDepth(depth2, uv2);
    vec3 pos3 = WorldPosFromDepth(depth3, uv3);
    vec3 pos4 = WorldPosFromDepth(depth4, uv4);
    vec3 originPos1 = WorldPosFromDepth(0.0, uv1);
    vec3 originPos2 = WorldPosFromDepth(0.0, uv2);
    vec3 originPos3 = WorldPosFromDepth(0.0, uv3);
    vec3 originPos4 = WorldPosFromDepth(0.0, uv4);
    vec3 endPos1, endPos2, endPos3, endPos4;
    vec3 endDir1, endDir2, endDir3, endDir4;
    totalInternalReflection(originPos1, lightDir, pos1, normal1, ior, endPos1, endDir1);
    totalInternalReflection(originPos2, lightDir, pos2, normal2, ior, endPos2, endDir2);
    totalInternalReflection(originPos3, lightDir, pos3, normal3, ior, endPos3, endDir3);
    totalInternalReflection(originPos4, lightDir, pos4, normal4, ior, endPos4, endDir4);
    float lightPosArea = length(cross(originPos2 - originPos1, originPos3 - originPos1)) + length(cross(originPos3 - originPos1, originPos4 - originPos1));
    float t1 = planeIntersect(endPos1, endDir1, vec4(lightPlaneNormal, lightPlaneConstant));
    float t2 = planeIntersect(endPos2, endDir2, vec4(lightPlaneNormal, lightPlaneConstant));
    float t3 = planeIntersect(endPos3, endDir3, vec4(lightPlaneNormal, lightPlaneConstant));
    float t4 = planeIntersect(endPos4, endDir4, vec4(lightPlaneNormal, lightPlaneConstant));
    vec3 finalPos1 = endPos1 + endDir1 * t1;
    vec3 finalPos2 = endPos2 + endDir2 * t2;
    vec3 finalPos3 = endPos3 + endDir3 * t3;
    vec3 finalPos4 = endPos4 + endDir4 * t4;
    float finalArea = length(cross(finalPos2 - finalPos1, finalPos3 - finalPos1)) + length(cross(finalPos3 - finalPos1, finalPos4 - finalPos1));
    caustic += intensity * (lightPosArea / finalArea);
    // Calculate the area of the triangle in light spaces
    gl_FragColor = vec4(vec3(max(caustic, 0.0)), 1.0);
  }`),GP={depth:!0,minFilter:Cn,magFilter:Cn,type:Cs},VP={minFilter:js,magFilter:Cn,type:fr,generateMipmaps:!0},r3e=E.forwardRef(({debug:t,children:e,frames:n=1,ior:r=1.1,color:i="white",causticsOnly:s=!1,backside:o=!1,backsideIOR:a=1.1,worldRadius:l=.3125,intensity:c=.05,resolution:u=2024,lightSource:f=[5,5,5],...h},d)=>{Fi({CausticsProjectionMaterial:t3e});const p=E.useRef(null),m=E.useRef(null),g=E.useRef(null),v=E.useRef(null),x=wt(W=>W.gl),y=cm(t&&m,H5),A=Do(u,u,GP),T=Do(u,u,GP),w=Do(u,u,VP),M=Do(u,u,VP),[C]=E.useState(()=>HP()),[S]=E.useState(()=>HP(Ti)),[R]=E.useState(()=>new n3e),[O]=E.useState(()=>new Cc(R));E.useLayoutEffect(()=>{p.current.updateWorldMatrix(!1,!0)});let L=0;const B=new J,N=new _h,$=new yt,U=new zs,Q=new J,Y=new J,ee=new Yn,ne=new J,P=[],se=[],re=[],Z=[],X=new J;for(let W=0;W<8;W++)P.push(new J),se.push(new J),re.push(new J),Z.push(new J);return rn(()=>{if(n===1/0||L++<n){var W,K;Array.isArray(f)?Q.fromArray(f).normalize():Q.copy(p.current.worldToLocal(f.current.getWorldPosition(B)).normalize()),Y.copy(Q).multiplyScalar(-1),(W=g.current.parent)==null||W.matrixWorld.identity(),ee.setFromObject(g.current,!0),P[0].set(ee.min.x,ee.min.y,ee.min.z),P[1].set(ee.min.x,ee.min.y,ee.max.z),P[2].set(ee.min.x,ee.max.y,ee.min.z),P[3].set(ee.min.x,ee.max.y,ee.max.z),P[4].set(ee.max.x,ee.min.y,ee.min.z),P[5].set(ee.max.x,ee.min.y,ee.max.z),P[6].set(ee.max.x,ee.max.y,ee.min.z),P[7].set(ee.max.x,ee.max.y,ee.max.z);for(let me=0;me<8;me++)se[me].copy(P[me]);ee.getCenter(ne),P.map(me=>me.sub(ne));const ge=U.set(Y,0);P.map((me,We)=>ge.projectPoint(me,re[We]));const Se=re.reduce((me,We)=>me.add(We),B.set(0,0,0)).divideScalar(re.length),xe=re.map(me=>me.distanceTo(Se)).reduce((me,We)=>Math.max(me,We)),Me=P.map(me=>me.dot(Q)).reduce((me,We)=>Math.max(me,We));m.current.position.copy(X.copy(Q).multiplyScalar(Me).add(ne)),m.current.lookAt(g.current.localToWorld(ne));const he=$.lookAt(m.current.position,ne,B.set(0,1,0));m.current.left=-xe,m.current.right=xe,m.current.top=xe,m.current.bottom=-xe;const Oe=B.set(0,xe,0).applyMatrix4(he),be=(m.current.position.y+Oe.y)/Q.y;m.current.near=.1,m.current.far=be,m.current.updateProjectionMatrix(),m.current.updateMatrixWorld();const Te=se.map((me,We)=>me.add(Z[We].copy(Q).multiplyScalar(-me.y/Q.y))),Re=Te.reduce((me,We)=>me.add(We),B.set(0,0,0)).divideScalar(Te.length),$e=2*Te.map(me=>Math.hypot(me.x-Re.x,me.z-Re.z)).reduce((me,We)=>Math.max(me,We));v.current.scale.setScalar($e),v.current.position.copy(Re),t&&((K=y.current)==null||K.update()),S.viewMatrix.value=C.viewMatrix.value=m.current.matrixWorldInverse;const ve=N.setFromProjectionMatrix($.multiplyMatrices(m.current.projectionMatrix,m.current.matrixWorldInverse)).planes[4];R.cameraMatrixWorld=m.current.matrixWorld,R.cameraProjectionMatrixInv=m.current.projectionMatrixInverse,R.lightDir=Y,R.lightPlaneNormal=ve.normal,R.lightPlaneConstant=ve.constant,R.near=m.current.near,R.far=m.current.far,R.resolution=u,R.size=xe,R.intensity=c,R.worldRadius=l,g.current.visible=!0,x.setRenderTarget(A),x.clear(),g.current.overrideMaterial=C,x.render(g.current,m.current),x.setRenderTarget(T),x.clear(),o&&(g.current.overrideMaterial=S,x.render(g.current,m.current)),g.current.overrideMaterial=null,R.ior=r,v.current.material.lightProjMatrix=m.current.projectionMatrix,v.current.material.lightViewMatrix=m.current.matrixWorldInverse,R.normalTexture=A.texture,R.depthTexture=A.depthTexture,x.setRenderTarget(w),x.clear(),O.render(x),R.ior=a,R.normalTexture=T.texture,R.depthTexture=T.depthTexture,x.setRenderTarget(M),x.clear(),o&&O.render(x),x.setRenderTarget(null),s&&(g.current.visible=!1)}}),E.useImperativeHandle(d,()=>p.current,[]),E.createElement("group",Ct({ref:p},h),E.createElement("scene",{ref:g},E.createElement("orthographicCamera",{ref:m,up:[0,1,0]}),e),E.createElement("mesh",{renderOrder:2,ref:v,"rotation-x":-Math.PI/2},E.createElement("planeGeometry",null),E.createElement("causticsProjectionMaterial",{transparent:!0,color:i,causticsTexture:w.texture,causticsTextureB:M.texture,blending:NE,blendSrc:OE,blendDst:G1,depthWrite:!1}),t&&E.createElement(uC,null,E.createElement("lineBasicMaterial",{color:"#ffff00",toneMapped:!1}))))});class i3e extends ur{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new J(0,0,0)},lightColor:{value:new bt("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new qe(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
        varying vec3 vNormal;
        varying float vViewZ;
        varying float vIntensity;
        uniform vec3 spotPosition;
        uniform float attenuation;

        #include <common>
        #include <logdepthbuf_pars_vertex>

        void main() {
          // compute intensity
          vNormal = normalize(normalMatrix * normal);
          vec4 worldPosition = modelMatrix * vec4(position, 1);
          vec4 viewPosition = viewMatrix * worldPosition;
          vViewZ = viewPosition.z;

          vIntensity = 1.0 - saturate(distance(worldPosition.xyz, spotPosition) / attenuation);

          gl_Position = projectionMatrix * viewPosition;

          #include <logdepthbuf_vertex>
        }
      `,fragmentShader:`
        varying vec3 vNormal;
        varying float vViewZ;
        varying float vIntensity;

        uniform vec3 lightColor;
        uniform float anglePower;
        uniform sampler2D depth;
        uniform vec2 resolution;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float opacity;

        #include <packing>
        #include <logdepthbuf_pars_fragment>

        float readDepth(sampler2D depthSampler, vec2 uv) {
          float fragCoordZ = texture(depthSampler, uv).r;

          // https://github.com/mrdoob/three.js/issues/23072
          #ifdef USE_LOGDEPTHBUF
            float viewZ = 1.0 - exp2(fragCoordZ * log(cameraFar + 1.0) / log(2.0));
          #else
            float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
          #endif

          return viewZ;
        }

        void main() {
          #include <logdepthbuf_fragment>

          vec3 normal = vec3(vNormal.x, vNormal.y, abs(vNormal.z));
          float angleIntensity = pow(dot(normal, vec3(0, 0, 1)), anglePower);
          float intensity = vIntensity * angleIntensity;

          // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
          bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
          if (isSoft) {
            vec2 uv = gl_FragCoord.xy / resolution;
            intensity *= smoothstep(0.0, 1.0, vViewZ - readDepth(depth, uv));
          }

          gl_FragColor = vec4(lightColor, intensity * opacity);

          #include <tonemapping_fragment>
          #include <${vo>=154?"colorspace_fragment":"encodings_fragment"}>
        }
      `})}}var s3e=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D uShadowMap;uniform float uTime;void main(){vec3 color=texture2D(uShadowMap,vUv).xyz;gl_FragColor=vec4(color,1.);}`;const o3e=t=>t==null?void 0:t.isSpotLight;function a3e({opacity:t=1,radiusTop:e,radiusBottom:n,depthBuffer:r,color:i="white",distance:s=5,angle:o=.15,attenuation:a=5,anglePower:l=5}){const c=E.useRef(null),u=wt(g=>g.size),f=wt(g=>g.camera),h=wt(g=>g.viewport.dpr),[d]=E.useState(()=>new i3e),[p]=E.useState(()=>new J);e=e===void 0?.1:e,n=n===void 0?o*7:n,rn(()=>{d.uniforms.spotPosition.value.copy(c.current.getWorldPosition(p)),c.current.lookAt(c.current.parent.target.getWorldPosition(p))});const m=E.useMemo(()=>{const g=new Yu(e,n,s,128,64,!0);return g.applyMatrix4(new yt().makeTranslation(0,-s/2,0)),g.applyMatrix4(new yt().makeRotationX(-Math.PI/2)),g},[s,e,n]);return E.createElement(E.Fragment,null,E.createElement("mesh",{ref:c,geometry:m,raycast:()=>null},E.createElement("primitive",{object:d,attach:"material","uniforms-opacity-value":t,"uniforms-lightColor-value":i,"uniforms-attenuation-value":a,"uniforms-anglePower-value":l,"uniforms-depth-value":r,"uniforms-cameraNear-value":f.near,"uniforms-cameraFar-value":f.far,"uniforms-resolution-value":r?[u.width*h,u.height*h]:[0,0]})))}function aG(t,e,n,r,i){const[[s,o]]=E.useState(()=>[new J,new J]);E.useLayoutEffect(()=>{if(o3e(t.current))t.current.shadow.mapSize.set(n,r),t.current.shadow.needsUpdate=!0;else throw new Error("SpotlightShadow must be a child of a SpotLight")},[t,n,r]),rn(()=>{if(!t.current)return;const a=t.current.position,l=t.current.target.position;o.copy(l).sub(a);var c=o.length();o.normalize().multiplyScalar(c*i),s.copy(a).add(o),e.current.position.copy(s),e.current.lookAt(t.current.target.position)})}function l3e({distance:t=.4,alphaTest:e=.5,map:n,shader:r=s3e,width:i=512,height:s=512,scale:o=1,children:a,...l}){const c=E.useRef(null),u=l.spotlightRef,f=l.debug;aG(u,c,i,s,t);const h=E.useMemo(()=>new pr(i,s,{format:Sr,stencilBuffer:!1}),[i,s]),d=E.useRef({uShadowMap:{value:n},uTime:{value:0}});E.useEffect(()=>void(d.current.uShadowMap.value=n),[n]);const p=E.useMemo(()=>new Cc(new ur({uniforms:d.current,vertexShader:`
          varying vec2 vUv;

          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
          `,fragmentShader:r})),[r]);return E.useEffect(()=>()=>{p.material.dispose(),p.dispose()},[p]),E.useEffect(()=>()=>h.dispose(),[h]),rn(({gl:m},g)=>{d.current.uTime.value+=g,m.setRenderTarget(h),p.render(m),m.setRenderTarget(null)}),E.createElement(E.Fragment,null,E.createElement("mesh",{ref:c,scale:o,castShadow:!0},E.createElement("planeGeometry",null),E.createElement("meshBasicMaterial",{transparent:!0,side:gr,alphaTest:e,alphaMap:h.texture,"alphaMap-wrapS":Rr,"alphaMap-wrapT":Rr,opacity:f?1:0},a)))}function c3e({distance:t=.4,alphaTest:e=.5,map:n,width:r=512,height:i=512,scale:s,children:o,...a}){const l=E.useRef(null),c=a.spotlightRef,u=a.debug;return aG(c,l,r,i,t),E.createElement(E.Fragment,null,E.createElement("mesh",{ref:l,scale:s,castShadow:!0},E.createElement("planeGeometry",null),E.createElement("meshBasicMaterial",{transparent:!0,side:gr,alphaTest:e,alphaMap:n,"alphaMap-wrapS":Rr,"alphaMap-wrapT":Rr,opacity:u?1:0},o)))}function u3e(t){return t.shader?E.createElement(l3e,t):E.createElement(c3e,t)}const f3e=E.forwardRef(({opacity:t=1,radiusTop:e,radiusBottom:n,depthBuffer:r,color:i="white",distance:s=5,angle:o=.15,attenuation:a=5,anglePower:l=5,volumetric:c=!0,debug:u=!1,children:f,...h},d)=>{const p=E.useRef(null);return E.useImperativeHandle(d,()=>p.current,[]),E.createElement("group",null,u&&p.current&&E.createElement("spotLightHelper",{args:[p.current]}),E.createElement("spotLight",Ct({ref:p,angle:o,color:i,distance:s,castShadow:!0},h),c&&E.createElement(a3e,{debug:u,opacity:t,radiusTop:e,radiusBottom:n,depthBuffer:r,color:i,distance:s,angle:o,attenuation:a,anglePower:l})),f&&E.cloneElement(f,{spotlightRef:p,debug:u}))}),h3e=E.forwardRef(({args:t,map:e,toneMapped:n=!1,color:r="white",form:i="rect",intensity:s=1,scale:o=1,target:a,children:l,...c},u)=>{const f=E.useRef(null);return E.useImperativeHandle(u,()=>f.current,[]),E.useLayoutEffect(()=>{!l&&!c.material&&(co(f.current.material,{color:r}),f.current.material.color.multiplyScalar(s))},[r,s,l,c.material]),E.useLayoutEffect(()=>{a&&f.current.lookAt(Array.isArray(a)?new J(...a):a)},[a]),o=Array.isArray(o)&&o.length===2?[o[0],o[1],1]:o,E.createElement("mesh",Ct({ref:f,scale:o},c),i==="circle"?E.createElement("ringGeometry",{args:[0,1,64]}):i==="ring"?E.createElement("ringGeometry",{args:[.5,1,64]}):i==="rect"?E.createElement("planeGeometry",null):E.createElement(i,{args:t}),l||(c.material?null:E.createElement("meshBasicMaterial",{toneMapped:n,map:e,side:gr})))});function d3e(t,e,n=new J){const r=Math.PI*(t-.5),i=2*Math.PI*(e-.5);return n.x=Math.cos(i),n.y=Math.sin(r),n.z=Math.sin(i),n}const p3e=E.forwardRef(({inclination:t=.6,azimuth:e=.1,distance:n=1e3,mieCoefficient:r=.005,mieDirectionalG:i=.8,rayleigh:s=.5,turbidity:o=10,sunPosition:a=d3e(t,e),...l},c)=>{const u=E.useMemo(()=>new J().setScalar(n),[n]),[f]=E.useState(()=>new iC);return E.createElement("primitive",Ct({object:f,ref:c,"material-uniforms-mieCoefficient-value":r,"material-uniforms-mieDirectionalG-value":i,"material-uniforms-rayleigh-value":s,"material-uniforms-sunPosition-value":a,"material-uniforms-turbidity-value":o,scale:u},l))});class m3e extends ur{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${vo>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const g3e=t=>new J().setFromSpherical(new G3(t,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),v3e=E.forwardRef(({radius:t=100,depth:e=50,count:n=5e3,saturation:r=0,factor:i=4,fade:s=!1,speed:o=1},a)=>{const l=E.useRef(),[c,u,f]=E.useMemo(()=>{const d=[],p=[],m=Array.from({length:n},()=>(.5+.5*Math.random())*i),g=new bt;let v=t+e;const x=e/n;for(let y=0;y<n;y++)v-=x*Math.random(),d.push(...g3e(v).toArray()),g.setHSL(y/n,r,.9),p.push(g.r,g.g,g.b);return[new Float32Array(d),new Float32Array(p),new Float32Array(m)]},[n,e,i,t,r]);rn(d=>l.current&&(l.current.uniforms.time.value=d.clock.getElapsedTime()*o));const[h]=E.useState(()=>new m3e);return E.createElement("points",{ref:a},E.createElement("bufferGeometry",null,E.createElement("bufferAttribute",{attach:"attributes-position",args:[c,3]}),E.createElement("bufferAttribute",{attach:"attributes-color",args:[u,3]}),E.createElement("bufferAttribute",{attach:"attributes-size",args:[f,1]})),E.createElement("primitive",{ref:l,object:h,attach:"material",blending:D3,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))});let Ex;const y3e=new Uint8Array(16);function x3e(){if(!Ex&&(Ex=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ex))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ex(y3e)}const Ss=[];for(let t=0;t<256;++t)Ss.push((t+256).toString(16).slice(1));function E3e(t,e=0){return Ss[t[e+0]]+Ss[t[e+1]]+Ss[t[e+2]]+Ss[t[e+3]]+"-"+Ss[t[e+4]]+Ss[t[e+5]]+"-"+Ss[t[e+6]]+Ss[t[e+7]]+"-"+Ss[t[e+8]]+Ss[t[e+9]]+"-"+Ss[t[e+10]]+Ss[t[e+11]]+Ss[t[e+12]]+Ss[t[e+13]]+Ss[t[e+14]]+Ss[t[e+15]]}const _3e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),WP={randomUUID:_3e};function b3e(t,e,n){if(WP.randomUUID&&!e&&!t)return WP.randomUUID();t=t||{};const r=t.random||(t.rng||x3e)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return E3e(r)}const A3e="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png",jP=new yt,_x=new J,bx=new kn,$P=new J,XP=new kn,N0=new J,bC=E.createContext(null),T3e=E.forwardRef(({children:t,material:e=wh,texture:n=A3e,range:r,limit:i=200,frustumCulled:s,...o},a)=>{var l,c;const u=E.useMemo(()=>class extends e{constructor(){super();const C=parseInt(yl.replace(/\D+/g,""))>=154?"opaque_fragment":"output_fragment";this.onBeforeCompile=S=>{S.vertexShader=`attribute float opacity;
               varying float vOpacity;
              `+S.vertexShader.replace("#include <fog_vertex>",`#include <fog_vertex>
                 vOpacity = opacity;
                `),S.fragmentShader=`varying float vOpacity;
              `+S.fragmentShader.replace(`#include <${C}>`,`#include <${C}>
                 gl_FragColor = vec4(outgoingLight, diffuseColor.a * vOpacity);
                `)}}},[e]);Fi({CloudMaterial:u});const f=E.useRef(null),h=E.useRef([]),d=E.useMemo(()=>new Float32Array(Array.from({length:i},()=>1)),[i]),p=E.useMemo(()=>new Float32Array(Array.from({length:i},()=>[1,1,1]).flat()),[i]),m=E_(n);let g=0,v=0,x;const y=new kn,A=new J(0,0,1),T=new J;rn((C,S)=>{for(g=C.clock.getElapsedTime(),jP.copy(f.current.matrixWorld).invert(),C.camera.matrixWorld.decompose($P,XP,N0),v=0;v<h.current.length;v++)x=h.current[v],x.ref.current.matrixWorld.decompose(_x,bx,N0),_x.add(T.copy(x.position).applyQuaternion(bx).multiply(N0)),bx.copy(XP).multiply(y.setFromAxisAngle(A,x.rotation+=S*x.rotationFactor)),N0.multiplyScalar(x.volume+(1+Math.sin(g*x.density*x.speed))/2*x.growth),x.matrix.compose(_x,bx,N0).premultiply(jP),x.dist=_x.distanceTo($P);for(h.current.sort((R,O)=>O.dist-R.dist),v=0;v<h.current.length;v++)x=h.current[v],d[v]=x.opacity*(x.dist<x.fade-1?x.dist/x.fade:1),f.current.setMatrixAt(v,x.matrix),f.current.setColorAt(v,x.color);f.current.geometry.attributes.opacity.needsUpdate=!0,f.current.instanceMatrix.needsUpdate=!0,f.current.instanceColor&&(f.current.instanceColor.needsUpdate=!0)}),E.useLayoutEffect(()=>{const C=Math.min(i,r!==void 0?r:i,h.current.length);f.current.count=C,T1(f.current.instanceMatrix,{offset:0,count:C*16}),f.current.instanceColor&&T1(f.current.instanceColor,{offset:0,count:C*3}),T1(f.current.geometry.attributes.opacity,{offset:0,count:C})});let w=[(l=m.image.width)!==null&&l!==void 0?l:1,(c=m.image.height)!==null&&c!==void 0?c:1],M=Math.max(w[0],w[1]);return w=[w[0]/M,w[1]/M],E.createElement("group",Ct({ref:a},o),E.createElement(bC.Provider,{value:h},t,E.createElement("instancedMesh",{matrixAutoUpdate:!1,ref:f,args:[null,null,i],frustumCulled:s},E.createElement("instancedBufferAttribute",{usage:Zi,attach:"instanceColor",args:[p,3]}),E.createElement("planeGeometry",{args:[...w]},E.createElement("instancedBufferAttribute",{usage:Zi,attach:"attributes-opacity",args:[d,1]})),E.createElement("cloudMaterial",{key:e.name,map:m,transparent:!0,depthWrite:!1}))))}),YP=E.forwardRef(({opacity:t=1,speed:e=0,bounds:n=[5,1,1],segments:r=20,color:i="#ffffff",fade:s=10,volume:o=6,smallestVolume:a=.25,distribute:l=null,growth:c=4,concentrate:u="inside",seed:f=Math.random(),...h},d)=>{function p(){const y=Math.sin(f++)*1e4;return y-Math.floor(y)}const m=E.useContext(bC),g=E.useRef(null),[v]=E.useState(()=>b3e()),x=E.useMemo(()=>[...new Array(r)].map((y,A)=>({segments:r,bounds:new J(1,1,1),position:new J,uuid:v,index:A,ref:g,dist:0,matrix:new yt,color:new bt,rotation:A*(Math.PI/r)})),[r,v]);return E.useLayoutEffect(()=>{x.forEach((y,A)=>{var T;co(y,{volume:o,color:i,speed:e,growth:c,opacity:t,fade:s,bounds:n,density:Math.max(.5,p()),rotationFactor:Math.max(.2,.5*p())*e});const w=l==null?void 0:l(y,A);(w||r>1)&&y.position.copy(y.bounds).multiply((T=w==null?void 0:w.point)!==null&&T!==void 0?T:{x:p()*2-1,y:p()*2-1,z:p()*2-1});const M=Math.abs(y.position.x),C=Math.abs(y.position.y),S=Math.abs(y.position.z),R=Math.max(M,C,S);y.length=1,M===R&&(y.length-=M/y.bounds.x),C===R&&(y.length-=C/y.bounds.y),S===R&&(y.length-=S/y.bounds.z),y.volume=((w==null?void 0:w.volume)!==void 0?w.volume:Math.max(Math.max(0,a),u==="random"?p():u==="inside"?y.length:1-y.length))*o})},[u,n,s,i,t,c,o,f,r,e]),E.useLayoutEffect(()=>{const y=x;return m.current=[...m.current,...y],()=>{m.current=m.current.filter(A=>A.uuid!==v)}},[x]),E.useImperativeHandle(d,()=>g.current,[]),E.createElement("group",Ct({ref:g},h))}),w3e=E.forwardRef((t,e)=>E.useContext(bC)?E.createElement(YP,Ct({ref:e},t)):E.createElement(T3e,null,E.createElement(YP,Ct({ref:e},t)))),S3e=Ga({time:0,pixelRatio:1},` uniform float pixelRatio;
    uniform float time;
    attribute float size;  
    attribute float speed;  
    attribute float opacity;
    attribute vec3 noise;
    attribute vec3 color;
    varying vec3 vColor;
    varying float vOpacity;
    void main() {
      vec4 modelPosition = modelMatrix * vec4(position, 1.0);
      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
      vec4 viewPosition = viewMatrix * modelPosition;
      vec4 projectionPostion = projectionMatrix * viewPosition;
      gl_Position = projectionPostion;
      gl_PointSize = size * 25. * pixelRatio;
      gl_PointSize *= (1.0 / - viewPosition.z);
      vColor = color;
      vOpacity = opacity;
    }`,` varying vec3 vColor;
    varying float vOpacity;
    void main() {
      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
      float strength = 0.05 / distanceToCenter - 0.1;
      gl_FragColor = vec4(vColor, strength * vOpacity);
      #include <tonemapping_fragment>
      #include <${vo>=154?"colorspace_fragment":"encodings_fragment"}>
    }`),lG=t=>t&&t.constructor===Float32Array,C3e=t=>[t.r,t.g,t.b],cG=t=>t instanceof qe||t instanceof J||t instanceof Xn,uG=t=>Array.isArray(t)?t:cG(t)?t.toArray():[t,t,t];function O0(t,e,n){return E.useMemo(()=>{if(e!==void 0){if(lG(e))return e;if(e instanceof bt){const r=Array.from({length:t*3},()=>C3e(e)).flat();return Float32Array.from(r)}else if(cG(e)||Array.isArray(e)){const r=Array.from({length:t*3},()=>uG(e)).flat();return Float32Array.from(r)}return Float32Array.from({length:t},()=>e)}return Float32Array.from({length:t},n)},[e])}const M3e=E.forwardRef(({noise:t=1,count:e=100,speed:n=1,opacity:r=1,scale:i=1,size:s,color:o,children:a,...l},c)=>{E.useMemo(()=>Fi({SparklesImplMaterial:S3e}),[]);const u=E.useRef(null),f=wt(y=>y.viewport.dpr),h=uG(i),d=E.useMemo(()=>Float32Array.from(Array.from({length:e},()=>h.map(si.randFloatSpread)).flat()),[e,...h]),p=O0(e,s,Math.random),m=O0(e,r),g=O0(e,n),v=O0(e*3,t),x=O0(o===void 0?e*3:e,lG(o)?o:new bt(o),()=>1);return rn(y=>{u.current&&u.current.material&&(u.current.material.time=y.clock.elapsedTime)}),E.useImperativeHandle(c,()=>u.current,[]),E.createElement("points",Ct({key:`particle-${e}-${JSON.stringify(i)}`},l,{ref:u}),E.createElement("bufferGeometry",null,E.createElement("bufferAttribute",{attach:"attributes-position",args:[d,3]}),E.createElement("bufferAttribute",{attach:"attributes-size",args:[p,1]}),E.createElement("bufferAttribute",{attach:"attributes-opacity",args:[m,1]}),E.createElement("bufferAttribute",{attach:"attributes-speed",args:[g,1]}),E.createElement("bufferAttribute",{attach:"attributes-color",args:[x,3]}),E.createElement("bufferAttribute",{attach:"attributes-noise",args:[v,3]})),a||E.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:f,depthWrite:!1}))}),Nu={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new bt("#ff0000"),backfaceStroke:new bt("#0000ff"),fill:new bt("#00ff00")},vertex:`
	  attribute vec3 barycentric;
	
		varying vec3 v_edges_Barycentric;
		varying vec3 v_edges_Position;

		void initWireframe() {
			v_edges_Barycentric = barycentric;
			v_edges_Position = position.xyz;
		}
	  `,fragment:`
		#ifndef PI
	  	#define PI 3.1415926535897932384626433832795
		#endif
  
	  varying vec3 v_edges_Barycentric;
	  varying vec3 v_edges_Position;
  
	  uniform float strokeOpacity;
	  uniform float fillOpacity;
	  uniform float fillMix;
	  uniform float thickness;
	  uniform bool colorBackfaces;
  
	  // Dash
	  uniform bool dashInvert;
	  uniform bool dash;
	  uniform bool dashOnly;
	  uniform float dashRepeats;
	  uniform float dashLength;
  
	  // Squeeze
	  uniform bool squeeze;
	  uniform float squeezeMin;
	  uniform float squeezeMax;
  
	  // Colors
	  uniform vec3 stroke;
	  uniform vec3 backfaceStroke;
	  uniform vec3 fill;
  
	  // This is like
	  float wireframe_aastep(float threshold, float dist) {
		  float afwidth = fwidth(dist) * 0.5;
		  return smoothstep(threshold - afwidth, threshold + afwidth, dist);
	  }
  
	  float wireframe_map(float value, float min1, float max1, float min2, float max2) {
		  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
	  }
  
	  float getWireframe() {
			vec3 barycentric = v_edges_Barycentric;
		
			// Distance from center of each triangle to its edges.
			float d = min(min(barycentric.x, barycentric.y), barycentric.z);

			// for dashed rendering, we can use this to get the 0 .. 1 value of the line length
			float positionAlong = max(barycentric.x, barycentric.y);
			if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {
				positionAlong = 1.0 - positionAlong;
			}

			// the thickness of the stroke
			float computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);

			// if we want to shrink the thickness toward the center of the line segment
			if (squeeze) {
				computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));
			}

			// Create dash pattern
			if (dash) {
				// here we offset the stroke position depending on whether it
				// should overlap or not
				float offset = 1.0 / dashRepeats * dashLength / 2.0;
				if (!dashInvert) {
					offset += 1.0 / dashRepeats / 2.0;
				}

				// if we should animate the dash or not
				// if (dashAnimate) {
				// 	offset += time * 0.22;
				// }

				// create the repeating dash pattern
				float pattern = fract((positionAlong + offset) * dashRepeats);
				computedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);
			}

			// compute the anti-aliased stroke edge  
			float edge = 1.0 - wireframe_aastep(computedThickness, d);

			return edge;
	  }
	  `},R3e=Ga(Nu.uniforms,Nu.vertex+`
  	void main() {
		initWireframe();
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
  `,Nu.fragment+`
  void main () {
		// Compute color

		float edge = getWireframe();
		vec4 colorStroke = vec4(stroke, edge);

		#ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		#endif
    
		vec4 colorFill = vec4(fill, fillOpacity);
		vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		gl_FragColor = outColor;
	}
  `);function I3e(t,e){t.onBeforeCompile=n=>{n.uniforms={...n.uniforms,...e},n.vertexShader=n.vertexShader.replace("void main() {",`
		  ${Nu.vertex}
		  void main() {
			initWireframe();
		`),n.fragmentShader=n.fragmentShader.replace("void main() {",`
		  ${Nu.fragment}
		  void main() {
		`),n.fragmentShader=n.fragmentShader.replace("#include <color_fragment>",`
		  #include <color_fragment>
			  float edge = getWireframe();
		  vec4 colorStroke = vec4(stroke, edge);
		  #ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		  #endif
		  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));
		  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		  diffuseColor.rgb = outColor.rgb;
		  diffuseColor.a *= outColor.a;
		`)},t.side=gr,t.transparent=!0}function P3e(t,e){E.useEffect(()=>{var n;return void(t.fillOpacity.value=(n=e.fillOpacity)!==null&&n!==void 0?n:t.fillOpacity.value)},[e.fillOpacity]),E.useEffect(()=>{var n;return void(t.fillMix.value=(n=e.fillMix)!==null&&n!==void 0?n:t.fillMix.value)},[e.fillMix]),E.useEffect(()=>{var n;return void(t.strokeOpacity.value=(n=e.strokeOpacity)!==null&&n!==void 0?n:t.strokeOpacity.value)},[e.strokeOpacity]),E.useEffect(()=>{var n;return void(t.thickness.value=(n=e.thickness)!==null&&n!==void 0?n:t.thickness.value)},[e.thickness]),E.useEffect(()=>void(t.colorBackfaces.value=!!e.colorBackfaces),[e.colorBackfaces]),E.useEffect(()=>void(t.dash.value=!!e.dash),[e.dash]),E.useEffect(()=>void(t.dashInvert.value=!!e.dashInvert),[e.dashInvert]),E.useEffect(()=>{var n;return void(t.dashRepeats.value=(n=e.dashRepeats)!==null&&n!==void 0?n:t.dashRepeats.value)},[e.dashRepeats]),E.useEffect(()=>{var n;return void(t.dashLength.value=(n=e.dashLength)!==null&&n!==void 0?n:t.dashLength.value)},[e.dashLength]),E.useEffect(()=>void(t.squeeze.value=!!e.squeeze),[e.squeeze]),E.useEffect(()=>{var n;return void(t.squeezeMin.value=(n=e.squeezeMin)!==null&&n!==void 0?n:t.squeezeMin.value)},[e.squeezeMin]),E.useEffect(()=>{var n;return void(t.squeezeMax.value=(n=e.squeezeMax)!==null&&n!==void 0?n:t.squeezeMax.value)},[e.squeezeMax]),E.useEffect(()=>void(t.stroke.value=e.stroke?new bt(e.stroke):t.stroke.value),[e.stroke]),E.useEffect(()=>void(t.fill.value=e.fill?new bt(e.fill):t.fill.value),[e.fill]),E.useEffect(()=>void(t.backfaceStroke.value=e.backfaceStroke?new bt(e.backfaceStroke):t.backfaceStroke.value),[e.backfaceStroke])}function L3e(t){return!!(t!=null&&t.geometry)}function N3e(t){return!!(t!=null&&t.isBufferGeometry)}function O3e(t){return!!(t!=null&&t.current)}function qP(t){return(t==null?void 0:t.current)!==void 0}function KP(t){return t.type==="WireframeGeometry"}function D3e(){const t={};for(const e in Nu.uniforms)t[e]={value:Nu.uniforms[e]};return t}function B3e(t,e){const r=t.getAttribute("position").count,i=[];for(let s=0;s<r;s++){const o=s%2===0,a=e?1:0;o?i.push(0,0,1,0,1,0,1,0,a):i.push(0,1,0,0,0,1,1,0,a)}return new Qt(Float32Array.from(i),3)}function fG(t){const e=O3e(t)?t.current:t;if(N3e(e))return e;{if(KP(e))throw new Error("Wireframe: WireframeGeometry is not supported.");const n=e.parent;if(L3e(n)){if(KP(n.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return n.geometry}}}function hG(t,e){if(t.index){console.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");const r=t.toNonIndexed();t.copy(r),t.setIndex(null)}const n=B3e(t,e);t.setAttribute("barycentric",n)}function k3e({geometry:t,simplify:e=!1,...n}){Fi({MeshWireframeMaterial:R3e});const[r,i]=E.useState(null);E.useLayoutEffect(()=>{const o=fG(t);if(!o)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");hG(o,e),qP(t)&&i(o)},[e,t]);const s=qP(t)?r:t;return E.createElement(E.Fragment,null,s&&E.createElement("mesh",{geometry:s},E.createElement("meshWireframeMaterial",Ct({attach:"material",transparent:!0,side:gr,polygonOffset:!0,polygonOffsetFactor:-4},n,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function F3e({simplify:t=!1,...e}){const n=E.useRef(null),r=E.useMemo(()=>D3e(),[Nu.uniforms]);return P3e(r,e),E.useLayoutEffect(()=>{const i=fG(n);if(!i)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");const s=i.clone();return hG(i,t),()=>{i.copy(s),s.dispose()}},[t]),E.useLayoutEffect(()=>{const i=n.current.parent,s=i.material.clone();return I3e(i.material,r),()=>{i.material.dispose(),i.material=s}},[]),E.createElement("object3D",{ref:n})}function U3e({geometry:t,...e}){return t?E.createElement(k3e,Ct({geometry:t},e)):E.createElement(F3e,e)}let Mf,D0;const z3e=E.createContext(null),JP=new yt,QP=new J,H3e=E.forwardRef(({children:t,range:e,limit:n=1e3,...r},i)=>{const s=E.useRef(null);E.useImperativeHandle(i,()=>s.current,[]);const[o,a]=E.useState([]),[[l,c,u]]=E.useState(()=>[new Float32Array(n*3),Float32Array.from({length:n*3},()=>1),Float32Array.from({length:n},()=>1)]);E.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),rn(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),JP.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(n,e!==void 0?e:n,o.length),Mf=0;Mf<o.length;Mf++)D0=o[Mf].current,D0.getWorldPosition(QP).applyMatrix4(JP),QP.toArray(l,Mf*3),s.current.geometry.attributes.position.needsUpdate=!0,D0.matrixWorldNeedsUpdate=!0,D0.color.toArray(c,Mf*3),s.current.geometry.attributes.color.needsUpdate=!0,u.set([D0.size],Mf),s.current.geometry.attributes.size.needsUpdate=!0});const f=E.useMemo(()=>({getParent:()=>s,subscribe:h=>(a(d=>[...d,h]),()=>a(d=>d.filter(p=>p.current!==h.current)))}),[]);return E.createElement("points",Ct({userData:{instances:o},matrixAutoUpdate:!1,ref:s,raycast:()=>null},r),E.createElement("bufferGeometry",null,E.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:Zi}),E.createElement("bufferAttribute",{attach:"attributes-color",count:c.length/3,array:c,itemSize:3,usage:Zi}),E.createElement("bufferAttribute",{attach:"attributes-size",count:u.length,array:u,itemSize:1,usage:Zi})),E.createElement(z3e.Provider,{value:f},t))}),G3e=E.forwardRef(({children:t,positions:e,colors:n,sizes:r,stride:i=3,...s},o)=>{const a=E.useRef(null);return E.useImperativeHandle(o,()=>a.current,[]),rn(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,n&&(l.color.needsUpdate=!0),r&&(l.size.needsUpdate=!0)}),E.createElement("points",Ct({ref:a},s),E.createElement("bufferGeometry",null,E.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/i,array:e,itemSize:i,usage:Zi}),n&&E.createElement("bufferAttribute",{attach:"attributes-color",count:n.length/i,array:n,itemSize:3,usage:Zi}),r&&E.createElement("bufferAttribute",{attach:"attributes-size",count:r.length/i,array:r,itemSize:1,usage:Zi})),t)}),V3e=E.forwardRef((t,e)=>t.positions instanceof Float32Array?E.createElement(G3e,Ct({},t,{ref:e})):E.createElement(H3e,Ct({},t,{ref:e}))),W3e=E.createContext(null),j3e=E.forwardRef((t,e)=>{E.useMemo(()=>Fi({SegmentObject:$3e}),[]);const{limit:n=1e3,lineWidth:r=1,children:i,...s}=t,[o,a]=E.useState([]),[l]=E.useState(()=>new uH),[c]=E.useState(()=>new y_),[u]=E.useState(()=>new v_),[f]=E.useState(()=>new qe(512,512)),[h]=E.useState(()=>Array(n*6).fill(0)),[d]=E.useState(()=>Array(n*6).fill(0)),p=E.useMemo(()=>({subscribe:m=>(a(g=>[...g,m]),()=>a(g=>g.filter(v=>v.current!==m.current)))}),[]);return rn(()=>{for(let g=0;g<n;g++){var m;const v=(m=o[g])==null?void 0:m.current;v&&(h[g*6+0]=v.start.x,h[g*6+1]=v.start.y,h[g*6+2]=v.start.z,h[g*6+3]=v.end.x,h[g*6+4]=v.end.y,h[g*6+5]=v.end.z,d[g*6+0]=v.color.r,d[g*6+1]=v.color.g,d[g*6+2]=v.color.b,d[g*6+3]=v.color.r,d[g*6+4]=v.color.g,d[g*6+5]=v.color.b)}u.setColors(d),u.setPositions(h),l.computeLineDistances()}),E.createElement("primitive",{object:l,ref:e},E.createElement("primitive",{object:u,attach:"geometry"}),E.createElement("primitive",Ct({object:c,attach:"material",vertexColors:!0,resolution:f,linewidth:r},s)),E.createElement(W3e.Provider,{value:p},i))});class $3e{constructor(){this.color=new bt("white"),this.start=new J(0,0,0),this.end=new J(0,0,0)}}const X3e=E.forwardRef(({children:t,hysteresis:e=0,distances:n,...r},i)=>{const s=E.useRef(null);return E.useImperativeHandle(i,()=>s.current,[]),E.useLayoutEffect(()=>{const{current:o}=s;o.levels.length=0,o.children.forEach((a,l)=>o.levels.push({object:a,hysteresis:e,distance:n[l]}))}),rn(o=>{var a;return(a=s.current)==null?void 0:a.update(o.camera)}),E.createElement("lOD",Ct({ref:s},r),t)});function Y3e({all:t,scene:e,camera:n}){const r=wt(({gl:o})=>o),i=wt(({camera:o})=>o),s=wt(({scene:o})=>o);return E.useLayoutEffect(()=>{const o=[];t&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),r.compile(e||s,n||i);const a=new Zp(128);new zE(.01,1e5,a).update(r,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}function q3e(){const t=wt(e=>e.gl);return E.useEffect(()=>(t.shadowMap.autoUpdate=!1,t.shadowMap.needsUpdate=!0,()=>{t.shadowMap.autoUpdate=t.shadowMap.needsUpdate=!0}),[t.shadowMap]),null}function K3e({pixelated:t}){const e=wt(o=>o.gl),n=wt(o=>o.internal.active),r=wt(o=>o.performance.current),i=wt(o=>o.viewport.initialDpr),s=wt(o=>o.setDpr);return E.useEffect(()=>{const o=e.domElement;return()=>{n&&s(i),t&&o&&(o.style.imageRendering="auto")}},[]),E.useEffect(()=>{s(r*i),t&&e.domElement&&(e.domElement.style.imageRendering=r===1?"auto":"pixelated")},[r]),null}function J3e(){const t=wt(r=>r.get),e=wt(r=>r.setEvents),n=wt(r=>r.performance.current);return E.useEffect(()=>{const r=t().events.enabled;return()=>e({enabled:r})},[]),E.useEffect(()=>e({enabled:n===1}),[n]),null}const Q3e=E.createContext(null);function Z3e({iterations:t=10,ms:e=250,threshold:n=.75,step:r=.1,factor:i=.5,flipflops:s=1/0,bounds:o=h=>h>100?[60,100]:[40,60],onIncline:a,onDecline:l,onChange:c,onFallback:u,children:f}){const h=Math.pow(10,0),[d,p]=E.useState(()=>({fps:0,index:0,factor:i,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:g=>{const v=Symbol();return d.subscriptions.set(v,g.current),()=>void d.subscriptions.delete(v)}}));let m=0;return rn(()=>{const{frames:g,averages:v}=d;if(!d.fallback&&v.length<t){g.push(performance.now());const x=g[g.length-1]-g[0];if(x>=e){if(d.fps=Math.round(g.length/x*1e3*h)/h,d.refreshrate=Math.max(d.refreshrate,d.fps),v[d.index++%t]=d.fps,v.length===t){const[y,A]=o(d.refreshrate),T=v.filter(M=>M>=A),w=v.filter(M=>M<y);T.length>t*n&&(d.factor=Math.min(1,d.factor+r),d.flipped++,a&&a(d),d.subscriptions.forEach(M=>M.onIncline&&M.onIncline(d))),w.length>t*n&&(d.factor=Math.max(0,d.factor-r),d.flipped++,l&&l(d),d.subscriptions.forEach(M=>M.onDecline&&M.onDecline(d))),m!==d.factor&&(m=d.factor,c&&c(d),d.subscriptions.forEach(M=>M.onChange&&M.onChange(d))),d.flipped>s&&!d.fallback&&(d.fallback=!0,u&&u(d),d.subscriptions.forEach(M=>M.onFallback&&M.onFallback(d))),d.averages=[]}d.frames=[]}}}),E.createElement(Q3e.Provider,{value:d},f)}const dG=E.forwardRef(({children:t,compute:e,width:n,height:r,samples:i=8,renderPriority:s=0,eventPriority:o=0,frames:a=1/0,stencilBuffer:l=!1,depthBuffer:c=!0,generateMipmaps:u=!1,...f},h)=>{const{size:d,viewport:p}=wt(),m=Do((n||d.width)*p.dpr,(r||d.height)*p.dpr,{samples:i,stencilBuffer:l,depthBuffer:c,generateMipmaps:u}),[g]=E.useState(()=>new vs),v=E.useCallback((x,y,A)=>{var T,w;let M=(T=m.texture)==null?void 0:T.__r3f.parent;for(;M&&!(M instanceof hn);)M=M.__r3f.parent;if(!M)return!1;A.raycaster.camera||A.events.compute(x,A,(w=A.previousRoot)==null?void 0:w.getState());const[C]=A.raycaster.intersectObject(M);if(!C)return!1;const S=C.uv;if(!S)return!1;y.raycaster.setFromCamera(y.pointer.set(S.x*2-1,S.y*2-1),y.camera)},[]);return E.useImperativeHandle(h,()=>m.texture,[m]),E.createElement(E.Fragment,null,Hc(E.createElement(eEe,{renderPriority:s,frames:a,fbo:m},t,E.createElement("group",{onPointerOver:()=>null})),g,{events:{compute:e||v,priority:o}}),E.createElement("primitive",Ct({object:m.texture},f)))});function eEe({frames:t,renderPriority:e,children:n,fbo:r}){let i=0,s,o;return rn(a=>{(t===1/0||i<t)&&(s=a.gl.autoClear,o=a.gl.xr.enabled,a.gl.autoClear=!0,a.gl.xr.enabled=!1,a.gl.setRenderTarget(r),a.gl.render(a.scene,a.camera),a.gl.setRenderTarget(null),a.gl.autoClear=s,a.gl.xr.enabled=o,i++)},e),E.createElement(E.Fragment,null,n)}const pG=E.forwardRef(({children:t,compute:e,renderPriority:n=-1,eventPriority:r=0,frames:i=1/0,stencilBuffer:s=!1,depthBuffer:o=!0,generateMipmaps:a=!1,resolution:l=896,near:c=.1,far:u=1e3,flip:f=!1,position:h,rotation:d,scale:p,quaternion:m,matrix:g,matrixAutoUpdate:v,...x},y)=>{const{size:A,viewport:T}=wt(),w=E.useRef(null),M=E.useMemo(()=>{const S=new Zp(Math.max((l||A.width)*T.dpr,(l||A.height)*T.dpr),{stencilBuffer:s,depthBuffer:o,generateMipmaps:a});return S.texture.isRenderTargetTexture=!f,S.texture.flipY=!0,S.texture.type=Xr,S},[l,f]);E.useEffect(()=>()=>M.dispose(),[M]);const[C]=E.useState(()=>new vs);return E.useImperativeHandle(y,()=>({scene:C,fbo:M,camera:w.current}),[M]),E.createElement(E.Fragment,null,Hc(E.createElement(tEe,{renderPriority:n,frames:i,camera:w},t,E.createElement("group",{onPointerOver:()=>null})),C,{events:{compute:e,priority:r}}),E.createElement("primitive",Ct({object:M.texture},x)),E.createElement("cubeCamera",{ref:w,args:[c,u,M],position:h,rotation:d,scale:p,quaternion:m,matrix:g,matrixAutoUpdate:v}))});function tEe({frames:t,renderPriority:e,children:n,camera:r}){let i=0;return rn(s=>{(t===1/0||i<t)&&(r.current.update(s.gl,s.scene),i++)},e),E.createElement(E.Fragment,null,n)}const nEe=E.forwardRef(({id:t=1,colorWrite:e=!1,depthWrite:n=!1,...r},i)=>{const s=E.useRef(null),o=E.useMemo(()=>({colorWrite:e,depthWrite:n,stencilWrite:!0,stencilRef:t,stencilFunc:k3,stencilFail:n3,stencilZFail:n3,stencilZPass:n3}),[t,e,n]);return E.useLayoutEffect(()=>{Object.assign(s.current.material,o)}),E.useImperativeHandle(i,()=>s.current,[]),E.createElement("mesh",Ct({ref:s,renderOrder:-t},r))});function rEe({renderPriority:t=1,zoom:e=0,segments:n=64,children:r,resolution:i=896,...s}){const o=E.useRef(null),a=E.useRef(null),{width:l,height:c}=wt(g=>g.size),[u]=E.useState(()=>new Bi);E.useLayoutEffect(()=>{u.position.set(0,0,100),u.zoom=100,u.left=l/-2,u.right=l/2,u.top=c/2,u.bottom=c/-2,u.updateProjectionMatrix()},[l,c]);const f=Math.sqrt(l*l+c*c)/100*(.5+e/2),h=new J,d=new Fr(new J,f),p=new Pn,m=E.useCallback((g,v,x)=>{if(v.pointer.set(g.offsetX/v.size.width*2-1,-(g.offsetY/v.size.height)*2+1),v.raycaster.setFromCamera(v.pointer,u),v.raycaster.ray.intersectSphere(d,h))h.normalize();else return;p.getNormalMatrix(a.current.camera.matrixWorld),a.current.camera.getWorldPosition(v.raycaster.ray.origin),v.raycaster.ray.direction.set(0,0,1).reflect(h),v.raycaster.ray.direction.x*=-1,v.raycaster.ray.direction.applyNormalMatrix(p).multiplyScalar(-1)},[]);return rn(g=>{t&&g.gl.render(o.current,u)},t),E.createElement(E.Fragment,null,E.createElement("mesh",Ct({ref:o},s,{scale:f}),E.createElement("sphereGeometry",{args:[1,n,n]}),E.createElement("meshBasicMaterial",null,E.createElement(pG,{compute:m,attach:"envMap",flip:!0,resolution:i,ref:a},r,E.createElement(iEe,{api:a})))))}function iEe({api:t}){const e=new J,n=new kn,r=new J,i=new wi(0,Math.PI,0);return rn(s=>{s.camera.matrixWorld.decompose(e,n,r),t.current.camera.position.copy(e),t.current.camera.quaternion.setFromEuler(i).premultiply(n)}),null}const sEe=Ga({blur:0,map:null,sdf:null,blend:0,size:0,resolution:new qe},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
     vUv = uv;
   }`,`uniform sampler2D sdf;
   uniform sampler2D map;
   uniform float blur;
   uniform float size;
   uniform float time;
   uniform vec2 resolution;
   varying vec2 vUv;
   #include <packing>
   void main() {
     vec2 uv = gl_FragCoord.xy / resolution.xy;
     vec4 t = texture2D(map, uv);
     float k = blur;
     float d = texture2D(sdf, vUv).r/size;
     float alpha = 1.0 - smoothstep(0.0, 1.0, clamp(d/k + 1.0, 0.0, 1.0));
     gl_FragColor = vec4(t.rgb, blur == 0.0 ? t.a : t.a * alpha);
     #include <tonemapping_fragment>
     #include <${vo>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),oEe=E.forwardRef(({children:t,events:e=void 0,blur:n=0,eventPriority:r=0,renderPriority:i=0,worldUnits:s=!1,resolution:o=512,...a},l)=>{Fi({PortalMaterialImpl:sEe});const c=E.useRef(null),{scene:u,gl:f,size:h,viewport:d,setEvents:p}=wt(),m=Do(o,o),[g,v]=E.useState(0);rn(()=>{const w=c.current.blend>0?Math.max(1,i):0;g!==w&&v(w)}),E.useEffect(()=>{e!==void 0&&p({enabled:!e})},[e]);const[x,y]=E.useState(!0),A=Hye(y);E.useLayoutEffect(()=>{var w;A.current=(w=c.current)==null?void 0:w.__r3f.parent},[]),E.useLayoutEffect(()=>{if(A.current&&n&&c.current.sdf===null){const w=new un(A.current.geometry,new Or),M=new Yn().setFromBufferAttribute(w.geometry.attributes.position),C=new Bi(M.min.x*(1+2/o),M.max.x*(1+2/o),M.max.y*(1+2/o),M.min.y*(1+2/o),.1,1e3);C.position.set(0,0,1),C.lookAt(0,0,0),f.setRenderTarget(m),f.render(w,C);const R=lEe(o,o,f)(m.texture),O=new Float32Array(o*o);f.readRenderTargetPixels(R,0,0,o,o,O);let L=1/0;for(let B=0;B<O.length;B++)O[B]<L&&(L=O[B]);L=-L,c.current.size=L,c.current.sdf=R.texture,f.setRenderTarget(null)}},[o,n]),E.useImperativeHandle(l,()=>c.current);const T=E.useCallback((w,M,C)=>{var S;if(!A.current)return!1;if(M.pointer.set(w.offsetX/M.size.width*2-1,-(w.offsetY/M.size.height)*2+1),M.raycaster.setFromCamera(M.pointer,M.camera),((S=c.current)==null?void 0:S.blend)===0){const[R]=M.raycaster.intersectObject(A.current);if(!R)return M.raycaster.camera=void 0,!1}},[]);return E.createElement("portalMaterialImpl",Ct({ref:c,blur:n,blend:0,resolution:[h.width*d.dpr,h.height*d.dpr],attach:"material"},a),E.createElement(dG,{attach:"map",frames:x?1/0:0,eventPriority:r,renderPriority:i,compute:T},t,E.createElement(aEe,{events:e,rootScene:u,priority:g,material:c,worldUnits:s})))});function aEe({events:t=void 0,rootScene:e,material:n,priority:r,worldUnits:i}){const s=wt(f=>f.scene),o=wt(f=>f.setEvents),a=Do(),l=Do();E.useLayoutEffect(()=>{s.matrixAutoUpdate=!1},[]),E.useEffect(()=>{t!==void 0&&o({enabled:t})},[t]);const[c,u]=E.useMemo(()=>{const f={value:0};return[new Cc(new ur({uniforms:{a:{value:a.texture},b:{value:l.texture},blend:f},vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
          }`,fragmentShader:`
          uniform sampler2D a;
          uniform sampler2D b;
          uniform float blend;
          varying vec2 vUv;
          #include <packing>
          void main() {
            vec4 ta = texture2D(a, vUv);
            vec4 tb = texture2D(b, vUv);
            gl_FragColor = mix(tb, ta, blend);
            #include <tonemapping_fragment>
            #include <${vo>=154?"colorspace_fragment":"encodings_fragment"}>
          }`})),f]},[]);return rn(f=>{var h;let d=n==null||(h=n.current)==null?void 0:h.__r3f.parent;if(d){if(i)s.matrixWorld.identity();else{var p;r&&((p=n.current)==null?void 0:p.blend)===1&&d.updateWorldMatrix(!0,!1),s.matrixWorld.copy(d.matrixWorld)}if(r){var m,g,v;((m=n.current)==null?void 0:m.blend)>0&&((g=n.current)==null?void 0:g.blend)<1?(u.value=n.current.blend,f.gl.setRenderTarget(a),f.gl.render(s,f.camera),f.gl.setRenderTarget(l),f.gl.render(e,f.camera),f.gl.setRenderTarget(null),c.render(f.gl)):((v=n.current)==null?void 0:v.blend)===1&&f.gl.render(s,f.camera)}}},r),E.createElement(E.Fragment,null)}const lEe=(t,e,n)=>{let r=new pr(t,e,{minFilter:js,magFilter:Cn,type:fr,format:th,generateMipmaps:!0}),i=new pr(t,e,{minFilter:Ln,magFilter:Ln}),s=new pr(t,e,{minFilter:Ln,magFilter:Ln}),o=new pr(t,e,{minFilter:Ln,magFilter:Ln}),a=new pr(t,e,{minFilter:Ln,magFilter:Ln}),l=new pr(t,e,{minFilter:Ln,magFilter:Ln,type:fr,format:th}),c=new pr(t,e,{minFilter:Ln,magFilter:Ln,type:fr,format:th});const u=new Cc(new ur({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (round(texture2D(tex, vUv).x)));
        }`})),f=new Cc(new ur({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (1.0 - round(texture2D(tex, vUv).x)));
        }`})),h=new Cc(new ur({uniforms:{tex:{value:null},offset:{value:0},level:{value:0},maxSteps:{value:0}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform float offset;
        uniform float level;
        uniform float maxSteps;
        #include <packing>
        void main() {
          float closestDist = 9999999.9;
          vec2 closestPos = vec2(0.0);
          for (float x = -1.0; x <= 1.0; x += 1.0) {
            for (float y = -1.0; y <= 1.0; y += 1.0) {
              vec2 voffset = vUv;
              voffset += vec2(x, y) * vec2(${1/t}, ${1/e}) * offset;
              vec2 pos = unpackRGBATo2Half(texture2D(tex, voffset));
              float dist = distance(pos.xy, vUv);
              if(pos.x != 0.0 && pos.y != 0.0 && dist < closestDist) {
                closestDist = dist;
                closestPos = pos;
              }
            }
          }
          gl_FragColor = pack2HalfToRGBA(closestPos);
        }`})),d=new Cc(new ur({uniforms:{tex:{value:null},size:{value:new qe(t,e)}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform vec2 size;
        #include <packing>
        void main() {
          gl_FragColor = vec4(distance(size * unpackRGBATo2Half(texture2D(tex, vUv)), size * vUv), 0.0, 0.0, 0.0);
        }`})),p=new Cc(new ur({uniforms:{inside:{value:c.texture},outside:{value:l.texture},tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D inside;
        uniform sampler2D outside;
        uniform sampler2D tex;
        #include <packing>
        void main() {
          float i = texture2D(inside, vUv).x;
          float o =texture2D(outside, vUv).x;
          if (texture2D(tex, vUv).x == 0.0) {
            gl_FragColor = vec4(o, 0.0, 0.0, 0.0);
          } else {
            gl_FragColor = vec4(-i, 0.0, 0.0, 0.0);
          }
        }`}));return m=>{let g=r;m.minFilter=Ln,m.magFilter=Ln,u.material.uniforms.tex.value=m,n.setRenderTarget(i),u.render(n);const v=Math.ceil(Math.log(Math.max(t,e))/Math.log(2));let x=i,y=null;for(let A=0;A<v;A++){const T=Math.pow(2,v-A-1);y=x===i?o:i,h.material.uniforms.level.value=A,h.material.uniforms.maxSteps.value=v,h.material.uniforms.offset.value=T,h.material.uniforms.tex.value=x.texture,n.setRenderTarget(y),h.render(n),x=y}n.setRenderTarget(l),d.material.uniforms.tex.value=y.texture,d.render(n),f.material.uniforms.tex.value=m,n.setRenderTarget(s),f.render(n),x=s;for(let A=0;A<v;A++){const T=Math.pow(2,v-A-1);y=x===s?a:s,h.material.uniforms.level.value=A,h.material.uniforms.maxSteps.value=v,h.material.uniforms.offset.value=T,h.material.uniforms.tex.value=x.texture,n.setRenderTarget(y),h.render(n),x=y}return n.setRenderTarget(c),d.material.uniforms.tex.value=y.texture,d.render(n),n.setRenderTarget(g),p.material.uniforms.tex.value=m,p.render(n),n.setRenderTarget(null),g}},ZP=t=>{let e;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const d=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(p=>p(e,d))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{n.clear()}},c=e=t(r,i,l);return l},cEe=t=>t?ZP(t):ZP;var mG={exports:{}},Z2={},eT={exports:{}},tT={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eL;function uEe(){if(eL)return tT;eL=1;var t=Ue;function e(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(f,h){var d=h(),p=r({inst:{value:d,getSnapshot:h}}),m=p[0].inst,g=p[1];return s(function(){m.value=d,m.getSnapshot=h,l(m)&&g({inst:m})},[f,d,h]),i(function(){return l(m)&&g({inst:m}),f(function(){l(m)&&g({inst:m})})},[f]),o(d),d}function l(f){var h=f.getSnapshot;f=f.value;try{var d=h();return!n(f,d)}catch{return!0}}function c(f,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return tT.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,tT}var tL;function fEe(){return tL||(tL=1,eT.exports=uEe()),eT.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nL;function hEe(){if(nL)return Z2;nL=1;var t=Ue,e=fEe();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return Z2.useSyncExternalStoreWithSelector=function(c,u,f,h,d){var p=s(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=a(function(){function v(w){if(!x){if(x=!0,y=w,w=h(w),d!==void 0&&m.hasValue){var M=m.value;if(d(M,w))return A=M}return A=w}if(M=A,r(y,w))return M;var C=h(w);return d!==void 0&&d(M,C)?M:(y=w,A=C)}var x=!1,y,A,T=f===void 0?null:f;return[function(){return v(u())},T===null?void 0:function(){return v(T())}]},[u,f,h,d]);var g=i(c,p[0],p[1]);return o(function(){m.hasValue=!0,m.value=g},[g]),l(g),g},Z2}mG.exports=hEe();var dEe=mG.exports;const AC=go(dEe),{useDebugValue:pEe}=Ue,{useSyncExternalStoreWithSelector:mEe}=AC;const gEe=t=>t;function vEe(t,e=gEe,n){const r=mEe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return pEe(r),r}const rL=t=>{const e=typeof t=="function"?cEe(t):t,n=(r,i)=>vEe(e,r,i);return Object.assign(n,e),n},yEe=t=>t?rL(t):rL;var iL,sL;const oL=typeof window<"u"&&((iL=window.document)!=null&&iL.createElement||((sL=window.navigator)==null?void 0:sL.product)==="ReactNative")?Ue.useLayoutEffect:Ue.useEffect;function xEe(){const t=yEe(e=>({current:new Array,version:0,set:e}));return{In:({children:e})=>{const n=t(i=>i.set),r=t(i=>i.version);return oL(()=>{n(i=>({version:i.version+1}))},[]),oL(()=>(n(({current:i})=>({current:[...i,e]})),()=>n(({current:i})=>({current:i.filter(s=>s!==e)}))),[e,r]),null},Out:()=>{const e=t(n=>n.current);return Ue.createElement(Ue.Fragment,null,e)}}}const EEe=t=>t&&t.isOrthographicCamera,aL=new bt,gG=xEe();function vG(t){return"top"in t}function nT(t,e){const{right:n,top:r,left:i,bottom:s,width:o,height:a}=e,l=e.bottom<0||r>t.height||n<0||e.left>t.width;if(vG(t)){const f=t.top+t.height-s,h=i-t.left;return{position:{width:o,height:a,left:h,top:r,bottom:f,right:n},isOffscreen:l}}const c=t.height-s;return{position:{width:o,height:a,top:r,left:i,bottom:c,right:n},isOffscreen:l}}function rT(t,{left:e,bottom:n,width:r,height:i}){let s;const o=r/i;return EEe(t.camera)?(t.camera.left!==r/-2||t.camera.right!==r/2||t.camera.top!==i/2||t.camera.bottom!==i/-2)&&(Object.assign(t.camera,{left:r/-2,right:r/2,top:i/2,bottom:i/-2}),t.camera.updateProjectionMatrix()):t.camera.aspect!==o&&(t.camera.aspect=o,t.camera.updateProjectionMatrix()),s=t.gl.autoClear,t.gl.autoClear=!1,t.gl.setViewport(e,n,r,i),t.gl.setScissor(e,n,r,i),t.gl.setScissorTest(!0),s}function iT(t,e){t.gl.setScissorTest(!1),t.gl.autoClear=e}function lL(t){t.gl.getClearColor(aL),t.gl.setClearColor(aL,t.gl.getClearAlpha()),t.gl.clear(!0,!0)}function _Ee({visible:t=!0,canvasSize:e,scene:n,index:r,children:i,frames:s,rect:o,track:a}){const l=wt(),[c,u]=E.useState(!1);let f=0;return rn(h=>{if(s===1/0||f<=s){var d;a&&(o.current=(d=a.current)==null?void 0:d.getBoundingClientRect()),f++}if(o.current){const{position:p,isOffscreen:m}=nT(e,o.current);if(c!==m&&u(m),t&&!c&&o.current){const g=rT(h,p);h.gl.render(i?h.scene:n,h.camera),iT(h,g)}}},r),E.useLayoutEffect(()=>{const h=o.current;if(h&&(!t||!c)){const{position:d}=nT(e,h),p=rT(l,d);lL(l),iT(l,p)}},[t,c]),E.useEffect(()=>{if(!a)return;const h=o.current,d=l.get().events.connected;return l.setEvents({connected:a.current}),()=>{if(h){const{position:p}=nT(e,h),m=rT(l,p);lL(l),iT(l,m)}l.setEvents({connected:d})}},[a]),E.useEffect(()=>{vG(e)||console.warn(`Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.
 See https://github.com/pmndrs/drei/issues/944`)},[]),E.createElement(E.Fragment,null,i,E.createElement("group",{onPointerOver:()=>null}))}const yG=E.forwardRef(({track:t,visible:e=!0,index:n=1,id:r,style:i,className:s,frames:o=1/0,children:a,...l},c)=>{var u,f,h,d;const p=E.useRef(null),{size:m,scene:g}=wt(),[v]=E.useState(()=>new vs),[x,y]=E.useReducer(()=>!0,!1),A=E.useCallback((T,w)=>{if(p.current&&t&&t.current&&T.target===t.current){const{width:M,height:C,left:S,top:R}=p.current,O=T.clientX-S,L=T.clientY-R;w.pointer.set(O/M*2-1,-(L/C)*2+1),w.raycaster.setFromCamera(w.pointer,w.camera)}},[p,t]);return E.useEffect(()=>{var T;t&&(p.current=(T=t.current)==null?void 0:T.getBoundingClientRect()),y()},[t]),E.createElement("group",Ct({ref:c},l),x&&Hc(E.createElement(_Ee,{visible:e,canvasSize:m,frames:o,scene:g,track:t,rect:p,index:n},a),v,{events:{compute:A,priority:n},size:{width:(u=p.current)==null?void 0:u.width,height:(f=p.current)==null?void 0:f.height,top:(h=p.current)==null?void 0:h.top,left:(d=p.current)==null?void 0:d.left}}))}),bEe=E.forwardRef(({as:t="div",id:e,visible:n,className:r,style:i,index:s=1,track:o,frames:a=1/0,children:l,...c},u)=>{const f=E.useId(),h=E.useRef(null);return E.useImperativeHandle(u,()=>h.current),E.createElement(E.Fragment,null,E.createElement(t,Ct({ref:h,id:e,className:r,style:i},c)),E.createElement(gG.In,null,E.createElement(yG,{visible:n,key:f,track:h,frames:a,index:s},l)))}),xG=E.forwardRef((t,e)=>E.useContext(h_)?E.createElement(yG,Ct({ref:e},t)):E.createElement(bEe,Ct({ref:e},t)));xG.Port=()=>E.createElement(gG.Out,null);const Gg=E.createContext(null),Ax=new J,cL=new J,AEe=(t,e,n,r)=>{const i=e.dot(e),s=e.dot(t)-e.dot(n),o=e.dot(r);return o===0?-s/i:(Ax.copy(r).multiplyScalar(i/o).sub(e),cL.copy(r).multiplyScalar(s/o).add(n).sub(t),-Ax.dot(cL)/Ax.dot(Ax))},TEe=new J(0,1,0),uL=new yt,sT=({direction:t,axis:e})=>{const{translation:n,translationLimits:r,annotations:i,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:c,axisColors:u,hoveredColor:f,opacity:h,onDragStart:d,onDrag:p,onDragEnd:m,userData:g}=E.useContext(Gg),v=wt(Q=>Q.controls),x=E.useRef(null),y=E.useRef(null),A=E.useRef(null),T=E.useRef(0),[w,M]=E.useState(!1),C=E.useCallback(Q=>{i&&(x.current.innerText=`${n.current[e].toFixed(2)}`,x.current.style.display="block"),Q.stopPropagation();const Y=new yt().extractRotation(y.current.matrixWorld),ee=Q.point.clone(),ne=new J().setFromMatrixPosition(y.current.matrixWorld),P=t.clone().applyMatrix4(Y).normalize();A.current={clickPoint:ee,dir:P},T.current=n.current[e],d({component:"Arrow",axis:e,origin:ne,directions:[P]}),v&&(v.enabled=!1),Q.target.setPointerCapture(Q.pointerId)},[i,t,v,d,n,e]),S=E.useCallback(Q=>{if(Q.stopPropagation(),w||M(!0),A.current){const{clickPoint:Y,dir:ee}=A.current,[ne,P]=(r==null?void 0:r[e])||[void 0,void 0];let se=AEe(Y,ee,Q.ray.origin,Q.ray.direction);ne!==void 0&&(se=Math.max(se,ne-T.current)),P!==void 0&&(se=Math.min(se,P-T.current)),n.current[e]=T.current+se,i&&(x.current.innerText=`${n.current[e].toFixed(2)}`),uL.makeTranslation(ee.x*se,ee.y*se,ee.z*se),p(uL)}},[i,p,w,n,r,e]),R=E.useCallback(Q=>{i&&(x.current.style.display="none"),Q.stopPropagation(),A.current=null,m(),v&&(v.enabled=!0),Q.target.releasePointerCapture(Q.pointerId)},[i,v,m]),O=E.useCallback(Q=>{Q.stopPropagation(),M(!1)},[]),{cylinderLength:L,coneWidth:B,coneLength:N,matrixL:$}=E.useMemo(()=>{const Q=c?l/a*1.6:a/20,Y=c?.2:a/5,ee=c?1-Y:a-Y,ne=new kn().setFromUnitVectors(TEe,t.clone().normalize()),P=new yt().makeRotationFromQuaternion(ne);return{cylinderLength:ee,coneWidth:Q,coneLength:Y,matrixL:P}},[t,a,l,c]),U=w?f:u[e];return E.createElement("group",{ref:y},E.createElement("group",{matrix:$,matrixAutoUpdate:!1,onPointerDown:C,onPointerMove:S,onPointerUp:R,onPointerOut:O},i&&E.createElement(am,{position:[0,-N,0]},E.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:x})),E.createElement("mesh",{visible:!1,position:[0,(L+N)/2,0],userData:g},E.createElement("cylinderGeometry",{args:[B*1.4,B*1.4,L+N,8,1]})),E.createElement($i,{transparent:!0,raycast:()=>null,depthTest:o,points:[0,0,0,0,L,0],lineWidth:l,side:gr,color:U,opacity:h,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),E.createElement("mesh",{raycast:()=>null,position:[0,L+N/2,0],renderOrder:500},E.createElement("coneGeometry",{args:[B,N,24,1]}),E.createElement("meshBasicMaterial",{transparent:!0,depthTest:o,color:U,opacity:h,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},oT=new J,aT=new J,lT=t=>t*180/Math.PI,wEe=t=>t*Math.PI/180,SEe=(t,e,n,r,i)=>{oT.copy(t).sub(n),aT.copy(e).sub(n);const s=r.dot(r),o=i.dot(i),a=oT.dot(r)/s,l=oT.dot(i)/o,c=aT.dot(r)/s,u=aT.dot(i)/o,f=Math.atan2(l,a);return Math.atan2(u,c)-f},CEe=(t,e)=>{let n=Math.floor(t/e);return n=n<0?n+1:n,t-n*e},fL=t=>{let e=CEe(t,2*Math.PI);return Math.abs(e)<1e-6?0:(e<0&&(e+=2*Math.PI),e)},Tx=new yt,hL=new J,wx=new xl,cT=new J,uT=({dir1:t,dir2:e,axis:n})=>{const{rotationLimits:r,annotations:i,annotationsClass:s,depthTest:o,scale:a,lineWidth:l,fixed:c,axisColors:u,hoveredColor:f,opacity:h,onDragStart:d,onDrag:p,onDragEnd:m,userData:g}=E.useContext(Gg),v=wt(U=>U.controls),x=E.useRef(null),y=E.useRef(null),A=E.useRef(0),T=E.useRef(0),w=E.useRef(null),[M,C]=E.useState(!1),S=E.useCallback(U=>{i&&(x.current.innerText=`${lT(T.current).toFixed(0)}º`,x.current.style.display="block"),U.stopPropagation();const Q=U.point.clone(),Y=new J().setFromMatrixPosition(y.current.matrixWorld),ee=new J().setFromMatrixColumn(y.current.matrixWorld,0).normalize(),ne=new J().setFromMatrixColumn(y.current.matrixWorld,1).normalize(),P=new J().setFromMatrixColumn(y.current.matrixWorld,2).normalize(),se=new zs().setFromNormalAndCoplanarPoint(P,Y);w.current={clickPoint:Q,origin:Y,e1:ee,e2:ne,normal:P,plane:se},d({component:"Rotator",axis:n,origin:Y,directions:[ee,ne,P]}),v&&(v.enabled=!1),U.target.setPointerCapture(U.pointerId)},[i,v,d,n]),R=E.useCallback(U=>{if(U.stopPropagation(),M||C(!0),w.current){const{clickPoint:Q,origin:Y,e1:ee,e2:ne,normal:P,plane:se}=w.current,[re,Z]=(r==null?void 0:r[n])||[void 0,void 0];wx.copy(U.ray),wx.intersectPlane(se,cT),wx.direction.negate(),wx.intersectPlane(se,cT);let X=SEe(Q,cT,Y,ee,ne),W=lT(X);U.shiftKey&&(W=Math.round(W/10)*10,X=wEe(W)),re!==void 0&&Z!==void 0&&Z-re<2*Math.PI?(X=fL(X),X=X>Math.PI?X-2*Math.PI:X,X=si.clamp(X,re-A.current,Z-A.current),T.current=A.current+X):(T.current=fL(A.current+X),T.current=T.current>Math.PI?T.current-2*Math.PI:T.current),i&&(W=lT(T.current),x.current.innerText=`${W.toFixed(0)}º`),Tx.makeRotationAxis(P,X),hL.copy(Y).applyMatrix4(Tx).sub(Y).negate(),Tx.setPosition(hL),p(Tx)}},[i,p,M,r,n]),O=E.useCallback(U=>{i&&(x.current.style.display="none"),U.stopPropagation(),A.current=T.current,w.current=null,m(),v&&(v.enabled=!0),U.target.releasePointerCapture(U.pointerId)},[i,v,m]),L=E.useCallback(U=>{U.stopPropagation(),C(!1)},[]),B=E.useMemo(()=>{const U=t.clone().normalize(),Q=e.clone().normalize();return new yt().makeBasis(U,Q,U.clone().cross(Q))},[t,e]),N=c?.65:a*.65,$=E.useMemo(()=>{const Q=[];for(let Y=0;Y<=32;Y++){const ee=Y*(Math.PI/2)/32;Q.push(new J(Math.cos(ee)*N,Math.sin(ee)*N,0))}return Q},[N]);return E.createElement("group",{ref:y,onPointerDown:S,onPointerMove:R,onPointerUp:O,onPointerOut:L,matrix:B,matrixAutoUpdate:!1},i&&E.createElement(am,{position:[N,N,0]},E.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:x})),E.createElement($i,{points:$,lineWidth:l*4,visible:!1,userData:g}),E.createElement($i,{transparent:!0,raycast:()=>null,depthTest:o,points:$,lineWidth:l,side:gr,color:M?f:u[n],opacity:h,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))},MEe=(t,e,n)=>{const r=Math.abs(t.x)>=Math.abs(t.y)&&Math.abs(t.x)>=Math.abs(t.z)?0:Math.abs(t.y)>=Math.abs(t.x)&&Math.abs(t.y)>=Math.abs(t.z)?1:2,i=[0,1,2].sort((p,m)=>Math.abs(e.getComponent(m))-Math.abs(e.getComponent(p))),s=r===i[0]?i[1]:i[0],o=t.getComponent(r),a=t.getComponent(s),l=e.getComponent(r),c=e.getComponent(s),u=n.getComponent(r),h=(n.getComponent(s)-u*(a/o))/(c-l*(a/o));return[(u-h*l)/o,h]},Sx=new xl,Cx=new J,dL=new yt,fT=({dir1:t,dir2:e,axis:n})=>{const{translation:r,translationLimits:i,annotations:s,annotationsClass:o,depthTest:a,scale:l,lineWidth:c,fixed:u,axisColors:f,hoveredColor:h,opacity:d,onDragStart:p,onDrag:m,onDragEnd:g,userData:v}=E.useContext(Gg),x=wt(ee=>ee.controls),y=E.useRef(null),A=E.useRef(null),T=E.useRef(null),w=E.useRef(0),M=E.useRef(0),[C,S]=E.useState(!1),R=E.useCallback(ee=>{s&&(y.current.innerText=`${r.current[(n+1)%3].toFixed(2)}, ${r.current[(n+2)%3].toFixed(2)}`,y.current.style.display="block"),ee.stopPropagation();const ne=ee.point.clone(),P=new J().setFromMatrixPosition(A.current.matrixWorld),se=new J().setFromMatrixColumn(A.current.matrixWorld,0).normalize(),re=new J().setFromMatrixColumn(A.current.matrixWorld,1).normalize(),Z=new J().setFromMatrixColumn(A.current.matrixWorld,2).normalize(),X=new zs().setFromNormalAndCoplanarPoint(Z,P);T.current={clickPoint:ne,e1:se,e2:re,plane:X},w.current=r.current[(n+1)%3],M.current=r.current[(n+2)%3],p({component:"Slider",axis:n,origin:P,directions:[se,re,Z]}),x&&(x.enabled=!1),ee.target.setPointerCapture(ee.pointerId)},[s,x,p,n]),O=E.useCallback(ee=>{if(ee.stopPropagation(),C||S(!0),T.current){const{clickPoint:ne,e1:P,e2:se,plane:re}=T.current,[Z,X]=(i==null?void 0:i[(n+1)%3])||[void 0,void 0],[W,K]=(i==null?void 0:i[(n+2)%3])||[void 0,void 0];Sx.copy(ee.ray),Sx.intersectPlane(re,Cx),Sx.direction.negate(),Sx.intersectPlane(re,Cx),Cx.sub(ne);let[ge,Se]=MEe(P,se,Cx);Z!==void 0&&(ge=Math.max(ge,Z-w.current)),X!==void 0&&(ge=Math.min(ge,X-w.current)),W!==void 0&&(Se=Math.max(Se,W-M.current)),K!==void 0&&(Se=Math.min(Se,K-M.current)),r.current[(n+1)%3]=w.current+ge,r.current[(n+2)%3]=M.current+Se,s&&(y.current.innerText=`${r.current[(n+1)%3].toFixed(2)}, ${r.current[(n+2)%3].toFixed(2)}`),dL.makeTranslation(ge*P.x+Se*se.x,ge*P.y+Se*se.y,ge*P.z+Se*se.z),m(dL)}},[s,m,C,r,i,n]),L=E.useCallback(ee=>{s&&(y.current.style.display="none"),ee.stopPropagation(),T.current=null,g(),x&&(x.enabled=!0),ee.target.releasePointerCapture(ee.pointerId)},[s,x,g]),B=E.useCallback(ee=>{ee.stopPropagation(),S(!1)},[]),N=E.useMemo(()=>{const ee=t.clone().normalize(),ne=e.clone().normalize();return new yt().makeBasis(ee,ne,ee.clone().cross(ne))},[t,e]),$=u?1/7:l/7,U=u?.225:l*.225,Q=C?h:f[n],Y=E.useMemo(()=>[new J(0,0,0),new J(0,U,0),new J(U,U,0),new J(U,0,0),new J(0,0,0)],[U]);return E.createElement("group",{ref:A,matrix:N,matrixAutoUpdate:!1},s&&E.createElement(am,{position:[0,0,0]},E.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:o,ref:y})),E.createElement("group",{position:[$*1.7,$*1.7,0]},E.createElement("mesh",{visible:!0,onPointerDown:R,onPointerMove:O,onPointerUp:L,onPointerOut:B,scale:U,userData:v},E.createElement("planeGeometry",null),E.createElement("meshBasicMaterial",{transparent:!0,depthTest:a,color:Q,polygonOffset:!0,polygonOffsetFactor:-10,side:gr,fog:!1})),E.createElement($i,{position:[-U/2,-U/2,0],transparent:!0,depthTest:a,points:Y,lineWidth:c,color:Q,opacity:d,polygonOffset:!0,polygonOffsetFactor:-10,userData:v,fog:!1})))},r1=new J,pL=new J,REe=(t,e,n,r)=>{const i=e.dot(e),s=e.dot(t)-e.dot(n),o=e.dot(r);return o===0?-s/i:(r1.copy(r).multiplyScalar(i/o).sub(e),pL.copy(r).multiplyScalar(s/o).add(n).sub(t),-r1.dot(pL)/r1.dot(r1))},IEe=new J(0,1,0),B0=new J,mL=new yt,hT=({direction:t,axis:e})=>{const{scaleLimits:n,annotations:r,annotationsClass:i,depthTest:s,scale:o,lineWidth:a,fixed:l,axisColors:c,hoveredColor:u,opacity:f,onDragStart:h,onDrag:d,onDragEnd:p,userData:m}=E.useContext(Gg),g=wt(Y=>Y.size),v=wt(Y=>Y.controls),x=E.useRef(null),y=E.useRef(null),A=E.useRef(null),T=E.useRef(1),w=E.useRef(1),M=E.useRef(null),[C,S]=E.useState(!1),R=l?1.2:1.2*o,O=E.useCallback(Y=>{r&&(x.current.innerText=`${w.current.toFixed(2)}`,x.current.style.display="block"),Y.stopPropagation();const ee=new yt().extractRotation(y.current.matrixWorld),ne=Y.point.clone(),P=new J().setFromMatrixPosition(y.current.matrixWorld),se=t.clone().applyMatrix4(ee).normalize(),re=y.current.matrixWorld.clone(),Z=re.clone().invert(),X=l?1/fH(y.current.getWorldPosition(r1),o,Y.camera,g):1;M.current={clickPoint:ne,dir:se,mPLG:re,mPLGInv:Z,offsetMultiplier:X},h({component:"Sphere",axis:e,origin:P,directions:[se]}),v&&(v.enabled=!1),Y.target.setPointerCapture(Y.pointerId)},[r,v,t,h,e,l,o,g]),L=E.useCallback(Y=>{if(Y.stopPropagation(),C||S(!0),M.current){const{clickPoint:ee,dir:ne,mPLG:P,mPLGInv:se,offsetMultiplier:re}=M.current,[Z,X]=(n==null?void 0:n[e])||[1e-5,void 0],K=REe(ee,ne,Y.ray.origin,Y.ray.direction)*re,ge=l?K:K/o;let Se=Math.pow(2,ge*.2);Y.shiftKey&&(Se=Math.round(Se*10)/10),Se=Math.max(Se,Z/T.current),X!==void 0&&(Se=Math.min(Se,X/T.current)),w.current=T.current*Se,A.current.position.set(0,R+K,0),r&&(x.current.innerText=`${w.current.toFixed(2)}`),B0.set(1,1,1),B0.setComponent(e,Se),mL.makeScale(B0.x,B0.y,B0.z).premultiply(P).multiply(se),d(mL)}},[r,R,d,C,n,e]),B=E.useCallback(Y=>{r&&(x.current.style.display="none"),Y.stopPropagation(),T.current=w.current,M.current=null,A.current.position.set(0,R,0),p(),v&&(v.enabled=!0),Y.target.releasePointerCapture(Y.pointerId)},[r,v,p,R]),N=E.useCallback(Y=>{Y.stopPropagation(),S(!1)},[]),{radius:$,matrixL:U}=E.useMemo(()=>{const Y=l?a/o*1.8:o/22.5,ee=new kn().setFromUnitVectors(IEe,t.clone().normalize()),ne=new yt().makeRotationFromQuaternion(ee);return{radius:Y,matrixL:ne}},[t,o,a,l]),Q=C?u:c[e];return E.createElement("group",{ref:y},E.createElement("group",{matrix:U,matrixAutoUpdate:!1,onPointerDown:O,onPointerMove:L,onPointerUp:B,onPointerOut:N},r&&E.createElement(am,{position:[0,R/2,0]},E.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:i,ref:x})),E.createElement("mesh",{ref:A,position:[0,R,0],renderOrder:500,userData:m},E.createElement("sphereGeometry",{args:[$,12,12]}),E.createElement("meshBasicMaterial",{transparent:!0,depthTest:s,color:Q,opacity:f,polygonOffset:!0,polygonOffsetFactor:-10}))))},gL=new yt,vL=new yt,yL=new yt,Mx=new yt,dT=new yt,Bd=new yt,xL=new yt,EL=new yt,_L=new yt,kd=new Yn,pT=new Yn,bL=new J,AL=new J,TL=new J,wL=new J,k0=new J,Fd=new J(1,0,0),Ud=new J(0,1,0),zd=new J(0,0,1),PEe=E.forwardRef(({matrix:t,onDragStart:e,onDrag:n,onDragEnd:r,autoTransform:i=!0,anchor:s,disableAxes:o=!1,disableSliders:a=!1,disableRotations:l=!1,disableScaling:c=!1,activeAxes:u=[!0,!0,!0],offset:f=[0,0,0],rotation:h=[0,0,0],scale:d=1,lineWidth:p=4,fixed:m=!1,translationLimits:g,rotationLimits:v,scaleLimits:x,depthTest:y=!0,axisColors:A=["#ff2060","#20df80","#2080ff"],hoveredColor:T="#ffff40",annotations:w=!1,annotationsClass:M,opacity:C=1,visible:S=!0,userData:R,children:O,...L},B)=>{const N=wt(Z=>Z.invalidate),$=E.useRef(null),U=E.useRef(null),Q=E.useRef(null),Y=E.useRef(null),ee=E.useRef([0,0,0]),ne=E.useRef(new J(1,1,1)),P=E.useRef(new J(1,1,1));E.useLayoutEffect(()=>{s&&(Y.current.updateWorldMatrix(!0,!0),Mx.copy(Y.current.matrixWorld).invert(),kd.makeEmpty(),Y.current.traverse(Z=>{Z.geometry&&(Z.geometry.boundingBox||Z.geometry.computeBoundingBox(),Bd.copy(Z.matrixWorld).premultiply(Mx),pT.copy(Z.geometry.boundingBox),pT.applyMatrix4(Bd),kd.union(pT))}),bL.copy(kd.max).add(kd.min).multiplyScalar(.5),AL.copy(kd.max).sub(kd.min).multiplyScalar(.5),TL.copy(AL).multiply(new J(...s)).add(bL),wL.set(...f).add(TL),Q.current.position.copy(wL),N())});const se=E.useMemo(()=>({onDragStart:Z=>{gL.copy(U.current.matrix),vL.copy(U.current.matrixWorld),e&&e(Z),N()},onDrag:Z=>{yL.copy($.current.matrixWorld),Mx.copy(yL).invert(),dT.copy(vL).premultiply(Z),Bd.copy(dT).premultiply(Mx),xL.copy(gL).invert(),EL.copy(Bd).multiply(xL),i&&U.current.matrix.copy(Bd),n&&n(Bd,EL,dT,Z),N()},onDragEnd:()=>{r&&r(),N()},translation:ee,translationLimits:g,rotationLimits:v,axisColors:A,hoveredColor:T,opacity:C,scale:d,lineWidth:p,fixed:m,depthTest:y,userData:R,annotations:w,annotationsClass:M}),[e,n,r,ee,g,v,x,y,d,p,m,...A,T,C,R,i,w,M]),re=new J;return rn(Z=>{if(m){const X=fH(Q.current.getWorldPosition(re),d,Z.camera,Z.size);ne.current.setScalar(X)}t&&t instanceof yt&&(U.current.matrix=t),U.current.updateWorldMatrix(!0,!0),_L.makeRotationFromEuler(Q.current.rotation).setPosition(Q.current.position).premultiply(U.current.matrixWorld),P.current.setFromMatrixScale(_L),k0.copy(ne.current).divide(P.current),(Math.abs(Q.current.scale.x-k0.x)>1e-4||Math.abs(Q.current.scale.y-k0.y)>1e-4||Math.abs(Q.current.scale.z-k0.z)>1e-4)&&(Q.current.scale.copy(k0),Z.invalidate())}),E.useImperativeHandle(B,()=>U.current,[]),E.createElement(Gg.Provider,{value:se},E.createElement("group",{ref:$},E.createElement("group",Ct({ref:U,matrix:t,matrixAutoUpdate:!1},L),E.createElement("group",{visible:S,ref:Q,position:f,rotation:h},!o&&u[0]&&E.createElement(sT,{axis:0,direction:Fd}),!o&&u[1]&&E.createElement(sT,{axis:1,direction:Ud}),!o&&u[2]&&E.createElement(sT,{axis:2,direction:zd}),!a&&u[0]&&u[1]&&E.createElement(fT,{axis:2,dir1:Fd,dir2:Ud}),!a&&u[0]&&u[2]&&E.createElement(fT,{axis:1,dir1:zd,dir2:Fd}),!a&&u[2]&&u[1]&&E.createElement(fT,{axis:0,dir1:Ud,dir2:zd}),!l&&u[0]&&u[1]&&E.createElement(uT,{axis:2,dir1:Fd,dir2:Ud}),!l&&u[0]&&u[2]&&E.createElement(uT,{axis:1,dir1:zd,dir2:Fd}),!l&&u[2]&&u[1]&&E.createElement(uT,{axis:0,dir1:Ud,dir2:zd}),!c&&u[0]&&E.createElement(hT,{axis:0,direction:Fd}),!c&&u[1]&&E.createElement(hT,{axis:1,direction:Ud}),!c&&u[2]&&E.createElement(hT,{axis:2,direction:zd})),E.createElement("group",{ref:Y},O))))}),LEe=new J(0,0,-1),NEe=function(){const t=new J,e=new J,n=new J,r=new J,i=new J;return function(s,o,a,l){return t.copy(s),e.copy(o),n.copy(a),r.copy(e).sub(t),i.copy(n).sub(t),l.crossVectors(i,r).normalize()}}();function OEe(t,e){return t.clone().add(e).multiplyScalar(.5)}const DEe=E.forwardRef(({points:t=mT.SAMPLE_FACELANDMARKER_RESULT.faceLandmarks[0],face:e,facialTransformationMatrix:n,faceBlendshapes:r,offset:i,offsetScalar:s=80,width:o,height:a,depth:l=1,verticalTri:c=[159,386,152],origin:u,eyes:f=!0,eyesAsOrigin:h=!1,debug:d=!1,children:p,...m},g)=>{var v;e&&(t=e.keypoints,console.warn("Facemesh `face` prop is deprecated: use `points` instead"));const x=E.useRef(null),y=E.useRef(null),A=E.useRef(null),T=E.useRef(null),w=E.useRef(null),M=E.useRef(null),C=E.useRef(null),[S]=E.useState(()=>new J),[R]=E.useState(()=>new hn),[O]=E.useState(()=>new kn),[L]=E.useState(()=>new J),{invalidate:B}=wt();E.useEffect(()=>{var ee;(ee=w.current)==null||ee.geometry.setIndex(mT.TRIANGULATION)},[]);const[N]=E.useState(()=>new J);E.useEffect(()=>{var ee,ne;const P=(ee=w.current)==null?void 0:ee.geometry;if(!P)return;if(P.setFromPoints(t),P.setDrawRange(0,mT.TRIANGULATION.length),n)if(R.matrix.fromArray(n.data),R.matrix.decompose(R.position,R.quaternion,R.scale),R.rotation.y*=-1,R.rotation.z*=-1,O.setFromEuler(R.rotation),i){var se;R.position.y*=-1,R.position.z*=-1,(se=x.current)==null||se.position.copy(R.position.divideScalar(s))}else{var re;(re=x.current)==null||re.position.set(0,0,0)}else NEe(t[c[0]],t[c[1]],t[c[2]],S),O.setFromUnitVectors(LEe,S);const Z=O.clone().invert();if(P.computeBoundingBox(),d&&B(),P.center(),P.applyQuaternion(Z),(ne=T.current)==null||ne.setRotationFromQuaternion(O),f){if(!r)console.warn("Facemesh `eyes` option only works if `faceBlendshapes` is provided: skipping.");else if(M.current&&C.current&&A.current)if(h){const X=M.current._computeSphere(P),W=C.current._computeSphere(P);u=OEe(X.center,W.center).negate(),M.current._update(P,r,X),C.current._update(P,r,W)}else M.current._update(P,r),C.current._update(P,r)}if(A.current){if(u!==void 0)if(typeof u=="number"){const X=P.getAttribute("position");L.set(-X.getX(u),-X.getY(u),-X.getZ(u))}else u.isVector3&&L.copy(u);else L.setScalar(0);A.current.position.copy(L)}if(y.current){let X=1;(o||a||l)&&(P.boundingBox.getSize(N),o&&(X=o/N.x),a&&(X=a/N.y),l&&(X=l/N.z)),y.current.scale.setScalar(X!==1?X:1)}P.computeVertexNormals(),P.attributes.position.needsUpdate=!0},[t,n,r,R,i,s,o,a,l,c,u,f,d,B,S,O,N,L]);const $=E.useMemo(()=>({outerRef:T,meshRef:w,eyeRightRef:M,eyeLeftRef:C}),[]);E.useImperativeHandle(g,()=>$,[$]);const[U]=E.useState(()=>new J),Q=(v=w.current)==null?void 0:v.geometry.boundingBox,Y=(Q==null?void 0:Q.getSize(U).z)||1;return E.createElement("group",m,E.createElement("group",{ref:x},E.createElement("group",{ref:T},E.createElement("group",{ref:y},d?E.createElement(E.Fragment,null,E.createElement("axesHelper",{args:[Y]}),E.createElement($i,{points:[[0,0,0],[0,0,-Y]],color:65535})):null,E.createElement("group",{ref:A},f&&r&&E.createElement("group",{name:"eyes"},E.createElement(SL,{side:"left",ref:M,debug:d}),E.createElement(SL,{side:"right",ref:C,debug:d})),E.createElement("mesh",{ref:w,name:"face"},p,d?E.createElement(E.Fragment,null,Q&&E.createElement("box3Helper",{args:[Q]})):null))))))}),F0={contourLandmarks:{right:[33,133,159,145,153],left:[263,362,386,374,380]},blendshapes:{right:[14,16,18,12],left:[13,15,17,11]},color:{right:"red",left:"#00ff00"},fov:{horizontal:100,vertical:90}},SL=E.forwardRef(({side:t,debug:e=!0},n)=>{const r=E.useRef(null),i=E.useRef(null),[s]=E.useState(()=>new Fr),o=E.useCallback(f=>{const h=f.getAttribute("position"),p=F0.contourLandmarks[t].map(m=>new J(h.getX(m),h.getY(m),h.getZ(m)));return s.center.set(0,0,0),p.forEach(m=>s.center.add(m)),s.center.divideScalar(p.length),s.radius=p[0].sub(p[1]).length()/2,s},[s,t]),[a]=E.useState(()=>new wi),l=E.useCallback((f,h,d)=>{if(r.current){var p;(p=d)!==null&&p!==void 0||(d=o(f)),r.current.position.copy(d.center),r.current.scale.setScalar(d.radius)}if(h&&i.current){const m=F0.blendshapes[t],g=h.categories[m[0]].score,v=h.categories[m[1]].score,x=h.categories[m[2]].score,y=h.categories[m[3]].score,A=F0.fov.horizontal*si.DEG2RAD,T=F0.fov.vertical*si.DEG2RAD,w=A*.5*(y-x),M=T*.5*(g-v)*(t==="left"?1:-1);a.set(w,M,0),i.current.setRotationFromEuler(a)}},[o,t,a]),c=E.useMemo(()=>({eyeMeshRef:r,irisDirRef:i,_computeSphere:o,_update:l}),[o,l]);E.useImperativeHandle(n,()=>c,[c]);const u=F0.color[t];return E.createElement("group",null,E.createElement("group",{ref:r},e&&E.createElement("axesHelper",null),E.createElement("group",{ref:i},E.createElement(E.Fragment,null,e&&E.createElement($i,{points:[[0,0,0],[0,0,-2]],lineWidth:1,color:u})))))}),mT={TRIANGULATION:[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255],SAMPLE_FACE:{keypoints:[{x:356.2804412841797,y:295.1960563659668,z:-23.786449432373047,name:"lips"},{x:354.8859405517578,y:264.69520568847656,z:-36.718435287475586},{x:355.2180862426758,y:275.3360366821289,z:-21.183712482452393},{x:347.349853515625,y:242.4400234222412,z:-25.093655586242676},{x:354.40135955810547,y:256.67933464050293,z:-38.23572635650635},{x:353.7689971923828,y:247.54886627197266,z:-34.5475435256958},{x:352.1288299560547,y:227.34312057495117,z:-13.095386028289795},{x:303.5013198852539,y:234.67002868652344,z:12.500141859054565,name:"rightEye"},{x:351.09378814697266,y:211.87547206878662,z:-6.413471698760986},{x:350.7115936279297,y:202.1251630783081,z:-6.413471698760986},{x:348.33667755126953,y:168.7741756439209,z:6.483500003814697,name:"faceOval"},{x:356.4806365966797,y:299.2995357513428,z:-23.144519329071045},{x:356.5511703491211,y:302.66146659851074,z:-21.020312309265137},{x:356.6239547729492,y:304.1536331176758,z:-18.137459754943848,name:"lips"},{x:356.5807342529297,y:305.1840591430664,z:-18.767719268798828,name:"lips"},{x:356.8241500854492,y:308.25711250305176,z:-20.16829490661621},{x:357.113037109375,y:312.26277351379395,z:-22.10575819015503},{x:357.34962463378906,y:317.1123218536377,z:-21.837315559387207,name:"lips"},{x:357.6658630371094,y:325.51036834716797,z:-16.27002477645874},{x:355.0201416015625,y:269.36279296875,z:-33.73054027557373},{x:348.5237503051758,y:270.33411026000977,z:-24.93025302886963},{x:279.97331619262695,y:213.24176788330078,z:47.759642601013184,name:"faceOval"},{x:322.66529083251953,y:238.5027265548706,z:5.535193085670471},{x:316.0983657836914,y:239.94489669799805,z:5.777376294136047},{x:309.9431610107422,y:240.24518966674805,z:7.510589361190796},{x:301.31994247436523,y:237.86138534545898,z:13.118728399276733},{x:328.14266204833984,y:235.80496788024902,z:6.646900177001953},{x:313.7326431274414,y:222.11161136627197,z:3.9887237548828125},{x:320.45196533203125,y:221.87729358673096,z:4.601476192474365},{x:307.35679626464844,y:223.63793849945068,z:5.932023525238037},{x:303.0031204223633,y:226.3743782043457,z:8.479321002960205},{x:296.80023193359375,y:242.94299125671387,z:15.931552648544312},{x:332.2352981567383,y:340.77341079711914,z:-10.165848731994629},{x:301.38587951660156,y:233.46447944641113,z:14.764405488967896,name:"rightEye"},{x:279.0147018432617,y:244.37155723571777,z:45.77549457550049},{x:289.60548400878906,y:239.1807460784912,z:23.191204071044922},{x:320.32257080078125,y:267.1292781829834,z:-4.954537749290466},{x:347.64583587646484,y:294.4955062866211,z:-23.062820434570312,name:"lips"},{x:349.28138732910156,y:303.1095886230469,z:-20.238323211669922},{x:338.9453125,y:298.19186210632324,z:-19.456336498260498,name:"lips"},{x:333.36788177490234,y:302.6706790924072,z:-14.776077270507812,name:"lips"},{x:342.89188385009766,y:304.3561363220215,z:-17.752301692962646},{x:337.7375030517578,y:306.0098361968994,z:-13.410515785217285},{x:325.6159210205078,y:316.22995376586914,z:-6.681914925575256},{x:349.0104675292969,y:264.9818515777588,z:-36.274919509887695},{x:347.7138900756836,y:257.5664806365967,z:-37.67549514770508},{x:291.79357528686523,y:218.88171672821045,z:11.578094959259033,name:"rightEyebrow"},{x:332.2689437866211,y:247.56946563720703,z:-3.3730539679527283},{x:332.0074462890625,y:267.1201229095459,z:-19.969879388809204},{x:331.27952575683594,y:263.6967658996582,z:-17.47218608856201},{x:301.04373931884766,y:269.56552505493164,z:3.61815482378006},{x:347.4863815307617,y:249.0706443786621,z:-32.633421421051025},{x:307.26118087768555,y:208.2646894454956,z:1.1591226607561111,name:"rightEyebrow"},{x:297.91919708251953,y:212.22604751586914,z:5.914516448974609,name:"rightEyebrow"},{x:285.1651382446289,y:197.98450469970703,z:36.391637325286865,name:"faceOval"},{x:337.04097747802734,y:211.25229835510254,z:-4.548954665660858},{x:326.5912628173828,y:223.16698551177979,z:6.670243740081787},{x:320.05664825439453,y:309.5834255218506,z:-4.055835008621216},{x:289.6866226196289,y:314.617395401001,z:53.875489234924316,name:"faceOval"},{x:337.4256896972656,y:270.8755302429199,z:-17.67060160636902},{x:343.69922637939453,y:273.0000400543213,z:-18.756048679351807},{x:327.4242401123047,y:309.22399520874023,z:-4.703601002693176,name:"lips"},{x:330.37220001220703,y:308.3323001861572,z:-6.442649960517883},{x:293.87027740478516,y:207.7961826324463,z:9.821539521217346,name:"rightEyebrow"},{x:332.11437225341797,y:271.22812271118164,z:-16.64351224899292},{x:320.1197814941406,y:207.40366458892822,z:-2.48164564371109,name:"rightEyebrow"},{x:318.59575271606445,y:201.07443809509277,z:-3.110446035861969,name:"rightEyebrow"},{x:310.72303771972656,y:175.75075149536133,z:13.328815698623657,name:"faceOval"},{x:289.67578887939453,y:202.29835510253906,z:21.370456218719482},{x:315.30879974365234,y:187.35260009765625,z:5.0304025411605835},{x:287.8936767578125,y:216.54793739318848,z:17.81065821647644,name:"rightEyebrow"},{x:283.9391899108887,y:215.01142501831055,z:32.04984903335571},{x:348.35330963134766,y:299.4155788421631,z:-22.47924566268921},{x:341.1790466308594,y:301.8221855163574,z:-18.977805376052856},{x:335.69713592529297,y:304.4266891479492,z:-14.682706594467163},{x:339.4615173339844,y:272.3654365539551,z:-16.38674020767212},{x:328.99600982666016,y:308.86685371398926,z:-5.616893768310547},{x:332.00313568115234,y:309.1875743865967,z:-10.335084199905396},{x:331.0068130493164,y:307.9274368286133,z:-6.681914925575256,name:"lips"},{x:341.13792419433594,y:266.4876937866211,z:-26.56425952911377},{x:339.02950286865234,y:305.6663703918457,z:-12.33674168586731,name:"lips"},{x:344.22935485839844,y:304.9452781677246,z:-15.161235332489014,name:"lips"},{x:350.1844024658203,y:304.374303817749,z:-17.5305438041687,name:"lips"},{x:348.52630615234375,y:325.9562301635742,z:-16.164982318878174},{x:348.6581802368164,y:317.1624183654785,z:-21.510512828826904,name:"lips"},{x:348.9766311645508,y:312.1923065185547,z:-21.708929538726807},{x:349.2427444458008,y:308.0660820007324,z:-19.643079042434692},{x:349.67491149902344,y:305.42747497558594,z:-18.16080331802368,name:"lips"},{x:337.95589447021484,y:306.6535949707031,z:-12.803598642349243,name:"lips"},{x:337.06878662109375,y:307.63169288635254,z:-14.274203777313232},{x:335.77449798583984,y:309.8449516296387,z:-15.698124170303345},{x:334.6099090576172,y:312.7997016906738,z:-14.764405488967896,name:"lips"},{x:327.2330856323242,y:293.80866050720215,z:-11.864047050476074},{x:280.97679138183594,y:279.79928970336914,z:68.90834331512451,name:"faceOval"},{x:355.13843536376953,y:271.7875671386719,z:-25.350427627563477},{x:334.7235870361328,y:307.4656391143799,z:-9.302158951759338,name:"lips"},{x:333.5293960571289,y:307.89782524108887,z:-10.200862884521484},{x:346.29688262939453,y:276.4256286621094,z:-19.748122692108154},{x:335.16246795654297,y:276.22097969055176,z:-12.313398122787476},{x:345.09132385253906,y:274.7082996368408,z:-19.304605722427368},{x:325.4267883300781,y:252.95130729675293,z:-1.6661019623279572},{x:315.347843170166,y:259.05200958251953,z:-.25604281574487686},{x:330.44933319091797,y:267.7570152282715,z:-14.017432928085327},{x:294.96768951416016,y:185.26001930236816,z:23.903164863586426,name:"faceOval"},{x:299.63531494140625,y:192.7913761138916,z:12.640198469161987},{x:304.5452117919922,y:202.4142837524414,z:3.244667649269104,name:"rightEyebrow"},{x:331.6915512084961,y:320.0467872619629,z:-10.632705688476562},{x:334.5911407470703,y:201.27566814422607,z:-6.133356094360352,name:"rightEyebrow"},{x:331.4815902709961,y:185.44180870056152,z:.6627205014228821},{x:328.05816650390625,y:170.8385467529297,z:7.358860373497009,name:"faceOval"},{x:304.49764251708984,y:239.76297855377197,z:10.387605428695679},{x:290.6382179260254,y:248.85257720947266,z:19.03616428375244},{x:331.5682601928711,y:233.20727348327637,z:7.837390303611755},{x:295.5115509033203,y:228.9834451675415,z:14.41426157951355},{x:336.94332122802734,y:241.8259334564209,z:-5.27842104434967},{x:336.2792205810547,y:262.7049922943115,z:-26.12074375152588},{x:284.4102478027344,y:255.3262710571289,z:25.467140674591064},{x:295.1420593261719,y:253.02655220031738,z:12.430112361907959},{x:303.5196113586426,y:254.20703887939453,z:6.139191389083862},{x:315.73450088500977,y:251.64799690246582,z:3.3788898587226868},{x:324.69661712646484,y:247.56494522094727,z:2.3328344523906708},{x:331.57970428466797,y:243.02241325378418,z:1.1423448473215103},{x:345.6210708618164,y:229.9976634979248,z:-10.825285911560059},{x:286.26644134521484,y:270.37991523742676,z:21.708929538726807},{x:290.2525520324707,y:228.4921360015869,z:17.71728754043579},{x:351.65367126464844,y:269.3400764465332,z:-33.450424671173096},{x:333.1378936767578,y:253.88388633728027,z:-7.230473756790161},{x:277.8318977355957,y:246.95331573486328,z:68.20805549621582,name:"faceOval"},{x:336.6680908203125,y:238.10003757476807,z:.7688578963279724},{x:329.95800018310547,y:269.18323516845703,z:-7.207130789756775},{x:299.17491912841797,y:234.13324356079102,z:15.95489501953125},{x:335.61729431152344,y:258.71752738952637,z:-23.016133308410645},{x:284.1079330444336,y:297.0343494415283,z:63.25934886932373,name:"faceOval"},{x:331.44542694091797,y:230.6892442703247,z:9.92658257484436,name:"rightEye"},{x:341.41536712646484,y:253.01264762878418,z:-29.038610458374023},{x:303.5472869873047,y:327.5896739959717,z:16.725212335586548},{x:304.7756576538086,y:337.4389457702637,z:27.38126277923584,name:"faceOval"},{x:280.80501556396484,y:275.32050132751465,z:45.0752067565918},{x:295.43582916259766,y:318.4501647949219,z:26.2608003616333},{x:281.4303207397461,y:228.7355661392212,z:40.94350814819336},{x:331.2549591064453,y:349.4216537475586,z:-7.376367449760437},{x:352.4247741699219,y:271.7330074310303,z:-24.953596591949463},{x:327.5672912597656,y:260.41900634765625,z:-5.456410646438599},{x:284.5432472229004,y:241.7647933959961,z:29.668869972229004},{x:310,y:235.66174507141113,z:8.502663969993591,name:"rightEye"},{x:315.7071113586426,y:235.7572603225708,z:6.938687562942505,name:"rightEye"},{x:330.41088104248047,y:311.04143142700195,z:-9.325502514839172,name:"lips"},{x:288.5377502441406,y:285.31983375549316,z:21.837315559387207},{x:344.55039978027344,y:359.4300842285156,z:-6.705257892608643,name:"faceOval"},{x:323.41880798339844,y:351.67362213134766,z:7.802375555038452,name:"faceOval"},{x:314.64088439941406,y:346.11894607543945,z:16.36339783668518,name:"faceOval"},{x:349.4945526123047,y:184.8434829711914,z:-.21847527474164963},{x:359.24694061279297,y:359.8348903656006,z:-8.403456211090088,name:"faceOval"},{x:321.26182556152344,y:234.64492321014404,z:6.90950870513916,name:"rightEye"},{x:326.318359375,y:232.90250301361084,z:8.029969334602356,name:"rightEye"},{x:329.6211624145508,y:231.6195774078369,z:9.722331762313843,name:"rightEye"},{x:285.9398078918457,y:228.2351303100586,z:24.650139808654785},{x:325.79288482666016,y:227.88007736206055,z:7.469738721847534,name:"rightEye"},{x:320.1699447631836,y:227.5934886932373,z:6.168370842933655,name:"rightEye"},{x:314.85408782958984,y:227.85282611846924,z:6.2675780057907104,name:"rightEye"},{x:309.3084907531738,y:229.1516876220703,z:7.7031683921813965,name:"rightEye"},{x:305.5621337890625,y:230.92366218566895,z:9.722331762313843,name:"rightEye"},{x:277.8681945800781,y:228.5354232788086,z:59.71122741699219,name:"faceOval"},{x:306.1444664001465,y:235.1954698562622,z:10.603528022766113,name:"rightEye"},{x:355.4478454589844,y:281.96210861206055,z:-20.565123558044434},{x:333.02661895751953,y:288.0105400085449,z:-14.72939133644104},{x:337.15728759765625,y:269.2059516906738,z:-19.8414945602417},{x:345.9898376464844,y:283.5453128814697,z:-20.4834246635437},{x:351.48963928222656,y:219.98916149139404,z:-7.0378947257995605},{x:312.39574432373047,y:336.50628089904785,z:8.671900033950806},{x:321.32152557373047,y:343.1755256652832,z:.9067271649837494},{x:343.78379821777344,y:353.2975959777832,z:-14.355905055999756},{x:296.8791389465332,y:327.91497230529785,z:41.01353645324707,name:"faceOval"},{x:329.6939468383789,y:229.27897453308105,z:8.934508562088013,name:"rightEye"},{x:341.6905212402344,y:241.4073657989502,z:-14.589333534240723},{x:359.03079986572266,y:353.48859786987305,z:-15.803166627883911},{x:333.1861877441406,y:356.43213272094727,z:-1.0234417766332626,name:"faceOval"},{x:283.97483825683594,y:291.4318656921387,z:41.94725513458252},{x:343.33770751953125,y:305.830135345459,z:-15.756480693817139,name:"lips"},{x:342.40283966064453,y:307.7453899383545,z:-17.4021577835083},{x:341.53621673583984,y:311.0595703125,z:-19.047834873199463},{x:340.9107208251953,y:315.4837703704834,z:-18.5576331615448,name:"lips"},{x:339.1478729248047,y:323.42233657836914,z:-14.367576837539673},{x:333.3201599121094,y:307.4406337738037,z:-9.617288708686829},{x:331.2411117553711,y:306.9811820983887,z:-9.669809937477112},{x:329.23255920410156,y:306.0508346557617,z:-9.582273960113525,name:"lips"},{x:322.4586486816406,y:301.33323669433594,z:-7.720675468444824},{x:297.1712112426758,y:286.9552803039551,z:8.240055441856384},{x:341.3060760498047,y:235.4432201385498,z:-7.504753470420837},{x:336.9318389892578,y:224.3451976776123,z:5.829898118972778},{x:332.65323638916016,y:226.70403957366943,z:8.105834126472473},{x:334.67357635498047,y:306.4397621154785,z:-8.981193900108337,name:"lips"},{x:297.4601936340332,y:306.29210472106934,z:15.476365089416504},{x:342.9119110107422,y:222.37077713012695,z:-2.754466235637665},{x:335.4629898071289,y:332.20250129699707,z:-11.823196411132812},{x:353.2412338256836,y:240.56339263916016,z:-27.147831916809082},{x:346.3080596923828,y:236.41446590423584,z:-18.452589511871338},{x:352.6475143432617,y:234.1420555114746,z:-19.748122692108154},{x:337.3209762573242,y:253.39937210083008,z:-16.024924516677856},{x:358.6122131347656,y:344.90861892700195,z:-18.592647314071655},{x:358.1117248535156,y:334.64990615844727,z:-17.49552845954895},{x:346.4450454711914,y:335.0321102142334,z:-16.32838249206543},{x:319.17640686035156,y:320.2833938598633,z:-3.276764452457428},{x:325.2540588378906,y:276.2369728088379,z:-6.460157036781311},{x:326.7214584350586,y:327.3939514160156,z:-7.417217493057251},{x:310.7190132141113,y:277.2265148162842,z:-3.5452082753181458},{x:319.78355407714844,y:284.8238182067871,z:-6.4543211460113525},{x:305.773983001709,y:290.83580017089844,z:.06907138042151928},{x:344.4001770019531,y:344.85408782958984,z:-16.946970224380493},{x:333.1879425048828,y:258.74256134033203,z:-11.90489649772644},{x:313.80598068237305,y:327.08919525146484,z:2.2277912497520447},{x:322.9637908935547,y:334.6819496154785,z:-3.3643004298210144},{x:313.4055519104004,y:311.2166690826416,z:-1.1175429821014404},{x:291.0865783691406,y:298.2831001281738,z:22.467575073242188},{x:305.6580924987793,y:313.3707904815674,z:5.561453700065613},{x:288.23760986328125,y:305.9941864013672,z:36.765122413635254},{x:315.10692596435547,y:296.26991271972656,z:-4.604393839836121},{x:337.50518798828125,y:247.5944423675537,z:-10.597691535949707},{x:338.8450622558594,y:265.47778129577637,z:-27.778091430664062},{x:334.25254821777344,y:269.0671920776367,z:-20.938611030578613},{x:341.64512634277344,y:259.6387195587158,z:-32.189905643463135},{x:331.44081115722656,y:219.0976095199585,z:4.207563698291779},{x:320.56339263916016,y:216.49658203125,z:2.930997312068939},{x:311.21912002563477,y:216.57853603363037,z:2.9674705862998962},{x:303.46256256103516,y:218.54614734649658,z:5.357203483581543},{x:297.99999237060547,y:222.505202293396,z:9.325502514839172},{x:294.93839263916016,y:236.39654159545898,z:18.534289598464966},{x:278.87489318847656,y:259.7095584869385,z:45.68212032318115},{x:300.3782653808594,y:245.38593292236328,z:12.278382778167725},{x:307.06348419189453,y:246.36857986450195,z:8.164191246032715},{x:315.5229187011719,y:245.3949737548828,z:5.503097176551819},{x:323.71395111083984,y:242.75178909301758,z:4.6335723996162415},{x:330.2785873413086,y:239.34658527374268,z:4.937030673027039},{x:334.6982192993164,y:236.0460376739502,z:4.823233783245087},{x:279.3412208557129,y:263.5196113586426,z:70.91583728790283,name:"faceOval"},{x:334.65972900390625,y:271.6648578643799,z:-17.775644063949585},{x:342.05677032470703,y:246.99846267700195,z:-20.84523916244507},{x:344.0357971191406,y:264.5701503753662,z:-32.936880588531494},{x:348.25531005859375,y:268.6645030975342,z:-30.695960521697998},{x:344.12227630615234,y:266.34212493896484,z:-29.808926582336426},{x:337.12318420410156,y:274.2556858062744,z:-15.768152475357056},{x:349.49047088623047,y:269.071683883667,z:-32.51670837402344},{x:350.1683044433594,y:271.4691352844238,z:-24.93025302886963},{x:333.9634704589844,y:230.56639194488525,z:8.89949381351471},{x:338.2147979736328,y:231.4807891845703,z:4.6715047955513},{x:340.4712677001953,y:231.74463272094727,z:-.34996166825294495},{x:303.28975677490234,y:232.24980354309082,z:11.916568279266357,name:"rightEye"},{x:299.4649124145508,y:229.53842639923096,z:12.325069904327393},{x:359.09618377685547,y:241.77349090576172,z:-24.650139808654785},{x:399.46216583251953,y:229.89503860473633,z:15.919880867004395,name:"leftEye"},{x:361.38919830322266,y:269.6129894256592,z:-24.510080814361572},{x:416.9973373413086,y:206.0895538330078,z:53.26857566833496,name:"faceOval"},{x:381.32179260253906,y:235.5476474761963,z:7.6214683055877686},{x:387.8068542480469,y:236.25958442687988,z:8.345099091529846},{x:393.95751953125,y:235.8660364151001,z:10.475142002105713},{x:401.84600830078125,y:232.77019500732422,z:16.760226488113403},{x:375.70568084716797,y:233.48456382751465,z:8.234220147132874},{x:388.17752838134766,y:218.94717693328857,z:6.810300946235657},{x:381.64928436279297,y:219.2656660079956,z:6.711093783378601},{x:394.4760513305664,y:219.66821193695068,z:9.173773527145386},{x:398.8843536376953,y:221.8837022781372,z:12.03328251838684},{x:406.5454864501953,y:237.12156772613525,z:19.7131085395813},{x:383.87447357177734,y:337.6932907104492,z:-8.631049990653992},{x:401.2682342529297,y:228.5916566848755,z:18.359217643737793,name:"leftEye"},{x:422.0449447631836,y:236.73934936523438,z:51.16771221160889},{x:412.69153594970703,y:232.80198097229004,z:27.52131938934326},{x:387.3497772216797,y:263.298397064209,z:-2.8609684109687805},{x:364.5124053955078,y:293.39221000671387,z:-22.397546768188477,name:"lips"},{x:363.62987518310547,y:302.1291446685791,z:-19.643079042434692},{x:373.2334518432617,y:295.8647060394287,z:-18.125789165496826,name:"lips"},{x:378.83365631103516,y:299.5177745819092,z:-13.153743743896484,name:"lips"},{x:369.91477966308594,y:302.5704002380371,z:-16.65518283843994},{x:374.9167251586914,y:303.5416603088379,z:-11.963253021240234},{x:387.58888244628906,y:312.2716999053955,z:-4.680258631706238},{x:360.6635284423828,y:264.31986808776855,z:-35.94811677932739},{x:361.04564666748047,y:256.8225860595703,z:-37.278664112091064},{x:408.3855438232422,y:213.52088928222656,z:15.756480693817139,name:"leftEyebrow"},{x:373.2946014404297,y:245.38101196289062,z:-1.9316278398036957},{x:376.83860778808594,y:264.3721103668213,z:-18.510947227478027},{x:376.9546127319336,y:261.0010528564453,z:-15.989909172058105},{x:406.1498260498047,y:263.5030174255371,z:7.072908878326416},{x:360.07205963134766,y:248.3631706237793,z:-32.16656446456909},{x:393.11119079589844,y:205.10473251342773,z:3.7786373496055603,name:"leftEyebrow"},{x:402.12791442871094,y:207.89000988006592,z:9.383859634399414,name:"leftEyebrow"},{x:410.8693313598633,y:191.6182279586792,z:41.27030849456787,name:"faceOval"},{x:364.9509811401367,y:210.40483474731445,z:-3.758212625980377},{x:375.94444274902344,y:221.1331844329834,z:8.368442058563232},{x:392.1904754638672,y:305.0360298156738,z:-1.752179116010666},{x:419.50225830078125,y:307.25592613220215,z:58.96425247192383,name:"faceOval"},{x:372.0027160644531,y:268.7212657928467,z:-16.631840467453003},{x:366.1614227294922,y:271.6237449645996,z:-18.219159841537476},{x:385.00938415527344,y:305.3863334655762,z:-2.567722797393799},{x:381.99771881103516,y:304.9723720550537,z:-4.575215280056},{x:405.078125,y:203.21216583251953,z:13.713973760604858,name:"leftEyebrow"},{x:377.13207244873047,y:268.4710121154785,z:-15.266278982162476},{x:380.9713363647461,y:205.36980628967285,z:-.7250899076461792,name:"leftEyebrow"},{x:381.7788314819336,y:198.9268398284912,z:-1.184653863310814,name:"leftEyebrow"},{x:385.5204772949219,y:172.1484375,z:16.04826807975769,name:"faceOval"},{x:407.94189453125,y:196.76236152648926,z:25.723915100097656},{x:383.03890228271484,y:184.5157527923584,z:7.393874526023865},{x:411.61781311035156,y:210.79241752624512,z:22.315845489501953,name:"leftEyebrow"},{x:414.30870056152344,y:208.4643030166626,z:37.021894454956055},{x:364.28722381591797,y:298.35777282714844,z:-21.86065673828125},{x:371.3682556152344,y:299.78848457336426,z:-17.834001779556274},{x:376.88201904296875,y:301.6696071624756,z:-13.153743743896484},{x:370.2193832397461,y:270.49095153808594,z:-15.569736957550049},{x:383.5081100463867,y:305.2726364135742,z:-3.673594295978546},{x:380.73760986328125,y:305.96869468688965,z:-8.660228252410889},{x:381.2334442138672,y:304.63574409484863,z:-4.820316135883331,name:"lips"},{x:368.1698989868164,y:264.8884963989258,z:-25.653886795043945},{x:373.5087203979492,y:303.4233856201172,z:-10.95950722694397,name:"lips"},{x:368.4544372558594,y:303.29601287841797,z:-14.169161319732666,name:"lips"},{x:362.76554107666016,y:303.5735607147217,z:-16.911956071853638,name:"lips"},{x:366.60980224609375,y:324.8870658874512,z:-15.616422891616821},{x:365.7067108154297,y:315.95678329467773,z:-20.903596878051758,name:"lips"},{x:365.0083923339844,y:311.2232208251953,z:-21.066999435424805},{x:364.1508102416992,y:307.0583438873291,z:-18.907777070999146},{x:363.37512969970703,y:304.5721435546875,z:-17.42550015449524,name:"lips"},{x:374.580078125,y:304.3059539794922,z:-11.40302300453186,name:"lips"},{x:375.55362701416016,y:305.0998020172119,z:-12.861957550048828},{x:377.2437286376953,y:307.1674346923828,z:-14.215847253799438},{x:378.68587493896484,y:309.9015712738037,z:-13.223772048950195,name:"lips"},{x:383.8992691040039,y:290.29629707336426,z:-9.97326910495758},{x:423.3871841430664,y:271.91688537597656,z:74.37058925628662,name:"faceOval"},{x:377.68043518066406,y:304.62209701538086,z:-7.603961229324341,name:"lips"},{x:379.00428771972656,y:304.9314594268799,z:-8.57852816581726},{x:364.00279998779297,y:275.2813911437988,z:-19.25792098045349},{x:374.68231201171875,y:273.82555961608887,z:-11.28047227859497},{x:365.0354766845703,y:273.4548568725586,z:-18.791062831878662},{x:380.61901092529297,y:249.8848056793213,z:.15501167625188828},{x:391.14158630371094,y:254.7934627532959,z:2.0906515419483185},{x:378.1761169433594,y:264.9612236022949,z:-12.605184316635132},{x:400.9540557861328,y:179.99592304229736,z:27.82477855682373,name:"faceOval"},{x:398.0038833618164,y:188.50656509399414,z:16.094952821731567},{x:394.8717498779297,y:199.0359592437744,z:6.226727366447449,name:"leftEyebrow"},{x:382.10926055908203,y:316.83926582336426,z:-8.946179747581482},{x:366.51588439941406,y:200.32583713531494,z:-5.24632453918457,name:"leftEyebrow"},{x:367.4893569946289,y:183.87210845947266,z:1.9039081037044525},{x:368.6243438720703,y:168.8127565383911,z:8.736093044281006,name:"faceOval"},{x:398.96175384521484,y:234.9675178527832,z:13.713973760604858},{x:412.9645538330078,y:242.23042488098145,z:23.272905349731445},{x:372.05257415771484,y:231.41919136047363,z:9.226294755935669},{x:406.0722351074219,y:223.58965873718262,z:18.370890617370605},{x:368.27442169189453,y:240.2039337158203,z:-4.166713654994965},{x:372.3575210571289,y:260.66442489624023,z:-24.976940155029297},{x:419.2244338989258,y:247.9079246520996,z:30.299127101898193},{x:409.43885803222656,y:246.60913467407227,z:16.398411989212036},{x:401.69139862060547,y:248.76328468322754,z:9.395531415939331},{x:389.7608184814453,y:247.56915092468262,z:5.841569304466248},{x:380.5461883544922,y:244.55984115600586,z:4.263003468513489},{x:373.25817108154297,y:240.80214500427246,z:2.5356262922286987},{x:358.77086639404297,y:229.35615062713623,z:-10.387605428695679},{x:419.5793914794922,y:262.8478717803955,z:26.5175724029541},{x:410.8808898925781,y:222.51372814178467,z:22.199130058288574},{x:358.45714569091797,y:268.91467094421387,z:-33.17030906677246},{x:373.4129333496094,y:251.6385841369629,z:-5.771540403366089},{x:422.5408172607422,y:239.23919677734375,z:74.04378890991211,name:"faceOval"},{x:367.8171920776367,y:236.58040523529053,z:1.820748895406723},{x:378.51959228515625,y:266.2532329559326,z:-5.74819803237915},{x:403.3472442626953,y:229.05112266540527,z:19.689764976501465},{x:372.34840393066406,y:256.6451168060303,z:-21.872329711914062},{x:422.54566192626953,y:289.1587829589844,z:68.67491245269775,name:"faceOval"},{x:371.9297409057617,y:228.90116214752197,z:11.432201862335205,name:"leftEye"},{x:366.21360778808594,y:251.6158962249756,z:-28.19826364517212},{x:409.1571807861328,y:321.3156223297119,z:20.2266526222229},{x:408.52943420410156,y:331.44238471984863,z:31.09278917312622,name:"faceOval"},{x:424.2788314819336,y:267.1992301940918,z:50.467424392700195},{x:415.60352325439453,y:311.6528606414795,z:30.579242706298828},{x:418.12793731689453,y:221.59927368164062,z:46.26569747924805},{x:385.68286895751953,y:346.0184955596924,z:-5.70151150226593},{x:357.82936096191406,y:271.3758373260498,z:-24.836881160736084},{x:379.588623046875,y:257.5071716308594,z:-3.755294680595398},{x:417.4592590332031,y:234.71948146820068,z:34.5475435256958},{x:393.4684371948242,y:231.58967971801758,z:11.408859491348267,name:"leftEye"},{x:387.8864288330078,y:232.14245796203613,z:9.51808214187622,name:"leftEye"},{x:382.4981689453125,y:307.5654888153076,z:-7.522260546684265,name:"lips"},{x:419.00169372558594,y:277.8332805633545,z:26.424202919006348},{x:373.62953186035156,y:357.6375102996826,z:-5.75986921787262,name:"faceOval"},{x:392.8708267211914,y:347.72446632385254,z:10.154176950454712,name:"faceOval"},{x:400.3953552246094,y:341.0005187988281,z:19.39797878265381,name:"faceOval"},{x:382.25440979003906,y:231.66935920715332,z:8.998700976371765,name:"leftEye"},{x:377.14550018310547,y:230.4228687286377,z:9.804032444953918,name:"leftEye"},{x:373.8358688354492,y:229.64950561523438,z:11.292144060134888,name:"leftEye"},{x:414.5794677734375,y:221.67891025543213,z:29.412097930908203},{x:377.00672149658203,y:225.66201210021973,z:9.360517263412476,name:"leftEye"},{x:382.29530334472656,y:224.8431158065796,z:8.32175612449646,name:"leftEye"},{x:387.5133514404297,y:224.49507236480713,z:8.917000889778137,name:"leftEye"},{x:393.15906524658203,y:225.24795055389404,z:10.737749338150024,name:"leftEye"},{x:397.05554962158203,y:226.55359268188477,z:13.002015352249146,name:"leftEye"},{x:420.5299377441406,y:221.014666557312,z:65.40690422058105,name:"faceOval"},{x:397.06920623779297,y:230.6661558151245,z:13.807345628738403,name:"leftEye"},{x:377.94647216796875,y:285.1647090911865,z:-13.305472135543823},{x:372.1118927001953,y:267.1267318725586,z:-18.83774757385254},{x:364.9968719482422,y:282.24411964416504,z:-19.818150997161865},{x:401.973876953125,y:331.20131492614746,z:11.566424369812012},{x:394.3083190917969,y:338.86693954467773,z:3.142542541027069},{x:373.9820861816406,y:351.4504623413086,z:-13.50388765335083},{x:414.3888854980469,y:321.24735832214355,z:45.51872253417969,name:"faceOval"},{x:373.44234466552734,y:227.33163356781006,z:10.626870393753052,name:"leftEye"},{x:364.0731430053711,y:240.31539916992188,z:-13.807345628738403},{x:384.2658233642578,y:353.3793067932129,z:.7385850697755814,name:"faceOval"},{x:423.20526123046875,y:283.5176181793213,z:47.152724266052246},{x:369.42798614501953,y:304.0898895263672,z:-14.647691249847412,name:"lips"},{x:370.63812255859375,y:305.90051651000977,z:-16.211668252944946},{x:371.91192626953125,y:309.0167713165283,z:-17.84567356109619},{x:373.0583953857422,y:313.3545398712158,z:-17.378815412521362,name:"lips"},{x:375.39905548095703,y:321.09289169311523,z:-13.118728399276733},{x:379.2567825317383,y:304.3582534790039,z:-7.924926280975342},{x:381.18797302246094,y:303.7031364440918,z:-7.843226194381714},{x:383.0918502807617,y:302.4884605407715,z:-7.6506465673446655,name:"lips"},{x:389.09461975097656,y:297.1475315093994,z:-5.5497825145721436},{x:411.6408920288086,y:280.24898529052734,z:12.02161192893982},{x:363.3110809326172,y:234.27620887756348,z:-6.775286793708801},{x:366.0474395751953,y:223.29872131347656,z:6.827808618545532},{x:370.34427642822266,y:225.1457118988037,z:9.558931589126587},{x:377.5371551513672,y:303.60079765319824,z:-7.358860373497009,name:"lips"},{x:412.9557800292969,y:299.53579902648926,z:19.39797878265381},{x:360.0810241699219,y:221.72012329101562,z:-2.153385728597641},{x:379.82784271240234,y:329.47723388671875,z:-10.48097848892212},{x:359.08477783203125,y:235.7911491394043,z:-18.079102039337158},{x:369.6688461303711,y:251.5407943725586,z:-14.962821006774902},{x:369.5555114746094,y:333.5307312011719,z:-15.67478060722351},{x:394.0193176269531,y:315.6973171234131,z:-.9920747578144073},{x:383.78997802734375,y:272.7268695831299,z:-4.689012169837952},{x:387.67765045166016,y:323.6722755432129,z:-5.640236139297485},{x:397.8769302368164,y:272.1331214904785,z:-.9395531564950943},{x:389.87476348876953,y:280.5630111694336,z:-4.29218202829361},{x:403.83888244628906,y:285.1167869567871,z:3.0229100584983826},{x:372.5467300415039,y:343.1070327758789,z:-16.153310537338257},{x:374.1112518310547,y:256.3721466064453,z:-10.574349164962769},{x:399.73785400390625,y:321.77515983581543,z:4.849494695663452},{x:392.03365325927734,y:330.56447982788086,z:-1.3407598435878754},{x:398.59134674072266,y:305.93902587890625,z:1.517290621995926},{x:417.95997619628906,y:290.9716987609863,z:26.89105987548828},{x:406.04541778564453,y:307.35154151916504,z:8.666064143180847},{x:420.75328826904297,y:298.40752601623535,z:41.78385257720947},{x:395.4522705078125,y:291.4153575897217,z:-2.1752697229385376},{x:368.6452102661133,y:245.8882999420166,z:-9.453888535499573},{x:370.34900665283203,y:263.56690406799316,z:-26.75100326538086},{x:374.98477935791016,y:266.6126346588135,z:-19.77146625518799},{x:366.99840545654297,y:258.12140464782715,z:-31.372904777526855},{x:371.00616455078125,y:217.63479709625244,z:5.60522198677063},{x:381.30577087402344,y:214.14087295532227,z:4.983716309070587},{x:390.1496124267578,y:213.38221549987793,z:5.593550801277161},{x:397.7696990966797,y:214.3659782409668,z:8.57852816581726},{x:403.1652069091797,y:217.65509605407715,z:13.013685941696167},{x:407.3551940917969,y:230.72525024414062,z:22.444231510162354},{x:424.0876770019531,y:251.7839241027832,z:51.16771221160889},{x:403.50196838378906,y:239.88757610321045,z:15.803166627883911},{x:397.31719970703125,y:241.49806022644043,z:11.233787536621094},{x:388.99425506591797,y:241.4366912841797,z:7.948269248008728},{x:380.7804489135742,y:239.78078842163086,z:6.600214838981628},{x:374.01336669921875,y:237.11946487426758,z:6.349278092384338},{x:369.39125061035156,y:234.35351371765137,z:5.987462401390076},{x:422.9730987548828,y:255.76455116271973,z:76.61150932312012,name:"faceOval"},{x:374.73915100097656,y:269.24214363098145,z:-16.608498096466064},{x:364.61681365966797,y:245.71088790893555,z:-20.02823829650879},{x:365.3834533691406,y:263.34174156188965,z:-32.32996463775635},{x:361.58252716064453,y:267.8273677825928,z:-30.345816612243652},{x:365.37208557128906,y:265.0249671936035,z:-29.178667068481445},{x:372.72605895996094,y:272.05135345458984,z:-14.834434986114502},{x:360.48614501953125,y:268.34827423095703,z:-32.189905643463135},{x:359.9516296386719,y:270.8049201965332,z:-24.650139808654785},{x:369.5049285888672,y:229.01945114135742,z:10.107489824295044},{x:365.5447769165039,y:230.24096488952637,z:5.593550801277161},{x:363.50669860839844,y:230.6208372116089,z:.43622106313705444},{x:399.3529510498047,y:227.65677452087402,z:15.35965085029602,name:"leftEye"},{x:402.5693130493164,y:224.60190296173096,z:15.931552648544312}],box:{xMin:277.8318977355957,yMin:168.7741756439209,xMax:424.2788314819336,yMax:359.8348903656006,width:146.4469337463379,height:191.0607147216797}},SAMPLE_FACELANDMARKER_RESULT:{faceLandmarks:[[{x:.5760777592658997,y:.8639070391654968,z:-.030997956171631813},{x:.572094738483429,y:.7886289358139038,z:-.07189624011516571},{x:.5723551511764526,y:.8075382709503174,z:-.03578168898820877},{x:.5548420548439026,y:.7188365459442139,z:-.057787876576185226},{x:.5706077814102173,y:.7674974799156189,z:-.07740399986505508},{x:.5681378245353699,y:.7387768030166626,z:-.07356284558773041},{x:.5621535181999207,y:.6681165099143982,z:-.04189874976873398},{x:.46613582968711853,y:.6679812073707581,z:.011289681307971478},{x:.5579932928085327,y:.6174106597900391,z:-.03502821549773216},{x:.5563451647758484,y:.5905600190162659,z:-.03928658738732338},{x:.5487832427024841,y:.4900572597980499,z:-.029898937791585922},{x:.5765544176101685,y:.8692144751548767,z:-.02831427752971649},{x:.5771114230155945,y:.873644232749939,z:-.02345779910683632},{x:.5771905779838562,y:.877016007900238,z:-.016658689826726913},{x:.5778058767318726,y:.8770116567611694,z:-.014505492523312569},{x:.5783766508102417,y:.8835000991821289,z:-.015996402129530907},{x:.5792440176010132,y:.8913810849189758,z:-.01924579218029976},{x:.5796768069267273,y:.8996334671974182,z:-.018261712044477463},{x:.5817288160324097,y:.9255813956260681,z:-.007126849144697189},{x:.5726592540740967,y:.7992473244667053,z:-.0643521398305893},{x:.5579419136047363,y:.7996989488601685,z:-.04566684365272522},{x:.4216199815273285,y:.5958762764930725,z:.06776496022939682},{x:.5052269697189331,y:.6796539425849915,z:-.0010737782577052712},{x:.49243026971817017,y:.6838865876197815,z:-.0005227324436418712},{x:.4796970784664154,y:.6856290102005005,z:.002684245817363262},{x:.4618356227874756,y:.6764569878578186,z:.013439622707664967},{x:.5160380601882935,y:.6737282276153564,z:-17607348127057776e-21},{x:.48070961236953735,y:.6255870461463928,z:-.008339674212038517},{x:.49719780683517456,y:.6256808042526245,z:-.008027955889701843},{x:.46674346923828125,y:.6317623853683472,z:-.004460199736058712},{x:.4582492709159851,y:.641118049621582,z:.0011905613355338573},{x:.45408669114112854,y:.6911458969116211,z:.020514748990535736},{x:.535312294960022,y:.9619986414909363,z:.012499462813138962},{x:.4608460068702698,y:.6628725528717041,z:.01517564244568348},{x:.4206731915473938,y:.6828458309173584,z:.07848648726940155},{x:.4390624463558197,y:.6796106696128845,z:.03283142298460007},{x:.5029968619346619,y:.7701570391654968,z:-.009734481573104858},{x:.5595027208328247,y:.8607323169708252,z:-.030043255537748337},{x:.5621269941329956,y:.8738374710083008,z:-.021709579974412918},{x:.5451499819755554,y:.865527331829071,z:-.022014077752828598},{x:.5351184010505676,y:.8705098032951355,z:-.011602800339460373},{x:.5495014190673828,y:.8744956254959106,z:-.016490943729877472},{x:.5395170450210571,y:.8759440779685974,z:-.007333362940698862},{x:.5183624029159546,y:.8959754705429077,z:.010520773939788342},{x:.5604349374771118,y:.7895449995994568,z:-.07082037627696991},{x:.557381272315979,y:.7687489986419678,z:-.07590588927268982},{x:.4432901442050934,y:.6308897733688354,z:.0027153254486620426},{x:.5258325338363647,y:.7151225805282593,z:-.014676518738269806},{x:.5271827578544617,y:.7833116054534912,z:-.037643320858478546},{x:.5257382988929749,y:.7717816233634949,z:-.03401920944452286},{x:.46516409516334534,y:.7705106735229492,z:.0065747760236263275},{x:.5558893084526062,y:.7420997619628906,z:-.0694495290517807},{x:.4720408320426941,y:.6066038608551025,z:-.021204356104135513},{x:.45432573556900024,y:.6158540844917297,z:-.011054684408009052},{x:.4305151402950287,y:.5608053803443909,z:.0396830290555954},{x:.5310865640640259,y:.6157484650611877,z:-.03081176057457924},{x:.5114666223526001,y:.6329749226570129,z:-.00335998204536736},{x:.506435751914978,y:.8786543607711792,z:.012980876490473747},{x:.4480472207069397,y:.8640613555908203,z:.12569651007652283},{x:.5372058153152466,y:.7942581176757812,z:-.03168361634016037},{x:.5488379597663879,y:.8001630306243896,z:-.03280917927622795},{x:.5213388204574585,y:.8794381618499756,z:.011892606504261494},{x:.5242055654525757,y:.8789222240447998,z:.008370225317776203},{x:.4477175176143646,y:.6039950251579285,z:-.0050799972377717495},{x:.526964008808136,y:.7916748523712158,z:-.02968614175915718},{x:.4971255660057068,y:.6050706505775452,z:-.028175678104162216},{x:.4938119053840637,y:.5882453918457031,z:-.03210941329598427},{x:.4757143557071686,y:.5094879865646362,z:-.01300730835646391},{x:.43947282433509827,y:.5816648006439209,z:.01415177434682846},{x:.485664039850235,y:.5477864146232605,z:-.023685332387685776},{x:.43635931611061096,y:.6226438283920288,z:.013606148771941662},{x:.42910251021385193,y:.6102726459503174,z:.03926564007997513},{x:.5605402588844299,y:.8680099248886108,z:-.027318159118294716},{x:.5474816560745239,y:.8702861070632935,z:-.019686367362737656},{x:.5373021364212036,y:.8728838562965393,z:-.010484928265213966},{x:.540735125541687,y:.7979167103767395,z:-.029073253273963928},{x:.5228585004806519,y:.87913578748703,z:.009915109723806381},{x:.530497670173645,y:.8815253973007202,z:.0020524784922599792},{x:.5259912610054016,y:.8790552616119385,z:.007895970717072487},{x:.5433906316757202,y:.7882310748100281,z:-.05121905356645584},{x:.541388213634491,y:.8777219653129578,z:-.00466804439201951},{x:.5515822172164917,y:.8767023086547852,z:-.010475946590304375},{x:.5637003779411316,y:.877059817314148,z:-.015273625031113625},{x:.5640299320220947,y:.9263423085212708,z:-.00658724969252944},{x:.5642300248146057,y:.8993074893951416,z:-.017653480172157288},{x:.5637336373329163,y:.8910360932350159,z:-.01852807030081749},{x:.5637134313583374,y:.8837276697158813,z:-.01482592523097992},{x:.564205527305603,y:.8768964409828186,z:-.01331155002117157},{x:.5419867634773254,y:.8778373599052429,z:-.0037720394320786},{x:.5404468774795532,y:.880696177482605,z:-.005610354244709015},{x:.5392338633537292,y:.8845721483230591,z:-.007352025713771582},{x:.538469672203064,y:.8891173601150513,z:-.005154991988092661},{x:.5189250111579895,y:.8452741503715515,z:-.009755070321261883},{x:.4258975088596344,y:.7662280797958374,z:.1387351155281067},{x:.5725725293159485,y:.8041572570800781,z:-.04583907872438431},{x:.5342061519622803,y:.8785833120346069,z:.002659974154084921},{x:.5324031114578247,y:.8804071545600891,z:.0017832003068178892},{x:.5538818836212158,y:.8078407645225525,z:-.03254539892077446},{x:.5325431823730469,y:.8026832938194275,z:-.019140373915433884},{x:.5514076948165894,y:.8043903112411499,z:-.03313535451889038},{x:.5131856203079224,y:.7284771800041199,z:-.009399853646755219},{x:.49331504106521606,y:.7443980574607849,z:-.005225230939686298},{x:.5239617824554443,y:.7807451486587524,z:-.025881027802824974},{x:.4473606050014496,y:.5315827131271362,z:.011164786294102669},{x:.45718759298324585,y:.5604941248893738,z:-.005943301599472761},{x:.4670005738735199,y:.5909327268600464,z:-.019681761041283607},{x:.5311570167541504,y:.9076261520385742,z:.00389476353302598},{x:.5249923467636108,y:.5893563628196716,z:-.037981919944286346},{x:.5166932344436646,y:.5429551005363464,z:-.03319704160094261},{x:.5085030198097229,y:.49676206707954407,z:-.02691275253891945},{x:.4687720239162445,y:.6834565997123718,z:.008113506250083447},{x:.4426414966583252,y:.7069531679153442,z:.028577271848917007},{x:.5230373740196228,y:.6675713658332825,z:.001773772411979735},{x:.4481240212917328,y:.6527872085571289,z:.012414850294589996},{x:.5339856743812561,y:.7012367844581604,z:-.020220188423991203},{x:.5347223281860352,y:.7761190533638,z:-.05141595005989075},{x:.4315067231655121,y:.7211957573890686,z:.04381405934691429},{x:.45203351974487305,y:.7206180095672607,z:.017288070172071457},{x:.46892452239990234,y:.7265436053276062,z:.005602988880127668},{x:.49314674735069275,y:.7202282547950745,z:-.0006408205372281373},{x:.5104925632476807,y:.7091827392578125,z:-.00362918758764863},{x:.5232142210006714,y:.698553740978241,z:-.00787867046892643},{x:.5497883558273315,y:.6743605136871338,z:-.036349106580019},{x:.43658503890037537,y:.7627100348472595,z:.042555369436740875},{x:.4397648870944977,y:.6528646349906921,z:.017956094816327095},{x:.5653332471847534,y:.7992802858352661,z:-.06365057826042175},{x:.5285563468933105,y:.736810564994812,z:-.018836988136172295},{x:.4180678725242615,y:.6792560815811157,z:.12284679710865021},{x:.5328429937362671,y:.6865872144699097,z:-.010484723374247551},{x:.5230283141136169,y:.7809416055679321,z:-.011922398582100868},{x:.4551771283149719,y:.6650775074958801,z:.01774493046104908},{x:.5337203741073608,y:.7618928551673889,z:-.04697106033563614},{x:.43463975191116333,y:.8133478164672852,z:.1354849934577942},{x:.5225707292556763,y:.6605283617973328,z:.004980515688657761},{x:.5441933870315552,y:.7497199773788452,z:-.06091512367129326},{x:.4774007797241211,y:.9159183502197266,z:.059622734785079956},{x:.48068761825561523,y:.9364941716194153,z:.08404944837093353},{x:.4268292486667633,y:.7657528519630432,z:.09051097184419632},{x:.46051913499832153,y:.8880485892295837,z:.0738474428653717},{x:.4243420660495758,y:.6434382200241089,z:.06230505183339119},{x:.5342157483100891,y:.9835634231567383,z:.021662971004843712},{x:.5668109655380249,y:.8042187094688416,z:-.044937074184417725},{x:.5176341533660889,y:.7530587315559387,z:-.012967454269528389},{x:.430206298828125,y:.6835605502128601,z:.04612284153699875},{x:.4794231951236725,y:.6732114553451538,z:.003970044665038586},{x:.49073347449302673,y:.6722435355186462,z:.0008692514384165406},{x:.5294116139411926,y:.884677529335022,z:.004413890186697245},{x:.4430122375488281,y:.80235356092453,z:.04987282305955887},{x:.5603825449943542,y:1.0092442035675049,z:.026417359709739685},{x:.5186598300933838,y:.9828659892082214,z:.0513598807156086},{x:.5010536909103394,y:.9640932679176331,z:.06591596454381943},{x:.5524769425392151,y:.539441704750061,z:-.035816047340631485},{x:.5879997611045837,y:1.0091472864151,z:.02285068854689598},{x:.5016193985939026,y:.6684437990188599,z:.00028415941051207483},{x:.511952817440033,y:.6642197370529175,z:.0021144719794392586},{x:.5194343328475952,y:.6623469591140747,z:.004674181342124939},{x:.4321230351924896,y:.6496355533599854,z:.03124697133898735},{x:.508686363697052,y:.6479565501213074,z:-.00044765998609364033},{x:.4963986277580261,y:.6431032419204712,z:-.0032507688738405704},{x:.4845542013645172,y:.6430778503417969,z:-.002903624437749386},{x:.4733612537384033,y:.647506833076477,z:.00023347247042693198},{x:.4668654501438141,y:.653346598148346,z:.004762572236359119},{x:.41815051436424255,y:.633708119392395,z:.09809435904026031},{x:.47159942984580994,y:.6711485385894775,z:.007849935442209244},{x:.5734396576881409,y:.8256140351295471,z:-.03155219927430153},{x:.5306524038314819,y:.8337990641593933,z:-.018351426348090172},{x:.5371729135513306,y:.7910830974578857,z:-.037286680191755295},{x:.5549534559249878,y:.8275275826454163,z:-.030664825811982155},{x:.5597432255744934,y:.6418541669845581,z:-.03318847343325615},{x:.4958484172821045,y:.9429569244384766,z:.048340678215026855},{x:.5140507817268372,y:.9634028077125549,z:.03589847311377525},{x:.5587693452835083,y:.9951097369194031,z:.00908728688955307},{x:.46411189436912537,y:.9051855206489563,z:.10601935535669327},{x:.5181609392166138,y:.6554316878318787,z:.002546071307733655},{x:.5436590909957886,y:.7085841298103333,z:-.03844436630606651},{x:.5872187614440918,y:.9960382580757141,z:.0063423276878893375},{x:.5379653573036194,y:.9989125728607178,z:.03636329993605614},{x:.4350326955318451,y:.8088565468788147,z:.09147704392671585},{x:.5523084998130798,y:.8773422837257385,z:-.009068487212061882},{x:.5510149598121643,y:.8816931843757629,z:-.011043853126466274},{x:.5503793954849243,y:.88776695728302,z:-.01348799467086792},{x:.5501549243927002,y:.8954370617866516,z:-.012142189778387547},{x:.546072781085968,y:.9192524552345276,z:-.003157563041895628},{x:.5314661860466003,y:.8771666884422302,z:.0005075141089037061},{x:.5293324589729309,y:.8762547969818115,z:.00039177737198770046},{x:.5275698900222778,y:.8750609755516052,z:47732755774632096e-21},{x:.5104271173477173,y:.8607332110404968,z:.0012934643309563398},{x:.45938700437545776,y:.8134918212890625,z:.023569690063595772},{x:.5418947339057922,y:.6864100694656372,z:-.027333909645676613},{x:.531914234161377,y:.6456130743026733,z:-.005434140563011169},{x:.523697018623352,y:.647885262966156,z:-.0002466466394253075},{x:.5338191390037537,y:.8783687353134155,z:.002268768846988678},{x:.46226605772972107,y:.8610277771949768,z:.04718952998518944},{x:.5434442758560181,y:.6456181406974792,z:-.02327350154519081},{x:.5399754643440247,y:.940219521522522,z:.005075343884527683},{x:.5661457777023315,y:.71457839012146,z:-.06242101639509201},{x:.5523148775100708,y:.6974870562553406,z:-.04863070324063301},{x:.5639959573745728,y:.6923378109931946,z:-.05180761218070984},{x:.5367592573165894,y:.7423217296600342,z:-.03623027727007866},{x:.5853689908981323,y:.9752064943313599,z:-.002361974213272333},{x:.5835235118865967,y:.9493685960769653,z:-.003941743168979883},{x:.5615018606185913,y:.949194610118866,z:-.0015953965485095978},{x:.5068561434745789,y:.9048219323158264,z:.01862684078514576},{x:.5134067535400391,y:.7971825003623962,z:-.008485661819577217},{x:.5223897099494934,y:.925589919090271,z:.01249657291918993},{x:.48500555753707886,y:.7959478497505188,z:-.0032065745908766985},{x:.5037734508514404,y:.8184596300125122,z:-.004932103678584099},{x:.4766361117362976,y:.828806459903717,z:.01027688942849636},{x:.5589827299118042,y:.974656343460083,z:.0009666886180639267},{x:.5294582843780518,y:.7541216611862183,z:-.025603046640753746},{x:.4973002076148987,y:.9208990931510925,z:.031931452453136444},{x:.5163551568984985,y:.9432790875434875,z:.024321340024471283},{x:.49399662017822266,y:.8814862370491028,z:.018687399104237556},{x:.44948166608810425,y:.836137592792511,z:.05702034756541252},{x:.47898444533348083,y:.8836610913276672,z:.03150695189833641},{x:.4454479217529297,y:.8499438166618347,z:.08868525922298431},{x:.49572959542274475,y:.8452823758125305,z:.0036111653316766024},{x:.5362502336502075,y:.7222585678100586,z:-.027912352234125137},{x:.5393770337104797,y:.7850722074508667,z:-.05415399745106697},{x:.531399667263031,y:.7898418307304382,z:-.03883346915245056},{x:.5451627373695374,y:.7717036604881287,z:-.06480253487825394},{x:.5206395983695984,y:.6287745833396912,z:-.010521138086915016},{x:.4974782466888428,y:.6191938519477844,z:-.014098240062594414},{x:.4774145185947418,y:.6193130612373352,z:-.013643337413668633},{x:.4616098403930664,y:.6259890198707581,z:-.008448202162981033},{x:.4516478478908539,y:.6368461847305298,z:9050309745362028e-20},{x:.4485096037387848,y:.6719120740890503,z:.022984720766544342},{x:.42177659273147583,y:.7240667343139648,z:.08511673659086227},{x:.4616215229034424,y:.6988231539726257,z:.014238474890589714},{x:.4755798876285553,y:.7034608721733093,z:.00625590980052948},{x:.4924992024898529,y:.7005885243415833,z:.0009391739731654525},{x:.5082254409790039,y:.693384051322937,z:-.0009464038303121924},{x:.5203112959861755,y:.6849707961082458,z:-.0022114769089967012},{x:.52867591381073,y:.6779075860977173,z:-.002962538506835699},{x:.4213953912258148,y:.7219811677932739,z:.1350894570350647},{x:.5320829749107361,y:.794858992099762,z:-.03181503340601921},{x:.5452795028686523,y:.7286570072174072,z:-.04771539941430092},{x:.5496407747268677,y:.7866933345794678,z:-.06452003121376038},{x:.557040274143219,y:.7962084412574768,z:-.05837344378232956},{x:.549176812171936,y:.7895247936248779,z:-.057761140167713165},{x:.5362890362739563,y:.8005836606025696,z:-.026903774589300156},{x:.560200035572052,y:.7983731031417847,z:-.06172555685043335},{x:.5616944432258606,y:.8022753596305847,z:-.045200999826192856},{x:.5273328423500061,y:.6611284017562866,z:.0029021520167589188},{x:.534850537776947,y:.6660012006759644,z:-.005215510260313749},{x:.5394860506057739,y:.6701375246047974,z:-.014931917190551758},{x:.4634307324886322,y:.658291757106781,z:.009295716881752014},{x:.4538393020629883,y:.6519932150840759,z:.00930330716073513},{x:.5776031613349915,y:.7159298658370972,z:-.057365912944078445},{x:.6504855155944824,y:.6461779475212097,z:.014184834435582161},{x:.5860154032707214,y:.7962266206741333,z:-.04522843658924103},{x:.6842049360275269,y:.5631637573242188,z:.07207967340946198},{x:.6152560710906982,y:.6674962639808655,z:.0007529259892180562},{x:.6280948519706726,y:.6684326529502869,z:.0016892586136236787},{x:.6408625245094299,y:.6663892269134521,z:.005331226624548435},{x:.6557814478874207,y:.6534678936004639,z:.01646413467824459},{x:.6035663485527039,y:.6639701724052429,z:.0013799630105495453},{x:.6329053044319153,y:.608010470867157,z:-.006195899099111557},{x:.6167260408401489,y:.6117533445358276,z:-.006319951266050339},{x:.6471013426780701,y:.6112449765205383,z:-.0017843559617176652},{x:.6560901999473572,y:.6185776591300964,z:.004047257360070944},{x:.6666946411132812,y:.6651176810264587,z:.023647578433156013},{x:.6311345100402832,y:.9495396018028259,z:.014004078693687916},{x:.6544655561447144,y:.6397901773452759,z:.01809609681367874},{x:.6965808868408203,y:.6482675075531006,z:.08304904401302338},{x:.679817259311676,y:.650188148021698,z:.03632688894867897},{x:.6336516737937927,y:.7541458010673523,z:-.007742783520370722},{x:.5921701192855835,y:.8567668199539185,z:-.029399123042821884},{x:.591663658618927,y:.870215654373169,z:-.02103729173541069},{x:.6068367958068848,y:.8584195375442505,z:-.020668085664510727},{x:.6176617741584778,y:.860965371131897,z:-.009790095500648022},{x:.6040634512901306,y:.8686612844467163,z:-.015289564616978168},{x:.6143736839294434,y:.8671170473098755,z:-.005712216719985008},{x:.6373105049133301,y:.8815656900405884,z:.012672550976276398},{x:.5832505822181702,y:.7866312861442566,z:-.07051534950733185},{x:.5836675763130188,y:.7658692598342896,z:-.07566110789775848},{x:.6709531545639038,y:.604898989200592,z:.005951565690338612},{x:.6029891967773438,y:.705652117729187,z:-.013388276100158691},{x:.6131622195243835,y:.7728396058082581,z:-.036248479038476944},{x:.6123163104057312,y:.7612020373344421,z:-.03264721855521202},{x:.6696187853813171,y:.744706928730011,z:.009673702530562878},{x:.5803102254867554,y:.7385968565940857,z:-.0689152330160141},{x:.6404349207878113,y:.5877999663352966,z:-.01929756999015808},{x:.6588467955589294,y:.5929454565048218,z:-.008487257175147533},{x:.6720337867736816,y:.530631422996521,z:.043437421321868896},{x:.584305465221405,y:.6099005341529846,z:-.030301367864012718},{x:.6034283638000488,y:.6217452883720398,z:-.001970183802768588},{x:.6460927724838257,y:.8608663082122803,z:.015541625209152699},{x:.6957815289497375,y:.8326103091239929,z:.13015234470367432},{x:.6043362617492676,y:.7861682772636414,z:-.030476901680231094},{x:.594293475151062,y:.7942103147506714,z:-.032218821346759796},{x:.6324057579040527,y:.8665139675140381,z:.014255806803703308},{x:.6296147704124451,y:.8667733669281006,z:.010388285852968693},{x:.663644552230835,y:.5798642635345459,z:-.0022301070857793093},{x:.6140630841255188,y:.7809288501739502,z:-.02835679054260254},{x:.615908145904541,y:.5921698212623596,z:-.026804860681295395},{x:.617181122303009,y:.5748661756515503,z:-.03060605563223362},{x:.6222207546234131,y:.49137672781944275,z:-.011151673272252083},{x:.6669357419013977,y:.5541607141494751,z:.017466170713305473},{x:.6182981729507446,y:.5320425629615784,z:-.021793590858578682},{x:.6760554313659668,y:.595052182674408,z:.017115700989961624},{x:.6801463961601257,y:.5800720453262329,z:.043127160519361496},{x:.5922210812568665,y:.8644017577171326,z:-.02662893570959568},{x:.6054555177688599,y:.8637874722480774,z:-.018363753333687782},{x:.6161889433860779,y:.8641164898872375,z:-.008808949030935764},{x:.6017249822616577,y:.7901403307914734,z:-.028126630932092667},{x:.631446123123169,y:.8664817810058594,z:.012112865224480629},{x:.6249198913574219,y:.8716511130332947,z:.003882825840264559},{x:.6281915903091431,y:.867301881313324,z:.009891441091895103},{x:.5986843109130859,y:.7813931703567505,z:-.050227612257003784},{x:.6126407384872437,y:.869275689125061,z:-.0031255714129656553},{x:.6027271151542664,y:.8711842894554138,z:-.009324162267148495},{x:.59088134765625,y:.8742044568061829,z:-.014608660712838173},{x:.5984604358673096,y:.9216185212135315,z:-.005981989670544863},{x:.5950398445129395,y:.8964707255363464,z:-.01703473925590515},{x:.5941568613052368,y:.8882410526275635,z:-.017784785479307175},{x:.5928806662559509,y:.8803883194923401,z:-.014153128489851952},{x:.5909661054611206,y:.8748103976249695,z:-.012609979137778282},{x:.6128016710281372,y:.8702545762062073,z:-.0022550546564161777},{x:.6150846481323242,y:.8726804256439209,z:-.00414019962772727},{x:.6173093914985657,y:.8770190477371216,z:-.005970994010567665},{x:.619335412979126,y:.8814800977706909,z:-.0036864024586975574},{x:.6292637586593628,y:.8314558267593384,z:-.007714875973761082},{x:.702275276184082,y:.7320667505264282,z:.1433621346950531},{x:.6204835176467896,y:.8689177632331848,z:.0044869170524179935},{x:.6223508715629578,y:.8704851269721985,z:.00352082890458405},{x:.590448260307312,y:.8029727935791016,z:-.03200828656554222},{x:.6097423434257507,y:.7933741211891174,z:-.018042555078864098},{x:.59229576587677,y:.7993767261505127,z:-.032564569264650345},{x:.6171364188194275,y:.7153720259666443,z:-.007672437466681004},{x:.6389747858047485,y:.726390540599823,z:-.002999067772179842},{x:.6151940226554871,y:.769412100315094,z:-.024427521973848343},{x:.6526776552200317,y:.505868136882782,z:.01412637997418642},{x:.6475822329521179,y:.5375454425811768,z:-.0033899128902703524},{x:.6433356404304504,y:.5714520215988159,z:-.017428796738386154},{x:.626949667930603,y:.8962116837501526,z:.005602736957371235},{x:.5868416428565979,y:.5829002261161804,z:-.03727729618549347},{x:.5877229571342468,y:.5345035791397095,z:-.032396964728832245},{x:.5887066125869751,y:.48655083775520325,z:-.025856535881757736},{x:.6507197618484497,y:.6612282991409302,z:.011114613153040409},{x:.6803066730499268,y:.677992045879364,z:.032125361263751984},{x:.5963194370269775,y:.6598632335662842,z:.002976928371936083},{x:.667536199092865,y:.6274255514144897,z:.015618261881172657},{x:.5930740833282471,y:.6940041780471802,z:-.019217798486351967},{x:.6053346395492554,y:.7676517963409424,z:-.050308309495449066},{x:.6934473514556885,y:.6884298920631409,z:.04794462397694588},{x:.6738007664680481,y:.6934011578559875,z:.020697161555290222},{x:.6588084697723389,y:.7033141851425171,z:.008462334051728249},{x:.6346072554588318,y:.7029502391815186,z:.001542167621664703},{x:.6157816648483276,y:.6966525912284851,z:-.002009218093007803},{x:.6015574336051941,y:.688928484916687,z:-.006588225718587637},{x:.5746836066246033,y:.6711069345474243,z:-.03597589209675789},{x:.6947521567344666,y:.7309479117393494,z:.046707939356565475},{x:.6759101152420044,y:.6249120831489563,z:.021654341369867325},{x:.5794773101806641,y:.7971615195274353,z:-.06339326500892639},{x:.6041849851608276,y:.727514922618866,z:-.017512541264295578},{x:.6968844532966614,y:.6440950036048889,z:.12727996706962585},{x:.5910853147506714,y:.679325520992279,z:-.009497715160250664},{x:.6157375574111938,y:.7695677280426025,z:-.010624290443956852},{x:.6606494784355164,y:.6410489678382874,z:.0208158977329731},{x:.6040687561035156,y:.7531470656394958,z:-.045887019485235214},{x:.7012156248092651,y:.780247151851654,z:.14028730988502502},{x:.595149576663971,y:.6527782678604126,z:.006308757700026035},{x:.5925500392913818,y:.7436665892601013,z:-.060151755809783936},{x:.6780198812484741,y:.8905693888664246,z:.0626060739159584},{x:.676746666431427,y:.9113880395889282,z:.08726003766059875},{x:.7030686140060425,y:.7312687635421753,z:.09529774636030197},{x:.688987135887146,y:.8588417172431946,z:.07752864807844162},{x:.6883691549301147,y:.6109960675239563,z:.06669612973928452},{x:.6358906030654907,y:.9702065587043762,z:.023120900616049767},{x:.5781539678573608,y:.8023634552955627,z:-.044763918966054916},{x:.6170316934585571,y:.7408350706100464,z:-.011375460773706436},{x:.688542366027832,y:.6516284346580505,z:.050206027925014496},{x:.6385149359703064,y:.6540714502334595,z:.006462941411882639},{x:.6279382109642029,y:.6563615798950195,z:.003062846139073372},{x:.6268895268440247,y:.8736732006072998,z:.00627936702221632},{x:.6944946050643921,y:.7709181308746338,z:.053824134171009064},{x:.614617109298706,y:1.0022112131118774,z:.02719894051551819},{x:.6493719220161438,y:.9665167927742004,z:.053563784807920456},{x:.6624587178230286,y:.943530797958374,z:.068605437874794},{x:.6162528991699219,y:.6558693051338196,z:.002187855076044798},{x:.6058168411254883,y:.654328465461731,z:.0036193584091961384},{x:.5987918972969055,y:.6536934971809387,z:.006134530063718557},{x:.6831037402153015,y:.6195642948150635,z:.03511790186166763},{x:.6062582731246948,y:.6356398463249207,z:.001280312892049551},{x:.6174948811531067,y:.62776118516922,z:-.0013642468256875873},{x:.6297246217727661,y:.6253792643547058,z:-.0007034156005829573},{x:.6407091617584229,y:.627578616142273,z:.0028144705574959517},{x:.6479622721672058,y:.6322650909423828,z:.00750273372977972},{x:.6915091276168823,y:.5990704298019409,z:.10270945727825165},{x:.6457163095474243,y:.6504453420639038,z:.010696077719330788},{x:.6164222955703735,y:.8231936097145081,z:-.016772059723734856},{x:.6042401194572449,y:.7830976843833923,z:-.03630910441279411},{x:.5922216773033142,y:.8228387236595154,z:-.029992375522851944},{x:.6646111011505127,y:.92097008228302,z:.050967294722795486},{x:.651232898235321,y:.9460107088088989,z:.038000158965587616},{x:.6140977144241333,y:.9882472157478333,z:.009882091544568539},{x:.6870781183242798,y:.8768675327301025,z:.10980932414531708},{x:.5986856818199158,y:.6456438899040222,z:.003999010659754276},{x:.585981547832489,y:.7034481763839722,z:-.0377722829580307},{x:.6342031359672546,y:.9867448806762695,z:.03786521404981613},{x:.7013950943946838,y:.776049017906189,z:.09598205983638763},{x:.6030206680297852,y:.8719133138656616,z:-.007931148633360863},{x:.6050592064857483,y:.8767156004905701,z:-.009791925549507141},{x:.6073468923568726,y:.8831382393836975,z:-.012361008673906326},{x:.6087977290153503,y:.890143632888794,z:-.01098148338496685},{x:.6147705316543579,y:.9110084772109985,z:-.0018823575228452682},{x:.622577965259552,y:.8670604825019836,z:.002609190298244357},{x:.6241236329078674,y:.8651344180107117,z:.0025534380692988634},{x:.6257084608078003,y:.8638408184051514,z:.0023300074972212315},{x:.639931321144104,y:.8449671268463135,z:.0038123116828501225},{x:.6810906529426575,y:.7856625318527222,z:.02717764675617218},{x:.583532452583313,y:.6811994910240173,z:-.026588857173919678},{x:.5855660438537598,y:.6393819451332092,z:-.004512844607234001},{x:.5932201743125916,y:.6398029327392578,z:.0008020466193556786},{x:.6200879812240601,y:.8683351874351501,z:.00417016725987196},{x:.6842559576034546,y:.8330534100532532,z:.050836317241191864},{x:.5754412412643433,y:.6418221592903137,z:-.022838059812784195},{x:.6232790350914001,y:.9295297265052795,z:.006339520215988159},{x:.5764067769050598,y:.694546639919281,z:-.04825803264975548},{x:.59778892993927,y:.7343927621841431,z:-.035004377365112305},{x:.6042810678482056,y:.9441440105438232,z:-.0010970570147037506},{x:.6496372222900391,y:.8869078159332275,z:.021036235615611076},{x:.6274012327194214,y:.7830310463905334,z:-.006658440921455622},{x:.637792706489563,y:.9104999899864197,z:.014290250837802887},{x:.6549934148788452,y:.7748609185218811,z:-.0006672973395325243},{x:.6404005289077759,y:.801220715045929,z:-.0026642554439604282},{x:.6671456694602966,y:.8045546412467957,z:.013180811889469624},{x:.6107483506202698,y:.9680658578872681,z:.001778992242179811},{x:.6060343980789185,y:.744587242603302,z:-.024382334202528},{x:.6602751612663269,y:.8998945355415344,z:.0344940721988678},{x:.6463775038719177,y:.9262562394142151,z:.02617623284459114},{x:.6579852104187012,y:.8602304458618164,z:.021586716175079346},{x:.6926165223121643,y:.8053340315818787,z:.061075080186128616},{x:.6724731922149658,y:.8594399690628052,z:.03457934781908989},{x:.6975721716880798,y:.8183245062828064,z:.09300774335861206},{x:.6512877941131592,y:.8258221745491028,z:.006324059329926968},{x:.594887375831604,y:.7148372530937195,z:-.026898479089140892},{x:.6017440557479858,y:.7773507833480835,z:-.05312420800328255},{x:.6096571683883667,y:.7806998491287231,z:-.037646256387233734},{x:.5952993035316467,y:.7654367685317993,z:-.06398405134677887},{x:.5950021147727966,y:.6201304793357849,z:-.009297547861933708},{x:.6165438890457153,y:.6052900552749634,z:-.012455573305487633},{x:.6362661719322205,y:.6015968918800354,z:-.011649220250546932},{x:.6522727608680725,y:.6046400666236877,z:-.005903332494199276},{x:.6625409722328186,y:.6128141283988953,z:.0030042496509850025},{x:.6688099503517151,y:.6457712054252625,z:.026322703808546066},{x:.7013440728187561,y:.6893666386604309,z:.08984331786632538},{x:.6608623266220093,y:.6749406456947327,z:.0172116681933403},{x:.6482325196266174,y:.6823726296424866,z:.008881398476660252},{x:.6313265562057495,y:.6842025518417358,z:.0031308617908507586},{x:.6147016286849976,y:.6809731721878052,z:.0007630771724507213},{x:.6018834114074707,y:.6755372285842896,z:-.0008834321051836014},{x:.5925027132034302,y:.670681357383728,z:-.001968748401850462},{x:.700127363204956,y:.6871103644371033,z:.13980500400066376},{x:.6095665693283081,y:.7853189706802368,z:-.03074747882783413},{x:.5880423784255981,y:.7229287028312683,z:-.04691500961780548},{x:.5930182337760925,y:.7811514139175415,z:-.06398335844278336},{x:.5867722034454346,y:.7922660112380981,z:-.05794971063733101},{x:.5933279991149902,y:.7842848896980286,z:-.05714067071676254},{x:.6063535809516907,y:.7920218706130981,z:-.02590685710310936},{x:.5839452743530273,y:.794978141784668,z:-.0615212507545948},{x:.5828126072883606,y:.8000800013542175,z:-.0449722595512867},{x:.5909603834152222,y:.6541213393211365,z:.003991890233010054},{x:.5852181911468506,y:.6602938771247864,z:-.004428438376635313},{x:.5825737714767456,y:.6651063561439514,z:-.014345290139317513},{x:.6517343521118164,y:.6362385153770447,z:.012151890434324741},{x:.6615052819252014,y:.6281577944755554,z:.0123682152479887},{x:.4856873154640198,y:.6568945646286011,z:.000720038078725338},{x:.49988406896591187,y:.6547410488128662,z:.0006949726957827806},{x:.48438939452171326,y:.6392973065376282,z:.000705525919329375},{x:.47143134474754333,y:.6589511632919312,z:.0006980331381782889},{x:.48704618215560913,y:.6752797961235046,z:.0006921177846379578},{x:.6243702173233032,y:.640461802482605,z:-6592126737814397e-20},{x:.6390967965126038,y:.6385173797607422,z:-.00016105435497593135},{x:.6230536699295044,y:.6224825382232666,z:-.00016136496560648084},{x:.6095397472381592,y:.641917884349823,z:-.0001803556369850412},{x:.6250996589660645,y:.6586247682571411,z:-.0001785515050869435}]],faceBlendshapes:[{categories:[{index:0,score:5187174338061595e-21,categoryName:"_neutral",displayName:""},{index:1,score:.24521504342556,categoryName:"browDownLeft",displayName:""},{index:2,score:.1987743377685547,categoryName:"browDownRight",displayName:""},{index:3,score:.013400448486208916,categoryName:"browInnerUp",displayName:""},{index:4,score:.012361560948193073,categoryName:"browOuterUpLeft",displayName:""},{index:5,score:.019305096939206123,categoryName:"browOuterUpRight",displayName:""},{index:6,score:28426356948330067e-21,categoryName:"cheekPuff",displayName:""},{index:7,score:34500112633395474e-23,categoryName:"cheekSquintLeft",displayName:""},{index:8,score:483789051486383e-21,categoryName:"cheekSquintRight",displayName:""},{index:9,score:.07650448381900787,categoryName:"eyeBlinkLeft",displayName:""},{index:10,score:.05070012807846069,categoryName:"eyeBlinkRight",displayName:""},{index:11,score:.13978900015354156,categoryName:"eyeLookDownLeft",displayName:""},{index:12,score:.14198613166809082,categoryName:"eyeLookDownRight",displayName:""},{index:13,score:.2177766114473343,categoryName:"eyeLookInLeft",displayName:""},{index:14,score:.014739357866346836,categoryName:"eyeLookInRight",displayName:""},{index:15,score:.02361512929201126,categoryName:"eyeLookOutLeft",displayName:""},{index:16,score:.19679604470729828,categoryName:"eyeLookOutRight",displayName:""},{index:17,score:.04874616861343384,categoryName:"eyeLookUpLeft",displayName:""},{index:18,score:.049392376095056534,categoryName:"eyeLookUpRight",displayName:""},{index:19,score:.34944331645965576,categoryName:"eyeSquintLeft",displayName:""},{index:20,score:.2939716875553131,categoryName:"eyeSquintRight",displayName:""},{index:21,score:.005955042317509651,categoryName:"eyeWideLeft",displayName:""},{index:22,score:.006776117719709873,categoryName:"eyeWideRight",displayName:""},{index:23,score:16942436559475027e-21,categoryName:"jawForward",displayName:""},{index:24,score:.0045165494084358215,categoryName:"jawLeft",displayName:""},{index:25,score:.07803940027952194,categoryName:"jawOpen",displayName:""},{index:26,score:2090057751047425e-20,categoryName:"jawRight",displayName:""},{index:27,score:.06032035872340202,categoryName:"mouthClose",displayName:""},{index:28,score:.00228882092051208,categoryName:"mouthDimpleLeft",displayName:""},{index:29,score:.00781762320548296,categoryName:"mouthDimpleRight",displayName:""},{index:30,score:.0017093931091949344,categoryName:"mouthFrownLeft",displayName:""},{index:31,score:.0019319106359034777,categoryName:"mouthFrownRight",displayName:""},{index:32,score:8485237776767462e-20,categoryName:"mouthFunnel",displayName:""},{index:33,score:.0009051355300471187,categoryName:"mouthLeft",displayName:""},{index:34,score:.0003630454302765429,categoryName:"mouthLowerDownLeft",displayName:""},{index:35,score:.00017601238505449146,categoryName:"mouthLowerDownRight",displayName:""},{index:36,score:.12865161895751953,categoryName:"mouthPressLeft",displayName:""},{index:37,score:.20137207210063934,categoryName:"mouthPressRight",displayName:""},{index:38,score:.0022203284315764904,categoryName:"mouthPucker",displayName:""},{index:39,score:.0009096377179957926,categoryName:"mouthRight",displayName:""},{index:40,score:.34189721941947937,categoryName:"mouthRollLower",displayName:""},{index:41,score:.11409689486026764,categoryName:"mouthRollUpper",displayName:""},{index:42,score:.17172536253929138,categoryName:"mouthShrugLower",displayName:""},{index:43,score:.004038424696773291,categoryName:"mouthShrugUpper",displayName:""},{index:44,score:.00023205230536404997,categoryName:"mouthSmileLeft",displayName:""},{index:45,score:.00019313619122840464,categoryName:"mouthSmileRight",displayName:""},{index:46,score:.0018571305554360151,categoryName:"mouthStretchLeft",displayName:""},{index:47,score:.0023813238367438316,categoryName:"mouthStretchRight",displayName:""},{index:48,score:24323100660694763e-21,categoryName:"mouthUpperUpLeft",displayName:""},{index:49,score:3161552012898028e-20,categoryName:"mouthUpperUpRight",displayName:""},{index:50,score:108198406678639e-21,categoryName:"noseSneerLeft",displayName:""},{index:51,score:12652527630052646e-22,categoryName:"noseSneerRight",displayName:""}],headIndex:-1,headName:""}],facialTransformationMatrixes:[{rows:4,columns:4,data:[.9947517514228821,.10230544209480286,.0013679931871592999,0,-.10230997204780579,.9947447776794434,.003816320328041911,0,-.000970348424743861,-.0039362297393381596,.9999914169311523,0,2.8888821601867676,-7.808934211730957,-30.52109146118164,1]}]}},BEe=E.createContext({}),CL={basePath:"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.8/wasm",options:{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",outputFaceBlendshapes:!0,outputFacialTransformationMatrixes:!0}};function kEe({basePath:t=CL.basePath,options:e=CL.options,children:n}){const r=JSON.stringify(e),i=vh(async()=>{const{FilesetResolver:s,FaceLandmarker:o}=await P4(()=>import("./chunk-42690cd5.js"),[]),a=await s.forVisionTasks(t);return o.createFromOptions(a,e)},[t,r]);return E.useEffect(()=>()=>{i==null||i.close(),G5([t,r])},[i,t,r]),E.createElement(BEe.Provider,{value:i},n)}function ML(t,e){if(e===h5)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===ph||e===Cg){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const r=n.count-2,i=[];if(n)if(e===ph)for(let o=1;o<=r;o++)i.push(n.getX(0)),i.push(n.getX(o)),i.push(n.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(n.getX(o)),i.push(n.getX(o+1)),i.push(n.getX(o+2))):(i.push(n.getX(o+2)),i.push(n.getX(o+1)),i.push(n.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}const FEe=parseInt(yl.replace(/\D+/g,""));class eE extends _r{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new VEe(n)}),this.register(function(n){return new JEe(n)}),this.register(function(n){return new QEe(n)}),this.register(function(n){return new ZEe(n)}),this.register(function(n){return new jEe(n)}),this.register(function(n){return new $Ee(n)}),this.register(function(n){return new XEe(n)}),this.register(function(n){return new YEe(n)}),this.register(function(n){return new GEe(n)}),this.register(function(n){return new qEe(n)}),this.register(function(n){return new WEe(n)}),this.register(function(n){return new KEe(n)}),this.register(function(n){return new zEe(n)}),this.register(function(n){return new e_e(n)}),this.register(function(n){return new t_e(n)})}load(e,n,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Si.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ir(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){n(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Si.decodeText(new Uint8Array(e.slice(0,4)))===EG){try{o[ir.KHR_BINARY_GLTF]=new n_e(e)}catch(u){i&&i(u);return}s=JSON.parse(o[ir.KHR_BINARY_GLTF].content)}else s=JSON.parse(Si.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new m_e(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(u){case ir.KHR_MATERIALS_UNLIT:o[u]=new HEe;break;case ir.KHR_DRACO_MESH_COMPRESSION:o[u]=new r_e(s,this.dracoLoader);break;case ir.KHR_TEXTURE_TRANSFORM:o[u]=new i_e;break;case ir.KHR_MESH_QUANTIZATION:o[u]=new s_e;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,n){const r=this;return new Promise(function(i,s){r.parse(e,n,i,s)})}}function UEe(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const ir={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class zEe{constructor(e){this.parser=e,this.name=ir.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let r=0,i=n.length;r<i;r++){const s=n[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,r="light:"+e;let i=n.cache.get(r);if(i)return i;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new bt(16777215);l.color!==void 0&&u.fromArray(l.color);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new om(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new sm(u),c.distance=f;break;case"spot":c=new im(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,bu(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),n.cache.add(r,i),i}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(n.cache,a,l)})}}class HEe{constructor(){this.name=ir.KHR_MATERIALS_UNLIT}getMaterialType(){return Or}extendParams(e,n,r){const i=[];e.color=new bt(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(i)}}class GEe{constructor(e){this.parser=e,this.name=ir.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class VEe{constructor(e){this.parser=e,this.name=ir.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new qe(a,a)}return Promise.all(s)}}class WEe{constructor(e){this.parser=e,this.name=ir.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class jEe{constructor(e){this.parser=e,this.name=ir.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new bt(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(n,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class $Ee{constructor(e){this.parser=e,this.name=ir.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class XEe{constructor(e){this.parser=e,this.name=ir.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new bt(a[0],a[1],a[2]),Promise.all(s)}}class YEe{constructor(e){this.parser=e,this.name=ir.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class qEe{constructor(e){this.parser=e,this.name=ir.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new bt(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(n,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class KEe{constructor(e){this.parser=e,this.name=ir.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Mi}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(n.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(n.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(n,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class JEe{constructor(e){this.parser=e,this.name=ir.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class QEe{constructor(e){this.parser=e,this.name=ir.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class ZEe{constructor(e){this.parser=e,this.name=ir.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class e_e{constructor(e){this.name=ir.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,r=n.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,f=i.byteStride,h=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,h,i.mode,i.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(d),u,f,h,i.mode,i.filter),d})})}else return null}}class t_e{constructor(e){this.name=ir.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=n.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==Ta.TRIANGLES&&c.mode!==Ta.TRIANGLE_STRIP&&c.mode!==Ta.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],h=c[0].count,d=[];for(const p of f){const m=new yt,g=new J,v=new kn,x=new J(1,1,1),y=new rm(p.geometry,p.material,h);for(let A=0;A<h;A++)l.TRANSLATION&&g.fromBufferAttribute(l.TRANSLATION,A),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,A),l.SCALE&&x.fromBufferAttribute(l.SCALE,A),y.setMatrixAt(A,m.compose(g,v,x));for(const A in l)A!=="TRANSLATION"&&A!=="ROTATION"&&A!=="SCALE"&&p.geometry.setAttribute(A,l[A]);hn.prototype.copy.call(y,p),this.parser.assignFinalMaterial(y),d.push(y)}return u.isGroup?(u.clear(),u.add(...d),u):d[0]}))}}const EG="glTF",U0=12,RL={JSON:1313821514,BIN:5130562};class n_e{constructor(e){this.name=ir.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,U0);if(this.header={magic:Si.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==EG)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-U0,i=new DataView(e,U0);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===RL.JSON){const l=new Uint8Array(e,U0+s,o);this.content=Si.decodeText(l)}else if(a===RL.BIN){const l=U0+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class r_e{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ir.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const f=t4[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=t4[u]||u.toLowerCase();if(o[u]!==void 0){const h=r.accessors[e.attributes[u]],d=Tp[h.componentType];c[f]=d.name,l[f]=h.normalized===!0}}return n.getDependency("bufferView",s).then(function(u){return new Promise(function(f){i.decodeDracoFile(u,function(h){for(const d in h.attributes){const p=h.attributes[d],m=l[d];m!==void 0&&(p.normalized=m)}f(h)},a,c)})})}}class i_e{constructor(){this.name=ir.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class s_e{constructor(){this.name=ir.KHR_MESH_QUANTIZATION}}class _G extends Sh{constructor(e,n,r,i){super(e,n,r,i)}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)n[o]=r[s+o];return n}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=i-n,f=(r-n)/u,h=f*f,d=h*f,p=e*c,m=p-c,g=-2*d+3*h,v=d-h,x=1-g,y=v-h+f;for(let A=0;A!==a;A++){const T=o[m+A+a],w=o[m+A+l]*u,M=o[p+A+a],C=o[p+A]*u;s[A]=x*T+y*w+g*M+v*C}return s}}const o_e=new kn;class a_e extends _G{interpolate_(e,n,r,i){const s=super.interpolate_(e,n,r,i);return o_e.fromArray(s).normalize().toArray(s),s}}const Ta={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Tp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},IL={9728:Ln,9729:Cn,9984:Ip,9985:wg,9986:Zf,9987:js},PL={33071:Er,33648:uh,10497:Rr},gT={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},t4={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...FEe>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},gu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},l_e={CUBICSPLINE:void 0,LINEAR:zc,STEP:dh},vT={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function c_e(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new _l({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:es})),t.DefaultMaterial}function Rf(t,e,n){for(const r in n.extensions)t[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function bu(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function u_e(t,e,n){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(r){const h=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):t.attributes.position;o.push(h)}if(i){const h=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):t.attributes.normal;a.push(h)}if(s){const h=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):t.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],h=c[2];return r&&(t.morphAttributes.position=u),i&&(t.morphAttributes.normal=f),s&&(t.morphAttributes.color=h),t.morphTargetsRelative=!0,t})}function f_e(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let r=0,i=n.length;r<i;r++)t.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function h_e(t){let e;const n=t.extensions&&t.extensions[ir.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+yT(n.attributes):e=t.indices+":"+yT(t.attributes)+":"+t.mode,t.targets!==void 0)for(let r=0,i=t.targets.length;r<i;r++)e+=":"+yT(t.targets[r]);return e}function yT(t){let e="";const n=Object.keys(t).sort();for(let r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function n4(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function d_e(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const p_e=new yt;class m_e{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new UEe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new Ki(this.options.manager):this.textureLoader=new B5(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ir(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};Rf(s,a,i),bu(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=n.length;i<s;i++){const o=n[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,r){if(e.refs[n]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[n]++,i}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const i=e(n[r]);if(i)return i}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let i=0;i<n.length;i++){const s=e(n[i]);s&&r.push(s)}return r}getDependency(e,n){const r=e+":"+n;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(n);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":i=this.loadAccessor(n);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":i=this.loadBuffer(n);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":i=this.loadSkin(n);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":i=this.loadCamera(n);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let n=this.cache.get(e);if(!n){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[ir.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Si.resolveURL(n.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(r){const i=n.byteLength||0,s=n.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const n=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=gT[i.type],a=Tp[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new Qt(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=gT[i.type],c=Tp[i.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,h=i.byteOffset||0,d=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,p=i.normalized===!0;let m,g;if(d&&d!==f){const v=Math.floor(h/d),x="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+v+":"+i.count;let y=n.cache.get(x);y||(m=new c(a,v*d,i.count*d/u),y=new nm(m,d/u),n.cache.add(x,y)),g=new po(y,l,h%d/u,p)}else a===null?m=new c(i.count*l):m=new c(a,h,i.count*l),g=new Qt(m,l,p);if(i.sparse!==void 0){const v=gT.SCALAR,x=Tp[i.sparse.indices.componentType],y=i.sparse.indices.byteOffset||0,A=i.sparse.values.byteOffset||0,T=new x(o[1],y,i.sparse.count*v),w=new c(o[2],A,i.sparse.count*l);a!==null&&(g=new Qt(g.array.slice(),g.itemSize,g.normalized));for(let M=0,C=T.length;M<C;M++){const S=T[M];if(g.setX(S,w[M*l]),l>=2&&g.setY(S,w[M*l+1]),l>=3&&g.setZ(S,w[M*l+2]),l>=4&&g.setW(S,w[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const n=this.json,r=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,r){const i=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=IL[h.magFilter]||Cn,u.minFilter=IL[h.minFilter]||js,u.wrapS=PL[h.wrapS]||Rr,u.wrapT=PL[h.wrapT]||Rr,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const h=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(h,d){let p=h;n.isImageBitmapLoader===!0&&(p=function(m){const g=new Vn(m);g.needsUpdate=!0,h(g)}),n.load(Si.resolveURL(f,s.path),p,void 0,d)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),f.userData.mimeType=o.mimeType||d_e(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,n,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[ir.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[ir.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[ir.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&("colorSpace"in o?o.colorSpace=i===3001?"srgb":"srgb-linear":o.encoding=i),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let r=e.material;const i=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new ul,Gr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new yi,Gr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return _l}loadMaterial(e){const n=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[ir.KHR_MATERIALS_UNLIT]){const f=i[ir.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,n))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new bt(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}f.baseColorTexture!==void 0&&c.push(n.assignTexture(a,"map",f.baseColorTexture,3001)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=gr);const u=s.alphaMode||vT.OPAQUE;if(u===vT.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===vT.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Or&&(c.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new qe(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return s.occlusionTexture!==void 0&&o!==Or&&(c.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Or&&(a.emissive=new bt().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Or&&c.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),bu(f,s),n.associations.set(f,{materials:e}),s.extensions&&Rf(i,f,s),f})}createUniqueName(e){const n=nr.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[ir.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return LL(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=h_e(c),f=i[u];if(f)o.push(f.promise);else{let h;c.extensions&&c.extensions[ir.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=LL(new on,c,n),i[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const n=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?c_e(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],g=o[d];let v;const x=c[d];if(g.mode===Ta.TRIANGLES||g.mode===Ta.TRIANGLE_STRIP||g.mode===Ta.TRIANGLE_FAN||g.mode===void 0)v=s.isSkinnedMesh===!0?new bh(m,x):new un(m,x),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),g.mode===Ta.TRIANGLE_STRIP?v.geometry=ML(v.geometry,Cg):g.mode===Ta.TRIANGLE_FAN&&(v.geometry=ML(v.geometry,ph));else if(g.mode===Ta.LINES)v=new $s(m,x);else if(g.mode===Ta.LINE_STRIP)v=new Fa(m,x);else if(g.mode===Ta.LINE_LOOP)v=new jE(m,x);else if(g.mode===Ta.POINTS)v=new Nc(m,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(v.geometry.morphAttributes).length>0&&f_e(v,s),v.name=n.createUniqueName(s.name||"mesh_"+e),bu(v,s),g.extensions&&Rf(i,v,g),n.assignFinalMaterial(v),f.push(v)}for(let d=0,p=f.length;d<p;d++)n.associations.set(f[d],{meshes:e,primitives:d});if(f.length===1)return s.extensions&&Rf(i,f[0],s),f[0];const h=new ki;s.extensions&&Rf(i,h,s),n.associations.set(h,{meshes:e});for(let d=0,p=f.length;d<p;d++)h.add(f[d]);return h})}loadCamera(e){let n;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new mr(si.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(n=new Bi(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),bu(n,r),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],r=[];for(let i=0,s=n.joints.length;i<s;i++)r.push(this._loadNodeShallow(n.joints[i]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const f=o[c];if(f){a.push(f);const h=new yt;s!==null&&h.fromArray(s.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new Xu(a,l)})}loadAnimation(e){const r=this.json.animations[e],i=r.name?r.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let u=0,f=r.channels.length;u<f;u++){const h=r.channels[u],d=r.samplers[h.sampler],p=h.target,m=p.node,g=r.parameters!==void 0?r.parameters[d.input]:d.input,v=r.parameters!==void 0?r.parameters[d.output]:d.output;p.node!==void 0&&(s.push(this.getDependency("node",m)),o.push(this.getDependency("accessor",g)),a.push(this.getDependency("accessor",v)),l.push(d),c.push(p))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(u){const f=u[0],h=u[1],d=u[2],p=u[3],m=u[4],g=[];for(let v=0,x=f.length;v<x;v++){const y=f[v],A=h[v],T=d[v],w=p[v],M=m[v];if(y===void 0)continue;y.updateMatrix();let C;switch(gu[M.path]){case gu.weights:C=Vu;break;case gu.rotation:C=oa;break;case gu.position:case gu.scale:default:C=aa;break}const S=y.name?y.name:y.uuid,R=w.interpolation!==void 0?l_e[w.interpolation]:zc,O=[];gu[M.path]===gu.weights?y.traverse(function(B){B.morphTargetInfluences&&O.push(B.name?B.name:B.uuid)}):O.push(S);let L=T.array;if(T.normalized){const B=n4(L.constructor),N=new Float32Array(L.length);for(let $=0,U=L.length;$<U;$++)N[$]=L[$]*B;L=N}for(let B=0,N=O.length;B<N;B++){const $=new C(O[B]+"."+gu[M.path],A.array,L,R);w.interpolation==="CUBICSPLINE"&&($.createInterpolant=function(Q){const Y=this instanceof oa?a_e:_G;return new Y(this.times,this.values,this.getValueSize()/3,Q)},$.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),g.push($)}}return new Ua(i,void 0,g)})}createNodeMesh(e){const n=this.json,r=this,i=n.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const n=this.json,r=this,i=n.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],f=c[1],h=c[2];h!==null&&u.traverse(function(d){d.isSkinnedMesh&&d.bind(h,p_e)});for(let d=0,p=f.length;d<p;d++)u.add(f[d]);return u})}_loadNodeShallow(e){const n=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new Ah:c.length>1?u=new ki:c.length===1?u=c[0]:u=new hn,u!==c[0])for(let f=0,h=c.length;f<h;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=o),bu(u,s),s.extensions&&Rf(r,u,s),s.matrix!==void 0){const f=new yt;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const n=this.extensions,r=this.json.scenes[e],i=this,s=new ki;r.name&&(s.name=i.createUniqueName(r.name)),bu(s,r),r.extensions&&Rf(n,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[h,d]of i.associations)(h instanceof Gr||h instanceof Vn)&&f.set(h,d);return u.traverse(h=>{const d=i.associations.get(h);d!=null&&f.set(h,d)}),f};return i.associations=c(s),s})}}function g_e(t,e,n){const r=e.attributes,i=new Yn;if(r.POSITION!==void 0){const a=n.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new J(l[0],l[1],l[2]),new J(c[0],c[1],c[2])),a.normalized){const u=n4(Tp[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new J,l=new J;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const h=n.json.accessors[f.POSITION],d=h.min,p=h.max;if(d!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(p[2]))),h.normalized){const m=n4(Tp[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}t.boundingBox=i;const o=new Fr;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=o}function LL(t,e,n){const r=e.attributes,i=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in r){const a=t4[o]||o.toLowerCase();a in t.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});i.push(o)}return bu(t,e),g_e(t,e,n),Promise.all(i).then(function(){return e.targets!==void 0?u_e(t,e.targets,n):t})}var v_e=Object.defineProperty,y_e=(t,e,n)=>e in t?v_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pi=(t,e,n)=>(y_e(t,typeof e!="symbol"?e+"":e,n),n);const _i={Handedness:{NONE:"none",LEFT:"left",RIGHT:"right"},ComponentState:{DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"},ComponentProperty:{BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"},ComponentType:{TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"},ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:{TRANSFORM:"transform",VISIBILITY:"visibility"}};async function bG(t){const e=await fetch(t);if(e.ok)return e.json();throw new Error(e.statusText)}async function x_e(t){if(!t)throw new Error("No basePath supplied");return await bG(`${t}/profilesList.json`)}async function E_e(t,e,n=null,r=!0){if(!t)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No basePath supplied");const i=await x_e(e);let s;if(t.profiles.some(l=>{const c=i[l];return c&&(s={profileId:l,profilePath:`${e}/${c.path}`,deprecated:!!c.deprecated}),!!s}),!s){if(!n)throw new Error("No matching profile name found");const l=i[n];if(!l)throw new Error(`No matching profile name found and default profile "${n}" missing.`);s={profileId:n,profilePath:`${e}/${l.path}`,deprecated:!!l.deprecated}}const o=await bG(s.profilePath);let a;if(r){let l;if(t.handedness==="any"?l=o.layouts[Object.keys(o.layouts)[0]]:l=o.layouts[t.handedness],!l)throw new Error(`No matching handedness, ${t.handedness}, in profile ${s.profileId}`);l.assetPath&&(a=s.profilePath.replace("profile.json",l.assetPath))}return{profile:o,assetPath:a}}const __e={xAxis:0,yAxis:0,button:0,state:_i.ComponentState.DEFAULT};function b_e(t=0,e=0){let n=t,r=e;if(Math.sqrt(t*t+e*e)>1){const o=Math.atan2(e,t);n=Math.cos(o),r=Math.sin(o)}return{normalizedXAxis:n*.5+.5,normalizedYAxis:r*.5+.5}}class A_e{constructor(e){pi(this,"value"),pi(this,"componentProperty"),pi(this,"states"),pi(this,"valueNodeName"),pi(this,"valueNodeProperty"),pi(this,"minNodeName"),pi(this,"maxNodeName"),pi(this,"valueNode"),pi(this,"minNode"),pi(this,"maxNode"),this.componentProperty=e.componentProperty,this.states=e.states,this.valueNodeName=e.valueNodeName,this.valueNodeProperty=e.valueNodeProperty,this.valueNodeProperty===_i.VisualResponseProperty.TRANSFORM&&(this.minNodeName=e.minNodeName,this.maxNodeName=e.maxNodeName),this.value=0,this.updateFromComponent(__e)}updateFromComponent({xAxis:e,yAxis:n,button:r,state:i}){const{normalizedXAxis:s,normalizedYAxis:o}=b_e(e,n);switch(this.componentProperty){case _i.ComponentProperty.X_AXIS:this.value=this.states.includes(i)?s:.5;break;case _i.ComponentProperty.Y_AXIS:this.value=this.states.includes(i)?o:.5;break;case _i.ComponentProperty.BUTTON:this.value=this.states.includes(i)&&r?r:0;break;case _i.ComponentProperty.STATE:this.valueNodeProperty===_i.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(i):this.value=this.states.includes(i)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class T_e{constructor(e,n){if(pi(this,"id"),pi(this,"values"),pi(this,"type"),pi(this,"gamepadIndices"),pi(this,"rootNodeName"),pi(this,"visualResponses"),pi(this,"touchPointNodeName"),pi(this,"touchPointNode"),!e||!n||!n.visualResponses||!n.gamepadIndices||Object.keys(n.gamepadIndices).length===0)throw new Error("Invalid arguments supplied");this.id=e,this.type=n.type,this.rootNodeName=n.rootNodeName,this.touchPointNodeName=n.touchPointNodeName,this.visualResponses={},Object.keys(n.visualResponses).forEach(r=>{const i=new A_e(n.visualResponses[r]);this.visualResponses[r]=i}),this.gamepadIndices=Object.assign({},n.gamepadIndices),this.values={state:_i.ComponentState.DEFAULT,button:this.gamepadIndices.button!==void 0?0:void 0,xAxis:this.gamepadIndices.xAxis!==void 0?0:void 0,yAxis:this.gamepadIndices.yAxis!==void 0?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(e){if(this.values.state=_i.ComponentState.DEFAULT,this.gamepadIndices.button!==void 0&&e.buttons.length>this.gamepadIndices.button){const n=e.buttons[this.gamepadIndices.button];this.values.button=n.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,n.pressed||this.values.button===1?this.values.state=_i.ComponentState.PRESSED:(n.touched||this.values.button>_i.ButtonTouchThreshold)&&(this.values.state=_i.ComponentState.TOUCHED)}this.gamepadIndices.xAxis!==void 0&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===_i.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>_i.AxisTouchThreshold&&(this.values.state=_i.ComponentState.TOUCHED)),this.gamepadIndices.yAxis!==void 0&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===_i.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>_i.AxisTouchThreshold&&(this.values.state=_i.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(n=>{n.updateFromComponent(this.values)})}}class w_e{constructor(e,n,r){if(pi(this,"xrInputSource"),pi(this,"assetUrl"),pi(this,"layoutDescription"),pi(this,"id"),pi(this,"components"),!e)throw new Error("No xrInputSource supplied");if(!n)throw new Error("No profile supplied");if(!n.layouts[e.handedness])throw new Error("No layout for "+e.handedness+" handedness");this.xrInputSource=e,this.assetUrl=r,this.id=n.profileId,this.layoutDescription=n.layouts[e.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(i=>{const s=this.layoutDescription.components[i];this.components[i]=new T_e(i,s)}),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const e=[];return Object.values(this.components).forEach(n=>{e.push(n.data)}),e}updateFromGamepad(){Object.values(this.components).forEach(e=>{e.updateFromGamepad(this.xrInputSource.gamepad)})}}let NL=class extends Bg{constructor(e){super(e)}parse(e){function n(U){switch(U.image_type){case h:case m:(U.colormap_length>256||U.colormap_size!==24||U.colormap_type!==1)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case d:case p:case g:case v:U.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case f:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',U.image_type)}(U.width<=0||U.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),U.pixel_size!==8&&U.pixel_size!==16&&U.pixel_size!==24&&U.pixel_size!==32&&console.error('THREE.TGALoader: Invalid pixel size "%s".',U.pixel_size)}function r(U,Q,Y,ee,ne){let P,se;const re=Y.pixel_size>>3,Z=Y.width*Y.height*re;if(Q&&(se=ne.subarray(ee,ee+=Y.colormap_length*(Y.colormap_size>>3))),U){P=new Uint8Array(Z);let X,W,K,ge=0;const Se=new Uint8Array(re);for(;ge<Z;)if(X=ne[ee++],W=(X&127)+1,X&128){for(K=0;K<re;++K)Se[K]=ne[ee++];for(K=0;K<W;++K)P.set(Se,ge+K*re);ge+=re*W}else{for(W*=re,K=0;K<W;++K)P[ge+K]=ne[ee++];ge+=W}}else P=ne.subarray(ee,ee+=Q?Y.width*Y.height:Z);return{pixel_data:P,palettes:se}}function i(U,Q,Y,ee,ne,P,se,re,Z){const X=Z;let W,K=0,ge,Se;const xe=R.width;for(Se=Q;Se!==ee;Se+=Y)for(ge=ne;ge!==se;ge+=P,K++)W=re[K],U[(ge+xe*Se)*4+3]=255,U[(ge+xe*Se)*4+2]=X[W*3+0],U[(ge+xe*Se)*4+1]=X[W*3+1],U[(ge+xe*Se)*4+0]=X[W*3+2];return U}function s(U,Q,Y,ee,ne,P,se,re){let Z,X=0,W,K;const ge=R.width;for(K=Q;K!==ee;K+=Y)for(W=ne;W!==se;W+=P,X+=2)Z=re[X+0]+(re[X+1]<<8),U[(W+ge*K)*4+0]=(Z&31744)>>7,U[(W+ge*K)*4+1]=(Z&992)>>2,U[(W+ge*K)*4+2]=(Z&31)>>3,U[(W+ge*K)*4+3]=Z&32768?0:255;return U}function o(U,Q,Y,ee,ne,P,se,re){let Z=0,X,W;const K=R.width;for(W=Q;W!==ee;W+=Y)for(X=ne;X!==se;X+=P,Z+=3)U[(X+K*W)*4+3]=255,U[(X+K*W)*4+2]=re[Z+0],U[(X+K*W)*4+1]=re[Z+1],U[(X+K*W)*4+0]=re[Z+2];return U}function a(U,Q,Y,ee,ne,P,se,re){let Z=0,X,W;const K=R.width;for(W=Q;W!==ee;W+=Y)for(X=ne;X!==se;X+=P,Z+=4)U[(X+K*W)*4+2]=re[Z+0],U[(X+K*W)*4+1]=re[Z+1],U[(X+K*W)*4+0]=re[Z+2],U[(X+K*W)*4+3]=re[Z+3];return U}function l(U,Q,Y,ee,ne,P,se,re){let Z,X=0,W,K;const ge=R.width;for(K=Q;K!==ee;K+=Y)for(W=ne;W!==se;W+=P,X++)Z=re[X],U[(W+ge*K)*4+0]=Z,U[(W+ge*K)*4+1]=Z,U[(W+ge*K)*4+2]=Z,U[(W+ge*K)*4+3]=255;return U}function c(U,Q,Y,ee,ne,P,se,re){let Z=0,X,W;const K=R.width;for(W=Q;W!==ee;W+=Y)for(X=ne;X!==se;X+=P,Z+=2)U[(X+K*W)*4+0]=re[Z+0],U[(X+K*W)*4+1]=re[Z+0],U[(X+K*W)*4+2]=re[Z+0],U[(X+K*W)*4+3]=re[Z+1];return U}function u(U,Q,Y,ee,ne){let P,se,re,Z,X,W;switch((R.flags&x)>>y){default:case w:P=0,re=1,X=Q,se=0,Z=1,W=Y;break;case A:P=0,re=1,X=Q,se=Y-1,Z=-1,W=-1;break;case M:P=Q-1,re=-1,X=-1,se=0,Z=1,W=Y;break;case T:P=Q-1,re=-1,X=-1,se=Y-1,Z=-1,W=-1;break}if(B)switch(R.pixel_size){case 8:l(U,se,Z,W,P,re,X,ee);break;case 16:c(U,se,Z,W,P,re,X,ee);break;default:console.error("THREE.TGALoader: Format not supported.");break}else switch(R.pixel_size){case 8:i(U,se,Z,W,P,re,X,ee,ne);break;case 16:s(U,se,Z,W,P,re,X,ee);break;case 24:o(U,se,Z,W,P,re,X,ee);break;case 32:a(U,se,Z,W,P,re,X,ee);break;default:console.error("THREE.TGALoader: Format not supported.");break}return U}const f=0,h=1,d=2,p=3,m=9,g=10,v=11,x=48,y=4,A=0,T=1,w=2,M=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let C=0;const S=new Uint8Array(e),R={id_length:S[C++],colormap_type:S[C++],image_type:S[C++],colormap_index:S[C++]|S[C++]<<8,colormap_length:S[C++]|S[C++]<<8,colormap_size:S[C++],origin:[S[C++]|S[C++]<<8,S[C++]|S[C++]<<8],width:S[C++]|S[C++]<<8,height:S[C++]|S[C++]<<8,pixel_size:S[C++],flags:S[C++]};n(R),R.id_length+C>e.length&&console.error("THREE.TGALoader: No data."),C+=R.id_length;let O=!1,L=!1,B=!1;switch(R.image_type){case m:O=!0,L=!0;break;case h:L=!0;break;case g:O=!0;break;case d:break;case v:O=!0,B=!0;break;case p:B=!0;break}const N=new Uint8Array(R.width*R.height*4),$=r(O,L,R,C,S);return u(N,R.width,R.height,$.pixel_data,$.palettes),{data:N,width:R.width,height:R.height,flipY:!0,generateMipmaps:!0,minFilter:js}}},S_e=class extends _r{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Ir(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(a))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){function n(c){const u=new DataView(c),f=32/8*3+32/8*3*3+16/8,h=u.getUint32(80,!0);if(80+32/8+h*f===u.byteLength)return!0;const p=[115,111,108,105,100];for(let m=0;m<5;m++)if(r(p,u,m))return!1;return!0}function r(c,u,f){for(let h=0,d=c.length;h<d;h++)if(c[h]!==u.getUint8(f+h,!1))return!1;return!0}function i(c){const u=new DataView(c),f=u.getUint32(80,!0);let h,d,p,m=!1,g,v,x,y,A;for(let R=0;R<80-10;R++)u.getUint32(R,!1)==1129270351&&u.getUint8(R+4)==82&&u.getUint8(R+5)==61&&(m=!0,g=new Float32Array(f*3*3),v=u.getUint8(R+6)/255,x=u.getUint8(R+7)/255,y=u.getUint8(R+8)/255,A=u.getUint8(R+9)/255);const T=84,w=12*4+2,M=new on,C=new Float32Array(f*3*3),S=new Float32Array(f*3*3);for(let R=0;R<f;R++){const O=T+R*w,L=u.getFloat32(O,!0),B=u.getFloat32(O+4,!0),N=u.getFloat32(O+8,!0);if(m){const $=u.getUint16(O+48,!0);$&32768?(h=v,d=x,p=y):(h=($&31)/31,d=($>>5&31)/31,p=($>>10&31)/31)}for(let $=1;$<=3;$++){const U=O+$*12,Q=R*3*3+($-1)*3;C[Q]=u.getFloat32(U,!0),C[Q+1]=u.getFloat32(U+4,!0),C[Q+2]=u.getFloat32(U+8,!0),S[Q]=L,S[Q+1]=B,S[Q+2]=N,m&&(g[Q]=h,g[Q+1]=d,g[Q+2]=p)}}return M.setAttribute("position",new Qt(C,3)),M.setAttribute("normal",new Qt(S,3)),m&&(M.setAttribute("color",new Qt(g,3)),M.hasColors=!0,M.alpha=A),M}function s(c){const u=new on,f=/solid([\s\S]*?)endsolid/g,h=/facet([\s\S]*?)endfacet/g;let d=0;const p=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,m=new RegExp("vertex"+p+p+p,"g"),g=new RegExp("normal"+p+p+p,"g"),v=[],x=[],y=new J;let A,T=0,w=0,M=0;for(;(A=f.exec(c))!==null;){w=M;const C=A[0];for(;(A=h.exec(C))!==null;){let O=0,L=0;const B=A[0];for(;(A=g.exec(B))!==null;)y.x=parseFloat(A[1]),y.y=parseFloat(A[2]),y.z=parseFloat(A[3]),L++;for(;(A=m.exec(B))!==null;)v.push(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3])),x.push(y.x,y.y,y.z),O++,M++;L!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+d),O!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+d),d++}const S=w,R=M-w;u.addGroup(S,R,T),T++}return u.setAttribute("position",new Ot(v,3)),u.setAttribute("normal",new Ot(x,3)),u}function o(c){return typeof c!="string"?Si.decodeText(new Uint8Array(c)):c}function a(c){if(typeof c=="string"){const u=new Uint8Array(c.length);for(let f=0;f<c.length;f++)u[f]=c.charCodeAt(f)&255;return u.buffer||u}else return c}const l=a(e);return n(l)?i(l):s(o(e))}};class C_e extends _r{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?Si.extractUrlBase(e):this.path,a=new Ir(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{n(s.parse(l,o))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,n){const r=e.split(`
`);let i={};const s=/\s+/,o={};for(let l=0;l<r.length;l++){let c=r[l];if(c=c.trim(),c.length===0||c.charAt(0)==="#")continue;const u=c.indexOf(" ");let f=u>=0?c.substring(0,u):c;f=f.toLowerCase();let h=u>=0?c.substring(u+1):"";if(h=h.trim(),f==="newmtl")i={name:h},o[h]=i;else if(f==="ka"||f==="kd"||f==="ks"||f==="ke"){const d=h.split(s,3);i[f]=[parseFloat(d[0]),parseFloat(d[1]),parseFloat(d[2])]}else i[f]=h}const a=new M_e(this.resourcePath||n,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(o),a}}class M_e{constructor(e="",n={}){this.baseUrl=e,this.options=n,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:es,this.wrap=this.options.wrap!==void 0?this.options.wrap:Rr}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const n={};for(const r in e){const i=e[r],s={};n[r]=s;for(const o in i){let a=!0,l=i[o];const c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&l[0]===0&&l[1]===0&&l[2]===0&&(a=!1);break}a&&(s[c]=l)}}return n}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const n in this.materialsInfo)this.materialsArray[e]=this.create(n),this.nameLookup[n]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const n=this,r=this.materialsInfo[e],i={name:e,side:this.side};function s(a,l){return typeof l!="string"||l===""?"":/^https?:\/\//i.test(l)?l:a+l}function o(a,l){if(i[a])return;const c=n.getTextureParams(l,i),u=n.loadTexture(s(n.baseUrl,c.url));u.repeat.copy(c.scale),u.offset.copy(c.offset),u.wrapS=n.wrap,u.wrapT=n.wrap,i[a]=u}for(const a in r){const l=r[a];let c;if(l!=="")switch(a.toLowerCase()){case"kd":i.color=new bt().fromArray(l);break;case"ks":i.specular=new bt().fromArray(l);break;case"ke":i.emissive=new bt().fromArray(l);break;case"map_kd":o("map",l);break;case"map_ks":o("specularMap",l);break;case"map_ke":o("emissiveMap",l);break;case"norm":o("normalMap",l);break;case"map_bump":case"bump":o("bumpMap",l);break;case"map_d":o("alphaMap",l),i.transparent=!0;break;case"ns":i.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(i.opacity=c,i.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(i.opacity=1-c,i.transparent=!0);break}}return this.materials[e]=new Ba(i),this.materials[e]}getTextureParams(e,n){const r={scale:new qe(1,1),offset:new qe(0,0)},i=e.split(/\s+/);let s;return s=i.indexOf("-bm"),s>=0&&(n.bumpScale=parseFloat(i[s+1]),i.splice(s,2)),s=i.indexOf("-s"),s>=0&&(r.scale.set(parseFloat(i[s+1]),parseFloat(i[s+2])),i.splice(s,4)),s=i.indexOf("-o"),s>=0&&(r.offset.set(parseFloat(i[s+1]),parseFloat(i[s+2])),i.splice(s,4)),r.url=i.join(" ").trim(),r}loadTexture(e,n,r,i,s){const o=this.manager!==void 0?this.manager:l_;let a=o.getHandler(e);a===null&&(a=new Ki(o)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const l=a.load(e,r,i,s);return n!==void 0&&(l.mapping=n),l}}let R_e=class extends _r{constructor(e){super(e)}load(e,n,r,i){const s=this,o=s.path===""?Si.extractUrlBase(e):s.path,a=new Ir(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{n(s.parse(l,o))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e,n){function r(de,D){const G=[],j=de.childNodes;for(let V=0,le=j.length;V<le;V++){const Ne=j[V];Ne.nodeName===D&&G.push(Ne)}return G}function i(de){if(de.length===0)return[];const D=de.trim().split(/\s+/),G=new Array(D.length);for(let j=0,V=D.length;j<V;j++)G[j]=D[j];return G}function s(de){if(de.length===0)return[];const D=de.trim().split(/\s+/),G=new Array(D.length);for(let j=0,V=D.length;j<V;j++)G[j]=parseFloat(D[j]);return G}function o(de){if(de.length===0)return[];const D=de.trim().split(/\s+/),G=new Array(D.length);for(let j=0,V=D.length;j<V;j++)G[j]=parseInt(D[j]);return G}function a(de){return de.substring(1)}function l(){return"three_default_"+xo++}function c(de){return Object.keys(de).length===0}function u(de){return{unit:f(r(de,"unit")[0]),upAxis:h(r(de,"up_axis")[0])}}function f(de){return de!==void 0&&de.hasAttribute("meter")===!0?parseFloat(de.getAttribute("meter")):1}function h(de){return de!==void 0?de.textContent:"Y_UP"}function d(de,D,G,j){const V=r(de,D)[0];if(V!==void 0){const le=r(V,G);for(let Ne=0;Ne<le.length;Ne++)j(le[Ne])}}function p(de,D){for(const G in de){const j=de[G];j.build=D(de[G])}}function m(de,D){return de.build!==void 0||(de.build=D(de)),de.build}function g(de){const D={sources:{},samplers:{},channels:{}};let G=!1;for(let j=0,V=de.childNodes.length;j<V;j++){const le=de.childNodes[j];if(le.nodeType!==1)continue;let Ne;switch(le.nodeName){case"source":Ne=le.getAttribute("id"),D.sources[Ne]=Be(le);break;case"sampler":Ne=le.getAttribute("id"),D.samplers[Ne]=v(le);break;case"channel":Ne=le.getAttribute("target"),D.channels[Ne]=x(le);break;case"animation":g(le),G=!0;break;default:console.log(le)}}G===!1&&(cn.animations[de.getAttribute("id")||si.generateUUID()]=D)}function v(de){const D={inputs:{}};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"input":const le=a(V.getAttribute("source")),Ne=V.getAttribute("semantic");D.inputs[Ne]=le;break}}return D}function x(de){const D={};let j=de.getAttribute("target").split("/");const V=j.shift();let le=j.shift();const Ne=le.indexOf("(")!==-1,ze=le.indexOf(".")!==-1;if(ze)j=le.split("."),le=j.shift(),D.member=j.shift();else if(Ne){const Et=le.split("(");le=Et.shift();for(let ct=0;ct<Et.length;ct++)Et[ct]=parseInt(Et[ct].replace(/\)/,""));D.indices=Et}return D.id=V,D.sid=le,D.arraySyntax=Ne,D.memberSyntax=ze,D.sampler=a(de.getAttribute("source")),D}function y(de){const D=[],G=de.channels,j=de.samplers,V=de.sources;for(const le in G)if(G.hasOwnProperty(le)){const Ne=G[le],ze=j[Ne.sampler],Et=ze.inputs.INPUT,ct=ze.inputs.OUTPUT,ut=V[Et],mt=V[ct],ft=T(Ne,ut,mt);R(ft,D)}return D}function A(de){return m(cn.animations[de],y)}function T(de,D,G){const j=cn.nodes[de.id],V=Dt(j.id),le=j.transforms[de.sid],Ne=j.matrix.clone().transpose();let ze,Et,ct,ut,mt,ft;const vt={};switch(le){case"matrix":for(ct=0,ut=D.array.length;ct<ut;ct++)if(ze=D.array[ct],Et=ct*G.stride,vt[ze]===void 0&&(vt[ze]={}),de.arraySyntax===!0){const kt=G.array[Et],dn=de.indices[0]+4*de.indices[1];vt[ze][dn]=kt}else for(mt=0,ft=G.stride;mt<ft;mt++)vt[ze][mt]=G.array[Et+mt];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',le);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',le);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',le);break}const Mt=w(vt,Ne);return{name:V.uuid,keyframes:Mt}}function w(de,D){const G=[];for(const V in de)G.push({time:parseFloat(V),value:de[V]});G.sort(j);for(let V=0;V<16;V++)O(G,V,D.elements[V]);return G;function j(V,le){return V.time-le.time}}const M=new J,C=new J,S=new kn;function R(de,D){const G=de.keyframes,j=de.name,V=[],le=[],Ne=[],ze=[];for(let Et=0,ct=G.length;Et<ct;Et++){const ut=G[Et],mt=ut.time,ft=ut.value;ot.fromArray(ft).transpose(),ot.decompose(M,S,C),V.push(mt),le.push(M.x,M.y,M.z),Ne.push(S.x,S.y,S.z,S.w),ze.push(C.x,C.y,C.z)}return le.length>0&&D.push(new aa(j+".position",V,le)),Ne.length>0&&D.push(new oa(j+".quaternion",V,Ne)),ze.length>0&&D.push(new aa(j+".scale",V,ze)),D}function O(de,D,G){let j,V=!0,le,Ne;for(le=0,Ne=de.length;le<Ne;le++)j=de[le],j.value[D]===void 0?j.value[D]=null:V=!1;if(V===!0)for(le=0,Ne=de.length;le<Ne;le++)j=de[le],j.value[D]=G;else L(de,D)}function L(de,D){let G,j;for(let V=0,le=de.length;V<le;V++){const Ne=de[V];if(Ne.value[D]===null){if(G=B(de,V,D),j=N(de,V,D),G===null){Ne.value[D]=j.value[D];continue}if(j===null){Ne.value[D]=G.value[D];continue}$(Ne,G,j,D)}}}function B(de,D,G){for(;D>=0;){const j=de[D];if(j.value[G]!==null)return j;D--}return null}function N(de,D,G){for(;D<de.length;){const j=de[D];if(j.value[G]!==null)return j;D++}return null}function $(de,D,G,j){if(G.time-D.time===0){de.value[j]=D.value[j];return}de.value[j]=(de.time-D.time)*(G.value[j]-D.value[j])/(G.time-D.time)+D.value[j]}function U(de){const D={name:de.getAttribute("id")||"default",start:parseFloat(de.getAttribute("start")||0),end:parseFloat(de.getAttribute("end")||0),animations:[]};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"instance_animation":D.animations.push(a(V.getAttribute("url")));break}}cn.clips[de.getAttribute("id")]=D}function Q(de){const D=[],G=de.name,j=de.end-de.start||-1,V=de.animations;for(let le=0,Ne=V.length;le<Ne;le++){const ze=A(V[le]);for(let Et=0,ct=ze.length;Et<ct;Et++)D.push(ze[Et])}return new Ua(G,j,D)}function Y(de){return m(cn.clips[de],Q)}function ee(de){const D={};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"skin":D.id=a(V.getAttribute("source")),D.skin=ne(V);break;case"morph":D.id=a(V.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}cn.controllers[de.getAttribute("id")]=D}function ne(de){const D={sources:{}};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"bind_shape_matrix":D.bindShapeMatrix=s(V.textContent);break;case"source":const le=V.getAttribute("id");D.sources[le]=Be(V);break;case"joints":D.joints=P(V);break;case"vertex_weights":D.vertexWeights=se(V);break}}return D}function P(de){const D={inputs:{}};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"input":const le=V.getAttribute("semantic"),Ne=a(V.getAttribute("source"));D.inputs[le]=Ne;break}}return D}function se(de){const D={inputs:{}};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"input":const le=V.getAttribute("semantic"),Ne=a(V.getAttribute("source")),ze=parseInt(V.getAttribute("offset"));D.inputs[le]={id:Ne,offset:ze};break;case"vcount":D.vcount=o(V.textContent);break;case"v":D.v=o(V.textContent);break}}return D}function re(de){const D={id:de.id},G=cn.geometries[D.id];return de.skin!==void 0&&(D.skin=Z(de.skin),G.sources.skinIndices=D.skin.indices,G.sources.skinWeights=D.skin.weights),D}function Z(de){const G={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},j=de.sources,V=de.vertexWeights,le=V.vcount,Ne=V.v,ze=V.inputs.JOINT.offset,Et=V.inputs.WEIGHT.offset,ct=de.sources[de.joints.inputs.JOINT],ut=de.sources[de.joints.inputs.INV_BIND_MATRIX],mt=j[V.inputs.WEIGHT.id].array;let ft=0,vt,Mt,Nt;for(vt=0,Nt=le.length;vt<Nt;vt++){const dn=le[vt],en=[];for(Mt=0;Mt<dn;Mt++){const Xt=Ne[ft+ze],In=Ne[ft+Et],Tr=mt[In];en.push({index:Xt,weight:Tr}),ft+=2}for(en.sort(kt),Mt=0;Mt<4;Mt++){const Xt=en[Mt];Xt!==void 0?(G.indices.array.push(Xt.index),G.weights.array.push(Xt.weight)):(G.indices.array.push(0),G.weights.array.push(0))}}for(de.bindShapeMatrix?G.bindMatrix=new yt().fromArray(de.bindShapeMatrix).transpose():G.bindMatrix=new yt().identity(),vt=0,Nt=ct.array.length;vt<Nt;vt++){const dn=ct.array[vt],en=new yt().fromArray(ut.array,vt*ut.stride).transpose();G.joints.push({name:dn,boneInverse:en})}return G;function kt(dn,en){return en.weight-dn.weight}}function X(de){return m(cn.controllers[de],re)}function W(de){const D={init_from:r(de,"init_from")[0].textContent};cn.images[de.getAttribute("id")]=D}function K(de){return de.build!==void 0?de.build:de.init_from}function ge(de){const D=cn.images[de];return D!==void 0?m(D,K):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",de),null)}function Se(de){const D={};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"profile_COMMON":D.profile=xe(V);break}}cn.effects[de.getAttribute("id")]=D}function xe(de){const D={surfaces:{},samplers:{}};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"newparam":Me(V,D);break;case"technique":D.technique=be(V);break;case"extra":D.extra=We(V);break}}return D}function Me(de,D){const G=de.getAttribute("sid");for(let j=0,V=de.childNodes.length;j<V;j++){const le=de.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"surface":D.surfaces[G]=he(le);break;case"sampler2D":D.samplers[G]=Oe(le);break}}}function he(de){const D={};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"init_from":D.init_from=V.textContent;break}}return D}function Oe(de){const D={};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"source":D.source=V.textContent;break}}return D}function be(de){const D={};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"constant":case"lambert":case"blinn":case"phong":D.type=V.nodeName,D.parameters=Te(V);break;case"extra":D.extra=We(V);break}}return D}function Te(de){const D={};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":D[V.nodeName]=Re(V);break;case"transparent":D[V.nodeName]={opaque:V.hasAttribute("opaque")?V.getAttribute("opaque"):"A_ONE",data:Re(V)};break}}return D}function Re(de){const D={};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"color":D[V.nodeName]=s(V.textContent);break;case"float":D[V.nodeName]=parseFloat(V.textContent);break;case"texture":D[V.nodeName]={id:V.getAttribute("texture"),extra:$e(V)};break}}return D}function $e(de){const D={technique:{}};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"extra":ve(V,D);break}}return D}function ve(de,D){for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"technique":me(V,D);break}}}function me(de,D){for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":D.technique[V.nodeName]=parseFloat(V.textContent);break;case"wrapU":case"wrapV":V.textContent.toUpperCase()==="TRUE"?D.technique[V.nodeName]=1:V.textContent.toUpperCase()==="FALSE"?D.technique[V.nodeName]=0:D.technique[V.nodeName]=parseInt(V.textContent);break;case"bump":D[V.nodeName]=xt(V);break}}}function We(de){const D={};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"technique":D.technique=Xe(V);break}}return D}function Xe(de){const D={};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"double_sided":D[V.nodeName]=parseInt(V.textContent);break;case"bump":D[V.nodeName]=xt(V);break}}return D}function xt(de){for(var D={},G=0,j=de.childNodes.length;G<j;G++){var V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"texture":D[V.nodeName]={id:V.getAttribute("texture"),texcoord:V.getAttribute("texcoord"),extra:$e(V)};break}}return D}function fe(de){return de}function ie(de){return m(cn.effects[de],fe)}function Ae(de){const D={name:de.getAttribute("name")};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"instance_effect":D.url=a(V.getAttribute("url"));break}}cn.materials[de.getAttribute("id")]=D}function Je(de){let D,G=de.slice((de.lastIndexOf(".")-1>>>0)+2);switch(G=G.toLowerCase(),G){case"tga":D=Ar;break;default:D=li}return D}function te(de){const D=ie(de.url),G=D.profile.technique;let j;switch(G.type){case"phong":case"blinn":j=new Ba;break;case"lambert":j=new wh;break;default:j=new Or;break}j.name=de.name||"";function V(Et){const ct=D.profile.samplers[Et.id];let ut=null;if(ct!==void 0){const mt=D.profile.surfaces[ct.source];ut=ge(mt.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),ut=ge(Et.id);if(ut!==null){const mt=Je(ut);if(mt!==void 0){const ft=mt.load(ut),vt=Et.extra;if(vt!==void 0&&vt.technique!==void 0&&c(vt.technique)===!1){const Mt=vt.technique;ft.wrapS=Mt.wrapU?Rr:Er,ft.wrapT=Mt.wrapV?Rr:Er,ft.offset.set(Mt.offsetU||0,Mt.offsetV||0),ft.repeat.set(Mt.repeatU||1,Mt.repeatV||1)}else ft.wrapS=Rr,ft.wrapT=Rr;return ft}else return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",ut),null}else return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",Et.id),null}const le=G.parameters;for(const Et in le){const ct=le[Et];switch(Et){case"diffuse":ct.color&&j.color.fromArray(ct.color),ct.texture&&(j.map=V(ct.texture));break;case"specular":ct.color&&j.specular&&j.specular.fromArray(ct.color),ct.texture&&(j.specularMap=V(ct.texture));break;case"bump":ct.texture&&(j.normalMap=V(ct.texture));break;case"ambient":ct.texture&&(j.lightMap=V(ct.texture));break;case"shininess":ct.float&&j.shininess&&(j.shininess=ct.float);break;case"emission":ct.color&&j.emissive&&j.emissive.fromArray(ct.color),ct.texture&&(j.emissiveMap=V(ct.texture));break}}let Ne=le.transparent,ze=le.transparency;if(ze===void 0&&Ne&&(ze={float:1}),Ne===void 0&&ze&&(Ne={opaque:"A_ONE",data:{color:[1,1,1,1]}}),Ne&&ze)if(Ne.data.texture)j.transparent=!0;else{const Et=Ne.data.color;switch(Ne.opaque){case"A_ONE":j.opacity=Et[3]*ze.float;break;case"RGB_ZERO":j.opacity=1-Et[0]*ze.float;break;case"A_ZERO":j.opacity=1-Et[3]*ze.float;break;case"RGB_ONE":j.opacity=Et[0]*ze.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',Ne.opaque)}j.opacity<1&&(j.transparent=!0)}if(G.extra!==void 0&&G.extra.technique!==void 0){const Et=G.extra.technique;for(const ct in Et){const ut=Et[ct];switch(ct){case"double_sided":j.side=ut===1?gr:es;break;case"bump":j.normalMap=V(ut.texture),j.normalScale=new qe(1,1);break}}}return j}function z(de){return m(cn.materials[de],te)}function F(de){const D={name:de.getAttribute("name")};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"optics":D.optics=ae(V);break}}cn.cameras[de.getAttribute("id")]=D}function ae(de){for(let D=0;D<de.childNodes.length;D++){const G=de.childNodes[D];switch(G.nodeName){case"technique_common":return ye(G)}}return{}}function ye(de){const D={};for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];switch(j.nodeName){case"perspective":case"orthographic":D.technique=j.nodeName,D.parameters=Le(j);break}}return D}function Le(de){const D={};for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];switch(j.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":D[j.nodeName]=parseFloat(j.textContent);break}}return D}function ke(de){let D;switch(de.optics.technique){case"perspective":D=new mr(de.optics.parameters.yfov,de.optics.parameters.aspect_ratio,de.optics.parameters.znear,de.optics.parameters.zfar);break;case"orthographic":let G=de.optics.parameters.ymag,j=de.optics.parameters.xmag;const V=de.optics.parameters.aspect_ratio;j=j===void 0?G*V:j,G=G===void 0?j/V:G,j*=.5,G*=.5,D=new Bi(-j,j,G,-G,de.optics.parameters.znear,de.optics.parameters.zfar);break;default:D=new mr;break}return D.name=de.name||"",D}function Ve(de){const D=cn.cameras[de];return D!==void 0?m(D,ke):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",de),null)}function Ce(de){let D={};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"technique_common":D=Ye(V);break}}cn.lights[de.getAttribute("id")]=D}function Ye(de){const D={};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"directional":case"point":case"spot":case"ambient":D.technique=V.nodeName,D.parameters=tt(V)}}return D}function tt(de){const D={};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"color":const le=s(V.textContent);D.color=new bt().fromArray(le);break;case"falloff_angle":D.falloffAngle=parseFloat(V.textContent);break;case"quadratic_attenuation":const Ne=parseFloat(V.textContent);D.distance=Ne?Math.sqrt(1/Ne):0;break}}return D}function it(de){let D;switch(de.technique){case"directional":D=new om;break;case"point":D=new sm;break;case"spot":D=new im;break;case"ambient":D=new c_;break}return de.parameters.color&&D.color.copy(de.parameters.color),de.parameters.distance&&(D.distance=de.parameters.distance),D}function dt(de){const D=cn.lights[de];return D!==void 0?m(D,it):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",de),null)}function Ze(de){const D={name:de.getAttribute("name"),sources:{},vertices:{},primitives:[]},G=r(de,"mesh")[0];if(G!==void 0){for(let j=0;j<G.childNodes.length;j++){const V=G.childNodes[j];if(V.nodeType!==1)continue;const le=V.getAttribute("id");switch(V.nodeName){case"source":D.sources[le]=Be(V);break;case"vertices":D.vertices=Ft(V);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",V.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":D.primitives.push(St(V));break;default:console.log(V)}}cn.geometries[de.getAttribute("id")]=D}}function Be(de){const D={array:[],stride:3};for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];if(j.nodeType===1)switch(j.nodeName){case"float_array":D.array=s(j.textContent);break;case"Name_array":D.array=i(j.textContent);break;case"technique_common":const V=r(j,"accessor")[0];V!==void 0&&(D.stride=parseInt(V.getAttribute("stride")));break}}return D}function Ft(de){const D={};for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];j.nodeType===1&&(D[j.getAttribute("semantic")]=a(j.getAttribute("source")))}return D}function St(de){const D={type:de.nodeName,material:de.getAttribute("material"),count:parseInt(de.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let G=0,j=de.childNodes.length;G<j;G++){const V=de.childNodes[G];if(V.nodeType===1)switch(V.nodeName){case"input":const le=a(V.getAttribute("source")),Ne=V.getAttribute("semantic"),ze=parseInt(V.getAttribute("offset")),Et=parseInt(V.getAttribute("set")),ct=Et>0?Ne+Et:Ne;D.inputs[ct]={id:le,offset:ze},D.stride=Math.max(D.stride,ze+1),Ne==="TEXCOORD"&&(D.hasUV=!0);break;case"vcount":D.vcount=o(V.textContent);break;case"p":D.p=o(V.textContent);break}}return D}function st(de){const D={};for(let G=0;G<de.length;G++){const j=de[G];D[j.type]===void 0&&(D[j.type]=[]),D[j.type].push(j)}return D}function It(de){let D=0;for(let G=0,j=de.length;G<j;G++)de[G].hasUV===!0&&D++;D>0&&D<de.length&&(de.uvsNeedsFix=!0)}function Ht(de){const D={},G=de.sources,j=de.vertices,V=de.primitives;if(V.length===0)return{};const le=st(V);for(const Ne in le){const ze=le[Ne];It(ze),D[Ne]=zt(ze,G,j)}return D}function zt(de,D,G){const j={},V={array:[],stride:0},le={array:[],stride:0},Ne={array:[],stride:0},ze={array:[],stride:0},Et={array:[],stride:0},ct={array:[],stride:4},ut={array:[],stride:4},mt=new on,ft=[];let vt=0;for(let Mt=0;Mt<de.length;Mt++){const Nt=de[Mt],kt=Nt.inputs;let dn=0;switch(Nt.type){case"lines":case"linestrips":dn=Nt.count*2;break;case"triangles":dn=Nt.count*3;break;case"polylist":for(let en=0;en<Nt.count;en++){const Xt=Nt.vcount[en];switch(Xt){case 3:dn+=3;break;case 4:dn+=6;break;default:dn+=(Xt-2)*3;break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",Nt.type)}mt.addGroup(vt,dn,Mt),vt+=dn,Nt.material&&ft.push(Nt.material);for(const en in kt){const Xt=kt[en];switch(en){case"VERTEX":for(const In in G){const Tr=G[In];switch(In){case"POSITION":const tr=V.array.length;if($t(Nt,D[Tr],Xt.offset,V.array),V.stride=D[Tr].stride,D.skinWeights&&D.skinIndices&&($t(Nt,D.skinIndices,Xt.offset,ct.array),$t(Nt,D.skinWeights,Xt.offset,ut.array)),Nt.hasUV===!1&&de.uvsNeedsFix===!0){const Kr=(V.array.length-tr)/V.stride;for(let Ks=0;Ks<Kr;Ks++)Ne.array.push(0,0)}break;case"NORMAL":$t(Nt,D[Tr],Xt.offset,le.array),le.stride=D[Tr].stride;break;case"COLOR":$t(Nt,D[Tr],Xt.offset,Et.array),Et.stride=D[Tr].stride;break;case"TEXCOORD":$t(Nt,D[Tr],Xt.offset,Ne.array),Ne.stride=D[Tr].stride;break;case"TEXCOORD1":$t(Nt,D[Tr],Xt.offset,ze.array),Ne.stride=D[Tr].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',In)}}break;case"NORMAL":$t(Nt,D[Xt.id],Xt.offset,le.array),le.stride=D[Xt.id].stride;break;case"COLOR":$t(Nt,D[Xt.id],Xt.offset,Et.array),Et.stride=D[Xt.id].stride;break;case"TEXCOORD":$t(Nt,D[Xt.id],Xt.offset,Ne.array),Ne.stride=D[Xt.id].stride;break;case"TEXCOORD1":$t(Nt,D[Xt.id],Xt.offset,ze.array),ze.stride=D[Xt.id].stride;break}}}return V.array.length>0&&mt.setAttribute("position",new Ot(V.array,V.stride)),le.array.length>0&&mt.setAttribute("normal",new Ot(le.array,le.stride)),Et.array.length>0&&mt.setAttribute("color",new Ot(Et.array,Et.stride)),Ne.array.length>0&&mt.setAttribute("uv",new Ot(Ne.array,Ne.stride)),ze.array.length>0&&mt.setAttribute("uv2",new Ot(ze.array,ze.stride)),ct.array.length>0&&mt.setAttribute("skinIndex",new Ot(ct.array,ct.stride)),ut.array.length>0&&mt.setAttribute("skinWeight",new Ot(ut.array,ut.stride)),j.data=mt,j.type=de[0].type,j.materialKeys=ft,j}function $t(de,D,G,j){const V=de.p,le=de.stride,Ne=de.vcount;function ze(ut){let mt=V[ut+G]*ct;const ft=mt+ct;for(;mt<ft;mt++)j.push(Et[mt])}const Et=D.array,ct=D.stride;if(de.vcount!==void 0){let ut=0;for(let mt=0,ft=Ne.length;mt<ft;mt++){const vt=Ne[mt];if(vt===4){const Mt=ut+le*0,Nt=ut+le*1,kt=ut+le*2,dn=ut+le*3;ze(Mt),ze(Nt),ze(dn),ze(Nt),ze(kt),ze(dn)}else if(vt===3){const Mt=ut+le*0,Nt=ut+le*1,kt=ut+le*2;ze(Mt),ze(Nt),ze(kt)}else if(vt>4)for(let Mt=1,Nt=vt-2;Mt<=Nt;Mt++){const kt=ut+le*0,dn=ut+le*Mt,en=ut+le*(Mt+1);ze(kt),ze(dn),ze(en)}ut+=le*vt}}else for(let ut=0,mt=V.length;ut<mt;ut+=le)ze(ut)}function Nn(de){return m(cn.geometries[de],Ht)}function Tn(de){const D={name:de.getAttribute("name")||"",joints:{},links:[]};for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];if(j.nodeType===1)switch(j.nodeName){case"technique_common":ai(j,D);break}}cn.kinematicsModels[de.getAttribute("id")]=D}function Fn(de){return de.build!==void 0?de.build:de}function vr(de){return m(cn.kinematicsModels[de],Fn)}function ai(de,D){for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];if(j.nodeType===1)switch(j.nodeName){case"joint":D.joints[j.getAttribute("sid")]=Ri(j);break;case"link":D.links.push(Pr(j));break}}}function Ri(de){let D;for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];if(j.nodeType===1)switch(j.nodeName){case"prismatic":case"revolute":D=Vr(j);break}}return D}function Vr(de){const D={sid:de.getAttribute("sid"),name:de.getAttribute("name")||"",axis:new J,limits:{min:0,max:0},type:de.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];if(j.nodeType===1)switch(j.nodeName){case"axis":const V=s(j.textContent);D.axis.fromArray(V);break;case"limits":const le=j.getElementsByTagName("max")[0],Ne=j.getElementsByTagName("min")[0];D.limits.max=parseFloat(le.textContent),D.limits.min=parseFloat(Ne.textContent);break}}return D.limits.min>=D.limits.max&&(D.static=!0),D.middlePosition=(D.limits.min+D.limits.max)/2,D}function Pr(de){const D={sid:de.getAttribute("sid"),name:de.getAttribute("name")||"",attachments:[],transforms:[]};for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];if(j.nodeType===1)switch(j.nodeName){case"attachment_full":D.attachments.push(gn(j));break;case"matrix":case"translate":case"rotate":D.transforms.push(br(j));break}}return D}function gn(de){const D={joint:de.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];if(j.nodeType===1)switch(j.nodeName){case"link":D.links.push(Pr(j));break;case"matrix":case"translate":case"rotate":D.transforms.push(br(j));break}}return D}function br(de){const D={type:de.nodeName},G=s(de.textContent);switch(D.type){case"matrix":D.obj=new yt,D.obj.fromArray(G).transpose();break;case"translate":D.obj=new J,D.obj.fromArray(G);break;case"rotate":D.obj=new J,D.obj.fromArray(G),D.angle=si.degToRad(G[3]);break}return D}function ss(de){const D={name:de.getAttribute("name")||"",rigidBodies:{}};for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];if(j.nodeType===1)switch(j.nodeName){case"rigid_body":D.rigidBodies[j.getAttribute("name")]={},pe(j,D.rigidBodies[j.getAttribute("name")]);break}}cn.physicsModels[de.getAttribute("id")]=D}function pe(de,D){for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];if(j.nodeType===1)switch(j.nodeName){case"technique_common":Ee(j,D);break}}}function Ee(de,D){for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];if(j.nodeType===1)switch(j.nodeName){case"inertia":D.inertia=s(j.textContent);break;case"mass":D.mass=s(j.textContent)[0];break}}}function je(de){const D={bindJointAxis:[]};for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];if(j.nodeType===1)switch(j.nodeName){case"bind_joint_axis":D.bindJointAxis.push(ue(j));break}}cn.kinematicsScenes[a(de.getAttribute("url"))]=D}function ue(de){const D={target:de.getAttribute("target").split("/").pop()};for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];if(j.nodeType===1)switch(j.nodeName){case"axis":const V=j.getElementsByTagName("param")[0];D.axis=V.textContent;const le=D.axis.split("inst_").pop().split("axis")[0];D.jointIndex=le.substr(0,le.length-1);break}}return D}function we(de){return de.build!==void 0?de.build:de}function Pe(de){return m(cn.kinematicsScenes[de],we)}function Ge(){const de=Object.keys(cn.kinematicsModels)[0],D=Object.keys(cn.kinematicsScenes)[0],G=Object.keys(cn.visualScenes)[0];if(de===void 0||D===void 0)return;const j=vr(de),V=Pe(D),le=Jn(G),Ne=V.bindJointAxis,ze={};for(let ut=0,mt=Ne.length;ut<mt;ut++){const ft=Ne[ut],vt=Zt.querySelector('[sid="'+ft.target+'"]');if(vt){const Mt=vt.parentElement;Et(ft.jointIndex,Mt)}}function Et(ut,mt){const ft=mt.getAttribute("name"),vt=j.joints[ut];le.traverse(function(Mt){Mt.name===ft&&(ze[ut]={object:Mt,transforms:Fe(mt),joint:vt,position:vt.zeroPosition})})}const ct=new yt;Es={joints:j&&j.joints,getJointValue:function(ut){const mt=ze[ut];if(mt)return mt.position;console.warn("THREE.ColladaLoader: Joint "+ut+" doesn't exist.")},setJointValue:function(ut,mt){const ft=ze[ut];if(ft){const vt=ft.joint;if(mt>vt.limits.max||mt<vt.limits.min)console.warn("THREE.ColladaLoader: Joint "+ut+" value "+mt+" outside of limits (min: "+vt.limits.min+", max: "+vt.limits.max+").");else if(vt.static)console.warn("THREE.ColladaLoader: Joint "+ut+" is static.");else{const Mt=ft.object,Nt=vt.axis,kt=ft.transforms;ot.identity();for(let dn=0;dn<kt.length;dn++){const en=kt[dn];if(en.sid&&en.sid.indexOf(ut)!==-1)switch(vt.type){case"revolute":ot.multiply(ct.makeRotationAxis(Nt,si.degToRad(mt)));break;case"prismatic":ot.multiply(ct.makeTranslation(Nt.x*mt,Nt.y*mt,Nt.z*mt));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+vt.type);break}else switch(en.type){case"matrix":ot.multiply(en.obj);break;case"translate":ot.multiply(ct.makeTranslation(en.obj.x,en.obj.y,en.obj.z));break;case"scale":ot.scale(en.obj);break;case"rotate":ot.multiply(ct.makeRotationAxis(en.obj,en.angle));break}}Mt.matrix.copy(ot),Mt.matrix.decompose(Mt.position,Mt.quaternion,Mt.scale),ze[ut].position=mt}}else console.log("THREE.ColladaLoader: "+ut+" does not exist.")}}}function Fe(de){const D=[],G=Zt.querySelector('[id="'+de.id+'"]');for(let j=0;j<G.childNodes.length;j++){const V=G.childNodes[j];if(V.nodeType!==1)continue;let le,Ne;switch(V.nodeName){case"matrix":le=s(V.textContent);const ze=new yt().fromArray(le).transpose();D.push({sid:V.getAttribute("sid"),type:V.nodeName,obj:ze});break;case"translate":case"scale":le=s(V.textContent),Ne=new J().fromArray(le),D.push({sid:V.getAttribute("sid"),type:V.nodeName,obj:Ne});break;case"rotate":le=s(V.textContent),Ne=new J().fromArray(le);const Et=si.degToRad(le[3]);D.push({sid:V.getAttribute("sid"),type:V.nodeName,obj:Ne,angle:Et});break}}return D}function lt(de){const D=de.getElementsByTagName("node");for(let G=0;G<D.length;G++){const j=D[G];j.hasAttribute("id")===!1&&j.setAttribute("id",l())}}const ot=new yt,pt=new J;function Ke(de){const D={name:de.getAttribute("name")||"",type:de.getAttribute("type"),id:de.getAttribute("id"),sid:de.getAttribute("sid"),matrix:new yt,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];if(j.nodeType!==1)continue;let V;switch(j.nodeName){case"node":D.nodes.push(j.getAttribute("id")),Ke(j);break;case"instance_camera":D.instanceCameras.push(a(j.getAttribute("url")));break;case"instance_controller":D.instanceControllers.push(Vt(j));break;case"instance_light":D.instanceLights.push(a(j.getAttribute("url")));break;case"instance_geometry":D.instanceGeometries.push(Vt(j));break;case"instance_node":D.instanceNodes.push(a(j.getAttribute("url")));break;case"matrix":V=s(j.textContent),D.matrix.multiply(ot.fromArray(V).transpose()),D.transforms[j.getAttribute("sid")]=j.nodeName;break;case"translate":V=s(j.textContent),pt.fromArray(V),D.matrix.multiply(ot.makeTranslation(pt.x,pt.y,pt.z)),D.transforms[j.getAttribute("sid")]=j.nodeName;break;case"rotate":V=s(j.textContent);const le=si.degToRad(V[3]);D.matrix.multiply(ot.makeRotationAxis(pt.fromArray(V),le)),D.transforms[j.getAttribute("sid")]=j.nodeName;break;case"scale":V=s(j.textContent),D.matrix.scale(pt.fromArray(V)),D.transforms[j.getAttribute("sid")]=j.nodeName;break;case"extra":break;default:console.log(j)}}return jt(D.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",D.id):cn.nodes[D.id]=D,D}function Vt(de){const D={id:a(de.getAttribute("url")),materials:{},skeletons:[]};for(let G=0;G<de.childNodes.length;G++){const j=de.childNodes[G];switch(j.nodeName){case"bind_material":const V=j.getElementsByTagName("instance_material");for(let le=0;le<V.length;le++){const Ne=V[le],ze=Ne.getAttribute("symbol"),Et=Ne.getAttribute("target");D.materials[ze]=a(Et)}break;case"skeleton":D.skeletons.push(a(j.textContent));break}}return D}function Lt(de,D){const G=[],j=[];let V,le,Ne;for(V=0;V<de.length;V++){const ct=de[V];let ut;if(jt(ct))ut=Dt(ct),Pt(ut,D,G);else if(yn(ct)){const ft=cn.visualScenes[ct].children;for(let vt=0;vt<ft.length;vt++){const Mt=ft[vt];if(Mt.type==="JOINT"){const Nt=Dt(Mt.id);Pt(Nt,D,G)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",ct)}for(V=0;V<D.length;V++)for(le=0;le<G.length;le++)if(Ne=G[le],Ne.bone.name===D[V].name){j[V]=Ne,Ne.processed=!0;break}for(V=0;V<G.length;V++)Ne=G[V],Ne.processed===!1&&(j.push(Ne),Ne.processed=!0);const ze=[],Et=[];for(V=0;V<j.length;V++)Ne=j[V],ze.push(Ne.bone),Et.push(Ne.boneInverse);return new Xu(ze,Et)}function Pt(de,D,G){de.traverse(function(j){if(j.isBone===!0){let V;for(let le=0;le<D.length;le++){const Ne=D[le];if(Ne.name===j.name){V=Ne.boneInverse;break}}V===void 0&&(V=new yt),G.push({bone:j,boneInverse:V,processed:!1})}})}function qt(de){const D=[],G=de.matrix,j=de.nodes,V=de.type,le=de.instanceCameras,Ne=de.instanceControllers,ze=de.instanceLights,Et=de.instanceGeometries,ct=de.instanceNodes;for(let mt=0,ft=j.length;mt<ft;mt++)D.push(Dt(j[mt]));for(let mt=0,ft=le.length;mt<ft;mt++){const vt=Ve(le[mt]);vt!==null&&D.push(vt.clone())}for(let mt=0,ft=Ne.length;mt<ft;mt++){const vt=Ne[mt],Mt=X(vt.id),Nt=Nn(Mt.id),kt=vn(Nt,vt.materials),dn=vt.skeletons,en=Mt.skin.joints,Xt=Lt(dn,en);for(let In=0,Tr=kt.length;In<Tr;In++){const tr=kt[In];tr.isSkinnedMesh&&(tr.bind(Xt,Mt.skin.bindMatrix),tr.normalizeSkinWeights()),D.push(tr)}}for(let mt=0,ft=ze.length;mt<ft;mt++){const vt=dt(ze[mt]);vt!==null&&D.push(vt.clone())}for(let mt=0,ft=Et.length;mt<ft;mt++){const vt=Et[mt],Mt=Nn(vt.id),Nt=vn(Mt,vt.materials);for(let kt=0,dn=Nt.length;kt<dn;kt++)D.push(Nt[kt])}for(let mt=0,ft=ct.length;mt<ft;mt++)D.push(Dt(ct[mt]).clone());let ut;if(j.length===0&&D.length===1)ut=D[0];else{ut=V==="JOINT"?new Ah:new ki;for(let mt=0;mt<D.length;mt++)ut.add(D[mt])}return ut.name=V==="JOINT"?de.sid:de.name,ut.matrix.copy(G),ut.matrix.decompose(ut.position,ut.quaternion,ut.scale),ut}const sn=new Or({color:16711935});function ln(de,D){const G=[];for(let j=0,V=de.length;j<V;j++){const le=D[de[j]];le===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",de[j]),G.push(sn)):G.push(z(le))}return G}function vn(de,D){const G=[];for(const j in de){const V=de[j],le=ln(V.materialKeys,D);le.length===0&&(j==="lines"||j==="linestrips"?le.push(new yi):le.push(new Ba));const Ne=V.data.attributes.skinIndex!==void 0,ze=le.length===1?le[0]:le;let Et;switch(j){case"lines":Et=new $s(V.data,ze);break;case"linestrips":Et=new Fa(V.data,ze);break;case"triangles":case"polylist":Ne?Et=new bh(V.data,ze):Et=new un(V.data,ze);break}G.push(Et)}return G}function jt(de){return cn.nodes[de]!==void 0}function Dt(de){return m(cn.nodes[de],qt)}function Mn(de){const D={name:de.getAttribute("name"),children:[]};lt(de);const G=r(de,"node");for(let j=0;j<G.length;j++)D.children.push(Ke(G[j]));cn.visualScenes[de.getAttribute("id")]=D}function fn(de){const D=new ki;D.name=de.name;const G=de.children;for(let j=0;j<G.length;j++){const V=G[j];D.add(Dt(V.id))}return D}function yn(de){return cn.visualScenes[de]!==void 0}function Jn(de){return m(cn.visualScenes[de],fn)}function or(de){const D=r(de,"instance_visual_scene")[0];return Jn(a(D.getAttribute("url")))}function ar(){const de=cn.clips;if(c(de)===!0){if(c(cn.animations)===!1){const D=[];for(const G in cn.animations){const j=A(G);for(let V=0,le=j.length;V<le;V++)D.push(j[V])}ci.push(new Ua("default",-1,D))}}else for(const D in de)ci.push(Y(D))}function Bn(de){let D="";const G=[de];for(;G.length;){const j=G.shift();j.nodeType===Node.TEXT_NODE?D+=j.textContent:(D+=`
`,G.push.apply(G,j.childNodes))}return D.trim()}if(e.length===0)return{scene:new vs};const Rn=new DOMParser().parseFromString(e,"application/xml"),Zt=r(Rn,"COLLADA")[0],En=Rn.getElementsByTagName("parsererror")[0];if(En!==void 0){const de=r(En,"div")[0];let D;return de?D=de.textContent:D=Bn(En),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,D),null}const wn=Zt.getAttribute("version");console.log("THREE.ColladaLoader: File version",wn);const sr=u(r(Zt,"asset")[0]),li=new Ki(this.manager);li.setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);let Ar;NL&&(Ar=new NL(this.manager),Ar.setPath(this.resourcePath||n));const ci=[];let Es={},xo=0;const cn={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};d(Zt,"library_animations","animation",g),d(Zt,"library_animation_clips","animation_clip",U),d(Zt,"library_controllers","controller",ee),d(Zt,"library_images","image",W),d(Zt,"library_effects","effect",Se),d(Zt,"library_materials","material",Ae),d(Zt,"library_cameras","camera",F),d(Zt,"library_lights","light",Ce),d(Zt,"library_geometries","geometry",Ze),d(Zt,"library_nodes","node",Ke),d(Zt,"library_visual_scenes","visual_scene",Mn),d(Zt,"library_kinematics_models","kinematics_model",Tn),d(Zt,"library_physics_models","physics_model",ss),d(Zt,"scene","instance_kinematics_scene",je),p(cn.animations,y),p(cn.clips,Q),p(cn.controllers,re),p(cn.images,K),p(cn.effects,fe),p(cn.materials,te),p(cn.cameras,ke),p(cn.lights,it),p(cn.geometries,Ht),p(cn.visualScenes,fn),ar(),Ge();const an=or(r(Zt,"scene")[0]);return an.animations=ci,sr.upAxis==="Z_UP"&&an.quaternion.setFromEuler(new wi(-Math.PI/2,0,0)),an.scale.multiplyScalar(sr.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),ci},kinematics:Es,library:cn,scene:an}}};const I_e=/^[og]\s*(.+)?/,P_e=/^mtllib /,L_e=/^usemtl /,N_e=/^usemap /,OL=new J,xT=new J,DL=new J,BL=new J,va=new J;function O_e(){const t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,n){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=n!==!1;return}const r=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:n!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(i,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:i||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:o!==void 0?o.smooth:this.smooth,groupStart:o!==void 0?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(i){const s=this.currentMaterial();if(s&&s.groupEnd===-1&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),i&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return i&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),s}},r&&r.name&&typeof r.clone=="function"){const i=r.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,n){const r=parseInt(e,10);return(r>=0?r-1:r+n/3)*3},parseNormalIndex:function(e,n){const r=parseInt(e,10);return(r>=0?r-1:r+n/3)*3},parseUVIndex:function(e,n){const r=parseInt(e,10);return(r>=0?r-1:r+n/2)*2},addVertex:function(e,n,r){const i=this.vertices,s=this.object.geometry.vertices;s.push(i[e+0],i[e+1],i[e+2]),s.push(i[n+0],i[n+1],i[n+2]),s.push(i[r+0],i[r+1],i[r+2])},addVertexPoint:function(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])},addVertexLine:function(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])},addNormal:function(e,n,r){const i=this.normals,s=this.object.geometry.normals;s.push(i[e+0],i[e+1],i[e+2]),s.push(i[n+0],i[n+1],i[n+2]),s.push(i[r+0],i[r+1],i[r+2])},addFaceNormal:function(e,n,r){const i=this.vertices,s=this.object.geometry.normals;OL.fromArray(i,e),xT.fromArray(i,n),DL.fromArray(i,r),va.subVectors(DL,xT),BL.subVectors(OL,xT),va.cross(BL),va.normalize(),s.push(va.x,va.y,va.z),s.push(va.x,va.y,va.z),s.push(va.x,va.y,va.z)},addColor:function(e,n,r){const i=this.colors,s=this.object.geometry.colors;i[e]!==void 0&&s.push(i[e+0],i[e+1],i[e+2]),i[n]!==void 0&&s.push(i[n+0],i[n+1],i[n+2]),i[r]!==void 0&&s.push(i[r+0],i[r+1],i[r+2])},addUV:function(e,n,r){const i=this.uvs,s=this.object.geometry.uvs;s.push(i[e+0],i[e+1]),s.push(i[n+0],i[n+1]),s.push(i[r+0],i[r+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const n=this.uvs;this.object.geometry.uvs.push(n[e+0],n[e+1])},addFace:function(e,n,r,i,s,o,a,l,c){const u=this.vertices.length;let f=this.parseVertexIndex(e,u),h=this.parseVertexIndex(n,u),d=this.parseVertexIndex(r,u);if(this.addVertex(f,h,d),this.addColor(f,h,d),a!==void 0&&a!==""){const p=this.normals.length;f=this.parseNormalIndex(a,p),h=this.parseNormalIndex(l,p),d=this.parseNormalIndex(c,p),this.addNormal(f,h,d)}else this.addFaceNormal(f,h,d);if(i!==void 0&&i!==""){const p=this.uvs.length;f=this.parseUVIndex(i,p),h=this.parseUVIndex(s,p),d=this.parseUVIndex(o,p),this.addUV(f,h,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const n=this.vertices.length;for(let r=0,i=e.length;r<i;r++){const s=this.parseVertexIndex(e[r],n);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,n){this.object.geometry.type="Line";const r=this.vertices.length,i=this.uvs.length;for(let s=0,o=e.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(e[s],r));for(let s=0,o=n.length;s<o;s++)this.addUVLine(this.parseUVIndex(n[s],i))}};return t.startObject("",!1),t}class AG extends _r{constructor(e){super(e),this.materials=null}load(e,n,r,i){const s=this,o=new Ir(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(a))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}setMaterials(e){return this.materials=e,this}parse(e){const n=new O_e;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const r=e.split(`
`);let i="",s="",o=0,a=[];const l=typeof"".trimLeft=="function";for(let f=0,h=r.length;f<h;f++)if(i=r[f],i=l?i.trimLeft():i.trim(),o=i.length,o!==0&&(s=i.charAt(0),s!=="#"))if(s==="v"){const d=i.split(/\s+/);switch(d[0]){case"v":n.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),d.length>=7?n.colors.push(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6])):n.colors.push(void 0,void 0,void 0);break;case"vn":n.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":n.uvs.push(parseFloat(d[1]),parseFloat(d[2]));break}}else if(s==="f"){const p=i.substr(1).trim().split(/\s+/),m=[];for(let v=0,x=p.length;v<x;v++){const y=p[v];if(y.length>0){const A=y.split("/");m.push(A)}}const g=m[0];for(let v=1,x=m.length-1;v<x;v++){const y=m[v],A=m[v+1];n.addFace(g[0],y[0],A[0],g[1],y[1],A[1],g[2],y[2],A[2])}}else if(s==="l"){const d=i.substring(1).trim().split(" ");let p=[];const m=[];if(i.indexOf("/")===-1)p=d;else for(let g=0,v=d.length;g<v;g++){const x=d[g].split("/");x[0]!==""&&p.push(x[0]),x[1]!==""&&m.push(x[1])}n.addLineGeometry(p,m)}else if(s==="p"){const p=i.substr(1).trim().split(" ");n.addPointGeometry(p)}else if((a=I_e.exec(i))!==null){const d=(" "+a[0].substr(1).trim()).substr(1);n.startObject(d)}else if(L_e.test(i))n.object.startMaterial(i.substring(7).trim(),n.materialLibraries);else if(P_e.test(i))n.materialLibraries.push(i.substring(7).trim());else if(N_e.test(i))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(s==="s"){if(a=i.split(" "),a.length>1){const p=a[1].trim().toLowerCase();n.object.smooth=p!=="0"&&p!=="off"}else n.object.smooth=!0;const d=n.object.currentMaterial();d&&(d.smooth=n.object.smooth)}else{if(i==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+i+'"')}n.finalize();const c=new ki;if(c.materialLibraries=[].concat(n.materialLibraries),!(n.objects.length===1&&n.objects[0].geometry.vertices.length===0)===!0)for(let f=0,h=n.objects.length;f<h;f++){const d=n.objects[f],p=d.geometry,m=d.materials,g=p.type==="Line",v=p.type==="Points";let x=!1;if(p.vertices.length===0)continue;const y=new on;y.setAttribute("position",new Ot(p.vertices,3)),p.normals.length>0&&y.setAttribute("normal",new Ot(p.normals,3)),p.colors.length>0&&(x=!0,y.setAttribute("color",new Ot(p.colors,3))),p.hasUVIndices===!0&&y.setAttribute("uv",new Ot(p.uvs,2));const A=[];for(let w=0,M=m.length;w<M;w++){const C=m[w],S=C.name+"_"+C.smooth+"_"+x;let R=n.materials[S];if(this.materials!==null){if(R=this.materials.create(C.name),g&&R&&!(R instanceof yi)){const O=new yi;Gr.prototype.copy.call(O,R),O.color.copy(R.color),R=O}else if(v&&R&&!(R instanceof ul)){const O=new ul({size:10,sizeAttenuation:!1});Gr.prototype.copy.call(O,R),O.color.copy(R.color),O.map=R.map,R=O}}R===void 0&&(g?R=new yi:v?R=new ul({size:1,sizeAttenuation:!1}):R=new Ba,R.name=C.name,R.flatShading=!C.smooth,R.vertexColors=x,n.materials[S]=R),A.push(R)}let T;if(A.length>1){for(let w=0,M=m.length;w<M;w++){const C=m[w];y.addGroup(C.groupStart,C.groupCount,w)}g?T=new $s(y,A):v?T=new Nc(y,A):T=new un(y,A)}else g?T=new $s(y,A[0]):v?T=new Nc(y,A[0]):T=new un(y,A[0]);T.name=d.name,c.add(T)}else if(n.vertices.length>0){const f=new ul({size:1,sizeAttenuation:!1}),h=new on;h.setAttribute("position",new Ot(n.vertices,3)),n.colors.length>0&&n.colors[0]!==void 0&&(h.setAttribute("color",new Ot(n.colors,3)),f.vertexColors=!0);const d=new Nc(h,f);c.add(d)}return c}}class TG extends _r{constructor(e){super(e),this.littleEndian=!0}load(e,n,r,i){const s=this,o=new Ir(s.manager);o.setPath(s.path),o.setResponseType("arraybuffer"),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(a,e))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e,n){function r(p,m){const g=p.length,v=new Uint8Array(m);let x=0,y=0,A,T,w;do if(A=p[x++],A<32){if(A++,y+A>m)throw new Error("Output buffer is not large enough");if(x+A>g)throw new Error("Invalid compressed data");do v[y++]=p[x++];while(--A)}else{if(T=A>>5,w=y-((A&31)<<8)-1,x>=g)throw new Error("Invalid compressed data");if(T===7&&(T+=p[x++],x>=g))throw new Error("Invalid compressed data");if(w-=p[x++],y+T+2>m)throw new Error("Output buffer is not large enough");if(w<0)throw new Error("Invalid compressed data");if(w>=y)throw new Error("Invalid compressed data");do v[y++]=v[w++];while(--T+2)}while(x<g);return v}function i(p){const m={},g=p.search(/[\r\n]DATA\s(\S*)\s/i),v=/[\r\n]DATA\s(\S*)\s/i.exec(p.substr(g-1));if(m.data=v[1],m.headerLen=v[0].length+g,m.str=p.substr(0,m.headerLen),m.str=m.str.replace(/\#.*/gi,""),m.version=/VERSION (.*)/i.exec(m.str),m.fields=/FIELDS (.*)/i.exec(m.str),m.size=/SIZE (.*)/i.exec(m.str),m.type=/TYPE (.*)/i.exec(m.str),m.count=/COUNT (.*)/i.exec(m.str),m.width=/WIDTH (.*)/i.exec(m.str),m.height=/HEIGHT (.*)/i.exec(m.str),m.viewpoint=/VIEWPOINT (.*)/i.exec(m.str),m.points=/POINTS (.*)/i.exec(m.str),m.version!==null&&(m.version=parseFloat(m.version[1])),m.fields!==null&&(m.fields=m.fields[1].split(" ")),m.type!==null&&(m.type=m.type[1].split(" ")),m.width!==null&&(m.width=parseInt(m.width[1])),m.height!==null&&(m.height=parseInt(m.height[1])),m.viewpoint!==null&&(m.viewpoint=m.viewpoint[1]),m.points!==null&&(m.points=parseInt(m.points[1],10)),m.points===null&&(m.points=m.width*m.height),m.size!==null&&(m.size=m.size[1].split(" ").map(function(y){return parseInt(y,10)})),m.count!==null)m.count=m.count[1].split(" ").map(function(y){return parseInt(y,10)});else{m.count=[];for(let y=0,A=m.fields.length;y<A;y++)m.count.push(1)}m.offset={};let x=0;for(let y=0,A=m.fields.length;y<A;y++)m.data==="ascii"?m.offset[m.fields[y]]=y:(m.offset[m.fields[y]]=x,x+=m.size[y]*m.count[y]);return m.rowSize=x,m}const s=Si.decodeText(new Uint8Array(e)),o=i(s),a=[],l=[],c=[];if(o.data==="ascii"){const p=o.offset,g=s.substr(o.headerLen).split(`
`);for(let v=0,x=g.length;v<x;v++){if(g[v]==="")continue;const y=g[v].split(" ");if(p.x!==void 0&&(a.push(parseFloat(y[p.x])),a.push(parseFloat(y[p.y])),a.push(parseFloat(y[p.z]))),p.rgb!==void 0){const A=parseFloat(y[p.rgb]),T=A>>16&255,w=A>>8&255,M=A>>0&255;c.push(T/255,w/255,M/255)}p.normal_x!==void 0&&(l.push(parseFloat(y[p.normal_x])),l.push(parseFloat(y[p.normal_y])),l.push(parseFloat(y[p.normal_z])))}}if(o.data==="binary_compressed"){const p=new Uint32Array(e.slice(o.headerLen,o.headerLen+8)),m=p[0],g=p[1],v=r(new Uint8Array(e,o.headerLen+8,m),g),x=new DataView(v.buffer),y=o.offset;for(let A=0;A<o.points;A++)y.x!==void 0&&(a.push(x.getFloat32(o.points*y.x+o.size[0]*A,this.littleEndian)),a.push(x.getFloat32(o.points*y.y+o.size[1]*A,this.littleEndian)),a.push(x.getFloat32(o.points*y.z+o.size[2]*A,this.littleEndian))),y.rgb!==void 0&&(c.push(x.getUint8(o.points*y.rgb+o.size[3]*A+2)/255),c.push(x.getUint8(o.points*y.rgb+o.size[3]*A+1)/255),c.push(x.getUint8(o.points*y.rgb+o.size[3]*A+0)/255)),y.normal_x!==void 0&&(l.push(x.getFloat32(o.points*y.normal_x+o.size[4]*A,this.littleEndian)),l.push(x.getFloat32(o.points*y.normal_y+o.size[5]*A,this.littleEndian)),l.push(x.getFloat32(o.points*y.normal_z+o.size[6]*A,this.littleEndian)))}if(o.data==="binary"){const p=new DataView(e,o.headerLen),m=o.offset;for(let g=0,v=0;g<o.points;g++,v+=o.rowSize)m.x!==void 0&&(a.push(p.getFloat32(v+m.x,this.littleEndian)),a.push(p.getFloat32(v+m.y,this.littleEndian)),a.push(p.getFloat32(v+m.z,this.littleEndian))),m.rgb!==void 0&&(c.push(p.getUint8(v+m.rgb+2)/255),c.push(p.getUint8(v+m.rgb+1)/255),c.push(p.getUint8(v+m.rgb+0)/255)),m.normal_x!==void 0&&(l.push(p.getFloat32(v+m.normal_x,this.littleEndian)),l.push(p.getFloat32(v+m.normal_y,this.littleEndian)),l.push(p.getFloat32(v+m.normal_z,this.littleEndian)))}const u=new on;a.length>0&&u.setAttribute("position",new Ot(a,3)),l.length>0&&u.setAttribute("normal",new Ot(l,3)),c.length>0&&u.setAttribute("color",new Ot(c,3)),u.computeBoundingSphere();const f=new ul({size:.005});c.length>0?f.vertexColors=!0:f.color.setHex(Math.random()*16777215);const h=new Nc(u,f);let d=n.split("").reverse().join("");return d=/([^\/]*)/.exec(d),d=d[1].split("").reverse().join(""),h.name=d,h}}class D_e extends _r{constructor(e){super(e),this.propertyNameMapping={}}load(e,n,r,i){const s=this,o=new Ir(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(a))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}setPropertyNameMapping(e){this.propertyNameMapping=e}parse(e){function n(d){const p=/ply([\s\S]*)end_header\r?\n/;let m="",g=0;const v=p.exec(d);v!==null&&(m=v[1],g=new Blob([v[0]]).size);const x={comments:[],elements:[],headerLength:g,objInfo:""},y=m.split(`
`);let A;function T(w,M){const C={type:w[0]};return C.type==="list"?(C.name=w[3],C.countType=w[1],C.itemType=w[2]):C.name=w[1],C.name in M&&(C.name=M[C.name]),C}for(let w=0;w<y.length;w++){let M=y[w];if(M=M.trim(),M==="")continue;const C=M.split(/\s+/),S=C.shift();switch(M=C.join(" "),S){case"format":x.format=C[0],x.version=C[1];break;case"comment":x.comments.push(M);break;case"element":A!==void 0&&x.elements.push(A),A={},A.name=C[0],A.count=parseInt(C[1]),A.properties=[];break;case"property":A.properties.push(T(C,h.propertyNameMapping));break;case"obj_info":x.objInfo=M;break;default:console.log("unhandled",S,C)}}return A!==void 0&&x.elements.push(A),x}function r(d,p){switch(p){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(d);case"float":case"double":case"float32":case"float64":return parseFloat(d)}}function i(d,p){const m=p.split(/\s+/),g={};for(let v=0;v<d.length;v++)if(d[v].type==="list"){const x=[],y=r(m.shift(),d[v].countType);for(let A=0;A<y;A++)x.push(r(m.shift(),d[v].itemType));g[d[v].name]=x}else g[d[v].name]=r(m.shift(),d[v].type);return g}function s(d,p){const m={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]};let g;const v=/end_header\s([\s\S]*)$/;let x="";(g=v.exec(d))!==null&&(x=g[1]);const y=x.split(`
`);let A=0,T=0;for(let w=0;w<y.length;w++){let M=y[w];if(M=M.trim(),M==="")continue;T>=p.elements[A].count&&(A++,T=0);const C=i(p.elements[A].properties,M);a(m,p.elements[A].name,C),T++}return o(m)}function o(d){let p=new on;return d.indices.length>0&&p.setIndex(d.indices),p.setAttribute("position",new Ot(d.vertices,3)),d.normals.length>0&&p.setAttribute("normal",new Ot(d.normals,3)),d.uvs.length>0&&p.setAttribute("uv",new Ot(d.uvs,2)),d.colors.length>0&&p.setAttribute("color",new Ot(d.colors,3)),d.faceVertexUvs.length>0&&(p=p.toNonIndexed(),p.setAttribute("uv",new Ot(d.faceVertexUvs,2))),p.computeBoundingSphere(),p}function a(d,p,m){if(p==="vertex")d.vertices.push(m.x,m.y,m.z),"nx"in m&&"ny"in m&&"nz"in m&&d.normals.push(m.nx,m.ny,m.nz),"s"in m&&"t"in m&&d.uvs.push(m.s,m.t),"red"in m&&"green"in m&&"blue"in m&&d.colors.push(m.red/255,m.green/255,m.blue/255);else if(p==="face"){const g=m.vertex_indices||m.vertex_index,v=m.texcoord;g.length===3?(d.indices.push(g[0],g[1],g[2]),v&&v.length===6&&(d.faceVertexUvs.push(v[0],v[1]),d.faceVertexUvs.push(v[2],v[3]),d.faceVertexUvs.push(v[4],v[5]))):g.length===4&&(d.indices.push(g[0],g[1],g[3]),d.indices.push(g[1],g[2],g[3]))}}function l(d,p,m,g){switch(m){case"int8":case"char":return[d.getInt8(p),1];case"uint8":case"uchar":return[d.getUint8(p),1];case"int16":case"short":return[d.getInt16(p,g),2];case"uint16":case"ushort":return[d.getUint16(p,g),2];case"int32":case"int":return[d.getInt32(p,g),4];case"uint32":case"uint":return[d.getUint32(p,g),4];case"float32":case"float":return[d.getFloat32(p,g),4];case"float64":case"double":return[d.getFloat64(p,g),8]}}function c(d,p,m,g){const v={};let x,y=0;for(let A=0;A<m.length;A++)if(m[A].type==="list"){const T=[];x=l(d,p+y,m[A].countType,g);const w=x[0];y+=x[1];for(let M=0;M<w;M++)x=l(d,p+y,m[A].itemType,g),T.push(x[0]),y+=x[1];v[m[A].name]=T}else x=l(d,p+y,m[A].type,g),v[m[A].name]=x[0],y+=x[1];return[v,y]}function u(d,p){const m={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},g=p.format==="binary_little_endian",v=new DataView(d,p.headerLength);let x,y=0;for(let A=0;A<p.elements.length;A++)for(let T=0;T<p.elements[A].count;T++){x=c(v,y,p.elements[A].properties,g),y+=x[1];const w=x[0];a(m,p.elements[A].name,w)}return o(m)}let f;const h=this;if(e instanceof ArrayBuffer){const d=Si.decodeText(new Uint8Array(e)),p=n(d);f=p.format==="ascii"?s(d,p):u(e,p)}else f=s(e,n(e));return f}}const B_e="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",k_e="generic-trigger";class F_e{constructor(e=null,n=B_e){this.gltfLoader=e??new eE,this.path=n,this._assetCache={}}initializeControllerModel(e,n){return n.targetRayMode!=="tracked-pointer"||!n.gamepad?Promise.resolve():E_e(n,this.path,k_e).then(({profile:r,assetPath:i})=>{if(!i)throw new Error("no asset path");const s=new w_e(n,r,i);e.connectMotionController(s);const o=s.assetUrl,a=this._assetCache[o];if(a){const l=a.scene.clone();e.connectModel(l)}else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(o,l=>{if(!e.motionController){console.warn("motionController gone while gltf load, bailing...");return}this._assetCache[o]=l;const c=l.scene.clone();e.connectModel(c)},void 0,()=>{throw new Error(`Asset ${o} missing or malformed.`)})}}).catch(r=>{console.warn(r)})}}const kL=t=>"envMap"in t,FL=(t,e)=>{t.envMap=e,t.needsUpdate=!0},wG=(t,e)=>{e instanceof un&&(Array.isArray(e.material)?e.material.forEach(n=>kL(n)?FL(n,t):void 0):kL(e.material)&&FL(e.material,t))},UL=t=>"envMapIntensity"in t,zL=(t,e)=>{t.envMapIntensity=e,t.needsUpdate=!0},r4=(t,e)=>{e instanceof un&&(Array.isArray(e.material)?e.material.forEach(n=>UL(n)?zL(n,t):void 0):UL(e.material)&&zL(e.material,t))};function U_e(t,e){Object.values(t.components).forEach(n=>{const{type:r,touchPointNodeName:i,visualResponses:s}=n;if(r===_i.ComponentType.TOUCHPAD&&i)if(n.touchPointNode=e.getObjectByName(i),n.touchPointNode){const o=new Th(.001),a=new Or({color:255}),l=new un(o,a);n.touchPointNode.add(l)}else console.warn(`Could not find touch dot, ${n.touchPointNodeName}, in touchpad component ${n.id}`);Object.values(s).forEach(o=>{const{valueNodeName:a,minNodeName:l,maxNodeName:c,valueNodeProperty:u}=o;if(u===_i.VisualResponseProperty.TRANSFORM&&l&&c){if(o.minNode=e.getObjectByName(l),o.maxNode=e.getObjectByName(c),!o.minNode){console.warn(`Could not find ${l} in the model`);return}if(!o.maxNode){console.warn(`Could not find ${c} in the model`);return}}o.valueNode=e.getObjectByName(a),o.valueNode||console.warn(`Could not find ${a} in the model`)})})}function z_e(t,e){U_e(t.motionController,e),(t.envMap||t.envMapIntensity!=null)&&e.traverse(n=>{t.envMap&&wG(t.envMap,n),t.envMapIntensity!=null&&r4(t.envMapIntensity,n)}),t.add(e)}class H_e extends ki{constructor(){super(),this.motionController=null,this.envMap=null,this.envMapIntensity=1,this.scene=null}setEnvironmentMap(e,n=1){var r;return this.envMap===e&&this.envMapIntensity===n?this:(this.envMap=e,this.envMapIntensity=n,(r=this.scene)==null||r.traverse(i=>{wG(e,i),r4(n,i)}),this)}setEnvironmentMapIntensity(e){var n;return this.envMapIntensity===e?this:(this.envMapIntensity=e,(n=this.scene)==null||n.traverse(r=>r4(e,r)),this)}connectModel(e){if(!this.motionController){console.warn("scene tried to add, but no motion controller");return}this.scene=e,z_e(this,e),this.dispatchEvent({type:"modelconnected",data:e})}connectMotionController(e){this.motionController=e,this.dispatchEvent({type:"motionconnected",data:e})}updateMatrixWorld(e){super.updateMatrixWorld(e),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(n=>{Object.values(n.visualResponses).forEach(r=>{const{valueNode:i,minNode:s,maxNode:o,value:a,valueNodeProperty:l}=r;i&&(l===_i.VisualResponseProperty.VISIBILITY&&typeof a=="boolean"?i.visible=a:l===_i.VisualResponseProperty.TRANSFORM&&s&&o&&typeof a=="number"&&(i.quaternion.slerpQuaternions(s.quaternion,o.quaternion,a),i.position.lerpVectors(s.position,o.position,a)))})}))}disconnect(){this.dispatchEvent({type:"motiondisconnected",data:this.motionController}),this.dispatchEvent({type:"modeldisconnected",data:this.scene}),this.motionController=null,this.scene&&this.remove(this.scene),this.scene=null}dispose(){this.disconnect()}}const G_e=E.forwardRef(function({target:e,hideOnBlur:n=!1,...r},i){const s=oi(l=>l.hoverState),o=E.useRef(null),a=E.useMemo(()=>new on().setFromPoints([new J(0,0,0),new J(0,0,-1)]),[]);return E.useImperativeHandle(i,()=>o.current),rn(()=>{if(!e.inputSource)return;let l=1;const c=s[e.inputSource.handedness].values().next().value;c&&e.inputSource.handedness!=="none"?(l=c.distance,n&&(o.current.visible=!1)):n&&(o.current.visible=!0);const u=-.01;o.current.scale.z=l+u}),E.createElement("line",{ref:o,geometry:a,"material-opacity":.8,"material-transparent":!0,...r})}),V_e=new F_e,W_e=({target:t,envMap:e,envMapIntensity:n})=>{const r=E.useRef(null),i=zl(l=>{e!=null&&l.setEnvironmentMap(e)}),s=zl(l=>l.setEnvironmentMap(null)),o=zl(l=>{n!=null&&l.setEnvironmentMapIntensity(n)}),a=E.useCallback(l=>{var c,u,f;if(r.current=l,l){if(t.xrControllerModel=l,(c=t.inputSource)!=null&&c.hand)return;i.current(l),o.current(l),t.inputSource?V_e.initializeControllerModel(l,t.inputSource):console.warn("no input source on XRController when handleControllerModel")}else{if((u=t.inputSource)!=null&&u.hand)return;(f=t.xrControllerModel)==null||f.disconnect(),t.xrControllerModel=null}},[t,o,i]);return E.useLayoutEffect(()=>{r.current&&(e?i.current(r.current):s.current(r.current))},[e,i,s]),E.useLayoutEffect(()=>{r.current&&o.current(r.current)},[n,o]),E.createElement("xRControllerModel",{ref:a})};function j_e({rayMaterial:t={},hideRaysOnBlur:e=!1,envMap:n,envMapIntensity:r}){const i=oi(a=>a.controllers),s=oi(a=>a.isHandTracking),o=E.useMemo(()=>Object.entries(t).reduce((a,[l,c])=>({...a,[`material-${l}`]:c}),{}),[JSON.stringify(t)]);return E.useMemo(()=>Fi({XRControllerModel:H_e}),[]),E.createElement(E.Fragment,null,i.map((a,l)=>E.createElement(E.Fragment,{key:l},Hc(E.createElement(W_e,{target:a,envMap:n,envMapIntensity:r}),a.grip),Hc(E.createElement(G_e,{visible:!s,hideOnBlur:e,target:a,...o}),a.controller))))}function HL(t,e,n){return t===null||(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(n.ray.origin),t.object=e,t.distance<n.near||t.distance>n.far)?null:t}const ET=new xl,GL=new yt,$_e=un.prototype.raycast;function X_e(t,e){if(this.geometry.boundsTree){if(this.material===void 0)return;GL.copy(this.matrixWorld).invert(),ET.copy(t.ray).applyMatrix4(GL);const n=this.geometry.boundsTree;if(t.firstHitOnly===!0){const r=HL(n.raycastFirst(ET,this.material),this,t);r&&e.push(r)}else{const r=n.raycast(ET,this.material);for(let i=0,s=r.length;i<s;i++){const o=HL(r[i],this,t);o&&e.push(o)}}}else $_e.call(this,t,e)}const VL=t=>{let e;const n=new Set,r=(l,c)=>{const u=typeof l=="function"?l(e):l;if(!Object.is(u,e)){const f=e;e=c??typeof u!="object"?u:Object.assign({},e,u),n.forEach(h=>h(e,f))}},i=()=>e,a={setState:r,getState:i,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>n.clear()};return e=t(r,i,a),a},Y_e=t=>t?VL(t):VL,{useSyncExternalStoreWithSelector:q_e}=AC;function K_e(t,e=t.getState,n){const r=q_e(t.subscribe,t.getState,t.getServerState||t.getState,e,n);return E.useDebugValue(r),r}const WL=t=>{const e=typeof t=="function"?Y_e(t):t,n=(r,i)=>K_e(e,r,i);return Object.assign(n,e),n},J_e=t=>t?WL(t):WL;function Q_e(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}const TC=J_e((t,e)=>{function n(){var r;const{accumulated:i,startTime:s,infos:o}=e(),a=(r=e().log)==null?void 0:r.maxMemory,{totalFrames:l,log:c,gl:u,max:f}=i,h={calls:u.calls/l,triangles:u.triangles/l,points:u.points/l,lines:u.lines/l},d={gpu:c.gpu/l,cpu:c.cpu/l,mem:c.mem/l,fps:c.fps/l};return{sessionTime:(window.performance.now()-s)/1e3,infos:o,log:d,gl:h,max:f,maxMemory:a,totalFrames:l}}return{log:null,paused:!1,triggerProgramsUpdate:0,startTime:0,customData:0,fpsLimit:60,overclockingFps:!1,accumulated:{totalFrames:0,gl:{calls:0,triangles:0,points:0,lines:0,counts:0},log:{gpu:0,cpu:0,mem:0,fps:0},max:{gl:{calls:0,triangles:0,points:0,lines:0,counts:0},log:{gpu:0,cpu:0,mem:0,fps:0}}},chart:{data:{fps:[],cpu:[],gpu:[],mem:[]},circularId:0},gl:void 0,objectWithMaterials:null,scene:void 0,programs:new Map,sceneLength:void 0,tab:"infos",getReport:n}}),za=t=>TC(t,Q_e);Object.assign(za,TC);const{getState:Oa,setState:Ko}=TC,ba={value:0,fpsLimit:60,isOverLimit:0},z0=t=>(t==null?void 0:t.reduce((e,n)=>e+n,0))/t.length;class Z_e{constructor(e={}){this.names=[""],this.finished=[],this.paused=!1,this.overClock=!1,this.queryHasResult=!1,this.queryCreated=!1,this.isWebGL2=!0,this.memAccums=[],this.gpuAccums=[],this.activeAccums=[],this.logsAccums={mem:[],gpu:[],cpu:[],fps:[],fpsFixed:[]},this.fpsChart=[],this.gpuChart=[],this.cpuChart=[],this.memChart=[],this.paramLogger=()=>{},this.glFinish=()=>{},this.chartLogger=()=>{},this.chartLen=60,this.logsPerSecond=10,this.maxMemory=1500,this.chartHz=10,this.startCpuProfiling=!1,this.lastCalculateFixed=0,this.chartFrame=0,this.gpuTimeProcess=0,this.chartTime=0,this.activeQueries=0,this.circularId=0,this.detected=0,this.frameId=0,this.rafId=0,this.idleCbId=0,this.checkQueryId=0,this.uuid=void 0,this.currentCpu=0,this.currentMem=0,this.paramFrame=0,this.paramTime=0,this.now=()=>{},this.t0=0,window.GLPerf=window.GLPerf||{},Object.assign(this,e),this.fpsChart=new Array(this.chartLen).fill(0),this.gpuChart=new Array(this.chartLen).fill(0),this.cpuChart=new Array(this.chartLen).fill(0),this.memChart=new Array(this.chartLen).fill(0),this.now=()=>window.performance&&window.performance.now?window.performance.now():Date.now(),this.initGpu(),this.is120hz()}initGpu(){this.uuid=si.generateUUID(),this.gl&&(this.isWebGL2=!0,this.extension||(this.extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")),this.extension===null&&(this.isWebGL2=!1))}is120hz(){let e=0;const n=r=>{++e<20?this.rafId=window.requestAnimationFrame(n):(this.detected=Math.ceil(1e3*e/(r-this.t0)/70),window.cancelAnimationFrame(this.rafId)),this.t0||(this.t0=r)};this.rafId=window.requestAnimationFrame(n)}addUI(e){this.names.indexOf(e)===-1&&(this.names.push(e),this.gpuAccums.push(0),this.activeAccums.push(!1))}nextFps(e){const n=16.666666666666668,r=n-e.timeRemaining(),i=n*ba.fpsLimit/10/r;i<0||(ba.value=i,ba.isOverLimit<25?ba.isOverLimit++:Ko({overclockingFps:!0}))}nextFrame(e){this.frameId++;const n=e||this.now();let r=n-this.paramTime,i=0;if(this.frameId<=1)this.paramFrame=this.frameId,this.paramTime=n;else if(n>=this.paramTime){this.maxMemory=window.performance.memory?window.performance.memory.jsHeapSizeLimit/1048576:0;const s=this.frameId-this.paramFrame,o=s*1e3/r,a=Oa().overclockingFps?ba.value:o;if(i=this.isWebGL2?this.gpuAccums[0]:this.gpuAccums[0]/r,this.isWebGL2?this.gpuAccums[0]=0:Promise.all(this.finished).then(()=>{this.gpuAccums[0]=0,this.finished=[]}),this.currentMem=Math.round(window.performance&&window.performance.memory?window.performance.memory.usedJSHeapSize/1048576:0),window.performance&&this.startCpuProfiling){window.performance.mark("cpu-finished");const l=performance.measure("cpu-duration","cpu-started","cpu-finished");this.currentCpu=l.duration,this.logsAccums.cpu.push(this.currentCpu),this.startCpuProfiling=!1}this.logsAccums.mem.push(this.currentMem),this.logsAccums.fpsFixed.push(o),this.logsAccums.fps.push(a),this.logsAccums.gpu.push(i),this.overClock&&typeof window.requestIdleCallback<"u"&&(ba.isOverLimit>0&&a>o?ba.isOverLimit--:Oa().overclockingFps&&Ko({overclockingFps:!1})),n>=this.paramTime+1e3/this.logsPerSecond&&(this.paramLogger({cpu:z0(this.logsAccums.cpu),gpu:z0(this.logsAccums.gpu),mem:z0(this.logsAccums.mem),fps:z0(this.logsAccums.fps),duration:Math.round(r),maxMemory:this.maxMemory,frameCount:s}),this.logsAccums.mem=[],this.logsAccums.fps=[],this.logsAccums.gpu=[],this.logsAccums.cpu=[],this.paramFrame=this.frameId,this.paramTime=n),this.overClock&&n-this.lastCalculateFixed>=2*1e3&&(this.lastCalculateFixed=e,ba.fpsLimit=Math.round(z0(this.logsAccums.fpsFixed)/10)*100,Ko({fpsLimit:ba.fpsLimit/10}),this.logsAccums.fpsFixed=[],this.paramFrame=this.frameId,this.paramTime=n)}if(!this.detected||!this.chartFrame)this.chartFrame=this.frameId,this.chartTime=n,this.circularId=0;else{const s=n-this.chartTime;let o=this.chartHz*s/1e3;for(;--o>0&&this.detected;){const l=(this.frameId-this.chartFrame)/s*1e3,c=Oa().overclockingFps?ba.value:l;this.fpsChart[this.circularId%this.chartLen]=c;const u=1e3/this.currentMem,f=this.currentCpu,h=(this.isWebGL2?this.gpuAccums[1]*2:Math.round(this.gpuAccums[1]/r*100))+4;h>0&&(this.gpuChart[this.circularId%this.chartLen]=h),f>0&&(this.cpuChart[this.circularId%this.chartLen]=f),u>0&&(this.memChart[this.circularId%this.chartLen]=u);for(let d=0;d<this.names.length;d++)this.chartLogger({i:d,data:{fps:this.fpsChart,gpu:this.gpuChart,cpu:this.cpuChart,mem:this.memChart},circularId:this.circularId});this.circularId++,this.chartFrame=this.frameId,this.chartTime=n}}}startGpu(){const e=this.gl,n=this.extension;if(!(!e||!n)&&this.isWebGL2){let r=!1,i,s;if(this.query){this.queryHasResult=!1;let o=this.query;if(r=e.getQueryParameter(o,e.QUERY_RESULT_AVAILABLE),i=e.getParameter(n.GPU_DISJOINT_EXT),r&&!i){s=e.getQueryParameter(this.query,e.QUERY_RESULT);const a=s*1e-6;(r||i)&&(e.deleteQuery(this.query),o=null),r&&a>0&&(i||this.activeAccums.forEach((l,c)=>{this.gpuAccums[c]=a}))}}(r||!this.query)&&(this.queryCreated=!0,this.query=e.createQuery(),e.beginQuery(n.TIME_ELAPSED_EXT,this.query))}}endGpu(){const e=this.extension,n=this.gl;this.isWebGL2&&this.queryCreated&&n.getQuery(e.TIME_ELAPSED_EXT,n.CURRENT_QUERY)&&n.endQuery(e.TIME_ELAPSED_EXT)}begin(e){this.startGpu(),this.updateAccums(e)}end(e){this.endGpu(),this.updateAccums(e)}updateAccums(e){let n=this.names.indexOf(e);n===-1&&(n=this.names.length,this.addUI(e));const r=this.now();this.activeAccums[n]=!this.activeAccums[n],this.t0=r}}const ebe=t=>{t.forEach((e,n)=>{const{meshes:r}=e;if(!r)return;let i={total:0,type:"Triangle",data:[]};Object.keys(r).forEach(s=>{const o=r[s],{geometry:a,material:l}=o;let c=a.index;const u=a.attributes.position;if(!u)return;let f=1;l.wireframe===!0&&(f=0);const h=c!==null?c.count:u.count,d=a.drawRange.start*f,p=a.drawRange.count*f,m=d,g=Math.min(h,d+p)-1;let v=1;const x=o.count||1;let y="Triangle",A=0;o.isMesh?l.wireframe===!0?(y="Line",v=v/2):(y="Triangle",v=v/3):o.isLine?(y="Line",o.isLineSegments?v=v/2:o.isLineLoop?v=v:v=v-1):o.isPoints?(y="Point",v=v):o.isSprite&&(y="Triangle",v=v/3);const T=Math.round(Math.max(0,g-m+1)*(v*x));T>A&&(A=T,i.type=y),i.total+=T,i.data.push({drawCount:T,type:y}),o.userData.drawCount={type:y,count:T}}),e.drawCounts=i})};var SG={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new i(u,f||l,h),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},a.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},a.prototype.emit=function(c,u,f,h,d,p){var m=n?n+c:c;if(!this._events[m])return!1;var g=this._events[m],v=arguments.length,x,y;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,h),!0;case 5:return g.fn.call(g.context,u,f,h,d),!0;case 6:return g.fn.call(g.context,u,f,h,d,p),!0}for(y=1,x=new Array(v-1);y<v;y++)x[y-1]=arguments[y];g.fn.apply(g.context,x)}else{var A=g.length,T;for(y=0;y<A;y++)switch(g[y].once&&this.removeListener(c,g[y].fn,void 0,!0),v){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,u);break;case 3:g[y].fn.call(g[y].context,u,f);break;case 4:g[y].fn.call(g[y].context,u,f,h);break;default:if(!x)for(T=1,x=new Array(v-1);T<v;T++)x[T-1]=arguments[T];g[y].fn.apply(g[y].context,x)}}return!0},a.prototype.on=function(c,u,f){return s(this,c,u,f,!1)},a.prototype.once=function(c,u,f){return s(this,c,u,f,!0)},a.prototype.removeListener=function(c,u,f,h){var d=n?n+c:c;if(!this._events[d])return this;if(!u)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===u&&(!h||p.once)&&(!f||p.context===f)&&o(this,d);else{for(var m=0,g=[],v=p.length;m<v;m++)(p[m].fn!==u||h&&!p[m].once||f&&p[m].context!==f)&&g.push(p[m]);g.length?this._events[d]=g.length===1?g[0]:g:o(this,d)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(SG);var tbe=SG.exports;const nbe=go(tbe),tE=new nbe;function rbe(t,e,n){return n!=null&&n.once?tE.once(t,e):tE.on(t,e)}function ibe(t,e,n){var r;tE.removeListener(t,e,(r=n==null?void 0:n.context)!=null?r:null,n==null?void 0:n.once)}function sbe(t,e){tE.emit(t,e)}function obe(t,e,n=[],r){const i=E.useRef(e);E.useEffect(()=>void(i.current=e),[e]),E.useEffect(()=>{const s=a=>{var l;return(l=i.current)==null?void 0:l.call(i,a)},o=rbe(t,s,r);return()=>ibe(t,s,{...r,context:o})},[t,r==null?void 0:r.once,...n])}const abe=hn.prototype.updateMatrixWorld,lbe=hn.prototype.updateWorldMatrix,jL=hn.prototype.updateMatrix,$L=["calls","triangles","points","lines"],XL=["gpu","cpu","mem","fps"];let mp={value:0},ta={value:0};const cbe=t=>{let e=""+t;return e=e.match("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$"),e!==null},YL=(t,e)=>{t.defines||(t.defines={}),t.defines&&!t.defines.muiPerf&&(t.defines=Object.assign(t.defines||{},{muiPerf:t.uuid}));const n=t.uuid;return e[n]||(e[n]={meshes:{},material:t},t.needsUpdate=!0),t.needsUpdate=!1,n},ube=t=>t==="muiPerf",fbe=({overClock:t,logsPerSecond:e,chart:n,deepAnalyze:r,matrixUpdate:i})=>{const{gl:s,scene:o}=wt();Ko({gl:s,scene:o});const a=E.useMemo(()=>{const l=new Z_e({trackGPU:!0,overClock:t,chartLen:n?n.length:120,chartHz:n?n.hz:60,logsPerSecond:e||10,gl:s.getContext(),chartLogger:g=>{Ko({chart:g})},paramLogger:g=>{const v={maxMemory:g.maxMemory,gpu:g.gpu,cpu:g.cpu,mem:g.mem,fps:g.fps,totalTime:g.duration,frameCount:g.frameCount};Ko({log:v});const{accumulated:x}=Oa(),y=s.info.render;x.totalFrames++,x.gl.calls+=y.calls,x.gl.triangles+=y.triangles,x.gl.points+=y.points,x.gl.lines+=y.lines,x.log.gpu+=g.gpu,x.log.cpu+=g.cpu,x.log.mem+=g.mem,x.log.fps+=g.fps;for(let A=0;A<$L.length;A++){const T=$L[A],w=y[T];w>x.max.gl[T]&&(x.max.gl[T]=w)}for(let A=0;A<XL.length;A++){const T=XL[A],w=g[T];w>x.max.log[T]&&(x.max.log[T]=w)}Ko({accumulated:x}),sbe("log",[v,s])}}),c=s.getContext();let u=null,f=null;const h=c.getExtension("WEBGL_debug_renderer_info"),d=c.getParameter(c.VERSION);h!=null&&(u=c.getParameter(h.UNMASKED_RENDERER_WEBGL),f=c.getParameter(h.UNMASKED_VENDOR_WEBGL)),f||(f="Unknown vendor"),u||(u=c.getParameter(c.RENDERER)),Ko({startTime:window.performance.now(),infos:{version:d,renderer:u,vendor:f}});const p=new Map,m=new Map;return Object.defineProperty(vs.prototype,"onBeforeRender",{get(){return(...g)=>{var v;l&&l.begin("profiler"),(v=p.get(this))==null||v(...g)}},set(g){p.set(this,g)},configurable:!0}),Object.defineProperty(vs.prototype,"onAfterRender",{get(){return(...g)=>{var v;l&&l.end("profiler"),(v=m.get(this))==null||v(...g)}},set(g){m.set(this,g)},configurable:!0}),l},[]);return E.useEffect(()=>{a&&(a.overClock=t||!1,t===!1&&(Ko({overclockingFps:!1}),ba.value=0,ba.isOverLimit=0),a.chartHz=(n==null?void 0:n.hz)||60,a.chartLen=(n==null?void 0:n.length)||120)},[t,a,n==null?void 0:n.length,n==null?void 0:n.hz]),E.useEffect(()=>{i&&(hn.prototype.updateMatrixWorld=function(){(this.matrixWorldNeedsUpdate||arguments[0])&&mp.value++,abe.apply(this,arguments)},hn.prototype.updateWorldMatrix=function(){mp.value++,lbe.apply(this,arguments)},hn.prototype.updateMatrix=function(){ta.value++,jL.apply(this,arguments)}),s.info.autoReset=!1;let l=null,c=null;if(s.info)return l=j5(function(){Oa().paused&&Ko({paused:!1}),window.performance&&(window.performance.mark("cpu-started"),a.startCpuProfiling=!0),ta.value-=1,mp.value=0,ta.value=0,s.info&&s.info.reset()}),c=d_(function(){var f,h;if(a&&!a.paused&&(a.nextFrame(window.performance.now()),t&&typeof window.requestIdleCallback<"u"&&(a.idleCbId=requestIdleCallback(a.nextFps))),r){const d={},p=new Map;o.traverse(function(g){if((g instanceof un||g instanceof Nc)&&g.material){let v=g.material.uuid;Array.isArray(g.material)&&g.material.length>1?v=YL(g.material[1],d):v=YL(g.material,d),d[v].meshes[g.uuid]=g}}),(h=(f=s==null?void 0:s.info)==null?void 0:f.programs)==null||h.forEach(m=>{const g=m.cacheKey.split(","),v=g[g.findIndex(ube)+1];if(cbe(v)&&d[v]){const{material:x,meshes:y}=d[v];p.set(v,{program:m,material:x,meshes:y,drawCounts:{total:0,type:"triangle",data:[]},expand:!1,visible:!0})}}),p.size!==Oa().programs.size&&(ebe(p),Ko({programs:p,triggerProgramsUpdate:Oa().triggerProgramsUpdate++}))}}),()=>{a&&(typeof window.cancelIdleCallback<"u"&&window.cancelIdleCallback(a.idleCbId),window.cancelAnimationFrame(a.rafId),window.cancelAnimationFrame(a.checkQueryId)),i&&(hn.prototype.updateMatrixWorld=jL),l(),c()}},[a,s,n,i]),E.useEffect(()=>{const l=ofe(function(){return a&&(a.paused=!0,ta.value=0,mp.value=0,Ko({paused:!0,log:{maxMemory:0,gpu:0,mem:0,cpu:0,fps:0,totalTime:0,frameCount:0}})),!1});return()=>{l()}},[]),null},hbe=rs("div",{position:"fixed",top:0,right:0,zIndex:9999,fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif`,backgroundColor:"rgba(36, 36, 36, .9)",color:"#fff",margin:0,minHeight:"100px",padding:"4px 0","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",userSelect:"none","&.top-left":{right:"initial",left:0},"&.bottom-left":{right:"initial",top:"initial",bottom:0,left:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.bottom-right":{top:"initial",bottom:0,".__perf_toggle":{top:"-20px",bottom:"initial"}},"&.minimal":{backgroundColor:"rgba(36, 36, 36, .75)"},"*":{margin:"0",padding:"0",border:"0",fontSize:"100%",lineHeight:"1",verticalAlign:"baseline"}}),_T=rs("small",{position:"absolute",right:0,fontSize:"10px"}),Hs=rs("div",{display:"inline-flex",fontStyle:"normal",padding:0,lineHeight:"13px",fontSize:"14px",width:"62px",position:"relative",pointerEvents:"auto",cursor:"default",fontWeight:500,letterSpacing:"0px",textAlign:"left",height:"29px",whiteSpace:"nowrap",justifyContent:"space-evenly",fontVariantNumeric:"tabular-nums",small:{paddingLeft:"12px"},svg:{padding:0,color:"rgba(145, 145, 145, 0.3)",fontSize:"40px",position:"absolute",zIndex:1,maxHeight:"20px",left:" 50%",marginLeft:"-23px",top:"4px"}}),Po=rs("span",{verticalAlign:"bottom",position:"absolute",bottom:"5px",color:"rgba(101, 197, 188, 1)",textAlign:"right",letterSpacing:"1px",fontSize:"8px",fontWeight:"500",width:"60px"}),dbe=rs("div",{display:"flex"}),pbe=rs("div",{backgroundColor:"#404040",padding:"6px",display:"block",fontSize:"12px",marginBottom:"6px",cursor:"pointer","*":{cursor:"pointer !important"},"> span":{},small:{fontSize:"9px"},"> b":{marginRight:"4px",cursor:"pointer"}}),mbe=rs("div",{height:"66px",overflow:"hidden",position:"absolute",pointerEvents:"none",display:"flex",top:"0px",justifyContent:"center",width:"100%",minWidth:"310px",margin:"0 auto",canvas:{background:"transparent !important",position:"absolute !important"}}),gbe=rs("div",{textAlign:"center",fontWeight:700,fontSize:"12px",lineHeight:"12px",display:"flex",justifyContent:"center",alignItems:"center",verticalAlign:"middle",color:"#f1f1f1",padding:"7px",width:"100%",backgroundColor:"rgba(36, 36, 37, 0.8)",zIndex:1,position:"absolute",height:"100%"}),wC=rs("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),vbe=rs("div",{pointerEvents:"auto",justifyContent:"center",cursor:"pointer",fontSize:"12px",float:"right",backgroundColor:"rgb(41, 43, 45)",width:"auto",margin:"0",color:"rgba(145, 145, 145, 1)",textAlign:"center",display:"inline-block",verticalAlign:"middle",padding:"4px 6px","&.__perf_toggle_tab_active":{backgroundColor:"rgb(31 31 31)"},svg:{width:"12px",height:"12px",float:"left"}}),ybe=rs("div",{padding:"4px 6px",fontSize:"12px",pointerEvents:"auto"}),xbe=rs("span",{fontWeight:"bold",letterSpacing:"0.08em",maxWidth:"145px",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",verticalAlign:"middle",fontSize:"11px",marginRight:"10px"}),Ebe=rs("div",{maxHeight:"50vh",overflowY:"auto",marginTop:"38px"}),_be=rs("div",{marginTop:"0"}),qL=rs("div",{display:"flex",position:"relative",fontWeight:"bold",color:"#fff",lineHeight:"14px",svg:{marginRight:"4px",display:"inline-block"}}),CG=rs("ul",{display:"block",position:"relative",paddingLeft:"10px",margin:"6px 6px",img:{maxHeight:"60px",maxWidth:"100%",margin:"6px auto",display:"block"},"&:after":{content:"",position:"absolute",left:"0px",top:"0px",width:"1px",height:"100%",backgroundColor:"grey",transform:"translateX(-50%)",maxHeight:"50vh",overflowY:"auto"},li:{borderBottom:"1px solid #313131",display:"block",padding:"4px",margin:0,lineHeight:1,verticalAlign:"middle",height:"24px"},b:{fontWeight:"bold"},small:{textAlign:"revert",letterSpacing:"1px",fontSize:"10px",fontWeight:"500",marginLeft:"2px",color:"rgb(101, 197, 188)"}}),MG=rs("button",{fontWeight:"bold",letterSpacing:"0.02em",backgroundColor:"rgb(41, 43, 45)",color:"rgb(211, 211, 211)",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",display:"block",verticalAlign:"middle",fontSize:"11px",padding:"5px",margin:"4px auto"}),bbe=rs("div",{display:"flex",justifyContent:"center",cursor:"pointer",fontSize:"12px",backgroundColor:"rgb(41, 43, 45)",marginTop:"6px",width:"auto",margin:"0 auto",color:"rgba(145, 145, 145, 1)",textAlign:"center",position:"absolute",right:0,bottom:" -20px",svg:{width:"12px",height:"12px",float:"left"}}),Abe=rs("li",{display:"flex !important",height:"auto !important",span:{height:"40px",display:"block",position:"relative"},b:{paddingLeft:"12px"}});function Ui(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Tbe=["color"],RG=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,Tbe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M0 1.5C0 1.22386 0.223858 1 0.5 1H2.5C2.77614 1 3 1.22386 3 1.5C3 1.77614 2.77614 2 2.5 2H0.5C0.223858 2 0 1.77614 0 1.5ZM4 1.5C4 1.22386 4.22386 1 4.5 1H14.5C14.7761 1 15 1.22386 15 1.5C15 1.77614 14.7761 2 14.5 2H4.5C4.22386 2 4 1.77614 4 1.5ZM4 4.5C4 4.22386 4.22386 4 4.5 4H11.5C11.7761 4 12 4.22386 12 4.5C12 4.77614 11.7761 5 11.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM0 7.5C0 7.22386 0.223858 7 0.5 7H2.5C2.77614 7 3 7.22386 3 7.5C3 7.77614 2.77614 8 2.5 8H0.5C0.223858 8 0 7.77614 0 7.5ZM4 7.5C4 7.22386 4.22386 7 4.5 7H14.5C14.7761 7 15 7.22386 15 7.5C15 7.77614 14.7761 8 14.5 8H4.5C4.22386 8 4 7.77614 4 7.5ZM4 10.5C4 10.2239 4.22386 10 4.5 10H11.5C11.7761 10 12 10.2239 12 10.5C12 10.7761 11.7761 11 11.5 11H4.5C4.22386 11 4 10.7761 4 10.5ZM0 13.5C0 13.2239 0.223858 13 0.5 13H2.5C2.77614 13 3 13.2239 3 13.5C3 13.7761 2.77614 14 2.5 14H0.5C0.223858 14 0 13.7761 0 13.5ZM4 13.5C4 13.2239 4.22386 13 4.5 13H14.5C14.7761 13 15 13.2239 15 13.5C15 13.7761 14.7761 14 14.5 14H4.5C4.22386 14 4 13.7761 4 13.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),wbe=["color"],Sbe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,wbe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M11.5 1C11.7761 1 12 1.22386 12 1.5V13.5C12 13.7761 11.7761 14 11.5 14C11.2239 14 11 13.7761 11 13.5V1.5C11 1.22386 11.2239 1 11.5 1ZM9.5 3C9.77614 3 10 3.22386 10 3.5V13.5C10 13.7761 9.77614 14 9.5 14C9.22386 14 9 13.7761 9 13.5V3.5C9 3.22386 9.22386 3 9.5 3ZM13.5 3C13.7761 3 14 3.22386 14 3.5V13.5C14 13.7761 13.7761 14 13.5 14C13.2239 14 13 13.7761 13 13.5V3.5C13 3.22386 13.2239 3 13.5 3ZM5.5 4C5.77614 4 6 4.22386 6 4.5V13.5C6 13.7761 5.77614 14 5.5 14C5.22386 14 5 13.7761 5 13.5V4.5C5 4.22386 5.22386 4 5.5 4ZM1.5 5C1.77614 5 2 5.22386 2 5.5V13.5C2 13.7761 1.77614 14 1.5 14C1.22386 14 1 13.7761 1 13.5V5.5C1 5.22386 1.22386 5 1.5 5ZM7.5 5C7.77614 5 8 5.22386 8 5.5V13.5C8 13.7761 7.77614 14 7.5 14C7.22386 14 7 13.7761 7 13.5V5.5C7 5.22386 7.22386 5 7.5 5ZM3.5 7C3.77614 7 4 7.22386 4 7.5V13.5C4 13.7761 3.77614 14 3.5 14C3.22386 14 3 13.7761 3 13.5V7.5C3 7.22386 3.22386 7 3.5 7Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Cbe=["color"],Mbe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,Cbe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M2 5H13C13.5523 5 14 5.44772 14 6V9C14 9.55228 13.5523 10 13 10H2C1.44772 10 1 9.55228 1 9V6C1 5.44772 1.44772 5 2 5ZM0 6C0 4.89543 0.895431 4 2 4H13C14.1046 4 15 4.89543 15 6V9C15 10.1046 14.1046 11 13 11H2C0.89543 11 0 10.1046 0 9V6ZM4.5 6.75C4.08579 6.75 3.75 7.08579 3.75 7.5C3.75 7.91421 4.08579 8.25 4.5 8.25C4.91421 8.25 5.25 7.91421 5.25 7.5C5.25 7.08579 4.91421 6.75 4.5 6.75ZM6.75 7.5C6.75 7.08579 7.08579 6.75 7.5 6.75C7.91421 6.75 8.25 7.08579 8.25 7.5C8.25 7.91421 7.91421 8.25 7.5 8.25C7.08579 8.25 6.75 7.91421 6.75 7.5ZM10.5 6.75C10.0858 6.75 9.75 7.08579 9.75 7.5C9.75 7.91421 10.0858 8.25 10.5 8.25C10.9142 8.25 11.25 7.91421 11.25 7.5C11.25 7.08579 10.9142 6.75 10.5 6.75Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Rbe=["color"],Ibe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,Rbe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M7.28856 0.796908C7.42258 0.734364 7.57742 0.734364 7.71144 0.796908L13.7114 3.59691C13.8875 3.67906 14 3.85574 14 4.05V10.95C14 11.1443 13.8875 11.3209 13.7114 11.4031L7.71144 14.2031C7.57742 14.2656 7.42258 14.2656 7.28856 14.2031L1.28856 11.4031C1.11252 11.3209 1 11.1443 1 10.95V4.05C1 3.85574 1.11252 3.67906 1.28856 3.59691L7.28856 0.796908ZM2 4.80578L7 6.93078V12.9649L2 10.6316V4.80578ZM8 12.9649L13 10.6316V4.80578L8 6.93078V12.9649ZM7.5 6.05672L12.2719 4.02866L7.5 1.80176L2.72809 4.02866L7.5 6.05672Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Pbe=["color"],Lbe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,Pbe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M7.5 9.125C8.39746 9.125 9.125 8.39746 9.125 7.5C9.125 6.60254 8.39746 5.875 7.5 5.875C6.60254 5.875 5.875 6.60254 5.875 7.5C5.875 8.39746 6.60254 9.125 7.5 9.125ZM7.5 10.125C8.94975 10.125 10.125 8.94975 10.125 7.5C10.125 6.05025 8.94975 4.875 7.5 4.875C6.05025 4.875 4.875 6.05025 4.875 7.5C4.875 8.94975 6.05025 10.125 7.5 10.125Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Nbe=["color"],Obe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,Nbe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M7.49999 3.09998C7.27907 3.09998 7.09999 3.27906 7.09999 3.49998C7.09999 3.72089 7.27907 3.89998 7.49999 3.89998H14.5C14.7209 3.89998 14.9 3.72089 14.9 3.49998C14.9 3.27906 14.7209 3.09998 14.5 3.09998H7.49999ZM7.49998 5.1C7.27907 5.1 7.09998 5.27908 7.09998 5.5C7.09998 5.72091 7.27907 5.9 7.49998 5.9H14.5C14.7209 5.9 14.9 5.72091 14.9 5.5C14.9 5.27908 14.7209 5.1 14.5 5.1H7.49998ZM7.1 7.5C7.1 7.27908 7.27909 7.1 7.5 7.1H14.5C14.7209 7.1 14.9 7.27908 14.9 7.5C14.9 7.72091 14.7209 7.9 14.5 7.9H7.5C7.27909 7.9 7.1 7.72091 7.1 7.5ZM7.49998 9.1C7.27907 9.1 7.09998 9.27908 7.09998 9.5C7.09998 9.72091 7.27907 9.9 7.49998 9.9H14.5C14.7209 9.9 14.9 9.72091 14.9 9.5C14.9 9.27908 14.7209 9.1 14.5 9.1H7.49998ZM7.09998 11.5C7.09998 11.2791 7.27907 11.1 7.49998 11.1H14.5C14.7209 11.1 14.9 11.2791 14.9 11.5C14.9 11.7209 14.7209 11.9 14.5 11.9H7.49998C7.27907 11.9 7.09998 11.7209 7.09998 11.5ZM2.5 9.25003L5 6.00003H0L2.5 9.25003Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Dbe=["color"],Bbe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,Dbe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),kbe=["color"],Fbe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,kbe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Ube=["color"],i4=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,Ube);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),zbe=["color"],Hbe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,zbe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M5.49998 0.5C5.49998 0.223858 5.72383 0 5.99998 0H7.49998H8.99998C9.27612 0 9.49998 0.223858 9.49998 0.5C9.49998 0.776142 9.27612 1 8.99998 1H7.99998V2.11922C9.09832 2.20409 10.119 2.56622 10.992 3.13572C11.0116 3.10851 11.0336 3.08252 11.058 3.05806L12.058 2.05806C12.3021 1.81398 12.6978 1.81398 12.9419 2.05806C13.186 2.30214 13.186 2.69786 12.9419 2.94194L11.967 3.91682C13.1595 5.07925 13.9 6.70314 13.9 8.49998C13.9 12.0346 11.0346 14.9 7.49998 14.9C3.96535 14.9 1.09998 12.0346 1.09998 8.49998C1.09998 5.13361 3.69904 2.3743 6.99998 2.11922V1H5.99998C5.72383 1 5.49998 0.776142 5.49998 0.5ZM2.09998 8.49998C2.09998 5.51764 4.51764 3.09998 7.49998 3.09998C10.4823 3.09998 12.9 5.51764 12.9 8.49998C12.9 11.4823 10.4823 13.9 7.49998 13.9C4.51764 13.9 2.09998 11.4823 2.09998 8.49998ZM7.49998 8.49998V4.09998C5.06992 4.09998 3.09998 6.06992 3.09998 8.49998C3.09998 10.93 5.06992 12.9 7.49998 12.9C8.715 12.9 9.815 12.4075 10.6112 11.6112L7.49998 8.49998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Gbe=["color"],Vbe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,Gbe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M7.75432 0.819537C7.59742 0.726821 7.4025 0.726821 7.24559 0.819537L1.74559 4.06954C1.59336 4.15949 1.49996 4.32317 1.49996 4.5C1.49996 4.67683 1.59336 4.84051 1.74559 4.93046L7.24559 8.18046C7.4025 8.27318 7.59742 8.27318 7.75432 8.18046L13.2543 4.93046C13.4066 4.84051 13.5 4.67683 13.5 4.5C13.5 4.32317 13.4066 4.15949 13.2543 4.06954L7.75432 0.819537ZM7.49996 7.16923L2.9828 4.5L7.49996 1.83077L12.0171 4.5L7.49996 7.16923ZM1.5695 7.49564C1.70998 7.2579 2.01659 7.17906 2.25432 7.31954L7.49996 10.4192L12.7456 7.31954C12.9833 7.17906 13.2899 7.2579 13.4304 7.49564C13.5709 7.73337 13.4921 8.03998 13.2543 8.18046L7.75432 11.4305C7.59742 11.5232 7.4025 11.5232 7.24559 11.4305L1.74559 8.18046C1.50786 8.03998 1.42901 7.73337 1.5695 7.49564ZM1.56949 10.4956C1.70998 10.2579 2.01658 10.1791 2.25432 10.3195L7.49996 13.4192L12.7456 10.3195C12.9833 10.1791 13.2899 10.2579 13.4304 10.4956C13.5709 10.7334 13.4921 11.04 13.2543 11.1805L7.75432 14.4305C7.59742 14.5232 7.4025 14.5232 7.24559 14.4305L1.74559 11.1805C1.50785 11.04 1.42901 10.7334 1.56949 10.4956Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Wbe=["color"],jbe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,Wbe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),$be=["color"],Xbe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,$be);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M1.49988 2.00012C1.77602 2.00012 1.99988 1.77626 1.99988 1.50012C1.99988 1.22398 1.77602 1.00012 1.49988 1.00012C1.22374 1.00012 0.999878 1.22398 0.999878 1.50012C0.999878 1.77626 1.22374 2.00012 1.49988 2.00012ZM4.49988 2.00012C4.77602 2.00012 4.99988 1.77626 4.99988 1.50012C4.99988 1.22398 4.77602 1.00012 4.49988 1.00012C4.22374 1.00012 3.99988 1.22398 3.99988 1.50012C3.99988 1.77626 4.22374 2.00012 4.49988 2.00012ZM7.99988 1.50012C7.99988 1.77626 7.77602 2.00012 7.49988 2.00012C7.22374 2.00012 6.99988 1.77626 6.99988 1.50012C6.99988 1.22398 7.22374 1.00012 7.49988 1.00012C7.77602 1.00012 7.99988 1.22398 7.99988 1.50012ZM10.4999 2.00012C10.776 2.00012 10.9999 1.77626 10.9999 1.50012C10.9999 1.22398 10.776 1.00012 10.4999 1.00012C10.2237 1.00012 9.99988 1.22398 9.99988 1.50012C9.99988 1.77626 10.2237 2.00012 10.4999 2.00012ZM13.9999 1.50012C13.9999 1.77626 13.776 2.00012 13.4999 2.00012C13.2237 2.00012 12.9999 1.77626 12.9999 1.50012C12.9999 1.22398 13.2237 1.00012 13.4999 1.00012C13.776 1.00012 13.9999 1.22398 13.9999 1.50012ZM1.49988 14.0001C1.77602 14.0001 1.99988 13.7763 1.99988 13.5001C1.99988 13.224 1.77602 13.0001 1.49988 13.0001C1.22374 13.0001 0.999878 13.224 0.999878 13.5001C0.999878 13.7763 1.22374 14.0001 1.49988 14.0001ZM1.99988 10.5001C1.99988 10.7763 1.77602 11.0001 1.49988 11.0001C1.22374 11.0001 0.999878 10.7763 0.999878 10.5001C0.999878 10.224 1.22374 10.0001 1.49988 10.0001C1.77602 10.0001 1.99988 10.224 1.99988 10.5001ZM1.49988 8.00012C1.77602 8.00012 1.99988 7.77626 1.99988 7.50012C1.99988 7.22398 1.77602 7.00012 1.49988 7.00012C1.22374 7.00012 0.999878 7.22398 0.999878 7.50012C0.999878 7.77626 1.22374 8.00012 1.49988 8.00012ZM1.99988 4.50012C1.99988 4.77626 1.77602 5.00012 1.49988 5.00012C1.22374 5.00012 0.999878 4.77626 0.999878 4.50012C0.999878 4.22398 1.22374 4.00012 1.49988 4.00012C1.77602 4.00012 1.99988 4.22398 1.99988 4.50012ZM13.4999 11.0001C13.776 11.0001 13.9999 10.7763 13.9999 10.5001C13.9999 10.224 13.776 10.0001 13.4999 10.0001C13.2237 10.0001 12.9999 10.224 12.9999 10.5001C12.9999 10.7763 13.2237 11.0001 13.4999 11.0001ZM13.9999 7.50012C13.9999 7.77626 13.776 8.00012 13.4999 8.00012C13.2237 8.00012 12.9999 7.77626 12.9999 7.50012C12.9999 7.22398 13.2237 7.00012 13.4999 7.00012C13.776 7.00012 13.9999 7.22398 13.9999 7.50012ZM13.4999 5.00012C13.776 5.00012 13.9999 4.77626 13.9999 4.50012C13.9999 4.22398 13.776 4.00012 13.4999 4.00012C13.2237 4.00012 12.9999 4.22398 12.9999 4.50012C12.9999 4.77626 13.2237 5.00012 13.4999 5.00012ZM4.99988 13.5001C4.99988 13.7763 4.77602 14.0001 4.49988 14.0001C4.22374 14.0001 3.99988 13.7763 3.99988 13.5001C3.99988 13.224 4.22374 13.0001 4.49988 13.0001C4.77602 13.0001 4.99988 13.224 4.99988 13.5001ZM7.49988 14.0001C7.77602 14.0001 7.99988 13.7763 7.99988 13.5001C7.99988 13.224 7.77602 13.0001 7.49988 13.0001C7.22374 13.0001 6.99988 13.224 6.99988 13.5001C6.99988 13.7763 7.22374 14.0001 7.49988 14.0001ZM10.9999 13.5001C10.9999 13.7763 10.776 14.0001 10.4999 14.0001C10.2237 14.0001 9.99988 13.7763 9.99988 13.5001C9.99988 13.224 10.2237 13.0001 10.4999 13.0001C10.776 13.0001 10.9999 13.224 10.9999 13.5001ZM13.4999 14.0001C13.776 14.0001 13.9999 13.7763 13.9999 13.5001C13.9999 13.224 13.776 13.0001 13.4999 13.0001C13.2237 13.0001 12.9999 13.224 12.9999 13.5001C12.9999 13.7763 13.2237 14.0001 13.4999 14.0001ZM3.99988 5.00012C3.99988 4.44784 4.44759 4.00012 4.99988 4.00012H9.99988C10.5522 4.00012 10.9999 4.44784 10.9999 5.00012V10.0001C10.9999 10.5524 10.5522 11.0001 9.99988 11.0001H4.99988C4.44759 11.0001 3.99988 10.5524 3.99988 10.0001V5.00012ZM4.99988 5.00012H9.99988V10.0001H4.99988V5.00012Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Ybe=["color"],qbe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,Ybe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M2.25 7.5C2.25 7.22386 2.47386 7 2.75 7H12.25C12.5261 7 12.75 7.22386 12.75 7.5C12.75 7.77614 12.5261 8 12.25 8H2.75C2.47386 8 2.25 7.77614 2.25 7.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Kbe=["color"],Jbe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,Kbe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Qbe=["color"],Zbe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,Qbe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),eAe=["color"],tAe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,eAe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M0.5 4C0.223858 4 0 4.22386 0 4.5V10.5C0 10.7761 0.223858 11 0.5 11H14.5C14.7761 11 15 10.7761 15 10.5V4.5C15 4.22386 14.7761 4 14.5 4H0.5ZM1 10V5H2.075V7.5C2.075 7.73472 2.26528 7.925 2.5 7.925C2.73472 7.925 2.925 7.73472 2.925 7.5V5H4.075V6.5C4.075 6.73472 4.26528 6.925 4.5 6.925C4.73472 6.925 4.925 6.73472 4.925 6.5V5H6.075V6.5C6.075 6.73472 6.26528 6.925 6.5 6.925C6.73472 6.925 6.925 6.73472 6.925 6.5V5H8.075V7.5C8.075 7.73472 8.26528 7.925 8.5 7.925C8.73472 7.925 8.925 7.73472 8.925 7.5V5H10.075V6.5C10.075 6.73472 10.2653 6.925 10.5 6.925C10.7347 6.925 10.925 6.73472 10.925 6.5V5H12.075V6.5C12.075 6.73472 12.2653 6.925 12.5 6.925C12.7347 6.925 12.925 6.73472 12.925 6.5V5H14V10H1Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),nAe=["color"],rAe=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,nAe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M2.5 4C2.22386 4 2 4.22386 2 4.5C2 4.77614 2.22386 5 2.5 5H12.5C12.7761 5 13 4.77614 13 4.5C13 4.22386 12.7761 4 12.5 4H2.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),iAe=["color"],IG=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,iAe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M4 6H11L7.5 10.5L4 6Z",fill:r}))}),sAe=["color"],PG=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,sAe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M4 9H11L7.5 4.5L4 9Z",fill:r}))}),oAe=["color"],LG=E.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=Ui(t,oAe);return E.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),E.createElement("path",{d:"M7.49998 1L6.92321 2.00307L1.17498 12L0.599976 13H1.7535H13.2464H14.4L13.825 12L8.07674 2.00307L7.49998 1ZM7.49998 3.00613L2.3285 12H12.6714L7.49998 3.00613Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});function KL(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}const JL=E.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:r,fontSize:i=1,children:s,characters:o,onSync:a,...l},c)=>{const{Text:u,preloadFont:f}=vh(async()=>P4(()=>import("./chunk-9ee83150.js"),["assets/chunks/chunk-9ee83150.js","assets/chunks/chunk-3010a972.js","assets/chunks/chunk-d9bdcef8.js","assets/chunks/chunk-cf010ec4.js"]),[]),h=wt(({invalidate:g})=>g),[d]=E.useState(()=>new u),[p,m]=E.useMemo(()=>{const g=[];let v="";return E.Children.forEach(s,x=>{typeof x=="string"||typeof x=="number"?v+=x:g.push(x)}),[g,v]},[s]);return vh(()=>new Promise(g=>f({font:r,characters:o},g)),["troika-text",r,o]),E.useLayoutEffect(()=>void d.sync(()=>{h(),a&&a(d)})),E.useEffect(()=>()=>d.dispose(),[d]),E.createElement("primitive",Ct({object:d,ref:c,font:r,text:m,anchorX:e,anchorY:n,fontSize:i,sdfGlyphSize:t},l),p)}),ya=E.memo(({isPerf:t,color:e,colorBlind:n,customData:r,isMemory:i,isShadersInfo:s,metric:o,fontSize:a,offsetY:l=0,offsetX:c,round:u,hasInstance:f})=>{const{width:h,height:d}=wt(g=>g.viewport),p=E.useRef(null),m=E.useRef(null);return obe("log",function([v,x]){var y;if(!v||!p.current||(r&&(p.current.text=(Math.round(Oa().customData*Math.pow(10,u))/Math.pow(10,u)).toFixed(u)),!o))return;let A=v[o];if(s?A=(y=x.info.programs)==null?void 0:y.length:o==="matriceCount"?A=ta.value:!t&&x.info.render&&(A=(i?x.info.memory:x.info.render)[o]),o==="fps"&&(p.current.color=Oa().overclockingFps?Gs(n).overClock.toString():`rgb(${Gs(n).fps.toString()})`),p.current.text=(Math.round(A*Math.pow(10,u))/Math.pow(10,u)).toFixed(u),f){const T=x.info.instance;if(typeof T>"u"&&o!=="matriceCount")return;let w;o==="matriceCount"?w=mp.value:w=T[o],w>0?(p.current.fontSize=a/1.15,m.current.fontSize=A>0?a/1.4:a,p.current.position.y=d/2-l-a/1.9,m.current.text=" ±	"+(Math.round(w*Math.pow(10,u))/Math.pow(10,u)).toFixed(u)):(m.current.text&&(m.current.text=""),p.current.position.y=d/2-l-a,p.current.fontSize=a)}ta.value-=1,p.current.updateMatrix(),p.current.matrixWorld.copy(p.current.matrix)}),ce.jsxs(E.Suspense,{fallback:null,children:[ce.jsxs(JL,{textAlign:"justify",matrixAutoUpdate:!1,ref:p,fontSize:a,position:[-h/2+c+a,d/2-l-a,0],color:e,characters:"0123456789",onUpdate:g=>{g.updateMatrix(),ta.value-=1,g.matrixWorld.copy(g.matrix)},children:[ce.jsx("meshBasicMaterial",{blending:Vl}),"0"]}),f&&ce.jsx(JL,{textAlign:"justify",matrixAutoUpdate:!1,ref:m,fontSize:8,position:[-h/2+c+a,d/2-l-a*1.15,0],color:"lightgrey",characters:"0123456789",onUpdate:g=>{g.updateMatrix(),ta.value-=1,g.matrixWorld.copy(g.matrix)},children:ce.jsx("meshBasicMaterial",{blending:Vl})})]})}),aAe=({colorBlind:t,customData:e,minimal:n,matrixUpdate:r})=>ce.jsxs(ce.Fragment,{children:[ce.jsx(ya,{colorBlind:t,color:`rgb(${Gs(t).fps.toString()})`,isPerf:!0,metric:"fps",fontSize:14,offsetX:140,round:0}),ce.jsx(ya,{color:`rgb(${Gs(t).cpu.toString()})`,isPerf:!0,metric:"cpu",fontSize:14,offsetX:72,round:3}),ce.jsx(ya,{color:`rgb(${Gs(t).gpu.toString()})`,isPerf:!0,metric:"gpu",fontSize:14,offsetX:10,round:3}),n?null:ce.jsxs(ce.Fragment,{children:[ce.jsx(ya,{metric:"calls",fontSize:14,offsetX:200,round:0,hasInstance:!0}),ce.jsx(ya,{metric:"triangles",fontSize:14,offsetX:260,round:0,hasInstance:!0}),ce.jsx(ya,{isMemory:!0,metric:"geometries",fontSize:14,offsetY:30,offsetX:0,round:0}),ce.jsx(ya,{isMemory:!0,metric:"textures",fontSize:14,offsetY:30,offsetX:80,round:0}),ce.jsx(ya,{isShadersInfo:!0,metric:"programs",fontSize:14,offsetY:30,offsetX:140,round:0}),ce.jsx(ya,{metric:"lines",fontSize:14,offsetY:30,offsetX:200,round:0,hasInstance:!0}),ce.jsx(ya,{metric:"points",fontSize:14,offsetY:30,offsetX:260,round:0,hasInstance:!0}),r&&ce.jsx(ya,{isPerf:!0,metric:"matriceCount",fontSize:14,offsetY:30,offsetX:320,round:0,hasInstance:!0})]}),e&&ce.jsx(ya,{color:`rgb(${Gs(t).custom.toString()})`,customData:e,fontSize:14,offsetY:0,offsetX:n?200:320,round:e.round||2})]}),lAe=({colorBlind:t,minimal:e,chart:n={length:120,hz:60}})=>{const r=E.useMemo(()=>({fps:new Float32Array(n.length*3),cpu:new Float32Array(n.length*3),gpu:new Float32Array(n.length*3)}),[n]),i=E.useRef(null),s=E.useRef(null),o=E.useRef(null),a=E.useRef(null),l=E.useMemo(()=>new J(0,0,0),[]),c=(u,f=1,h,d)=>{let p=0;const{width:m,height:g}=d,v=Oa().chart.data[u];if(!v||v.length===0)return;const x=e?2:6,y=e?12:50;let A=v.length;for(let T=0;T<A;T++){let w=(Oa().chart.circularId+T+1)%A;v[w]!==void 0&&(v[w]>p&&(p=v[w]*f),l.set(x+T/(A-1)*(m-x*2)-m/2,Math.min(100,v[w])*f/100*(g-x*2-y)-g/2,0),l.toArray(h.attributes.position.array,T*3))}h.attributes.position.needsUpdate=!0};return rn(function({viewport:f}){c("fps",1,i.current,f),s.current&&s.current.color.set(Oa().overclockingFps?Gs(t).overClock.toString():`rgb(${Gs(t).fps.toString()})`),c("gpu",5,o.current,f),c("cpu",5,a.current,f)}),ce.jsxs(ce.Fragment,{children:[ce.jsxs("line",{onUpdate:u=>{u.updateMatrix(),ta.value-=1,u.matrixWorld.copy(u.matrix)},children:[ce.jsx("bufferGeometry",{ref:i,children:ce.jsx("bufferAttribute",{attach:"attributes-position",count:n.length,array:r.fps,itemSize:3,usage:Zi,needsUpdate:!0})}),ce.jsx("lineBasicMaterial",{ref:s,color:`rgb(${Gs(t).fps.toString()})`,transparent:!0,opacity:.5})]}),ce.jsxs("line",{onUpdate:u=>{u.updateMatrix(),ta.value-=1,u.matrixWorld.copy(u.matrix)},children:[ce.jsx("bufferGeometry",{ref:o,children:ce.jsx("bufferAttribute",{attach:"attributes-position",count:n.length,array:r.gpu,itemSize:3,usage:Zi,needsUpdate:!0})}),ce.jsx("lineBasicMaterial",{color:`rgb(${Gs(t).gpu.toString()})`,transparent:!0,opacity:.5})]}),ce.jsxs("line",{onUpdate:u=>{u.updateMatrix(),ta.value-=1,u.matrixWorld.copy(u.matrix)},children:[ce.jsx("bufferGeometry",{ref:a,children:ce.jsx("bufferAttribute",{attach:"attributes-position",count:n.length,array:r.cpu,itemSize:3,usage:Zi,needsUpdate:!0})}),ce.jsx("lineBasicMaterial",{color:`rgb(${Gs(t).cpu.toString()})`,transparent:!0,opacity:.5})]})]})},cAe=({colorBlind:t,chart:e,customData:n,matrixUpdate:r,showGraph:i=!0,antialias:s=!0,minimal:o})=>{const a=E.useRef(void 0),l=za(c=>c.paused);return ce.jsxs(mbe,{style:{display:"flex",position:"absolute",height:`${o?37:i?100:60}px`,minWidth:`${o?"100px":n?"370px":"310px"}`},children:[ce.jsx(Wz,{ref:a,orthographic:!0,dpr:s?[1,2]:1,gl:{antialias:!0,alpha:!0,stencil:!1,depth:!1},onCreated:({scene:c})=>{c.traverse(u=>{u.matrixWorldAutoUpdate=!1,u.matrixAutoUpdate=!1})},flat:!0,style:{marginBottom:"-42px",position:"relative",pointerEvents:"none",background:"transparent !important",height:`${o?37:i?100:60}px`},children:l?null:ce.jsxs(ce.Fragment,{children:[ce.jsx(uAe,{}),ce.jsx(aAe,{customData:n,minimal:o,matrixUpdate:r}),i&&ce.jsx(lAe,{colorBlind:t,minimal:o,chart:e})]})}),l&&ce.jsxs(gbe,{children:[ce.jsx(Jbe,{})," PAUSED"]})]})},uAe=()=>(rn(function({gl:e,scene:n,camera:r}){r.updateMatrix(),ta.value-=1,r.matrixWorld.copy(r.matrix),r.matrixWorldInverse.copy(r.matrixWorld).invert(),e.render(n,r),mp.value=0,ta.value=0},1/0),null),fAe=E.forwardRef(({portal:t,className:e,children:n,name:r,...i},s)=>{const o=wt(u=>u.gl),a=E.useRef(null),l=E.useRef(null),c=(t==null?void 0:t.current)!=null?t.current:o.domElement.parentNode;return E.useLayoutEffect(()=>{if(!a.current||!c)return;const u=document.createElement("div"),f=l.current=nC(u);return c.appendChild(u),()=>{f.unmount(),l.current=null,c.removeChild(u)}},[c]),E.useLayoutEffect(()=>{const u=l.current;u&&u.render(ce.jsx("div",{ref:s,className:e,children:n}))}),ce.jsx("group",{name:r,...i,ref:a})});function hAe(t){let e=0;for(let r in t.attributes){const i=t.getAttribute(r);e+=i.count*i.itemSize*i.array.BYTES_PER_ELEMENT}const n=t.getIndex();return e+=n?n.count*n.itemSize*n.array.BYTES_PER_ELEMENT:0,e}const QL=(t,e)=>{const n=i=>{switch(i){case 1e3:return"RepeatWrapping";case 1001:return"ClampToEdgeWrapping";case 1002:return"MirroredRepeatWrapping";default:return"ClampToEdgeWrapping"}},r=i=>{switch(i){case 3e3:return"LinearEncoding";case 3001:return"sRGBEncoding";case 3002:return"RGBEEncoding";case 3003:return"LogLuvEncoding";case 3004:return"RGBM7Encoding";case 3005:return"RGBM16Encoding";case 3006:return"RGBDEncoding";case 3007:return"GammaEncoding";default:return"ClampToEdgeWrapping"}};return{name:t,url:e.image.currentSrc,encoding:r(e.encoding),wrapT:n(e.wrapT),flipY:e.flipY.toString()}},dAe=({program:t,material:e,setTexNumber:n})=>{const r=za(o=>o.gl),[i,s]=E.useState(null);return E.useEffect(()=>{if(r){const o=t==null?void 0:t.getUniforms();let a=0;const l=new Map;o.seq.forEach(c=>{if(!c.id.includes("uTroika")&&c.id!=="isOrthographic"&&c.id!=="uvTransform"&&c.id!=="lightProbe"&&c.id!=="projectionMatrix"&&c.id!=="viewMatrix"&&c.id!=="normalMatrix"&&c.id!=="modelMatrix"&&c.id!=="modelViewMatrix"){let u=[],f={name:c.id};c.cache&&(c.cache.forEach(h=>{typeof h<"u"&&u.push(h.toString().substring(0,4))}),f.value=u.join(),e[c.id]&&e[c.id].image&&e[c.id].image&&(a++,f.value=QL(c.id,e[c.id])),f.value||(f.value="empty"),l.set(c.id,f))}}),e.uniforms&&Object.keys(e.uniforms).forEach(c=>{const u=e.uniforms[c];if(u.value){const{value:f}=u;let h={name:c};if(c.includes("uTroika"))return;if(f.isTexture)a++,h.value=QL(c,f);else{let d=JSON.stringify(f);try{d=JSON.stringify(f)}catch{d=f.toString()}h.value=d}l.set(c,h)}}),a>0&&n(a),s(l)}},[]),ce.jsx(CG,{children:i&&Array.from(i.values()).map(o=>ce.jsx("span",{children:typeof o.value=="string"?ce.jsx("li",{children:ce.jsxs("span",{children:[o.name," :"," ",ce.jsxs("b",{children:[o.value.substring(0,30),o.value.length>30?"...":""]})]})}):ce.jsxs(ce.Fragment,{children:[ce.jsx("li",{children:ce.jsxs("b",{children:[o.value.name,":"]})}),ce.jsxs("div",{children:[Object.keys(o.value).map(a=>a!=="name"?ce.jsx("div",{children:a==="url"?ce.jsx("a",{href:o.value[a],target:"_blank",children:ce.jsx("img",{src:o.value[a]})}):ce.jsxs("li",{children:[a,": ",ce.jsx("b",{children:o.value[a]})]})},a):null),ce.jsxs(MG,{onClick:()=>{var a;console.info(e[o.value.name]||((a=e==null?void 0:e.uniforms[o.value.name])==null?void 0:a.value))},children:["console.info(",o.value.name,");"]})]})]})},o.name))})},pAe=({el:t})=>{za(r=>r.log);const e=za(r=>r.gl),n=r=>{if(!e)return 0;const i=Math.round(r.drawCounts.total/(e.info.render.triangles+e.info.render.lines+e.info.render.points)*100*10)/10;return isFinite(i)&&i||0};return ce.jsx(ce.Fragment,{children:t.drawCounts.total>0&&ce.jsxs(Hs,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[t.drawCounts.type==="Triangle"?ce.jsx(LG,{style:{top:"-1px"}}):ce.jsx(RG,{style:{top:"-1px"}}),t.drawCounts.total,ce.jsxs("small",{children:[t.drawCounts.type,"s"]}),e&&ce.jsxs(Po,{style:{bottom:"-10px",width:"40px",fontWeight:"bold"},children:[t.visible&&!t.material.wireframe?n(t):0,"%"]})]})})},mAe=({el:t})=>{const[e,n]=E.useState(t.visible),[r,i]=E.useState(t.expand),[s,o]=E.useState(0),{meshes:a,program:l,material:c}=t;return ce.jsxs(ybe,{children:[ce.jsxs(pbe,{onClick:()=>{t.expand=!r,Object.keys(a).forEach(u=>{const f=a[u];f.material.wireframe=!1}),i(!r)},children:[ce.jsx(wC,{style:{marginRight:"6px"},children:r?ce.jsx("span",{children:ce.jsx(IG,{})}):ce.jsx("span",{children:ce.jsx(PG,{})})}),l&&ce.jsxs("span",{children:[ce.jsx(xbe,{children:l.name}),ce.jsxs(Hs,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[ce.jsx(Vbe,{style:{top:"-1px"}}),Object.keys(a).length,ce.jsx("small",{children:Object.keys(a).length>1?"users":"user"})]}),s>0&&ce.jsxs(Hs,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[s>1?ce.jsx(i4,{style:{top:"-1px"}}):ce.jsx(i4,{style:{top:"-1px"}}),s,ce.jsx("small",{children:"tex"})]}),ce.jsx(pAe,{el:t}),c.glslVersion==="300 es"&&ce.jsxs(Hs,{style:{height:"auto",width:"auto",margin:"0 4px"},children:[ce.jsx(Zbe,{style:{top:"-1px"}}),"300",ce.jsx("small",{children:"es"}),ce.jsx(Po,{style:{bottom:"-10px",width:"40px"},children:"glsl"})]})]}),ce.jsx(vbe,{onPointerEnter:()=>{Object.keys(a).forEach(u=>{const f=a[u];f.material.wireframe=!0})},onPointerLeave:()=>{Object.keys(a).forEach(u=>{const f=a[u];f.material.wireframe=!1})},onClick:u=>{u.stopPropagation(),Object.keys(a).forEach(f=>{const h=a[f],d=!e;h.visible=d,t.visible=d,n(d)})},children:e?ce.jsx(Fbe,{}):ce.jsx(Bbe,{})})]}),ce.jsxs("div",{style:{maxHeight:r?"9999px":0,overflow:"hidden"},children:[ce.jsxs(qL,{children:[ce.jsx(Mbe,{})," Uniforms:"]}),ce.jsx(dAe,{program:l,material:c,setTexNumber:o}),ce.jsxs(qL,{children:[ce.jsx(Ibe,{})," Geometries:"]}),ce.jsx(CG,{children:a&&Object.keys(a).map(u=>a[u]&&a[u].geometry&&ce.jsxs(Abe,{children:[ce.jsxs("span",{children:[a[u].geometry.type,": "]}),a[u].userData&&a[u].userData.drawCount&&ce.jsxs("b",{children:[ce.jsxs("div",{children:[a[u].userData.drawCount.count,ce.jsxs("small",{children:[" ",a[u].userData.drawCount.type,"s"]})]}),ce.jsx("br",{}),ce.jsxs("div",{children:[Math.round(hAe(a[u].geometry)/1024*1e3)/1e3,"Kb",ce.jsx("small",{children:" memory used"})]})]})]},u))}),ce.jsxs(MG,{onClick:()=>{console.info(c)},children:["console.info(",c.type,")"]})]})]})},gAe=()=>{za(e=>e.triggerProgramsUpdate);const t=za(e=>e.programs);return ce.jsx(_be,{children:t&&Array.from(t.values()).map(e=>e&&e?ce.jsx(mAe,{el:e},e.material.uuid):null)})},Gs=t=>({overClock:"#ff6eff",fps:t?"100, 143, 255":"238,38,110",cpu:t?"254, 254, 98":"66,226,46",gpu:t?"254,254,254":"253,151,31",custom:t?"86,180,233":"40,255,255"}),vAe=({showGraph:t,colorBlind:e})=>{const n=za(i=>i.overclockingFps),r=za(i=>i.fpsLimit);return ce.jsxs(Po,{style:t?{color:n?Gs(e).overClock.toString():`rgb(${Gs(e).fps})`}:{},children:["FPS ",n?`${r}🚀`:""]})},yAe=({showGraph:t,colorBlind:e,customData:n,minimal:r})=>{const i=za(s=>s.gl);return i?ce.jsxs(dbe,{children:[ce.jsxs(Hs,{children:[ce.jsx(jbe,{}),ce.jsx(Po,{style:t?{color:`rgb(${Gs(e).gpu.toString()})`}:{},children:"GPU"}),ce.jsx(_T,{children:"ms"})]}),ce.jsxs(Hs,{children:[ce.jsx(tAe,{}),ce.jsx(Po,{style:t?{color:`rgb(${Gs(e).cpu.toString()})`}:{},children:"CPU"}),ce.jsx(_T,{children:"ms"})]}),ce.jsxs(Hs,{children:[ce.jsx(Hbe,{}),ce.jsx(vAe,{showGraph:t,colorBlind:e})]}),!r&&i&&ce.jsxs(Hs,{children:[ce.jsx(rAe,{}),ce.jsx(Po,{children:i.info.render.calls===1?"call":"calls"})]}),!r&&i&&ce.jsxs(Hs,{children:[ce.jsx(LG,{}),ce.jsx(Po,{children:"Triangles"})]}),n&&ce.jsxs(Hs,{children:[ce.jsx(Sbe,{}),ce.jsx(Po,{style:t?{color:`rgb(${Gs(e).custom})`}:{},children:n.name}),n.info&&ce.jsx(_T,{children:n.info})]})]}):null},xAe=({showGraph:t,colorBlind:e,deepAnalyze:n,customData:r,matrixUpdate:i,openByDefault:s,minimal:o})=>ce.jsxs(ce.Fragment,{children:[ce.jsx(yAe,{showGraph:t,colorBlind:e,customData:r,minimal:o}),!o&&ce.jsx(_Ae,{matrixUpdate:i,openByDefault:s,deepAnalyze:n,showGraph:t})]}),EAe=({matrixUpdate:t})=>ce.jsxs("div",{children:[ce.jsxs(Hs,{children:[ce.jsx(Xbe,{}),ce.jsx(Po,{children:"Geometries"})]}),ce.jsxs(Hs,{children:[ce.jsx(i4,{}),ce.jsx(Po,{children:"Textures"})]}),ce.jsxs(Hs,{children:[ce.jsx(RG,{}),ce.jsx(Po,{children:"shaders"})]}),ce.jsxs(Hs,{children:[ce.jsx(qbe,{}),ce.jsx(Po,{children:"Lines"})]}),ce.jsxs(Hs,{children:[ce.jsx(Lbe,{}),ce.jsx(Po,{children:"Points"})]}),t&&ce.jsxs(Hs,{children:[ce.jsx(Obe,{}),ce.jsx(Po,{children:"Matrices"})]})]}),ZL=({tab:t,title:e,set:n})=>{const r=za(i=>i.tab);return ce.jsx(wC,{className:`${r===t?" __perf_toggle_tab_active":""}`,onClick:()=>{n(!0),Ko({tab:t})},children:ce.jsx("span",{children:e})})},_Ae=({openByDefault:t,showGraph:e,deepAnalyze:n,matrixUpdate:r})=>{const[i,s]=Ue.useState(t);return ce.jsxs("span",{children:[ce.jsx(bAe,{show:i,showGraph:e,matrixUpdate:r}),t&&!n?null:ce.jsxs(bbe,{className:"__perf_toggle",children:[n&&ce.jsx(ZL,{tab:"programs",title:"Programs",set:s}),n&&ce.jsx(ZL,{tab:"infos",title:"Infos",set:s}),ce.jsx(wC,{onClick:()=>{s(!i)},children:i?ce.jsxs("span",{children:[ce.jsx(IG,{})," Minimize"]}):ce.jsxs("span",{children:[ce.jsx(PG,{})," More"]})})]})]})},bAe=({show:t,showGraph:e,matrixUpdate:n})=>{const r=za(i=>i.tab);return ce.jsxs(ce.Fragment,{children:[ce.jsx(EAe,{matrixUpdate:n}),t&&ce.jsx("div",{children:ce.jsx(Ebe,{style:{marginTop:e?"38px":0},children:r==="programs"&&ce.jsx(gAe,{})})})]})},AAe=({showGraph:t=!0,colorBlind:e=!1,openByDefault:n=!0,className:r,overClock:i=!1,style:s,position:o="top-right",chart:a,logsPerSecond:l,deepAnalyze:c=!1,antialias:u=!0,customData:f,matrixUpdate:h,minimal:d})=>{const p=E.useRef(null);return ce.jsxs(ce.Fragment,{children:[ce.jsx(fbe,{logsPerSecond:l,chart:a,overClock:i,deepAnalyze:c,matrixUpdate:h}),ce.jsx(fAe,{name:"r3f-perf",children:ce.jsxs(hbe,{className:(r?" ".concat(r):" ")+` ${o||""} ${d?"minimal":""}`,style:{minHeight:d?"37px":t?"100px":"60px",...s},ref:p,children:[ce.jsx(cAe,{perfContainerRef:p,colorBlind:e,chart:a,showGraph:t,antialias:u,customData:f,minimal:d,matrixUpdate:h}),ce.jsx(xAe,{colorBlind:e,showGraph:t,deepAnalyze:c,openByDefault:n,customData:f,matrixUpdate:h,minimal:d})]})})]})},TAe=t=>t;function eN(t,e=TAe){if(t)return t.split(",").map(parseFloat).map(e)}const wAe={PerspectiveCamera:RH,OrthographicCamera:b_,CubeCamera:lve};function SAe({_ref:t,animate:e,type:n="PerspectiveCamera",label:r,near:i=.1,far:s=.2,fov:o=75,position:a,rotation:l,matrix:c,makeDefault:u=!1,helper:f=!1,...h}){const d=E.useRef();cm(f?d:null,H5);const p=E.useMemo(()=>new J(0,0,0),[]),m=E.useMemo(()=>({matrix:new yt,position:new J(0,0,0),rotation:new wi(0,0,0),quaternion:new kn(0,0,0,0),scale:new J(0,0,0)}),[]);E.useEffect(()=>{if(d.current&&c){const v=d.current;m.matrix.fromArray(c),m.matrix.decompose(v.position,m.quaternion,v.scale),v.rotation.setFromQuaternion(m.quaternion),v.updateMatrixWorld(!0),v.updateWorldMatrix(!0,!0),ng()}},[d.current,c]),E.useEffect(()=>{if(!d.current)return;const v=d.current;v.near=i,v.far=s,v.fov=o},[d.current,o,i,s]),rn(v=>{e&&d.current&&(typeof e=="function"?(e(d.current,v),d.current.lookAt(p)):console.log("animated camera motion is not implemented yet"))});const g=wAe[n];return ce.jsxs(ce.Fragment,{children:[ce.jsx(g,{ref:d,position:a||void 0,rotation:l||void 0,makeDefault:u,...h}),r&&r.length?ce.jsxs(am,{wrapperClass:"label",as:"span",style:{display:"inline-block",borderRadius:"0.25rem",padding:"0.25rem 0.5rem 0.25rem 0.5rem ",background:"white",color:"black",width:"max-content",maxWidth:"200px",height:"fit-content"},children:[" ",r," "]}):null]})}function CAe(t,e,n){const r=n/t;return 360/Math.PI*Math.atan(r/(2*e))}function MAe(t,e,n){const r=2*e*Math.tan(t/360*Math.PI);return n/r}function RAe({parent:t,controls:e,panSpeed:n=.016,viewHeight:r}){return E.useLayoutEffect(()=>{if(!e)return;const i=function(){const o=new J;return function(a){let l=!1;const c=e.object,u=n*r;console.log("view height",r,"panSpeed",n,"adjusted",u);const f=Math.max(u,.001),h=a.shiftKey?f*10:f;console.log("speed:",h,"panSpeed",n),a.code==="KeyW"&&(o.setFromMatrixColumn(e.object.matrix,0),o.crossVectors(e.object.up,o),o.normalize(),o.multiplyScalar(h),e.target.add(o),c.position.add(o),l=!0),a.code==="KeyS"&&(o.setFromMatrixColumn(e.object.matrix,0),o.crossVectors(e.object.up,o),o.normalize(),o.multiplyScalar(h),o.negate(),e.target.add(o),c.position.add(o),l=!0),a.code==="KeyA"&&(o.copy(e.target),o.sub(e.object.position),o.crossVectors(e.object.up,o),o.normalize(),o.multiplyScalar(h),e.target.add(o),c.position.add(o),l=!0),a.code==="KeyD"&&(o.copy(e.target),o.sub(e.object.position),o.crossVectors(e.object.up,o),o.normalize(),o.multiplyScalar(h),o.negate(),e.target.add(o),c.position.add(o),l=!0),a.code==="KeyE"&&(o.set(0,h,0),e.target.add(o),c.position.add(o),l=!0),a.code==="KeyQ"&&(o.set(0,-h,0),e.target.add(o),c.position.add(o),l=!0),l&&ng()}}(),s=()=>{};if(t){const o=t;return o.tabIndex=1,o.addEventListener("keydown",i),o.addEventListener("keyup",s),()=>{o.removeEventListener("keydown",i),o.removeEventListener("keyup",s)}}},[e,t,n,r]),ce.jsx(ce.Fragment,{})}function IAe(t){return t*Math.PI/180}function PAe({parent:t,ctrlRef:e,onChange:n,panSpeed:r=1,fov:i=75,zoom:s=1,near:o,far:a,initPosition:l=[-.5,.75,.8],initRotation:c=[-.5*Math.PI,0,0]}){var u,f;let h=E.useRef();h=e||h;const d=E.useRef(),p=E.useRef(),m=E.useRef();E.useLayoutEffect(()=>{p.current.up.copy(hn.DEFAULT_UP),m.current.up.copy(hn.DEFAULT_UP)},[hn.DEFAULT_UP]);const g=E.useMemo(()=>$u.parse(Ic.location.search),[]),[v,x]=Mr("Camera Control",()=>({zoom:{label:"Zoom (px)",value:Number(g.zoom)||s||1,step:.001,min:.001,pad:4},fov:{label:"Fov°",value:Number(g.fov)||i||75,step:.1,min:.1,max:220},position:{value:eN(g.initCamPos)||l,step:.01,min:-100,max:100},rotation:{value:eN(g.initCamRot,IAe)||c,step:.01}})),{ctype:y,...A}=Mr("Camera Control",{ctype:{value:"Perspective",options:["Perspective","Orthographic"],label:"Cam Type"},zoomSpeed:1,near:{label:"Near (cm)",value:parseFloat(g.near)||o||.01,min:.001,step:1e-4},far:{label:"Far (m)",value:parseFloat(g.far)||a||200,min:.001,step:.001},panSpeed:{value:Number(g.panSpeed)||r||1,pad:5,step:.01,min:.001,max:5}}),{set:T}=wt(({get:L,set:B})=>({get:L,set:B})),w=(u=t.current)==null?void 0:u.clientHeight,M=(f=t.current)==null?void 0:f.clientWidth;E.useLayoutEffect(()=>{var L,B,N;if(!T)return;let $,U,Q;if(d.current){const{target:Y}=h.current;Q=d.current.position.distanceTo(Y),$=d.current.position,U=d.current.rotation}else $=new J(...v.position),U=new wi(...v.rotation);if(y.toLowerCase()==="perspective"){const Y=(L=d==null?void 0:d.current)==null?void 0:L.zoom;m.current.position.copy($),m.current.rotation.copy(U);const ee=d.current=m.current;if(h.current.object=ee,Y&&Q){const ne=CAe(Y,Q,w);ee.fov=ne,ee.updateProjectionMatrix(),x({fov:ne})}}else if(y.toLowerCase()==="orthographic"){const Y=(B=d==null?void 0:d.current)==null?void 0:B.fov;p.current.position.copy($),m.current.rotation.copy(U),(N=d.current)!=null&&N.far&&(p.current.far=d.current.far);const ee=d.current=p.current;if(h.current.object=ee,Y&&Q){ee.near=-ee.far;const ne=MAe(Y,Q,w);ee.zoom=ne,ee.updateProjectionMatrix(),x({zoom:w/ne})}else console.warn(`camera tpe ${y} is not defined`)}d.current&&T({camera:d.current})},[y]);function C(){const L=h.current.object;if(!L)return;const B=L.position.distanceTo(h.current.target);if(typeof n=="function"){if(L.type==="PerspectiveCamera"){const{type:N,near:$,far:U,matrix:Q,position:Y,rotation:ee,up:ne,fov:P,focus:se,aspect:re}=L;n({type:N,near:$,far:U,matrix:Q.elements,position:Y.toArray(),rotation:ee.toArray(),up:ne.toArray(),fov:P,focus:se,aspect:re,orbit_distance:B})}else if(L.type==="OrthographicCamera"){const{type:N,near:$,far:U,matrix:Q,position:Y,rotation:ee,up:ne,zoom:P,left:se,top:re,bottom:Z,right:X}=L;n({type:N,near:$,far:U,matrix:Q.elements,position:Y.toArray(),rotation:ee.toArray(),up:ne.toArray(),aspect:(X-se)/(re-Z),zoom:w/P,left:se,top:re,bottom:Z,right:X,orbit_distance:B})}}}const{uplink:S}=E.useContext(Ur);E.useEffect(()=>S.subscribe("CAMERA_UPDATE",()=>C()),[]);const R=E.useMemo(()=>({matrix:""}),[]),O=E.useCallback(()=>{var L;const B=(L=h.current)==null?void 0:L.object;if(!B)return;const N=JSON.stringify([B.projectionMatrix.toArray(),B.position.toArray(),B.rotation.toArray(),B.fov]);R.matrix!==N&&C(),R.matrix=N},[d.current,n,w,x]);return E.useLayoutEffect(()=>C(),[h.current,A.near,A.far,v.fov,v.zoom,w,M,x,n]),ce.jsxs(ce.Fragment,{children:[ce.jsx(cve,{ref:h,makeDefault:!0,enableDamping:!1,enablePan:!0,screenSpacePanning:!0,onChange:O,maxPolarAngle:135/180*Math.PI,minPolarAngle:0/180*Math.PI,maxZoom:1/0,maxDistance:1/0,zoomSpeed:A.zoomSpeed}),ce.jsx(RH,{makeDefault:!0,ref:m,fov:v.fov,near:A.near,far:A.far},"perspective"),ce.jsx(b_,{makeDefault:!0,ref:p,zoom:w/v.zoom,near:A.near,far:A.far},"orthographic"),ce.jsx(RAe,{parent:t.current,viewHeight:v.zoom,controls:h.current,panSpeed:A.panSpeed/600})]})}function s4(){return s4=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s4.apply(this,arguments)}function LAe(t){var e=E.useRef([]),n=E.useRef(),r="ongamepadconnected"in window,i=function(c){var u;e.current=s4({},e.current,(u={},u[c.index]=c,u)),t(e.current)},s=function(c){i(c.gamepad)},o=function(){for(var c=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[],u=0;u<c.length;u++){var f=c[u];f&&f!==null&&i(f)}};E.useEffect(function(){return window.addEventListener("gamepadconnected",s),window.removeEventListener("gamepadconnected",s)});var a=function l(){r||o(),n.current=requestAnimationFrame(l)};return E.useEffect(function(){return n.current=requestAnimationFrame(a),function(){return cancelAnimationFrame(n.current)}}),e.current}function NG({_key:t,children:e}){const{sendMsg:n}=E.useContext(Ur);return LAe(r=>{const{axes:i,buttons:s}=r[0];n({etype:"GAMEPADS",key:t,value:{axes:i,buttons:s.map(o=>o.value)}})}),ce.jsx(ce.Fragment,{children:e})}function NAe({_key:t}){const{sendMsg:e}=E.useContext(Ur),{gl:n}=wt(),r=E.useCallback(()=>{const i=n.domElement.toDataURL("image/png");e({etype:"SNAPSHOT",key:t,value:{screen:i}});const s=document.createElement("a");s.setAttribute("download","canvas.png"),s.setAttribute("href",i.replace("image/png","image/octet-stream")),s.click()},[e]);return Mr({"Take Screenshot":_g(r,{disabled:!1})},[]),null}const tN=t=>{let e;const n=new Set,r=(l,c)=>{const u=typeof l=="function"?l(e):l;if(!Object.is(u,e)){const f=e;e=c??(typeof u!="object"||u===null)?u:Object.assign({},e,u),n.forEach(h=>h(e,f))}},i=()=>e,a={setState:r,getState:i,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{n.clear()}};return e=t(r,i,a),a},OAe=t=>t?tN(t):tN,{useDebugValue:DAe}=Ue,{useSyncExternalStoreWithSelector:BAe}=AC;function kAe(t,e=t.getState,n){const r=BAe(t.subscribe,t.getState,t.getServerState||t.getState,e,n);return DAe(r),r}const nN=t=>{const e=typeof t=="function"?OAe(t):t,n=(r,i)=>kAe(e,r,i);return Object.assign(n,e),n},FAe=t=>t?nN(t):nN;var UAe=t=>FAe(t);const OG=UAe(t=>({position:[0,0,0],rotation:[0,0,0,"XYZ"],scale:[1,1,1],update:e=>{t(n=>({...n,...e}))}}));function zAe(t){return{x:t.x*Math.PI/180,y:t.y*Math.PI/180,z:t.z*Math.PI/180,order:t.order||"XYZ"}}const S_=({x:t,y:e,z:n})=>[t,e,n],HAe=({x:t,y:e,z:n,order:r=void 0})=>typeof r>"u"?[t,e,n]:[t,e,n,r],SC=t=>HAe(zAe(t)),CC=t=>typeof t=="number"?[t,t,t]:S_(t);function GAe({levaPrefix:t="Scene.World Transform",position:e,rotation:n,scale:r,children:i}){const{uplink:s}=E.useContext(Ur),o=OG(),a=E.useMemo(()=>{const f=$u.parse(Ic.location.search);let h,d,p;if(f.rotation){const[m,g,v]=f.rotation.split(",").filter(x=>x&&x===x).map(parseFloat);h={x:m,y:g,z:v}}if(f.position){const[m,g,v]=f.position.split(",").filter(x=>x&&x===x).map(parseFloat);d={x:m,y:g,z:v}}return f.scale&&(p=parseFloat(f.scale)),{rotation:h,position:d,scale:p}},[]),{position:l,rotation:c,scale:u}=Mr(t,{rotation:{value:n||a.rotation||{x:0,y:0,z:0},order:1,lock:!0},position:{value:e||a.position||{x:0,y:0,z:0},order:-1,lock:!0},scale:{value:r||a.scale||1,min:1e-4,step:.01,label:"Scale",order:2,pad:4}},{collapsed:!1});return E.useEffect(()=>(setTimeout(()=>s==null?void 0:s.publish({etype:"CAMERA_UPDATE"}),0),o.update({position:l,rotation:c,scale:u}),s.addReducer("CAMERA_MOVE",f=>{var h;return{...f,value:{...f.value,world:{...(h=f.value)==null?void 0:h.world,position:l,rotation:c,scale:u}}}})),[s,l,c,u]),ce.jsx("group",{position:S_(l)||[0,0,0],rotation:SC(c)||[0,0,0],scale:CC(u||1),children:i})}function MC({children:t}){const{position:e,rotation:n,scale:r}=OG();return ce.jsx("group",{position:S_(e)||[0,0,0],rotation:SC(n)||[0,0,0],scale:CC(r||1),children:t})}const VAe=()=>{var t,e;return(e=(t=window==null?void 0:window.matchMedia)==null?void 0:t.call(window,"(prefers-color-scheme:dark)"))!=null&&e.matches?"dark":"light"};function WAe({levaPrefix:t="Scene",color:e="#151822"}){const n=E.useMemo(()=>$u.parse(document.location.search),[document.location.search]),r=E.useMemo(()=>{let o,a;n.background&&([o,a]=n.background.split(",")),n.darkBg&&(o=n.darkBg),n.lightBg&&(a=n.lightBg);const l=VAe();let c;return l==="dark"?c=o||a:l==="light"?c=a||o:console.warn("Unknown theme",l),c?`#${c}`:e},[e,document.location.search]),{background:i}=Mr(t,{background:{value:r,label:"Background Color"}},{collapsed:!0},[e]),{uplink:s}=E.useContext(Ur);return E.useEffect(()=>s.addReducer("CAMERA_MOVE",({value:{world:o,...a},...l})=>({...l,value:{...a,world:{...o,background:i}}})),[s,i]),ce.jsx("color",{attach:"background",args:[i]})}un.prototype.raycast=X_e;function DG({canvasRef:t,className:e,frameloop:n="demand",style:r,xrMode:i,children:s,bgChildren:o,rawChildren:a,htmlChildren:l,up:c=null,initCamPosition:u,initCamRotation:f}){const h=E.useRef(),d=t||h,{sendMsg:p,uplink:m}=E.useContext(Ur),g=E.useMemo(()=>$u.parse(Ic.location.search),[]);E.useEffect(()=>{c&&hn.DEFAULT_UP.copy(new J(...c))},[c]);const v=E.useCallback(w=>{var M,C;m==null||m.publish({etype:"CAMERA_MOVE",key:"defaultCamera",value:{camera:{...w,height:(M=d.current)==null?void 0:M.clientHeight,width:(C=d.current)==null?void 0:C.clientWidth}}})},[p,m]),x=E.useMemo(()=>({overflow:"hidden",...r||{height:"100vh",width:"100vw",margin:"0px",border:"0px"}}),[r]),y=E.useRef();let A,T=i||g.xrMode||"VR";return T==="AR"?A=ce.jsx(wfe,{}):T==="VR"?A=ce.jsx(Sfe,{}):T==="hidden"&&(A=null),ce.jsxs(ce.Fragment,{children:[ce.jsxs("div",{style:x,className:e,children:[A,ce.jsx(Wz,{ref:d,shadows:!0,gl:{antialias:!0,preserveDrawingBuffer:!0},frameloop:n,tabIndex:1,children:ce.jsxs(xfe,{foveation:1,children:[g.debug||g.perf?ce.jsx(AAe,{position:"top-left"}):null,ce.jsx(j_e,{}),ce.jsx(NG,{}),ce.jsx(GAe,{}),ce.jsx(WAe,{}),ce.jsx(PAe,{ctrlRef:y,parent:d,onChange:v,panSpeed:1,initPosition:u,initRotation:f}),o,ce.jsx(E.Suspense,{children:ce.jsx(MC,{children:s})}),a,ce.jsx(NAe,{}),ce.jsx(pve,{alignment:"bottom-left",margin:[80,80],children:ce.jsx(mve,{axisColors:["#9d4b4b","#2f7f4f","#3b5b9d"],labelColor:"white"})})]})})]}),l]})}class jAe extends _r{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Ir(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(a))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){function n(c){const u=new DataView(c),f=32/8*3+32/8*3*3+16/8,h=u.getUint32(80,!0);if(80+32/8+h*f===u.byteLength)return!0;const p=[115,111,108,105,100];for(let m=0;m<5;m++)if(r(p,u,m))return!1;return!0}function r(c,u,f){for(let h=0,d=c.length;h<d;h++)if(c[h]!==u.getUint8(f+h))return!1;return!0}function i(c){const u=new DataView(c),f=u.getUint32(80,!0);let h,d,p,m=!1,g,v,x,y,A;for(let O=0;O<80-10;O++)u.getUint32(O,!1)==1129270351&&u.getUint8(O+4)==82&&u.getUint8(O+5)==61&&(m=!0,g=new Float32Array(f*3*3),v=u.getUint8(O+6)/255,x=u.getUint8(O+7)/255,y=u.getUint8(O+8)/255,A=u.getUint8(O+9)/255);const T=84,w=12*4+2,M=new on,C=new Float32Array(f*3*3),S=new Float32Array(f*3*3),R=new bt;for(let O=0;O<f;O++){const L=T+O*w,B=u.getFloat32(L,!0),N=u.getFloat32(L+4,!0),$=u.getFloat32(L+8,!0);if(m){const U=u.getUint16(L+48,!0);U&32768?(h=v,d=x,p=y):(h=(U&31)/31,d=(U>>5&31)/31,p=(U>>10&31)/31)}for(let U=1;U<=3;U++){const Q=L+U*12,Y=O*3*3+(U-1)*3;C[Y]=u.getFloat32(Q,!0),C[Y+1]=u.getFloat32(Q+4,!0),C[Y+2]=u.getFloat32(Q+8,!0),S[Y]=B,S[Y+1]=N,S[Y+2]=$,m&&(R.set(h,d,p).convertSRGBToLinear(),g[Y]=R.r,g[Y+1]=R.g,g[Y+2]=R.b)}}return M.setAttribute("position",new Qt(C,3)),M.setAttribute("normal",new Qt(S,3)),m&&(M.setAttribute("color",new Qt(g,3)),M.hasColors=!0,M.alpha=A),M}function s(c){const u=new on,f=/solid([\s\S]*?)endsolid/g,h=/facet([\s\S]*?)endfacet/g,d=/solid\s(.+)/;let p=0;const m=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,g=new RegExp("vertex"+m+m+m,"g"),v=new RegExp("normal"+m+m+m,"g"),x=[],y=[],A=[],T=new J;let w,M=0,C=0,S=0;for(;(w=f.exec(c))!==null;){C=S;const R=w[0],O=(w=d.exec(R))!==null?w[1]:"";for(A.push(O);(w=h.exec(R))!==null;){let N=0,$=0;const U=w[0];for(;(w=v.exec(U))!==null;)T.x=parseFloat(w[1]),T.y=parseFloat(w[2]),T.z=parseFloat(w[3]),$++;for(;(w=g.exec(U))!==null;)x.push(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3])),y.push(T.x,T.y,T.z),N++,S++;$!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+p),N!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+p),p++}const L=C,B=S-C;u.userData.groupNames=A,u.addGroup(L,B,M),M++}return u.setAttribute("position",new Ot(x,3)),u.setAttribute("normal",new Ot(y,3)),u}function o(c){return typeof c!="string"?new TextDecoder().decode(c):c}function a(c){if(typeof c=="string"){const u=new Uint8Array(c.length);for(let f=0;f<c.length;f++)u[f]=c.charCodeAt(f)&255;return u.buffer||u}else return c}const l=a(e);return n(l)?i(l):s(o(e))}}class rN extends Bg{constructor(e){super(e)}parse(e){function n(U){switch(U.image_type){case h:case m:if(U.colormap_length>256||U.colormap_size!==24||U.colormap_type!==1)throw new Error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case d:case p:case g:case v:if(U.colormap_type)throw new Error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case f:throw new Error("THREE.TGALoader: No data.");default:throw new Error("THREE.TGALoader: Invalid type "+U.image_type)}if(U.width<=0||U.height<=0)throw new Error("THREE.TGALoader: Invalid image size.");if(U.pixel_size!==8&&U.pixel_size!==16&&U.pixel_size!==24&&U.pixel_size!==32)throw new Error("THREE.TGALoader: Invalid pixel size "+U.pixel_size)}function r(U,Q,Y,ee,ne){let P,se;const re=Y.pixel_size>>3,Z=Y.width*Y.height*re;if(Q&&(se=ne.subarray(ee,ee+=Y.colormap_length*(Y.colormap_size>>3))),U){P=new Uint8Array(Z);let X,W,K,ge=0;const Se=new Uint8Array(re);for(;ge<Z;)if(X=ne[ee++],W=(X&127)+1,X&128){for(K=0;K<re;++K)Se[K]=ne[ee++];for(K=0;K<W;++K)P.set(Se,ge+K*re);ge+=re*W}else{for(W*=re,K=0;K<W;++K)P[ge+K]=ne[ee++];ge+=W}}else P=ne.subarray(ee,ee+=Q?Y.width*Y.height:Z);return{pixel_data:P,palettes:se}}function i(U,Q,Y,ee,ne,P,se,re,Z){const X=Z;let W,K=0,ge,Se;const xe=R.width;for(Se=Q;Se!==ee;Se+=Y)for(ge=ne;ge!==se;ge+=P,K++)W=re[K],U[(ge+xe*Se)*4+3]=255,U[(ge+xe*Se)*4+2]=X[W*3+0],U[(ge+xe*Se)*4+1]=X[W*3+1],U[(ge+xe*Se)*4+0]=X[W*3+2];return U}function s(U,Q,Y,ee,ne,P,se,re){let Z,X=0,W,K;const ge=R.width;for(K=Q;K!==ee;K+=Y)for(W=ne;W!==se;W+=P,X+=2)Z=re[X+0]+(re[X+1]<<8),U[(W+ge*K)*4+0]=(Z&31744)>>7,U[(W+ge*K)*4+1]=(Z&992)>>2,U[(W+ge*K)*4+2]=(Z&31)<<3,U[(W+ge*K)*4+3]=Z&32768?0:255;return U}function o(U,Q,Y,ee,ne,P,se,re){let Z=0,X,W;const K=R.width;for(W=Q;W!==ee;W+=Y)for(X=ne;X!==se;X+=P,Z+=3)U[(X+K*W)*4+3]=255,U[(X+K*W)*4+2]=re[Z+0],U[(X+K*W)*4+1]=re[Z+1],U[(X+K*W)*4+0]=re[Z+2];return U}function a(U,Q,Y,ee,ne,P,se,re){let Z=0,X,W;const K=R.width;for(W=Q;W!==ee;W+=Y)for(X=ne;X!==se;X+=P,Z+=4)U[(X+K*W)*4+2]=re[Z+0],U[(X+K*W)*4+1]=re[Z+1],U[(X+K*W)*4+0]=re[Z+2],U[(X+K*W)*4+3]=re[Z+3];return U}function l(U,Q,Y,ee,ne,P,se,re){let Z,X=0,W,K;const ge=R.width;for(K=Q;K!==ee;K+=Y)for(W=ne;W!==se;W+=P,X++)Z=re[X],U[(W+ge*K)*4+0]=Z,U[(W+ge*K)*4+1]=Z,U[(W+ge*K)*4+2]=Z,U[(W+ge*K)*4+3]=255;return U}function c(U,Q,Y,ee,ne,P,se,re){let Z=0,X,W;const K=R.width;for(W=Q;W!==ee;W+=Y)for(X=ne;X!==se;X+=P,Z+=2)U[(X+K*W)*4+0]=re[Z+0],U[(X+K*W)*4+1]=re[Z+0],U[(X+K*W)*4+2]=re[Z+0],U[(X+K*W)*4+3]=re[Z+1];return U}function u(U,Q,Y,ee,ne){let P,se,re,Z,X,W;switch((R.flags&x)>>y){default:case w:P=0,re=1,X=Q,se=0,Z=1,W=Y;break;case A:P=0,re=1,X=Q,se=Y-1,Z=-1,W=-1;break;case M:P=Q-1,re=-1,X=-1,se=0,Z=1,W=Y;break;case T:P=Q-1,re=-1,X=-1,se=Y-1,Z=-1,W=-1;break}if(B)switch(R.pixel_size){case 8:l(U,se,Z,W,P,re,X,ee);break;case 16:c(U,se,Z,W,P,re,X,ee);break;default:throw new Error("THREE.TGALoader: Format not supported.")}else switch(R.pixel_size){case 8:i(U,se,Z,W,P,re,X,ee,ne);break;case 16:s(U,se,Z,W,P,re,X,ee);break;case 24:o(U,se,Z,W,P,re,X,ee);break;case 32:a(U,se,Z,W,P,re,X,ee);break;default:throw new Error("THREE.TGALoader: Format not supported.")}return U}const f=0,h=1,d=2,p=3,m=9,g=10,v=11,x=48,y=4,A=0,T=1,w=2,M=3;if(e.length<19)throw new Error("THREE.TGALoader: Not enough data to contain header.");let C=0;const S=new Uint8Array(e),R={id_length:S[C++],colormap_type:S[C++],image_type:S[C++],colormap_index:S[C++]|S[C++]<<8,colormap_length:S[C++]|S[C++]<<8,colormap_size:S[C++],origin:[S[C++]|S[C++]<<8,S[C++]|S[C++]<<8],width:S[C++]|S[C++]<<8,height:S[C++]|S[C++]<<8,pixel_size:S[C++],flags:S[C++]};if(n(R),R.id_length+C>e.length)throw new Error("THREE.TGALoader: No data.");C+=R.id_length;let O=!1,L=!1,B=!1;switch(R.image_type){case m:O=!0,L=!0;break;case h:L=!0;break;case g:O=!0;break;case d:break;case v:O=!0,B=!0;break;case p:B=!0;break}const N=new Uint8Array(R.width*R.height*4),$=r(O,L,R,C,S);return u(N,R.width,R.height,$.pixel_data,$.palettes),{data:N,width:R.width,height:R.height,flipY:!0,generateMipmaps:!0,minFilter:js}}}class $Ae extends _r{load(e,n,r,i){const s=this,o=s.path===""?Si.extractUrlBase(e):s.path,a=new Ir(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{n(s.parse(l,o))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e,n){function r(D,G){const j=[],V=D.childNodes;for(let le=0,Ne=V.length;le<Ne;le++){const ze=V[le];ze.nodeName===G&&j.push(ze)}return j}function i(D){if(D.length===0)return[];const G=D.trim().split(/\s+/),j=new Array(G.length);for(let V=0,le=G.length;V<le;V++)j[V]=G[V];return j}function s(D){if(D.length===0)return[];const G=D.trim().split(/\s+/),j=new Array(G.length);for(let V=0,le=G.length;V<le;V++)j[V]=parseFloat(G[V]);return j}function o(D){if(D.length===0)return[];const G=D.trim().split(/\s+/),j=new Array(G.length);for(let V=0,le=G.length;V<le;V++)j[V]=parseInt(G[V]);return j}function a(D){return D.substring(1)}function l(){return"three_default_"+cn++}function c(D){return Object.keys(D).length===0}function u(D){return{unit:f(r(D,"unit")[0]),upAxis:h(r(D,"up_axis")[0])}}function f(D){return D!==void 0&&D.hasAttribute("meter")===!0?parseFloat(D.getAttribute("meter")):1}function h(D){return D!==void 0?D.textContent:"Y_UP"}function d(D,G,j,V){const le=r(D,G)[0];if(le!==void 0){const Ne=r(le,j);for(let ze=0;ze<Ne.length;ze++)V(Ne[ze])}}function p(D,G){for(const j in D){const V=D[j];V.build=G(D[j])}}function m(D,G){return D.build!==void 0||(D.build=G(D)),D.build}function g(D){const G={sources:{},samplers:{},channels:{}};let j=!1;for(let V=0,le=D.childNodes.length;V<le;V++){const Ne=D.childNodes[V];if(Ne.nodeType!==1)continue;let ze;switch(Ne.nodeName){case"source":ze=Ne.getAttribute("id"),G.sources[ze]=Be(Ne);break;case"sampler":ze=Ne.getAttribute("id"),G.samplers[ze]=v(Ne);break;case"channel":ze=Ne.getAttribute("target"),G.channels[ze]=x(Ne);break;case"animation":g(Ne),j=!0;break;default:console.log(Ne)}}j===!1&&(an.animations[D.getAttribute("id")||si.generateUUID()]=G)}function v(D){const G={inputs:{}};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"input":const Ne=a(le.getAttribute("source")),ze=le.getAttribute("semantic");G.inputs[ze]=Ne;break}}return G}function x(D){const G={};let V=D.getAttribute("target").split("/");const le=V.shift();let Ne=V.shift();const ze=Ne.indexOf("(")!==-1,Et=Ne.indexOf(".")!==-1;if(Et)V=Ne.split("."),Ne=V.shift(),G.member=V.shift();else if(ze){const ct=Ne.split("(");Ne=ct.shift();for(let ut=0;ut<ct.length;ut++)ct[ut]=parseInt(ct[ut].replace(/\)/,""));G.indices=ct}return G.id=le,G.sid=Ne,G.arraySyntax=ze,G.memberSyntax=Et,G.sampler=a(D.getAttribute("source")),G}function y(D){const G=[],j=D.channels,V=D.samplers,le=D.sources;for(const Ne in j)if(j.hasOwnProperty(Ne)){const ze=j[Ne],Et=V[ze.sampler],ct=Et.inputs.INPUT,ut=Et.inputs.OUTPUT,mt=le[ct],ft=le[ut],vt=T(ze,mt,ft);R(vt,G)}return G}function A(D){return m(an.animations[D],y)}function T(D,G,j){const V=an.nodes[D.id],le=Dt(V.id),Ne=V.transforms[D.sid],ze=V.matrix.clone().transpose();let Et,ct,ut,mt,ft,vt;const Mt={};switch(Ne){case"matrix":for(ut=0,mt=G.array.length;ut<mt;ut++)if(Et=G.array[ut],ct=ut*j.stride,Mt[Et]===void 0&&(Mt[Et]={}),D.arraySyntax===!0){const dn=j.array[ct],en=D.indices[0]+4*D.indices[1];Mt[Et][en]=dn}else for(ft=0,vt=j.stride;ft<vt;ft++)Mt[Et][ft]=j.array[ct+ft];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Ne);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Ne);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',Ne);break}const Nt=w(Mt,ze);return{name:le.uuid,keyframes:Nt}}function w(D,G){const j=[];for(const le in D)j.push({time:parseFloat(le),value:D[le]});j.sort(V);for(let le=0;le<16;le++)O(j,le,G.elements[le]);return j;function V(le,Ne){return le.time-Ne.time}}const M=new J,C=new J,S=new kn;function R(D,G){const j=D.keyframes,V=D.name,le=[],Ne=[],ze=[],Et=[];for(let ct=0,ut=j.length;ct<ut;ct++){const mt=j[ct],ft=mt.time,vt=mt.value;ot.fromArray(vt).transpose(),ot.decompose(M,S,C),le.push(ft),Ne.push(M.x,M.y,M.z),ze.push(S.x,S.y,S.z,S.w),Et.push(C.x,C.y,C.z)}return Ne.length>0&&G.push(new aa(V+".position",le,Ne)),ze.length>0&&G.push(new oa(V+".quaternion",le,ze)),Et.length>0&&G.push(new aa(V+".scale",le,Et)),G}function O(D,G,j){let V,le=!0,Ne,ze;for(Ne=0,ze=D.length;Ne<ze;Ne++)V=D[Ne],V.value[G]===void 0?V.value[G]=null:le=!1;if(le===!0)for(Ne=0,ze=D.length;Ne<ze;Ne++)V=D[Ne],V.value[G]=j;else L(D,G)}function L(D,G){let j,V;for(let le=0,Ne=D.length;le<Ne;le++){const ze=D[le];if(ze.value[G]===null){if(j=B(D,le,G),V=N(D,le,G),j===null){ze.value[G]=V.value[G];continue}if(V===null){ze.value[G]=j.value[G];continue}$(ze,j,V,G)}}}function B(D,G,j){for(;G>=0;){const V=D[G];if(V.value[j]!==null)return V;G--}return null}function N(D,G,j){for(;G<D.length;){const V=D[G];if(V.value[j]!==null)return V;G++}return null}function $(D,G,j,V){if(j.time-G.time===0){D.value[V]=G.value[V];return}D.value[V]=(D.time-G.time)*(j.value[V]-G.value[V])/(j.time-G.time)+G.value[V]}function U(D){const G={name:D.getAttribute("id")||"default",start:parseFloat(D.getAttribute("start")||0),end:parseFloat(D.getAttribute("end")||0),animations:[]};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"instance_animation":G.animations.push(a(le.getAttribute("url")));break}}an.clips[D.getAttribute("id")]=G}function Q(D){const G=[],j=D.name,V=D.end-D.start||-1,le=D.animations;for(let Ne=0,ze=le.length;Ne<ze;Ne++){const Et=A(le[Ne]);for(let ct=0,ut=Et.length;ct<ut;ct++)G.push(Et[ct])}return new Ua(j,V,G)}function Y(D){return m(an.clips[D],Q)}function ee(D){const G={};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"skin":G.id=a(le.getAttribute("source")),G.skin=ne(le);break;case"morph":G.id=a(le.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}an.controllers[D.getAttribute("id")]=G}function ne(D){const G={sources:{}};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"bind_shape_matrix":G.bindShapeMatrix=s(le.textContent);break;case"source":const Ne=le.getAttribute("id");G.sources[Ne]=Be(le);break;case"joints":G.joints=P(le);break;case"vertex_weights":G.vertexWeights=se(le);break}}return G}function P(D){const G={inputs:{}};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"input":const Ne=le.getAttribute("semantic"),ze=a(le.getAttribute("source"));G.inputs[Ne]=ze;break}}return G}function se(D){const G={inputs:{}};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"input":const Ne=le.getAttribute("semantic"),ze=a(le.getAttribute("source")),Et=parseInt(le.getAttribute("offset"));G.inputs[Ne]={id:ze,offset:Et};break;case"vcount":G.vcount=o(le.textContent);break;case"v":G.v=o(le.textContent);break}}return G}function re(D){const G={id:D.id},j=an.geometries[G.id];return D.skin!==void 0&&(G.skin=Z(D.skin),j.sources.skinIndices=G.skin.indices,j.sources.skinWeights=G.skin.weights),G}function Z(D){const j={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},V=D.sources,le=D.vertexWeights,Ne=le.vcount,ze=le.v,Et=le.inputs.JOINT.offset,ct=le.inputs.WEIGHT.offset,ut=D.sources[D.joints.inputs.JOINT],mt=D.sources[D.joints.inputs.INV_BIND_MATRIX],ft=V[le.inputs.WEIGHT.id].array;let vt=0,Mt,Nt,kt;for(Mt=0,kt=Ne.length;Mt<kt;Mt++){const en=Ne[Mt],Xt=[];for(Nt=0;Nt<en;Nt++){const In=ze[vt+Et],Tr=ze[vt+ct],tr=ft[Tr];Xt.push({index:In,weight:tr}),vt+=2}for(Xt.sort(dn),Nt=0;Nt<4;Nt++){const In=Xt[Nt];In!==void 0?(j.indices.array.push(In.index),j.weights.array.push(In.weight)):(j.indices.array.push(0),j.weights.array.push(0))}}for(D.bindShapeMatrix?j.bindMatrix=new yt().fromArray(D.bindShapeMatrix).transpose():j.bindMatrix=new yt().identity(),Mt=0,kt=ut.array.length;Mt<kt;Mt++){const en=ut.array[Mt],Xt=new yt().fromArray(mt.array,Mt*mt.stride).transpose();j.joints.push({name:en,boneInverse:Xt})}return j;function dn(en,Xt){return Xt.weight-en.weight}}function X(D){return m(an.controllers[D],re)}function W(D){const G={init_from:r(D,"init_from")[0].textContent};an.images[D.getAttribute("id")]=G}function K(D){return D.build!==void 0?D.build:D.init_from}function ge(D){const G=an.images[D];return G!==void 0?m(G,K):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",D),null)}function Se(D){const G={};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"profile_COMMON":G.profile=xe(le);break}}an.effects[D.getAttribute("id")]=G}function xe(D){const G={surfaces:{},samplers:{}};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"newparam":Me(le,G);break;case"technique":G.technique=be(le);break;case"extra":G.extra=We(le);break}}return G}function Me(D,G){const j=D.getAttribute("sid");for(let V=0,le=D.childNodes.length;V<le;V++){const Ne=D.childNodes[V];if(Ne.nodeType===1)switch(Ne.nodeName){case"surface":G.surfaces[j]=he(Ne);break;case"sampler2D":G.samplers[j]=Oe(Ne);break}}}function he(D){const G={};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"init_from":G.init_from=le.textContent;break}}return G}function Oe(D){const G={};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"source":G.source=le.textContent;break}}return G}function be(D){const G={};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"constant":case"lambert":case"blinn":case"phong":G.type=le.nodeName,G.parameters=Te(le);break;case"extra":G.extra=We(le);break}}return G}function Te(D){const G={};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":G[le.nodeName]=Re(le);break;case"transparent":G[le.nodeName]={opaque:le.hasAttribute("opaque")?le.getAttribute("opaque"):"A_ONE",data:Re(le)};break}}return G}function Re(D){const G={};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"color":G[le.nodeName]=s(le.textContent);break;case"float":G[le.nodeName]=parseFloat(le.textContent);break;case"texture":G[le.nodeName]={id:le.getAttribute("texture"),extra:$e(le)};break}}return G}function $e(D){const G={technique:{}};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"extra":ve(le,G);break}}return G}function ve(D,G){for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"technique":me(le,G);break}}}function me(D,G){for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":G.technique[le.nodeName]=parseFloat(le.textContent);break;case"wrapU":case"wrapV":le.textContent.toUpperCase()==="TRUE"?G.technique[le.nodeName]=1:le.textContent.toUpperCase()==="FALSE"?G.technique[le.nodeName]=0:G.technique[le.nodeName]=parseInt(le.textContent);break;case"bump":G[le.nodeName]=xt(le);break}}}function We(D){const G={};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"technique":G.technique=Xe(le);break}}return G}function Xe(D){const G={};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"double_sided":G[le.nodeName]=parseInt(le.textContent);break;case"bump":G[le.nodeName]=xt(le);break}}return G}function xt(D){const G={};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"texture":G[le.nodeName]={id:le.getAttribute("texture"),texcoord:le.getAttribute("texcoord"),extra:$e(le)};break}}return G}function fe(D){return D}function ie(D){return m(an.effects[D],fe)}function Ae(D){const G={name:D.getAttribute("name")};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"instance_effect":G.url=a(le.getAttribute("url"));break}}an.materials[D.getAttribute("id")]=G}function Je(D){let G,j=D.slice((D.lastIndexOf(".")-1>>>0)+2);switch(j=j.toLowerCase(),j){case"tga":G=Ar;break;default:G=li}return G}function te(D){const G=ie(D.url),j=G.profile.technique;let V;switch(j.type){case"phong":case"blinn":V=new Ba;break;case"lambert":V=new wh;break;default:V=new Or;break}V.name=D.name||"";function le(ct,ut=null){const mt=G.profile.samplers[ct.id];let ft=null;if(mt!==void 0){const vt=G.profile.surfaces[mt.source];ft=ge(vt.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),ft=ge(ct.id);if(ft!==null){const vt=Je(ft);if(vt!==void 0){const Mt=vt.load(ft),Nt=ct.extra;if(Nt!==void 0&&Nt.technique!==void 0&&c(Nt.technique)===!1){const kt=Nt.technique;Mt.wrapS=kt.wrapU?Rr:Er,Mt.wrapT=kt.wrapV?Rr:Er,Mt.offset.set(kt.offsetU||0,kt.offsetV||0),Mt.repeat.set(kt.repeatU||1,kt.repeatV||1)}else Mt.wrapS=Rr,Mt.wrapT=Rr;return ut!==null&&(Mt.colorSpace=ut),Mt}else return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",ft),null}else return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",ct.id),null}const Ne=j.parameters;for(const ct in Ne){const ut=Ne[ct];switch(ct){case"diffuse":ut.color&&V.color.fromArray(ut.color),ut.texture&&(V.map=le(ut.texture,ii));break;case"specular":ut.color&&V.specular&&V.specular.fromArray(ut.color),ut.texture&&(V.specularMap=le(ut.texture));break;case"bump":ut.texture&&(V.normalMap=le(ut.texture));break;case"ambient":ut.texture&&(V.lightMap=le(ut.texture,ii));break;case"shininess":ut.float&&V.shininess&&(V.shininess=ut.float);break;case"emission":ut.color&&V.emissive&&V.emissive.fromArray(ut.color),ut.texture&&(V.emissiveMap=le(ut.texture,ii));break}}V.color.convertSRGBToLinear(),V.specular&&V.specular.convertSRGBToLinear(),V.emissive&&V.emissive.convertSRGBToLinear();let ze=Ne.transparent,Et=Ne.transparency;if(Et===void 0&&ze&&(Et={float:1}),ze===void 0&&Et&&(ze={opaque:"A_ONE",data:{color:[1,1,1,1]}}),ze&&Et)if(ze.data.texture)V.transparent=!0;else{const ct=ze.data.color;switch(ze.opaque){case"A_ONE":V.opacity=ct[3]*Et.float;break;case"RGB_ZERO":V.opacity=1-ct[0]*Et.float;break;case"A_ZERO":V.opacity=1-ct[3]*Et.float;break;case"RGB_ONE":V.opacity=ct[0]*Et.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',ze.opaque)}V.opacity<1&&(V.transparent=!0)}if(j.extra!==void 0&&j.extra.technique!==void 0){const ct=j.extra.technique;for(const ut in ct){const mt=ct[ut];switch(ut){case"double_sided":V.side=mt===1?gr:es;break;case"bump":V.normalMap=le(mt.texture),V.normalScale=new qe(1,1);break}}}return V}function z(D){return m(an.materials[D],te)}function F(D){const G={name:D.getAttribute("name")};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"optics":G.optics=ae(le);break}}an.cameras[D.getAttribute("id")]=G}function ae(D){for(let G=0;G<D.childNodes.length;G++){const j=D.childNodes[G];switch(j.nodeName){case"technique_common":return ye(j)}}return{}}function ye(D){const G={};for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];switch(V.nodeName){case"perspective":case"orthographic":G.technique=V.nodeName,G.parameters=Le(V);break}}return G}function Le(D){const G={};for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];switch(V.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":G[V.nodeName]=parseFloat(V.textContent);break}}return G}function ke(D){let G;switch(D.optics.technique){case"perspective":G=new mr(D.optics.parameters.yfov,D.optics.parameters.aspect_ratio,D.optics.parameters.znear,D.optics.parameters.zfar);break;case"orthographic":let j=D.optics.parameters.ymag,V=D.optics.parameters.xmag;const le=D.optics.parameters.aspect_ratio;V=V===void 0?j*le:V,j=j===void 0?V/le:j,V*=.5,j*=.5,G=new Bi(-V,V,j,-j,D.optics.parameters.znear,D.optics.parameters.zfar);break;default:G=new mr;break}return G.name=D.name||"",G}function Ve(D){const G=an.cameras[D];return G!==void 0?m(G,ke):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",D),null)}function Ce(D){let G={};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"technique_common":G=Ye(le);break}}an.lights[D.getAttribute("id")]=G}function Ye(D){const G={};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"directional":case"point":case"spot":case"ambient":G.technique=le.nodeName,G.parameters=tt(le)}}return G}function tt(D){const G={};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"color":const Ne=s(le.textContent);G.color=new bt().fromArray(Ne).convertSRGBToLinear();break;case"falloff_angle":G.falloffAngle=parseFloat(le.textContent);break;case"quadratic_attenuation":const ze=parseFloat(le.textContent);G.distance=ze?Math.sqrt(1/ze):0;break}}return G}function it(D){let G;switch(D.technique){case"directional":G=new om;break;case"point":G=new sm;break;case"spot":G=new im;break;case"ambient":G=new c_;break}return D.parameters.color&&G.color.copy(D.parameters.color),D.parameters.distance&&(G.distance=D.parameters.distance),G}function dt(D){const G=an.lights[D];return G!==void 0?m(G,it):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",D),null)}function Ze(D){const G={name:D.getAttribute("name"),sources:{},vertices:{},primitives:[]},j=r(D,"mesh")[0];if(j!==void 0){for(let V=0;V<j.childNodes.length;V++){const le=j.childNodes[V];if(le.nodeType!==1)continue;const Ne=le.getAttribute("id");switch(le.nodeName){case"source":G.sources[Ne]=Be(le);break;case"vertices":G.vertices=Ft(le);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",le.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":G.primitives.push(St(le));break;default:console.log(le)}}an.geometries[D.getAttribute("id")]=G}}function Be(D){const G={array:[],stride:3};for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];if(V.nodeType===1)switch(V.nodeName){case"float_array":G.array=s(V.textContent);break;case"Name_array":G.array=i(V.textContent);break;case"technique_common":const le=r(V,"accessor")[0];le!==void 0&&(G.stride=parseInt(le.getAttribute("stride")));break}}return G}function Ft(D){const G={};for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];V.nodeType===1&&(G[V.getAttribute("semantic")]=a(V.getAttribute("source")))}return G}function St(D){const G={type:D.nodeName,material:D.getAttribute("material"),count:parseInt(D.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let j=0,V=D.childNodes.length;j<V;j++){const le=D.childNodes[j];if(le.nodeType===1)switch(le.nodeName){case"input":const Ne=a(le.getAttribute("source")),ze=le.getAttribute("semantic"),Et=parseInt(le.getAttribute("offset")),ct=parseInt(le.getAttribute("set")),ut=ct>0?ze+ct:ze;G.inputs[ut]={id:Ne,offset:Et},G.stride=Math.max(G.stride,Et+1),ze==="TEXCOORD"&&(G.hasUV=!0);break;case"vcount":G.vcount=o(le.textContent);break;case"p":G.p=o(le.textContent);break}}return G}function st(D){const G={};for(let j=0;j<D.length;j++){const V=D[j];G[V.type]===void 0&&(G[V.type]=[]),G[V.type].push(V)}return G}function It(D){let G=0;for(let j=0,V=D.length;j<V;j++)D[j].hasUV===!0&&G++;G>0&&G<D.length&&(D.uvsNeedsFix=!0)}function Ht(D){const G={},j=D.sources,V=D.vertices,le=D.primitives;if(le.length===0)return{};const Ne=st(le);for(const ze in Ne){const Et=Ne[ze];It(Et),G[ze]=zt(Et,j,V)}return G}function zt(D,G,j){const V={},le={array:[],stride:0},Ne={array:[],stride:0},ze={array:[],stride:0},Et={array:[],stride:0},ct={array:[],stride:0},ut={array:[],stride:4},mt={array:[],stride:4},ft=new on,vt=[];let Mt=0;for(let Nt=0;Nt<D.length;Nt++){const kt=D[Nt],dn=kt.inputs;let en=0;switch(kt.type){case"lines":case"linestrips":en=kt.count*2;break;case"triangles":en=kt.count*3;break;case"polylist":for(let Xt=0;Xt<kt.count;Xt++){const In=kt.vcount[Xt];switch(In){case 3:en+=3;break;case 4:en+=6;break;default:en+=(In-2)*3;break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",kt.type)}ft.addGroup(Mt,en,Nt),Mt+=en,kt.material&&vt.push(kt.material);for(const Xt in dn){const In=dn[Xt];switch(Xt){case"VERTEX":for(const Tr in j){const tr=j[Tr];switch(Tr){case"POSITION":const Kr=le.array.length;if($t(kt,G[tr],In.offset,le.array),le.stride=G[tr].stride,G.skinWeights&&G.skinIndices&&($t(kt,G.skinIndices,In.offset,ut.array),$t(kt,G.skinWeights,In.offset,mt.array)),kt.hasUV===!1&&D.uvsNeedsFix===!0){const Ks=(le.array.length-Kr)/le.stride;for(let Js=0;Js<Ks;Js++)ze.array.push(0,0)}break;case"NORMAL":$t(kt,G[tr],In.offset,Ne.array),Ne.stride=G[tr].stride;break;case"COLOR":$t(kt,G[tr],In.offset,ct.array),ct.stride=G[tr].stride;break;case"TEXCOORD":$t(kt,G[tr],In.offset,ze.array),ze.stride=G[tr].stride;break;case"TEXCOORD1":$t(kt,G[tr],In.offset,Et.array),ze.stride=G[tr].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',Tr)}}break;case"NORMAL":$t(kt,G[In.id],In.offset,Ne.array),Ne.stride=G[In.id].stride;break;case"COLOR":$t(kt,G[In.id],In.offset,ct.array,!0),ct.stride=G[In.id].stride;break;case"TEXCOORD":$t(kt,G[In.id],In.offset,ze.array),ze.stride=G[In.id].stride;break;case"TEXCOORD1":$t(kt,G[In.id],In.offset,Et.array),Et.stride=G[In.id].stride;break}}}return le.array.length>0&&ft.setAttribute("position",new Ot(le.array,le.stride)),Ne.array.length>0&&ft.setAttribute("normal",new Ot(Ne.array,Ne.stride)),ct.array.length>0&&ft.setAttribute("color",new Ot(ct.array,ct.stride)),ze.array.length>0&&ft.setAttribute("uv",new Ot(ze.array,ze.stride)),Et.array.length>0&&ft.setAttribute("uv1",new Ot(Et.array,Et.stride)),ut.array.length>0&&ft.setAttribute("skinIndex",new Ot(ut.array,ut.stride)),mt.array.length>0&&ft.setAttribute("skinWeight",new Ot(mt.array,mt.stride)),V.data=ft,V.type=D[0].type,V.materialKeys=vt,V}function $t(D,G,j,V,le=!1){const Ne=D.p,ze=D.stride,Et=D.vcount;function ct(ft){let vt=Ne[ft+j]*mt;const Mt=vt+mt;for(;vt<Mt;vt++)V.push(ut[vt]);if(le){const Nt=V.length-mt-1;ci.setRGB(V[Nt+0],V[Nt+1],V[Nt+2]).convertSRGBToLinear(),V[Nt+0]=ci.r,V[Nt+1]=ci.g,V[Nt+2]=ci.b}}const ut=G.array,mt=G.stride;if(D.vcount!==void 0){let ft=0;for(let vt=0,Mt=Et.length;vt<Mt;vt++){const Nt=Et[vt];if(Nt===4){const kt=ft+ze*0,dn=ft+ze*1,en=ft+ze*2,Xt=ft+ze*3;ct(kt),ct(dn),ct(Xt),ct(dn),ct(en),ct(Xt)}else if(Nt===3){const kt=ft+ze*0,dn=ft+ze*1,en=ft+ze*2;ct(kt),ct(dn),ct(en)}else if(Nt>4)for(let kt=1,dn=Nt-2;kt<=dn;kt++){const en=ft+ze*0,Xt=ft+ze*kt,In=ft+ze*(kt+1);ct(en),ct(Xt),ct(In)}ft+=ze*Nt}}else for(let ft=0,vt=Ne.length;ft<vt;ft+=ze)ct(ft)}function Nn(D){return m(an.geometries[D],Ht)}function Tn(D){const G={name:D.getAttribute("name")||"",joints:{},links:[]};for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];if(V.nodeType===1)switch(V.nodeName){case"technique_common":ai(V,G);break}}an.kinematicsModels[D.getAttribute("id")]=G}function Fn(D){return D.build!==void 0?D.build:D}function vr(D){return m(an.kinematicsModels[D],Fn)}function ai(D,G){for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];if(V.nodeType===1)switch(V.nodeName){case"joint":G.joints[V.getAttribute("sid")]=Ri(V);break;case"link":G.links.push(Pr(V));break}}}function Ri(D){let G;for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];if(V.nodeType===1)switch(V.nodeName){case"prismatic":case"revolute":G=Vr(V);break}}return G}function Vr(D){const G={sid:D.getAttribute("sid"),name:D.getAttribute("name")||"",axis:new J,limits:{min:0,max:0},type:D.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];if(V.nodeType===1)switch(V.nodeName){case"axis":const le=s(V.textContent);G.axis.fromArray(le);break;case"limits":const Ne=V.getElementsByTagName("max")[0],ze=V.getElementsByTagName("min")[0];G.limits.max=parseFloat(Ne.textContent),G.limits.min=parseFloat(ze.textContent);break}}return G.limits.min>=G.limits.max&&(G.static=!0),G.middlePosition=(G.limits.min+G.limits.max)/2,G}function Pr(D){const G={sid:D.getAttribute("sid"),name:D.getAttribute("name")||"",attachments:[],transforms:[]};for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];if(V.nodeType===1)switch(V.nodeName){case"attachment_full":G.attachments.push(gn(V));break;case"matrix":case"translate":case"rotate":G.transforms.push(br(V));break}}return G}function gn(D){const G={joint:D.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];if(V.nodeType===1)switch(V.nodeName){case"link":G.links.push(Pr(V));break;case"matrix":case"translate":case"rotate":G.transforms.push(br(V));break}}return G}function br(D){const G={type:D.nodeName},j=s(D.textContent);switch(G.type){case"matrix":G.obj=new yt,G.obj.fromArray(j).transpose();break;case"translate":G.obj=new J,G.obj.fromArray(j);break;case"rotate":G.obj=new J,G.obj.fromArray(j),G.angle=si.degToRad(j[3]);break}return G}function ss(D){const G={name:D.getAttribute("name")||"",rigidBodies:{}};for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];if(V.nodeType===1)switch(V.nodeName){case"rigid_body":G.rigidBodies[V.getAttribute("name")]={},pe(V,G.rigidBodies[V.getAttribute("name")]);break}}an.physicsModels[D.getAttribute("id")]=G}function pe(D,G){for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];if(V.nodeType===1)switch(V.nodeName){case"technique_common":Ee(V,G);break}}}function Ee(D,G){for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];if(V.nodeType===1)switch(V.nodeName){case"inertia":G.inertia=s(V.textContent);break;case"mass":G.mass=s(V.textContent)[0];break}}}function je(D){const G={bindJointAxis:[]};for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];if(V.nodeType===1)switch(V.nodeName){case"bind_joint_axis":G.bindJointAxis.push(ue(V));break}}an.kinematicsScenes[a(D.getAttribute("url"))]=G}function ue(D){const G={target:D.getAttribute("target").split("/").pop()};for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];if(V.nodeType===1)switch(V.nodeName){case"axis":const le=V.getElementsByTagName("param")[0];G.axis=le.textContent;const Ne=G.axis.split("inst_").pop().split("axis")[0];G.jointIndex=Ne.substring(0,Ne.length-1);break}}return G}function we(D){return D.build!==void 0?D.build:D}function Pe(D){return m(an.kinematicsScenes[D],we)}function Ge(){const D=Object.keys(an.kinematicsModels)[0],G=Object.keys(an.kinematicsScenes)[0],j=Object.keys(an.visualScenes)[0];if(D===void 0||G===void 0)return;const V=vr(D),le=Pe(G),Ne=Jn(j),ze=le.bindJointAxis,Et={};for(let mt=0,ft=ze.length;mt<ft;mt++){const vt=ze[mt],Mt=Zt.querySelector('[sid="'+vt.target+'"]');if(Mt){const Nt=Mt.parentElement;ct(vt.jointIndex,Nt)}}function ct(mt,ft){const vt=ft.getAttribute("name"),Mt=V.joints[mt];Ne.traverse(function(Nt){Nt.name===vt&&(Et[mt]={object:Nt,transforms:Fe(ft),joint:Mt,position:Mt.zeroPosition})})}const ut=new yt;xo={joints:V&&V.joints,getJointValue:function(mt){const ft=Et[mt];if(ft)return ft.position;console.warn("THREE.ColladaLoader: Joint "+mt+" doesn't exist.")},setJointValue:function(mt,ft){const vt=Et[mt];if(vt){const Mt=vt.joint;if(ft>Mt.limits.max||ft<Mt.limits.min)console.warn("THREE.ColladaLoader: Joint "+mt+" value "+ft+" outside of limits (min: "+Mt.limits.min+", max: "+Mt.limits.max+").");else if(Mt.static)console.warn("THREE.ColladaLoader: Joint "+mt+" is static.");else{const Nt=vt.object,kt=Mt.axis,dn=vt.transforms;ot.identity();for(let en=0;en<dn.length;en++){const Xt=dn[en];if(Xt.sid&&Xt.sid.indexOf(mt)!==-1)switch(Mt.type){case"revolute":ot.multiply(ut.makeRotationAxis(kt,si.degToRad(ft)));break;case"prismatic":ot.multiply(ut.makeTranslation(kt.x*ft,kt.y*ft,kt.z*ft));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+Mt.type);break}else switch(Xt.type){case"matrix":ot.multiply(Xt.obj);break;case"translate":ot.multiply(ut.makeTranslation(Xt.obj.x,Xt.obj.y,Xt.obj.z));break;case"scale":ot.scale(Xt.obj);break;case"rotate":ot.multiply(ut.makeRotationAxis(Xt.obj,Xt.angle));break}}Nt.matrix.copy(ot),Nt.matrix.decompose(Nt.position,Nt.quaternion,Nt.scale),Et[mt].position=ft}}else console.log("THREE.ColladaLoader: "+mt+" does not exist.")}}}function Fe(D){const G=[],j=Zt.querySelector('[id="'+D.id+'"]');for(let V=0;V<j.childNodes.length;V++){const le=j.childNodes[V];if(le.nodeType!==1)continue;let Ne,ze;switch(le.nodeName){case"matrix":Ne=s(le.textContent);const Et=new yt().fromArray(Ne).transpose();G.push({sid:le.getAttribute("sid"),type:le.nodeName,obj:Et});break;case"translate":case"scale":Ne=s(le.textContent),ze=new J().fromArray(Ne),G.push({sid:le.getAttribute("sid"),type:le.nodeName,obj:ze});break;case"rotate":Ne=s(le.textContent),ze=new J().fromArray(Ne);const ct=si.degToRad(Ne[3]);G.push({sid:le.getAttribute("sid"),type:le.nodeName,obj:ze,angle:ct});break}}return G}function lt(D){const G=D.getElementsByTagName("node");for(let j=0;j<G.length;j++){const V=G[j];V.hasAttribute("id")===!1&&V.setAttribute("id",l())}}const ot=new yt,pt=new J;function Ke(D){const G={name:D.getAttribute("name")||"",type:D.getAttribute("type"),id:D.getAttribute("id"),sid:D.getAttribute("sid"),matrix:new yt,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];if(V.nodeType!==1)continue;let le;switch(V.nodeName){case"node":G.nodes.push(V.getAttribute("id")),Ke(V);break;case"instance_camera":G.instanceCameras.push(a(V.getAttribute("url")));break;case"instance_controller":G.instanceControllers.push(Vt(V));break;case"instance_light":G.instanceLights.push(a(V.getAttribute("url")));break;case"instance_geometry":G.instanceGeometries.push(Vt(V));break;case"instance_node":G.instanceNodes.push(a(V.getAttribute("url")));break;case"matrix":le=s(V.textContent),G.matrix.multiply(ot.fromArray(le).transpose()),G.transforms[V.getAttribute("sid")]=V.nodeName;break;case"translate":le=s(V.textContent),pt.fromArray(le),G.matrix.multiply(ot.makeTranslation(pt.x,pt.y,pt.z)),G.transforms[V.getAttribute("sid")]=V.nodeName;break;case"rotate":le=s(V.textContent);const Ne=si.degToRad(le[3]);G.matrix.multiply(ot.makeRotationAxis(pt.fromArray(le),Ne)),G.transforms[V.getAttribute("sid")]=V.nodeName;break;case"scale":le=s(V.textContent),G.matrix.scale(pt.fromArray(le)),G.transforms[V.getAttribute("sid")]=V.nodeName;break;case"extra":break;default:console.log(V)}}return jt(G.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",G.id):an.nodes[G.id]=G,G}function Vt(D){const G={id:a(D.getAttribute("url")),materials:{},skeletons:[]};for(let j=0;j<D.childNodes.length;j++){const V=D.childNodes[j];switch(V.nodeName){case"bind_material":const le=V.getElementsByTagName("instance_material");for(let Ne=0;Ne<le.length;Ne++){const ze=le[Ne],Et=ze.getAttribute("symbol"),ct=ze.getAttribute("target");G.materials[Et]=a(ct)}break;case"skeleton":G.skeletons.push(a(V.textContent));break}}return G}function Lt(D,G){const j=[],V=[];let le,Ne,ze;for(le=0;le<D.length;le++){const ut=D[le];let mt;if(jt(ut))mt=Dt(ut),Pt(mt,G,j);else if(yn(ut)){const vt=an.visualScenes[ut].children;for(let Mt=0;Mt<vt.length;Mt++){const Nt=vt[Mt];if(Nt.type==="JOINT"){const kt=Dt(Nt.id);Pt(kt,G,j)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",ut)}for(le=0;le<G.length;le++)for(Ne=0;Ne<j.length;Ne++)if(ze=j[Ne],ze.bone.name===G[le].name){V[le]=ze,ze.processed=!0;break}for(le=0;le<j.length;le++)ze=j[le],ze.processed===!1&&(V.push(ze),ze.processed=!0);const Et=[],ct=[];for(le=0;le<V.length;le++)ze=V[le],Et.push(ze.bone),ct.push(ze.boneInverse);return new Xu(Et,ct)}function Pt(D,G,j){D.traverse(function(V){if(V.isBone===!0){let le;for(let Ne=0;Ne<G.length;Ne++){const ze=G[Ne];if(ze.name===V.name){le=ze.boneInverse;break}}le===void 0&&(le=new yt),j.push({bone:V,boneInverse:le,processed:!1})}})}function qt(D){const G=[],j=D.matrix,V=D.nodes,le=D.type,Ne=D.instanceCameras,ze=D.instanceControllers,Et=D.instanceLights,ct=D.instanceGeometries,ut=D.instanceNodes;for(let ft=0,vt=V.length;ft<vt;ft++)G.push(Dt(V[ft]));for(let ft=0,vt=Ne.length;ft<vt;ft++){const Mt=Ve(Ne[ft]);Mt!==null&&G.push(Mt.clone())}for(let ft=0,vt=ze.length;ft<vt;ft++){const Mt=ze[ft],Nt=X(Mt.id),kt=Nn(Nt.id),dn=vn(kt,Mt.materials),en=Mt.skeletons,Xt=Nt.skin.joints,In=Lt(en,Xt);for(let Tr=0,tr=dn.length;Tr<tr;Tr++){const Kr=dn[Tr];Kr.isSkinnedMesh&&(Kr.bind(In,Nt.skin.bindMatrix),Kr.normalizeSkinWeights()),G.push(Kr)}}for(let ft=0,vt=Et.length;ft<vt;ft++){const Mt=dt(Et[ft]);Mt!==null&&G.push(Mt.clone())}for(let ft=0,vt=ct.length;ft<vt;ft++){const Mt=ct[ft],Nt=Nn(Mt.id),kt=vn(Nt,Mt.materials);for(let dn=0,en=kt.length;dn<en;dn++)G.push(kt[dn])}for(let ft=0,vt=ut.length;ft<vt;ft++)G.push(Dt(ut[ft]).clone());let mt;if(V.length===0&&G.length===1)mt=G[0];else{mt=le==="JOINT"?new Ah:new ki;for(let ft=0;ft<G.length;ft++)mt.add(G[ft])}return mt.name=le==="JOINT"?D.sid:D.name,mt.matrix.copy(j),mt.matrix.decompose(mt.position,mt.quaternion,mt.scale),mt}const sn=new Or({name:_r.DEFAULT_MATERIAL_NAME,color:16711935});function ln(D,G){const j=[];for(let V=0,le=D.length;V<le;V++){const Ne=G[D[V]];Ne===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",D[V]),j.push(sn)):j.push(z(Ne))}return j}function vn(D,G){const j=[];for(const V in D){const le=D[V],Ne=ln(le.materialKeys,G);if(Ne.length===0&&(V==="lines"||V==="linestrips"?Ne.push(new yi):Ne.push(new Ba)),V==="lines"||V==="linestrips")for(let ut=0,mt=Ne.length;ut<mt;ut++){const ft=Ne[ut];if(ft.isMeshPhongMaterial===!0||ft.isMeshLambertMaterial===!0){const vt=new yi;vt.color.copy(ft.color),vt.opacity=ft.opacity,vt.transparent=ft.transparent,Ne[ut]=vt}}const ze=le.data.attributes.skinIndex!==void 0,Et=Ne.length===1?Ne[0]:Ne;let ct;switch(V){case"lines":ct=new $s(le.data,Et);break;case"linestrips":ct=new Fa(le.data,Et);break;case"triangles":case"polylist":ze?ct=new bh(le.data,Et):ct=new un(le.data,Et);break}j.push(ct)}return j}function jt(D){return an.nodes[D]!==void 0}function Dt(D){return m(an.nodes[D],qt)}function Mn(D){const G={name:D.getAttribute("name"),children:[]};lt(D);const j=r(D,"node");for(let V=0;V<j.length;V++)G.children.push(Ke(j[V]));an.visualScenes[D.getAttribute("id")]=G}function fn(D){const G=new ki;G.name=D.name;const j=D.children;for(let V=0;V<j.length;V++){const le=j[V];G.add(Dt(le.id))}return G}function yn(D){return an.visualScenes[D]!==void 0}function Jn(D){return m(an.visualScenes[D],fn)}function or(D){const G=r(D,"instance_visual_scene")[0];return Jn(a(G.getAttribute("url")))}function ar(){const D=an.clips;if(c(D)===!0){if(c(an.animations)===!1){const G=[];for(const j in an.animations){const V=A(j);for(let le=0,Ne=V.length;le<Ne;le++)G.push(V[le])}Es.push(new Ua("default",-1,G))}}else for(const G in D)Es.push(Y(G))}function Bn(D){let G="";const j=[D];for(;j.length;){const V=j.shift();V.nodeType===Node.TEXT_NODE?G+=V.textContent:(G+=`
`,j.push.apply(j,V.childNodes))}return G.trim()}if(e.length===0)return{scene:new vs};const Rn=new DOMParser().parseFromString(e,"application/xml"),Zt=r(Rn,"COLLADA")[0],En=Rn.getElementsByTagName("parsererror")[0];if(En!==void 0){const D=r(En,"div")[0];let G;return D?G=D.textContent:G=Bn(En),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,G),null}const wn=Zt.getAttribute("version");console.debug("THREE.ColladaLoader: File version",wn);const sr=u(r(Zt,"asset")[0]),li=new Ki(this.manager);li.setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);let Ar;rN&&(Ar=new rN(this.manager),Ar.setPath(this.resourcePath||n));const ci=new bt,Es=[];let xo={},cn=0;const an={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};d(Zt,"library_animations","animation",g),d(Zt,"library_animation_clips","animation_clip",U),d(Zt,"library_controllers","controller",ee),d(Zt,"library_images","image",W),d(Zt,"library_effects","effect",Se),d(Zt,"library_materials","material",Ae),d(Zt,"library_cameras","camera",F),d(Zt,"library_lights","light",Ce),d(Zt,"library_geometries","geometry",Ze),d(Zt,"library_nodes","node",Ke),d(Zt,"library_visual_scenes","visual_scene",Mn),d(Zt,"library_kinematics_models","kinematics_model",Tn),d(Zt,"library_physics_models","physics_model",ss),d(Zt,"scene","instance_kinematics_scene",je),p(an.animations,y),p(an.clips,Q),p(an.controllers,re),p(an.images,K),p(an.effects,fe),p(an.materials,te),p(an.cameras,ke),p(an.lights,it),p(an.geometries,Ht),p(an.visualScenes,fn),ar(),Ge();const de=or(r(Zt,"scene")[0]);return de.animations=Es,sr.upAxis==="Z_UP"&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),de.rotation.set(-Math.PI/2,0,0)),de.scale.multiplyScalar(sr.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),Es},kinematics:xo,library:an,scene:de}}}const iN=new J;class C_ extends hn{constructor(...e){super(...e),this.urdfNode=null,this.urdfName=""}copy(e,n){return super.copy(e,n),this.urdfNode=e.urdfNode,this.urdfName=e.urdfName,this}}class XAe extends C_{constructor(...e){super(...e),this.isURDFCollider=!0,this.type="URDFCollider"}}class YAe extends C_{constructor(...e){super(...e),this.isURDFVisual=!0,this.type="URDFVisual"}}class BG extends C_{constructor(...e){super(...e),this.isURDFLink=!0,this.type="URDFLink"}}class kG extends C_{get jointType(){return this._jointType}set jointType(e){if(this.jointType!==e)switch(this._jointType=e,this.matrixWorldNeedsUpdate=!0,e){case"fixed":this.jointValue=[];break;case"continuous":case"revolute":case"prismatic":this.jointValue=new Array(1).fill(0);break;case"planar":this.jointValue=new Array(2).fill(0);break;case"floating":this.jointValue=new Array(6).fill(0);break}}get angle(){return this.jointValue[0]}constructor(...e){super(...e),this.isURDFJoint=!0,this.type="URDFJoint",this.jointValue=null,this.jointType="fixed",this.axis=new J(1,0,0),this.limit={lower:0,upper:0},this.ignoreLimits=!1,this.origPosition=null,this.origQuaternion=null,this.mimicJoints=[]}copy(e,n){return super.copy(e,n),this.jointType=e.jointType,this.axis=e.axis.clone(),this.limit.lower=e.limit.lower,this.limit.upper=e.limit.upper,this.ignoreLimits=!1,this.jointValue=[...e.jointValue],this.origPosition=e.origPosition?e.origPosition.clone():null,this.origQuaternion=e.origQuaternion?e.origQuaternion.clone():null,this.mimicJoints=[...e.mimicJoints],this}setJointValue(...e){e=e.map(r=>parseFloat(r)),(!this.origPosition||!this.origQuaternion)&&(this.origPosition=this.position.clone(),this.origQuaternion=this.quaternion.clone());let n=!1;switch(this.mimicJoints.forEach(r=>{n=r.updateFromMimickedJoint(...e)||n}),this.jointType){case"fixed":return n;case"continuous":case"revolute":{let r=e[0];return r==null||r===this.jointValue[0]?n:(!this.ignoreLimits&&this.jointType==="revolute"&&(r=Math.min(this.limit.upper,r),r=Math.max(this.limit.lower,r)),this.quaternion.setFromAxisAngle(this.axis,r).premultiply(this.origQuaternion),this.jointValue[0]!==r?(this.jointValue[0]=r,this.matrixWorldNeedsUpdate=!0,!0):n)}case"prismatic":{let r=e[0];return r==null||r===this.jointValue[0]?n:(this.ignoreLimits||(r=Math.min(this.limit.upper,r),r=Math.max(this.limit.lower,r)),this.position.copy(this.origPosition),iN.copy(this.axis).applyEuler(this.rotation),this.position.addScaledVector(iN,r),this.jointValue[0]!==r?(this.jointValue[0]=r,this.matrixWorldNeedsUpdate=!0,!0):n)}case"floating":case"planar":console.warn(`'${this.jointType}' joint not yet supported`)}return n}}class sN extends kG{constructor(...e){super(...e),this.type="URDFMimicJoint",this.mimicJoint=null,this.offset=0,this.multiplier=1}updateFromMimickedJoint(...e){const n=e.map(r=>r*this.multiplier+this.offset);return super.setJointValue(...n)}copy(e,n){return super.copy(e,n),this.mimicJoint=e.mimicJoint,this.offset=e.offset,this.multiplier=e.multiplier,this}}class qAe extends BG{constructor(...e){super(...e),this.isURDFRobot=!0,this.urdfNode=null,this.urdfRobotNode=null,this.robotName=null,this.links=null,this.joints=null,this.colliders=null,this.visual=null,this.frames=null}copy(e,n){return super.copy(e,n),this.urdfRobotNode=e.urdfRobotNode,this.robotName=e.robotName,this.links={},this.joints={},this.colliders={},this.visual={},this.traverse(r=>{r.isURDFJoint&&r.urdfName in e.joints&&(this.joints[r.urdfName]=r),r.isURDFLink&&r.urdfName in e.links&&(this.links[r.urdfName]=r),r.isURDFCollider&&r.urdfName in e.colliders&&(this.colliders[r.urdfName]=r),r.isURDFVisual&&r.urdfName in e.visual&&(this.visual[r.urdfName]=r)}),this.frames={...this.colliders,...this.visual,...this.links,...this.joints},this}getFrame(e){return this.frames[e]}setJointValue(e,...n){const r=this.joints[e];return r?r.setJointValue(...n):!1}setJointValues(e){let n=!1;for(const r in e){const i=e[r];Array.isArray(i)?n=this.setJointValue(r,...i)||n:n=this.setJointValue(r,i)||n}return n}}const bT=new kn,oN=new wi;function Hd(t){return t?t.trim().split(/\s+/g).map(e=>parseFloat(e)):[0,0,0]}function aN(t,e,n=!1){n||t.rotation.set(0,0,0),oN.set(e[0],e[1],e[2],"ZYX"),bT.setFromEuler(oN),bT.multiply(t.quaternion),t.quaternion.copy(bT)}class KAe{constructor(e){this.manager=e||l_,this.loadMeshCb=this.defaultMeshLoader.bind(this),this.parseVisual=!0,this.parseCollision=!1,this.packages="",this.workingPath="",this.fetchOptions={}}loadAsync(e){return new Promise((n,r)=>{this.load(e,n,null,r)})}load(e,n,r,i){const s=this.manager,o=Si.extractUrlBase(e),a=this.manager.resolveURL(e);s.itemStart(a),fetch(a,this.fetchOptions).then(l=>{if(l.ok)return r&&r(null),l.text();throw new Error(`URDFLoader: Failed to load url '${a}' with error code ${l.status} : ${l.statusText}.`)}).then(l=>{this.workingPath===""&&(this.workingPath=o);const c=this.parse(l);n(c),s.itemEnd(a)}).catch(l=>{i?i(l):console.error("URDFLoader: Error loading file.",l),s.itemError(a),s.itemEnd(a)})}parse(e){const n=this.packages,r=this.loadMeshCb,i=this.parseVisual,s=this.parseCollision,o=this.workingPath,a=this.manager,l={},c={},u={};function f(x){if(!/^package:\/\//.test(x))return o?o+x:x;const[y,A]=x.replace(/^package:\/\//,"").split(/\/(.+)/);if(typeof n=="string")return n.endsWith(y)?n+"/"+A:n+"/"+y+"/"+A;if(n instanceof Function)return n(y)+"/"+A;if(typeof n=="object")return y in n?n[y]+"/"+A:(console.error(`URDFLoader : ${y} not found in provided package list.`),null)}function h(x){let y;x instanceof Document?y=[...x.children]:x instanceof Element?y=[x]:y=[...new DOMParser().parseFromString(x,"text/xml").children];const A=y.filter(T=>T.nodeName==="robot").pop();return d(A)}function d(x){const y=[...x.children],A=y.filter(O=>O.nodeName.toLowerCase()==="link"),T=y.filter(O=>O.nodeName.toLowerCase()==="joint"),w=y.filter(O=>O.nodeName.toLowerCase()==="material"),M=new qAe;M.robotName=x.getAttribute("name"),M.urdfRobotNode=x,w.forEach(O=>{const L=O.getAttribute("name");u[L]=g(O)});const C={},S={};A.forEach(O=>{const L=O.getAttribute("name"),B=x.querySelector(`child[link="${L}"]`)===null;l[L]=m(O,C,S,B?M:null)}),T.forEach(O=>{const L=O.getAttribute("name");c[L]=p(O)}),M.joints=c,M.links=l,M.colliders=S,M.visual=C;const R=Object.values(c);return R.forEach(O=>{O instanceof sN&&c[O.mimicJoint].mimicJoints.push(O)}),R.forEach(O=>{const L=new Set,B=N=>{if(L.has(N))throw new Error("URDFLoader: Detected an infinite loop of mimic joints.");L.add(N),N.mimicJoints.forEach($=>{B($)})};B(O)}),M.frames={...S,...C,...l,...c},M}function p(x){const y=[...x.children],A=x.getAttribute("type");let T;const w=y.find(L=>L.nodeName.toLowerCase()==="mimic");w?(T=new sN,T.mimicJoint=w.getAttribute("joint"),T.multiplier=parseFloat(w.getAttribute("multiplier")||1),T.offset=parseFloat(w.getAttribute("offset")||0)):T=new kG,T.urdfNode=x,T.name=x.getAttribute("name"),T.urdfName=T.name,T.jointType=A;let M=null,C=null,S=[0,0,0],R=[0,0,0];y.forEach(L=>{const B=L.nodeName.toLowerCase();B==="origin"?(S=Hd(L.getAttribute("xyz")),R=Hd(L.getAttribute("rpy"))):B==="child"?C=l[L.getAttribute("link")]:B==="parent"?M=l[L.getAttribute("link")]:B==="limit"&&(T.limit.lower=parseFloat(L.getAttribute("lower")||T.limit.lower),T.limit.upper=parseFloat(L.getAttribute("upper")||T.limit.upper))}),M.add(T),T.add(C),aN(T,R),T.position.set(S[0],S[1],S[2]);const O=y.filter(L=>L.nodeName.toLowerCase()==="axis")[0];if(O){const L=O.getAttribute("xyz").split(/\s+/g).map(B=>parseFloat(B));T.axis=new J(L[0],L[1],L[2]),T.axis.normalize()}return T}function m(x,y,A,T=null){T===null&&(T=new BG);const w=[...x.children];return T.name=x.getAttribute("name"),T.urdfName=T.name,T.urdfNode=x,i&&w.filter(C=>C.nodeName.toLowerCase()==="visual").forEach(C=>{const S=v(C,u);if(T.add(S),C.hasAttribute("name")){const R=C.getAttribute("name");S.name=R,S.urdfName=R,y[R]=S}}),s&&w.filter(C=>C.nodeName.toLowerCase()==="collision").forEach(C=>{const S=v(C);if(T.add(S),C.hasAttribute("name")){const R=C.getAttribute("name");S.name=R,S.urdfName=R,A[R]=S}}),T}function g(x){const y=[...x.children],A=new Ba;return A.name=x.getAttribute("name")||"",y.forEach(T=>{const w=T.nodeName.toLowerCase();if(w==="color"){const M=T.getAttribute("rgba").split(/\s/g).map(C=>parseFloat(C));A.color.setRGB(M[0],M[1],M[2]),A.opacity=M[3],A.transparent=M[3]<1,A.depthWrite=!A.transparent}else if(w==="texture"){const M=T.getAttribute("filename");if(M){const C=new Ki(a),S=f(M);A.map=C.load(S),A.map.colorSpace=ii}}}),A}function v(x,y={}){const A=x.nodeName.toLowerCase()==="collision",T=[...x.children];let w=null;const M=T.filter(S=>S.nodeName.toLowerCase()==="material")[0];if(M){const S=M.getAttribute("name");S&&S in y?w=y[S]:w=g(M)}else w=new Ba;const C=A?new XAe:new YAe;return C.urdfNode=x,T.forEach(S=>{const R=S.nodeName.toLowerCase();if(R==="geometry"){const O=S.children[0].nodeName.toLowerCase();if(O==="mesh"){const L=S.children[0].getAttribute("filename"),B=f(L);if(B!==null){const N=S.children[0].getAttribute("scale");if(N){const $=Hd(N);C.scale.set($[0],$[1],$[2])}r(B,a,($,U)=>{U?console.error("URDFLoader: Error loading mesh.",U):$&&($ instanceof un&&($.material=w),$.position.set(0,0,0),$.quaternion.identity(),C.add($))})}}else if(O==="box"){const L=new un;L.geometry=new Yc(1,1,1),L.material=w;const B=Hd(S.children[0].getAttribute("size"));L.scale.set(B[0],B[1],B[2]),C.add(L)}else if(O==="sphere"){const L=new un;L.geometry=new Th(1,30,30),L.material=w;const B=parseFloat(S.children[0].getAttribute("radius"))||0;L.scale.set(B,B,B),C.add(L)}else if(O==="cylinder"){const L=new un;L.geometry=new Yu(1,1,1,30),L.material=w;const B=parseFloat(S.children[0].getAttribute("radius"))||0,N=parseFloat(S.children[0].getAttribute("length"))||0;L.scale.set(B,N,B),L.rotation.set(Math.PI/2,0,0),C.add(L)}}else if(R==="origin"){const O=Hd(S.getAttribute("xyz")),L=Hd(S.getAttribute("rpy"));C.position.set(O[0],O[1],O[2]),C.rotation.set(0,0,0),aN(C,L)}}),C}return h(e)}defaultMeshLoader(e,n,r){/\.stl$/i.test(e)?new jAe(n).load(e,s=>{const o=new un(s,new Ba);r(o)}):/\.dae$/i.test(e)?new $Ae(n).load(e,s=>r(s.scene)):console.warn(`URDFLoader: Could not load model at ${e}.
No loader available`)}}const RC={basic:Or,phong:Ba,lambert:wh,standard:_l,normal:o_,depth:tm},fm=({_ref:t,_key:e,matrix:n,...r})=>{const i=E.useRef(),s=t||i;return E.useLayoutEffect(()=>{const o=s.current;if(o)return n&&(o.matrix.fromArray(n),o.matrixAutoUpdate=!1),()=>{o.matrixAutoUpdate=!0}},[n,s.current]),ce.jsx("group",{ref:s,...r},e)};function JAe({data:t,_ref:e,size:n=.0015,hide:r,matrix:i,...s}){const o=E.useRef(),a=e||o;return E.useLayoutEffect(()=>{const l=a.current;l&&i&&(l.matrix.fromArray(i),l.matrix.decompose(l.position,l.quaternion,l.scale),l.rotation.setFromQuaternion(l.quaternion))},[i,a.current]),!t||r?null:ce.jsxs("points",{ref:a,...s,children:[ce.jsx("geometry",{attach:"geometry",...t.geometry}),ce.jsx("pointsMaterial",{attach:"material",vertexColors:!0,size:n,sizeAttenuation:!0,transparent:!0,alphaTest:1,opacity:1})]})}function QAe({data:t,_ref:e,wireframe:n=!1,color:r=null,matrix:i,material:s,materialType:o,hide:a,...l}){const c=E.useRef(),u=e||c;E.useLayoutEffect(()=>{const h=u.current;h&&i&&(h.matrix.fromArray(i),h.matrix.decompose(h.position,h.quaternion,h.scale),h.rotation.setFromQuaternion(h.quaternion))},[i,u.current]);const{scene:f}=wt();return E.useLayoutEffect(()=>{let h;if(o){const d=RC[o];h=new d({color:r,...s})}return t==null||t.traverse(d=>{d.castShadow=!0,d.receiveShadow=!0,h&&(d.material=h),d.material&&(d.material.wireframe=n,d.material.needsUpdate=!0)}),()=>{f.remove(t),h==null||h.dispose()}},[t,r,n,o,s]),!t||a?null:ce.jsx("primitive",{ref:u,receiveShadow:!0,castShadow:!0,object:t,...l})}function ZAe({data:t,_ref:e,size:n=.005,color:r,matrix:i,hide:s,...o}){const a=E.useRef(),l=e||a;return E.useLayoutEffect(()=>{const c=l.current;c&&i&&(c.matrix.fromArray(i),c.matrix.decompose(c.position,c.quaternion,c.scale),c.rotation.setFromQuaternion(c.quaternion))},[i,l.current]),!t||s?null:(t.attributes.normal||console.log("data.attributes.normal is missing"),t&&!t.attributes.normal&&(t.index?(console.log("compute normals for data. "),t.computeVertexNormals()):console.log("Both data.index and data.attributes.normal are missing. Won't be able to compute surface normals.")),t.attributes.normal?ce.jsx("mesh",{ref:l,geometry:t,castShadow:!0,receiveShadow:!0,...o,children:ce.jsx("meshStandardMaterial",{vertexColors:!0})}):r?ce.jsxs("points",{ref:l,...o,children:[ce.jsx("bufferGeometry",{...t}),ce.jsx("pointsMaterial",{size:n,vertexColors:!0,color:r,sizeAttenuation:!0})]}):ce.jsx("points",{ref:l,geometry:t,...o,children:ce.jsx("pointsMaterial",{attach:"material",vertexColors:!0,size:n,sizeAttenuation:!0,opacity:1})}))}function e2e({data:t,_ref:e,matrix:n,color:r,materialType:i,material:s,...o}){const{scene:a}=wt();return E.useLayoutEffect(()=>{n&&n.length===16&&(t.scene.matrix.fromArray(n),t.scene.matrix.decompose(t.scene.position,t.scene.quaternion,t.scene.scale),t.scene.rotation.setFromQuaternion(t.scene.quaternion))},[t,n]),E.useLayoutEffect(()=>{if(i){const l=RC[i],c=new l({color:r,...s});return t.scene.traverse(u=>{u.material=c}),()=>c.dispose()}else r&&t.scene.traverse(l=>{var c,u;l!=null&&l.isMesh&&((u=(c=l.material)==null?void 0:c.color)==null||u.set(r))})},[t,r,i,s]),E.useEffect(()=>()=>{a.remove(t.scene)},[t]),ce.jsx("primitive",{ref:e,object:t.scene,...o})}function t2e({robot:t,_ref:e,jointValues:n={},matrix:r,color:i,materialType:s,material:o,...a}){const{scene:l}=wt();return E.useLayoutEffect(()=>{r&&r.length===16&&(t.matrix.fromArray(r),t.matrix.decompose(t.position,t.quaternion,t.scale),t.rotation.setFromQuaternion(t.quaternion))},[t,r]),E.useLayoutEffect(()=>{if(s){const c=RC[s],u=new c({color:i,...o});return t.traverse(f=>{f.material=u}),()=>u.dispose()}else i&&t.traverse(c=>{var u,f;c!=null&&c.isMesh&&((f=(u=c.material)==null?void 0:u.color)==null||f.set(i))})},[t,i,s,o]),E.useEffect(()=>(n&&(t==null||t.setJointValues(n)),()=>{l.remove(t)}),[t,n]),ce.jsx("primitive",{ref:e,object:t,...a})}function n2e({_ref:t,color:e,pinchWidth:n=.04,skeleton:r=!1,axes:i=!1,showOrigin:s=!0,hide:o,...a}){const l=E.useRef(),c=t||l;return o?null:r?ce.jsx(FG,{_ref:t,color:e,pinchWidth:n,...a}):ce.jsxs(fm,{_ref:c,...a,children:[i&&ce.jsx("axesHelper",{args:[.1]}),ce.jsxs("mesh",{position:[0,.07,0],rotation:[0,0,Math.PI/2],scale:[1,1,1],children:[ce.jsx("cylinderGeometry",{attach:"geometry",args:[.015,.015,.12,32]}),ce.jsx("meshBasicMaterial",{attach:"material",color:e||"#cecece"})]}),ce.jsxs("mesh",{position:[-n-.005,0,0],scale:1,children:[ce.jsx("boxGeometry",{attach:"geometry",args:[.01,.02,.025,32]}),ce.jsx("meshBasicMaterial",{attach:"material",color:e||"#23aaff"})]}),ce.jsxs("mesh",{position:[-n-.005,.0275+.01,0],scale:1,children:[ce.jsx("boxGeometry",{attach:"geometry",args:[.01,.055,.025,32]}),ce.jsx("meshBasicMaterial",{attach:"material",color:e||"#8ed6ff"})]}),ce.jsxs("mesh",{position:[n+.005,0,0],scale:1,children:[ce.jsx("boxGeometry",{attach:"geometry",args:[.01,.02,.025,32]}),ce.jsx("meshBasicMaterial",{attach:"material",color:e||"#ff5656"})]}),ce.jsxs("mesh",{position:[n+.005,.0275+.01,0],scale:1,children:[ce.jsx("boxGeometry",{attach:"geometry",args:[.01,.055,.025,32]}),ce.jsx("meshBasicMaterial",{attach:"material",color:e||"#ff9595"})]}),ce.jsxs("mesh",{position:[0,.075+.025,0],rotation:[0,0,0],scale:[1,1,1],children:[ce.jsx("cylinderGeometry",{attach:"geometry",args:[.0125,.0125,.05,32]}),ce.jsx("meshBasicMaterial",{attach:"material",color:e||"#5b5b5b"})]}),s?ce.jsxs("mesh",{position:[0,0,0],rotation:[0,0,0],children:[ce.jsx("sphereGeometry",{attach:"geometry",args:[.0075,32,32]}),ce.jsx("meshBasicMaterial",{attach:"material",color:"green"})]}):null]})}function FG({_ref:t,color:e,pinchWidth:n=.07,opacity:r=.9,hide:i,...s}){const o=E.useRef(),a=t||o;return i?null:ce.jsxs(fm,{_ref:a,scale:1,...s,children:[ce.jsxs("mesh",{position:[0,.07,0],rotation:[Math.PI/2,0,0],scale:[1,1,1],children:[ce.jsx("cylinderGeometry",{attach:"geometry",args:[.005,.005,n*2,32]}),ce.jsx("meshBasicMaterial",{color:e||"#ffffff",transparent:!0,opacity:r})]}),ce.jsxs("mesh",{position:[0,.02,n],scale:1,children:[ce.jsx("cylinderGeometry",{attach:"geometry",args:[.005,.005,.1,32]}),ce.jsx("meshBasicMaterial",{attach:"material",color:e||"#23aaff",transparent:!0,opacity:r})]}),ce.jsxs("mesh",{position:[0,.02,-n],scale:1,children:[ce.jsx("cylinderGeometry",{attach:"geometry",args:[.005,.005,.1,32]}),ce.jsx("meshBasicMaterial",{attach:"material",color:e||"#ff5656",transparent:!0,opacity:r})]}),ce.jsxs("mesh",{position:[0,.09,0],rotation:[0,0,0],scale:[.8,1,1],children:[ce.jsx("cylinderGeometry",{attach:"geometry",args:[.01,.01,.06,32]}),ce.jsx("meshBasicMaterial",{attach:"material",color:e||"gray",transparent:!0,opacity:r})]}),ce.jsxs("mesh",{position:[0,0,0],rotation:[0,0,0],children:[ce.jsx("sphereGeometry",{attach:"geometry",args:[.01,32,32]}),ce.jsx("meshBasicMaterial",{attach:"material",color:e||"green",transparent:!0,opacity:r})]})]})}function r2e({_key:t,src:e,text:n,buff:r,mtl:i,hide:s,encoding:o="ascii",onLoad:a,...l}){const[c,u]=E.useState();E.useEffect(()=>{if(!c&&s)return;const h=new AG;i?new C_e().load(i,p=>{p.preload(),h.setMaterials(p),r&&(n=new TextDecoder(o).decode(r)),n?u(h.parse(n)):e&&h.load(e,u)}):(r&&(n=new TextDecoder(o).decode(r)),n?u(h.parse(n)):e&&h.load(e,u))},[e,s]);const{sendMsg:f}=E.useContext(Ur);return E.useEffect(()=>{c&&(typeof a=="function"&&a(),typeof a=="string"&&f({etype:"LOAD",key:t,value:a}))},[c]),c?ce.jsx(QAe,{data:c,hide:s,...l}):null}function i2e({_key:t,src:e,text:n,buff:r,hide:i,encoding:s="ascii",onLoad:o,...a}){const[l,c]=E.useState();E.useEffect(()=>{if(!l&&i)return;const f=new TG;r&&(n=new TextDecoder(s).decode(r)),n?c(f.parse(n,"")):e&&f.load(e,c)},[e,i]);const{sendMsg:u}=E.useContext(Ur);return E.useEffect(()=>{l&&(typeof o=="function"&&o(),typeof o=="string"&&u({etype:"LOAD",key:t,value:o}))},[l]),l?ce.jsx(JAe,{data:l,hide:i,...a}):null}function s2e({_key:t,src:e,text:n,buff:r,hide:i,encoding:s="ascii",onLoad:o,...a}){const[l,c]=E.useState();E.useEffect(()=>{if(!l&&i)return;const f=new D_e;if(r&&(n=new TextDecoder(s).decode(r)),n){const h=f.parse(n);c(h)}else e&&f.load(e,c)},[e,i]);const{sendMsg:u}=E.useContext(Ur);return E.useEffect(()=>{l&&(typeof o=="function"&&o(),typeof o=="string"&&u({etype:"LOAD",key:t,value:o}))},[l]),l?ce.jsx(ZAe,{data:l,hide:i,...a}):null}function lN({_key:t,src:e,text:n,buff:r,hide:i,encoding:s="ascii",onLoad:o,...a}){const[l,c]=E.useState();E.useEffect(()=>{if(!l&&i)return;const f=new eE;r&&(n=new TextDecoder(s).decode(r)),n?f.parse(n,"",c):e&&f.load(e,c)},[e,i]);const{sendMsg:u}=E.useContext(Ur);return E.useEffect(()=>{l&&(typeof o=="function"&&o(),typeof o=="string"&&u({etype:"LOAD",key:t,value:o}))},[l]),l?ce.jsx(e2e,{data:l,hide:i,...a}):null}function o2e({_key:t,src:e,text:n,buff:r,hide:i,encoding:s="ascii",jointValues:o,workingPath:a,fetchOptions:l,parseVisual:c,parseCollision:u,packages:f,onLoad:h,...d}){const[p,m]=E.useState(),{showError:g,showInfo:v}=E.useContext(rb),x=E.useMemo(()=>{const A=new KAe;return a&&(A.workingPath=a),l&&(A.fetchOptions=l),c&&(A.parseVisual=c),u&&(A.parseCollision=u),f&&f.length&&(A.packages=f),A.loadMeshCb=function(T,w,M){if(typeof T!="string")return;const C=T.toLowerCase(),S=R=>{g(`Failed to load mesh: ${T}`),M(void 0,R)};C.endsWith(".obj")?new AG(w).load(T,M,void 0,S):C.endsWith(".stl")?new S_e(w).load(T,R=>M(new un(R,new _l)),void 0,S):C.endsWith(".glb")?new eE(w).load(T,R=>M(R.scene),void 0,S):C.endsWith(".gltf")?new eE(w).load(T,R=>M(R.scene),void 0,S):C.endsWith(".pcd")?new TG(w).load(T,M,void 0,S):C.endsWith(".dae")?new R_e(w).load(T,R=>M(R.scene),void 0,S):v(`Unknown mesh type: ${T}`)},A},[a,l,c,u,f]);E.useEffect(()=>{!p&&i||(r&&(n=new TextDecoder(s).decode(r)),n?m(x.parse(n)):e&&x.load(e,m))},[x,e,i]);const{sendMsg:y}=E.useContext(Ur);return E.useEffect(()=>{p&&(typeof h=="function"&&h(),typeof h=="string"&&y({etype:"LOAD",key:t,value:h}))},[p]),p?ce.jsx(t2e,{robot:p,jointValues:o,hide:i,...d}):null}function a2e(t,e){const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");if(r)return r.drawImage(t,0,0),r.getImageData(0,0,t.width,t.height,{colorSpace:e})}function l2e(t,e,n=!1){const{width:r}=t,{height:i}=t,s=a2e(t,"srgb");if(!s)return;const o=s.data;for(let a=0,l=r*i*4;a<l;a+=4){let c,u,f,h;a%(r*4)===0?(c=o[a],u=o[a+4]):a%(r*4)===(r-1)*4?(c=o[a-4],u=o[a]):(c=o[a-4],u=o[a+4]),a<r*2?(f=o[a],h=o[a+r*4]):a>r*(i-1)*4?(f=o[a-r*4],h=o[a]):(f=o[a-r*4],h=o[a+r*4]),e[a+0]=c-u+127,n?e[a+1]=h-f+127:e[a+1]=f-h+127,e[a+2]=255,e[a+3]=255}return e}const c2e=t=>(t==null?void 0:t.complete)&&t.naturalHeight!==0;function u2e({_key:t,_ref:e,type:n="standard",normalMap:r,displacementMap:i,normalScale:s=[1,1],displacementScale:o=1,...a}){var l,c;const u=`mesh${n.charAt(0).toUpperCase()}${n.slice(1)}Material`,f=ys(Ki,i||[]);f&&(f.colorSpace=mi);const h=(l=f.image)==null?void 0:l.width,d=(c=f.image)==null?void 0:c.height,p=ys(Ki,r||[]);p&&(p.colorSpace=mi);const m=E.useMemo(()=>{const A=new Uint8ClampedArray(4*h*d);return A.fill(255),A},[h,d]),g=E.useMemo(()=>{if(r||r===!1)return null;const A=new mo(m,h,d);return A.flipY=!0,A.colorSpace=mi,A},[r,h,d]);E.useLayoutEffect(()=>{r||r===!1||c2e(f.image)&&(!g||!g.image||(l2e(f.image,m,g.flipY),g.image={data:m,width:h,height:d},g.colorSpace=mi,g.needsUpdate=!0))},[r,f.image,h,d]);const v=`${t} Height Map`,x=Mr(v,{displacementScale:{value:o,render:()=>!!i,options:{min:0,step:.01}},normalScale:{value:s,render:()=>!!i&&r!==!1,options:{min:0,step:.01}}},[i,o,r,s]),y={};return i&&(y.displacementMap=f,y["displacementMap-colorSpace"]=mi),r?y.normalMap=p:i&&(y.normalMap=g),y.normalMap&&(y.normalMapType=Xc,y["normalMap-colorSpace"]=mi),ce.jsx(u,{ref:e,attach:"material",...y,...x,...a},t)}function zi({_ref:t,_key:e="Box",geometry:n,hide:r,args:i,materialType:s="basic",material:{map:o,mapRepeat:a,displacementMap:l,normalMap:c,...u}={},outlines:f,...h}){const d=E.useRef(),p=t||d,m=Object.keys(u).join(","),g=E.useRef(1);E.useLayoutEffect(()=>{g.current+=1},[s,m]);const v=ys(Ki,o||[]);return o&&a&&(v.wrapS=v.wrapT=Rr,v.repeat.set(...a)),r?null:ce.jsxs("mesh",{ref:p,...h,children:[ce.jsx(n,{attach:"geometry",args:i}),ce.jsx(u2e,{_key:`${g.current}`,type:s,displacementMap:l,normalMap:c,normalScale:[1,1],displacementScale:1,map:o&&v,...u}),f?ce.jsx(wH,{...f}):null]},e)}function f2e(t){return ce.jsx(zi,{geometry:"boxGeometry",...t})}function h2e(t){return ce.jsx(zi,{geometry:"capsuleGeometry",...t})}function d2e(t){return ce.jsx(zi,{geometry:"circleGeometry",...t})}function p2e(t){return ce.jsx(zi,{geometry:"coneGeometry",...t})}function m2e(t){return ce.jsx(zi,{geometry:"cylinderGeometry",...t})}function g2e(t){return ce.jsx(zi,{geometry:"dodecahedronGeometry",...t})}function v2e(t){return ce.jsx(zi,{geometry:"edgesGeometry",...t})}function y2e(t){return ce.jsx(zi,{geometry:"extrudeGeometry",...t})}function x2e(t){return ce.jsx(zi,{geometry:"icosahedronGeometry",...t})}function E2e(t){return ce.jsx(zi,{geometry:"latheGeometry",...t})}function _2e(t){return ce.jsx(zi,{geometry:"octahedronGeometry",...t})}function b2e(t){return ce.jsx(zi,{geometry:"planeGeometry",...t})}function A2e(t){return ce.jsx(zi,{geometry:"polyhedronGeometry",...t})}function T2e(t){return ce.jsx(zi,{geometry:"ringGeometry",...t})}function w2e(t){return ce.jsx(zi,{geometry:"shapeGeometry",...t})}function S2e(t){return ce.jsx(zi,{geometry:"sphereGeometry",...t})}function C2e(t){return ce.jsx(zi,{geometry:"tetrahedronGeometry",...t})}function M2e(t){return ce.jsx(zi,{geometry:"torusGeometry",...t})}function R2e(t){return ce.jsx(zi,{geometry:"torusKnotGeometry",...t})}function I2e(t){return ce.jsx(zi,{geometry:"tubeGeometry",...t})}function P2e(t){return ce.jsx(zi,{geometry:"wireframeGeometry",...t})}const L2e=E.forwardRef(({onSqueezeStart:t,onMove:e,onSqueezeEnd:n,onSelect:r,children:i,bgChildren:s,...o},a)=>{const l=E.useRef(),c=a||l,u=E.useRef(),f=E.useMemo(()=>new yt,[]);return rn(()=>{const h=u.current;if(!c.current||!h)return null;const d=c.current;d.applyMatrix4(f),d.applyMatrix4(h.matrixWorld),d.updateMatrixWorld(),f.copy(h.matrixWorld).invert(),e==null||e({world:h.matrixWorld,local:h.matrix})}),ce.jsxs("group",{ref:c,children:[s,ce.jsx(UU,{onSqueezeStart:h=>{u.current=h.target.controller,f.copy(h.target.controller.matrixWorld).invert(),t==null||t(h)},onSqueezeEnd:h=>{h.target.controller===u.current&&(u.current=null),n==null||n(h)},onSelect:h=>{r==null||r(h)},...o,children:i})]})}),N2e=E.forwardRef(({size:t,children:e,opacity:n=1,...r},i)=>ce.jsxs("mesh",{ref:i,...r,children:[ce.jsx("boxGeometry",{args:t}),ce.jsx("meshPhongMaterial",{opacity:n,transparent:n<1,color:16777207}),e]}));function UG({children:t,_key:e,_ref:n,anchor:r,offset:i,scale:s=.4,lineWidth:o=1,matrix:a,position:l,rotation:c,onMove:u,onMoveEnd:f,...h}){const[d,p]=E.useState({}),m=E.useRef(),g=n||m,{sendMsg:v}=E.useContext(Ur),x=E.useMemo(()=>({position:new J(...l||[0,0,0]),rotation:new wi(...c||[0,0,0]),quaternion:new kn,scale:new J}),[]);E.useEffect(()=>{if(!g.current)return;const T=g.current;a&&(T.matrix.fromArray(a),T.matrix.decompose(T.position,T.quaternion,T.scale),T.rotation.setFromQuaternion(T.quaternion))},[a,g.current]),E.useEffect(()=>{if(!g.current)return;const T=g.current;if(a)return;let w=!1;l&&(T.position.fromArray(l),w=!0),c&&(T.rotation.fromArray(c),w=!0),w&&(T==null||T.updateMatrix())},[l,c,g.current]);function y(T,w,M,C){T.decompose(x.position,x.quaternion,x.scale),x.rotation.setFromQuaternion(x.quaternion);const S={matrix:T.toArray(),matrixWorld:M.toArray(),position:x.position.toArray(),rotation:x.rotation.toArray(),quaternion:x.quaternion.toArray()};v({etype:"OBJECT_MOVE",key:e,value:S}),u&&u(S),p(S)}function A(){v({etype:"OBJECT_MOVE_END",key:e,value:d})}return ce.jsx(PEe,{ref:g,anchor:r,offset:i,scale:s,onDrag:y,onDragEnd:A,lineWidth:o,...h,children:t})}function O2e([t,e,n]=[0,0,0],[r,i,s]=[0,0,0]){return[t+r,e+i,n+s]}function D2e({_key:t,_ref:e,offset:n,scale:r,position:i,rotation:s,children:o=[],onMove:a,onMoveEnd:l}){const c=E.useRef(),u=e||c,{sendMsg:f}=E.useContext(Ur),h=E.useMemo(()=>({position:new J,rotation:new wi,quaternion:new kn,scale:new J}),[]),d=E.useCallback(()=>{var g,v;const x=(g=u.current)==null?void 0:g.matrix,y=(v=u.current)==null?void 0:v.matrixWorld;y.decompose(h.position,h.quaternion,h.scale),h.rotation.setFromQuaternion(h.quaternion);const A={matrix:x.toArray(),matrixWorld:y.toArray(),position:h.position.toArray(),rotation:h.rotation.toArray(),quaternion:h.quaternion.toArray()};l&&l(A),f({etype:"OBJECT_MOVE_END",key:t,value:A})},[]),p=E.useCallback(({local:g,world:v})=>{v.decompose(h.position,h.quaternion,h.scale),h.rotation.setFromQuaternion(h.quaternion);const x={matrix:g.toArray(),matrixWorld:v.toArray(),position:h.position.toArray(),rotation:h.rotation.toArray(),quaternion:h.quaternion.toArray()};a&&a(x),f({etype:"OBJECT_MOVE",key:t,value:x})},[]),m=()=>ce.jsx("group",{position:i,rotation:s,children:o});return ce.jsx(L2e,{onSqueezeEnd:d,onMove:p,position:i,rotation:s,bgChildren:m(),children:ce.jsx(N2e,{ref:u,size:[r,r,r],opacity:.5,rotation:s,position:O2e(i,n)})})}function zG({_key:t,_ref:e,children:n,anchor:r,offset:i,annotations:s,scale:o=.4,lineWidth:a=2,handleOffset:l=[0,0,0],hide:c,...u}){const{isPresenting:f}=oi();return c?ce.jsx(ce.Fragment,{children:n}):f?ce.jsx(D2e,{_key:t,_ref:e,scale:o*.1,offset:l,...u,children:n}):ce.jsx(UG,{_key:t,_ref:e,anchor:r,offset:i,annotations:s,scale:o,lineWidth:a,...u,children:n})}function IC({min:t={x:-1,y:-1,z:-1},max:e={x:1,y:1,z:1},color:n="0xffffff",scale:r=1.01,...i}){const s=[e.x-t.x,e.y-t.y,e.z-t.z],o=[t.x+s[0]/2,t.y+s[1]/2,t.z+s[2]/2];return ce.jsxs("mesh",{position:o,...i,children:[ce.jsx("boxGeometry",{args:s}),ce.jsx("meshBasicMaterial",{transparent:!0,depthWrite:!1,opacity:0}),ce.jsx(uC,{scale:r,color:n})]})}const B2e=t=>typeof t=="function",k2e=E.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:r,children:i,...s},o)=>{const a=wt(({set:m})=>m),l=wt(({camera:m})=>m),c=E.useRef(null),u=E.useRef(null),f=Do(e);let h=0,d=null;const p=B2e(i);if(rn(m=>{p&&(n===1/0||h<n)&&(u.current.visible=!1,m.gl.setRenderTarget(f),d=m.scene.background,t&&(m.scene.background=t),m.gl.render(m.scene,c.current),m.scene.background=d,m.gl.setRenderTarget(null),u.current.visible=!0,h++)}),E.useLayoutEffect(()=>{if(r){const m=l;return a(()=>({camera:c.current})),()=>a(()=>({camera:m}))}},[c,r,a]),p){const m=i;return ce.jsxs(ce.Fragment,{children:[ce.jsx("perspectiveCamera",{ref:KL([c,o]),...s}),ce.jsx("group",{ref:u,children:m(f.texture)})]})}else return ce.jsx("perspectiveCamera",{ref:KL([c,o]),...s,children:i})});function F2e(t,e){for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function o4({_key:t,_ref:e,position:n,rotation:r,matrix:i,aspect:s=4/3,focus:o=10,fov:a=50,near:l=.1,far:c=.2,scale:u=1,upScale:f=1,focalLength:h=.035,showUp:d=!0,showFrustum:p=!0,showFocalPlane:m=!0,showImagePlane:g=!1,colorFrustum:v=16755200,colorCone:x=16711680,colorFocalPlane:y="white",colorUp:A=43775,colorTarget:T="green",colorCross:w=3355443,children:M}){const C=E.useMemo(()=>({raw:null,matrix:new yt,position:new J(0,0,0),rotation:new wi(0,0,0),quaternion:new kn(0,0,0,0),scale:new J(0,0,0)}),[]);let S=E.useRef();e&&(S=e),E.useLayoutEffect(()=>{if(S.current)if(i){if(C.raw&&F2e(C.raw,i))return;C.raw=i,C.matrix.fromArray(i),C.matrix.decompose(S.current.position,C.quaternion,C.scale),S.current.rotation.setFromQuaternion(C.quaternion)}else n&&r&&(S.current.position.set(...n),S.current.rotation.set(...r),S.current.updateMatrix())},[i,a,o,l,c]);const R=E.useMemo(()=>{const O=Math.tan(a/360*Math.PI),L=O*o,B=s*L,N=O*h,$=s*N,U=O*l,Q=s*U,Y=O*c,ee=s*Y;return{up:[[-$*.6,N*1.05,-h],[$*.6,N*1.05,-h],[0,N+Math.max(N*.4,$*.25),-h],[-$*.6,N*1.05,-h]],imagePlaneCone:[[0,0,0],[-$,-N,-h],[0,0,0],[$,-N,-h],[0,0,0],[$,N,-h],[0,0,0],[-$,N,-h]],imagePlane:[[-$,-N,-h],[$,-N,-h],[$,N,-h],[-$,N,-h],[-$,-N,-h]],nearPlane:[[-Q,-U,-l],[Q,-U,-l],[Q,U,-l],[-Q,U,-l],[-Q,-U,-l]],cone:[[0,0,0],[-Q,-U,-l],[0,0,0],[Q,-U,-l],[0,0,0],[Q,U,-l],[0,0,0],[-Q,U,-l],[0,0,0],[-Q,-U,-l]],farPlane:[[-ee,-Y,-c],[ee,-Y,-c],[ee,Y,-c],[-ee,Y,-c],[-ee,-Y,-c]],farPlaneFrustum:[[-Q,-U,-l],[-ee,-Y,-c],[Q,-U,-l],[ee,-Y,-c],[Q,U,-l],[ee,Y,-c],[-Q,U,-l],[-ee,Y,-c]],focalPlane:[[-B,-L,-o],[B,-L,-o],[B,L,-o],[-B,L,-o],[-B,-L,-o]],crossHair:[[0,L,-o],[0,-L,-o],[B,0,-o],[-B,0,-o]]}},[a,o,s,l,c]);return ce.jsxs("group",{ref:S,position:n,rotation:r,children:[d?ce.jsx($i,{scale:u*f,points:R.up,color:A,lineWidth:1},"up"):null,g?ce.jsx($i,{scale:u,points:R.imagePlaneCone,color:x,lineWidth:2,segments:!0},"image-plane-cone"):null,g?ce.jsx($i,{scale:u,points:R.imagePlane,color:y,lineWidth:2},"image-plane"):null,p?[ce.jsx($i,{points:R.nearPlane,color:v,lineWidth:1},"near-plane"),ce.jsx($i,{points:R.cone,color:x,lineWidth:1,segments:!0},"cone"),ce.jsx($i,{points:R.farPlane,color:v,lineWidth:1},"far-plane"),ce.jsx($i,{points:R.farPlaneFrustum,color:v,lineWidth:1,segments:!0},"far-plane-frustum")]:null,m?[ce.jsx(yC,{position:[0,0,-o],"material-color":T,scale:.2},"focus"),ce.jsx($i,{points:R.focalPlane,color:y,lineWidth:1},"focal-plane"),ce.jsx($i,{points:R.crossHair,color:w,lineWidth:1,segments:!0},"cross-hair")]:null,M]},t)}const U2e=(t=!1)=>{const[e,n,r]=E.useMemo(()=>{if(t)return[null,null,null];const s=new Bi(-1,1,1,-1,0,1),o=new ur({vertexShader:`
      varying vec2 vUv;
      void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }`,fragmentShader:`
      #include <packing>
    
      varying vec2 vUv;
      uniform sampler2D tDepth;
      uniform float cameraNear;
      uniform float cameraFar;
      
      float readDepth( sampler2D depthSampler, vec2 coord ) {
        float fragCoordZ = texture2D( depthSampler, coord ).x;
        float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
        return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );
      }
      
      void main() {
        float depth = readDepth( tDepth, vUv );
        
        gl_FragColor.rgb = 1.0 - vec3( depth );
        gl_FragColor.a = 1.0;

        // this works. 
        // float d_normal = depth;
        // 
        // // Initialize the color as black
        // vec3 color = vec3(0.0);

        // // Calculate RGB values based on the normalized depth
        // if (d_normal <= 0.167) {
        //   color.r = 1.0;
        //   color.g = d_normal;
        // } else if (d_normal < 0.333) {
        //   color.r = 0.333 - d_normal;
        //   color.g = 1.0;
        // } else if (d_normal < 0.5) {
        //   color.g = 1.0;
        //   color.b = d_normal - 0.5;
        // } else if (d_normal < 0.667) {
        //   color.g = 0.667 - d_normal;
        //   color.b = 1.0;
        // } else if (d_normal < 0.833) {
        //   color.r = d_normal - 0.833;
        //   color.b = 1.0;
        // } else {
        //   color.r = 1.0;
        //   color.b = 1.0 - d_normal;
        // }

        // // Set the fragment's color
        // gl_FragColor.rgb = color;
        
      }`,uniforms:{cameraNear:{value:.1},cameraFar:{value:10},tDepth:{value:null}}}),a=new Fo(2,2),l=new un(a,o),c=new vs;return c.add(l),[c,o,s]},[t]);return E.useCallback(({renderer:s,depthTexture:o,near:a,far:l})=>{n&&(n.uniforms.tDepth.value=o,n.uniforms.cameraNear.value=a,n.uniforms.cameraFar.value=l,s.setRenderTarget(null),s.render(e,r))},[t])},z2e=(t=!1)=>{const[e,n,r]=E.useMemo(()=>{if(t)return[null,null,null];const s=new Bi(-1,1,1,-1,0,1),o=new Or,a=new Fo(2,2),l=new un(a,o),c=new vs;return c.add(l),[c,o,s]},[]);return E.useCallback(({renderer:s,texture:o})=>{var a;n&&(n.map!==o&&((a=n.map)==null||a.dispose(),n.map=o,n.needsUpdate=!0),s.setRenderTarget(null),s.render(e,r))},[t])};async function cN({renderer:t,quality:e}){const n=t.getContext(),r=t.domElement.width,i=t.domElement.height,s=new Uint8Array(r*i*4);return n.readPixels(0,0,r,i,n.RGBA,n.UNSIGNED_BYTE,s),await(await t.domElement.convertToBlob({quality:e,type:"image/jpeg"})).arrayBuffer().then(c=>new Uint8Array(c))}function H2e({_ref:t,_key:e,hide:n,width:r=640,height:i=480,matrix:s,fov:o=60,top:a=1,bottom:l=-1,left:c=-1,right:u=1,near:f=.1,far:h=20,renderDepth:d=!1,origin:p="top-left",distanceToCamera:m=.5,ctype:g="perspective",showCamera:v=!0,scale:x=10,showFrustum:y=!0,stream:A=null,fps:T=30,downsample:w=2,quality:M=1,monitor:C=!0,movable:S=!0,children:R=[],...O}){const L=E.useRef(),B=E.useRef(),N=E.useRef(),$=E.useRef(),U=E.useMemo(()=>({sinceLastFrame:0}),[]),{size:Q,camera:Y,scene:ee}=wt(),ne=window.devicePixelRatio||1,P=Do(r*ne,i*ne,{depth:d}),se=E.useMemo(()=>new J,[]),{sendMsg:re,downlink:Z,uplink:X}=E.useContext(Ur),W=Mr(e?`Scene.Camera-${e}`:"Scene.Camera",{showCamera:{value:v,label:"Show"},camType:{value:g,options:["perspective","orthographic"]}},[v]),K=Mr(e?`Scene.Camera-${e}`:"Scene.Camera",{near:{value:f,min:.001,step:.05},far:{value:h,min:.1,step:.1},showImagePlane:{value:!0,label:"Image Plane"},scale:{value:x,min:.1,step:.1},showFrustum:{value:y,label:"Frustum"}},[f,h,y]),ge=Mr(e?`Scene.Camera-${e}`:"Scene.Camera",W.camType==="perspective"?{fov:{value:o,min:0,max:170},aspect:{value:r/i,min:.1,max:10}}:{},[W.camType,o,r,i]),Se=Mr(e?`Scene.Camera-${e}`:"Scene.Camera",W.camType==="orthographic"?{top:{value:a,min:-10,step:.1},bottom:{value:l,min:-10,step:.1},left:{value:c,min:-10,step:.1},right:{value:u,min:-10,step:.1}}:{},[W.camType,a,l,c,u]),xe=E.useMemo(()=>{const Te=new Pg({canvas:new OffscreenCanvas(r/w,i/w),antialias:!1,precision:"highp",preserveDrawingBuffer:!0,depth:!0});return Te.autoClear=!1,Te.setPixelRatio(ne),Te},[ne,i,r,w]);E.useEffect(()=>{let Te;W.camType==="perspective"?Te=ge.aspect:Te=(Se.right-Se.left)/(Se.top-Se.bottom),L.current.aspect=Te,L.current.updateProjectionMatrix(),xe.setSize(Math.floor(Te*i/w),Math.floor(i/w),!1),xe.setPixelRatio(ne),P.setSize(Te*i*ne,i*ne)},[ne,i,r,w,ge.aspect,Se.top,Se.bottom,Se.left,Se.right,W.camType]),E.useLayoutEffect(()=>{if(!L.current||!s||s.length!==16)return;const Te=L.current;Te.matrix.fromArray(s),Te.matrix.decompose(Te.position,Te.quaternion,Te.scale),Te.rotation.setFromQuaternion(Te.quaternion);const Re=S?$==null?void 0:$.current:N==null?void 0:N.current;Re&&(Re.matrix.fromArray(s),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale),Re.rotation.setFromQuaternion(Re.quaternion))},[s,L.current]);const Me=E.useCallback(()=>{if(!$.current||!L.current)return;const Te=L.current,Re=$.current;Te.matrix.copy(Re.matrix),Te.matrix.decompose(Te.position,Te.quaternion,Te.scale),Te.rotation.setFromQuaternion(Te.quaternion),re({etype:"CAMERA_MOVE",key:e,value:{matrix:Te.matrix.toArray()}})},[$.current,L.current,re]),he=E.useRef({});rn(({gl:Te,scene:Re},$e)=>{if(U.sinceLastFrame+=$e,!L.current)return;let ve;if(W.camType==="perspective"?ve=ge.aspect:ve=(Se.right-Se.left)/(Se.top-Se.bottom),U.sinceLastFrame>1/T&&A==="frame"){U.sinceLastFrame=0;const me=xe.getContext(),We=xe.domElement.width,Xe=xe.domElement.height;B!=null&&B.current&&(B.current.visible=!1),N!=null&&N.current&&(N.current.visible=!1),xe.render(Re,L.current);const xt=new Uint8Array(We*Xe*4);me.readPixels(0,0,We,Xe,me.RGBA,me.UNSIGNED_BYTE,xt),xe.domElement.convertToBlob({quality:M,type:"image/jpeg"}).then(ie=>{ie.arrayBuffer().then(Ae=>{const Je={etype:"CAMERA_VIEW",key:e,value:{dpr:ne,delta:he,width:r,height:i,frame:new Uint8Array(Ae)}};re(Je)})})}if(C&&(B!=null&&B.current)){const me=B.current;me.visible=!1,N.current&&(N.current.visible=!1),Te.setRenderTarget(P),Te.render(Re,L.current),Te.setRenderTarget(null),P.texture.colorSpace=mi,me.visible=!0,N.current&&(N.current.visible=!0);const We=Q.width/Q.height,Xe=new J(0,0,-1).applyEuler(Y.rotation);let xt;switch(p){case"bottom-left":xt=[-1,-1];break;case"bottom-right":xt=[1,-1];break;case"top-left":xt=[-1,1];break;case"top-right":xt=[1,1];break}const fe=Math.tan(Y.fov/360*Math.PI);se.set(xt[0]*(1-ve*i/Q.width)*We*fe,xt[1]*(1-i/Q.height)*fe,0).applyEuler(Y.rotation);const ie=2*fe*m,Ae=ve*ie,Je=i/Q.height;me.scale.set(Ae*Je,ie*Je,1),me.position.copy(Y.position).addScaledVector(Xe,m),me.lookAt(Y.position),me.position.addScaledVector(se,m)}B!=null&&B.current&&(B.current.visible=!0),N!=null&&N.current&&(N.current.visible=!0)},1);const Oe=z2e(),be=U2e(!d);return E.useEffect(()=>{if(Z&&A==="ondemand")return Z.subscribe("GRAB_RENDER",async({key:Te,rtype:Re,data:{quality:$e=1}})=>{if(!L.current||Te!==e)return;B!=null&&B.current&&(B.current.visible=!1),N!=null&&N.current&&(N.current.visible=!1),xe.setRenderTarget(P),xe.render(ee,L.current);const ve={etype:Re||"GRAB_RENDER_RESPONSE",key:Te,value:{dpr:ne,width:r,height:i,frame:null,depthFrame:null}};Oe({renderer:xe,texture:P.texture}),ve.value.frame=await cN({renderer:xe,quality:$e}),d&&(be({renderer:xe,depthTexture:P.depthTexture,near:f,far:h}),ve.value.depthFrame=await cN({renderer:xe,quality:$e})),re(ve)})},[re,Z,X,w,xe,xe.domElement,P]),n?null:ce.jsxs(ce.Fragment,{children:[W.showCamera&&!S?ce.jsx(o4,{_ref:N,...ge,...K,showFocalPlane:!1,...O,children:R}):null,W.showCamera&&S?ce.jsxs(zG,{_ref:$,onMove:Me,matrix:s,...O,children:[ce.jsx(o4,{_ref:N,...ge,...K,showFocalPlane:!1}),R]}):null,C?ce.jsx(vxe,{ref:B,args:[1,1,r,i],renderOrder:1,children:ce.jsx("meshBasicMaterial",{attach:"material",map:P.texture})},"rgb"):null,W.camType==="perspective"?ce.jsx(k2e,{ref:L,near:K.near,far:K.far,...ge,...O}):null,W.camType==="orthographic"?ce.jsx(b_,{ref:L,near:K.near,far:K.far,...Se,...O}):null]})}function G2e({_key:t,children:e,hide:n=!1,intensity:r=1,color:i="#ffffff",levaPrefix:s="Scene.",lookAt:o=[0,0,0],...a}){const l=E.useRef();let c=s?`${s}Rect Area Light`:"Rect Area Light";c=t?`${c}-[${t}]`:c;const u=Mr(c,{intensity:{value:r,step:.05},color:i,hide:n},[r,i,n]);return E.useLayoutEffect(()=>{var f;(f=l.current)==null||f.lookAt(new J(...o))},[o]),u.hide?null:ce.jsx("rectAreaLight",{ref:l,...u,...a},t)}function V2e({_key:t,children:e,hide:n=!1,intensity:r=1,color:i="#ffffff",levaPrefix:s="Scene.",helper:o=!1,...a}){const l=E.useRef();let c=s?`${s}Hemisphere Light`:"Hemisphere Light";c=t?`${c}-[${t}]`:c;const u=Mr(c,{useHelper:o,intensity:{value:r,step:.05},color:i,hide:n},[o,r,i,n]);return cm(u.useHelper?l:null,pU,1,"red"),u.hide?null:ce.jsx("hemisphereLight",{ref:l,...u,...a},t)}function W2e({_key:t,children:e,hide:n=!1,intensity:r=.5,color:i="#ffffff",levaPrefix:s="Scene.",helper:o=!1,...a}){const l=E.useRef();let c=s?`${s}Directional Light`:"Directional Light";c=t?`${c}-[${t}]`:c;const u=Mr(c,{useHelper:o,intensity:{value:r,step:.05},color:i,hide:n},[o,r,i,n]);return cm(u.useHelper?l:null,mU,1,"red"),u.hide?null:ce.jsx("directionalLight",{ref:l,...u,...a},t)}function j2e({_key:t,children:e,hide:n=!1,intensity:r=.5,color:i="#ffffff",levaPrefix:s="Scene.",...o}){const a=E.useRef();let l=s?`${s}Ambient Light`:"Ambient Light";l=t?`${l}-[${t}]`:l;const c=Mr(l,{intensity:{value:r,step:.05},color:i,hide:n},{collapsed:!0},[r,i,n]);return c.hide?null:ce.jsx("ambientLight",{ref:a,...c,...o},t)}function $2e({_key:t,children:e,hide:n=!1,intensity:r=.5,color:i="#ffffff",levaPrefix:s="Scene.",helper:o=!1,...a}){const l=E.useRef();cm(o?l:null,uU,1,"red");let c=s?`${s}Spot Light`:"Spot Light";c=t?`${c}-[${t}]`:c;const u=Mr(c,{intensity:{value:r,step:.05},color:i,hide:n},[r,i,n]);return u.hide?null:ce.jsx("spotLight",{ref:l,...u,...a},t)}function X2e({_key:t,children:e,hide:n=!1,intensity:r=20,color:i="#ffffff",levaPrefix:s="Scene.",helper:o=!1,showSphere:a=!1,radius:l=.1,...c}){const u=E.useRef();cm(o?u:null,dU,1,"red");let f=s?`${s}Point Light`:"Point Light";f=t?`${f}-[${t}]`:f;const h=Mr(f,{intensity:{value:r,step:.05},color:i,hide:n},[r,i,n]);return h.hide?null:ce.jsxs("group",{children:[ce.jsx("pointLight",{ref:u,...h,...c},t),a?ce.jsx(yC,{args:[l,32,32],position:c.position,emissive:i,emissiveIntensity:r}):null]})}function l3({matRef:t,rgb:e,alpha:n,depth:r,depthScale:i=1,depthBias:s=0,distanceToCamera:o=10,aspect:a,height:l,position:c,rotation:u,quaternion:f,matrix:h,opacity:d=1,fixed:p=!1,side:m=2,layers:g=null,wireframe:v=!1,material:x={}}){var y;const A=E.useRef(),{camera:T}=wt(),w=oi(S=>S.isPresenting);E.useEffect(()=>{!A.current||!w||typeof g=="number"&&w&&A.current.layers.set(g)},[g,A.current,w]),E.useLayoutEffect(()=>{if(!A.current||!p)return;const S=A.current;h?(S.matrix.fromArray(h),S.matrix.decompose(S.position,S.quaternion,S.scale),S.rotation.setFromQuaternion(S.quaternion)):(f?S.quaternion.fromArray(f):u&&S.rotation.set(...u),c&&S.position.set(...c))},[h,f,u,c,p]),rn(()=>{const S=A.current;let R,O,L;if(typeof l=="number"&&typeof a=="number")S.scale.set(l*a,l,1);else if(T.type==="PerspectiveCamera"){const Q=T;typeof l=="number"?R=l:R=2*Math.tan(Q.fov/360*Math.PI)*o,typeof a=="number"?L=a:L=Q.aspect,O=L*R,S.scale.set(O,R,1)}else if(T.type==="OrthographicCamera"){const Q=T;R=(Q.top-Q.bottom)/T.zoom,O=(Q.right-Q.left)/T.zoom,S.scale.set(O,R,1)}else console.warn("Unsupported camera type",T.type);if(p)return;if(h){S.matrix.fromArray(h),S.matrix.premultiply(T.matrixWorld),S.matrix.decompose(S.position,S.quaternion,S.scale),S.rotation.setFromQuaternion(S.quaternion);return}T.matrixWorld.decompose(S.position,T.quaternion,[]),f?(S.quaternion.fromArray(f),S.quaternion.premultiply(T.quaternion)):u?(S.quaternion.setFromEuler(new wi().fromArray(u)),S.quaternion.premultiply(T.quaternion)):S.quaternion.copy(T.quaternion);const[B,N,$]=c||[0,0,0],U=new J(B,N,$-o).applyQuaternion(T.quaternion);S.position.add(U)});const M=E.useMemo(()=>r!=null&&r.image?{"displacementMap-colorSpace":mi,...x}:x,[r,x]),C=(y=e||r)==null?void 0:y.image;return r!=null&&r.image?ce.jsxs("mesh",{ref:A,scale:[1,1,1],children:[ce.jsx("planeGeometry",{args:[1,1,C==null?void 0:C.width,C==null?void 0:C.height]}),ce.jsx("meshStandardMaterial",{attach:"material",ref:t,map:e,alphaMap:n,displacementMap:r,displacementScale:-i,displacementBias:s,wireframe:v,transparent:!!n||typeof d=="number",opacity:d,side:m,...M})]}):ce.jsxs("mesh",{ref:A,scale:[1,1,1],children:[ce.jsx("planeGeometry",{args:[1,1,C==null?void 0:C.width,C==null?void 0:C.height]}),ce.jsx("meshBasicMaterial",{attach:"material",ref:t,map:e,alphaMap:n,displacementScale:-i,displacementBias:s,wireframe:v,transparent:!!n||typeof d=="number",opacity:d,side:m,...x})]})}function uN({matRef:t,rgb:e,alpha:n,depth:r,depthScale:i=1,depthBias:s=0,distanceToCamera:o=1,opacity:a=1,fixed:l=!1,layers:c=null,side:u=2,wireframe:f=!1,material:h={}}){const d=E.useRef(),{camera:p}=wt(),m=oi(x=>x.isPresenting);E.useEffect(()=>{d.current&&typeof c=="number"&&m&&d.current.layers.set(c)},[c,d.current,m]);const g=E.useMemo(()=>{var x;if(p.type!=="PerspectiveCamera"){console.warn("ImageSphere only works with perspective camera");return}const y=p,A=y.fov/360*Math.PI,T=Math.atan(Math.tan(A)*y.aspect),w=(x=e||r)==null?void 0:x.image;return[o,w==null?void 0:w.width,w==null?void 0:w.height,-.5*Math.PI-T,2*T,.5*Math.PI-A,2*A]},[p.fov,p.aspect]);rn(()=>{if(!d.current||l)return;const x=d.current;p.matrixWorld.decompose(x.position,p.quaternion,[]),x.quaternion.copy(p.quaternion)});const v=E.useMemo(()=>r!=null&&r.image?{"displacementMap-colorSpace":mi,...h}:h,[r,h]);return r!=null&&r.image?ce.jsxs("mesh",{ref:d,scale:[1,1,1],children:[ce.jsx("sphereGeometry",{args:g}),ce.jsx("meshStandardMaterial",{ref:t,attach:"material",map:e,alphaMap:n,displacementMap:r,displacementScale:i,displacementBias:s,wireframe:f,transparent:!!n||typeof a=="number",opacity:a,side:u,...v})]}):ce.jsxs("mesh",{ref:d,scale:[1,1,1],children:[ce.jsx("sphereGeometry",{args:g}),ce.jsx("meshBasicMaterial",{ref:t,attach:"material",map:e,alphaMap:n,displacementScale:i,displacementBias:s,wireframe:f,transparent:!!n||typeof a=="number",opacity:a,side:u,...h})]})}function AT(t,e){t&&(e?(t.minFilter=Cn,t.magFilter=Cn):(t.minFilter=Ln,t.magFilter=Ln))}function HG({_key:t,geometry:e,src:n,alphaSrc:r,depthSrc:i,interpolate:s=!1,depthScale:o=1,depthBias:a=0,fixed:l=!1,levaPrefix:c="Scene.",...u}){const f=E.useRef(),{camera:h}=wt(),[d,p]=E.useState(),[m,g]=E.useState(),[v,x]=E.useState(),y=E.useMemo(()=>new Ki,[]),A=E.useMemo(()=>v&&h.type==="PerspectiveCamera"?{}:{imageOrientation:"flipY"},[h.type,v]);E.useEffect(()=>{if(!n)p(void 0);else if(typeof n=="string")y.load(n,p);else{const M=new Blob([n],{type:"image"}),C=new Vn;createImageBitmap(M,A).then(S=>{C.image=S,C.needsUpdate=!0,f.current&&(f.current.needsUpdate=!0),p(C)})}},[n,A]),E.useEffect(()=>{if(!r)g(void 0);else if(typeof r=="string")y.load(r,g);else{const M=new Blob([r],{type:"image"}),C=new Vn;createImageBitmap(M,A).then(S=>{C.image=S,C.needsUpdate=!0,f.current&&(f.current.needsUpdate=!0),g(C)})}},[r,A]),E.useEffect(()=>{if(!i)x(void 0);else if(typeof i=="string")y.load(i,x);else{const M=new Blob([i],{type:"image"}),C=new Vn;createImageBitmap(M,A).then(S=>{C.image=S,C.needsUpdate=!0,f.current&&(f.current.needsUpdate=!0),x(C)})}},[i,A]),E.useEffect(()=>{d&&AT(d,s),m&&AT(m,s),v&&AT(v,s)},[d,m,v,s]);let T=c?`${c}Image Background`:"Image Background";T=t?`${T}-[${t}]`:T;const w=Mr(T,{fixed:l,depthScale:{value:o,step:.01,label:"Depth Scale"},depthBias:{value:a,step:.01,label:"Depth Offset"}},[l,o,a]);if(e==="plane")return ce.jsx(l3,{matRef:f,rgb:d,alpha:m,depth:v,...w,...u});if(e==="sphere")return ce.jsx(uN,{matRef:f,rgb:d,alpha:m,...w,depth:v,...u});if(v){if(h.type==="OrthographicCamera")return ce.jsx(l3,{matRef:f,rgb:d,alpha:m,depth:v,...w,...u});if(h.type==="PerspectiveCamera")return ce.jsx(uN,{matRef:f,rgb:d,alpha:m,...w,depth:v,...u})}else return ce.jsx(l3,{matRef:f,rgb:d,alpha:m,...w,...u});return null}const Y2e=E.createContext({});function GG(t,{type:e,etype:n,...r},i){return e==="BUTTON"?_g(()=>i({key:t,etype:n}),r):{type:e,...r}}function q2e({layers:t=[],settings:e={},children:n=[]}){let r,i;const s=E.useMemo(()=>({layers:new Set}),[]),{uplink:o}=E.useContext(Ur);[r,i]=Mr("Render",()=>({renderHeight:{value:768,min:1,max:2304,step:1,pad:1,label:"Height"},"Res Presets":P8({opts:{384:()=>i({renderHeight:384}),480:()=>i({renderHeight:480}),768:()=>i({renderHeight:768}),960:()=>i({renderHeight:960}),1536:()=>i({renderHeight:1536})}}),progressive:{value:-2,min:-3,max:0,step:.5,label:"Progressive Scale"},Presets:P8({opts:{"-3":()=>i({progressive:-3}),"-2.5":()=>i({progressive:-2.5}),"-2":()=>i({progressive:-2}),"-1.5":()=>i({progressive:-1.5}),"-1":()=>i({progressive:-1}),"-1/2":()=>i({progressive:-.5}),"/":()=>i({progressive:0})}})}),[t]);const a=E.useMemo(()=>Object.entries(e||{}).reduce((h,[d,p])=>({...h,[d]:GG(d,p,o.publish)}),{}),[e]),l=E.useMemo(()=>{const h=n.map(d=>[d.key,{value:t.indexOf(d.key)>=0,label:`[${d.key}]`}]);return Object.fromEntries(h)},[]),c=Mr("Render.Layers",l,[t]),u=E.useMemo(()=>n.filter(h=>c[h.key]),[c]),f=Mr("Render.more․․․",a,{collapsed:!0});return E.useEffect(()=>(setTimeout(()=>o==null?void 0:o.publish({etype:"CAMERA_UPDATE"}),0),o.addReducer("CAMERA_MOVE",({value:{render:h,...d},...p})=>({...p,value:{...d,render:{...h,...r,...f,layers:u.map(m=>m.key)}}}))),[u,o,f,r]),ce.jsxs(ce.Fragment,{children:[f.use_aabb?ce.jsx(MC,{children:ce.jsx(IC,{min:f.aabb_min,max:f.aabb_max})}):null,ce.jsx(Y2e.Provider,{value:s,children:u})]})}function K2e({_key:t,title:e=`Render.Channel [${t}]`,channel:n,alphaChannel:r,settings:i,distance:s=10,interpolate:o=!1,opacity:a=1,folderOptions:l}){const[c,u]=E.useState(),[f,h]=E.useState(),{uplink:d,downlink:p}=E.useContext(Ur),m=E.useMemo(()=>Object.entries(i||{}).reduce((y,[A,T])=>({...y,[A]:GG(A,T,d.publish)}),{}),[i,d.publish]),g=Mr(e,m,l,[i]);E.useLayoutEffect(()=>(setTimeout(()=>d==null?void 0:d.publish({etype:"CAMERA_UPDATE"}),0),d.addReducer("CAMERA_MOVE",({value:{render:y={},...A},...T})=>({...T,value:{...A,render:{...y,[t]:g}}}),n)),[d,g]);const v=Mr(`${e}.more․․․`,{interpolate:o,distance:s,opacity:{value:a||1,label:"Opacity",min:0,max:1}},{label:"Options",collapsed:!0},[]),x=E.useCallback(({etype:y,data:A})=>{if(y==="RENDER"){if(n in A){const T=A[g.channel||n];if(!T)return;u(T)}if(r in A){const T=A[g.alphaChannel||r];if(!T)return;h(T)}}},[g.useAlpha]);return E.useLayoutEffect(()=>p.subscribe("RENDER",x),[p]),ce.jsxs(ce.Fragment,{children:[g.use_aabb?ce.jsx(MC,{children:ce.jsx("group",{position:S_(g.position),rotation:SC(g.rotation),scale:CC(g.scale),children:ce.jsx(IC,{min:g.aabb_min,max:g.aabb_max})})}):null,c?ce.jsx(HG,{src:c,alphaSrc:g.useAlpha?f:void 0,distanceToCamera:v.distance,interpolate:v.interpolate,opacity:v.opacity}):null]})}const VG=-1,M_=0,nE=1,rE=2,PC=3,LC=4,NC=5,OC=6,WG=7,jG=8,fN=typeof self=="object"?self:globalThis,J2e=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case M_:case VG:return n(o,i);case nE:{const a=n([],i);for(const l of o)a.push(r(l));return a}case rE:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case PC:return n(new Date(o),i);case LC:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case NC:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case OC:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case WG:{const{name:a,message:l}=o;return n(new fN[a](l),i)}case jG:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new fN[s](o),i)};return r},hN=t=>J2e(new Map,t)(0),Gd="",{toString:Q2e}={},{keys:Z2e}=Object,H0=t=>{const e=typeof t;if(e!=="object"||!t)return[M_,e];const n=Q2e.call(t).slice(8,-1);switch(n){case"Array":return[nE,Gd];case"Object":return[rE,Gd];case"Date":return[PC,Gd];case"RegExp":return[LC,Gd];case"Map":return[NC,Gd];case"Set":return[OC,Gd]}return n.includes("Array")?[nE,n]:n.includes("Error")?[WG,n]:[rE,n]},Rx=([t,e])=>t===M_&&(e==="function"||e==="symbol"),eTe=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=H0(o);switch(a){case M_:{let u=o;switch(l){case"bigint":a=jG,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([VG],o)}return i([a,u],o)}case nE:{if(l)return i([l,[...o]],o);const u=[],f=i([a,u],o);for(const h of o)u.push(s(h));return f}case rE:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],f=i([a,u],o);for(const h of Z2e(o))(t||!Rx(H0(o[h])))&&u.push([s(h),s(o[h])]);return f}case PC:return i([a,o.toISOString()],o);case LC:{const{source:u,flags:f}=o;return i([a,{source:u,flags:f}],o)}case NC:{const u=[],f=i([a,u],o);for(const[h,d]of o)(t||!(Rx(H0(h))||Rx(H0(d))))&&u.push([s(h),s(d)]);return f}case OC:{const u=[],f=i([a,u],o);for(const h of o)(t||!Rx(H0(h)))&&u.push(s(h));return f}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},dN=(t,{json:e,lossy:n}={})=>{const r=[];return eTe(!(e||n),!!e,new Map,r)(t),r},pN=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?hN(dN(t,e)):structuredClone(t):(t,e)=>hN(dN(t,e));let Vg=class{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}};Vg.prototype.property={};Vg.prototype.normal={};Vg.prototype.space=null;function $G(t,e){const n={},r={};let i=-1;for(;++i<t.length;)Object.assign(n,t[i].property),Object.assign(r,t[i].normal);return new Vg(n,r,e)}function cg(t){return t.toLowerCase()}let Va=class{constructor(e,n){this.property=e,this.attribute=n}};Va.prototype.space=null;Va.prototype.boolean=!1;Va.prototype.booleanish=!1;Va.prototype.overloadedBoolean=!1;Va.prototype.number=!1;Va.prototype.commaSeparated=!1;Va.prototype.spaceSeparated=!1;Va.prototype.commaOrSpaceSeparated=!1;Va.prototype.mustUseProperty=!1;Va.prototype.defined=!1;let tTe=0;const Gn=Rh(),ji=Rh(),XG=Rh(),Ut=Rh(),Hr=Rh(),wp=Rh(),Yo=Rh();function Rh(){return 2**++tTe}const a4=Object.freeze(Object.defineProperty({__proto__:null,boolean:Gn,booleanish:ji,commaOrSpaceSeparated:Yo,commaSeparated:wp,number:Ut,overloadedBoolean:XG,spaceSeparated:Hr},Symbol.toStringTag,{value:"Module"})),TT=Object.keys(a4);let DC=class extends Va{constructor(e,n,r,i){let s=-1;if(super(e,n),mN(this,"space",i),typeof r=="number")for(;++s<TT.length;){const o=TT[s];mN(this,TT[s],(r&a4[o])===a4[o])}}};DC.prototype.defined=!0;function mN(t,e,n){n&&(t[e]=n)}const nTe={}.hasOwnProperty;function hm(t){const e={},n={};let r;for(r in t.properties)if(nTe.call(t.properties,r)){const i=t.properties[r],s=new DC(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[cg(r)]=r,n[cg(s.attribute)]=r}return new Vg(e,n,t.space)}const YG=hm({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),qG=hm({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function KG(t,e){return e in t?t[e]:e}function JG(t,e){return KG(t,e.toLowerCase())}const QG=hm({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:JG,properties:{xmlns:null,xmlnsXLink:null}}),ZG=hm({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ji,ariaAutoComplete:null,ariaBusy:ji,ariaChecked:ji,ariaColCount:Ut,ariaColIndex:Ut,ariaColSpan:Ut,ariaControls:Hr,ariaCurrent:null,ariaDescribedBy:Hr,ariaDetails:null,ariaDisabled:ji,ariaDropEffect:Hr,ariaErrorMessage:null,ariaExpanded:ji,ariaFlowTo:Hr,ariaGrabbed:ji,ariaHasPopup:null,ariaHidden:ji,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Hr,ariaLevel:Ut,ariaLive:null,ariaModal:ji,ariaMultiLine:ji,ariaMultiSelectable:ji,ariaOrientation:null,ariaOwns:Hr,ariaPlaceholder:null,ariaPosInSet:Ut,ariaPressed:ji,ariaReadOnly:ji,ariaRelevant:null,ariaRequired:ji,ariaRoleDescription:Hr,ariaRowCount:Ut,ariaRowIndex:Ut,ariaRowSpan:Ut,ariaSelected:ji,ariaSetSize:Ut,ariaSort:null,ariaValueMax:Ut,ariaValueMin:Ut,ariaValueNow:Ut,ariaValueText:null,role:null}}),rTe=hm({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:JG,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:wp,acceptCharset:Hr,accessKey:Hr,action:null,allow:null,allowFullScreen:Gn,allowPaymentRequest:Gn,allowUserMedia:Gn,alt:null,as:null,async:Gn,autoCapitalize:null,autoComplete:Hr,autoFocus:Gn,autoPlay:Gn,blocking:Hr,capture:Gn,charSet:null,checked:Gn,cite:null,className:Hr,cols:Ut,colSpan:null,content:null,contentEditable:ji,controls:Gn,controlsList:Hr,coords:Ut|wp,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Gn,defer:Gn,dir:null,dirName:null,disabled:Gn,download:XG,draggable:ji,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Gn,formTarget:null,headers:Hr,height:Ut,hidden:Gn,high:Ut,href:null,hrefLang:null,htmlFor:Hr,httpEquiv:Hr,id:null,imageSizes:null,imageSrcSet:null,inert:Gn,inputMode:null,integrity:null,is:null,isMap:Gn,itemId:null,itemProp:Hr,itemRef:Hr,itemScope:Gn,itemType:Hr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Gn,low:Ut,manifest:null,max:null,maxLength:Ut,media:null,method:null,min:null,minLength:Ut,multiple:Gn,muted:Gn,name:null,nonce:null,noModule:Gn,noValidate:Gn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Gn,optimum:Ut,pattern:null,ping:Hr,placeholder:null,playsInline:Gn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Gn,referrerPolicy:null,rel:Hr,required:Gn,reversed:Gn,rows:Ut,rowSpan:Ut,sandbox:Hr,scope:null,scoped:Gn,seamless:Gn,selected:Gn,shadowRootDelegatesFocus:Gn,shadowRootMode:null,shape:null,size:Ut,sizes:null,slot:null,span:Ut,spellCheck:ji,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ut,step:null,style:null,tabIndex:Ut,target:null,title:null,translate:null,type:null,typeMustMatch:Gn,useMap:null,value:ji,width:Ut,wrap:null,align:null,aLink:null,archive:Hr,axis:null,background:null,bgColor:null,border:Ut,borderColor:null,bottomMargin:Ut,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Gn,declare:Gn,event:null,face:null,frame:null,frameBorder:null,hSpace:Ut,leftMargin:Ut,link:null,longDesc:null,lowSrc:null,marginHeight:Ut,marginWidth:Ut,noResize:Gn,noHref:Gn,noShade:Gn,noWrap:Gn,object:null,profile:null,prompt:null,rev:null,rightMargin:Ut,rules:null,scheme:null,scrolling:ji,standby:null,summary:null,text:null,topMargin:Ut,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ut,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Gn,disableRemotePlayback:Gn,prefix:null,property:null,results:Ut,security:null,unselectable:null}}),iTe=hm({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:KG,properties:{about:Yo,accentHeight:Ut,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ut,amplitude:Ut,arabicForm:null,ascent:Ut,attributeName:null,attributeType:null,azimuth:Ut,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ut,by:null,calcMode:null,capHeight:Ut,className:Hr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ut,diffuseConstant:Ut,direction:null,display:null,dur:null,divisor:Ut,dominantBaseline:null,download:Gn,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ut,enableBackground:null,end:null,event:null,exponent:Ut,externalResourcesRequired:null,fill:null,fillOpacity:Ut,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:wp,g2:wp,glyphName:wp,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ut,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ut,horizOriginX:Ut,horizOriginY:Ut,id:null,ideographic:Ut,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ut,k:Ut,k1:Ut,k2:Ut,k3:Ut,k4:Ut,kernelMatrix:Yo,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ut,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ut,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ut,overlineThickness:Ut,paintOrder:null,panose1:null,path:null,pathLength:Ut,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Hr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ut,pointsAtY:Ut,pointsAtZ:Ut,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Yo,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Yo,rev:Yo,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Yo,requiredFeatures:Yo,requiredFonts:Yo,requiredFormats:Yo,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ut,specularExponent:Ut,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ut,strikethroughThickness:Ut,string:null,stroke:null,strokeDashArray:Yo,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ut,strokeOpacity:Ut,strokeWidth:null,style:null,surfaceScale:Ut,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Yo,tabIndex:Ut,tableValues:null,target:null,targetX:Ut,targetY:Ut,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Yo,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ut,underlineThickness:Ut,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ut,values:null,vAlphabetic:Ut,vMathematical:Ut,vectorEffect:null,vHanging:Ut,vIdeographic:Ut,version:null,vertAdvY:Ut,vertOriginX:Ut,vertOriginY:Ut,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ut,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),sTe=/^data[-\w.:]+$/i,gN=/-[a-z]/g,oTe=/[A-Z]/g;function BC(t,e){const n=cg(e);let r=e,i=Va;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&sTe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(gN,lTe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!gN.test(s)){let o=s.replace(oTe,aTe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=DC}return new i(r,e)}function aTe(t){return"-"+t.toLowerCase()}function lTe(t){return t.charAt(1).toUpperCase()}const R_=$G([qG,YG,QG,ZG,rTe],"html"),Wg=$G([qG,YG,QG,ZG,iTe],"svg");function vN(t){const e=[],n=String(t||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&e.push(o),i=r+1,r=n.indexOf(",",i)}return e}function cTe(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const yN=/[#.]/g;function uTe(t,e){const n=t||"",r={};let i=0,s,o;for(;i<n.length;){yN.lastIndex=i;const a=yN.exec(n),l=n.slice(i,a?a.index:n.length);l&&(s?s==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,i+=l.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||e||"div",properties:r,children:[]}}function xN(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function fTe(t){return t.join(" ").trim()}const hTe=new Set(["button","menu","reset","submit"]),l4={}.hasOwnProperty;function eV(t,e,n){const r=n&&gTe(n);function i(s,o,...a){let l=-1,c;if(s==null){c={type:"root",children:[]};const u=o;a.unshift(u)}else if(c=uTe(s,e),c.tagName=c.tagName.toLowerCase(),r&&l4.call(r,c.tagName)&&(c.tagName=r[c.tagName]),dTe(o,c.tagName)){let u;for(u in o)l4.call(o,u)&&pTe(t,c.properties,u,o[u])}else a.unshift(o);for(;++l<a.length;)c4(c.children,a[l]);return c.type==="element"&&c.tagName==="template"&&(c.content={type:"root",children:c.children},c.children=[]),c}return i}function dTe(t,e){return t==null||typeof t!="object"||Array.isArray(t)?!1:e==="input"||!t.type||typeof t.type!="string"?!0:"children"in t&&Array.isArray(t.children)?!1:e==="button"?hTe.has(t.type.toLowerCase()):!("value"in t)}function pTe(t,e,n,r){const i=BC(t,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=xN(r):i.commaSeparated?o=vN(r):i.commaOrSpaceSeparated?o=xN(vN(r).join(" ")):o=EN(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?mTe(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const l=EN(i,i.property,o[s]);a[s]=l}o=a}if(i.property==="className"&&Array.isArray(e.className)){const a=o;o=e.className.concat(a)}e[i.property]=o}}function c4(t,e){let n=-1;if(e!=null)if(typeof e=="string"||typeof e=="number")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(;++n<e.length;)c4(t,e[n]);else if(typeof e=="object"&&"type"in e)e.type==="root"?c4(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function EN(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||cg(n)===cg(e)))return!0}return n}function mTe(t){const e=[];let n;for(n in t)l4.call(t,n)&&e.push([n,t[n]].join(": "));return e.join("; ")}function gTe(t){const e={};let n=-1;for(;++n<t.length;)e[t[n].toLowerCase()]=t[n];return e}const vTe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],yTe=eV(R_,"div"),xTe=eV(Wg,"g",vTe),wT=/\r?\n|\r/g;function ETe(t){const e=String(t),n=[];for(wT.lastIndex=0;wT.test(e);)n.push(wT.lastIndex);return n.push(e.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const l=(n[o-2]||0)+a-1||0;if(l>-1&&l<n[n.length-1])return l}}}const Yf={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tV={}.hasOwnProperty,_Te=Object.prototype;function bTe(t,e){const n=e||{};return kC({file:n.file||void 0,location:!1,schema:n.space==="svg"?Wg:R_,verbose:n.verbose||!1},t)}function kC(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},c3(t,r,n),n}case"#document":case"#document-fragment":{const r=e,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:nV(t,e.childNodes),data:{quirksMode:i}},t.file&&t.location){const s=String(t.file),o=ETe(s),a=o.toPoint(0),l=o.toPoint(s.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=e;return n={type:"doctype"},c3(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},c3(t,r,n),n}default:return n=ATe(t,e),n}}function nV(t,e){let n=-1;const r=[];for(;++n<e.length;){const i=kC(t,e[n]);r.push(i)}return r}function ATe(t,e){const n=t.schema;t.schema=e.namespaceURI===Yf.svg?Wg:R_;let r=-1;const i={};for(;++r<e.attrs.length;){const a=e.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;tV.call(_Te,l)||(i[l]=a.value)}const o=(t.schema.space==="svg"?xTe:yTe)(e.tagName,i,nV(t,e.childNodes));if(c3(t,e,o),o.tagName==="template"){const a=e,l=a.sourceCodeLocation,c=l&&l.startTag&&gp(l.startTag),u=l&&l.endTag&&gp(l.endTag),f=kC(t,a.content);c&&u&&t.file&&(f.position={start:c.end,end:u.start}),o.content=f}return t.schema=n,o}function c3(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=TTe(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function TTe(t,e,n){const r=gp(n);if(e.type==="element"){const i=e.children[e.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),t.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)tV.call(n.attrs,o)&&(s[BC(t.schema,o).property]=gp(n.attrs[o]));n.startTag;const a=gp(n.startTag),l=n.endTag?gp(n.endTag):void 0,c={opening:a};l&&(c.closing=l),c.properties=s,e.data={position:c}}}return r}function gp(t){const e=_N({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=_N({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function _N(t){return t.line&&t.column?t:void 0}const bN={}.hasOwnProperty;function rV(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&bN.call(i,t)){const l=String(i[t]);o=bN.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const wTe={},STe={}.hasOwnProperty,iV=rV("type",{handlers:{root:MTe,element:NTe,text:PTe,comment:LTe,doctype:ITe}});function CTe(t,e){const r=(e||wTe).space;return iV(t,r==="svg"?Wg:R_)}function MTe(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=FC(t.children,n,e),dm(t,n),n}function RTe(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=FC(t.children,n,e),dm(t,n),n}function ITe(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return dm(t,e),e}function PTe(t){const e={nodeName:"#text",value:t.value,parentNode:null};return dm(t,e),e}function LTe(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return dm(t,e),e}function NTe(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Wg);const i=[];let s;if(t.properties){for(s in t.properties)if(s!=="children"&&STe.call(t.properties,s)){const l=OTe(r,s,t.properties[s]);l&&i.push(l)}}const o=r.space,a={nodeName:t.tagName,tagName:t.tagName,attrs:i,namespaceURI:Yf[o],childNodes:[],parentNode:null};return a.childNodes=FC(t.children,a,r),dm(t,a),t.tagName==="template"&&t.content&&(a.content=RTe(t.content,r)),a}function OTe(t,e,n){const r=BC(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?cTe(n):fTe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Yf[r.space]}return i}function FC(t,e,n){let r=-1;const i=[];if(t)for(;++r<t.length;){const s=iV(t[r],n);s.parentNode=e,i.push(s)}return i}function dm(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const DTe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],BTe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Zr="�";var _e;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.NUMBER_SIGN=35]="NUMBER_SIGN",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",t[t.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_F=102]="LATIN_SMALL_F",t[t.LATIN_SMALL_X=120]="LATIN_SMALL_X",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",t[t.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(_e=_e||(_e={}));const To={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function sV(t){return t>=55296&&t<=57343}function kTe(t){return t>=56320&&t<=57343}function FTe(t,e){return(t-55296)*1024+9216+e}function oV(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function aV(t){return t>=64976&&t<=65007||BTe.has(t)}var _t;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(_t=_t||(_t={}));const UTe=65536;class zTe{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=UTe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e){const{line:n,col:r,offset:i}=this;return{code:e,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(kTe(n))return this.pos++,this._addGap(),FTe(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,_e.EOF;return this._err(_t.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,_e.EOF;const r=this.html.charCodeAt(n);return r===_e.CARRIAGE_RETURN?_e.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,_e.EOF;let e=this.html.charCodeAt(this.pos);return e===_e.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,_e.LINE_FEED):e===_e.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,sV(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===_e.LINE_FEED||e===_e.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){oV(e)?this._err(_t.controlCharacterInInputStream):aV(e)&&this._err(_t.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Kn;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(Kn=Kn||(Kn={}));function lV(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const yu=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(t=>t.charCodeAt(0))),HTe=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(t=>t.charCodeAt(0)));var ST;const GTe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),VTe=(ST=String.fromCodePoint)!==null&&ST!==void 0?ST:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function WTe(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=GTe.get(t))!==null&&e!==void 0?e:t}var gs;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(gs||(gs={}));const jTe=32;var Hl;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Hl||(Hl={}));function u4(t){return t>=gs.ZERO&&t<=gs.NINE}function $Te(t){return t>=gs.UPPER_A&&t<=gs.UPPER_F||t>=gs.LOWER_A&&t<=gs.LOWER_F}function XTe(t){return t>=gs.UPPER_A&&t<=gs.UPPER_Z||t>=gs.LOWER_A&&t<=gs.LOWER_Z||u4(t)}function YTe(t){return t===gs.EQUALS||XTe(t)}var hs;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(hs||(hs={}));var kf;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(kf||(kf={}));class qTe{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=hs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=kf.Strict}startEntity(e){this.decodeMode=e,this.state=hs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case hs.EntityStart:return e.charCodeAt(n)===gs.NUM?(this.state=hs.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=hs.NamedEntity,this.stateNamedEntity(e,n));case hs.NumericStart:return this.stateNumericStart(e,n);case hs.NumericDecimal:return this.stateNumericDecimal(e,n);case hs.NumericHex:return this.stateNumericHex(e,n);case hs.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|jTe)===gs.LOWER_X?(this.state=hs.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=hs.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(e.substr(n,s),i),this.consumed+=s}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(u4(i)||$Te(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(u4(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===gs.SEMI)this.consumed+=1;else if(this.decodeMode===kf.Strict)return 0;return this.emitCodePoint(WTe(this.result),this.consumed),this.errors&&(e!==gs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Hl.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=uV(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===kf.Attribute&&(s===0||YTe(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Hl.VALUE_LENGTH)>>14,s!==0){if(o===gs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==kf.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&Hl.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~Hl.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case hs.NamedEntity:return this.result!==0&&(this.decodeMode!==kf.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case hs.NumericDecimal:return this.emitNumericEntity(0,2);case hs.NumericHex:return this.emitNumericEntity(0,3);case hs.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case hs.EntityStart:return 0}}}function cV(t){let e="";const n=new qTe(t,r=>e+=VTe(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(o,a),n.startEntity(s);const c=n.write(i,a+1);if(c<0){o=a+n.end();break}o=a+c,a=c===0?o+1:o}const l=e+i.slice(o);return e="",l}}function uV(t,e,n,r){const i=(e&Hl.BRANCH_LENGTH)>>7,s=e&Hl.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:t[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,c=t[l];if(c<r)o=l+1;else if(c>r)a=l-1;else return t[l+i]}return-1}cV(yu);cV(HTe);var Rt;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(Rt=Rt||(Rt={}));var Ou;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(Ou=Ou||(Ou={}));var Qo;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Qo=Qo||(Qo={}));var at;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(at=at||(at={}));var H;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SECTION=94]="SECTION",t[t.SELECT=95]="SELECT",t[t.SOURCE=96]="SOURCE",t[t.SMALL=97]="SMALL",t[t.SPAN=98]="SPAN",t[t.STRIKE=99]="STRIKE",t[t.STRONG=100]="STRONG",t[t.STYLE=101]="STYLE",t[t.SUB=102]="SUB",t[t.SUMMARY=103]="SUMMARY",t[t.SUP=104]="SUP",t[t.TABLE=105]="TABLE",t[t.TBODY=106]="TBODY",t[t.TEMPLATE=107]="TEMPLATE",t[t.TEXTAREA=108]="TEXTAREA",t[t.TFOOT=109]="TFOOT",t[t.TD=110]="TD",t[t.TH=111]="TH",t[t.THEAD=112]="THEAD",t[t.TITLE=113]="TITLE",t[t.TR=114]="TR",t[t.TRACK=115]="TRACK",t[t.TT=116]="TT",t[t.U=117]="U",t[t.UL=118]="UL",t[t.SVG=119]="SVG",t[t.VAR=120]="VAR",t[t.WBR=121]="WBR",t[t.XMP=122]="XMP"})(H=H||(H={}));const KTe=new Map([[at.A,H.A],[at.ADDRESS,H.ADDRESS],[at.ANNOTATION_XML,H.ANNOTATION_XML],[at.APPLET,H.APPLET],[at.AREA,H.AREA],[at.ARTICLE,H.ARTICLE],[at.ASIDE,H.ASIDE],[at.B,H.B],[at.BASE,H.BASE],[at.BASEFONT,H.BASEFONT],[at.BGSOUND,H.BGSOUND],[at.BIG,H.BIG],[at.BLOCKQUOTE,H.BLOCKQUOTE],[at.BODY,H.BODY],[at.BR,H.BR],[at.BUTTON,H.BUTTON],[at.CAPTION,H.CAPTION],[at.CENTER,H.CENTER],[at.CODE,H.CODE],[at.COL,H.COL],[at.COLGROUP,H.COLGROUP],[at.DD,H.DD],[at.DESC,H.DESC],[at.DETAILS,H.DETAILS],[at.DIALOG,H.DIALOG],[at.DIR,H.DIR],[at.DIV,H.DIV],[at.DL,H.DL],[at.DT,H.DT],[at.EM,H.EM],[at.EMBED,H.EMBED],[at.FIELDSET,H.FIELDSET],[at.FIGCAPTION,H.FIGCAPTION],[at.FIGURE,H.FIGURE],[at.FONT,H.FONT],[at.FOOTER,H.FOOTER],[at.FOREIGN_OBJECT,H.FOREIGN_OBJECT],[at.FORM,H.FORM],[at.FRAME,H.FRAME],[at.FRAMESET,H.FRAMESET],[at.H1,H.H1],[at.H2,H.H2],[at.H3,H.H3],[at.H4,H.H4],[at.H5,H.H5],[at.H6,H.H6],[at.HEAD,H.HEAD],[at.HEADER,H.HEADER],[at.HGROUP,H.HGROUP],[at.HR,H.HR],[at.HTML,H.HTML],[at.I,H.I],[at.IMG,H.IMG],[at.IMAGE,H.IMAGE],[at.INPUT,H.INPUT],[at.IFRAME,H.IFRAME],[at.KEYGEN,H.KEYGEN],[at.LABEL,H.LABEL],[at.LI,H.LI],[at.LINK,H.LINK],[at.LISTING,H.LISTING],[at.MAIN,H.MAIN],[at.MALIGNMARK,H.MALIGNMARK],[at.MARQUEE,H.MARQUEE],[at.MATH,H.MATH],[at.MENU,H.MENU],[at.META,H.META],[at.MGLYPH,H.MGLYPH],[at.MI,H.MI],[at.MO,H.MO],[at.MN,H.MN],[at.MS,H.MS],[at.MTEXT,H.MTEXT],[at.NAV,H.NAV],[at.NOBR,H.NOBR],[at.NOFRAMES,H.NOFRAMES],[at.NOEMBED,H.NOEMBED],[at.NOSCRIPT,H.NOSCRIPT],[at.OBJECT,H.OBJECT],[at.OL,H.OL],[at.OPTGROUP,H.OPTGROUP],[at.OPTION,H.OPTION],[at.P,H.P],[at.PARAM,H.PARAM],[at.PLAINTEXT,H.PLAINTEXT],[at.PRE,H.PRE],[at.RB,H.RB],[at.RP,H.RP],[at.RT,H.RT],[at.RTC,H.RTC],[at.RUBY,H.RUBY],[at.S,H.S],[at.SCRIPT,H.SCRIPT],[at.SECTION,H.SECTION],[at.SELECT,H.SELECT],[at.SOURCE,H.SOURCE],[at.SMALL,H.SMALL],[at.SPAN,H.SPAN],[at.STRIKE,H.STRIKE],[at.STRONG,H.STRONG],[at.STYLE,H.STYLE],[at.SUB,H.SUB],[at.SUMMARY,H.SUMMARY],[at.SUP,H.SUP],[at.TABLE,H.TABLE],[at.TBODY,H.TBODY],[at.TEMPLATE,H.TEMPLATE],[at.TEXTAREA,H.TEXTAREA],[at.TFOOT,H.TFOOT],[at.TD,H.TD],[at.TH,H.TH],[at.THEAD,H.THEAD],[at.TITLE,H.TITLE],[at.TR,H.TR],[at.TRACK,H.TRACK],[at.TT,H.TT],[at.U,H.U],[at.UL,H.UL],[at.SVG,H.SVG],[at.VAR,H.VAR],[at.WBR,H.WBR],[at.XMP,H.XMP]]);function pm(t){var e;return(e=KTe.get(t))!==null&&e!==void 0?e:H.UNKNOWN}const Bt=H,JTe={[Rt.HTML]:new Set([Bt.ADDRESS,Bt.APPLET,Bt.AREA,Bt.ARTICLE,Bt.ASIDE,Bt.BASE,Bt.BASEFONT,Bt.BGSOUND,Bt.BLOCKQUOTE,Bt.BODY,Bt.BR,Bt.BUTTON,Bt.CAPTION,Bt.CENTER,Bt.COL,Bt.COLGROUP,Bt.DD,Bt.DETAILS,Bt.DIR,Bt.DIV,Bt.DL,Bt.DT,Bt.EMBED,Bt.FIELDSET,Bt.FIGCAPTION,Bt.FIGURE,Bt.FOOTER,Bt.FORM,Bt.FRAME,Bt.FRAMESET,Bt.H1,Bt.H2,Bt.H3,Bt.H4,Bt.H5,Bt.H6,Bt.HEAD,Bt.HEADER,Bt.HGROUP,Bt.HR,Bt.HTML,Bt.IFRAME,Bt.IMG,Bt.INPUT,Bt.LI,Bt.LINK,Bt.LISTING,Bt.MAIN,Bt.MARQUEE,Bt.MENU,Bt.META,Bt.NAV,Bt.NOEMBED,Bt.NOFRAMES,Bt.NOSCRIPT,Bt.OBJECT,Bt.OL,Bt.P,Bt.PARAM,Bt.PLAINTEXT,Bt.PRE,Bt.SCRIPT,Bt.SECTION,Bt.SELECT,Bt.SOURCE,Bt.STYLE,Bt.SUMMARY,Bt.TABLE,Bt.TBODY,Bt.TD,Bt.TEMPLATE,Bt.TEXTAREA,Bt.TFOOT,Bt.TH,Bt.THEAD,Bt.TITLE,Bt.TR,Bt.TRACK,Bt.UL,Bt.WBR,Bt.XMP]),[Rt.MATHML]:new Set([Bt.MI,Bt.MO,Bt.MN,Bt.MS,Bt.MTEXT,Bt.ANNOTATION_XML]),[Rt.SVG]:new Set([Bt.TITLE,Bt.FOREIGN_OBJECT,Bt.DESC]),[Rt.XLINK]:new Set,[Rt.XML]:new Set,[Rt.XMLNS]:new Set};function fV(t){return t===Bt.H1||t===Bt.H2||t===Bt.H3||t===Bt.H4||t===Bt.H5||t===Bt.H6}at.STYLE,at.SCRIPT,at.XMP,at.IFRAME,at.NOEMBED,at.NOFRAMES,at.PLAINTEXT;const QTe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Ie;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",t[t.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",t[t.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",t[t.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",t[t.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",t[t.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Ie||(Ie={}));const Di={DATA:Ie.DATA,RCDATA:Ie.RCDATA,RAWTEXT:Ie.RAWTEXT,SCRIPT_DATA:Ie.SCRIPT_DATA,PLAINTEXT:Ie.PLAINTEXT,CDATA_SECTION:Ie.CDATA_SECTION};function w1(t){return t>=_e.DIGIT_0&&t<=_e.DIGIT_9}function i1(t){return t>=_e.LATIN_CAPITAL_A&&t<=_e.LATIN_CAPITAL_Z}function ZTe(t){return t>=_e.LATIN_SMALL_A&&t<=_e.LATIN_SMALL_Z}function xu(t){return ZTe(t)||i1(t)}function f4(t){return xu(t)||w1(t)}function hV(t){return t>=_e.LATIN_CAPITAL_A&&t<=_e.LATIN_CAPITAL_F}function dV(t){return t>=_e.LATIN_SMALL_A&&t<=_e.LATIN_SMALL_F}function ewe(t){return w1(t)||hV(t)||dV(t)}function Ix(t){return t+32}function pV(t){return t===_e.SPACE||t===_e.LINE_FEED||t===_e.TABULATION||t===_e.FORM_FEED}function twe(t){return t===_e.EQUALS_SIGN||f4(t)}function AN(t){return pV(t)||t===_e.SOLIDUS||t===_e.GREATER_THAN_SIGN}class nwe{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Ie.DATA,this.returnState=Ie.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new zTe(n),this.currentLocation=this.getCurrentLocation(-1)}_err(e){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(e))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e==null||e())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(e){this.consumedAfterSnapshot-=e,this.preprocessor.retreat(e)}_reconsumeInState(e,n){this.state=e,this._callState(n)}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Kn.START_TAG,tagName:"",tagID:H.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Kn.END_TAG,tagName:"",tagID:H.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:Kn.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:Kn.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(lV(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(_t.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=pm(e.tagName),e.type===Kn.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(_t.endTagWithAttributes),e.selfClosing&&this._err(_t.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case Kn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Kn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Kn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:Kn.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==e)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(e,n)}_emitCodePoint(e){const n=pV(e)?Kn.WHITESPACE_CHARACTER:e===_e.NULL?Kn.NULL_CHARACTER:Kn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(Kn.CHARACTER,e)}_matchNamedCharacterReference(e){let n=null,r=0,i=!1;for(let s=0,o=yu[0];s>=0&&(s=uV(yu,o,s+1,e),!(s<0));e=this._consume()){r+=1,o=yu[s];const a=o&Hl.VALUE_LENGTH;if(a){const l=(a>>14)-1;if(e!==_e.SEMICOLON&&this._isCharacterReferenceInAttribute()&&twe(this.preprocessor.peek(1))?(n=[_e.AMPERSAND],s+=l):(n=l===0?[yu[s]&~Hl.VALUE_LENGTH]:l===1?[yu[++s]]:[yu[++s],yu[++s]],r=0,i=e!==_e.SEMICOLON),l===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(_t.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===Ie.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Ie.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Ie.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case Ie.DATA:{this._stateData(e);break}case Ie.RCDATA:{this._stateRcdata(e);break}case Ie.RAWTEXT:{this._stateRawtext(e);break}case Ie.SCRIPT_DATA:{this._stateScriptData(e);break}case Ie.PLAINTEXT:{this._statePlaintext(e);break}case Ie.TAG_OPEN:{this._stateTagOpen(e);break}case Ie.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case Ie.TAG_NAME:{this._stateTagName(e);break}case Ie.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case Ie.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case Ie.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case Ie.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case Ie.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case Ie.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case Ie.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case Ie.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case Ie.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case Ie.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case Ie.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case Ie.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case Ie.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case Ie.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case Ie.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case Ie.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case Ie.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case Ie.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case Ie.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case Ie.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case Ie.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case Ie.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case Ie.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case Ie.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case Ie.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case Ie.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case Ie.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case Ie.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case Ie.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case Ie.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case Ie.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case Ie.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case Ie.BOGUS_COMMENT:{this._stateBogusComment(e);break}case Ie.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case Ie.COMMENT_START:{this._stateCommentStart(e);break}case Ie.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case Ie.COMMENT:{this._stateComment(e);break}case Ie.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case Ie.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case Ie.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case Ie.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case Ie.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case Ie.COMMENT_END:{this._stateCommentEnd(e);break}case Ie.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case Ie.DOCTYPE:{this._stateDoctype(e);break}case Ie.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case Ie.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case Ie.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case Ie.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case Ie.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case Ie.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case Ie.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case Ie.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case Ie.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case Ie.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case Ie.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case Ie.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case Ie.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case Ie.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case Ie.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case Ie.CDATA_SECTION:{this._stateCdataSection(e);break}case Ie.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case Ie.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case Ie.CHARACTER_REFERENCE:{this._stateCharacterReference(e);break}case Ie.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(e);break}case Ie.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}case Ie.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(e);break}case Ie.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(e);break}case Ie.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(e);break}case Ie.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(e);break}case Ie.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case _e.LESS_THAN_SIGN:{this.state=Ie.TAG_OPEN;break}case _e.AMPERSAND:{this.returnState=Ie.DATA,this.state=Ie.CHARACTER_REFERENCE;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this._emitCodePoint(e);break}case _e.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case _e.AMPERSAND:{this.returnState=Ie.RCDATA,this.state=Ie.CHARACTER_REFERENCE;break}case _e.LESS_THAN_SIGN:{this.state=Ie.RCDATA_LESS_THAN_SIGN;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this._emitChars(Zr);break}case _e.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case _e.LESS_THAN_SIGN:{this.state=Ie.RAWTEXT_LESS_THAN_SIGN;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this._emitChars(Zr);break}case _e.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case _e.LESS_THAN_SIGN:{this.state=Ie.SCRIPT_DATA_LESS_THAN_SIGN;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this._emitChars(Zr);break}case _e.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case _e.NULL:{this._err(_t.unexpectedNullCharacter),this._emitChars(Zr);break}case _e.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(xu(e))this._createStartTagToken(),this.state=Ie.TAG_NAME,this._stateTagName(e);else switch(e){case _e.EXCLAMATION_MARK:{this.state=Ie.MARKUP_DECLARATION_OPEN;break}case _e.SOLIDUS:{this.state=Ie.END_TAG_OPEN;break}case _e.QUESTION_MARK:{this._err(_t.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Ie.BOGUS_COMMENT,this._stateBogusComment(e);break}case _e.EOF:{this._err(_t.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(_t.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Ie.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(xu(e))this._createEndTagToken(),this.state=Ie.TAG_NAME,this._stateTagName(e);else switch(e){case _e.GREATER_THAN_SIGN:{this._err(_t.missingEndTagName),this.state=Ie.DATA;break}case _e.EOF:{this._err(_t.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(_t.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Ie.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:{this.state=Ie.BEFORE_ATTRIBUTE_NAME;break}case _e.SOLIDUS:{this.state=Ie.SELF_CLOSING_START_TAG;break}case _e.GREATER_THAN_SIGN:{this.state=Ie.DATA,this.emitCurrentTagToken();break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),n.tagName+=Zr;break}case _e.EOF:{this._err(_t.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(i1(e)?Ix(e):e)}}_stateRcdataLessThanSign(e){e===_e.SOLIDUS?this.state=Ie.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Ie.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){xu(e)?(this.state=Ie.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=Ie.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Ie.BEFORE_ATTRIBUTE_NAME,!1;case _e.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Ie.SELF_CLOSING_START_TAG,!1;case _e.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Ie.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Ie.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===_e.SOLIDUS?this.state=Ie.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Ie.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){xu(e)?(this.state=Ie.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=Ie.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Ie.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case _e.SOLIDUS:{this.state=Ie.SCRIPT_DATA_END_TAG_OPEN;break}case _e.EXCLAMATION_MARK:{this.state=Ie.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Ie.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){xu(e)?(this.state=Ie.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=Ie.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Ie.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===_e.HYPHEN_MINUS?(this.state=Ie.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Ie.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===_e.HYPHEN_MINUS?(this.state=Ie.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Ie.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case _e.HYPHEN_MINUS:{this.state=Ie.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case _e.LESS_THAN_SIGN:{this.state=Ie.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this._emitChars(Zr);break}case _e.EOF:{this._err(_t.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case _e.HYPHEN_MINUS:{this.state=Ie.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case _e.LESS_THAN_SIGN:{this.state=Ie.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this.state=Ie.SCRIPT_DATA_ESCAPED,this._emitChars(Zr);break}case _e.EOF:{this._err(_t.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Ie.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case _e.HYPHEN_MINUS:{this._emitChars("-");break}case _e.LESS_THAN_SIGN:{this.state=Ie.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case _e.GREATER_THAN_SIGN:{this.state=Ie.SCRIPT_DATA,this._emitChars(">");break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this.state=Ie.SCRIPT_DATA_ESCAPED,this._emitChars(Zr);break}case _e.EOF:{this._err(_t.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Ie.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===_e.SOLIDUS?this.state=Ie.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:xu(e)?(this._emitChars("<"),this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=Ie.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){xu(e)?(this.state=Ie.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=Ie.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Ie.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(To.SCRIPT,!1)&&AN(this.preprocessor.peek(To.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<To.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Ie.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case _e.HYPHEN_MINUS:{this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case _e.LESS_THAN_SIGN:{this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this._emitChars(Zr);break}case _e.EOF:{this._err(_t.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case _e.HYPHEN_MINUS:{this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case _e.LESS_THAN_SIGN:{this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Zr);break}case _e.EOF:{this._err(_t.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case _e.HYPHEN_MINUS:{this._emitChars("-");break}case _e.LESS_THAN_SIGN:{this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case _e.GREATER_THAN_SIGN:{this.state=Ie.SCRIPT_DATA,this._emitChars(">");break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Zr);break}case _e.EOF:{this._err(_t.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===_e.SOLIDUS?(this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(To.SCRIPT,!1)&&AN(this.preprocessor.peek(To.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<To.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Ie.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Ie.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:break;case _e.SOLIDUS:case _e.GREATER_THAN_SIGN:case _e.EOF:{this.state=Ie.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case _e.EQUALS_SIGN:{this._err(_t.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Ie.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Ie.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:case _e.SOLIDUS:case _e.GREATER_THAN_SIGN:case _e.EOF:{this._leaveAttrName(),this.state=Ie.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case _e.EQUALS_SIGN:{this._leaveAttrName(),this.state=Ie.BEFORE_ATTRIBUTE_VALUE;break}case _e.QUOTATION_MARK:case _e.APOSTROPHE:case _e.LESS_THAN_SIGN:{this._err(_t.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this.currentAttr.name+=Zr;break}default:this.currentAttr.name+=String.fromCodePoint(i1(e)?Ix(e):e)}}_stateAfterAttributeName(e){switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:break;case _e.SOLIDUS:{this.state=Ie.SELF_CLOSING_START_TAG;break}case _e.EQUALS_SIGN:{this.state=Ie.BEFORE_ATTRIBUTE_VALUE;break}case _e.GREATER_THAN_SIGN:{this.state=Ie.DATA,this.emitCurrentTagToken();break}case _e.EOF:{this._err(_t.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Ie.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:break;case _e.QUOTATION_MARK:{this.state=Ie.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case _e.APOSTROPHE:{this.state=Ie.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case _e.GREATER_THAN_SIGN:{this._err(_t.missingAttributeValue),this.state=Ie.DATA,this.emitCurrentTagToken();break}default:this.state=Ie.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case _e.QUOTATION_MARK:{this.state=Ie.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case _e.AMPERSAND:{this.returnState=Ie.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Ie.CHARACTER_REFERENCE;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this.currentAttr.value+=Zr;break}case _e.EOF:{this._err(_t.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case _e.APOSTROPHE:{this.state=Ie.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case _e.AMPERSAND:{this.returnState=Ie.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Ie.CHARACTER_REFERENCE;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this.currentAttr.value+=Zr;break}case _e.EOF:{this._err(_t.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:{this._leaveAttrValue(),this.state=Ie.BEFORE_ATTRIBUTE_NAME;break}case _e.AMPERSAND:{this.returnState=Ie.ATTRIBUTE_VALUE_UNQUOTED,this.state=Ie.CHARACTER_REFERENCE;break}case _e.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Ie.DATA,this.emitCurrentTagToken();break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),this.currentAttr.value+=Zr;break}case _e.QUOTATION_MARK:case _e.APOSTROPHE:case _e.LESS_THAN_SIGN:case _e.EQUALS_SIGN:case _e.GRAVE_ACCENT:{this._err(_t.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case _e.EOF:{this._err(_t.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:{this._leaveAttrValue(),this.state=Ie.BEFORE_ATTRIBUTE_NAME;break}case _e.SOLIDUS:{this._leaveAttrValue(),this.state=Ie.SELF_CLOSING_START_TAG;break}case _e.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Ie.DATA,this.emitCurrentTagToken();break}case _e.EOF:{this._err(_t.eofInTag),this._emitEOFToken();break}default:this._err(_t.missingWhitespaceBetweenAttributes),this.state=Ie.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case _e.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Ie.DATA,this.emitCurrentTagToken();break}case _e.EOF:{this._err(_t.eofInTag),this._emitEOFToken();break}default:this._err(_t.unexpectedSolidusInTag),this.state=Ie.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case _e.GREATER_THAN_SIGN:{this.state=Ie.DATA,this.emitCurrentComment(n);break}case _e.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),n.data+=Zr;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(To.DASH_DASH,!0)?(this._createCommentToken(To.DASH_DASH.length+1),this.state=Ie.COMMENT_START):this._consumeSequenceIfMatch(To.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(To.DOCTYPE.length+1),this.state=Ie.DOCTYPE):this._consumeSequenceIfMatch(To.CDATA_START,!0)?this.inForeignNode?this.state=Ie.CDATA_SECTION:(this._err(_t.cdataInHtmlContent),this._createCommentToken(To.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Ie.BOGUS_COMMENT):this._ensureHibernation()||(this._err(_t.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Ie.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case _e.HYPHEN_MINUS:{this.state=Ie.COMMENT_START_DASH;break}case _e.GREATER_THAN_SIGN:{this._err(_t.abruptClosingOfEmptyComment),this.state=Ie.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Ie.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case _e.HYPHEN_MINUS:{this.state=Ie.COMMENT_END;break}case _e.GREATER_THAN_SIGN:{this._err(_t.abruptClosingOfEmptyComment),this.state=Ie.DATA,this.emitCurrentComment(n);break}case _e.EOF:{this._err(_t.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Ie.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case _e.HYPHEN_MINUS:{this.state=Ie.COMMENT_END_DASH;break}case _e.LESS_THAN_SIGN:{n.data+="<",this.state=Ie.COMMENT_LESS_THAN_SIGN;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),n.data+=Zr;break}case _e.EOF:{this._err(_t.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case _e.EXCLAMATION_MARK:{n.data+="!",this.state=Ie.COMMENT_LESS_THAN_SIGN_BANG;break}case _e.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Ie.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===_e.HYPHEN_MINUS?this.state=Ie.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Ie.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===_e.HYPHEN_MINUS?this.state=Ie.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Ie.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==_e.GREATER_THAN_SIGN&&e!==_e.EOF&&this._err(_t.nestedComment),this.state=Ie.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case _e.HYPHEN_MINUS:{this.state=Ie.COMMENT_END;break}case _e.EOF:{this._err(_t.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Ie.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case _e.GREATER_THAN_SIGN:{this.state=Ie.DATA,this.emitCurrentComment(n);break}case _e.EXCLAMATION_MARK:{this.state=Ie.COMMENT_END_BANG;break}case _e.HYPHEN_MINUS:{n.data+="-";break}case _e.EOF:{this._err(_t.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Ie.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case _e.HYPHEN_MINUS:{n.data+="--!",this.state=Ie.COMMENT_END_DASH;break}case _e.GREATER_THAN_SIGN:{this._err(_t.incorrectlyClosedComment),this.state=Ie.DATA,this.emitCurrentComment(n);break}case _e.EOF:{this._err(_t.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Ie.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:{this.state=Ie.BEFORE_DOCTYPE_NAME;break}case _e.GREATER_THAN_SIGN:{this.state=Ie.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case _e.EOF:{this._err(_t.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(_t.missingWhitespaceBeforeDoctypeName),this.state=Ie.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(i1(e))this._createDoctypeToken(String.fromCharCode(Ix(e))),this.state=Ie.DOCTYPE_NAME;else switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:break;case _e.NULL:{this._err(_t.unexpectedNullCharacter),this._createDoctypeToken(Zr),this.state=Ie.DOCTYPE_NAME;break}case _e.GREATER_THAN_SIGN:{this._err(_t.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Ie.DATA;break}case _e.EOF:{this._err(_t.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=Ie.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:{this.state=Ie.AFTER_DOCTYPE_NAME;break}case _e.GREATER_THAN_SIGN:{this.state=Ie.DATA,this.emitCurrentDoctype(n);break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),n.name+=Zr;break}case _e.EOF:{this._err(_t.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(i1(e)?Ix(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:break;case _e.GREATER_THAN_SIGN:{this.state=Ie.DATA,this.emitCurrentDoctype(n);break}case _e.EOF:{this._err(_t.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(To.PUBLIC,!1)?this.state=Ie.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(To.SYSTEM,!1)?this.state=Ie.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(_t.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Ie.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:{this.state=Ie.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case _e.QUOTATION_MARK:{this._err(_t.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Ie.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case _e.APOSTROPHE:{this._err(_t.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Ie.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case _e.GREATER_THAN_SIGN:{this._err(_t.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Ie.DATA,this.emitCurrentDoctype(n);break}case _e.EOF:{this._err(_t.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(_t.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Ie.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:break;case _e.QUOTATION_MARK:{n.publicId="",this.state=Ie.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case _e.APOSTROPHE:{n.publicId="",this.state=Ie.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case _e.GREATER_THAN_SIGN:{this._err(_t.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Ie.DATA,this.emitCurrentDoctype(n);break}case _e.EOF:{this._err(_t.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(_t.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Ie.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case _e.QUOTATION_MARK:{this.state=Ie.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),n.publicId+=Zr;break}case _e.GREATER_THAN_SIGN:{this._err(_t.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Ie.DATA;break}case _e.EOF:{this._err(_t.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case _e.APOSTROPHE:{this.state=Ie.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),n.publicId+=Zr;break}case _e.GREATER_THAN_SIGN:{this._err(_t.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Ie.DATA;break}case _e.EOF:{this._err(_t.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:{this.state=Ie.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case _e.GREATER_THAN_SIGN:{this.state=Ie.DATA,this.emitCurrentDoctype(n);break}case _e.QUOTATION_MARK:{this._err(_t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Ie.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case _e.APOSTROPHE:{this._err(_t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Ie.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case _e.EOF:{this._err(_t.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(_t.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Ie.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:break;case _e.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Ie.DATA;break}case _e.QUOTATION_MARK:{n.systemId="",this.state=Ie.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case _e.APOSTROPHE:{n.systemId="",this.state=Ie.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case _e.EOF:{this._err(_t.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(_t.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Ie.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:{this.state=Ie.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case _e.QUOTATION_MARK:{this._err(_t.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Ie.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case _e.APOSTROPHE:{this._err(_t.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Ie.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case _e.GREATER_THAN_SIGN:{this._err(_t.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Ie.DATA,this.emitCurrentDoctype(n);break}case _e.EOF:{this._err(_t.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(_t.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Ie.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:break;case _e.QUOTATION_MARK:{n.systemId="",this.state=Ie.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case _e.APOSTROPHE:{n.systemId="",this.state=Ie.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case _e.GREATER_THAN_SIGN:{this._err(_t.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Ie.DATA,this.emitCurrentDoctype(n);break}case _e.EOF:{this._err(_t.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(_t.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Ie.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case _e.QUOTATION_MARK:{this.state=Ie.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),n.systemId+=Zr;break}case _e.GREATER_THAN_SIGN:{this._err(_t.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Ie.DATA;break}case _e.EOF:{this._err(_t.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case _e.APOSTROPHE:{this.state=Ie.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter),n.systemId+=Zr;break}case _e.GREATER_THAN_SIGN:{this._err(_t.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Ie.DATA;break}case _e.EOF:{this._err(_t.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case _e.SPACE:case _e.LINE_FEED:case _e.TABULATION:case _e.FORM_FEED:break;case _e.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Ie.DATA;break}case _e.EOF:{this._err(_t.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(_t.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Ie.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case _e.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Ie.DATA;break}case _e.NULL:{this._err(_t.unexpectedNullCharacter);break}case _e.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case _e.RIGHT_SQUARE_BRACKET:{this.state=Ie.CDATA_SECTION_BRACKET;break}case _e.EOF:{this._err(_t.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===_e.RIGHT_SQUARE_BRACKET?this.state=Ie.CDATA_SECTION_END:(this._emitChars("]"),this.state=Ie.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case _e.GREATER_THAN_SIGN:{this.state=Ie.DATA;break}case _e.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Ie.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(e){e===_e.NUMBER_SIGN?this.state=Ie.NUMERIC_CHARACTER_REFERENCE:f4(e)?(this.state=Ie.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(e)):(this._flushCodePointConsumedAsCharacterReference(_e.AMPERSAND),this._reconsumeInState(this.returnState,e))}_stateNamedCharacterReference(e){const n=this._matchNamedCharacterReference(e);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(_e.AMPERSAND),this.state=Ie.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(e){f4(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===_e.SEMICOLON&&this._err(_t.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,e))}_stateNumericCharacterReference(e){this.charRefCode=0,e===_e.LATIN_SMALL_X||e===_e.LATIN_CAPITAL_X?this.state=Ie.HEXADEMICAL_CHARACTER_REFERENCE_START:w1(e)?(this.state=Ie.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(e)):(this._err(_t.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(_e.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(_e.NUMBER_SIGN),this._reconsumeInState(this.returnState,e))}_stateHexademicalCharacterReferenceStart(e){ewe(e)?(this.state=Ie.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(e)):(this._err(_t.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(_e.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(_e.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(e){hV(e)?this.charRefCode=this.charRefCode*16+e-55:dV(e)?this.charRefCode=this.charRefCode*16+e-87:w1(e)?this.charRefCode=this.charRefCode*16+e-48:e===_e.SEMICOLON?this.state=Ie.NUMERIC_CHARACTER_REFERENCE_END:(this._err(_t.missingSemicolonAfterCharacterReference),this.state=Ie.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateDecimalCharacterReference(e){w1(e)?this.charRefCode=this.charRefCode*10+e-48:e===_e.SEMICOLON?this.state=Ie.NUMERIC_CHARACTER_REFERENCE_END:(this._err(_t.missingSemicolonAfterCharacterReference),this.state=Ie.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateNumericCharacterReferenceEnd(e){if(this.charRefCode===_e.NULL)this._err(_t.nullCharacterReference),this.charRefCode=_e.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(_t.characterReferenceOutsideUnicodeRange),this.charRefCode=_e.REPLACEMENT_CHARACTER;else if(sV(this.charRefCode))this._err(_t.surrogateCharacterReference),this.charRefCode=_e.REPLACEMENT_CHARACTER;else if(aV(this.charRefCode))this._err(_t.noncharacterCharacterReference);else if(oV(this.charRefCode)||this.charRefCode===_e.CARRIAGE_RETURN){this._err(_t.controlCharacterReference);const n=QTe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,e)}}const mV=new Set([H.DD,H.DT,H.LI,H.OPTGROUP,H.OPTION,H.P,H.RB,H.RP,H.RT,H.RTC]),TN=new Set([...mV,H.CAPTION,H.COLGROUP,H.TBODY,H.TD,H.TFOOT,H.TH,H.THEAD,H.TR]),Px=new Map([[H.APPLET,Rt.HTML],[H.CAPTION,Rt.HTML],[H.HTML,Rt.HTML],[H.MARQUEE,Rt.HTML],[H.OBJECT,Rt.HTML],[H.TABLE,Rt.HTML],[H.TD,Rt.HTML],[H.TEMPLATE,Rt.HTML],[H.TH,Rt.HTML],[H.ANNOTATION_XML,Rt.MATHML],[H.MI,Rt.MATHML],[H.MN,Rt.MATHML],[H.MO,Rt.MATHML],[H.MS,Rt.MATHML],[H.MTEXT,Rt.MATHML],[H.DESC,Rt.SVG],[H.FOREIGN_OBJECT,Rt.SVG],[H.TITLE,Rt.SVG]]),rwe=[H.H1,H.H2,H.H3,H.H4,H.H5,H.H6],iwe=[H.TR,H.TEMPLATE,H.HTML],swe=[H.TBODY,H.TFOOT,H.THEAD,H.TEMPLATE,H.HTML],owe=[H.TABLE,H.TEMPLATE,H.HTML],awe=[H.TD,H.TH];class lwe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=H.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===H.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Rt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const i=this._indexOf(e)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Rt.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(n<0?0:n)}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(rwe,Rt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(awe,Rt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(owe,Rt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(swe,Rt.HTML)}clearBackToTableRowContext(){this.clearBackTo(iwe,Rt.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===H.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===H.HTML}hasInScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===e&&i===Rt.HTML)return!0;if(Px.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e],r=this.treeAdapter.getNamespaceURI(this.items[e]);if(fV(n)&&r===Rt.HTML)return!0;if(Px.get(n)===r)return!1}return!0}hasInListItemScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===e&&i===Rt.HTML)return!0;if((r===H.UL||r===H.OL)&&i===Rt.HTML||Px.get(r)===i)return!1}return!0}hasInButtonScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===e&&i===Rt.HTML)return!0;if(r===H.BUTTON&&i===Rt.HTML||Px.get(r)===i)return!1}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Rt.HTML){if(r===e)return!0;if(r===H.TABLE||r===H.TEMPLATE||r===H.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];if(this.treeAdapter.getNamespaceURI(this.items[e])===Rt.HTML){if(n===H.TBODY||n===H.THEAD||n===H.TFOOT)return!0;if(n===H.TABLE||n===H.HTML)return!1}}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Rt.HTML){if(r===e)return!0;if(r!==H.OPTION&&r!==H.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;mV.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;TN.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&TN.has(this.currentTagId);)this.pop()}}const CT=3;var al;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(al=al||(al={}));const wN={type:al.Marker};class cwe{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===al.Marker)break;const{element:c}=l;if(this.treeAdapter.getTagName(c)===s&&this.treeAdapter.getNamespaceURI(c)===o){const u=this.treeAdapter.getAttrList(c);u.length===i&&r.push({idx:a,attrs:u})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<CT)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<CT)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(l=>i.get(l.name)===l.value)&&(s+=1,s>=CT&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(wN)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:al.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:al.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(wN);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===al.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===al.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===al.Element&&n.element===e)}}function SN(t){return{nodeName:"#text",value:t,parentNode:null}}const np={createDocument(){return{nodeName:"#document",mode:Qo.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const i=t.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=e,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};np.appendChild(t,s)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(np.isTextNode(n)){n.value+=e;return}}np.appendChild(t,SN(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&np.isTextNode(r)?r.value+=e:np.insertBefore(t,SN(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},gV="html",uwe="about:legacy-compat",fwe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",vV=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],hwe=[...vV,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],dwe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),yV=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],pwe=[...yV,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function CN(t,e){return e.some(n=>t.startsWith(n))}function mwe(t){return t.name===gV&&t.publicId===null&&(t.systemId===null||t.systemId===uwe)}function gwe(t){if(t.name!==gV)return Qo.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===fwe)return Qo.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),dwe.has(n))return Qo.QUIRKS;let r=e===null?hwe:vV;if(CN(n,r))return Qo.QUIRKS;if(r=e===null?yV:pwe,CN(n,r))return Qo.LIMITED_QUIRKS}return Qo.NO_QUIRKS}const MN={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},vwe="definitionurl",ywe="definitionURL",xwe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),Ewe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Rt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Rt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Rt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Rt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Rt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Rt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Rt.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Rt.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Rt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Rt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Rt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Rt.XMLNS}]]),_we=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),bwe=new Set([H.B,H.BIG,H.BLOCKQUOTE,H.BODY,H.BR,H.CENTER,H.CODE,H.DD,H.DIV,H.DL,H.DT,H.EM,H.EMBED,H.H1,H.H2,H.H3,H.H4,H.H5,H.H6,H.HEAD,H.HR,H.I,H.IMG,H.LI,H.LISTING,H.MENU,H.META,H.NOBR,H.OL,H.P,H.PRE,H.RUBY,H.S,H.SMALL,H.SPAN,H.STRONG,H.STRIKE,H.SUB,H.SUP,H.TABLE,H.TT,H.U,H.UL,H.VAR]);function Awe(t){const e=t.tagID;return e===H.FONT&&t.attrs.some(({name:r})=>r===Ou.COLOR||r===Ou.SIZE||r===Ou.FACE)||bwe.has(e)}function xV(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===vwe){t.attrs[e].name=ywe;break}}function EV(t){for(let e=0;e<t.attrs.length;e++){const n=xwe.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function UC(t){for(let e=0;e<t.attrs.length;e++){const n=Ewe.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function Twe(t){const e=_we.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=pm(t.tagName))}function wwe(t,e){return e===Rt.MATHML&&(t===H.MI||t===H.MO||t===H.MN||t===H.MS||t===H.MTEXT)}function Swe(t,e,n){if(e===Rt.MATHML&&t===H.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Ou.ENCODING){const i=n[r].value.toLowerCase();return i===MN.TEXT_HTML||i===MN.APPLICATION_XML}}return e===Rt.SVG&&(t===H.FOREIGN_OBJECT||t===H.DESC||t===H.TITLE)}function Cwe(t,e,n,r){return(!r||r===Rt.HTML)&&Swe(t,e,n)||(!r||r===Rt.MATHML)&&wwe(t,e)}const Mwe="hidden",Rwe=8,Iwe=3;var He;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(He||(He={}));const Pwe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},_V=new Set([H.TABLE,H.TBODY,H.TFOOT,H.THEAD,H.TR]),RN={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:np,onParseError:null};class IN{constructor(e,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=He.INITIAL,this.originalInsertionMode=He.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...RN,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new nwe(this.options,this),this.activeFormattingElements=new cwe(this.treeAdapter),this.fragmentContextID=r?pm(this.treeAdapter.getTagName(r)):H.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new lwe(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...RN,...n};e??(e=r.treeAdapter.createElement(at.TEMPLATE,Rt.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Rt.HTML,[]),s=new this(r,i,e);return s.fragmentContextID===H.TEMPLATE&&s.tmplInsertionModeStack.unshift(He.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var i;if(!this.onParseError)return;const s=(i=e.location)!==null&&i!==void 0?i:Pwe,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(e,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,e,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(e,n){const r=e===this.document||this.treeAdapter.getNamespaceURI(e)===Rt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,Rt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=He.TEXT}switchToPlaintextParsing(){this.insertionMode=He.TEXT,this.originalInsertionMode=He.IN_BODY,this.tokenizer.state=Di.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===at.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Rt.HTML))switch(this.fragmentContextID){case H.TITLE:case H.TEXTAREA:{this.tokenizer.state=Di.RCDATA;break}case H.STYLE:case H.XMP:case H.IFRAME:case H.NOEMBED:case H.NOFRAMES:case H.NOSCRIPT:{this.tokenizer.state=Di.RAWTEXT;break}case H.SCRIPT:{this.tokenizer.state=Di.SCRIPT_DATA;break}case H.PLAINTEXT:{this.tokenizer.state=Di.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",i=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),e.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,Rt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,Rt.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(at.HTML,Rt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,H.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:c,endOffset:u}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:c,endOffset:u})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(e),s=n.type===Kn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,s)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===H.SVG&&this.treeAdapter.getTagName(n)===at.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Rt.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===H.MGLYPH||e.tagID===H.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Rt.HTML)}_processToken(e){switch(e.type){case Kn.CHARACTER:{this.onCharacter(e);break}case Kn.NULL_CHARACTER:{this.onNullCharacter(e);break}case Kn.COMMENT:{this.onComment(e);break}case Kn.DOCTYPE:{this.onDoctype(e);break}case Kn.START_TAG:{this._processStartTag(e);break}case Kn.END_TAG:{this.onEndTag(e);break}case Kn.EOF:{this.onEof(e);break}case Kn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Cwe(e,i,s,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===al.Marker||this.openElements.contains(i.element)),r=n<0?e-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=He.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(H.P),this.openElements.popUntilTagNamePopped(H.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case H.TR:{this.insertionMode=He.IN_ROW;return}case H.TBODY:case H.THEAD:case H.TFOOT:{this.insertionMode=He.IN_TABLE_BODY;return}case H.CAPTION:{this.insertionMode=He.IN_CAPTION;return}case H.COLGROUP:{this.insertionMode=He.IN_COLUMN_GROUP;return}case H.TABLE:{this.insertionMode=He.IN_TABLE;return}case H.BODY:{this.insertionMode=He.IN_BODY;return}case H.FRAMESET:{this.insertionMode=He.IN_FRAMESET;return}case H.SELECT:{this._resetInsertionModeForSelect(e);return}case H.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case H.HTML:{this.insertionMode=this.headElement?He.AFTER_HEAD:He.BEFORE_HEAD;return}case H.TD:case H.TH:{if(e>0){this.insertionMode=He.IN_CELL;return}break}case H.HEAD:{if(e>0){this.insertionMode=He.IN_HEAD;return}break}}this.insertionMode=He.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===H.TEMPLATE)break;if(r===H.TABLE){this.insertionMode=He.IN_SELECT_IN_TABLE;return}}this.insertionMode=He.IN_SELECT}_isElementCausesFosterParenting(e){return _V.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case H.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Rt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case H.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return JTe[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){a4e(this,e);return}switch(this.insertionMode){case He.INITIAL:{G0(this,e);break}case He.BEFORE_HTML:{S1(this,e);break}case He.BEFORE_HEAD:{C1(this,e);break}case He.IN_HEAD:{M1(this,e);break}case He.IN_HEAD_NO_SCRIPT:{R1(this,e);break}case He.AFTER_HEAD:{I1(this,e);break}case He.IN_BODY:case He.IN_CAPTION:case He.IN_CELL:case He.IN_TEMPLATE:{AV(this,e);break}case He.TEXT:case He.IN_SELECT:case He.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case He.IN_TABLE:case He.IN_TABLE_BODY:case He.IN_ROW:{MT(this,e);break}case He.IN_TABLE_TEXT:{RV(this,e);break}case He.IN_COLUMN_GROUP:{iE(this,e);break}case He.AFTER_BODY:{sE(this,e);break}case He.AFTER_AFTER_BODY:{u3(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){o4e(this,e);return}switch(this.insertionMode){case He.INITIAL:{G0(this,e);break}case He.BEFORE_HTML:{S1(this,e);break}case He.BEFORE_HEAD:{C1(this,e);break}case He.IN_HEAD:{M1(this,e);break}case He.IN_HEAD_NO_SCRIPT:{R1(this,e);break}case He.AFTER_HEAD:{I1(this,e);break}case He.TEXT:{this._insertCharacters(e);break}case He.IN_TABLE:case He.IN_TABLE_BODY:case He.IN_ROW:{MT(this,e);break}case He.IN_COLUMN_GROUP:{iE(this,e);break}case He.AFTER_BODY:{sE(this,e);break}case He.AFTER_AFTER_BODY:{u3(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){h4(this,e);return}switch(this.insertionMode){case He.INITIAL:case He.BEFORE_HTML:case He.BEFORE_HEAD:case He.IN_HEAD:case He.IN_HEAD_NO_SCRIPT:case He.AFTER_HEAD:case He.IN_BODY:case He.IN_TABLE:case He.IN_CAPTION:case He.IN_COLUMN_GROUP:case He.IN_TABLE_BODY:case He.IN_ROW:case He.IN_CELL:case He.IN_SELECT:case He.IN_SELECT_IN_TABLE:case He.IN_TEMPLATE:case He.IN_FRAMESET:case He.AFTER_FRAMESET:{h4(this,e);break}case He.IN_TABLE_TEXT:{V0(this,e);break}case He.AFTER_BODY:{Fwe(this,e);break}case He.AFTER_AFTER_BODY:case He.AFTER_AFTER_FRAMESET:{Uwe(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case He.INITIAL:{zwe(this,e);break}case He.BEFORE_HEAD:case He.IN_HEAD:case He.IN_HEAD_NO_SCRIPT:case He.AFTER_HEAD:{this._err(e,_t.misplacedDoctype);break}case He.IN_TABLE_TEXT:{V0(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,_t.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?l4e(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case He.INITIAL:{G0(this,e);break}case He.BEFORE_HTML:{Hwe(this,e);break}case He.BEFORE_HEAD:{Vwe(this,e);break}case He.IN_HEAD:{Al(this,e);break}case He.IN_HEAD_NO_SCRIPT:{$we(this,e);break}case He.AFTER_HEAD:{Ywe(this,e);break}case He.IN_BODY:{qs(this,e);break}case He.IN_TABLE:{kp(this,e);break}case He.IN_TABLE_TEXT:{V0(this,e);break}case He.IN_CAPTION:{WSe(this,e);break}case He.IN_COLUMN_GROUP:{GC(this,e);break}case He.IN_TABLE_BODY:{L_(this,e);break}case He.IN_ROW:{N_(this,e);break}case He.IN_CELL:{XSe(this,e);break}case He.IN_SELECT:{LV(this,e);break}case He.IN_SELECT_IN_TABLE:{qSe(this,e);break}case He.IN_TEMPLATE:{JSe(this,e);break}case He.AFTER_BODY:{ZSe(this,e);break}case He.IN_FRAMESET:{e4e(this,e);break}case He.AFTER_FRAMESET:{n4e(this,e);break}case He.AFTER_AFTER_BODY:{i4e(this,e);break}case He.AFTER_AFTER_FRAMESET:{s4e(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?c4e(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case He.INITIAL:{G0(this,e);break}case He.BEFORE_HTML:{Gwe(this,e);break}case He.BEFORE_HEAD:{Wwe(this,e);break}case He.IN_HEAD:{jwe(this,e);break}case He.IN_HEAD_NO_SCRIPT:{Xwe(this,e);break}case He.AFTER_HEAD:{qwe(this,e);break}case He.IN_BODY:{P_(this,e);break}case He.TEXT:{OSe(this,e);break}case He.IN_TABLE:{ug(this,e);break}case He.IN_TABLE_TEXT:{V0(this,e);break}case He.IN_CAPTION:{jSe(this,e);break}case He.IN_COLUMN_GROUP:{$Se(this,e);break}case He.IN_TABLE_BODY:{d4(this,e);break}case He.IN_ROW:{PV(this,e);break}case He.IN_CELL:{YSe(this,e);break}case He.IN_SELECT:{NV(this,e);break}case He.IN_SELECT_IN_TABLE:{KSe(this,e);break}case He.IN_TEMPLATE:{QSe(this,e);break}case He.AFTER_BODY:{DV(this,e);break}case He.IN_FRAMESET:{t4e(this,e);break}case He.AFTER_FRAMESET:{r4e(this,e);break}case He.AFTER_AFTER_BODY:{u3(this,e);break}}}onEof(e){switch(this.insertionMode){case He.INITIAL:{G0(this,e);break}case He.BEFORE_HTML:{S1(this,e);break}case He.BEFORE_HEAD:{C1(this,e);break}case He.IN_HEAD:{M1(this,e);break}case He.IN_HEAD_NO_SCRIPT:{R1(this,e);break}case He.AFTER_HEAD:{I1(this,e);break}case He.IN_BODY:case He.IN_TABLE:case He.IN_CAPTION:case He.IN_COLUMN_GROUP:case He.IN_TABLE_BODY:case He.IN_ROW:case He.IN_CELL:case He.IN_SELECT:case He.IN_SELECT_IN_TABLE:{CV(this,e);break}case He.TEXT:{DSe(this,e);break}case He.IN_TABLE_TEXT:{V0(this,e);break}case He.IN_TEMPLATE:{OV(this,e);break}case He.AFTER_BODY:case He.IN_FRAMESET:case He.AFTER_FRAMESET:case He.AFTER_AFTER_BODY:case He.AFTER_AFTER_FRAMESET:{HC(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===_e.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case He.IN_HEAD:case He.IN_HEAD_NO_SCRIPT:case He.AFTER_HEAD:case He.TEXT:case He.IN_COLUMN_GROUP:case He.IN_SELECT:case He.IN_SELECT_IN_TABLE:case He.IN_FRAMESET:case He.AFTER_FRAMESET:{this._insertCharacters(e);break}case He.IN_BODY:case He.IN_CAPTION:case He.IN_CELL:case He.IN_TEMPLATE:case He.AFTER_BODY:case He.AFTER_AFTER_BODY:case He.AFTER_AFTER_FRAMESET:{bV(this,e);break}case He.IN_TABLE:case He.IN_TABLE_BODY:case He.IN_ROW:{MT(this,e);break}case He.IN_TABLE_TEXT:{MV(this,e);break}}}}function Lwe(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):SV(t,e),n}function Nwe(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const i=t.openElements.items[r];if(i===e.element)break;t._isSpecialElement(i,t.openElements.tagIDs[r])&&(n=i)}return n||(t.openElements.shortenToLength(r<0?0:r),t.activeFormattingElements.removeEntry(e)),n}function Owe(t,e,n){let r=e,i=t.openElements.getCommonAncestor(e);for(let s=0,o=i;o!==n;s++,o=i){i=t.openElements.getCommonAncestor(o);const a=t.activeFormattingElements.getElementEntry(o),l=a&&s>=Iwe;!a||l?(l&&t.activeFormattingElements.removeEntry(a),t.openElements.remove(o)):(o=Dwe(t,a),r===e&&(t.activeFormattingElements.bookmark=a),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(o,r),r=o)}return r}function Dwe(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function Bwe(t,e,n){const r=t.treeAdapter.getTagName(e),i=pm(r);if(t._isElementCausesFosterParenting(i))t._fosterParentElement(n);else{const s=t.treeAdapter.getNamespaceURI(e);i===H.TEMPLATE&&s===Rt.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function kwe(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=t.treeAdapter.createElement(i.tagName,r,i.attrs);t._adoptNodes(e,s),t.treeAdapter.appendChild(e,s),t.activeFormattingElements.insertElementAfterBookmark(s,i),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,s,i.tagID)}function zC(t,e){for(let n=0;n<Rwe;n++){const r=Lwe(t,e);if(!r)break;const i=Nwe(t,r);if(!i)break;t.activeFormattingElements.bookmark=r;const s=Owe(t,i,r.element),o=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(s),o&&Bwe(t,o,s),kwe(t,i,r)}}function h4(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function Fwe(t,e){t._appendCommentNode(e,t.openElements.items[0])}function Uwe(t,e){t._appendCommentNode(e,t.document)}function HC(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],i=t.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const s=t.openElements.items[1],o=t.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&t._setEndLocation(s,e)}}}}function zwe(t,e){t._setDocumentType(e);const n=e.forceQuirks?Qo.QUIRKS:gwe(e);mwe(e)||t._err(e,_t.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=He.BEFORE_HTML}function G0(t,e){t._err(e,_t.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Qo.QUIRKS),t.insertionMode=He.BEFORE_HTML,t._processToken(e)}function Hwe(t,e){e.tagID===H.HTML?(t._insertElement(e,Rt.HTML),t.insertionMode=He.BEFORE_HEAD):S1(t,e)}function Gwe(t,e){const n=e.tagID;(n===H.HTML||n===H.HEAD||n===H.BODY||n===H.BR)&&S1(t,e)}function S1(t,e){t._insertFakeRootElement(),t.insertionMode=He.BEFORE_HEAD,t._processToken(e)}function Vwe(t,e){switch(e.tagID){case H.HTML:{qs(t,e);break}case H.HEAD:{t._insertElement(e,Rt.HTML),t.headElement=t.openElements.current,t.insertionMode=He.IN_HEAD;break}default:C1(t,e)}}function Wwe(t,e){const n=e.tagID;n===H.HEAD||n===H.BODY||n===H.HTML||n===H.BR?C1(t,e):t._err(e,_t.endTagWithoutMatchingOpenElement)}function C1(t,e){t._insertFakeElement(at.HEAD,H.HEAD),t.headElement=t.openElements.current,t.insertionMode=He.IN_HEAD,t._processToken(e)}function Al(t,e){switch(e.tagID){case H.HTML:{qs(t,e);break}case H.BASE:case H.BASEFONT:case H.BGSOUND:case H.LINK:case H.META:{t._appendElement(e,Rt.HTML),e.ackSelfClosing=!0;break}case H.TITLE:{t._switchToTextParsing(e,Di.RCDATA);break}case H.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Di.RAWTEXT):(t._insertElement(e,Rt.HTML),t.insertionMode=He.IN_HEAD_NO_SCRIPT);break}case H.NOFRAMES:case H.STYLE:{t._switchToTextParsing(e,Di.RAWTEXT);break}case H.SCRIPT:{t._switchToTextParsing(e,Di.SCRIPT_DATA);break}case H.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=He.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(He.IN_TEMPLATE);break}case H.HEAD:{t._err(e,_t.misplacedStartTagForHeadElement);break}default:M1(t,e)}}function jwe(t,e){switch(e.tagID){case H.HEAD:{t.openElements.pop(),t.insertionMode=He.AFTER_HEAD;break}case H.BODY:case H.BR:case H.HTML:{M1(t,e);break}case H.TEMPLATE:{Ih(t,e);break}default:t._err(e,_t.endTagWithoutMatchingOpenElement)}}function Ih(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==H.TEMPLATE&&t._err(e,_t.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(H.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,_t.endTagWithoutMatchingOpenElement)}function M1(t,e){t.openElements.pop(),t.insertionMode=He.AFTER_HEAD,t._processToken(e)}function $we(t,e){switch(e.tagID){case H.HTML:{qs(t,e);break}case H.BASEFONT:case H.BGSOUND:case H.HEAD:case H.LINK:case H.META:case H.NOFRAMES:case H.STYLE:{Al(t,e);break}case H.NOSCRIPT:{t._err(e,_t.nestedNoscriptInHead);break}default:R1(t,e)}}function Xwe(t,e){switch(e.tagID){case H.NOSCRIPT:{t.openElements.pop(),t.insertionMode=He.IN_HEAD;break}case H.BR:{R1(t,e);break}default:t._err(e,_t.endTagWithoutMatchingOpenElement)}}function R1(t,e){const n=e.type===Kn.EOF?_t.openElementsLeftAfterEof:_t.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=He.IN_HEAD,t._processToken(e)}function Ywe(t,e){switch(e.tagID){case H.HTML:{qs(t,e);break}case H.BODY:{t._insertElement(e,Rt.HTML),t.framesetOk=!1,t.insertionMode=He.IN_BODY;break}case H.FRAMESET:{t._insertElement(e,Rt.HTML),t.insertionMode=He.IN_FRAMESET;break}case H.BASE:case H.BASEFONT:case H.BGSOUND:case H.LINK:case H.META:case H.NOFRAMES:case H.SCRIPT:case H.STYLE:case H.TEMPLATE:case H.TITLE:{t._err(e,_t.abandonedHeadElementChild),t.openElements.push(t.headElement,H.HEAD),Al(t,e),t.openElements.remove(t.headElement);break}case H.HEAD:{t._err(e,_t.misplacedStartTagForHeadElement);break}default:I1(t,e)}}function qwe(t,e){switch(e.tagID){case H.BODY:case H.HTML:case H.BR:{I1(t,e);break}case H.TEMPLATE:{Ih(t,e);break}default:t._err(e,_t.endTagWithoutMatchingOpenElement)}}function I1(t,e){t._insertFakeElement(at.BODY,H.BODY),t.insertionMode=He.IN_BODY,I_(t,e)}function I_(t,e){switch(e.type){case Kn.CHARACTER:{AV(t,e);break}case Kn.WHITESPACE_CHARACTER:{bV(t,e);break}case Kn.COMMENT:{h4(t,e);break}case Kn.START_TAG:{qs(t,e);break}case Kn.END_TAG:{P_(t,e);break}case Kn.EOF:{CV(t,e);break}}}function bV(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function AV(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function Kwe(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function Jwe(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function Qwe(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,Rt.HTML),t.insertionMode=He.IN_FRAMESET)}function Zwe(t,e){t.openElements.hasInButtonScope(H.P)&&t._closePElement(),t._insertElement(e,Rt.HTML)}function eSe(t,e){t.openElements.hasInButtonScope(H.P)&&t._closePElement(),fV(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,Rt.HTML)}function tSe(t,e){t.openElements.hasInButtonScope(H.P)&&t._closePElement(),t._insertElement(e,Rt.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function nSe(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(H.P)&&t._closePElement(),t._insertElement(e,Rt.HTML),n||(t.formElement=t.openElements.current))}function rSe(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const i=t.openElements.tagIDs[r];if(n===H.LI&&i===H.LI||(n===H.DD||n===H.DT)&&(i===H.DD||i===H.DT)){t.openElements.generateImpliedEndTagsWithExclusion(i),t.openElements.popUntilTagNamePopped(i);break}if(i!==H.ADDRESS&&i!==H.DIV&&i!==H.P&&t._isSpecialElement(t.openElements.items[r],i))break}t.openElements.hasInButtonScope(H.P)&&t._closePElement(),t._insertElement(e,Rt.HTML)}function iSe(t,e){t.openElements.hasInButtonScope(H.P)&&t._closePElement(),t._insertElement(e,Rt.HTML),t.tokenizer.state=Di.PLAINTEXT}function sSe(t,e){t.openElements.hasInScope(H.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(H.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,Rt.HTML),t.framesetOk=!1}function oSe(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(at.A);n&&(zC(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,Rt.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function aSe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Rt.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function lSe(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(H.NOBR)&&(zC(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,Rt.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function cSe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Rt.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function uSe(t,e){t.treeAdapter.getDocumentMode(t.document)!==Qo.QUIRKS&&t.openElements.hasInButtonScope(H.P)&&t._closePElement(),t._insertElement(e,Rt.HTML),t.framesetOk=!1,t.insertionMode=He.IN_TABLE}function TV(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Rt.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function wV(t){const e=lV(t,Ou.TYPE);return e!=null&&e.toLowerCase()===Mwe}function fSe(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Rt.HTML),wV(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function hSe(t,e){t._appendElement(e,Rt.HTML),e.ackSelfClosing=!0}function dSe(t,e){t.openElements.hasInButtonScope(H.P)&&t._closePElement(),t._appendElement(e,Rt.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function pSe(t,e){e.tagName=at.IMG,e.tagID=H.IMG,TV(t,e)}function mSe(t,e){t._insertElement(e,Rt.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Di.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=He.TEXT}function gSe(t,e){t.openElements.hasInButtonScope(H.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Di.RAWTEXT)}function vSe(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Di.RAWTEXT)}function PN(t,e){t._switchToTextParsing(e,Di.RAWTEXT)}function ySe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Rt.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===He.IN_TABLE||t.insertionMode===He.IN_CAPTION||t.insertionMode===He.IN_TABLE_BODY||t.insertionMode===He.IN_ROW||t.insertionMode===He.IN_CELL?He.IN_SELECT_IN_TABLE:He.IN_SELECT}function xSe(t,e){t.openElements.currentTagId===H.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,Rt.HTML)}function ESe(t,e){t.openElements.hasInScope(H.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,Rt.HTML)}function _Se(t,e){t.openElements.hasInScope(H.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(H.RTC),t._insertElement(e,Rt.HTML)}function bSe(t,e){t._reconstructActiveFormattingElements(),xV(e),UC(e),e.selfClosing?t._appendElement(e,Rt.MATHML):t._insertElement(e,Rt.MATHML),e.ackSelfClosing=!0}function ASe(t,e){t._reconstructActiveFormattingElements(),EV(e),UC(e),e.selfClosing?t._appendElement(e,Rt.SVG):t._insertElement(e,Rt.SVG),e.ackSelfClosing=!0}function LN(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Rt.HTML)}function qs(t,e){switch(e.tagID){case H.I:case H.S:case H.B:case H.U:case H.EM:case H.TT:case H.BIG:case H.CODE:case H.FONT:case H.SMALL:case H.STRIKE:case H.STRONG:{aSe(t,e);break}case H.A:{oSe(t,e);break}case H.H1:case H.H2:case H.H3:case H.H4:case H.H5:case H.H6:{eSe(t,e);break}case H.P:case H.DL:case H.OL:case H.UL:case H.DIV:case H.DIR:case H.NAV:case H.MAIN:case H.MENU:case H.ASIDE:case H.CENTER:case H.FIGURE:case H.FOOTER:case H.HEADER:case H.HGROUP:case H.DIALOG:case H.DETAILS:case H.ADDRESS:case H.ARTICLE:case H.SECTION:case H.SUMMARY:case H.FIELDSET:case H.BLOCKQUOTE:case H.FIGCAPTION:{Zwe(t,e);break}case H.LI:case H.DD:case H.DT:{rSe(t,e);break}case H.BR:case H.IMG:case H.WBR:case H.AREA:case H.EMBED:case H.KEYGEN:{TV(t,e);break}case H.HR:{dSe(t,e);break}case H.RB:case H.RTC:{ESe(t,e);break}case H.RT:case H.RP:{_Se(t,e);break}case H.PRE:case H.LISTING:{tSe(t,e);break}case H.XMP:{gSe(t,e);break}case H.SVG:{ASe(t,e);break}case H.HTML:{Kwe(t,e);break}case H.BASE:case H.LINK:case H.META:case H.STYLE:case H.TITLE:case H.SCRIPT:case H.BGSOUND:case H.BASEFONT:case H.TEMPLATE:{Al(t,e);break}case H.BODY:{Jwe(t,e);break}case H.FORM:{nSe(t,e);break}case H.NOBR:{lSe(t,e);break}case H.MATH:{bSe(t,e);break}case H.TABLE:{uSe(t,e);break}case H.INPUT:{fSe(t,e);break}case H.PARAM:case H.TRACK:case H.SOURCE:{hSe(t,e);break}case H.IMAGE:{pSe(t,e);break}case H.BUTTON:{sSe(t,e);break}case H.APPLET:case H.OBJECT:case H.MARQUEE:{cSe(t,e);break}case H.IFRAME:{vSe(t,e);break}case H.SELECT:{ySe(t,e);break}case H.OPTION:case H.OPTGROUP:{xSe(t,e);break}case H.NOEMBED:{PN(t,e);break}case H.FRAMESET:{Qwe(t,e);break}case H.TEXTAREA:{mSe(t,e);break}case H.NOSCRIPT:{t.options.scriptingEnabled?PN(t,e):LN(t,e);break}case H.PLAINTEXT:{iSe(t,e);break}case H.COL:case H.TH:case H.TD:case H.TR:case H.HEAD:case H.FRAME:case H.TBODY:case H.TFOOT:case H.THEAD:case H.CAPTION:case H.COLGROUP:break;default:LN(t,e)}}function TSe(t,e){if(t.openElements.hasInScope(H.BODY)&&(t.insertionMode=He.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function wSe(t,e){t.openElements.hasInScope(H.BODY)&&(t.insertionMode=He.AFTER_BODY,DV(t,e))}function SSe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function CSe(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(H.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(H.FORM):n&&t.openElements.remove(n))}function MSe(t){t.openElements.hasInButtonScope(H.P)||t._insertFakeElement(at.P,H.P),t._closePElement()}function RSe(t){t.openElements.hasInListItemScope(H.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(H.LI),t.openElements.popUntilTagNamePopped(H.LI))}function ISe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function PSe(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function LSe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function NSe(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(at.BR,H.BR),t.openElements.pop(),t.framesetOk=!1}function SV(t,e){const n=e.tagName,r=e.tagID;for(let i=t.openElements.stackTop;i>0;i--){const s=t.openElements.items[i],o=t.openElements.tagIDs[i];if(r===o&&(r!==H.UNKNOWN||t.treeAdapter.getTagName(s)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=i&&t.openElements.shortenToLength(i);break}if(t._isSpecialElement(s,o))break}}function P_(t,e){switch(e.tagID){case H.A:case H.B:case H.I:case H.S:case H.U:case H.EM:case H.TT:case H.BIG:case H.CODE:case H.FONT:case H.NOBR:case H.SMALL:case H.STRIKE:case H.STRONG:{zC(t,e);break}case H.P:{MSe(t);break}case H.DL:case H.UL:case H.OL:case H.DIR:case H.DIV:case H.NAV:case H.PRE:case H.MAIN:case H.MENU:case H.ASIDE:case H.BUTTON:case H.CENTER:case H.FIGURE:case H.FOOTER:case H.HEADER:case H.HGROUP:case H.DIALOG:case H.ADDRESS:case H.ARTICLE:case H.DETAILS:case H.SECTION:case H.SUMMARY:case H.LISTING:case H.FIELDSET:case H.BLOCKQUOTE:case H.FIGCAPTION:{SSe(t,e);break}case H.LI:{RSe(t);break}case H.DD:case H.DT:{ISe(t,e);break}case H.H1:case H.H2:case H.H3:case H.H4:case H.H5:case H.H6:{PSe(t);break}case H.BR:{NSe(t);break}case H.BODY:{TSe(t,e);break}case H.HTML:{wSe(t,e);break}case H.FORM:{CSe(t);break}case H.APPLET:case H.OBJECT:case H.MARQUEE:{LSe(t,e);break}case H.TEMPLATE:{Ih(t,e);break}default:SV(t,e)}}function CV(t,e){t.tmplInsertionModeStack.length>0?OV(t,e):HC(t,e)}function OSe(t,e){var n;e.tagID===H.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function DSe(t,e){t._err(e,_t.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function MT(t,e){if(_V.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=He.IN_TABLE_TEXT,e.type){case Kn.CHARACTER:{RV(t,e);break}case Kn.WHITESPACE_CHARACTER:{MV(t,e);break}}else jg(t,e)}function BSe(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,Rt.HTML),t.insertionMode=He.IN_CAPTION}function kSe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Rt.HTML),t.insertionMode=He.IN_COLUMN_GROUP}function FSe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(at.COLGROUP,H.COLGROUP),t.insertionMode=He.IN_COLUMN_GROUP,GC(t,e)}function USe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Rt.HTML),t.insertionMode=He.IN_TABLE_BODY}function zSe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(at.TBODY,H.TBODY),t.insertionMode=He.IN_TABLE_BODY,L_(t,e)}function HSe(t,e){t.openElements.hasInTableScope(H.TABLE)&&(t.openElements.popUntilTagNamePopped(H.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function GSe(t,e){wV(e)?t._appendElement(e,Rt.HTML):jg(t,e),e.ackSelfClosing=!0}function VSe(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,Rt.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function kp(t,e){switch(e.tagID){case H.TD:case H.TH:case H.TR:{zSe(t,e);break}case H.STYLE:case H.SCRIPT:case H.TEMPLATE:{Al(t,e);break}case H.COL:{FSe(t,e);break}case H.FORM:{VSe(t,e);break}case H.TABLE:{HSe(t,e);break}case H.TBODY:case H.TFOOT:case H.THEAD:{USe(t,e);break}case H.INPUT:{GSe(t,e);break}case H.CAPTION:{BSe(t,e);break}case H.COLGROUP:{kSe(t,e);break}default:jg(t,e)}}function ug(t,e){switch(e.tagID){case H.TABLE:{t.openElements.hasInTableScope(H.TABLE)&&(t.openElements.popUntilTagNamePopped(H.TABLE),t._resetInsertionMode());break}case H.TEMPLATE:{Ih(t,e);break}case H.BODY:case H.CAPTION:case H.COL:case H.COLGROUP:case H.HTML:case H.TBODY:case H.TD:case H.TFOOT:case H.TH:case H.THEAD:case H.TR:break;default:jg(t,e)}}function jg(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,I_(t,e),t.fosterParentingEnabled=n}function MV(t,e){t.pendingCharacterTokens.push(e)}function RV(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function V0(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)jg(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const IV=new Set([H.CAPTION,H.COL,H.COLGROUP,H.TBODY,H.TD,H.TFOOT,H.TH,H.THEAD,H.TR]);function WSe(t,e){const n=e.tagID;IV.has(n)?t.openElements.hasInTableScope(H.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(H.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=He.IN_TABLE,kp(t,e)):qs(t,e)}function jSe(t,e){const n=e.tagID;switch(n){case H.CAPTION:case H.TABLE:{t.openElements.hasInTableScope(H.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(H.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=He.IN_TABLE,n===H.TABLE&&ug(t,e));break}case H.BODY:case H.COL:case H.COLGROUP:case H.HTML:case H.TBODY:case H.TD:case H.TFOOT:case H.TH:case H.THEAD:case H.TR:break;default:P_(t,e)}}function GC(t,e){switch(e.tagID){case H.HTML:{qs(t,e);break}case H.COL:{t._appendElement(e,Rt.HTML),e.ackSelfClosing=!0;break}case H.TEMPLATE:{Al(t,e);break}default:iE(t,e)}}function $Se(t,e){switch(e.tagID){case H.COLGROUP:{t.openElements.currentTagId===H.COLGROUP&&(t.openElements.pop(),t.insertionMode=He.IN_TABLE);break}case H.TEMPLATE:{Ih(t,e);break}case H.COL:break;default:iE(t,e)}}function iE(t,e){t.openElements.currentTagId===H.COLGROUP&&(t.openElements.pop(),t.insertionMode=He.IN_TABLE,t._processToken(e))}function L_(t,e){switch(e.tagID){case H.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,Rt.HTML),t.insertionMode=He.IN_ROW;break}case H.TH:case H.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(at.TR,H.TR),t.insertionMode=He.IN_ROW,N_(t,e);break}case H.CAPTION:case H.COL:case H.COLGROUP:case H.TBODY:case H.TFOOT:case H.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=He.IN_TABLE,kp(t,e));break}default:kp(t,e)}}function d4(t,e){const n=e.tagID;switch(e.tagID){case H.TBODY:case H.TFOOT:case H.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=He.IN_TABLE);break}case H.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=He.IN_TABLE,ug(t,e));break}case H.BODY:case H.CAPTION:case H.COL:case H.COLGROUP:case H.HTML:case H.TD:case H.TH:case H.TR:break;default:ug(t,e)}}function N_(t,e){switch(e.tagID){case H.TH:case H.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,Rt.HTML),t.insertionMode=He.IN_CELL,t.activeFormattingElements.insertMarker();break}case H.CAPTION:case H.COL:case H.COLGROUP:case H.TBODY:case H.TFOOT:case H.THEAD:case H.TR:{t.openElements.hasInTableScope(H.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=He.IN_TABLE_BODY,L_(t,e));break}default:kp(t,e)}}function PV(t,e){switch(e.tagID){case H.TR:{t.openElements.hasInTableScope(H.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=He.IN_TABLE_BODY);break}case H.TABLE:{t.openElements.hasInTableScope(H.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=He.IN_TABLE_BODY,d4(t,e));break}case H.TBODY:case H.TFOOT:case H.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(H.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=He.IN_TABLE_BODY,d4(t,e));break}case H.BODY:case H.CAPTION:case H.COL:case H.COLGROUP:case H.HTML:case H.TD:case H.TH:break;default:ug(t,e)}}function XSe(t,e){const n=e.tagID;IV.has(n)?(t.openElements.hasInTableScope(H.TD)||t.openElements.hasInTableScope(H.TH))&&(t._closeTableCell(),N_(t,e)):qs(t,e)}function YSe(t,e){const n=e.tagID;switch(n){case H.TD:case H.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=He.IN_ROW);break}case H.TABLE:case H.TBODY:case H.TFOOT:case H.THEAD:case H.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),PV(t,e));break}case H.BODY:case H.CAPTION:case H.COL:case H.COLGROUP:case H.HTML:break;default:P_(t,e)}}function LV(t,e){switch(e.tagID){case H.HTML:{qs(t,e);break}case H.OPTION:{t.openElements.currentTagId===H.OPTION&&t.openElements.pop(),t._insertElement(e,Rt.HTML);break}case H.OPTGROUP:{t.openElements.currentTagId===H.OPTION&&t.openElements.pop(),t.openElements.currentTagId===H.OPTGROUP&&t.openElements.pop(),t._insertElement(e,Rt.HTML);break}case H.INPUT:case H.KEYGEN:case H.TEXTAREA:case H.SELECT:{t.openElements.hasInSelectScope(H.SELECT)&&(t.openElements.popUntilTagNamePopped(H.SELECT),t._resetInsertionMode(),e.tagID!==H.SELECT&&t._processStartTag(e));break}case H.SCRIPT:case H.TEMPLATE:{Al(t,e);break}}}function NV(t,e){switch(e.tagID){case H.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===H.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===H.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===H.OPTGROUP&&t.openElements.pop();break}case H.OPTION:{t.openElements.currentTagId===H.OPTION&&t.openElements.pop();break}case H.SELECT:{t.openElements.hasInSelectScope(H.SELECT)&&(t.openElements.popUntilTagNamePopped(H.SELECT),t._resetInsertionMode());break}case H.TEMPLATE:{Ih(t,e);break}}}function qSe(t,e){const n=e.tagID;n===H.CAPTION||n===H.TABLE||n===H.TBODY||n===H.TFOOT||n===H.THEAD||n===H.TR||n===H.TD||n===H.TH?(t.openElements.popUntilTagNamePopped(H.SELECT),t._resetInsertionMode(),t._processStartTag(e)):LV(t,e)}function KSe(t,e){const n=e.tagID;n===H.CAPTION||n===H.TABLE||n===H.TBODY||n===H.TFOOT||n===H.THEAD||n===H.TR||n===H.TD||n===H.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(H.SELECT),t._resetInsertionMode(),t.onEndTag(e)):NV(t,e)}function JSe(t,e){switch(e.tagID){case H.BASE:case H.BASEFONT:case H.BGSOUND:case H.LINK:case H.META:case H.NOFRAMES:case H.SCRIPT:case H.STYLE:case H.TEMPLATE:case H.TITLE:{Al(t,e);break}case H.CAPTION:case H.COLGROUP:case H.TBODY:case H.TFOOT:case H.THEAD:{t.tmplInsertionModeStack[0]=He.IN_TABLE,t.insertionMode=He.IN_TABLE,kp(t,e);break}case H.COL:{t.tmplInsertionModeStack[0]=He.IN_COLUMN_GROUP,t.insertionMode=He.IN_COLUMN_GROUP,GC(t,e);break}case H.TR:{t.tmplInsertionModeStack[0]=He.IN_TABLE_BODY,t.insertionMode=He.IN_TABLE_BODY,L_(t,e);break}case H.TD:case H.TH:{t.tmplInsertionModeStack[0]=He.IN_ROW,t.insertionMode=He.IN_ROW,N_(t,e);break}default:t.tmplInsertionModeStack[0]=He.IN_BODY,t.insertionMode=He.IN_BODY,qs(t,e)}}function QSe(t,e){e.tagID===H.TEMPLATE&&Ih(t,e)}function OV(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(H.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):HC(t,e)}function ZSe(t,e){e.tagID===H.HTML?qs(t,e):sE(t,e)}function DV(t,e){var n;if(e.tagID===H.HTML){if(t.fragmentContext||(t.insertionMode=He.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===H.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else sE(t,e)}function sE(t,e){t.insertionMode=He.IN_BODY,I_(t,e)}function e4e(t,e){switch(e.tagID){case H.HTML:{qs(t,e);break}case H.FRAMESET:{t._insertElement(e,Rt.HTML);break}case H.FRAME:{t._appendElement(e,Rt.HTML),e.ackSelfClosing=!0;break}case H.NOFRAMES:{Al(t,e);break}}}function t4e(t,e){e.tagID===H.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==H.FRAMESET&&(t.insertionMode=He.AFTER_FRAMESET))}function n4e(t,e){switch(e.tagID){case H.HTML:{qs(t,e);break}case H.NOFRAMES:{Al(t,e);break}}}function r4e(t,e){e.tagID===H.HTML&&(t.insertionMode=He.AFTER_AFTER_FRAMESET)}function i4e(t,e){e.tagID===H.HTML?qs(t,e):u3(t,e)}function u3(t,e){t.insertionMode=He.IN_BODY,I_(t,e)}function s4e(t,e){switch(e.tagID){case H.HTML:{qs(t,e);break}case H.NOFRAMES:{Al(t,e);break}}}function o4e(t,e){e.chars=Zr,t._insertCharacters(e)}function a4e(t,e){t._insertCharacters(e),t.framesetOk=!1}function BV(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==Rt.HTML&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function l4e(t,e){if(Awe(e))BV(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===Rt.MATHML?xV(e):r===Rt.SVG&&(Twe(e),EV(e)),UC(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function c4e(t,e){if(e.tagID===H.P||e.tagID===H.BR){BV(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===Rt.HTML){t._endTagOutsideForeignContent(e);break}const i=t.treeAdapter.getTagName(r);if(i.toLowerCase()===e.tagName){e.tagName=i,t.openElements.shortenToLength(n);break}}}at.AREA,at.BASE,at.BASEFONT,at.BGSOUND,at.BR,at.COL,at.EMBED,at.FRAME,at.HR,at.IMG,at.INPUT,at.KEYGEN,at.LINK,at.META,at.PARAM,at.SOURCE,at.TRACK,at.WBR;const kV=FV("end"),Ph=FV("start");function FV(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const UV=function(t){if(t==null)return d4e;if(typeof t=="function")return O_(t);if(typeof t=="object")return Array.isArray(t)?u4e(t):f4e(t);if(typeof t=="string")return h4e(t);throw new Error("Expected function, string, or object as test")};function u4e(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=UV(t[n]);return O_(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function f4e(t){const e=t;return O_(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function h4e(t){return O_(e);function e(n){return n&&n.type===t}}function O_(t){return e;function e(n,r,i){return!!(p4e(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function d4e(){return!0}function p4e(t){return t!==null&&typeof t=="object"&&"type"in t}const zV=[],m4e=!0,NN=!1,g4e="skip";function v4e(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=UV(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const d=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(d?"<"+d+">":""))+")"})}return h;function h(){let d=zV,p,m,g;if((!e||s(l,c,u[u.length-1]||void 0))&&(d=y4e(n(l,u)),d[0]===NN))return d;if("children"in l&&l.children){const v=l;if(v.children&&d[0]!==g4e)for(m=(r?v.children.length:-1)+o,g=u.concat(v);m>-1&&m<v.children.length;){const x=v.children[m];if(p=a(x,m,g)(),p[0]===NN)return p;m=typeof p[1]=="number"?p[1]:m+o}}return d}}}function y4e(t){return Array.isArray(t)?t:typeof t=="number"?[m4e,t]:t==null?zV:[t]}function x4e(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),v4e(t,s,a,i);function a(l,c){const u=c[c.length-1],f=u?u.children.indexOf(l):void 0;return o(l,f,u)}}const E4e=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),ON={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function HV(t,e){const n=I4e(t),r=rV("type",{handlers:{root:_4e,element:b4e,text:A4e,comment:VV,doctype:T4e,raw:S4e},unknown:C4e}),i={parser:n?new IN(ON):IN.getFragmentParser(void 0,ON),handle(a){r(a,i)},stitches:!1,options:e||{}};r(t,i),mm(i,Ph());const s=n?i.parser.document:i.parser.getFragment(),o=bTe(s,{file:i.options.file});return i.stitches&&x4e(o,"comment",function(a,l,c){const u=a;if(u.value.stitch&&c&&l!==void 0){const f=c.children;return f[l]=u.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===t.type?o.children[0]:o}function GV(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function _4e(t,e){GV(t.children,e)}function b4e(t,e){M4e(t,e),GV(t.children,e),R4e(t,e)}function A4e(t,e){const n={type:Kn.CHARACTER,chars:t.value,location:$g(t)};mm(e,Ph(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function T4e(t,e){const n={type:Kn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:$g(t)};mm(e,Ph(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function w4e(t,e){e.stitches=!0;const n=P4e(t);if("children"in t&&"children"in n){const r=HV({type:"root",children:t.children},e.options);n.children=r.children}VV({type:"comment",value:{stitch:n}},e)}function VV(t,e){const n=t.value,r={type:Kn.COMMENT,data:n,location:$g(t)};mm(e,Ph(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function S4e(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,WV(e,Ph(t)),e.parser.tokenizer.write(t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function C4e(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))w4e(n,e);else{let r="";throw E4e.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function mm(t,e){WV(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=Di.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function WV(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function M4e(t,e){if(e.parser.tokenizer.state===Di.PLAINTEXT)return;mm(e,Ph(t));const n=e.parser.openElements.current;let r="namespaceURI"in n?n.namespaceURI:Yf.html;r===Yf.html&&t.tagName==="svg"&&(r=Yf.svg);const i=CTe({...t,children:[]},{space:r===Yf.svg?"svg":"html"}),s="attrs"in i?i.attrs:[],o={type:Kn.START_TAG,tagName:t.tagName,tagID:pm(t.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:s,location:$g(t)};e.parser.currentToken=o,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=t.tagName}function R4e(t,e){if(!e.parser.tokenizer.inForeignNode&&DTe.includes(t.tagName)||e.parser.tokenizer.state===Di.PLAINTEXT)return;mm(e,kV(t));const n={type:Kn.END_TAG,tagName:t.tagName,tagID:pm(t.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:$g(t)};e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken),n.tagName===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===Di.RCDATA||e.parser.tokenizer.state===Di.RAWTEXT||e.parser.tokenizer.state===Di.SCRIPT_DATA)&&(e.parser.tokenizer.state=Di.DATA)}function I4e(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName==="html"))}function $g(t){const e=Ph(t)||{line:void 0,column:void 0,offset:void 0},n=kV(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function P4e(t){return"children"in t?pN({...t,children:[]}):pN(t)}function L4e(t){return function(e,n){return HV(e,{...t,file:n})}}var N4e=O4e;function O4e(t){if(t)throw t}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var jV=function(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)},f3=Object.prototype.hasOwnProperty,$V=Object.prototype.toString,DN=Object.defineProperty,BN=Object.getOwnPropertyDescriptor,kN=function(e){return typeof Array.isArray=="function"?Array.isArray(e):$V.call(e)==="[object Array]"},FN=function(e){if(!e||$V.call(e)!=="[object Object]")return!1;var n=f3.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&f3.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||f3.call(e,i)},UN=function(e,n){DN&&n.name==="__proto__"?DN(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},zN=function(e,n){if(n==="__proto__")if(f3.call(e,n)){if(BN)return BN(e,n).value}else return;return e[n]},D4e=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=zN(a,n),i=zN(e,n),a!==i&&(u&&i&&(FN(i)||(s=kN(i)))?(s?(s=!1,o=r&&kN(r)?r:[]):o=r&&FN(r)?r:{},UN(a,{name:n,newValue:t(u,o,i)})):typeof i<"u"&&UN(a,{name:n,newValue:i}));return a},B4e=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype},k4e=[].slice,F4e=U4e;function U4e(t,e){var n;return r;function r(){var o=k4e.call(arguments,0),a=t.length>o.length,l;a&&o.push(i);try{l=t.apply(null,o)}catch(c){if(a&&n)throw c;return i(c)}a||(l&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(){n||(n=!0,e.apply(null,arguments))}function s(o){i(null,o)}}var XV=F4e,z4e=YV;YV.wrap=XV;var HN=[].slice;function YV(){var t=[],e={};return e.run=n,e.use=r,e;function n(){var i=-1,s=HN.call(arguments,0,-1),o=arguments[arguments.length-1];if(typeof o!="function")throw new Error("Expected function as last argument, not "+o);a.apply(null,[null].concat(s));function a(l){var c=t[++i],u=HN.call(arguments,0),f=u.slice(1),h=s.length,d=-1;if(l){o(l);return}for(;++d<h;)(f[d]===null||f[d]===void 0)&&(f[d]=s[d]);s=f,c?XV(c,a).apply(null,s):o.apply(null,[null].concat(s))}}function r(i){if(typeof i!="function")throw new Error("Expected `fn` to be a function, not "+i);return t.push(i),e}}var Vd={}.hasOwnProperty,qV=H4e;function H4e(t){return!t||typeof t!="object"?"":Vd.call(t,"position")||Vd.call(t,"type")?GN(t.position):Vd.call(t,"start")||Vd.call(t,"end")?GN(t):Vd.call(t,"line")||Vd.call(t,"column")?p4(t):""}function p4(t){return(!t||typeof t!="object")&&(t={}),VN(t.line)+":"+VN(t.column)}function GN(t){return(!t||typeof t!="object")&&(t={}),p4(t.start)+"-"+p4(t.end)}function VN(t){return t&&typeof t=="number"?t:1}var G4e=qV,V4e=VC;function KV(){}KV.prototype=Error.prototype;VC.prototype=new KV;var Ju=VC.prototype;Ju.file="";Ju.name="";Ju.reason="";Ju.message="";Ju.stack="";Ju.fatal=null;Ju.column=null;Ju.line=null;function VC(t,e,n){var r,i,s;typeof e=="string"&&(n=e,e=null),r=W4e(n),i=G4e(e)||"1:1",s={start:{line:null,column:null},end:{line:null,column:null}},e&&e.position&&(e=e.position),e&&(e.start?(s=e,e=e.start):s.start=e),t.stack&&(this.stack=t.stack,t=t.message),this.message=t,this.name=i,this.reason=t,this.line=e?e.line:null,this.column=e?e.column:null,this.location=s,this.source=r[0],this.ruleId=r[1]}function W4e(t){var e=[null,null],n;return typeof t=="string"&&(n=t.indexOf(":"),n===-1?e[1]=t:(e[0]=t.slice(0,n),e[1]=t.slice(n+1))),e}var gm={};gm.basename=j4e;gm.dirname=$4e;gm.extname=X4e;gm.join=Y4e;gm.sep="/";function j4e(t,e){var n=0,r=-1,i,s,o,a;if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');if(Xg(t),i=t.length,e===void 0||!e.length||e.length>t.length){for(;i--;)if(t.charCodeAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";for(s=-1,a=e.length-1;i--;)if(t.charCodeAt(i)===47){if(o){n=i+1;break}}else s<0&&(o=!0,s=i+1),a>-1&&(t.charCodeAt(i)===e.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=s));return n===r?r=s:r<0&&(r=t.length),t.slice(n,r)}function $4e(t){var e,n,r;if(Xg(t),!t.length)return".";for(e=-1,r=t.length;--r;)if(t.charCodeAt(r)===47){if(n){e=r;break}}else n||(n=!0);return e<0?t.charCodeAt(0)===47?"/":".":e===1&&t.charCodeAt(0)===47?"//":t.slice(0,e)}function X4e(t){var e=-1,n=0,r=-1,i=0,s,o,a;for(Xg(t),a=t.length;a--;){if(o=t.charCodeAt(a),o===47){if(s){n=a+1;break}continue}r<0&&(s=!0,r=a+1),o===46?e<0?e=a:i!==1&&(i=1):e>-1&&(i=-1)}return e<0||r<0||i===0||i===1&&e===r-1&&e===n+1?"":t.slice(e,r)}function Y4e(){for(var t=-1,e;++t<arguments.length;)Xg(arguments[t]),arguments[t]&&(e=e===void 0?arguments[t]:e+"/"+arguments[t]);return e===void 0?".":q4e(e)}function q4e(t){var e,n;return Xg(t),e=t.charCodeAt(0)===47,n=K4e(t,!e),!n.length&&!e&&(n="."),n.length&&t.charCodeAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function K4e(t,e){for(var n="",r=0,i=-1,s=0,o=-1,a,l;++o<=t.length;){if(o<t.length)a=t.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length){n="",r=0,i=o,s=0;continue}}e&&(n=n.length?n+"/..":"..",r=2)}else n.length?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Xg(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}var JV={};JV.cwd=J4e;function J4e(){return"/"}var Yl=gm,Q4e=JV,Z4e=jV,e5e=Wc,t5e={}.hasOwnProperty,RT=["history","path","basename","stem","extname","dirname"];Wc.prototype.toString=h5e;Object.defineProperty(Wc.prototype,"path",{get:n5e,set:r5e});Object.defineProperty(Wc.prototype,"dirname",{get:i5e,set:s5e});Object.defineProperty(Wc.prototype,"basename",{get:o5e,set:a5e});Object.defineProperty(Wc.prototype,"extname",{get:l5e,set:c5e});Object.defineProperty(Wc.prototype,"stem",{get:u5e,set:f5e});function Wc(t){var e,n;if(!t)t={};else if(typeof t=="string"||Z4e(t))t={contents:t};else if("message"in t&&"messages"in t)return t;if(!(this instanceof Wc))return new Wc(t);for(this.data={},this.messages=[],this.history=[],this.cwd=Q4e.cwd(),n=-1;++n<RT.length;)e=RT[n],t5e.call(t,e)&&(this[e]=t[e]);for(e in t)RT.indexOf(e)<0&&(this[e]=t[e])}function n5e(){return this.history[this.history.length-1]}function r5e(t){jC(t,"path"),this.path!==t&&this.history.push(t)}function i5e(){return typeof this.path=="string"?Yl.dirname(this.path):void 0}function s5e(t){QV(this.path,"dirname"),this.path=Yl.join(t||"",this.basename)}function o5e(){return typeof this.path=="string"?Yl.basename(this.path):void 0}function a5e(t){jC(t,"basename"),WC(t,"basename"),this.path=Yl.join(this.dirname||"",t)}function l5e(){return typeof this.path=="string"?Yl.extname(this.path):void 0}function c5e(t){if(WC(t,"extname"),QV(this.path,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.indexOf(".",1)>-1)throw new Error("`extname` cannot contain multiple dots")}this.path=Yl.join(this.dirname,this.stem+(t||""))}function u5e(){return typeof this.path=="string"?Yl.basename(this.path,this.extname):void 0}function f5e(t){jC(t,"stem"),WC(t,"stem"),this.path=Yl.join(this.dirname||"",t+(this.extname||""))}function h5e(t){return(this.contents||"").toString(t)}function WC(t,e){if(t&&t.indexOf(Yl.sep)>-1)throw new Error("`"+e+"` cannot be a path: did not expect `"+Yl.sep+"`")}function jC(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function QV(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}var d5e=V4e,D_=e5e,p5e=D_;D_.prototype.message=m5e;D_.prototype.info=v5e;D_.prototype.fail=g5e;function m5e(t,e,n){var r=new d5e(t,e,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}function g5e(){var t=this.message.apply(this,arguments);throw t.fatal=!0,t}function v5e(){var t=this.message.apply(this,arguments);return t.fatal=null,t}var y5e=p5e,WN=N4e,x5e=jV,Lx=D4e,jN=B4e,ZV=z4e,W0=y5e,E5e=eW().freeze(),_5e=[].slice,b5e={}.hasOwnProperty,A5e=ZV().use(T5e).use(w5e).use(S5e);function T5e(t,e){e.tree=t.parse(e.file)}function w5e(t,e,n){t.run(e.tree,e.file,r);function r(i,s,o){i?n(i):(e.tree=s,e.file=o,n())}}function S5e(t,e){var n=t.stringify(e.tree,e.file);n==null||(typeof n=="string"||x5e(n)?("value"in e.file&&(e.file.value=n),e.file.contents=n):e.file.result=n)}function eW(){var t=[],e=ZV(),n={},r=-1,i;return s.data=a,s.freeze=o,s.attachers=t,s.use=l,s.parse=u,s.stringify=d,s.run=f,s.runSync=h,s.process=p,s.processSync=m,s;function s(){for(var g=eW(),v=-1;++v<t.length;)g.use.apply(null,t[v]);return g.data(Lx(!0,{},n)),g}function o(){var g,v;if(i)return s;for(;++r<t.length;)g=t[r],g[1]!==!1&&(g[1]===!0&&(g[1]=void 0),v=g[0].apply(s,g.slice(1)),typeof v=="function"&&e.use(v));return i=!0,r=1/0,s}function a(g,v){return typeof g=="string"?arguments.length===2?(LT("data",i),n[g]=v,s):b5e.call(n,g)&&n[g]||null:g?(LT("data",i),n=g,s):n}function l(g){var v;if(LT("use",i),g!=null)if(typeof g=="function")T.apply(null,arguments);else if(typeof g=="object")"length"in g?A(g):x(g);else throw new Error("Expected usable value, not `"+g+"`");return v&&(n.settings=Lx(n.settings||{},v)),s;function x(w){A(w.plugins),w.settings&&(v=Lx(v||{},w.settings))}function y(w){if(typeof w=="function")T(w);else if(typeof w=="object")"length"in w?T.apply(null,w):x(w);else throw new Error("Expected usable value, not `"+w+"`")}function A(w){var M=-1;if(w!=null)if(typeof w=="object"&&"length"in w)for(;++M<w.length;)y(w[M]);else throw new Error("Expected a list of plugins, not `"+w+"`")}function T(w,M){var C=c(w);C?(jN(C[1])&&jN(M)&&(M=Lx(!0,C[1],M)),C[1]=M):t.push(_5e.call(arguments))}}function c(g){for(var v=-1;++v<t.length;)if(t[v][0]===g)return t[v]}function u(g){var v=W0(g),x;return o(),x=s.Parser,IT("parse",x),$N(x,"parse")?new x(String(v),v).parse():x(String(v),v)}function f(g,v,x){if(XN(g),o(),!x&&typeof v=="function"&&(x=v,v=null),!x)return new Promise(y);y(null,x);function y(A,T){e.run(g,W0(v),w);function w(M,C,S){C=C||g,M?T(M):A?A(C):x(null,C,S)}}}function h(g,v){var x,y;return f(g,v,A),YN("runSync","run",y),x;function A(T,w){y=!0,x=w,WN(T)}}function d(g,v){var x=W0(v),y;return o(),y=s.Compiler,PT("stringify",y),XN(g),$N(y,"compile")?new y(g,x).compile():y(g,x)}function p(g,v){if(o(),IT("process",s.Parser),PT("process",s.Compiler),!v)return new Promise(x);x(null,v);function x(y,A){var T=W0(g);A5e.run(s,{file:T},w);function w(M){M?A(M):y?y(T):v(null,T)}}}function m(g){var v,x;return o(),IT("processSync",s.Parser),PT("processSync",s.Compiler),v=W0(g),p(v,y),YN("processSync","process",x),v;function y(A){x=!0,WN(A)}}}function $N(t,e){return typeof t=="function"&&t.prototype&&(C5e(t.prototype)||e in t.prototype)}function C5e(t){var e;for(e in t)return!0;return!1}function IT(t,e){if(typeof e!="function")throw new Error("Cannot `"+t+"` without `Parser`")}function PT(t,e){if(typeof e!="function")throw new Error("Cannot `"+t+"` without `Compiler`")}function LT(t,e){if(e)throw new Error("Cannot invoke `"+t+"` on a frozen processor.\nCreate a new processor first, by invoking it: use `processor()` instead of `processor`.")}function XN(t){if(!t||typeof t.type!="string")throw new Error("Expected node, got `"+t+"`")}function YN(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}const M5e=go(E5e);var R5e=tW;function tW(t){return t&&(t.value||t.alt||t.title||"children"in t&&qN(t.children)||"length"in t&&qN(t))||""}function qN(t){for(var e=[],n=-1;++n<t.length;)e[n]=tW(t[n]);return e.join("")}var I5e=Object.assign,Yg=I5e,P5e={}.hasOwnProperty,nW=P5e;function L5e(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}var $C=L5e,N5e=String.fromCharCode,B_=N5e,O5e=B_;function D5e(t,e){var n=parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":O5e(n)}var B5e=D5e,XC={};function k5e(t){return t<-2}var is=k5e;function F5e(t){return t===-2||t===-1||t===32}var qc=F5e,KN=qc;function U5e(t,e,n,r){var i=r?r-1:1/0,s=0;return o;function o(l){return KN(l)?(t.enter(n),a(l)):e(l)}function a(l){return KN(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}var Rs=U5e;Object.defineProperty(XC,"__esModule",{value:!0});var z5e=is,H5e=Rs,G5e=V5e;function V5e(t){var e=t.attempt(this.parser.constructs.contentInitial,r,i),n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),H5e(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){var l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return z5e(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}XC.tokenize=G5e;var YC={},W5e=is,j5e=Rs,$5e={tokenize:X5e,partial:!0};function X5e(t,e,n){return j5e(t,r,"linePrefix");function r(i){return i===null||W5e(i)?e(i):n(i)}}var k_=$5e;Object.defineProperty(YC,"__esModule",{value:!0});var Y5e=is,rW=Rs,q5e=k_,K5e=Q5e,NT={tokenize:Z5e},J5e={tokenize:eCe};function Q5e(t){var e=this,n=[],r=0,i={tokenize:v,partial:!0},s,o,a;return l;function l(x){return r<n.length?(e.containerState=n[r][1],t.attempt(n[r][0].continuation,c,u)(x)):u(x)}function c(x){return r++,l(x)}function u(x){return s&&s.flowContinue?h(x):(e.interrupt=o&&o.currentConstruct&&o.currentConstruct.interruptible,e.containerState={},t.attempt(NT,f,h)(x))}function f(x){return n.push([e.currentConstruct,e.containerState]),e.containerState=void 0,u(x)}function h(x){if(x===null){g(0,!0),t.consume(x);return}return o=o||e.parser.flow(e.now()),t.enter("chunkFlow",{contentType:"flow",previous:a,_tokenizer:o}),d(x)}function d(x){return x===null?(m(t.exit("chunkFlow")),h(x)):Y5e(x)?(t.consume(x),m(t.exit("chunkFlow")),t.check(i,p)):(t.consume(x),d)}function p(x){return g(s.continued,s&&s.flowEnd),r=0,l(x)}function m(x){a&&(a.next=x),a=x,o.lazy=s&&s.lazy,o.defineSkip(x.start),o.write(e.sliceStream(x))}function g(x,y){var A=n.length;for(o&&y&&(o.write([null]),a=o=void 0);A-- >x;)e.containerState=n[A][1],n[A][0].exit.call(e,t);n.length=x}function v(x,y){var A=0;return s={},T;function T(O){return A<n.length?(e.containerState=n[A][1],x.attempt(n[A][0].continuation,w,M)(O)):o.currentConstruct&&o.currentConstruct.concrete?(s.flowContinue=!0,R(O)):(e.interrupt=o.currentConstruct&&o.currentConstruct.interruptible,e.containerState={},x.attempt(NT,S,R)(O))}function w(O){return A++,e.containerState._closeFlow?S(O):T(O)}function M(O){return o.currentConstruct&&o.currentConstruct.lazy?(e.containerState={},x.attempt(NT,S,x.attempt(J5e,S,x.check(q5e,S,C)))(O)):S(O)}function C(O){return A=n.length,s.lazy=!0,s.flowContinue=!0,R(O)}function S(O){return s.flowEnd=!0,R(O)}function R(O){return s.continued=A,e.interrupt=e.containerState=void 0,y(O)}}}function Z5e(t,e,n){return rW(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}function eCe(t,e,n){return rW(t,t.lazy(this.parser.constructs.flow,e,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}YC.tokenize=K5e;var qC={};function tCe(t){for(var e=-1,n=0;++e<t.length;)n+=typeof t[e]=="string"?t[e].length:1;return n}var iW=tCe,nCe=iW;function rCe(t,e){var n=t[t.length-1];return!n||n[1].type!==e?0:nCe(n[2].sliceStream(n[1]))}var F_=rCe,iCe=[].splice,sCe=iCe,OT=sCe;function oCe(t,e,n,r){var i=t.length,s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),OT.apply(t,o);else for(n&&OT.apply(t,[e,n]);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),OT.apply(t,o),s+=1e4,e+=1e4}var Qu=oCe,aCe=Yg;function lCe(t){return aCe({},t)}var vm=lCe,cCe=Yg,sW=Qu,uCe=vm;function fCe(t){for(var e={},n=-1,r,i,s,o,a,l,c;++n<t.length;){for(;n in e;)n=e[n];if(r=t[n],n&&r[1].type==="chunkFlow"&&t[n-1][1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1].isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(cCe(e,hCe(t,n)),n=e[n],c=!0);else if(r[1]._container||r[1]._movePreviousLineEndings){for(s=n,i=void 0;s--&&(o=t[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(t[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=uCe(t[i][1].start),a=t.slice(i,n),a.unshift(r),sW(t,i,n-i+1,a))}}return!c}function hCe(t,e){for(var n=t[e][1],r=t[e][2],i=e-1,s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,l=[],c={},u,f,h,d,p,m;n;){for(;t[++i][1]!==n;);s.push(i),n._tokenizer||(u=r.sliceStream(n),n.next||u.push(null),f&&o.defineSkip(n.start),n.isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),n.isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=n,n=n.next}for(n=f,h=a.length;h--;)a[h][0]==="enter"?d=!0:d&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(g(a.slice(h+1,p)),n._tokenizer=n.next=void 0,n=n.previous,p=h+1);for(o.events=n._tokenizer=n.next=void 0,g(a.slice(0,p)),h=-1,m=0;++h<l.length;)c[m+l[h][0]]=m+l[h][1],m+=l[h][1]-l[h][0]-1;return c;function g(v){var x=s.pop();l.unshift([x,x+v.length-1]),sW(t,x,2,v)}}var oW=fCe,aW=is,dCe=F_,pCe=oW,mCe=Rs,gCe={tokenize:xCe,resolve:yCe,interruptible:!0,lazy:!0},vCe={tokenize:ECe,partial:!0};function yCe(t){return pCe(t),t}function xCe(t,e){var n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):aW(a)?t.check(vCe,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n=n.next=t.enter("chunkContent",{contentType:"content",previous:n}),i}}function ECe(t,e,n){var r=this;return i;function i(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),mCe(t,s,"linePrefix")}function s(o){return o===null||aW(o)?n(o):r.parser.constructs.disable.null.indexOf("codeIndented")>-1||dCe(r.events,"linePrefix")<4?t.interrupt(r.parser.constructs.flow,n,e)(o):e(o)}}var _Ce=gCe;Object.defineProperty(qC,"__esModule",{value:!0});var bCe=_Ce,ACe=Rs,TCe=k_,wCe=SCe;function SCe(t){var e=this,n=t.attempt(TCe,r,t.attempt(this.parser.constructs.flowInitial,i,ACe(t,t.attempt(this.parser.constructs.flow,i,t.attempt(bCe,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}qC.tokenize=wCe;var ym={};Object.defineProperty(ym,"__esModule",{value:!0});var CCe=Yg,JN=vm,MCe=lW("text"),RCe=lW("string"),ICe={resolveAll:cW()};function lW(t){return{tokenize:e,resolveAll:cW(t==="text"?PCe:void 0)};function e(n){var r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){var f=i[u],h=-1;if(u===null)return!0;if(f){for(;++h<f.length;)if(!f[h].previous||f[h].previous.call(r,r.previous))return!0}}}}function cW(t){return e;function e(n,r){for(var i=-1,s;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function PCe(t,e){for(var n=-1,r,i,s,o,a,l,c,u;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){for(i=t[n-1][1],r=e.sliceStream(i),o=r.length,a=-1,l=0,c=void 0;o--;)if(s=r[o],typeof s=="string"){for(a=s.length;s.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(s===-2)c=!0,l++;else if(s!==-1){o++;break}l&&(u={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{line:i.end.line,column:i.end.column-l,offset:i.end.offset-l,_index:i.start._index+o,_bufferIndex:o?a:i.start._bufferIndex+a},end:JN(i.end)},i.end=JN(u.start),i.start.offset===i.end.offset?CCe(i,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)),n++}return t}ym.resolver=ICe;ym.string=RCe;ym.text=MCe;function LCe(t){return t==null?[]:"length"in t?t:[t]}var KC=LCe,QN=nW,NCe=Qu,OCe=KC;function DCe(t){for(var e={},n=-1;++n<t.length;)BCe(e,t[n]);return e}function BCe(t,e){var n,r,i,s;for(n in e){r=QN.call(t,n)?t[n]:t[n]={},i=e[n];for(s in i)r[s]=kCe(OCe(i[s]),QN.call(r,s)?r[s]:[])}}function kCe(t,e){for(var n=-1,r=[];++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);return NCe(e,0,0,r),e}var FCe=DCe,UCe=Qu;function zCe(t,e){return t.length?(UCe(t,t.length,0,e),t):e}var JC=zCe;function HCe(t,e,n){for(var r=[],i=-1,s;++i<t.length;)s=t[i].resolveAll,s&&r.indexOf(s)<0&&(e=s(e,n),r.push(s));return e}var QC=HCe,GCe=B_;function VCe(t){for(var e=-1,n=[],r,i,s;++e<t.length;){if(r=t[e],typeof r=="string")i=r;else if(r===-5)i="\r";else if(r===-4)i=`
`;else if(r===-3)i=`\r
`;else if(r===-2)i="	";else if(r===-1){if(s)continue;i=" "}else i=GCe(r);s=r===-2,n.push(i)}return n.join("")}var WCe=VCe;function jCe(t,e){var n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex,o;return n===i?o=[t[n].slice(r,s)]:(o=t.slice(n,i),r>-1&&(o[0]=o[0].slice(r)),s>0&&o.push(t[i].slice(0,s))),o}var $Ce=jCe,XCe=Yg,YCe=is,qCe=JC,KCe=Qu,DT=KC,JCe=QC,QCe=WCe,ZN=vm,ZCe=$Ce;function eMe(t,e,n){var r=n?ZN(n):{line:1,column:1,offset:0},i={},s=[],o=[],a=[],l={consume:x,enter:y,exit:A,attempt:M(T),check:M(w),interrupt:M(w,{interrupt:!0}),lazy:M(w,{lazy:!0})},c={previous:null,events:[],parser:t,sliceStream:d,sliceSerialize:h,now:p,defineSkip:m,write:f},u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),r._index=0,r._bufferIndex=-1,c;function f(O){return o=qCe(o,O),g(),o[o.length-1]!==null?[]:(C(e,0),c.events=JCe(s,c.events,c),c.events)}function h(O){return QCe(d(O))}function d(O){return ZCe(o,O)}function p(){return ZN(r)}function m(O){i[O.line]=O.column,R()}function g(){for(var O,L;r._index<o.length;)if(L=o[r._index],typeof L=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<L.length;)v(L.charCodeAt(r._bufferIndex));else v(L)}function v(O){u=u(O)}function x(O){YCe(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,R()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=O}function y(O,L){var B=L||{};return B.type=O,B.start=p(),c.events.push(["enter",B,c]),a.push(B),B}function A(O){var L=a.pop();return L.end=p(),c.events.push(["exit",L,c]),L}function T(O,L){C(O,L.from)}function w(O,L){L.restore()}function M(O,L){return B;function B(N,$,U){var Q,Y,ee,ne;return N.tokenize||"length"in N?se(DT(N)):P;function P(W){return W in N||null in N?se(N.null?DT(N[W]).concat(DT(N.null)):N[W])(W):U(W)}function se(W){return Q=W,Y=0,re(W[Y])}function re(W){return K;function K(ge){return ne=S(),ee=W,W.partial||(c.currentConstruct=W),W.name&&c.parser.constructs.disable.null.indexOf(W.name)>-1?X():W.tokenize.call(L?XCe({},c,L):c,l,Z,X)(ge)}}function Z(W){return O(ee,ne),$}function X(W){return ne.restore(),++Y<Q.length?re(Q[Y]):U}}}function C(O,L){O.resolveAll&&s.indexOf(O)<0&&s.push(O),O.resolve&&KCe(c.events,L,c.events.length-L,O.resolve(c.events.slice(L),c)),O.resolveTo&&(c.events=O.resolveTo(c.events,c))}function S(){var O=p(),L=c.previous,B=c.currentConstruct,N=c.events.length,$=Array.from(a);return{restore:U,from:N};function U(){r=O,c.previous=L,c.currentConstruct=B,c.events.length=N,a=$,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}var tMe=eMe,Ql={};function nMe(t){return t<0||t===32}var Zu=nMe,rMe=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,iMe=rMe,sMe=B_;function oMe(t){return e;function e(n){return t.test(sMe(n))}}var ef=oMe,aMe=iMe,lMe=ef,cMe=lMe(aMe),uMe=cMe,fMe=ef,hMe=fMe(/\s/),dMe=hMe,pMe=Zu,mMe=uMe,gMe=dMe;function vMe(t){if(t===null||pMe(t)||gMe(t))return 1;if(mMe(t))return 2}var yMe=vMe;function xMe(t,e){return t.column+=e,t.offset+=e,t._bufferIndex+=e,t}var EMe=xMe,j0=JC,_Me=Qu,eO=yMe,tO=EMe,bMe=QC,Ll=vm,AMe={name:"attention",tokenize:wMe,resolveAll:TMe};function TMe(t,e){for(var n=-1,r,i,s,o,a,l,c,u;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1,o={type:l>1?"strongSequence":"emphasisSequence",start:tO(Ll(t[r][1].end),-l),end:Ll(t[r][1].end)},a={type:l>1?"strongSequence":"emphasisSequence",start:Ll(t[n][1].start),end:tO(Ll(t[n][1].start),l)},s={type:l>1?"strongText":"emphasisText",start:Ll(t[r][1].end),end:Ll(t[n][1].start)},i={type:l>1?"strong":"emphasis",start:Ll(o.start),end:Ll(a.end)},t[r][1].end=Ll(o.start),t[n][1].start=Ll(a.end),c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=j0(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=j0(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=j0(c,bMe(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=j0(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=j0(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,_Me(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function wMe(t,e){var n=eO(this.previous),r;return i;function i(o){return t.enter("attentionSequence"),r=o,s(o)}function s(o){var a,l,c,u;return o===r?(t.consume(o),s):(a=t.exit("attentionSequence"),l=eO(o),c=!l||l===2&&n,u=!n||n===2&&l,a._open=r===42?c:c&&(n||!u),a._close=r===42?u:u&&(l||!c),e(o))}}var SMe=AMe,CMe=ef,MMe=CMe(/[A-Za-z]/),ZC=MMe,RMe=ef,IMe=RMe(/[\dA-Za-z]/),U_=IMe,PMe=ef,LMe=PMe(/[#-'*+\--9=?A-Z^-~]/),NMe=LMe;function OMe(t){return t<32||t===127}var uW=OMe,DMe=ZC,Nx=U_,nO=NMe,BMe=uW,kMe={name:"autolink",tokenize:FMe};function FMe(t,e,n){var r=1;return i;function i(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(p){return DMe(p)?(t.consume(p),o):nO(p)?c(p):n(p)}function o(p){return p===43||p===45||p===46||Nx(p)?a(p):c(p)}function a(p){return p===58?(t.consume(p),l):(p===43||p===45||p===46||Nx(p))&&r++<32?(t.consume(p),a):c(p)}function l(p){return p===62?(t.exit("autolinkProtocol"),d(p)):p===32||p===60||BMe(p)?n(p):(t.consume(p),l)}function c(p){return p===64?(t.consume(p),r=0,u):nO(p)?(t.consume(p),c):n(p)}function u(p){return Nx(p)?f(p):n(p)}function f(p){return p===46?(t.consume(p),r=0,u):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",d(p)):h(p)}function h(p){return(p===45||Nx(p))&&r++<63?(t.consume(p),p===45?h:f):n(p)}function d(p){return t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e}}var UMe=kMe,zMe=qc,HMe=Rs,fW={name:"blockQuote",tokenize:GMe,continuation:{tokenize:VMe},exit:WMe};function GMe(t,e,n){var r=this;return i;function i(o){return o===62?(r.containerState.open||(t.enter("blockQuote",{_container:!0}),r.containerState.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s):n(o)}function s(o){return zMe(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function VMe(t,e,n){return HMe(t,t.attempt(fW,e,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}function WMe(t){t.exit("blockQuote")}var jMe=fW,$Me=ef,XMe=$Me(/[!-/:-@[-`{-~]/),YMe=XMe,qMe=YMe,KMe={name:"characterEscape",tokenize:JMe};function JMe(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return qMe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}var QMe=KMe,Ox,ZMe=59,hW=e6e;function e6e(t){var e="&"+t+";",n;return Ox=Ox||document.createElement("i"),Ox.innerHTML=e,n=Ox.textContent,n.charCodeAt(n.length-1)===ZMe&&t!=="semi"||n===e?!1:n}var t6e=ef,n6e=t6e(/\d/),dW=n6e,r6e=ef,i6e=r6e(/[\dA-Fa-f]/),s6e=i6e,o6e=hW,rO=U_,a6e=dW,l6e=s6e;function c6e(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var u6e=c6e(o6e),f6e={name:"characterReference",tokenize:h6e};function h6e(t,e,n){var r=this,i=0,s,o;return a;function a(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),l}function l(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=rO,u(f))}function c(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=l6e,u):(t.enter("characterReferenceValue"),s=7,o=a6e,u(f))}function u(f){var h;return f===59&&i?(h=t.exit("characterReferenceValue"),o===rO&&!u6e.default(r.sliceSerialize(h))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)):o(f)&&i++<s?(t.consume(f),u):n(f)}}var d6e=f6e,Wd=is,p6e=Zu,m6e=F_,$0=Rs,g6e={name:"codeFenced",tokenize:v6e,concrete:!0};function v6e(t,e,n){var r=this,i={tokenize:x,partial:!0},s=m6e(this.events,"linePrefix"),o=0,a;return l;function l(y){return t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),a=y,c(y)}function c(y){return y===a?(t.consume(y),o++,c):(t.exit("codeFencedFenceSequence"),o<3?n(y):$0(t,u,"whitespace")(y))}function u(y){return y===null||Wd(y)?p(y):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(y))}function f(y){return y===null||p6e(y)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),$0(t,h,"whitespace")(y)):y===96&&y===a?n(y):(t.consume(y),f)}function h(y){return y===null||Wd(y)?p(y):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),d(y))}function d(y){return y===null||Wd(y)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(y)):y===96&&y===a?n(y):(t.consume(y),d)}function p(y){return t.exit("codeFencedFence"),r.interrupt?e(y):m(y)}function m(y){return y===null?v(y):Wd(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),t.attempt(i,v,s?$0(t,m,"linePrefix",s+1):m)):(t.enter("codeFlowValue"),g(y))}function g(y){return y===null||Wd(y)?(t.exit("codeFlowValue"),m(y)):(t.consume(y),g)}function v(y){return t.exit("codeFenced"),e(y)}function x(y,A,T){var w=0;return $0(y,M,"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4);function M(R){return y.enter("codeFencedFence"),y.enter("codeFencedFenceSequence"),C(R)}function C(R){return R===a?(y.consume(R),w++,C):w<o?T(R):(y.exit("codeFencedFenceSequence"),$0(y,S,"whitespace")(R))}function S(R){return R===null||Wd(R)?(y.exit("codeFencedFence"),A(R)):T(R)}}}var y6e=g6e,m4=is,iO=Qu,x6e=F_,sO=Rs,E6e={name:"codeIndented",tokenize:b6e,resolve:_6e},oO={tokenize:A6e,partial:!0};function _6e(t,e){var n={type:"codeIndented",start:t[0][1].start,end:t[t.length-1][1].end};return iO(t,0,0,[["enter",n,e]]),iO(t,t.length,0,[["exit",n,e]]),t}function b6e(t,e,n){return t.attempt(oO,r,n);function r(s){return s===null?e(s):m4(s)?t.attempt(oO,r,e)(s):(t.enter("codeFlowValue"),i(s))}function i(s){return s===null||m4(s)?(t.exit("codeFlowValue"),r(s)):(t.consume(s),i)}}function A6e(t,e,n){var r=this;return sO(t,i,"linePrefix",4+1);function i(s){return m4(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),sO(t,i,"linePrefix",4+1)):x6e(r.events,"linePrefix")<4?n(s):e(s)}}var T6e=E6e,aO=is,w6e={name:"codeText",tokenize:M6e,resolve:S6e,previous:C6e};function S6e(t){var e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[e][1].type=t[n][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function C6e(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function M6e(t,e,n){var r=0,i,s;return o;function o(f){return t.enter("codeText"),t.enter("codeTextSequence"),a(f)}function a(f){return f===96?(t.consume(f),r++,a):(t.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===96?(s=t.enter("codeTextSequence"),i=0,u(f)):f===32?(t.enter("space"),t.consume(f),t.exit("space"),l):aO(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||aO(f)?(t.exit("codeTextData"),l(f)):(t.consume(f),c)}function u(f){return f===96?(t.consume(f),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(s.type="codeTextData",c(f))}}var R6e=w6e,lO=uW,I6e=Zu,P6e=is;function L6e(t,e,n,r,i,s,o,a,l){var c=l||1/0,u=0;return f;function f(v){return v===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(v),t.exit(s),h):lO(v)||v===41?n(v):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),m(v))}function h(v){return v===62?(t.enter(s),t.consume(v),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),d(v))}function d(v){return v===62?(t.exit("chunkString"),t.exit(a),h(v)):v===null||v===60||P6e(v)?n(v):(t.consume(v),v===92?p:d)}function p(v){return v===60||v===62||v===92?(t.consume(v),d):d(v)}function m(v){return v===40?++u>c?n(v):(t.consume(v),m):v===41?u--?(t.consume(v),m):(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(v)):v===null||I6e(v)?u?n(v):(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(v)):lO(v)?n(v):(t.consume(v),v===92?g:m)}function g(v){return v===40||v===41||v===92?(t.consume(v),m):m(v)}}var pW=L6e,cO=is,N6e=qc;function O6e(t,e,n,r,i,s){var o=this,a=0,l;return c;function c(d){return t.enter(r),t.enter(i),t.consume(d),t.exit(i),t.enter(s),u}function u(d){return d===null||d===91||d===93&&!l||d===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs||a>999?n(d):d===93?(t.exit(s),t.enter(i),t.consume(d),t.exit(i),t.exit(r),e):cO(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),f(d))}function f(d){return d===null||d===91||d===93||cO(d)||a++>999?(t.exit("chunkString"),u(d)):(t.consume(d),l=l||!N6e(d),d===92?h:f)}function h(d){return d===91||d===92||d===93?(t.consume(d),a++,f):f(d)}}var mW=O6e,D6e=is,B6e=qc,k6e=Rs;function F6e(t,e){var n;return r;function r(i){return D6e(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):B6e(i)?k6e(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}var gW=F6e,uO=is,U6e=Rs;function z6e(t,e,n,r,i,s){var o;return a;function a(h){return t.enter(r),t.enter(i),t.consume(h),t.exit(i),o=h===40?41:h,l}function l(h){return h===o?(t.enter(i),t.consume(h),t.exit(i),t.exit(r),e):(t.enter(s),c(h))}function c(h){return h===o?(t.exit(s),l(o)):h===null?n(h):uO(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),U6e(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===o||h===null||uO(h)?(t.exit("chunkString"),c(h)):(t.consume(h),h===92?f:u)}function f(h){return h===o||h===92?(t.consume(h),u):u(h)}}var vW=z6e,yW=is,H6e=Zu,G6e=$C,V6e=pW,W6e=mW,g4=Rs,xW=gW,j6e=vW,$6e={name:"definition",tokenize:Y6e},X6e={tokenize:q6e,partial:!0};function Y6e(t,e,n){var r=this,i;return s;function s(l){return t.enter("definition"),W6e.call(r,t,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(l)}function o(l){return i=G6e(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),l===58?(t.enter("definitionMarker"),t.consume(l),t.exit("definitionMarker"),xW(t,V6e(t,t.attempt(X6e,g4(t,a,"whitespace"),g4(t,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(l)}function a(l){return l===null||yW(l)?(t.exit("definition"),r.parser.defined.indexOf(i)<0&&r.parser.defined.push(i),e(l)):n(l)}}function q6e(t,e,n){return r;function r(o){return H6e(o)?xW(t,i)(o):n(o)}function i(o){return o===34||o===39||o===40?j6e(t,g4(t,s,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o):n(o)}function s(o){return o===null||yW(o)?e(o):n(o)}}var K6e=$6e,J6e=is,Q6e={name:"hardBreakEscape",tokenize:Z6e};function Z6e(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.enter("escapeMarker"),t.consume(s),i}function i(s){return J6e(s)?(t.exit("escapeMarker"),t.exit("hardBreakEscape"),e(s)):n(s)}}var e9e=Q6e,t9e=is,fO=Zu,n9e=qc,r9e=Qu,i9e=Rs,s9e={name:"headingAtx",tokenize:a9e,resolve:o9e};function o9e(t,e){var n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},r9e(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function a9e(t,e,n){var r=this,i=0;return s;function s(u){return t.enter("atxHeading"),t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&i++<6?(t.consume(u),o):u===null||fO(u)?(t.exit("atxHeadingSequence"),r.interrupt?e(u):a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||t9e(u)?(t.exit("atxHeading"),e(u)):n9e(u)?i9e(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||fO(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}var l9e=s9e,c9e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],u9e=c9e,f9e=["pre","script","style","textarea"],h9e=f9e,X0=ZC,hO=U_,jd=is,dO=Zu,$d=qc,Dx=B_,d9e=u9e,pO=h9e,p9e=k_,m9e={name:"htmlFlow",tokenize:y9e,resolveTo:v9e,concrete:!0},g9e={tokenize:x9e,partial:!0};function v9e(t){for(var e=t.length;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function y9e(t,e,n){var r=this,i,s,o,a,l;return c;function c(P){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(P),u}function u(P){return P===33?(t.consume(P),f):P===47?(t.consume(P),p):P===63?(t.consume(P),i=3,r.interrupt?e:Y):X0(P)?(t.consume(P),o=Dx(P),s=!0,m):n(P)}function f(P){return P===45?(t.consume(P),i=2,h):P===91?(t.consume(P),i=5,o="CDATA[",a=0,d):X0(P)?(t.consume(P),i=4,r.interrupt?e:Y):n(P)}function h(P){return P===45?(t.consume(P),r.interrupt?e:Y):n(P)}function d(P){return P===o.charCodeAt(a++)?(t.consume(P),a===o.length?r.interrupt?e:O:d):n(P)}function p(P){return X0(P)?(t.consume(P),o=Dx(P),m):n(P)}function m(P){return P===null||P===47||P===62||dO(P)?P!==47&&s&&pO.indexOf(o.toLowerCase())>-1?(i=1,r.interrupt?e(P):O(P)):d9e.indexOf(o.toLowerCase())>-1?(i=6,P===47?(t.consume(P),g):r.interrupt?e(P):O(P)):(i=7,r.interrupt?n(P):s?x(P):v(P)):P===45||hO(P)?(t.consume(P),o+=Dx(P),m):n(P)}function g(P){return P===62?(t.consume(P),r.interrupt?e:O):n(P)}function v(P){return $d(P)?(t.consume(P),v):S(P)}function x(P){return P===47?(t.consume(P),S):P===58||P===95||X0(P)?(t.consume(P),y):$d(P)?(t.consume(P),x):S(P)}function y(P){return P===45||P===46||P===58||P===95||hO(P)?(t.consume(P),y):A(P)}function A(P){return P===61?(t.consume(P),T):$d(P)?(t.consume(P),A):x(P)}function T(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(t.consume(P),l=P,w):$d(P)?(t.consume(P),T):(l=void 0,M(P))}function w(P){return P===l?(t.consume(P),C):P===null||jd(P)?n(P):(t.consume(P),w)}function M(P){return P===null||P===34||P===39||P===60||P===61||P===62||P===96||dO(P)?A(P):(t.consume(P),M)}function C(P){return P===47||P===62||$d(P)?x(P):n(P)}function S(P){return P===62?(t.consume(P),R):n(P)}function R(P){return $d(P)?(t.consume(P),R):P===null||jd(P)?O(P):n(P)}function O(P){return P===45&&i===2?(t.consume(P),N):P===60&&i===1?(t.consume(P),$):P===62&&i===4?(t.consume(P),ee):P===63&&i===3?(t.consume(P),Y):P===93&&i===5?(t.consume(P),Q):jd(P)&&(i===6||i===7)?t.check(g9e,ee,L)(P):P===null||jd(P)?L(P):(t.consume(P),O)}function L(P){return t.exit("htmlFlowData"),B(P)}function B(P){return P===null?ne(P):jd(P)?(t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),B):(t.enter("htmlFlowData"),O(P))}function N(P){return P===45?(t.consume(P),Y):O(P)}function $(P){return P===47?(t.consume(P),o="",U):O(P)}function U(P){return P===62&&pO.indexOf(o.toLowerCase())>-1?(t.consume(P),ee):X0(P)&&o.length<8?(t.consume(P),o+=Dx(P),U):O(P)}function Q(P){return P===93?(t.consume(P),Y):O(P)}function Y(P){return P===62?(t.consume(P),ee):O(P)}function ee(P){return P===null||jd(P)?(t.exit("htmlFlowData"),ne(P)):(t.consume(P),ee)}function ne(P){return t.exit("htmlFlow"),e(P)}}function x9e(t,e,n){return r;function r(i){return t.exit("htmlFlowData"),t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),t.attempt(p9e,e,n)}}var E9e=m9e,Bx=ZC,BT=U_,vc=is,kT=Zu,kx=qc,_9e=Rs,b9e={name:"htmlText",tokenize:A9e};function A9e(t,e,n){var r=this,i,s,o,a;return l;function l(P){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(P),c}function c(P){return P===33?(t.consume(P),u):P===47?(t.consume(P),M):P===63?(t.consume(P),T):Bx(P)?(t.consume(P),R):n(P)}function u(P){return P===45?(t.consume(P),f):P===91?(t.consume(P),s="CDATA[",o=0,g):Bx(P)?(t.consume(P),A):n(P)}function f(P){return P===45?(t.consume(P),h):n(P)}function h(P){return P===null||P===62?n(P):P===45?(t.consume(P),d):p(P)}function d(P){return P===null||P===62?n(P):p(P)}function p(P){return P===null?n(P):P===45?(t.consume(P),m):vc(P)?(a=p,Y(P)):(t.consume(P),p)}function m(P){return P===45?(t.consume(P),ne):p(P)}function g(P){return P===s.charCodeAt(o++)?(t.consume(P),o===s.length?v:g):n(P)}function v(P){return P===null?n(P):P===93?(t.consume(P),x):vc(P)?(a=v,Y(P)):(t.consume(P),v)}function x(P){return P===93?(t.consume(P),y):v(P)}function y(P){return P===62?ne(P):P===93?(t.consume(P),y):v(P)}function A(P){return P===null||P===62?ne(P):vc(P)?(a=A,Y(P)):(t.consume(P),A)}function T(P){return P===null?n(P):P===63?(t.consume(P),w):vc(P)?(a=T,Y(P)):(t.consume(P),T)}function w(P){return P===62?ne(P):T(P)}function M(P){return Bx(P)?(t.consume(P),C):n(P)}function C(P){return P===45||BT(P)?(t.consume(P),C):S(P)}function S(P){return vc(P)?(a=S,Y(P)):kx(P)?(t.consume(P),S):ne(P)}function R(P){return P===45||BT(P)?(t.consume(P),R):P===47||P===62||kT(P)?O(P):n(P)}function O(P){return P===47?(t.consume(P),ne):P===58||P===95||Bx(P)?(t.consume(P),L):vc(P)?(a=O,Y(P)):kx(P)?(t.consume(P),O):ne(P)}function L(P){return P===45||P===46||P===58||P===95||BT(P)?(t.consume(P),L):B(P)}function B(P){return P===61?(t.consume(P),N):vc(P)?(a=B,Y(P)):kx(P)?(t.consume(P),B):O(P)}function N(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(t.consume(P),i=P,$):vc(P)?(a=N,Y(P)):kx(P)?(t.consume(P),N):(t.consume(P),i=void 0,Q)}function $(P){return P===i?(t.consume(P),U):P===null?n(P):vc(P)?(a=$,Y(P)):(t.consume(P),$)}function U(P){return P===62||P===47||kT(P)?O(P):n(P)}function Q(P){return P===null||P===34||P===39||P===60||P===61||P===96?n(P):P===62||kT(P)?O(P):(t.consume(P),Q)}function Y(P){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),_9e(t,ee,"linePrefix",r.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}function ee(P){return t.enter("htmlTextData"),a(P)}function ne(P){return P===62?(t.consume(P),t.exit("htmlTextData"),t.exit("htmlText"),e):n(P)}}var T9e=b9e,w9e=Zu,Xd=JC,S9e=Qu,EW=$C,C9e=QC,Yd=vm,M9e=pW,R9e=mW,I9e=vW,FT=gW,P9e={name:"labelEnd",tokenize:k9e,resolveTo:B9e,resolveAll:D9e},L9e={tokenize:F9e},N9e={tokenize:U9e},O9e={tokenize:z9e};function D9e(t){for(var e=-1,n;++e<t.length;)n=t[e][1],!n._used&&(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(t.splice(e+1,n.type==="labelImage"?4:2),n.type="data",e++);return t}function B9e(t,e){for(var n=t.length,r=0,i,s,o,a,l,c,u;n--;)if(a=t[n][1],l){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;t[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(c){if(t[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(l=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(c=n);return i={type:t[l][1].type==="labelLink"?"link":"image",start:Yd(t[l][1].start),end:Yd(t[t.length-1][1].end)},s={type:"label",start:Yd(t[l][1].start),end:Yd(t[c][1].end)},o={type:"labelText",start:Yd(t[l+r+2][1].end),end:Yd(t[c-2][1].start)},u=[["enter",i,e],["enter",s,e]],u=Xd(u,t.slice(l+1,l+r+3)),u=Xd(u,[["enter",o,e]]),u=Xd(u,C9e(e.parser.constructs.insideSpan.null,t.slice(l+r+4,c-3),e)),u=Xd(u,[["exit",o,e],t[c-2],t[c-1],["exit",s,e]]),u=Xd(u,t.slice(c+1)),u=Xd(u,[["exit",i,e]]),S9e(t,l,t.length,u),t}function k9e(t,e,n){for(var r=this,i=r.events.length,s,o;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(u){return s?s._inactive?c(u):(o=r.parser.defined.indexOf(EW(r.sliceSerialize({start:s.end,end:r.now()})))>-1,t.enter("labelEnd"),t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelEnd"),l):n(u)}function l(u){return u===40?t.attempt(L9e,e,o?e:c)(u):u===91?t.attempt(N9e,e,o?t.attempt(O9e,e,c):c)(u):o?e(u):c(u)}function c(u){return s._balanced=!0,n(u)}}function F9e(t,e,n){return r;function r(l){return t.enter("resource"),t.enter("resourceMarker"),t.consume(l),t.exit("resourceMarker"),FT(t,i)}function i(l){return l===41?a(l):M9e(t,s,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",3)(l)}function s(l){return w9e(l)?FT(t,o)(l):a(l)}function o(l){return l===34||l===39||l===40?I9e(t,FT(t,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(l):a(l)}function a(l){return l===41?(t.enter("resourceMarker"),t.consume(l),t.exit("resourceMarker"),t.exit("resource"),e):n(l)}}function U9e(t,e,n){var r=this;return i;function i(o){return R9e.call(r,t,s,n,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.indexOf(EW(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))<0?n(o):e(o)}}function z9e(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}var eM=P9e,H9e=eM,G9e={name:"labelStartImage",tokenize:V9e,resolveAll:H9e.resolveAll};function V9e(t,e,n){var r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}var W9e=G9e,j9e=eM,$9e={name:"labelStartLink",tokenize:X9e,resolveAll:j9e.resolveAll};function X9e(t,e,n){var r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}var Y9e=$9e,q9e=Rs,K9e={name:"lineEnding",tokenize:J9e};function J9e(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),q9e(t,e,"linePrefix")}}var Q9e=K9e,Z9e=is,e8e=qc,t8e=Rs,n8e={name:"thematicBreak",tokenize:r8e};function r8e(t,e,n){var r=0,i;return s;function s(l){return t.enter("thematicBreak"),i=l,o(l)}function o(l){return l===i?(t.enter("thematicBreakSequence"),a(l)):e8e(l)?t8e(t,o,"whitespace")(l):r<3||l!==null&&!Z9e(l)?n(l):(t.exit("thematicBreak"),e(l))}function a(l){return l===i?(t.consume(l),r++,a):(t.exit("thematicBreakSequence"),o(l))}}var _W=n8e,mO=dW,tM=qc,nM=F_,i8e=iW,oE=Rs,bW=k_,s8e=_W,AW={name:"list",tokenize:l8e,continuation:{tokenize:c8e},exit:f8e},o8e={tokenize:h8e,partial:!0},a8e={tokenize:u8e,partial:!0};function l8e(t,e,n){var r=this,i=nM(r.events,"linePrefix"),s=0;return o;function o(h){var d=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(d==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:mO(h)){if(r.containerState.type||(r.containerState.type=d,t.enter(d,{_container:!0})),d==="listUnordered")return t.enter("listItemPrefix"),h===42||h===45?t.check(s8e,n,l)(h):l(h);if(!r.interrupt||h===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),a(h)}return n(h)}function a(h){return mO(h)&&++s<10?(t.consume(h),a):(!r.interrupt||s<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(t.exit("listItemValue"),l(h)):n(h)}function l(h){return t.enter("listItemMarker"),t.consume(h),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,t.check(bW,r.interrupt?n:c,t.attempt(o8e,f,u))}function c(h){return r.containerState.initialBlankLine=!0,i++,f(h)}function u(h){return tM(h)?(t.enter("listItemPrefixWhitespace"),t.consume(h),t.exit("listItemPrefixWhitespace"),f):n(h)}function f(h){return r.containerState.size=i+i8e(r.sliceStream(t.exit("listItemPrefix"))),e(h)}}function c8e(t,e,n){var r=this;return r.containerState._closeFlow=void 0,t.check(bW,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,oE(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!tM(a)?(r.containerState.furtherBlankLines=r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=r.containerState.initialBlankLine=void 0,t.attempt(a8e,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,oE(t,t.attempt(AW,e,n),"linePrefix",r.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)(a)}}function u8e(t,e,n){var r=this;return oE(t,i,"listItemIndent",r.containerState.size+1);function i(s){return nM(r.events,"listItemIndent")===r.containerState.size?e(s):n(s)}}function f8e(t){t.exit(this.containerState.type)}function h8e(t,e,n){var r=this;return oE(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4+1);function i(s){return tM(s)||!nM(r.events,"listItemPrefixWhitespace")?n(s):e(s)}}var d8e=AW,p8e=is,UT=vm,m8e=Rs,g8e={name:"setextUnderline",tokenize:y8e,resolveTo:v8e};function v8e(t,e){for(var n=t.length,r,i,s,o;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);return o={type:"setextHeading",start:UT(t[i][1].start),end:UT(t[t.length-1][1].end)},t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end=UT(t[s][1].end)):t[r][1]=o,t.push(["exit",o,e]),t}function y8e(t,e,n){for(var r=this,i=r.events.length,s,o;i--;)if(r.events[i][1].type!=="lineEnding"&&r.events[i][1].type!=="linePrefix"&&r.events[i][1].type!=="content"){o=r.events[i][1].type==="paragraph";break}return a;function a(u){return!r.lazy&&(r.interrupt||o)?(t.enter("setextHeadingLine"),t.enter("setextHeadingLineSequence"),s=u,l(u)):n(u)}function l(u){return u===s?(t.consume(u),l):(t.exit("setextHeadingLineSequence"),m8e(t,c,"lineSuffix")(u))}function c(u){return u===null||p8e(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}var x8e=g8e;Object.defineProperty(Ql,"__esModule",{value:!0});var E8e=ym,v4=SMe,_8e=UMe,b8e=jMe,TW=QMe,wW=d6e,gO=y6e,zT=T6e,A8e=R6e,T8e=K6e,w8e=e9e,S8e=l9e,C8e=E9e,M8e=T9e,R8e=eM,I8e=W9e,P8e=Y9e,HT=Q9e,Xo=d8e,vO=x8e,GT=_W,L8e={42:Xo,43:Xo,45:Xo,48:Xo,49:Xo,50:Xo,51:Xo,52:Xo,53:Xo,54:Xo,55:Xo,56:Xo,57:Xo,62:b8e},N8e={91:T8e},O8e={"-2":zT,"-1":zT,32:zT},D8e={35:S8e,42:GT,45:[vO,GT],60:C8e,61:vO,95:GT,96:gO,126:gO},B8e={38:wW,92:TW},k8e={"-5":HT,"-4":HT,"-3":HT,33:I8e,38:wW,42:v4,60:[_8e,M8e],91:P8e,92:[w8e,TW],93:R8e,95:v4,96:A8e},F8e={null:[v4,E8e.resolver]},U8e={null:[]};Ql.contentInitial=N8e;Ql.disable=U8e;Ql.document=L8e;Ql.flow=D8e;Ql.flowInitial=O8e;Ql.insideSpan=F8e;Ql.string=B8e;Ql.text=k8e;var z8e=XC,H8e=YC,G8e=qC,yO=ym,V8e=FCe,W8e=tMe,j8e=KC,$8e=Ql;function X8e(t){var e=t||{},n={defined:[],constructs:V8e([$8e].concat(j8e(e.extensions))),content:r(z8e),document:r(H8e),flow:r(G8e),string:r(yO.string),text:r(yO.text)};return n;function r(i){return s;function s(o){return W8e(n,i,o)}}}var Y8e=X8e,xO=/[\0\t\n\r]/g;function q8e(){var t=!0,e=1,n="",r;return i;function i(s,o,a){var l=[],c,u,f,h,d;for(s=n+s.toString(o),f=0,n="",t&&(s.charCodeAt(0)===65279&&f++,t=void 0);f<s.length;){if(xO.lastIndex=f,c=xO.exec(s),h=c?c.index:s.length,d=s.charCodeAt(h),!c){n=s.slice(f);break}if(d===10&&f===h&&r)l.push(-3),r=void 0;else if(r&&(l.push(-5),r=void 0),f<h&&(l.push(s.slice(f,h)),e+=h-f),d===0)l.push(65533),e++;else if(d===9)for(u=Math.ceil(e/4)*4,l.push(-2);e++<u;)l.push(-1);else d===10?(l.push(-4),e=1):(r=!0,e=1);f=h+1}return a&&(r&&l.push(-5),n&&l.push(n),l.push(null)),l}}var K8e=q8e,J8e=oW;function Q8e(t){for(;!J8e(t););return t}var Z8e=Q8e,eRe=lRe,tRe=R5e,nRe=Yg,SW=nW,VT=$C,rRe=B5e,iRe=Y8e,sRe=K8e,oRe=Z8e,aRe=hW,Fx=qV;function lRe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),cRe(n)(oRe(iRe(n).document().write(sRe()(t,e,!0))))}function cRe(t){var e=t||{},n=uRe({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:c(xt),autolinkProtocol:B,autolinkEmail:B,atxHeading:c(ve),blockQuote:c(Oe),characterEscape:B,characterReference:B,codeFenced:c(be),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:c(be,u),codeText:c(Te,u),codeTextData:B,data:B,codeFlowValue:B,definition:c(Re),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:c($e),hardBreakEscape:c(me),hardBreakTrailing:c(me),htmlFlow:c(We,u),htmlFlowData:B,htmlText:c(We,u),htmlTextData:B,image:c(Xe),label:u,link:c(xt),listItem:c(ie),listItemValue:g,listOrdered:c(fe,m),listUnordered:c(fe),paragraph:c(Ae),reference:K,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:c(ve),strong:c(Je),thematicBreak:c(z)},exit:{atxHeading:h(),atxHeadingSequence:S,autolink:h(),autolinkEmail:he,autolinkProtocol:Me,blockQuote:h(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:Se,characterReferenceMarkerNumeric:Se,characterReferenceValue:xe,codeFenced:h(A),codeFencedFence:y,codeFencedFenceInfo:v,codeFencedFenceMeta:x,codeFlowValue:N,codeIndented:h(T),codeText:h(ee),codeTextData:N,data:N,definition:h(),definitionDestinationString:C,definitionLabelString:w,definitionTitleString:M,emphasis:h(),hardBreakEscape:h(U),hardBreakTrailing:h(U),htmlFlow:h(Q),htmlFlowData:N,htmlText:h(Y),htmlTextData:N,image:h(P),label:re,labelText:se,lineEnding:$,link:h(ne),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:ge,resourceDestinationString:Z,resourceTitleString:X,resource:W,setextHeading:h(L),setextHeadingLineSequence:O,setextHeadingText:R,strong:h(),thematicBreak:h()}},e.mdastExtensions||[]),r={};return i;function i(F){for(var ae={type:"root",children:[]},ye=[ae],Le=[],ke=[],Ve=-1,Ce,Ye,tt={stack:ye,tokenStack:Le,config:n,enter:f,exit:d,buffer:u,resume:p,setData:o,getData:a};++Ve<F.length;)(F[Ve][1].type==="listOrdered"||F[Ve][1].type==="listUnordered")&&(F[Ve][0]==="enter"?ke.push(Ve):(Ye=ke.pop(Ve),Ve=s(F,Ye,Ve)));for(Ve=-1;++Ve<F.length;)Ce=n[F[Ve][0]],SW.call(Ce,F[Ve][1].type)&&Ce[F[Ve][1].type].call(nRe({sliceSerialize:F[Ve][2].sliceSerialize},tt),F[Ve][1]);if(Le.length)throw new Error("Cannot close document, a token (`"+Le[Le.length-1].type+"`, "+Fx({start:Le[Le.length-1].start,end:Le[Le.length-1].end})+") is still open");for(ae.position={start:l(F.length?F[0][1].start:{line:1,column:1,offset:0}),end:l(F.length?F[F.length-2][1].end:{line:1,column:1,offset:0})},Ve=-1;++Ve<n.transforms.length;)ae=n.transforms[Ve](ae)||ae;return ae}function s(F,ae,ye){for(var Le=ae-1,ke=-1,Ve=!1,Ce,Ye,tt,it,dt,Ze,Be;++Le<=ye;)if(dt=F[Le],dt[1].type==="listUnordered"||dt[1].type==="listOrdered"||dt[1].type==="blockQuote"?(dt[0]==="enter"?ke++:ke--,Be=void 0):dt[1].type==="lineEndingBlank"?dt[0]==="enter"&&(Ce&&!Be&&!ke&&!Ze&&(Ze=Le),Be=void 0):dt[1].type==="linePrefix"||dt[1].type==="listItemValue"||dt[1].type==="listItemMarker"||dt[1].type==="listItemPrefix"||dt[1].type==="listItemPrefixWhitespace"||(Be=void 0),!ke&&dt[0]==="enter"&&dt[1].type==="listItemPrefix"||ke===-1&&dt[0]==="exit"&&(dt[1].type==="listUnordered"||dt[1].type==="listOrdered")){if(Ce){for(Ye=Le,tt=void 0;Ye--;)if(it=F[Ye],it[1].type==="lineEnding"||it[1].type==="lineEndingBlank"){if(it[0]==="exit")continue;tt&&(F[tt][1].type="lineEndingBlank",Ve=!0),it[1].type="lineEnding",tt=Ye}else if(!(it[1].type==="linePrefix"||it[1].type==="blockQuotePrefix"||it[1].type==="blockQuotePrefixWhitespace"||it[1].type==="blockQuoteMarker"||it[1].type==="listItemIndent"))break;Ze&&(!tt||Ze<tt)&&(Ce._spread=!0),Ce.end=l(tt?F[tt][1].start:dt[1].end),F.splice(tt||Le,0,["exit",Ce,dt[2]]),Le++,ye++}dt[1].type==="listItemPrefix"&&(Ce={type:"listItem",_spread:!1,start:l(dt[1].start)},F.splice(Le,0,["enter",Ce,dt[2]]),Le++,ye++,Ze=void 0,Be=!0)}return F[ae][1]._spread=Ve,ye}function o(F,ae){r[F]=ae}function a(F){return r[F]}function l(F){return{line:F.line,column:F.column,offset:F.offset}}function c(F,ae){return ye;function ye(Le){f.call(this,F(Le),Le),ae&&ae.call(this,Le)}}function u(){this.stack.push({type:"fragment",children:[]})}function f(F,ae){return this.stack[this.stack.length-1].children.push(F),this.stack.push(F),this.tokenStack.push(ae),F.position={start:l(ae.start)},F}function h(F){return ae;function ae(ye){F&&F.call(this,ye),d.call(this,ye)}}function d(F){var ae=this.stack.pop(),ye=this.tokenStack.pop();if(ye){if(ye.type!==F.type)throw new Error("Cannot close `"+F.type+"` ("+Fx({start:F.start,end:F.end})+"): a different token (`"+ye.type+"`, "+Fx({start:ye.start,end:ye.end})+") is open")}else throw new Error("Cannot close `"+F.type+"` ("+Fx({start:F.start,end:F.end})+"): it’s not open");return ae.position.end=l(F.end),ae}function p(){return tRe(this.stack.pop())}function m(){o("expectingFirstListItemValue",!0)}function g(F){a("expectingFirstListItemValue")&&(this.stack[this.stack.length-2].start=parseInt(this.sliceSerialize(F),10),o("expectingFirstListItemValue"))}function v(){var F=this.resume();this.stack[this.stack.length-1].lang=F}function x(){var F=this.resume();this.stack[this.stack.length-1].meta=F}function y(){a("flowCodeInside")||(this.buffer(),o("flowCodeInside",!0))}function A(){var F=this.resume();this.stack[this.stack.length-1].value=F.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),o("flowCodeInside")}function T(){var F=this.resume();this.stack[this.stack.length-1].value=F}function w(F){var ae=this.resume();this.stack[this.stack.length-1].label=ae,this.stack[this.stack.length-1].identifier=VT(this.sliceSerialize(F)).toLowerCase()}function M(){var F=this.resume();this.stack[this.stack.length-1].title=F}function C(){var F=this.resume();this.stack[this.stack.length-1].url=F}function S(F){this.stack[this.stack.length-1].depth||(this.stack[this.stack.length-1].depth=this.sliceSerialize(F).length)}function R(){o("setextHeadingSlurpLineEnding",!0)}function O(F){this.stack[this.stack.length-1].depth=this.sliceSerialize(F).charCodeAt(0)===61?1:2}function L(){o("setextHeadingSlurpLineEnding")}function B(F){var ae=this.stack[this.stack.length-1].children,ye=ae[ae.length-1];(!ye||ye.type!=="text")&&(ye=te(),ye.position={start:l(F.start)},this.stack[this.stack.length-1].children.push(ye)),this.stack.push(ye)}function N(F){var ae=this.stack.pop();ae.value+=this.sliceSerialize(F),ae.position.end=l(F.end)}function $(F){var ae=this.stack[this.stack.length-1];if(a("atHardBreak")){ae.children[ae.children.length-1].position.end=l(F.end),o("atHardBreak");return}!a("setextHeadingSlurpLineEnding")&&n.canContainEols.indexOf(ae.type)>-1&&(B.call(this,F),N.call(this,F))}function U(){o("atHardBreak",!0)}function Q(){var F=this.resume();this.stack[this.stack.length-1].value=F}function Y(){var F=this.resume();this.stack[this.stack.length-1].value=F}function ee(){var F=this.resume();this.stack[this.stack.length-1].value=F}function ne(){var F=this.stack[this.stack.length-1];a("inReference")?(F.type+="Reference",F.referenceType=a("referenceType")||"shortcut",delete F.url,delete F.title):(delete F.identifier,delete F.label,delete F.referenceType),o("referenceType")}function P(){var F=this.stack[this.stack.length-1];a("inReference")?(F.type+="Reference",F.referenceType=a("referenceType")||"shortcut",delete F.url,delete F.title):(delete F.identifier,delete F.label,delete F.referenceType),o("referenceType")}function se(F){this.stack[this.stack.length-2].identifier=VT(this.sliceSerialize(F)).toLowerCase()}function re(){var F=this.stack[this.stack.length-1],ae=this.resume();this.stack[this.stack.length-1].label=ae,o("inReference",!0),this.stack[this.stack.length-1].type==="link"?this.stack[this.stack.length-1].children=F.children:this.stack[this.stack.length-1].alt=ae}function Z(){var F=this.resume();this.stack[this.stack.length-1].url=F}function X(){var F=this.resume();this.stack[this.stack.length-1].title=F}function W(){o("inReference")}function K(){o("referenceType","collapsed")}function ge(F){var ae=this.resume();this.stack[this.stack.length-1].label=ae,this.stack[this.stack.length-1].identifier=VT(this.sliceSerialize(F)).toLowerCase(),o("referenceType","full")}function Se(F){o("characterReferenceType",F.type)}function xe(F){var ae=this.sliceSerialize(F),ye=a("characterReferenceType"),Le,ke;ye?(Le=rRe(ae,ye==="characterReferenceMarkerNumeric"?10:16),o("characterReferenceType")):Le=aRe(ae),ke=this.stack.pop(),ke.value+=Le,ke.position.end=l(F.end)}function Me(F){N.call(this,F),this.stack[this.stack.length-1].url=this.sliceSerialize(F)}function he(F){N.call(this,F),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(F)}function Oe(){return{type:"blockquote",children:[]}}function be(){return{type:"code",lang:null,meta:null,value:""}}function Te(){return{type:"inlineCode",value:""}}function Re(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function $e(){return{type:"emphasis",children:[]}}function ve(){return{type:"heading",depth:void 0,children:[]}}function me(){return{type:"break"}}function We(){return{type:"html",value:""}}function Xe(){return{type:"image",title:null,url:"",alt:null}}function xt(){return{type:"link",title:null,url:"",children:[]}}function fe(F){return{type:"list",ordered:F.type==="listOrdered",start:null,spread:F._spread,children:[]}}function ie(F){return{type:"listItem",spread:F._spread,checked:null,children:[]}}function Ae(){return{type:"paragraph",children:[]}}function Je(){return{type:"strong",children:[]}}function te(){return{type:"text",value:""}}function z(){return{type:"thematicBreak"}}}function uRe(t,e){for(var n=-1;++n<e.length;)fRe(t,e[n]);return t}function fRe(t,e){var n,r;for(n in e)r=SW.call(t,n)?t[n]:t[n]={},n==="canContainEols"||n==="transforms"?t[n]=[].concat(r,e[n]):Object.assign(r,e[n])}var hRe=eRe,dRe=mRe,pRe=hRe;function mRe(t){var e=this;this.Parser=n;function n(r){return pRe(r,Object.assign({},e.data("settings"),t,{extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]}))}}const gRe=go(dRe);var Wa=vRe;function vRe(t,e,n){var r;return n==null&&(typeof e!="object"||Array.isArray(e))&&(n=e,e={}),r=Object.assign({type:String(t)},e),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r}var rM=CW;function CW(t){if(t==null)return _Re;if(typeof t=="string")return ERe(t);if(typeof t=="object")return"length"in t?xRe(t):yRe(t);if(typeof t=="function")return t;throw new Error("Expected function, string, or object as test")}function yRe(t){return e;function e(n){var r;for(r in t)if(n[r]!==t[r])return!1;return!0}}function xRe(t){for(var e=[],n=-1;++n<t.length;)e[n]=CW(t[n]);return r;function r(){for(var i=-1;++i<e.length;)if(e[i].apply(this,arguments))return!0;return!1}}function ERe(t){return e;function e(n){return!!(n&&n.type===t)}}function _Re(){return!0}var bRe=ARe;function ARe(t){return t}var TRe=z_,wRe=rM,SRe=bRe,MW=!0,RW="skip",y4=!1;z_.CONTINUE=MW;z_.SKIP=RW;z_.EXIT=y4;function z_(t,e,n,r){var i,s;typeof e=="function"&&typeof n!="function"&&(r=n,n=e,e=null),s=wRe(e),i=r?-1:1,o(t,null,[])();function o(a,l,c){var u=typeof a=="object"&&a!==null?a:{},f;return typeof u.type=="string"&&(f=typeof u.tagName=="string"?u.tagName:typeof u.name=="string"?u.name:void 0,h.displayName="node ("+SRe(u.type+(f?"<"+f+">":""))+")"),h;function h(){var d=c.concat(a),p=[],m,g;if((!e||s(a,l,c[c.length-1]||null))&&(p=CRe(n(a,c)),p[0]===y4))return p;if(a.children&&p[0]!==RW)for(g=(r?a.children.length:-1)+i;g>-1&&g<a.children.length;){if(m=o(a.children[g],g,d)(),m[0]===y4)return m;g=typeof m[1]=="number"?m[1]:g+i}return p}}}function CRe(t){return t!==null&&typeof t=="object"&&"length"in t?t:typeof t=="number"?[MW,t]:[t]}var MRe=G_,H_=TRe,RRe=H_.CONTINUE,IRe=H_.SKIP,PRe=H_.EXIT;G_.CONTINUE=RRe;G_.SKIP=IRe;G_.EXIT=PRe;function G_(t,e,n,r){typeof e=="function"&&typeof n!="function"&&(r=n,n=e,e=null),H_(t,e,i,r);function i(s,o){var a=o[o.length-1],l=a?a.children.indexOf(s):null;return n(s,l,a)}}var IW=NW("start"),PW=NW("end"),LW=iM;iM.start=IW;iM.end=PW;function iM(t){return{start:IW(t),end:PW(t)}}function NW(t){return e.displayName=t,e;function e(n){var r=n&&n.position&&n.position[t]||{};return{line:r.line||null,column:r.column||null,offset:isNaN(r.offset)?null:r.offset}}}var LRe=NRe;function NRe(t){return!t||!t.position||!t.position.start||!t.position.start.line||!t.position.start.column||!t.position.end||!t.position.end.line||!t.position.end.column}var ORe=DRe;function DRe(t){return t}var BRe=V_,kRe=rM,FRe=ORe,OW=!0,DW="skip",x4=!1;V_.CONTINUE=OW;V_.SKIP=DW;V_.EXIT=x4;function V_(t,e,n,r){var i,s;typeof e=="function"&&typeof n!="function"&&(r=n,n=e,e=null),s=kRe(e),i=r?-1:1,o(t,null,[])();function o(a,l,c){var u=typeof a=="object"&&a!==null?a:{},f;return typeof u.type=="string"&&(f=typeof u.tagName=="string"?u.tagName:typeof u.name=="string"?u.name:void 0,h.displayName="node ("+FRe(u.type+(f?"<"+f+">":""))+")"),h;function h(){var d=c.concat(a),p=[],m,g;if((!e||s(a,l,c[c.length-1]||null))&&(p=URe(n(a,c)),p[0]===x4))return p;if(a.children&&p[0]!==DW)for(g=(r?a.children.length:-1)+i;g>-1&&g<a.children.length;){if(m=o(a.children[g],g,d)(),m[0]===x4)return m;g=typeof m[1]=="number"?m[1]:g+i}return p}}}function URe(t){return t!==null&&typeof t=="object"&&"length"in t?t:typeof t=="number"?[OW,t]:[t]}var zRe=j_,W_=BRe,HRe=W_.CONTINUE,GRe=W_.SKIP,VRe=W_.EXIT;j_.CONTINUE=HRe;j_.SKIP=GRe;j_.EXIT=VRe;function j_(t,e,n,r){typeof e=="function"&&typeof n!="function"&&(r=n,n=e,e=null),W_(t,e,i,r);function i(s,o){var a=o[o.length-1],l=a?a.children.indexOf(s):null;return n(s,l,a)}}var WRe=zRe,jRe=$Re,BW={}.hasOwnProperty;function $Re(t,e){return YRe(XRe(t))}function XRe(t){var e={};if(!t||!t.type)throw new Error("mdast-util-definitions expected node");return WRe(t,"definition",n),e;function n(r){var i=kW(r.identifier);BW.call(e,i)||(e[i]=r)}}function YRe(t){return e;function e(n){var r=n&&kW(n);return r&&BW.call(t,r)?t[r]:null}}function kW(t){return t.toUpperCase()}var WT,EO;function Uo(){if(EO)return WT;EO=1,WT=e;var t=FW();function e(n,r){for(var i=r.children||[],s=i.length,o=[],a=-1,l,c;++a<s;)l=t(n,i[a],r),l&&(a&&i[a-1].type==="break"&&(l.value&&(l.value=l.value.replace(/^\s+/,"")),c=l.children&&l.children[0],c&&c.value&&(c.value=c.value.replace(/^\s+/,""))),o=o.concat(l));return o}return WT}var jT,_O;function FW(){if(_O)return jT;_O=1,jT=i;var t=Wa,e=Uo(),n={}.hasOwnProperty;function r(a,l){return s(l)?a.augment(l,t("text",l.value)):a(l,"div",e(a,l))}function i(a,l,c){var u=l&&l.type,f;if(!u)throw new Error("Expected node, got `"+l+"`");return n.call(a.handlers,u)?f=a.handlers[u]:a.passThrough&&a.passThrough.indexOf(u)>-1?f=o:f=a.unknownHandler,(typeof f=="function"?f:r)(a,l,c)}function s(a){var l=a.data||{};return n.call(l,"hName")||n.call(l,"hProperties")||n.call(l,"hChildren")?!1:"value"in a}function o(a,l){var c;return l.children?(c=Object.assign({},l),c.children=e(a,l),c):l}return jT}var UW=qRe;function qRe(t,e){return t(e,"hr")}var qg=KRe,$T=Wa;function KRe(t,e){var n=[],r=-1,i=t.length;for(e&&n.push($T("text",`
`));++r<i;)r&&n.push($T("text",`
`)),n.push(t[r]);return e&&t.length>0&&n.push($T("text",`
`)),n}var zW=ZRe,JRe=qg,QRe=Uo();function ZRe(t,e){var n={},r=e.ordered?"ol":"ul",i,s=-1,o;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start),i=QRe(t,e),o=i.length;++s<o;)if(i[s].properties.className&&i[s].properties.className.indexOf("task-list-item")!==-1){n.className=["contains-task-list"];break}return t(e,r,n,JRe(i,!0))}var e7e=i7e,t7e=UW,n7e=zW,r7e=qg;function i7e(t){for(var e=t.footnoteById,n=t.footnoteOrder,r=n.length,i=-1,s=[],o,a,l,c;++i<r;)o=e[n[i].toUpperCase()],o&&(l=o.children.concat(),c=l[l.length-1],a={type:"link",url:"#fnref-"+o.identifier,data:{hProperties:{className:["footnote-backref"]}},children:[{type:"text",value:"↩"}]},(!c||c.type!=="paragraph")&&(c={type:"paragraph",children:[]},l.push(c)),c.children.push(a),s.push({type:"listItem",data:{hProperties:{id:"fn-"+o.identifier}},children:l,position:o.position}));return s.length===0?null:t(null,"div",{className:["footnotes"]},r7e([t7e(t),n7e(t,{type:"list",ordered:!0,children:s})],!0))}var s7e=l7e,o7e=qg,a7e=Uo();function l7e(t,e){return t(e,"blockquote",o7e(a7e(t,e),!0))}var c7e=f7e,u7e=Wa;function f7e(t,e){return[t(e,"br"),u7e("text",`
`)]}var h7e=p7e,d7e=Wa;function p7e(t,e){var n=e.value?e.value+`
`:"",r=e.lang&&e.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={},s;return r&&(i.className=["language-"+r]),s=t(e,"code",i,[d7e("text",n)]),e.meta&&(s.data={meta:e.meta}),t(e.position,"pre",[s])}var m7e=v7e,g7e=Uo();function v7e(t,e){return t(e,"del",g7e(t,e))}var y7e=E7e,x7e=Uo();function E7e(t,e){return t(e,"em",x7e(t,e))}var HW=b7e,_7e=Wa;function b7e(t,e){var n=t.footnoteOrder,r=String(e.identifier);return n.indexOf(r)===-1&&n.push(r),t(e.position,"sup",{id:"fnref-"+r},[t(e,"a",{href:"#fn-"+r,className:["footnote-ref"]},[_7e("text",e.label||r)])])}var A7e=w7e,T7e=HW;function w7e(t,e){for(var n=t.footnoteById,r=t.footnoteOrder,i=1;i in n;)i++;return i=String(i),r.push(i),n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:e.children}],position:e.position},T7e(t,{type:"footnoteReference",identifier:i,position:e.position})}var S7e=M7e,C7e=Uo();function M7e(t,e){return t(e,"h"+e.depth,C7e(t,e))}var R7e=P7e,I7e=Wa;function P7e(t,e){return t.dangerous?t.augment(e,I7e("raw",e.value)):null}var bO={};function L7e(t){var e,n,r=bO[t];if(r)return r;for(r=bO[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)r[t.charCodeAt(e)]=t[e];return r}function $_(t,e,n){var r,i,s,o,a,l="";for(typeof e!="string"&&(n=e,e=$_.defaultChars),typeof n>"u"&&(n=!0),a=L7e(e),r=0,i=t.length;r<i;r++){if(s=t.charCodeAt(r),n&&s===37&&r+2<i&&/^[0-9a-f]{2}$/i.test(t.slice(r+1,r+3))){l+=t.slice(r,r+3),r+=2;continue}if(s<128){l+=a[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&r+1<i&&(o=t.charCodeAt(r+1),o>=56320&&o<=57343)){l+=encodeURIComponent(t[r]+t[r+1]),r++;continue}l+="%EF%BF%BD";continue}l+=encodeURIComponent(t[r])}return l}$_.defaultChars=";/?:@&=+$,-_.!~*'()#";$_.componentChars="-_.!~*'()";var X_=$_,GW=O7e,XT=Wa,N7e=Uo();function O7e(t,e){var n=e.referenceType,r="]",i,s,o;return n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference"?XT("text","!["+e.alt+r):(i=N7e(t,e),s=i[0],s&&s.type==="text"?s.value="["+s.value:i.unshift(XT("text","[")),o=i[i.length-1],o&&o.type==="text"?o.value+=r:i.push(XT("text",r)),i)}var D7e=F7e,B7e=X_,k7e=GW;function F7e(t,e){var n=t.definition(e.identifier),r;return n?(r={src:B7e(n.url||""),alt:e.alt},n.title!==null&&n.title!==void 0&&(r.title=n.title),t(e,"img",r)):k7e(t,e)}var U7e=X_,z7e=H7e;function H7e(t,e){var n={src:U7e(e.url),alt:e.alt};return e.title!==null&&e.title!==void 0&&(n.title=e.title),t(e,"img",n)}var G7e=W7e,V7e=Wa;function W7e(t,e){var n=e.value.replace(/\r?\n|\r/g," ");return t(e,"code",[V7e("text",n)])}var j7e=q7e,$7e=X_,X7e=GW,Y7e=Uo();function q7e(t,e){var n=t.definition(e.identifier),r;return n?(r={href:$7e(n.url||"")},n.title!==null&&n.title!==void 0&&(r.title=n.title),t(e,"a",r,Y7e(t,e))):X7e(t,e)}var K7e=X_,J7e=Uo(),Q7e=Z7e;function Z7e(t,e){var n={href:K7e(e.url)};return e.title!==null&&e.title!==void 0&&(n.title=e.title),t(e,"a",n,J7e(t,e))}var eIe=nIe,YT=Wa,tIe=Uo();function nIe(t,e,n){var r=tIe(t,e),i=r[0],s=n?rIe(n):VW(e),o={},a=[],l,c,u;for(typeof e.checked=="boolean"&&((!i||i.tagName!=="p")&&(i=t(null,"p",[]),r.unshift(i)),i.children.length>0&&i.children.unshift(YT("text"," ")),i.children.unshift(t(null,"input",{type:"checkbox",checked:e.checked,disabled:!0})),o.className=["task-list-item"]),l=r.length,c=-1;++c<l;)u=r[c],(s||c!==0||u.tagName!=="p")&&a.push(YT("text",`
`)),u.tagName==="p"&&!s?a=a.concat(u.children):a.push(u);return l&&(s||u.tagName!=="p")&&a.push(YT("text",`
`)),t(e,"li",o,a)}function rIe(t){for(var e=t.spread,n=t.children,r=n.length,i=-1;!e&&++i<r;)e=VW(n[i]);return e}function VW(t){var e=t.spread;return e??t.children.length>1}var iIe=oIe,sIe=Uo();function oIe(t,e){return t(e,"p",sIe(t,e))}var aIe=fIe,lIe=Wa,cIe=qg,uIe=Uo();function fIe(t,e){return t.augment(e,lIe("root",cIe(uIe(t,e))))}var hIe=pIe,dIe=Uo();function pIe(t,e){return t(e,"strong",dIe(t,e))}var mIe=vIe,AO=LW,Ux=qg,gIe=Uo();function vIe(t,e){for(var n=e.children,r=n.length,i=e.align||[],s=i.length,o=[],a,l,c,u,f;r--;){for(l=n[r].children,u=r===0?"th":"td",a=s||l.length,c=[];a--;)f=l[a],c[a]=t(f,u,{align:i[a]},f?gIe(t,f):[]);o[r]=t(n[r],"tr",Ux(c,!0))}return t(e,"table",Ux([t(o[0].position,"thead",Ux([o[0]],!0))].concat(o[1]?t({start:AO.start(o[1]),end:AO.end(o[o.length-1])},"tbody",Ux(o.slice(1),!0)):[]),!0))}var yIe=EIe,xIe=Wa;function EIe(t,e){return t.augment(e,xIe("text",String(e.value).replace(/[ \t]*(\r?\n|\r)[ \t]*/g,"$1")))}var _Ie={blockquote:s7e,break:c7e,code:h7e,delete:m7e,emphasis:y7e,footnoteReference:HW,footnote:A7e,heading:S7e,html:R7e,imageReference:D7e,image:z7e,inlineCode:G7e,linkReference:j7e,link:Q7e,listItem:eIe,list:zW,paragraph:iIe,root:aIe,strong:hIe,table:mIe,text:yIe,thematicBreak:UW,toml:zx,yaml:zx,definition:zx,footnoteDefinition:zx};function zx(){return null}var bIe=LIe,AIe=Wa,TIe=MRe,TO=LW,wIe=LRe,SIe=jRe,CIe=FW(),MIe=e7e,RIe=_Ie,IIe={}.hasOwnProperty,wO=!1;function PIe(t,e){var n=e||{};n.allowDangerousHTML!==void 0&&!wO&&(wO=!0,console.warn("mdast-util-to-hast: deprecation: `allowDangerousHTML` is nonstandard, use `allowDangerousHtml` instead"));var r=n.allowDangerousHtml||n.allowDangerousHTML,i={};return o.dangerous=r,o.definition=SIe(t),o.footnoteById=i,o.footnoteOrder=[],o.augment=s,o.handlers=Object.assign({},RIe,n.handlers),o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,TIe(t,"footnoteDefinition",a),o;function s(l,c){var u,f;return l&&l.data&&(u=l.data,u.hName&&(c.type!=="element"&&(c={type:"element",tagName:"",properties:{},children:[]}),c.tagName=u.hName),c.type==="element"&&u.hProperties&&(c.properties=Object.assign({},c.properties,u.hProperties)),c.children&&u.hChildren&&(c.children=u.hChildren)),f=l&&l.position?l:{position:l},wIe(f)||(c.position={start:TO.start(f),end:TO.end(f)}),c}function o(l,c,u,f){return f==null&&typeof u=="object"&&"length"in u&&(f=u,u={}),s(l,{type:"element",tagName:c,properties:u||{},children:f||[]})}function a(l){var c=String(l.identifier).toUpperCase();IIe.call(i,c)||(i[c]=l)}}function LIe(t,e){var n=PIe(t,e),r=CIe(n,t),i=MIe(n);return i&&(r.children=r.children.concat(AIe("text",`
`),i)),r}var NIe=bIe,WW=NIe,OIe=DIe;function DIe(t,e){return t&&!t.process&&(e=t,t=null),t?BIe(t,e):kIe(e)}function BIe(t,e){return n;function n(r,i,s){t.run(WW(r,e),i,o);function o(a){s(a)}}}function kIe(t){return e;function e(n){return WW(n,t)}}const FIe=go(OIe);var UIe=HIe,zIe=Object.prototype.hasOwnProperty;function HIe(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)zIe.call(n,r)&&(t[r]=n[r])}return t}var jW=$W,sM=$W.prototype;sM.space=null;sM.normal={};sM.property={};function $W(t,e,n){this.property=t,this.normal=e,n&&(this.space=n)}var SO=UIe,GIe=jW,XW=VIe;function VIe(t){for(var e=t.length,n=[],r=[],i=-1,s,o;++i<e;)s=t[i],n.push(s.property),r.push(s.normal),o=s.space;return new GIe(SO.apply(null,n),SO.apply(null,r),o)}var YW=WIe;function WIe(t){return t.toLowerCase()}var qW=KW,ja=KW.prototype;ja.space=null;ja.attribute=null;ja.property=null;ja.boolean=!1;ja.booleanish=!1;ja.overloadedBoolean=!1;ja.number=!1;ja.commaSeparated=!1;ja.spaceSeparated=!1;ja.commaOrSpaceSeparated=!1;ja.mustUseProperty=!1;ja.defined=!1;function KW(t,e){this.property=t,this.attribute=e}var Tl={},jIe=0;Tl.boolean=Lh();Tl.booleanish=Lh();Tl.overloadedBoolean=Lh();Tl.number=Lh();Tl.spaceSeparated=Lh();Tl.commaSeparated=Lh();Tl.commaOrSpaceSeparated=Lh();function Lh(){return Math.pow(2,++jIe)}var JW=qW,CO=Tl,QW=oM;oM.prototype=new JW;oM.prototype.defined=!0;var ZW=["boolean","booleanish","overloadedBoolean","number","commaSeparated","spaceSeparated","commaOrSpaceSeparated"],$Ie=ZW.length;function oM(t,e,n,r){var i=-1,s;for(MO(this,"space",r),JW.call(this,t,e);++i<$Ie;)s=ZW[i],MO(this,s,(n&CO[s])===CO[s])}function MO(t,e,n){n&&(t[e]=n)}var RO=YW,XIe=jW,YIe=QW,xm=qIe;function qIe(t){var e=t.space,n=t.mustUseProperty||[],r=t.attributes||{},i=t.properties,s=t.transform,o={},a={},l,c;for(l in i)c=new YIe(l,s(r,l),i[l],e),n.indexOf(l)!==-1&&(c.mustUseProperty=!0),o[l]=c,a[RO(l)]=l,a[RO(c.attribute)]=l;return new XIe(o,a,e)}var KIe=xm,ej=KIe({space:"xlink",transform:JIe,properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}});function JIe(t,e){return"xlink:"+e.slice(5).toLowerCase()}var QIe=xm,tj=QIe({space:"xml",transform:ZIe,properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function ZIe(t,e){return"xml:"+e.slice(3).toLowerCase()}var nj=ePe;function ePe(t,e){return e in t?t[e]:e}var tPe=nj,rj=nPe;function nPe(t,e){return tPe(t,e.toLowerCase())}var rPe=xm,iPe=rj,ij=rPe({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:iPe,properties:{xmlns:null,xmlnsXLink:null}}),aM=Tl,sPe=xm,wo=aM.booleanish,xa=aM.number,If=aM.spaceSeparated,sj=sPe({transform:oPe,properties:{ariaActiveDescendant:null,ariaAtomic:wo,ariaAutoComplete:null,ariaBusy:wo,ariaChecked:wo,ariaColCount:xa,ariaColIndex:xa,ariaColSpan:xa,ariaControls:If,ariaCurrent:null,ariaDescribedBy:If,ariaDetails:null,ariaDisabled:wo,ariaDropEffect:If,ariaErrorMessage:null,ariaExpanded:wo,ariaFlowTo:If,ariaGrabbed:wo,ariaHasPopup:null,ariaHidden:wo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:If,ariaLevel:xa,ariaLive:null,ariaModal:wo,ariaMultiLine:wo,ariaMultiSelectable:wo,ariaOrientation:null,ariaOwns:If,ariaPlaceholder:null,ariaPosInSet:xa,ariaPressed:wo,ariaReadOnly:wo,ariaRelevant:null,ariaRequired:wo,ariaRoleDescription:If,ariaRowCount:xa,ariaRowIndex:xa,ariaRowSpan:xa,ariaSelected:wo,ariaSetSize:xa,ariaSort:null,ariaValueMax:xa,ariaValueMin:xa,ariaValueNow:xa,ariaValueText:null,role:null}});function oPe(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}var Em=Tl,aPe=xm,lPe=rj,Qn=Em.boolean,cPe=Em.overloadedBoolean,Y0=Em.booleanish,Wr=Em.number,oo=Em.spaceSeparated,Hx=Em.commaSeparated,uPe=aPe({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:lPe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Hx,acceptCharset:oo,accessKey:oo,action:null,allow:null,allowFullScreen:Qn,allowPaymentRequest:Qn,allowUserMedia:Qn,alt:null,as:null,async:Qn,autoCapitalize:null,autoComplete:oo,autoFocus:Qn,autoPlay:Qn,capture:Qn,charSet:null,checked:Qn,cite:null,className:oo,cols:Wr,colSpan:null,content:null,contentEditable:Y0,controls:Qn,controlsList:oo,coords:Wr|Hx,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Qn,defer:Qn,dir:null,dirName:null,disabled:Qn,download:cPe,draggable:Y0,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Qn,formTarget:null,headers:oo,height:Wr,hidden:Qn,high:Wr,href:null,hrefLang:null,htmlFor:oo,httpEquiv:oo,id:null,imageSizes:null,imageSrcSet:Hx,inputMode:null,integrity:null,is:null,isMap:Qn,itemId:null,itemProp:oo,itemRef:oo,itemScope:Qn,itemType:oo,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Qn,low:Wr,manifest:null,max:null,maxLength:Wr,media:null,method:null,min:null,minLength:Wr,multiple:Qn,muted:Qn,name:null,nonce:null,noModule:Qn,noValidate:Qn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextMenu:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Qn,optimum:Wr,pattern:null,ping:oo,placeholder:null,playsInline:Qn,poster:null,preload:null,readOnly:Qn,referrerPolicy:null,rel:oo,required:Qn,reversed:Qn,rows:Wr,rowSpan:Wr,sandbox:oo,scope:null,scoped:Qn,seamless:Qn,selected:Qn,shape:null,size:Wr,sizes:null,slot:null,span:Wr,spellCheck:Y0,src:null,srcDoc:null,srcLang:null,srcSet:Hx,start:Wr,step:null,style:null,tabIndex:Wr,target:null,title:null,translate:null,type:null,typeMustMatch:Qn,useMap:null,value:Y0,width:Wr,wrap:null,align:null,aLink:null,archive:oo,axis:null,background:null,bgColor:null,border:Wr,borderColor:null,bottomMargin:Wr,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Qn,declare:Qn,event:null,face:null,frame:null,frameBorder:null,hSpace:Wr,leftMargin:Wr,link:null,longDesc:null,lowSrc:null,marginHeight:Wr,marginWidth:Wr,noResize:Qn,noHref:Qn,noShade:Qn,noWrap:Qn,object:null,profile:null,prompt:null,rev:null,rightMargin:Wr,rules:null,scheme:null,scrolling:Y0,standby:null,summary:null,text:null,topMargin:Wr,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Wr,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Qn,disableRemotePlayback:Qn,prefix:null,property:null,results:Wr,security:null,unselectable:null}}),fPe=XW,hPe=ej,dPe=tj,pPe=ij,mPe=sj,gPe=uPe,vPe=fPe([dPe,hPe,pPe,mPe,gPe]),Kg=Tl,yPe=xm,xPe=nj,EPe=Kg.boolean,_n=Kg.number,IO=Kg.spaceSeparated,qT=Kg.commaSeparated,Ea=Kg.commaOrSpaceSeparated,_Pe=yPe({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:xPe,properties:{about:Ea,accentHeight:_n,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:_n,amplitude:_n,arabicForm:null,ascent:_n,attributeName:null,attributeType:null,azimuth:_n,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:_n,by:null,calcMode:null,capHeight:_n,className:IO,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:_n,diffuseConstant:_n,direction:null,display:null,dur:null,divisor:_n,dominantBaseline:null,download:EPe,dx:null,dy:null,edgeMode:null,editable:null,elevation:_n,enableBackground:null,end:null,event:null,exponent:_n,externalResourcesRequired:null,fill:null,fillOpacity:_n,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:qT,g2:qT,glyphName:qT,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:_n,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:_n,horizOriginX:_n,horizOriginY:_n,id:null,ideographic:_n,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:_n,k:_n,k1:_n,k2:_n,k3:_n,k4:_n,kernelMatrix:Ea,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:_n,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:_n,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:_n,overlineThickness:_n,paintOrder:null,panose1:null,path:null,pathLength:_n,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:IO,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:_n,pointsAtY:_n,pointsAtZ:_n,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ea,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ea,rev:Ea,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ea,requiredFeatures:Ea,requiredFonts:Ea,requiredFormats:Ea,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:_n,specularExponent:_n,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:_n,strikethroughThickness:_n,string:null,stroke:null,strokeDashArray:Ea,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:_n,strokeOpacity:_n,strokeWidth:null,style:null,surfaceScale:_n,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ea,tabIndex:_n,tableValues:null,target:null,targetX:_n,targetY:_n,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ea,to:null,transform:null,u1:null,u2:null,underlinePosition:_n,underlineThickness:_n,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:_n,values:null,vAlphabetic:_n,vMathematical:_n,vectorEffect:null,vHanging:_n,vIdeographic:_n,version:null,vertAdvY:_n,vertOriginX:_n,vertOriginY:_n,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:_n,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),bPe=XW,APe=ej,TPe=tj,wPe=ij,SPe=sj,CPe=_Pe,MPe=bPe([TPe,APe,wPe,SPe,CPe]),RPe=YW,IPe=QW,PPe=qW,lM="data",LPe=DPe,NPe=/^data[-\w.:]+$/i,oj=/-[a-z]/g,OPe=/[A-Z]/g;function DPe(t,e){var n=RPe(e),r=e,i=PPe;return n in t.normal?t.property[t.normal[n]]:(n.length>4&&n.slice(0,4)===lM&&NPe.test(e)&&(e.charAt(4)==="-"?r=BPe(e):e=kPe(e),i=IPe),new i(r,e))}function BPe(t){var e=t.slice(5).replace(oj,UPe);return lM+e.charAt(0).toUpperCase()+e.slice(1)}function kPe(t){var e=t.slice(4);return oj.test(e)?t:(e=e.replace(OPe,FPe),e.charAt(0)!=="-"&&(e="-"+e),lM+e)}function FPe(t){return"-"+t.toLowerCase()}function UPe(t){return t.charAt(1).toUpperCase()}const zPe="classID",HPe="datatype",GPe="itemID",VPe="strokeDasharray",WPe="strokeDashoffset",jPe="strokeLinecap",$Pe="strokeLinejoin",XPe="strokeMiterlimit",YPe="typeof",qPe="xlinkActuate",KPe="xlinkArcrole",JPe="xlinkHref",QPe="xlinkRole",ZPe="xlinkShow",eLe="xlinkTitle",tLe="xlinkType",nLe="xmlnsXlink",rLe={classId:zPe,dataType:HPe,itemId:GPe,strokeDashArray:VPe,strokeDashOffset:WPe,strokeLineCap:jPe,strokeLineJoin:$Pe,strokeMiterLimit:XPe,typeOf:YPe,xLinkActuate:qPe,xLinkArcRole:KPe,xLinkHref:JPe,xLinkRole:QPe,xLinkShow:ZPe,xLinkTitle:eLe,xLinkType:tLe,xmlnsXLink:nLe};var cM={};cM.parse=oLe;cM.stringify=aLe;var PO="",iLe=" ",sLe=/[ \t\n\r\f]+/g;function oLe(t){var e=String(t||PO).trim();return e===PO?[]:e.split(sLe)}function aLe(t){return t.join(iLe).trim()}var uM={};uM.parse=lLe;uM.stringify=cLe;var E4=",",LO=" ",s1="";function lLe(t){for(var e=[],n=String(t||s1),r=n.indexOf(E4),i=0,s=!1,o;!s;)r===-1&&(r=n.length,s=!0),o=n.slice(i,r).trim(),(o||!s)&&e.push(o),i=r+1,r=n.indexOf(E4,i);return e}function cLe(t,e){var n=e||{},r=n.padLeft===!1?s1:LO,i=n.padRight?LO:s1;return t[t.length-1]===s1&&(t=t.concat(s1)),t.join(i+E4+r).trim()}var NO=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,uLe=/\n/g,fLe=/^\s*/,hLe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,dLe=/^:\s*/,pLe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,mLe=/^[;\s]*/,gLe=/^\s+|\s+$/g,vLe=`
`,OO="/",DO="*",Ff="",yLe="comment",xLe="declaration",ELe=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(p){var m=p.match(uLe);m&&(n+=m.length);var g=p.lastIndexOf(vLe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),c(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(p){var m=new Error(e.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=e.source,m.line=n,m.column=r,m.source=t,!e.silent)throw m}function l(p){var m=p.exec(t);if(m){var g=m[0];return i(g),t=t.slice(g.length),m}}function c(){l(fLe)}function u(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(OO!=t.charAt(0)||DO!=t.charAt(1))){for(var m=2;Ff!=t.charAt(m)&&(DO!=t.charAt(m)||OO!=t.charAt(m+1));)++m;if(m+=2,Ff===t.charAt(m-1))return a("End of comment missing");var g=t.slice(2,m-2);return r+=2,i(g),t=t.slice(m),r+=2,p({type:yLe,comment:g})}}function h(){var p=s(),m=l(hLe);if(m){if(f(),!l(dLe))return a("property missing ':'");var g=l(pLe),v=p({type:xLe,property:BO(m[0].replace(NO,Ff)),value:g?BO(g[0].replace(NO,Ff)):Ff});return l(mLe),v}}function d(){var p=[];u(p);for(var m;m=h();)m!==!1&&(p.push(m),u(p));return p}return c(),d()};function BO(t){return t?t.replace(gLe,Ff):Ff}var _Le=ELe;function bLe(t,e){var n=null;if(!t||typeof t!="string")return n;for(var r,i=_Le(t),s=typeof e=="function",o,a,l=0,c=i.length;l<c;l++)r=i[l],o=r.property,a=r.value,s?e(o,a,r):a&&(n||(n={}),n[o]=a);return n}var ALe=bLe;const TLe="http://www.w3.org/1999/xhtml",wLe="http://www.w3.org/1998/Math/MathML",SLe="http://www.w3.org/2000/svg",CLe="http://www.w3.org/1999/xlink",MLe="http://www.w3.org/XML/1998/namespace",RLe="http://www.w3.org/2000/xmlns/",ILe={html:TLe,mathml:wLe,svg:SLe,xlink:CLe,xml:MLe,xmlns:RLe};var PLe=vPe,aj=MPe,LLe=LPe,NLe=rLe,OLe=cM,DLe=uM,BLe=ALe,kLe=ILe,fM=rM,FLe=fM("root"),_4=fM("element"),ULe=fM("text"),zLe=HLe;function HLe(t,e,n){var r=n||{},i=VLe(t),s=$Le(t),o=jLe(t),a;if(typeof t!="function")throw new Error("h is not a function");if(typeof r=="string"||typeof r=="boolean"?(a=r,r={}):a=r.prefix,FLe(e))e=e.children.length===1&&_4(e.children[0])?e.children[0]:{type:"element",tagName:"div",properties:{},children:e.children};else if(!_4(e))throw new Error("Expected root or element, not `"+(e&&e.type||e)+"`");return lj(t,e,{schema:r.space==="svg"?aj:PLe,prefix:a??(i||s||o?"h-":null),key:0,react:i,vue:s,vdom:o,hyperscript:WLe(t)})}function lj(t,e,n){var r=n.schema,i=r,s=e.tagName,o={},a=[],l=-1,c,u;r.space==="html"&&s.toLowerCase()==="svg"&&(i=aj,n.schema=i);for(c in e.properties)GLe(o,c,e.properties[c],n,s);if(n.vdom&&(i.space==="html"?s=s.toUpperCase():o.namespace=kLe[i.space]),n.prefix&&(n.key++,o.key=n.prefix+n.key),e.children)for(;++l<e.children.length;)u=e.children[l],_4(u)?a.push(lj(t,u,n)):ULe(u)&&a.push(u.value);return n.schema=r,a.length?t.call(e,s,o,a):t.call(e,s,o)}function GLe(t,e,n,r,i){var s=LLe(r.schema,e),o;n==null||n!==n||n===!1&&(r.vue||r.vdom||r.hyperscript)||!n&&s.boolean&&(r.vue||r.vdom||r.hyperscript)||(n&&typeof n=="object"&&"length"in n&&(n=(s.commaSeparated?DLe:OLe).stringify(n)),s.boolean&&r.hyperscript&&(n=""),s.property==="style"&&typeof n=="string"&&(r.react||r.vue||r.vdom)&&(n=XLe(n,i)),r.vue?s.property!=="style"&&(o="attrs"):s.mustUseProperty||(r.vdom?s.property!=="style"&&(o="attributes"):r.hyperscript&&(o="attrs")),o?(t[o]||(t[o]={}),t[o][s.attribute]=n):s.space&&r.react?t[NLe[s.property]||s.property]=n:t[s.attribute]=n)}function VLe(t){var e=t&&t("div");return!!(e&&("_owner"in e||"_store"in e)&&e.key==null)}function WLe(t){return!!(t&&t.context&&t.cleanup)}function jLe(t){return t&&t("div").type==="VirtualNode"}function $Le(t){var e=t&&t("div");return!!(e&&e.context&&e.context._isVue)}function XLe(t,e){var n={};try{BLe(t,r)}catch(i){throw i.message=e+"[style]"+i.message.slice(9),i}return n;function r(i,s){i.slice(0,4)==="-ms-"&&(i="ms-"+i.slice(4)),n[i.replace(/-([a-z])/g,YLe)]=s}}function YLe(t,e){return e.toUpperCase()}var qLe=cj;function cj(t){if(typeof t=="string")return ZLe(t);if(t==null)return eNe;if(typeof t=="object")return("length"in t?QLe:JLe)(t);if(typeof t=="function")return t;throw new Error("Expected function, string, or object as test")}function KLe(t){for(var e=[],n=t.length,r=-1;++r<n;)e[r]=cj(t[r]);return e}function JLe(t){return e;function e(n){var r;for(r in t)if(n[r]!==t[r])return!1;return!0}}function QLe(t){var e=KLe(t),n=e.length;return r;function r(){for(var i=-1;++i<n;)if(e[i].apply(this,arguments))return!0;return!1}}function ZLe(t){return e;function e(n){return!!(n&&n.type===t)}}function eNe(){return!0}var tNe=Y_,nNe=qLe,uj=!0,fj="skip",h3=!1;Y_.CONTINUE=uj;Y_.SKIP=fj;Y_.EXIT=h3;function Y_(t,e,n,r){var i;typeof e=="function"&&typeof n!="function"&&(r=n,n=e,e=null),i=nNe(e),s(t,null,[]);function s(a,l,c){var u=[],f;return(!e||i(a,l,c[c.length-1]||null))&&(u=kO(n(a,c)),u[0]===h3)?u:a.children&&u[0]!==fj?(f=kO(o(a.children,c.concat(a))),f[0]===h3?f:u):u}function o(a,l){for(var c=-1,u=r?-1:1,f=(r?a.length:c)+u,h;f>c&&f<a.length;){if(h=s(a[f],f,l),h[0]===h3)return h;f=typeof h[1]=="number"?h[1]:f+u}}}function kO(t){return t!==null&&typeof t=="object"&&"length"in t?t:typeof t=="number"?[uj,t]:[t]}var rNe=K_,q_=tNe,iNe=q_.CONTINUE,sNe=q_.SKIP,oNe=q_.EXIT;K_.CONTINUE=iNe;K_.SKIP=sNe;K_.EXIT=oNe;function K_(t,e,n,r){typeof e=="function"&&typeof n!="function"&&(r=n,n=e,e=null),q_(t,e,i,r);function i(s,o){var a=o[o.length-1],l=a?a.children.indexOf(s):null;return n(s,l,a)}}var aNe=rNe,lNe=Object.prototype.hasOwnProperty,KT={align:"text-align",valign:"vertical-align",height:"height",width:"width"},cNe=function(e){return aNe(e,"element",uNe),e};function uNe(t){if(!(t.tagName!=="tr"&&t.tagName!=="td"&&t.tagName!=="th")){var e,n;for(e in KT)!lNe.call(KT,e)||t.properties[e]===void 0||(n=KT[e],fNe(t,n,t.properties[e]),delete t.properties[e])}}function fNe(t,e,n){var r=(t.properties.style||"").trim();r&&!/;\s*/.test(r)&&(r+=";"),r&&(r+=" ");var i=r+e+": "+n+";";t.properties.style=i}var hNe=zLe,dNe=cNe,pNe=vNe,mNe={}.hasOwnProperty,gNe=new Set(["table","thead","tbody","tfoot","tr","th","td"]);function vNe(t){var e=t||{},n=e.createElement;this.Compiler=r;function r(s){var o=hNe(i,dNe(s),e.prefix);return s.type==="root"?(o=o.type==="div"&&(s.children.length!==1||s.children[0].type!=="element")?o.props.children:[o],n(e.Fragment||"div",{},o)):o}function i(s,o,a){var l=s;return a&&gNe.has(s)&&(a=a.filter(function(c){return c!==`
`})),e.components&&mNe.call(e.components,s)&&(l=e.components[s],e.passNode&&(o.node=this)),n(l,o,a)}}const yNe=go(pNe);function b4(){return b4=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b4.apply(this,arguments)}function xNe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var ENe=["children"],_Ne=function(e){var n=e===void 0?{}:e,r=n.remarkParseOptions,i=n.remarkToRehypeOptions,s=n.rehypeReactOptions,o=n.remarkPlugins,a=o===void 0?[]:o,l=n.rehypePlugins,c=l===void 0?[]:l,u=n.onError,f=u===void 0?function(){}:u,h=E.useState(null),d=h[0],p=h[1],m=E.useCallback(function(g){M5e().use(gRe,r).use(a).use(FIe,i).use(c).use(yNe,b4({createElement:E.createElement,Fragment:E.Fragment},s)).process(g).then(function(v){return p(v.result)}).catch(f)},[]);return[d,m]},bNe=function(e){var n=e.children,r=xNe(e,ENe),i=_Ne(r),s=i[0],o=i[1];return E.useEffect(function(){o(n)},[n,o]),s};function ANe({_key:t,children:e,style:n,...r}){const{markdown:i}=E.useMemo(()=>({markdown:typeof e=="string"?e:e.join(" ")}),[e,n]);return ce.jsx(bNe,{rehypePlugins:[L4e],remarkToRehypeOptions:{allowDangerousHtml:!0},...r,children:i})}function TNe({_key:t,children:e,...n}){const r=E.useRef(null),i=E.useMemo(()=>()=>{setTimeout(()=>{var s;(s=r.current)==null||s.scrollIntoView({behavior:"smooth"})},.016)},[]);return E.useEffect(()=>{i()},[e,i]),ce.jsxs("div",{...n,children:[e,ce.jsx("div",{ref:r})]},t)}const wNe="This is not an object",SNe="This is not a Float16Array object",FO="This constructor is not a subclass of Float16Array",hj="The constructor property value is not an object",CNe="Species constructor didn't return TypedArray object",MNe="Derived constructor created TypedArray object which was too small length",P1="Attempting to access detached ArrayBuffer",A4="Cannot convert undefined or null to object",T4="Cannot mix BigInt and other types, use explicit conversions",UO="@@iterator property is not callable",zO="Reduce of empty array with no initial value",RNe="The comparison function must be either a function or undefined",JT="Offset is out of bounds";function qr(t){return(e,...n)=>Ro(t,e,n)}function _m(t,e){return qr(Fp(t,e).get)}const{apply:Ro,construct:o1,defineProperty:HO,get:QT,getOwnPropertyDescriptor:Fp,getPrototypeOf:Jg,has:w4,ownKeys:dj,set:GO,setPrototypeOf:pj}=Reflect,INe=Proxy,{EPSILON:PNe,MAX_SAFE_INTEGER:VO,isFinite:mj,isNaN:Up}=Number,{iterator:ql,species:LNe,toStringTag:hM,for:NNe}=Symbol,zp=Object,{create:J_,defineProperty:Qg,freeze:ONe,is:WO}=zp,S4=zp.prototype,DNe=S4.__lookupGetter__?qr(S4.__lookupGetter__):(t,e)=>{if(t==null)throw ti(A4);let n=zp(t);do{const r=Fp(n,e);if(r!==void 0)return Mc(r,"get")?r.get:void 0}while((n=Jg(n))!==null)},Mc=zp.hasOwn||qr(S4.hasOwnProperty),gj=Array,BNe=gj.isArray,Q_=gj.prototype,kNe=qr(Q_.join),FNe=qr(Q_.push),UNe=qr(Q_.toLocaleString),dM=Q_[ql],zNe=qr(dM),{abs:HNe,trunc:vj}=Math,Z_=ArrayBuffer,GNe=Z_.isView,yj=Z_.prototype,VNe=qr(yj.slice),WNe=_m(yj,"byteLength"),C4=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null,jNe=C4&&_m(C4.prototype,"byteLength"),pM=Jg(Uint8Array),$Ne=pM.from,xs=pM.prototype,XNe=xs[ql],YNe=qr(xs.keys),qNe=qr(xs.values),KNe=qr(xs.entries),JNe=qr(xs.set),jO=qr(xs.reverse),QNe=qr(xs.fill),ZNe=qr(xs.copyWithin),$O=qr(xs.sort),q0=qr(xs.slice),eOe=qr(xs.subarray),fs=_m(xs,"buffer"),Pf=_m(xs,"byteOffset"),xr=_m(xs,"length"),xj=_m(xs,hM),tOe=Uint8Array,qo=Uint16Array,XO=(...t)=>Ro($Ne,qo,t),mM=Uint32Array,nOe=Float32Array,yh=Jg([][ql]()),eb=qr(yh.next),rOe=qr(function*(){}().next),iOe=Jg(yh),ti=TypeError,ZT=RangeError,Ej=WeakSet,_j=Ej.prototype,sOe=qr(_j.add),oOe=qr(_j.has),tb=WeakMap,gM=tb.prototype,aE=qr(gM.get),aOe=qr(gM.has),vM=qr(gM.set),bj=new tb,lOe=J_(null,{next:{value:function(){const e=aE(bj,this);return eb(e)}},[ql]:{value:function(){return this}}});function Gx(t){if(t[ql]===dM&&yh.next===eb)return t;const e=J_(lOe);return vM(bj,e,zNe(t)),e}const Aj=new tb,Tj=J_(iOe,{next:{value:function(){const e=aE(Aj,this);return rOe(e)},writable:!0,configurable:!0}});for(const t of dj(yh))t!=="next"&&Qg(Tj,t,Fp(yh,t));function YO(t){const e=J_(Tj);return vM(Aj,e,t),e}function lE(t){return t!==null&&typeof t=="object"||typeof t=="function"}function qO(t){return t!==null&&typeof t=="object"}function cE(t){return xj(t)!==void 0}function M4(t){const e=xj(t);return e==="BigInt64Array"||e==="BigUint64Array"}function cOe(t){try{return WNe(t),!0}catch{return!1}}function wj(t){if(C4===null)return!1;try{return jNe(t),!0}catch{return!1}}function uOe(t){return cOe(t)||wj(t)}function KO(t){return BNe(t)?t[ql]===dM&&yh.next===eb:!1}function fOe(t){return cE(t)?t[ql]===XNe&&yh.next===eb:!1}function Vx(t){if(typeof t!="string")return!1;const e=+t;return t!==e+""||!mj(e)?!1:e===vj(e)}const uE=NNe("__Float16Array__");function hOe(t){if(!qO(t))return!1;const e=Jg(t);if(!qO(e))return!1;const n=e.constructor;if(n===void 0)return!1;if(!lE(n))throw ti(hj);return w4(n,uE)}const R4=1/PNe;function dOe(t){return t+R4-R4}const Sj=6103515625e-14,pOe=65504,Cj=.0009765625,JO=Cj*Sj,mOe=Cj*R4;function gOe(t){const e=+t;if(!mj(e)||e===0)return e;const n=e>0?1:-1,r=HNe(e);if(r<Sj)return n*dOe(r/JO)*JO;const i=(1+mOe)*r,s=i-(i-r);return s>pOe||Up(s)?n*(1/0):n*s}const Mj=new Z_(4),Rj=new nOe(Mj),Ij=new mM(Mj),nl=new qo(512),rl=new tOe(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(nl[t]=0,nl[t|256]=32768,rl[t]=24,rl[t|256]=24):e<-14?(nl[t]=1024>>-e-14,nl[t|256]=1024>>-e-14|32768,rl[t]=-e-1,rl[t|256]=-e-1):e<=15?(nl[t]=e+15<<10,nl[t|256]=e+15<<10|32768,rl[t]=13,rl[t|256]=13):e<128?(nl[t]=31744,nl[t|256]=64512,rl[t]=24,rl[t|256]=24):(nl[t]=31744,nl[t|256]=64512,rl[t]=13,rl[t|256]=13)}function Ol(t){Rj[0]=gOe(t);const e=Ij[0],n=e>>23&511;return nl[n]+((e&8388607)>>rl[n])}const yM=new mM(2048);for(let t=1;t<1024;++t){let e=t<<13,n=0;for(;!(e&8388608);)e<<=1,n-=8388608;e&=-8388609,n+=947912704,yM[t]=e|n}for(let t=1024;t<2048;++t)yM[t]=939524096+(t-1024<<13);const bm=new mM(64);for(let t=1;t<31;++t)bm[t]=t<<23;bm[31]=1199570944;bm[32]=2147483648;for(let t=33;t<63;++t)bm[t]=2147483648+(t-32<<23);bm[63]=3347054592;const Pj=new qo(64);for(let t=1;t<64;++t)t!==32&&(Pj[t]=1024);function Nr(t){const e=t>>10;return Ij[0]=yM[Pj[e]+(t&1023)]+bm[e],Rj[0]}function xc(t){const e=+t;return Up(e)||e===0?0:vj(e)}function ew(t){const e=xc(t);return e<0?0:e<VO?e:VO}function Wx(t,e){if(!lE(t))throw ti(wNe);const n=t.constructor;if(n===void 0)return e;if(!lE(n))throw ti(hj);const r=n[LNe];return r??e}function L1(t){if(wj(t))return!1;try{return VNe(t,0,0),!1}catch{}return!0}function QO(t,e){const n=Up(t),r=Up(e);if(n&&r)return 0;if(n)return 1;if(r||t<e)return-1;if(t>e)return 1;if(t===0&&e===0){const i=WO(t,0),s=WO(e,0);if(!i&&s)return-1;if(i&&!s)return 1}return 0}const xM=2,fE=new tb;function vp(t){return aOe(fE,t)||!GNe(t)&&hOe(t)}function yr(t){if(!vp(t))throw ti(SNe)}function jx(t,e){const n=vp(t),r=cE(t);if(!n&&!r)throw ti(CNe);if(typeof e=="number"){let i;if(n){const s=$n(t);i=xr(s)}else i=xr(t);if(i<e)throw ti(MNe)}if(M4(t))throw ti(T4)}function $n(t){const e=aE(fE,t);if(e!==void 0){const i=fs(e);if(L1(i))throw ti(P1);return e}const n=t.buffer;if(L1(n))throw ti(P1);const r=o1(ei,[n,t.byteOffset,t.length],t.constructor);return aE(fE,r)}function ZO(t){const e=xr(t),n=[];for(let r=0;r<e;++r)n[r]=Nr(t[r]);return n}const Lj=new Ej;for(const t of dj(xs)){if(t===hM)continue;const e=Fp(xs,t);Mc(e,"get")&&typeof e.get=="function"&&sOe(Lj,e.get)}const vOe=ONe({get(t,e,n){return Vx(e)&&Mc(t,e)?Nr(QT(t,e)):oOe(Lj,DNe(t,e))?QT(t,e):QT(t,e,n)},set(t,e,n,r){return Vx(e)&&Mc(t,e)?GO(t,e,Ol(n)):GO(t,e,n,r)},getOwnPropertyDescriptor(t,e){if(Vx(e)&&Mc(t,e)){const n=Fp(t,e);return n.value=Nr(n.value),n}return Fp(t,e)},defineProperty(t,e,n){return Vx(e)&&Mc(t,e)&&Mc(n,"value")&&(n.value=Ol(n.value)),HO(t,e,n)}});class ei{constructor(e,n,r){let i;if(vp(e))i=o1(qo,[$n(e)],new.target);else if(lE(e)&&!uOe(e)){let o,a;if(cE(e)){o=e,a=xr(e);const l=fs(e);if(L1(l))throw ti(P1);if(M4(e))throw ti(T4);const c=new Z_(a*xM);i=o1(qo,[c],new.target)}else{const l=e[ql];if(l!=null&&typeof l!="function")throw ti(UO);l!=null?KO(e)?(o=e,a=e.length):(o=[...e],a=o.length):(o=e,a=ew(o.length)),i=o1(qo,[a],new.target)}for(let l=0;l<a;++l)i[l]=Ol(o[l])}else i=o1(qo,arguments,new.target);const s=new INe(i,vOe);return vM(fE,s,i),s}static from(e,...n){const r=this;if(!w4(r,uE))throw ti(FO);if(r===ei){if(vp(e)&&n.length===0){const u=$n(e),f=new qo(fs(u),Pf(u),xr(u));return new ei(fs(q0(f)))}if(n.length===0)return new ei(fs(XO(e,Ol)));const l=n[0],c=n[1];return new ei(fs(XO(e,function(u,...f){return Ol(Ro(l,this,[u,...Gx(f)]))},c)))}let i,s;const o=e[ql];if(o!=null&&typeof o!="function")throw ti(UO);if(o!=null)KO(e)?(i=e,s=e.length):fOe(e)?(i=e,s=xr(e)):(i=[...e],s=i.length);else{if(e==null)throw ti(A4);i=zp(e),s=ew(i.length)}const a=new r(s);if(n.length===0)for(let l=0;l<s;++l)a[l]=i[l];else{const l=n[0],c=n[1];for(let u=0;u<s;++u)a[u]=Ro(l,c,[i[u],u])}return a}static of(...e){const n=this;if(!w4(n,uE))throw ti(FO);const r=e.length;if(n===ei){const s=new ei(r),o=$n(s);for(let a=0;a<r;++a)o[a]=Ol(e[a]);return s}const i=new n(r);for(let s=0;s<r;++s)i[s]=e[s];return i}keys(){yr(this);const e=$n(this);return YNe(e)}values(){yr(this);const e=$n(this);return YO(function*(){for(const n of qNe(e))yield Nr(n)}())}entries(){yr(this);const e=$n(this);return YO(function*(){for(const[n,r]of KNe(e))yield[n,Nr(r)]}())}at(e){yr(this);const n=$n(this),r=xr(n),i=xc(e),s=i>=0?i:r+i;if(!(s<0||s>=r))return Nr(n[s])}with(e,n){yr(this);const r=$n(this),i=xr(r),s=xc(e),o=s>=0?s:i+s,a=+n;if(o<0||o>=i)throw ZT(JT);const l=new qo(fs(r),Pf(r),xr(r)),c=new ei(fs(q0(l))),u=$n(c);return u[o]=Ol(a),c}map(e,...n){yr(this);const r=$n(this),i=xr(r),s=n[0],o=Wx(r,ei);if(o===ei){const l=new ei(i),c=$n(l);for(let u=0;u<i;++u){const f=Nr(r[u]);c[u]=Ol(Ro(e,s,[f,u,this]))}return l}const a=new o(i);jx(a,i);for(let l=0;l<i;++l){const c=Nr(r[l]);a[l]=Ro(e,s,[c,l,this])}return a}filter(e,...n){yr(this);const r=$n(this),i=xr(r),s=n[0],o=[];for(let c=0;c<i;++c){const u=Nr(r[c]);Ro(e,s,[u,c,this])&&FNe(o,u)}const a=Wx(r,ei),l=new a(o);return jx(l),l}reduce(e,...n){yr(this);const r=$n(this),i=xr(r);if(i===0&&n.length===0)throw ti(zO);let s,o;n.length===0?(s=Nr(r[0]),o=1):(s=n[0],o=0);for(let a=o;a<i;++a)s=e(s,Nr(r[a]),a,this);return s}reduceRight(e,...n){yr(this);const r=$n(this),i=xr(r);if(i===0&&n.length===0)throw ti(zO);let s,o;n.length===0?(s=Nr(r[i-1]),o=i-2):(s=n[0],o=i-1);for(let a=o;a>=0;--a)s=e(s,Nr(r[a]),a,this);return s}forEach(e,...n){yr(this);const r=$n(this),i=xr(r),s=n[0];for(let o=0;o<i;++o)Ro(e,s,[Nr(r[o]),o,this])}find(e,...n){yr(this);const r=$n(this),i=xr(r),s=n[0];for(let o=0;o<i;++o){const a=Nr(r[o]);if(Ro(e,s,[a,o,this]))return a}}findIndex(e,...n){yr(this);const r=$n(this),i=xr(r),s=n[0];for(let o=0;o<i;++o){const a=Nr(r[o]);if(Ro(e,s,[a,o,this]))return o}return-1}findLast(e,...n){yr(this);const r=$n(this),i=xr(r),s=n[0];for(let o=i-1;o>=0;--o){const a=Nr(r[o]);if(Ro(e,s,[a,o,this]))return a}}findLastIndex(e,...n){yr(this);const r=$n(this),i=xr(r),s=n[0];for(let o=i-1;o>=0;--o){const a=Nr(r[o]);if(Ro(e,s,[a,o,this]))return o}return-1}every(e,...n){yr(this);const r=$n(this),i=xr(r),s=n[0];for(let o=0;o<i;++o)if(!Ro(e,s,[Nr(r[o]),o,this]))return!1;return!0}some(e,...n){yr(this);const r=$n(this),i=xr(r),s=n[0];for(let o=0;o<i;++o)if(Ro(e,s,[Nr(r[o]),o,this]))return!0;return!1}set(e,...n){yr(this);const r=$n(this),i=xc(n[0]);if(i<0)throw ZT(JT);if(e==null)throw ti(A4);if(M4(e))throw ti(T4);if(vp(e))return JNe($n(this),$n(e),i);if(cE(e)){const l=fs(e);if(L1(l))throw ti(P1)}const s=xr(r),o=zp(e),a=ew(o.length);if(i===1/0||a+i>s)throw ZT(JT);for(let l=0;l<a;++l)r[l+i]=Ol(o[l])}reverse(){yr(this);const e=$n(this);return jO(e),this}toReversed(){yr(this);const e=$n(this),n=new qo(fs(e),Pf(e),xr(e)),r=new ei(fs(q0(n))),i=$n(r);return jO(i),r}fill(e,...n){yr(this);const r=$n(this);return QNe(r,Ol(e),...Gx(n)),this}copyWithin(e,n,...r){yr(this);const i=$n(this);return ZNe(i,e,n,...Gx(r)),this}sort(e){yr(this);const n=$n(this),r=e!==void 0?e:QO;return $O(n,(i,s)=>r(Nr(i),Nr(s))),this}toSorted(e){yr(this);const n=$n(this);if(e!==void 0&&typeof e!="function")throw new ti(RNe);const r=e!==void 0?e:QO,i=new qo(fs(n),Pf(n),xr(n)),s=new ei(fs(q0(i))),o=$n(s);return $O(o,(a,l)=>r(Nr(a),Nr(l))),s}slice(e,n){yr(this);const r=$n(this),i=Wx(r,ei);if(i===ei){const p=new qo(fs(r),Pf(r),xr(r));return new ei(fs(q0(p,e,n)))}const s=xr(r),o=xc(e),a=n===void 0?s:xc(n);let l;o===-1/0?l=0:o<0?l=s+o>0?s+o:0:l=s<o?s:o;let c;a===-1/0?c=0:a<0?c=s+a>0?s+a:0:c=s<a?s:a;const u=c-l>0?c-l:0,f=new i(u);if(jx(f,u),u===0)return f;const h=fs(r);if(L1(h))throw ti(P1);let d=0;for(;l<c;)f[d]=Nr(r[l]),++l,++d;return f}subarray(e,n){yr(this);const r=$n(this),i=Wx(r,ei),s=new qo(fs(r),Pf(r),xr(r)),o=eOe(s,e,n),a=new i(fs(o),Pf(o),xr(o));return jx(a),a}indexOf(e,...n){yr(this);const r=$n(this),i=xr(r);let s=xc(n[0]);if(s===1/0)return-1;s<0&&(s+=i,s<0&&(s=0));for(let o=s;o<i;++o)if(Mc(r,o)&&Nr(r[o])===e)return o;return-1}lastIndexOf(e,...n){yr(this);const r=$n(this),i=xr(r);let s=n.length>=1?xc(n[0]):i-1;if(s===-1/0)return-1;s>=0?s=s<i-1?s:i-1:s+=i;for(let o=s;o>=0;--o)if(Mc(r,o)&&Nr(r[o])===e)return o;return-1}includes(e,...n){yr(this);const r=$n(this),i=xr(r);let s=xc(n[0]);if(s===1/0)return!1;s<0&&(s+=i,s<0&&(s=0));const o=Up(e);for(let a=s;a<i;++a){const l=Nr(r[a]);if(o&&Up(l)||l===e)return!0}return!1}join(e){yr(this);const n=$n(this),r=ZO(n);return kNe(r,e)}toLocaleString(...e){yr(this);const n=$n(this),r=ZO(n);return UNe(r,...Gx(e))}get[hM](){if(vp(this))return"Float16Array"}}Qg(ei,"BYTES_PER_ELEMENT",{value:xM});Qg(ei,uE,{});pj(ei,pM);const hE=ei.prototype;Qg(hE,"BYTES_PER_ELEMENT",{value:xM});Qg(hE,ql,{value:hE.values,writable:!0,configurable:!0});pj(hE,xs);function I4(t){const e=new ei(t.buffer.slice(t.byteOffset),0,t.length/2),n=[];return e.forEach(r=>n.push(r)),new Float32Array(n)}function yOe({_ref:t,_key:e,position:n=[0,0,0],rotation:r=[0,0,0],vertices:i,matrix:s,colors:o,size:a=.01,color:l,...c}){const u=E.useRef(),f=t||u,h=E.useMemo(()=>({now:Date.now(),vertices:I4(i),colors:o&&Float32Array.from(o,d=>d/255)}),[i,o]);return E.useLayoutEffect(()=>{const d=f.current;d&&s&&(d.matrix.fromArray(s),d.matrix.decompose(d.position,d.quaternion,d.scale),d.rotation.setFromQuaternion(d.quaternion))},[s,f.current]),ce.jsxs("points",{ref:t,position:n,rotation:r,castShadow:!0,receiveShadow:!0,...c,children:[ce.jsxs("bufferGeometry",{children:[ce.jsx("bufferAttribute",{attach:"attributes-position",array:h.vertices,count:h.vertices.length/3,itemSize:3}),h.colors&&ce.jsx("bufferAttribute",{attach:"attributes-color",array:h.colors,count:h.colors.length/3,itemSize:3})]}),ce.jsx("pointsMaterial",{attach:"material",vertexColors:o!==void 0,color:l,size:a})]},e+h.now)}var Nj=(t=>(t[t.front=0]="front",t[t.back=1]="back",t[t.double=2]="double",t))(Nj||{});function xOe({position:t=[0,0,0],rotation:e=[0,0,0],vertices:n,faces:r,colors:i,color:s,uv:o,materialType:a="standard",wireframe:l,opacity:c,side:u="double",material:f,...h}){var d;const p=E.useMemo(()=>{const C=Uint8Array.BYTES_PER_ELEMENT/Float32Array.BYTES_PER_ELEMENT;return{vertices:I4(n),faces:new Uint32Array(r.buffer.slice(r.byteOffset),0,C*r.byteLength),colors:i&&Float32Array.from(i,S=>S/255),uv:o&&I4(o)}},[n,r,i,o]),[m,g]=E.useState({}),[v,x]=E.useState({}),y=E.useMemo(()=>new Ki,[]),A=E.useRef(),T=E.useRef(!1),w=f?Object.values(f):[];if(E.useLayoutEffect(()=>{for(const C in f){const S=f[C],R=C.endsWith("map")||C.endsWith("Map");typeof S=="string"&&R?y&&y.load(S,O=>{const L=f[`${C}Repeat`];L&&(O.wrapS=O.wrapT=Rr,O.repeat.set(...L)),x(B=>({...B,[C]:O})),T.current=!0}):(g(O=>({...O,[C]:S})),T.current=!0)}},w),T.current){T.current=!1;const C=(d=A==null?void 0:A.current)==null?void 0:d.material;C&&(C.needsUpdate=!0)}E.useLayoutEffect(()=>{var C;const S=(C=A==null?void 0:A.current)==null?void 0:C.geometry;!S||!p.uv||(S.attributes.uv=new Qt(p.uv,2))},[p.uv]);const M=`mesh${a.charAt(0).toUpperCase()}${a.slice(1)}Material`;return ce.jsxs("mesh",{ref:A,position:t,rotation:e,castShadow:!0,receiveShadow:!0,...h,children:[ce.jsxs("bufferGeometry",{onUpdate:C=>C.computeVertexNormals(),children:[ce.jsx("bufferAttribute",{attach:"attributes-position",array:p.vertices,count:p.vertices.length/3,itemSize:3}),p.colors&&ce.jsx("bufferAttribute",{attach:"attributes-color",array:p.colors,count:p.colors.length/3,itemSize:3}),ce.jsx("bufferAttribute",{attach:"index",array:p.faces,count:p.faces.length,itemSize:1})]}),ce.jsx(M,{attach:"material",wireframe:l,vertexColors:!!i,color:s,transparent:!0,alphaTest:1,opacity:c,side:Nj[u],...m,...v})]})}function EOe({src:t}){const{scene:e}=wt(),n=E.useMemo(()=>new Ki,[]),[r,i]=E.useState(),s=typeof t=="string"&&(t==null?void 0:t.length)===0,{backgroundIntensity:o,backgroundBlurriness:a}=Mr("Scene Background Image",{backgroundIntensity:-.5,backgroundBlurriness:0});return E.useEffect(()=>{if(!t||s)return i(void 0);if(typeof t=="string")n.load(t,i);else{const l=new Blob([t],{type:"image"}),c=new Vn;createImageBitmap(l,{imageOrientation:"flipY"}).then(u=>{c.image=u,c.needsUpdate=!0,c.colorSpace=mi,i(c)})}},[t]),E.useEffect(()=>{e.backgroundIntensity=o,e.backgroundBlurriness=a},[o,a]),E.useEffect(()=>{r&&(e.background=r)},[r,r==null?void 0:r.needsUpdate]),null}function fg(t,{start:e=!1,repeat:n,offset:r}={}){const i=wt(a=>a.gl),s=E.useMemo(()=>{if(!t)return null;const a=new NF(t);return"colorSpace"in a?a.colorSpace=i.outputColorSpace:a.encoding=i.outputEncoding,a},[t]),o=oi().isPresenting;return rn(()=>{s&&o&&!s.image.paused&&(s.needsUpdate=!0)}),E.useEffect(()=>{s&&(n&&(s.repeat=new qe(...n)),r&&(s.offset=new qe(...r)))},[n,r]),E.useEffect(()=>{if(s&&e)return s.image.play(),()=>s.image.pause()},[s,e,o]),s}function _Oe(t,e){return t.addTransceiver("video",{direction:"recvonly"}),t.addTransceiver("audio",{direction:"recvonly"}),t.createOffer().then(n=>t.setLocalDescription(n)).then(()=>new Promise(n=>{if(t.iceGatheringState==="complete")n();else{const r=()=>{t.iceGatheringState==="complete"&&(t.removeEventListener("icegatheringstatechange",r),n())};t.addEventListener("icegatheringstatechange",r)}})).then(()=>{const n=t.localDescription;return fetch(e,{body:JSON.stringify({sdp:n.sdp,type:n.type}),headers:{"Content-Type":"application/json"},method:"POST"})}).then(n=>n.json()).then(n=>t.setRemoteDescription(n)).catch(n=>{alert(n)})}const bOe={urls:"stun:stun.l.google.com:19302"};function Oj(t,{iceServer:e=bOe,iceServers:n=[],...r}){const[i,s]=E.useState(null);return E.useEffect(()=>{const o=e?[e,...n]:n,a=new RTCPeerConnection({iceServers:o,...r});return a.addEventListener("track",l=>{l.track.kind=="video"&&s(l.streams[0])}),_Oe(a,t),()=>a.close()},[t]),i}function EM(t,{unsuspend:e="loadedmetadata",crossOrigin:n="Anonymous",muted:r=!0,loop:i=!0,start:s=!0,playsInline:o=!0,...a}={}){const l=vh(()=>new Promise((u,f)=>{if(!t)return u(null);const h=Object.assign(document.createElement("video"),{src:typeof t=="string"&&t||void 0,srcObject:t instanceof MediaStream&&t||void 0,autoplay:s,crossOrigin:n,loop:i,muted:r,playsInline:o,...a});h.addEventListener(e,()=>u(h)),h.addEventListener("error",()=>f(null))}),[t]),{isPresenting:c}=oi();return E.useEffect(()=>{if(l&&s)return l.play(),()=>l.pause()},[l,s,c]),l}function _M({src:t,start:e,textureRepeat:n,textureOffset:r,...i}){const s=EM(t),o=fg(s,{start:e});return E.useEffect(()=>{n&&(o.repeat=new qe(...n)),r&&(o.offset=new qe(...r))},[n,r]),o?ce.jsx("meshBasicMaterial",{map:o,toneMapped:!1,...i}):null}function Dj({src:t,iceServer:e={urls:"stun:stun.l.google.com:19302"},webRTCOptions:n,...r}){const i=Oj(t,{iceServer:e,...n});if(!(!t||!i))return ce.jsx(_M,{src:i,...r})}function xh({distanceToCamera:t=10,aspect:e,height:n,position:r,rotation:i,quaternion:s,matrix:o,fixed:a=!1,layers:l=null,children:c}){const u=E.useRef(),{camera:f}=wt(),h=oi(d=>d.isPresenting);return E.useEffect(()=>{u.current&&typeof l=="number"&&h&&u.current.layers.set(l)},[l,u.current,h]),E.useLayoutEffect(()=>{if(!u.current||!a)return;const d=u.current;o?(d.matrix.fromArray(o),d.matrix.decompose(d.position,d.quaternion,d.scale),d.rotation.setFromQuaternion(d.quaternion)):(s?d.quaternion.fromArray(s):i&&d.rotation.set(...i),r&&d.position.set(...r))},[o,s,i,r,a]),rn(()=>{const d=u.current;let p,m,g;if(typeof n=="number"&&typeof e=="number")d.scale.set(n*e,n,1);else if(f.type==="PerspectiveCamera"){const T=f;typeof n=="number"?p=n:p=2*Math.tan(T.fov/360*Math.PI)*t,typeof e=="number"?g=e:g=T.aspect,m=g*p,d.scale.set(m,p,1)}else if(f.type==="OrthographicCamera"){const T=f;p=(T.top-T.bottom)/f.zoom,m=(T.right-T.left)/f.zoom,d.scale.set(m,p,1)}else console.warn("Unsupported camera type",f.type);if(a)return;if(o){d.matrix.fromArray(o),d.matrix.premultiply(f.matrixWorld),d.matrix.decompose(d.position,d.quaternion,d.scale),d.rotation.setFromQuaternion(d.quaternion);return}f.matrixWorld.decompose(d.position,f.quaternion,[]),s?(d.quaternion.fromArray(s),d.quaternion.premultiply(f.quaternion)):i?(d.quaternion.setFromEuler(new wi().fromArray(i)),d.quaternion.premultiply(f.quaternion)):d.quaternion.copy(f.quaternion);const[v,x,y]=r||[0,0,0],A=new J(v,x,y-t).applyQuaternion(f.quaternion);d.position.add(A)}),ce.jsxs("mesh",{ref:u,scale:[1,1,1],children:[ce.jsx("planeGeometry",{args:[1,1]}),c]})}function AOe({src:t,start:e=!0,...n}){return ce.jsx(xh,{...n,children:ce.jsx(_M,{src:t,start:e,...n})})}function TOe({src:t,start:e=!0,iceServer:n,webRTCOptions:r,...i}){return ce.jsx(xh,{...i,children:ce.jsx(Dj,{src:t,start:e,iceServer:n,webRTCOptions:r})})}const wOe=({src:t,iceServer:e={urls:"stun:stun.l.google.com:19302"},side:n=2,rtcOptions:r,crossOrigin:i="Anonymous",muted:s=!0,loop:o=!0,start:a=!0,playsInline:l=!0,...c})=>{const u=Oj(t,{iceServer:e,...r}),f=EM(u,{crossOrigin:i,muted:s,loop:o,start:a,playsInline:l}),h=fg(f,{repeat:[.5,1],offset:[0,0]}),d=fg(f,{repeat:[.5,1],offset:[.5,0]});return ce.jsxs(ce.Fragment,{children:[ce.jsx(xh,{layers:1,...c,children:h&&ce.jsx("meshBasicMaterial",{map:h,toneMapped:!1,side:2,...c})}),ce.jsx(xh,{layers:2,...c,children:d&&ce.jsx("meshBasicMaterial",{map:d,toneMapped:!1,side:2,...c})})]})},SOe=({src:t,side:e=2,crossOrigin:n="Anonymous",muted:r=!0,loop:i=!0,start:s=!0,playsInline:o=!0,...a})=>{const l=EM(t,{crossOrigin:n,muted:r,loop:i,start:s,playsInline:o}),c=fg(l,{repeat:[.5,1],offset:[0,0]}),u=fg(l,{repeat:[.5,1],offset:[.5,0]});return ce.jsxs(ce.Fragment,{children:[ce.jsx(xh,{layers:1,...a,children:c&&ce.jsx("meshBasicMaterial",{map:c,toneMapped:!1,side:2,...a})}),ce.jsx(xh,{layers:2,...a,children:u&&ce.jsx("meshBasicMaterial",{map:u,toneMapped:!1,side:2,...a})})]})},eD=[{position:new J(1,0,0),rotation:new wi(0,0,-.5*Math.PI),color:new bt(16711680)},{position:new J(0,1,0),rotation:new wi(0,0,0),color:new bt(65280)},{position:new J(0,0,1),rotation:new wi(.5*Math.PI,0,0),color:new bt(255)}];function COe({matrix:t,position:e,rotation:n,direction:r=[1,0,0],scale:i=1,headScale:s=1,lod:o=10,color:a="red",opacity:l=1,wireframe:c=!1}){const u=E.useRef(),f=E.useRef(),h=E.useRef(),d=E.useMemo(()=>new bt(a),[a]),p=E.useMemo(()=>new hn,[]),m=E.useMemo(()=>new J(...r),[r]),g=E.useMemo(()=>new kn().setFromUnitVectors(new J(0,1,0),m.clone().normalize()),[m]);E.useLayoutEffect(()=>{const y=f.current;y&&(p.position.set(r[0],r[1],r[2]),p.rotation.setFromQuaternion(g),p.updateMatrix(),y.setMatrixAt(0,p.matrix));const A=h.current;A&&(p.position.set(r[0],r[1],r[2]).multiplyScalar(.5),p.rotation.setFromQuaternion(g),p.updateMatrix(),A.setMatrixAt(0,p.matrix))},[]),E.useLayoutEffect(()=>{var y,A;(y=f.current)==null||y.setColorAt(0,d),(A=h.current)==null||A.setColorAt(0,d)},[d]);const v={};(l==0||l<1)&&(v.transparent=!0,v.opacity=l);const x=c?ce.jsx("meshStandardMaterial",{wireframe:!0,...v}):ce.jsx("meshBasicMaterial",{...v});return ce.jsxs(fm,{ref:u,position:e,rotation:n,scale:i,matrix:t,children:[ce.jsxs("instancedMesh",{ref:f,args:[null,null,1],children:[ce.jsx("coneGeometry",{args:[.05*s,.1*s,o,o]}),x]}),ce.jsxs("instancedMesh",{ref:h,args:[null,null,1],children:[ce.jsx("cylinderGeometry",{args:[.025,.025,m.length(),o,o]}),x]})]})}function MOe({matrix:t,position:e,rotation:n,scale:r=1,headScale:i=1,lod:s=10,color:o,opacity:a=1,wireframe:l=!1}){const c=E.useRef(),u=E.useRef(),f=E.useRef(),h=E.useMemo(()=>o&&new bt(o),[o]),d=E.useMemo(()=>new hn,[]);E.useLayoutEffect(()=>{const g=u.current;g&&eD.forEach(({position:v,rotation:x,color:y},A)=>{d.position.set(v.x,v.y,v.z),d.rotation.set(x.x,x.y,x.z),d.updateMatrix(),g.setMatrixAt(A,d.matrix),g.setColorAt(A,h||y)})},[]),E.useLayoutEffect(()=>{const g=f.current;g&&eD.forEach(({position:v,rotation:x,color:y},A)=>{d.position.set(v.x/2,v.y/2,v.z/2),d.rotation.set(x.x,x.y,x.z),d.updateMatrix(),g.setMatrixAt(A,d.matrix),g.setColorAt(A,h||y)})},[]);const p={};(a==0||a<1)&&(p.transparent=!0,p.opacity=a),o&&(p.color=h);const m=l?ce.jsx("meshStandardMaterial",{wireframe:!0,...p}):ce.jsx("meshBasicMaterial",{...p});return ce.jsxs(fm,{ref:c,_ref:c,position:e,rotation:n,scale:r,matrix:t,children:[ce.jsxs("instancedMesh",{ref:u,args:[null,null,3],children:[ce.jsx("coneGeometry",{args:[.05*i,.1*i,s,s]}),m]}),ce.jsxs("instancedMesh",{ref:f,args:[null,null,3],children:[ce.jsx("cylinderGeometry",{args:[.025,.025,1,s,s]}),m]})]})}function hg(t,e,n=["children"]){if(t.key===e)return t;for(const r of n)if(t[r])for(const i of t[r]){const s=hg(i,e);if(s)return s}}function ROe(t,e,n=["children"]){for(const r of n)if(t[r])for(const i of t[r]){if(i.key===e)return t[r];const s=t[r].indexOf(i);if(!(s<0))return t[r].splice(s,1),!0}return!1}function IOe(t,e,n){if(!t)throw"scene is undefined";const r=n?hg(t,n):t;return r.children||(r.children=[]),r.children.push(e),!0}function tD(t,e,n="children"){if(!t[n])return!1;for(const r of e){const i=hg(t,r.key,[n]);i?Object.assign(i,r):t[n].push(r)}return!0}function POe(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=i=>{n(i)},r.readAsDataURL(t)})}function LOe({_key:t,value:e,...n}){const{sendMsg:r}=E.useContext(Ur);return ce.jsx("button",{onClick:()=>r({etype:"CLICK",key:t}),...n,children:e})}function NOe({_key:t,value:e,children:n,...r}){const{sendMsg:i}=E.useContext(Ur),[s,o]=E.useState(e||0);return ce.jsxs(ce.Fragment,{children:[ce.jsx("input",{type:"range",value:s,onMouseUp:({target:a})=>{const{value:l}=a;i({etype:"SET",key:t,value:l})},onChange:({target:a})=>{o(Number(a.value))},...r}),ce.jsx("span",{children:s})]})}function OOe({_key:t,children:e,alt:n,...r}){const{sendMsg:i}=E.useContext(Ur);return ce.jsx("img",{alt:n||t,className:"input-image",onClick:s=>{console.log("click on image"),s.preventDefault(),s.stopPropagation();const a=s.target.getBoundingClientRect(),l=s.clientX-a.left,c=s.clientY-a.top;i({etype:"CLICK",key:t,value:{x:l,y:c,w:a.width,h:a.height}})},...r})}function DOe({_key:t,value:e,style:n,textareaStyle:r={},placeholder:i,defaultValue:s,clearOnSubmit:o,children:a,...l}){const[c,u]=E.useState(e),{sendMsg:f}=E.useContext(Ur),h=E.useMemo(()=>({target:p})=>{u(p.value)},[]),d=E.useMemo(()=>p=>{if(p.keyCode==39&&!c){if(!s)return;p.preventDefault(),u(s)}p.keyCode==13&&!p.shiftKey&&(p.preventDefault(),f({etype:"INPUT",key:t,value:c}),o&&u(""))},[c]);return ce.jsx("form",{style:{flex:"0 0 auto",height:"200px",display:"flex",flexDirection:"column",...n},...l,children:ce.jsx("textarea",{placeholder:i||`"${s}" [ press ➡ for default, ⏎ to submit ]`,value:c,onChange:h,onKeyUp:d,style:{flex:"1 1 auto",height:"100%",width:"100%",padding:"10px",marginTop:"5px",border:"1.5px solid #eee",borderRadius:"5px",...r}})})}function BOe({_key:t,label:e}){const{sendMsg:n}=E.useContext(Ur),[r,i]=E.useState(null),s=E.useCallback(o=>{i(o.target.files[0])},[]);return ce.jsxs("form",{onSubmit:o=>{o.preventDefault(),r&&POe(r).then(a=>{const l=a.slice(22);n({etype:"UPLOAD",key:t,value:l})})},children:[ce.jsxs("label",{htmlFor:"file",children:[e," "]}),ce.jsx("input",{type:"file",onChange:s}),ce.jsx("input",{type:"submit",value:"Submit"})]})}function kOe({_key:t,...e}){return ce.jsx("div",{...e},t)}function FOe({_key:t,text:e,...n}){return ce.jsx("span",{...n,children:e})}const UOe=({_key:t="DEFAULT"})=>{const e=window.devicePixelRatio||1,{sendMsg:n,downlink:r,uplink:i}=E.useContext(Ur),{gl:s}=wt(),o=E.useMemo(()=>({lastFrame:Date.now()}),[]),a=E.useMemo(()=>new OffscreenCanvas(1,1),[]);return E.useEffect(()=>r?r.subscribe("GRAB_RENDER",({key:c,rtype:u,data:{downsample:f=1,quality:h=1}})=>{if(c!==t||!s.domElement)return;const{width:d,height:p}=s.domElement,m=Date.now(),g=m-o.lastFrame;o.lastFrame=m;const v=a.getContext("2d");a.width=d/f,a.height=p/f;const x=s.domElement;v.drawImage(x,0,0,x.width,x.height,0,0,a.width,a.height),a.convertToBlob({type:"image/jpeg",quality:h}).then(y=>y.arrayBuffer()).then(y=>{const A={etype:u||"GRAB_RENDER_RESPONSE",key:c,value:{dpr:e,delta:g,width:d,height:p,frame:new Uint8Array(y)}};n(A)})}):void 0,[s.domElement,n,r,i,o]),null};function zOe({_key:t,start:e=0,end:n,stepSize:r=1,play:i=!1}){const{sendMsg:s}=E.useContext(Ur),{clock:o}=wt();E.useEffect(()=>i?o.start():o.stop(),[]);const a=E.useCallback(f=>{const h={etype:"TIMELINE_STEP",key:t,value:{step:f,elapsedTime:o.getElapsedTime(),delta:o.getDelta()}};try{s(h)}catch{return}},[]),l=Mr("Timeline",{stepSize:{value:r,min:-5,max:10,step:.5}},[]),[c,u]=Mr("Timeline",()=>({step:{value:0,min:e,max:n,step:l.stepSize,onChange:f=>{typeof f>"u"||a(f)},transient:!1},frameRate:{value:30,min:1,max:240,step:1},play:_g(()=>{o.running?o.stop():o.start()},{label:function(){return o.running?"Pause":"Play"}})}),[l.stepSize]);return E.useEffect(()=>{if(c.frameRate<=0)return;const f=setInterval(()=>{o.running&&(c.step+=1,u({step:c.step}),a(c.step))},1e3/c.frameRate);return()=>{clearInterval(f)}},[o,c,c.frameRate]),null}function HOe(t,e,n,r,i){e.setFromCamera(n,t);const s=e.intersectObjects(r,!0);if(i){const o=s.slice(0,i);return o.reduce((l,{point:c})=>l.add(c),new J(0,0,0)).divideScalar(o.length)}if(s)return s[0].point}function Bj(t){return t.reduce((e,n)=>n.type==="Group"?e.concat(Bj(n.children)):e.concat(n),[])}function GOe({parent:t,thres:e=.01,color:n="red",onClick:r,childSelector:i=({type:a})=>a==="Points",average:s,disable:o=!1}){const{scene:a,camera:l,raycaster:c,pointer:u}=wt(),f=E.useRef();return E.useEffect(()=>{var h,d,p,m;c.params.Points.threshold=e;const g={is_down:!1},v=()=>{g.is_down=!0},x=()=>{g.is_down=!1},y=()=>{if(g.is_down)return;const T=Bj(a.children).filter(i),w=HOe(l,c,u,T,s);g.pos=w,f.current.position.set(...w),ng()},A=T=>{if(typeof r!="function")return;const w=T.target;r({position:f.current.position.clone(),radius:e,x:T.offsetX/w.offsetWidth,y:T.offsetY/w.offsetHeight,offsetX:T.offsetX,offsetY:T.offsetY,offsetHeight:w.offsetHeight,offsetWidth:w.offsetWidth})};return(h=t.current)==null||h.addEventListener("mousedown",v),(d=t.current)==null||d.addEventListener("mouseup",x),(p=t.current)==null||p.addEventListener("mousemove",y),(m=t.current)==null||m.addEventListener("click",A),()=>{var T,w,M,C;(T=t.current)==null||T.removeEventListener("mousedown",v),(w=t.current)==null||w.removeEventListener("mouseup",x),(M=t.current)==null||M.removeEventListener("mousemove",y),(C=t.current)==null||C.removeEventListener("click",A)}},[e,r,o]),ce.jsx(yC,{ref:f,args:[e],children:ce.jsx("meshBasicMaterial",{color:n,opacity:1,transparent:!0})})}function VOe({parentKey:t,parent:e}){const{gl:n}=wt(),r=E.useRef();E.useLayoutEffect(()=>{e||(r.current=n.domElement)},[]);const i=e||r,{sendMsg:s}=E.useContext(Ur),{enableMarker:o,markerSize:a,markerAvg:l,color:c}=Mr("Scene.Pointer",{color:"red",enableMarker:{value:!1,label:"Enable"},markerSize:{value:10,min:.1,max:100,step:.1,pad:1,label:"Pointer Size"},markerAvg:{value:5,min:0,max:20,step:1,label:"Average k"}},{collapsed:!0}),u=({position:f,radius:h,x:d,y:p,...m})=>{let g;!f||f.x!==f.x||f.y!==f.y||f.z!==f.z?g={etype:"MOUSE_CLICK",key:t,value:{pointerX:d,pointerY:p,...m}}:g={etype:"ADD_MARKER",key:t,value:{position:f,radius:h,pointerX:d,pointerY:p,...m}},typeof s=="function"&&s(g)};return ce.jsx(GOe,{parent:i,thres:a/1e3,onClick:u,average:l,disable:!o,color:c})}function WOe({_key:t,far:e,levaPrefix:n="Scene.",hide:r}){var i;const s=E.useMemo(()=>$u.parse(Ic.location.search),[]),{camera:o}=wt(),a=((i=s.grid)==null?void 0:i.toLowerCase())!=="false";let l=n?`${n}Grid Plane`:"Grid Plane";l=t?`${l}-[${t}]`:l;const{showGrid:c,offset:u,fadeDistance:f,...h}=Mr(l,{showGrid:{value:typeof r>"u"?a:r,label:"Show Grid"},offset:0,cellSize:.2,cellThickness:.6,cellColor:"#6f6f6f",sectionSize:1,sectionThickness:1.5,sectionColor:"#23aaff",fadeDistance:e||10,fadeStrength:1,followCamera:!0,infiniteGrid:!0},{collapsed:!0},[e,o.far]),{rot:d,pos:p}=E.useMemo(()=>{const m=new J(0,1,0),g=new kn;g.setFromUnitVectors(m,hn.DEFAULT_UP);const v=new wi;v.setFromQuaternion(g,"XYZ");const x=hn.DEFAULT_UP.clone().multiplyScalar(u);return{rot:v,pos:x}},[hn.DEFAULT_UP,u]);return c?ce.jsx(vve,{position:p,rotation:d,args:[10,10],fadeDistance:Math.min(o.far||5,f),...h}):ce.jsx(ce.Fragment,{})}function jOe({_ref:t,matrix:e,flipCoords:n=!0,rotation:r,position:i,scale:s,...o}){return ce.jsx(fm,{ref:t,rotation:r,position:i,scale:s,matrix:e,children:n?ce.jsx(lP,{rotation:[Math.PI,0,0],...o}):ce.jsx(lP,{...o})})}const $Oe={Line:$i,QuadraticBezierLine:_1e,CubicBezierLine:b1e,CatmullRomLine:A1e,Facemesh:DEe,Stage:Jxe,Backdrop:Zxe,Shadow:e3e,Caustics:r3e,ContactShadows:rG,RandomizedLight:oG,AccumulativeShadows:sG,Image:Pge,Text:Ege,Text3D:wge,PositionalAudio:T1e,Billboard:d1e,ScreenSpace:p1e,Effects:Sge,GradientTexture:Cge,Edges:uC,Outlines:wH,Trail:Hge,Sampler:Vge,ComputedAttribute:Wge,Clone:Q3,MarchingCubes:Xge,Decal:qge,Svg:Kge,Gltf:Jge,AsciiRenderer:Qge,Splat:jOe,MeshReflectorMaterial:oxe,MeshWobbleMaterial:nxe,MeshDistortMaterial:exe,MeshRefractionMaterial:cxe,MeshTransmissionMaterial:fxe,MeshDiscardMaterial:hxe,PointMaterial:pxe,SoftShadows:gxe,Html:am,CycleRaycast:hme,Select:h1e,SpriteAnimator:Kye,Stats:bve,StatsGl:wve,Wireframe:U3e,FaceLandmarker:kEe,Instances:gC,Merged:Yye,Points:V3e,Segments:j3e,Detailed:X3e,Preload:Y3e,BakeShadows:q3e,AdaptiveDpr:K3e,AdaptiveEvents:J3e,Bvh:zye,PerformanceMonitor:Z3e,Hud:IH,View:xG,RenderTexture:dG,RenderCubeTexture:pG,Fisheye:rEe,Mask:nEe,MeshPortalMaterial:oEe,CurveModifier:Jye,Extrude:yxe,Lathe:xxe,Shape:Exe,RoundedBox:bxe,ScreenQuad:Txe,Center:VH,Resize:wxe,BBAnchor:Gye,Bounds:qH,CameraShake:Rxe,Float:Ixe,Environment:nG,Lightformer:h3e,SpotLight:f3e,SpotLightShadow:u3e,Sky:p3e,Stars:v3e,Sparkles:M3e,Cloud:w3e},XOe={Slider:NOe,Input:DOe,Text:FOe,Img:OOe,Button:LOe,ImageUpload:BOe,Div:kOe,SceneContainer:zj,Scene:DG,SceneBackground:EOe,ImageBackground:HG,VuerGroup:fm,Ply:s2e,Obj:r2e,Pcd:i2e,Glb:lN,Gltf:lN,PointCloud:yOe,TriMesh:xOe,Urdf:o2e,Gripper:n2e,SkeletalGripper:FG,CoordsMarker:MOe,Arrow:COe,Pivot:UG,Movable:zG,Gamepad:NG,Hands:$fe,Frustum:o4,Box:f2e,Capsule:h2e,Circle:d2e,Cone:p2e,Cylinder:m2e,Dodecahedron:g2e,Edges:v2e,Extrude:y2e,Icosahedron:x2e,Lathe:E2e,Octahedron:_2e,Plane:b2e,Polyhedron:A2e,Ring:T2e,Shape:w2e,Sphere:S2e,Tetrahedron:C2e,Torus:M2e,TorusKnot:R2e,Tube:I2e,Wireframe:P2e,PointLight:X2e,DirectionalLight:W2e,AmbientLight:j2e,SpotLight:$2e,HemisphereLight:V2e,RectAreaLight:G2e,CameraView:H2e,Camera:SAe,GrabRender:UOe,TimelineControls:zOe,PointerControls:VOe,Grid:WOe,ImagePlane:l3,StereoVideoPlane:SOe,WebRTCStereoVideoPlane:wOe,HUDPlane:xh,VideoPlane:AOe,WebRTCVideoPlane:TOe,WebRTCVideoMaterial:Dj,VideoMaterial:_M,Splats:Ue.lazy(()=>P4(()=>import("./chunk-8db1b443.js"),["assets/chunks/chunk-8db1b443.js","assets/chunks/chunk-cf010ec4.js","assets/chunks/chunk-3010a972.js","assets/chunks/chunk-d9bdcef8.js"])),BBox:IC,Render:q2e,RenderLayer:K2e,AutoScroll:TNe,Markdown:ANe,...$Oe};function kj({_key:t,tag:e,children:n,className:r,...i}){const s=XOe[e]||e,{showWarning:o}=E.useContext(rb);if(!e)return o(`No tag provided for component <${e} ${t} className="${r}">${n} </...>`),n;const a=(n||[]).map(l=>{if(typeof l=="string")return l;const{key:c,...u}=l;return ce.jsx(kj,{_key:c,...u},c)});return typeof s=="string"?ce.jsx(s,{className:r,...i,children:a},t):ce.jsx(s,{_key:t,className:r,...i,children:a},t)}function YOe(t,e){const n={};return t.forEach(r=>{const{label:i,color:s,threshold:o,hide:a,...l}=r;s?(n[`${i}`]=ip({[`${i}_color`]:{value:s,label:"color"}},{collapsed:!e,color:s}),n[`${i}_show`]={value:!a,label:"show"}):n[`${i}_show`]={value:!a,label:i}}),n}var Fj={},nb={};nb.byteLength=JOe;nb.toByteArray=ZOe;nb.fromByteArray=nDe;var Fl=[],wa=[],qOe=typeof Uint8Array<"u"?Uint8Array:Array,tw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var qd=0,KOe=tw.length;qd<KOe;++qd)Fl[qd]=tw[qd],wa[tw.charCodeAt(qd)]=qd;wa["-".charCodeAt(0)]=62;wa["_".charCodeAt(0)]=63;function Uj(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function JOe(t){var e=Uj(t),n=e[0],r=e[1];return(n+r)*3/4-r}function QOe(t,e,n){return(e+n)*3/4-n}function ZOe(t){var e,n=Uj(t),r=n[0],i=n[1],s=new qOe(QOe(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=wa[t.charCodeAt(l)]<<18|wa[t.charCodeAt(l+1)]<<12|wa[t.charCodeAt(l+2)]<<6|wa[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=wa[t.charCodeAt(l)]<<2|wa[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=wa[t.charCodeAt(l)]<<10|wa[t.charCodeAt(l+1)]<<4|wa[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function eDe(t){return Fl[t>>18&63]+Fl[t>>12&63]+Fl[t>>6&63]+Fl[t&63]}function tDe(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(eDe(r));return i.join("")}function nDe(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(tDe(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(Fl[e>>2]+Fl[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Fl[e>>10]+Fl[e>>4&63]+Fl[e<<2&63]+"=")),i.join("")}var bM={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */bM.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,s=d&(1<<-u)-1,d>>=-u,u+=a;u>0;s=s*256+t[e+f],f+=h,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+t[e+f],f+=h,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(d?-1:1)*o*Math.pow(2,s-r)};bM.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,u=(1<<c)-1,f=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?e+=h/l:e+=h*Math.pow(2,1-f),e*l>=2&&(o++,l/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(e*l-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=a&255,d+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+d]=o&255,d+=p,o/=256,c-=8);t[n+d-p]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=nb,n=bM,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=x,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const te=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(te,z),te.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(te){if(te>i)throw new RangeError('The value "'+te+'" is invalid for option "size"');const z=new Uint8Array(te);return Object.setPrototypeOf(z,a.prototype),z}function a(te,z,F){if(typeof te=="number"){if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(te)}return l(te,z,F)}a.poolSize=8192;function l(te,z,F){if(typeof te=="string")return h(te,z);if(ArrayBuffer.isView(te))return p(te);if(te==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof te);if(xt(te,ArrayBuffer)||te&&xt(te.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xt(te,SharedArrayBuffer)||te&&xt(te.buffer,SharedArrayBuffer)))return m(te,z,F);if(typeof te=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ae=te.valueOf&&te.valueOf();if(ae!=null&&ae!==te)return a.from(ae,z,F);const ye=g(te);if(ye)return ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof te[Symbol.toPrimitive]=="function")return a.from(te[Symbol.toPrimitive]("string"),z,F);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof te)}a.from=function(te,z,F){return l(te,z,F)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(te){if(typeof te!="number")throw new TypeError('"size" argument must be of type number');if(te<0)throw new RangeError('The value "'+te+'" is invalid for option "size"')}function u(te,z,F){return c(te),te<=0?o(te):z!==void 0?typeof F=="string"?o(te).fill(z,F):o(te).fill(z):o(te)}a.alloc=function(te,z,F){return u(te,z,F)};function f(te){return c(te),o(te<0?0:v(te)|0)}a.allocUnsafe=function(te){return f(te)},a.allocUnsafeSlow=function(te){return f(te)};function h(te,z){if((typeof z!="string"||z==="")&&(z="utf8"),!a.isEncoding(z))throw new TypeError("Unknown encoding: "+z);const F=y(te,z)|0;let ae=o(F);const ye=ae.write(te,z);return ye!==F&&(ae=ae.slice(0,ye)),ae}function d(te){const z=te.length<0?0:v(te.length)|0,F=o(z);for(let ae=0;ae<z;ae+=1)F[ae]=te[ae]&255;return F}function p(te){if(xt(te,Uint8Array)){const z=new Uint8Array(te);return m(z.buffer,z.byteOffset,z.byteLength)}return d(te)}function m(te,z,F){if(z<0||te.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(te.byteLength<z+(F||0))throw new RangeError('"length" is outside of buffer bounds');let ae;return z===void 0&&F===void 0?ae=new Uint8Array(te):F===void 0?ae=new Uint8Array(te,z):ae=new Uint8Array(te,z,F),Object.setPrototypeOf(ae,a.prototype),ae}function g(te){if(a.isBuffer(te)){const z=v(te.length)|0,F=o(z);return F.length===0||te.copy(F,0,0,z),F}if(te.length!==void 0)return typeof te.length!="number"||fe(te.length)?o(0):d(te);if(te.type==="Buffer"&&Array.isArray(te.data))return d(te.data)}function v(te){if(te>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return te|0}function x(te){return+te!=te&&(te=0),a.alloc(+te)}a.isBuffer=function(z){return z!=null&&z._isBuffer===!0&&z!==a.prototype},a.compare=function(z,F){if(xt(z,Uint8Array)&&(z=a.from(z,z.offset,z.byteLength)),xt(F,Uint8Array)&&(F=a.from(F,F.offset,F.byteLength)),!a.isBuffer(z)||!a.isBuffer(F))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===F)return 0;let ae=z.length,ye=F.length;for(let Le=0,ke=Math.min(ae,ye);Le<ke;++Le)if(z[Le]!==F[Le]){ae=z[Le],ye=F[Le];break}return ae<ye?-1:ye<ae?1:0},a.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(z,F){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(z.length===0)return a.alloc(0);let ae;if(F===void 0)for(F=0,ae=0;ae<z.length;++ae)F+=z[ae].length;const ye=a.allocUnsafe(F);let Le=0;for(ae=0;ae<z.length;++ae){let ke=z[ae];if(xt(ke,Uint8Array))Le+ke.length>ye.length?(a.isBuffer(ke)||(ke=a.from(ke)),ke.copy(ye,Le)):Uint8Array.prototype.set.call(ye,ke,Le);else if(a.isBuffer(ke))ke.copy(ye,Le);else throw new TypeError('"list" argument must be an Array of Buffers');Le+=ke.length}return ye};function y(te,z){if(a.isBuffer(te))return te.length;if(ArrayBuffer.isView(te)||xt(te,ArrayBuffer))return te.byteLength;if(typeof te!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof te);const F=te.length,ae=arguments.length>2&&arguments[2]===!0;if(!ae&&F===0)return 0;let ye=!1;for(;;)switch(z){case"ascii":case"latin1":case"binary":return F;case"utf8":case"utf-8":return $e(te).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F*2;case"hex":return F>>>1;case"base64":return We(te).length;default:if(ye)return ae?-1:$e(te).length;z=(""+z).toLowerCase(),ye=!0}}a.byteLength=y;function A(te,z,F){let ae=!1;if((z===void 0||z<0)&&(z=0),z>this.length||((F===void 0||F>this.length)&&(F=this.length),F<=0)||(F>>>=0,z>>>=0,F<=z))return"";for(te||(te="utf8");;)switch(te){case"hex":return ee(this,z,F);case"utf8":case"utf-8":return N(this,z,F);case"ascii":return Q(this,z,F);case"latin1":case"binary":return Y(this,z,F);case"base64":return B(this,z,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,z,F);default:if(ae)throw new TypeError("Unknown encoding: "+te);te=(te+"").toLowerCase(),ae=!0}}a.prototype._isBuffer=!0;function T(te,z,F){const ae=te[z];te[z]=te[F],te[F]=ae}a.prototype.swap16=function(){const z=this.length;if(z%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let F=0;F<z;F+=2)T(this,F,F+1);return this},a.prototype.swap32=function(){const z=this.length;if(z%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let F=0;F<z;F+=4)T(this,F,F+3),T(this,F+1,F+2);return this},a.prototype.swap64=function(){const z=this.length;if(z%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let F=0;F<z;F+=8)T(this,F,F+7),T(this,F+1,F+6),T(this,F+2,F+5),T(this,F+3,F+4);return this},a.prototype.toString=function(){const z=this.length;return z===0?"":arguments.length===0?N(this,0,z):A.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(z){if(!a.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z?!0:a.compare(this,z)===0},a.prototype.inspect=function(){let z="";const F=t.INSPECT_MAX_BYTES;return z=this.toString("hex",0,F).replace(/(.{2})/g,"$1 ").trim(),this.length>F&&(z+=" ... "),"<Buffer "+z+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(z,F,ae,ye,Le){if(xt(z,Uint8Array)&&(z=a.from(z,z.offset,z.byteLength)),!a.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(F===void 0&&(F=0),ae===void 0&&(ae=z?z.length:0),ye===void 0&&(ye=0),Le===void 0&&(Le=this.length),F<0||ae>z.length||ye<0||Le>this.length)throw new RangeError("out of range index");if(ye>=Le&&F>=ae)return 0;if(ye>=Le)return-1;if(F>=ae)return 1;if(F>>>=0,ae>>>=0,ye>>>=0,Le>>>=0,this===z)return 0;let ke=Le-ye,Ve=ae-F;const Ce=Math.min(ke,Ve),Ye=this.slice(ye,Le),tt=z.slice(F,ae);for(let it=0;it<Ce;++it)if(Ye[it]!==tt[it]){ke=Ye[it],Ve=tt[it];break}return ke<Ve?-1:Ve<ke?1:0};function w(te,z,F,ae,ye){if(te.length===0)return-1;if(typeof F=="string"?(ae=F,F=0):F>2147483647?F=2147483647:F<-2147483648&&(F=-2147483648),F=+F,fe(F)&&(F=ye?0:te.length-1),F<0&&(F=te.length+F),F>=te.length){if(ye)return-1;F=te.length-1}else if(F<0)if(ye)F=0;else return-1;if(typeof z=="string"&&(z=a.from(z,ae)),a.isBuffer(z))return z.length===0?-1:M(te,z,F,ae,ye);if(typeof z=="number")return z=z&255,typeof Uint8Array.prototype.indexOf=="function"?ye?Uint8Array.prototype.indexOf.call(te,z,F):Uint8Array.prototype.lastIndexOf.call(te,z,F):M(te,[z],F,ae,ye);throw new TypeError("val must be string, number or Buffer")}function M(te,z,F,ae,ye){let Le=1,ke=te.length,Ve=z.length;if(ae!==void 0&&(ae=String(ae).toLowerCase(),ae==="ucs2"||ae==="ucs-2"||ae==="utf16le"||ae==="utf-16le")){if(te.length<2||z.length<2)return-1;Le=2,ke/=2,Ve/=2,F/=2}function Ce(tt,it){return Le===1?tt[it]:tt.readUInt16BE(it*Le)}let Ye;if(ye){let tt=-1;for(Ye=F;Ye<ke;Ye++)if(Ce(te,Ye)===Ce(z,tt===-1?0:Ye-tt)){if(tt===-1&&(tt=Ye),Ye-tt+1===Ve)return tt*Le}else tt!==-1&&(Ye-=Ye-tt),tt=-1}else for(F+Ve>ke&&(F=ke-Ve),Ye=F;Ye>=0;Ye--){let tt=!0;for(let it=0;it<Ve;it++)if(Ce(te,Ye+it)!==Ce(z,it)){tt=!1;break}if(tt)return Ye}return-1}a.prototype.includes=function(z,F,ae){return this.indexOf(z,F,ae)!==-1},a.prototype.indexOf=function(z,F,ae){return w(this,z,F,ae,!0)},a.prototype.lastIndexOf=function(z,F,ae){return w(this,z,F,ae,!1)};function C(te,z,F,ae){F=Number(F)||0;const ye=te.length-F;ae?(ae=Number(ae),ae>ye&&(ae=ye)):ae=ye;const Le=z.length;ae>Le/2&&(ae=Le/2);let ke;for(ke=0;ke<ae;++ke){const Ve=parseInt(z.substr(ke*2,2),16);if(fe(Ve))return ke;te[F+ke]=Ve}return ke}function S(te,z,F,ae){return Xe($e(z,te.length-F),te,F,ae)}function R(te,z,F,ae){return Xe(ve(z),te,F,ae)}function O(te,z,F,ae){return Xe(We(z),te,F,ae)}function L(te,z,F,ae){return Xe(me(z,te.length-F),te,F,ae)}a.prototype.write=function(z,F,ae,ye){if(F===void 0)ye="utf8",ae=this.length,F=0;else if(ae===void 0&&typeof F=="string")ye=F,ae=this.length,F=0;else if(isFinite(F))F=F>>>0,isFinite(ae)?(ae=ae>>>0,ye===void 0&&(ye="utf8")):(ye=ae,ae=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Le=this.length-F;if((ae===void 0||ae>Le)&&(ae=Le),z.length>0&&(ae<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");ye||(ye="utf8");let ke=!1;for(;;)switch(ye){case"hex":return C(this,z,F,ae);case"utf8":case"utf-8":return S(this,z,F,ae);case"ascii":case"latin1":case"binary":return R(this,z,F,ae);case"base64":return O(this,z,F,ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,z,F,ae);default:if(ke)throw new TypeError("Unknown encoding: "+ye);ye=(""+ye).toLowerCase(),ke=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(te,z,F){return z===0&&F===te.length?e.fromByteArray(te):e.fromByteArray(te.slice(z,F))}function N(te,z,F){F=Math.min(te.length,F);const ae=[];let ye=z;for(;ye<F;){const Le=te[ye];let ke=null,Ve=Le>239?4:Le>223?3:Le>191?2:1;if(ye+Ve<=F){let Ce,Ye,tt,it;switch(Ve){case 1:Le<128&&(ke=Le);break;case 2:Ce=te[ye+1],(Ce&192)===128&&(it=(Le&31)<<6|Ce&63,it>127&&(ke=it));break;case 3:Ce=te[ye+1],Ye=te[ye+2],(Ce&192)===128&&(Ye&192)===128&&(it=(Le&15)<<12|(Ce&63)<<6|Ye&63,it>2047&&(it<55296||it>57343)&&(ke=it));break;case 4:Ce=te[ye+1],Ye=te[ye+2],tt=te[ye+3],(Ce&192)===128&&(Ye&192)===128&&(tt&192)===128&&(it=(Le&15)<<18|(Ce&63)<<12|(Ye&63)<<6|tt&63,it>65535&&it<1114112&&(ke=it))}}ke===null?(ke=65533,Ve=1):ke>65535&&(ke-=65536,ae.push(ke>>>10&1023|55296),ke=56320|ke&1023),ae.push(ke),ye+=Ve}return U(ae)}const $=4096;function U(te){const z=te.length;if(z<=$)return String.fromCharCode.apply(String,te);let F="",ae=0;for(;ae<z;)F+=String.fromCharCode.apply(String,te.slice(ae,ae+=$));return F}function Q(te,z,F){let ae="";F=Math.min(te.length,F);for(let ye=z;ye<F;++ye)ae+=String.fromCharCode(te[ye]&127);return ae}function Y(te,z,F){let ae="";F=Math.min(te.length,F);for(let ye=z;ye<F;++ye)ae+=String.fromCharCode(te[ye]);return ae}function ee(te,z,F){const ae=te.length;(!z||z<0)&&(z=0),(!F||F<0||F>ae)&&(F=ae);let ye="";for(let Le=z;Le<F;++Le)ye+=ie[te[Le]];return ye}function ne(te,z,F){const ae=te.slice(z,F);let ye="";for(let Le=0;Le<ae.length-1;Le+=2)ye+=String.fromCharCode(ae[Le]+ae[Le+1]*256);return ye}a.prototype.slice=function(z,F){const ae=this.length;z=~~z,F=F===void 0?ae:~~F,z<0?(z+=ae,z<0&&(z=0)):z>ae&&(z=ae),F<0?(F+=ae,F<0&&(F=0)):F>ae&&(F=ae),F<z&&(F=z);const ye=this.subarray(z,F);return Object.setPrototypeOf(ye,a.prototype),ye};function P(te,z,F){if(te%1!==0||te<0)throw new RangeError("offset is not uint");if(te+z>F)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(z,F,ae){z=z>>>0,F=F>>>0,ae||P(z,F,this.length);let ye=this[z],Le=1,ke=0;for(;++ke<F&&(Le*=256);)ye+=this[z+ke]*Le;return ye},a.prototype.readUintBE=a.prototype.readUIntBE=function(z,F,ae){z=z>>>0,F=F>>>0,ae||P(z,F,this.length);let ye=this[z+--F],Le=1;for(;F>0&&(Le*=256);)ye+=this[z+--F]*Le;return ye},a.prototype.readUint8=a.prototype.readUInt8=function(z,F){return z=z>>>0,F||P(z,1,this.length),this[z]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(z,F){return z=z>>>0,F||P(z,2,this.length),this[z]|this[z+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(z,F){return z=z>>>0,F||P(z,2,this.length),this[z]<<8|this[z+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(z,F){return z=z>>>0,F||P(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+this[z+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(z,F){return z=z>>>0,F||P(z,4,this.length),this[z]*16777216+(this[z+1]<<16|this[z+2]<<8|this[z+3])},a.prototype.readBigUInt64LE=Ae(function(z){z=z>>>0,Oe(z,"offset");const F=this[z],ae=this[z+7];(F===void 0||ae===void 0)&&be(z,this.length-8);const ye=F+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24,Le=this[++z]+this[++z]*2**8+this[++z]*2**16+ae*2**24;return BigInt(ye)+(BigInt(Le)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ae(function(z){z=z>>>0,Oe(z,"offset");const F=this[z],ae=this[z+7];(F===void 0||ae===void 0)&&be(z,this.length-8);const ye=F*2**24+this[++z]*2**16+this[++z]*2**8+this[++z],Le=this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+ae;return(BigInt(ye)<<BigInt(32))+BigInt(Le)}),a.prototype.readIntLE=function(z,F,ae){z=z>>>0,F=F>>>0,ae||P(z,F,this.length);let ye=this[z],Le=1,ke=0;for(;++ke<F&&(Le*=256);)ye+=this[z+ke]*Le;return Le*=128,ye>=Le&&(ye-=Math.pow(2,8*F)),ye},a.prototype.readIntBE=function(z,F,ae){z=z>>>0,F=F>>>0,ae||P(z,F,this.length);let ye=F,Le=1,ke=this[z+--ye];for(;ye>0&&(Le*=256);)ke+=this[z+--ye]*Le;return Le*=128,ke>=Le&&(ke-=Math.pow(2,8*F)),ke},a.prototype.readInt8=function(z,F){return z=z>>>0,F||P(z,1,this.length),this[z]&128?(255-this[z]+1)*-1:this[z]},a.prototype.readInt16LE=function(z,F){z=z>>>0,F||P(z,2,this.length);const ae=this[z]|this[z+1]<<8;return ae&32768?ae|4294901760:ae},a.prototype.readInt16BE=function(z,F){z=z>>>0,F||P(z,2,this.length);const ae=this[z+1]|this[z]<<8;return ae&32768?ae|4294901760:ae},a.prototype.readInt32LE=function(z,F){return z=z>>>0,F||P(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},a.prototype.readInt32BE=function(z,F){return z=z>>>0,F||P(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},a.prototype.readBigInt64LE=Ae(function(z){z=z>>>0,Oe(z,"offset");const F=this[z],ae=this[z+7];(F===void 0||ae===void 0)&&be(z,this.length-8);const ye=this[z+4]+this[z+5]*2**8+this[z+6]*2**16+(ae<<24);return(BigInt(ye)<<BigInt(32))+BigInt(F+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24)}),a.prototype.readBigInt64BE=Ae(function(z){z=z>>>0,Oe(z,"offset");const F=this[z],ae=this[z+7];(F===void 0||ae===void 0)&&be(z,this.length-8);const ye=(F<<24)+this[++z]*2**16+this[++z]*2**8+this[++z];return(BigInt(ye)<<BigInt(32))+BigInt(this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+ae)}),a.prototype.readFloatLE=function(z,F){return z=z>>>0,F||P(z,4,this.length),n.read(this,z,!0,23,4)},a.prototype.readFloatBE=function(z,F){return z=z>>>0,F||P(z,4,this.length),n.read(this,z,!1,23,4)},a.prototype.readDoubleLE=function(z,F){return z=z>>>0,F||P(z,8,this.length),n.read(this,z,!0,52,8)},a.prototype.readDoubleBE=function(z,F){return z=z>>>0,F||P(z,8,this.length),n.read(this,z,!1,52,8)};function se(te,z,F,ae,ye,Le){if(!a.isBuffer(te))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>ye||z<Le)throw new RangeError('"value" argument is out of bounds');if(F+ae>te.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(z,F,ae,ye){if(z=+z,F=F>>>0,ae=ae>>>0,!ye){const Ve=Math.pow(2,8*ae)-1;se(this,z,F,ae,Ve,0)}let Le=1,ke=0;for(this[F]=z&255;++ke<ae&&(Le*=256);)this[F+ke]=z/Le&255;return F+ae},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(z,F,ae,ye){if(z=+z,F=F>>>0,ae=ae>>>0,!ye){const Ve=Math.pow(2,8*ae)-1;se(this,z,F,ae,Ve,0)}let Le=ae-1,ke=1;for(this[F+Le]=z&255;--Le>=0&&(ke*=256);)this[F+Le]=z/ke&255;return F+ae},a.prototype.writeUint8=a.prototype.writeUInt8=function(z,F,ae){return z=+z,F=F>>>0,ae||se(this,z,F,1,255,0),this[F]=z&255,F+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(z,F,ae){return z=+z,F=F>>>0,ae||se(this,z,F,2,65535,0),this[F]=z&255,this[F+1]=z>>>8,F+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(z,F,ae){return z=+z,F=F>>>0,ae||se(this,z,F,2,65535,0),this[F]=z>>>8,this[F+1]=z&255,F+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(z,F,ae){return z=+z,F=F>>>0,ae||se(this,z,F,4,4294967295,0),this[F+3]=z>>>24,this[F+2]=z>>>16,this[F+1]=z>>>8,this[F]=z&255,F+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(z,F,ae){return z=+z,F=F>>>0,ae||se(this,z,F,4,4294967295,0),this[F]=z>>>24,this[F+1]=z>>>16,this[F+2]=z>>>8,this[F+3]=z&255,F+4};function re(te,z,F,ae,ye){he(z,ae,ye,te,F,7);let Le=Number(z&BigInt(4294967295));te[F++]=Le,Le=Le>>8,te[F++]=Le,Le=Le>>8,te[F++]=Le,Le=Le>>8,te[F++]=Le;let ke=Number(z>>BigInt(32)&BigInt(4294967295));return te[F++]=ke,ke=ke>>8,te[F++]=ke,ke=ke>>8,te[F++]=ke,ke=ke>>8,te[F++]=ke,F}function Z(te,z,F,ae,ye){he(z,ae,ye,te,F,7);let Le=Number(z&BigInt(4294967295));te[F+7]=Le,Le=Le>>8,te[F+6]=Le,Le=Le>>8,te[F+5]=Le,Le=Le>>8,te[F+4]=Le;let ke=Number(z>>BigInt(32)&BigInt(4294967295));return te[F+3]=ke,ke=ke>>8,te[F+2]=ke,ke=ke>>8,te[F+1]=ke,ke=ke>>8,te[F]=ke,F+8}a.prototype.writeBigUInt64LE=Ae(function(z,F=0){return re(this,z,F,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ae(function(z,F=0){return Z(this,z,F,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(z,F,ae,ye){if(z=+z,F=F>>>0,!ye){const Ce=Math.pow(2,8*ae-1);se(this,z,F,ae,Ce-1,-Ce)}let Le=0,ke=1,Ve=0;for(this[F]=z&255;++Le<ae&&(ke*=256);)z<0&&Ve===0&&this[F+Le-1]!==0&&(Ve=1),this[F+Le]=(z/ke>>0)-Ve&255;return F+ae},a.prototype.writeIntBE=function(z,F,ae,ye){if(z=+z,F=F>>>0,!ye){const Ce=Math.pow(2,8*ae-1);se(this,z,F,ae,Ce-1,-Ce)}let Le=ae-1,ke=1,Ve=0;for(this[F+Le]=z&255;--Le>=0&&(ke*=256);)z<0&&Ve===0&&this[F+Le+1]!==0&&(Ve=1),this[F+Le]=(z/ke>>0)-Ve&255;return F+ae},a.prototype.writeInt8=function(z,F,ae){return z=+z,F=F>>>0,ae||se(this,z,F,1,127,-128),z<0&&(z=255+z+1),this[F]=z&255,F+1},a.prototype.writeInt16LE=function(z,F,ae){return z=+z,F=F>>>0,ae||se(this,z,F,2,32767,-32768),this[F]=z&255,this[F+1]=z>>>8,F+2},a.prototype.writeInt16BE=function(z,F,ae){return z=+z,F=F>>>0,ae||se(this,z,F,2,32767,-32768),this[F]=z>>>8,this[F+1]=z&255,F+2},a.prototype.writeInt32LE=function(z,F,ae){return z=+z,F=F>>>0,ae||se(this,z,F,4,2147483647,-2147483648),this[F]=z&255,this[F+1]=z>>>8,this[F+2]=z>>>16,this[F+3]=z>>>24,F+4},a.prototype.writeInt32BE=function(z,F,ae){return z=+z,F=F>>>0,ae||se(this,z,F,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[F]=z>>>24,this[F+1]=z>>>16,this[F+2]=z>>>8,this[F+3]=z&255,F+4},a.prototype.writeBigInt64LE=Ae(function(z,F=0){return re(this,z,F,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ae(function(z,F=0){return Z(this,z,F,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function X(te,z,F,ae,ye,Le){if(F+ae>te.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("Index out of range")}function W(te,z,F,ae,ye){return z=+z,F=F>>>0,ye||X(te,z,F,4),n.write(te,z,F,ae,23,4),F+4}a.prototype.writeFloatLE=function(z,F,ae){return W(this,z,F,!0,ae)},a.prototype.writeFloatBE=function(z,F,ae){return W(this,z,F,!1,ae)};function K(te,z,F,ae,ye){return z=+z,F=F>>>0,ye||X(te,z,F,8),n.write(te,z,F,ae,52,8),F+8}a.prototype.writeDoubleLE=function(z,F,ae){return K(this,z,F,!0,ae)},a.prototype.writeDoubleBE=function(z,F,ae){return K(this,z,F,!1,ae)},a.prototype.copy=function(z,F,ae,ye){if(!a.isBuffer(z))throw new TypeError("argument should be a Buffer");if(ae||(ae=0),!ye&&ye!==0&&(ye=this.length),F>=z.length&&(F=z.length),F||(F=0),ye>0&&ye<ae&&(ye=ae),ye===ae||z.length===0||this.length===0)return 0;if(F<0)throw new RangeError("targetStart out of bounds");if(ae<0||ae>=this.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("sourceEnd out of bounds");ye>this.length&&(ye=this.length),z.length-F<ye-ae&&(ye=z.length-F+ae);const Le=ye-ae;return this===z&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(F,ae,ye):Uint8Array.prototype.set.call(z,this.subarray(ae,ye),F),Le},a.prototype.fill=function(z,F,ae,ye){if(typeof z=="string"){if(typeof F=="string"?(ye=F,F=0,ae=this.length):typeof ae=="string"&&(ye=ae,ae=this.length),ye!==void 0&&typeof ye!="string")throw new TypeError("encoding must be a string");if(typeof ye=="string"&&!a.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);if(z.length===1){const ke=z.charCodeAt(0);(ye==="utf8"&&ke<128||ye==="latin1")&&(z=ke)}}else typeof z=="number"?z=z&255:typeof z=="boolean"&&(z=Number(z));if(F<0||this.length<F||this.length<ae)throw new RangeError("Out of range index");if(ae<=F)return this;F=F>>>0,ae=ae===void 0?this.length:ae>>>0,z||(z=0);let Le;if(typeof z=="number")for(Le=F;Le<ae;++Le)this[Le]=z;else{const ke=a.isBuffer(z)?z:a.from(z,ye),Ve=ke.length;if(Ve===0)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(Le=0;Le<ae-F;++Le)this[Le+F]=ke[Le%Ve]}return this};const ge={};function Se(te,z,F){ge[te]=class extends F{constructor(){super(),Object.defineProperty(this,"message",{value:z.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${te}]`,this.stack,delete this.name}get code(){return te}set code(ye){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ye,writable:!0})}toString(){return`${this.name} [${te}]: ${this.message}`}}}Se("ERR_BUFFER_OUT_OF_BOUNDS",function(te){return te?`${te} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Se("ERR_INVALID_ARG_TYPE",function(te,z){return`The "${te}" argument must be of type number. Received type ${typeof z}`},TypeError),Se("ERR_OUT_OF_RANGE",function(te,z,F){let ae=`The value of "${te}" is out of range.`,ye=F;return Number.isInteger(F)&&Math.abs(F)>2**32?ye=xe(String(F)):typeof F=="bigint"&&(ye=String(F),(F>BigInt(2)**BigInt(32)||F<-(BigInt(2)**BigInt(32)))&&(ye=xe(ye)),ye+="n"),ae+=` It must be ${z}. Received ${ye}`,ae},RangeError);function xe(te){let z="",F=te.length;const ae=te[0]==="-"?1:0;for(;F>=ae+4;F-=3)z=`_${te.slice(F-3,F)}${z}`;return`${te.slice(0,F)}${z}`}function Me(te,z,F){Oe(z,"offset"),(te[z]===void 0||te[z+F]===void 0)&&be(z,te.length-(F+1))}function he(te,z,F,ae,ye,Le){if(te>F||te<z){const ke=typeof z=="bigint"?"n":"";let Ve;throw Le>3?z===0||z===BigInt(0)?Ve=`>= 0${ke} and < 2${ke} ** ${(Le+1)*8}${ke}`:Ve=`>= -(2${ke} ** ${(Le+1)*8-1}${ke}) and < 2 ** ${(Le+1)*8-1}${ke}`:Ve=`>= ${z}${ke} and <= ${F}${ke}`,new ge.ERR_OUT_OF_RANGE("value",Ve,te)}Me(ae,ye,Le)}function Oe(te,z){if(typeof te!="number")throw new ge.ERR_INVALID_ARG_TYPE(z,"number",te)}function be(te,z,F){throw Math.floor(te)!==te?(Oe(te,F),new ge.ERR_OUT_OF_RANGE(F||"offset","an integer",te)):z<0?new ge.ERR_BUFFER_OUT_OF_BOUNDS:new ge.ERR_OUT_OF_RANGE(F||"offset",`>= ${F?1:0} and <= ${z}`,te)}const Te=/[^+/0-9A-Za-z-_]/g;function Re(te){if(te=te.split("=")[0],te=te.trim().replace(Te,""),te.length<2)return"";for(;te.length%4!==0;)te=te+"=";return te}function $e(te,z){z=z||1/0;let F;const ae=te.length;let ye=null;const Le=[];for(let ke=0;ke<ae;++ke){if(F=te.charCodeAt(ke),F>55295&&F<57344){if(!ye){if(F>56319){(z-=3)>-1&&Le.push(239,191,189);continue}else if(ke+1===ae){(z-=3)>-1&&Le.push(239,191,189);continue}ye=F;continue}if(F<56320){(z-=3)>-1&&Le.push(239,191,189),ye=F;continue}F=(ye-55296<<10|F-56320)+65536}else ye&&(z-=3)>-1&&Le.push(239,191,189);if(ye=null,F<128){if((z-=1)<0)break;Le.push(F)}else if(F<2048){if((z-=2)<0)break;Le.push(F>>6|192,F&63|128)}else if(F<65536){if((z-=3)<0)break;Le.push(F>>12|224,F>>6&63|128,F&63|128)}else if(F<1114112){if((z-=4)<0)break;Le.push(F>>18|240,F>>12&63|128,F>>6&63|128,F&63|128)}else throw new Error("Invalid code point")}return Le}function ve(te){const z=[];for(let F=0;F<te.length;++F)z.push(te.charCodeAt(F)&255);return z}function me(te,z){let F,ae,ye;const Le=[];for(let ke=0;ke<te.length&&!((z-=2)<0);++ke)F=te.charCodeAt(ke),ae=F>>8,ye=F%256,Le.push(ye),Le.push(ae);return Le}function We(te){return e.toByteArray(Re(te))}function Xe(te,z,F,ae){let ye;for(ye=0;ye<ae&&!(ye+F>=z.length||ye>=te.length);++ye)z[ye+F]=te[ye];return ye}function xt(te,z){return te instanceof z||te!=null&&te.constructor!=null&&te.constructor.name!=null&&te.constructor.name===z.name}function fe(te){return te!==te}const ie=function(){const te="0123456789abcdef",z=new Array(256);for(let F=0;F<16;++F){const ae=F*16;for(let ye=0;ye<16;++ye)z[ae+ye]=te[F]+te[ye]}return z}();function Ae(te){return typeof BigInt>"u"?Je:te}function Je(){throw new Error("BigInt not supported")}})(Fj);function rDe(t){return e=>(e||[]).map(({key:n,...r})=>ce.jsx(kj,{_key:n,...t,...r},n))}const nw=["children","rawChildren","htmlChildren","bgChildren"];function zj({children:t,rawChildren:e,htmlChildren:n,bgChildren:r,...i}){const s=E.useMemo(()=>$u.parse(Ic.location.search),[]),{response:o}=xhe(s.scene,[]),[a,l,c]=Nw({up:null,xrMode:s.xrMode||"VR",frameloop:s.frameloop||"demand",children:[],htmlChildren:[],rawChildren:[],bgChildren:[],...i}),[u,f]=E.useState({}),{showError:h}=E.useContext(rb),{downlink:d}=E.useContext(Ur);E.useEffect(()=>{if(!s.scene)return;const A=s.scene.toLowerCase();let T;if(A.endsWith(".json"))T=o.data;else if(A.endsWith(".yml")||A.endsWith(".yaml"))T=Upe.load(o.data);else if(s.scene)try{const w=new Fj.Buffer(s.scene,"base64");T=vk(w)}catch(w){console.log("Failed to parse scene",w),T={children:[]}}else console.log("not implemented");a&&l(T),f(YOe(T.children,!1))},[s.scene,o.data]),Mr(()=>({"Camera Control":ip({show_cameras:{value:!1,label:"Show Cameras"}},{collapsed:!0}),Share:_g(()=>{const A=_k(a);if(A.length>1e4)return h(`The scene likely contains a large amount of data. To share, please replace 
        geometry data with an URI. Length is ${A.length} bytes.`);const T=String.fromCharCode.apply(null,A),w=btoa(T),M=new URL(Ic.location);M.searchParams.set("scene",w),Ic.location.href=M.toString()},{label:"Share Scene"}),Scene:ip({}),Render:ip({},{collapsed:!0}),"Scene.Options":ip({...u},{collapsed:!0,order:-2})}),[u,a]),E.useEffect(()=>{const A=d.subscribe("SET",({etype:S,data:R})=>{R.tag!=="Scene"&&h(`The top level node of the SET operation must be a <Scene/> object, got <${R.tag}/> instead.`),l(R)}),T=d.subscribe("ADD",({etype:S,data:R})=>{const{nodes:O,to:L}=R;let B;for(const N of O)try{const $=IOe(c.current,N,L);B=B||$}catch($){h(`Failed to add node ${N.key} to ${L}. ${$}`)}B&&l({...c.current})}),w=d.subscribe("UPDATE",({etype:S,data:R})=>{let O=!1;const{nodes:L}=R;for(const{key:B,...N}of L){const $=hg(c.current,B,nw);$?(Object.assign($,N),O=!0):console.log("node not found",B,c.current)}O&&l({...c.current})}),M=d.subscribe("UPSERT",({etype:S,data:R})=>{const{nodes:O,to:L}=R,B=L||"children";if(nw.indexOf(B)>-1)tD(c.current,O,B);else{const N=hg(c.current,B,nw);if(!N)return h(`Failed to find parent ${B}`);tD(N,O,"children")}l({...c.current})}),C=d.subscribe("REMOVE",({etype:S,data:R})=>{const{keys:O}=R;let L;for(const B of O){const N=ROe(c.current,B);L=L||N}L&&l({...c.current})});return()=>{A(),T(),w(),M(),C()}},[]);const{children:p,htmlChildren:m,rawChildren:g,bgChildren:v,...x}=a,y=E.useCallback(rDe(),[]);return ce.jsx(DG,{rawChildren:g.length?y(g):e||[],htmlChildren:m.length?y(m):n||[],bgChildren:v.length?y(v):r||[],...x,children:p.length?y(p):t||[]})}const rb=E.createContext({showError:t=>console.error(t),showInfo:t=>console.info(t),showSuccess:t=>console.log(t),showWarning:t=>console.warn(t),showModal:t=>{console.log(t)}}),gBe=rb.Provider;function vBe({style:t={},...e}){const n=E.useMemo(()=>{const s=$u.parse(Ic.location.search);return typeof s.collapseMenu=="string"&&(s.collapseMenu=s.collapseMenu.toLowerCase()),s},[]),r=E.useMemo(()=>n.collapseMenu==="true",[n.collapseMenu]),i=E.useMemo(()=>({position:"absolute",width:"100%",height:"100%",zIndex:10,...t}),[t]);return ce.jsxs(_re,{children:[ce.jsx(zj,{style:i,...e}),ce.jsx(ok,{theme:{sizes:{rootWidth:"380px",controlWidth:"200px",numberInputMinWidth:"56px"}},collapsed:r})]})}export{ks as $,hh as A,Yn as B,bt as C,gr as D,Xr as E,es as F,Cs as G,r9 as H,kg as I,Rue as J,vs as K,Cn as L,Pn as M,Ln as N,Zp as O,Fo as P,js as Q,p5 as R,Fr as S,Vn as T,Gu as U,qe as V,_re as W,zE as X,kn as Y,ur as Z,GF as _,Ti as a,NE as a0,Au as a1,OE as a2,B3 as a3,Da as a4,Wt as a5,gBe as a6,vBe as a7,Qr as a8,ml as b,XOe as c,Xn as d,un as e,dH as f,P1e as g,on as h,Ot as i,Or as j,yt as k,J as l,tm as m,GE as n,Dn as o,ce as p,Fi as q,Qt as r,K1 as s,eh as t,mo as u,Sg as v,Ws as w,zu as x,Er as y,mi as z};
